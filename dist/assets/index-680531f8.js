import"https://cdn.jsdelivr.net/npm/tinymce";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();const main="";function makeMap(r,t){const n=Object.create(null),o=r.split(",");for(let a=0;a<o.length;a++)n[o[a]]=!0;return t?a=>!!n[a.toLowerCase()]:a=>!!n[a]}const EMPTY_OBJ$1={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=r=>onRE.test(r),isModelListener=r=>r.startsWith("onUpdate:"),extend$2=Object.assign,remove=(r,t)=>{const n=r.indexOf(t);n>-1&&r.splice(n,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$1=(r,t)=>hasOwnProperty$2.call(r,t),isArray$4=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isDate$1=r=>toTypeString(r)==="[object Date]",isRegExp$2=r=>toTypeString(r)==="[object RegExp]",isFunction$2=r=>typeof r=="function",isString$2=r=>typeof r=="string",isSymbol=r=>typeof r=="symbol",isObject$6=r=>r!==null&&typeof r=="object",isPromise=r=>isObject$6(r)&&isFunction$2(r.then)&&isFunction$2(r.catch),objectToString=Object.prototype.toString,toTypeString=r=>objectToString.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject$2=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString$2(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const t=Object.create(null);return n=>t[n]||(t[n]=r(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(t,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,t)=>!Object.is(r,t),invokeArrayFns=(r,t)=>{for(let n=0;n<r.length;n++)r[n](t)},def=(r,t,n)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:n})},looseToNumber=r=>{const t=parseFloat(r);return isNaN(t)?r:t},toNumber=r=>{const t=isString$2(r)?Number(r):NaN;return isNaN(t)?r:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED);function normalizeStyle$1(r){if(isArray$4(r)){const t={};for(let n=0;n<r.length;n++){const o=r[n],a=isString$2(o)?parseStringStyle(o):normalizeStyle$1(o);if(a)for(const l in a)t[l]=a[l]}return t}else{if(isString$2(r))return r;if(isObject$6(r))return r}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const t={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const o=n.split(propertyDelimiterRE);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function normalizeClass(r){let t="";if(isString$2(r))t=r;else if(isArray$4(r))for(let n=0;n<r.length;n++){const o=normalizeClass(r[n]);o&&(t+=o+" ")}else if(isObject$6(r))for(const n in r)r[n]&&(t+=n+" ");return t.trim()}function normalizeProps(r){if(!r)return null;let{class:t,style:n}=r;return t&&!isString$2(t)&&(r.class=normalizeClass(t)),n&&(r.style=normalizeStyle$1(n)),r}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}function looseCompareArrays(r,t){if(r.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<r.length;o++)n=looseEqual(r[o],t[o]);return n}function looseEqual(r,t){if(r===t)return!0;let n=isDate$1(r),o=isDate$1(t);if(n||o)return n&&o?r.getTime()===t.getTime():!1;if(n=isSymbol(r),o=isSymbol(t),n||o)return r===t;if(n=isArray$4(r),o=isArray$4(t),n||o)return n&&o?looseCompareArrays(r,t):!1;if(n=isObject$6(r),o=isObject$6(t),n||o){if(!n||!o)return!1;const a=Object.keys(r).length,l=Object.keys(t).length;if(a!==l)return!1;for(const d in r){const g=r.hasOwnProperty(d),y=t.hasOwnProperty(d);if(g&&!y||!g&&y||!looseEqual(r[d],t[d]))return!1}}return String(r)===String(t)}function looseIndexOf(r,t){return r.findIndex(n=>looseEqual(n,t))}const toDisplayString=r=>isString$2(r)?r:r==null?"":isArray$4(r)||isObject$6(r)&&(r.toString===objectToString||!isFunction$2(r.toString))?JSON.stringify(r,replacer,2):String(r),replacer=(r,t)=>t&&t.__v_isRef?replacer(r,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a])=>(n[`${o} =>`]=a,n),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$6(t)&&!isArray$4(t)&&!isPlainObject$2(t)?String(t):t;let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(r){return new EffectScope(r)}function recordEffectScope(r,t=activeEffectScope){t&&t.active&&t.effects.push(r)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(r){activeEffectScope&&activeEffectScope.cleanups.push(r)}const createDep=r=>{const t=new Set(r);return t.w=0,t.n=0,t},wasTracked=r=>(r.w&trackOpBit)>0,newTracked=r=>(r.n&trackOpBit)>0,initDepMarkers=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=trackOpBit},finalizeDepMarkers=r=>{const{deps:t}=r;if(t.length){let n=0;for(let o=0;o<t.length;o++){const a=t[o];wasTracked(a)&&!newTracked(a)?a.delete(r):t[n++]=a,a.w&=~trackOpBit,a.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,n=null,o){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,o)}run(){if(!this.active)return this.fn();let t=activeEffect,n=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(r){const{deps:t}=r;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(r);t.length=0}}function effect(r,t){r.effect&&(r=r.effect.fn);const n=new ReactiveEffect(r);t&&(extend$2(n,t),t.scope&&recordEffectScope(n,t.scope)),(!t||!t.lazy)&&n.run();const o=n.run.bind(n);return o.effect=n,o}function stop$1(r){r.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function track(r,t,n){if(shouldTrack&&activeEffect){let o=targetMap.get(r);o||targetMap.set(r,o=new Map);let a=o.get(n);a||o.set(n,a=createDep()),trackEffects(a)}}function trackEffects(r,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(r)||(r.n|=trackOpBit,n=!wasTracked(r)):n=!r.has(activeEffect),n&&(r.add(activeEffect),activeEffect.deps.push(r))}function trigger$2(r,t,n,o,a,l){const d=targetMap.get(r);if(!d)return;let g=[];if(t==="clear")g=[...d.values()];else if(n==="length"&&isArray$4(r)){const y=Number(o);d.forEach((S,x)=>{(x==="length"||x>=y)&&g.push(S)})}else switch(n!==void 0&&g.push(d.get(n)),t){case"add":isArray$4(r)?isIntegerKey(n)&&g.push(d.get("length")):(g.push(d.get(ITERATE_KEY)),isMap(r)&&g.push(d.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4(r)||(g.push(d.get(ITERATE_KEY)),isMap(r)&&g.push(d.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&g.push(d.get(ITERATE_KEY));break}if(g.length===1)g[0]&&triggerEffects(g[0]);else{const y=[];for(const S of g)S&&y.push(...S);triggerEffects(createDep(y))}}function triggerEffects(r,t){const n=isArray$4(r)?r:[...r];for(const o of n)o.computed&&triggerEffect(o);for(const o of n)o.computed||triggerEffect(o)}function triggerEffect(r,t){(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function getDepFromReactive(r,t){var n;return(n=targetMap.get(r))==null?void 0:n.get(t)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...n){const o=toRaw(this);for(let l=0,d=this.length;l<d;l++)track(o,"get",l+"");const a=o[t](...n);return a===-1||a===!1?o[t](...n.map(toRaw)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...n){pauseTracking();const o=toRaw(this)[t].apply(this,n);return resetTracking(),o}}),r}function hasOwnProperty$1(r){const t=toRaw(this);return track(t,"has",r),t.hasOwnProperty(r)}function createGetter(r=!1,t=!1){return function(o,a,l){if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return t;if(a==="__v_raw"&&l===(r?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(o))return o;const d=isArray$4(o);if(!r){if(d&&hasOwn$1(arrayInstrumentations,a))return Reflect.get(arrayInstrumentations,a,l);if(a==="hasOwnProperty")return hasOwnProperty$1}const g=Reflect.get(o,a,l);return(isSymbol(a)?builtInSymbols.has(a):isNonTrackableKeys(a))||(r||track(o,"get",a),t)?g:isRef(g)?d&&isIntegerKey(a)?g:g.value:isObject$6(g)?r?readonly(g):reactive(g):g}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(r=!1){return function(n,o,a,l){let d=n[o];if(isReadonly(d)&&isRef(d)&&!isRef(a))return!1;if(!r&&(!isShallow(a)&&!isReadonly(a)&&(d=toRaw(d),a=toRaw(a)),!isArray$4(n)&&isRef(d)&&!isRef(a)))return d.value=a,!0;const g=isArray$4(n)&&isIntegerKey(o)?Number(o)<n.length:hasOwn$1(n,o),y=Reflect.set(n,o,a,l);return n===toRaw(l)&&(g?hasChanged(a,d)&&trigger$2(n,"set",o,a):trigger$2(n,"add",o,a)),y}}function deleteProperty(r,t){const n=hasOwn$1(r,t);r[t];const o=Reflect.deleteProperty(r,t);return o&&n&&trigger$2(r,"delete",t,void 0),o}function has$1$1(r,t){const n=Reflect.has(r,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(r,"has",t),n}function ownKeys(r){return track(r,"iterate",isArray$4(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1$1,ownKeys},readonlyHandlers={get:readonlyGet,set(r,t){return!0},deleteProperty(r,t){return!0}},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend$2({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function get$2(r,t,n=!1,o=!1){r=r.__v_raw;const a=toRaw(r),l=toRaw(t);n||(t!==l&&track(a,"get",t),track(a,"get",l));const{has:d}=getProto(a),g=o?toShallow:n?toReadonly:toReactive;if(d.call(a,t))return g(r.get(t));if(d.call(a,l))return g(r.get(l));r!==a&&r.get(t)}function has$2(r,t=!1){const n=this.__v_raw,o=toRaw(n),a=toRaw(r);return t||(r!==a&&track(o,"has",r),track(o,"has",a)),r===a?n.has(r):n.has(r)||n.has(a)}function size(r,t=!1){return r=r.__v_raw,!t&&track(toRaw(r),"iterate",ITERATE_KEY),Reflect.get(r,"size",r)}function add$1(r){r=toRaw(r);const t=toRaw(this);return getProto(t).has.call(t,r)||(t.add(r),trigger$2(t,"add",r,r)),this}function set$3(r,t){t=toRaw(t);const n=toRaw(this),{has:o,get:a}=getProto(n);let l=o.call(n,r);l||(r=toRaw(r),l=o.call(n,r));const d=a.call(n,r);return n.set(r,t),l?hasChanged(t,d)&&trigger$2(n,"set",r,t):trigger$2(n,"add",r,t),this}function deleteEntry(r){const t=toRaw(this),{has:n,get:o}=getProto(t);let a=n.call(t,r);a||(r=toRaw(r),a=n.call(t,r)),o&&o.call(t,r);const l=t.delete(r);return a&&trigger$2(t,"delete",r,void 0),l}function clear$2(){const r=toRaw(this),t=r.size!==0,n=r.clear();return t&&trigger$2(r,"clear",void 0,void 0),n}function createForEach(r,t){return function(o,a){const l=this,d=l.__v_raw,g=toRaw(d),y=t?toShallow:r?toReadonly:toReactive;return!r&&track(g,"iterate",ITERATE_KEY),d.forEach((S,x)=>o.call(a,y(S),y(x),l))}}function createIterableMethod(r,t,n){return function(...o){const a=this.__v_raw,l=toRaw(a),d=isMap(l),g=r==="entries"||r===Symbol.iterator&&d,y=r==="keys"&&d,S=a[r](...o),x=n?toShallow:t?toReadonly:toReactive;return!t&&track(l,"iterate",y?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:w,done:c}=S.next();return c?{value:w,done:c}:{value:g?[x(w[0]),x(w[1])]:x(w),done:c}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...t){return r==="delete"?!1:this}}function createInstrumentations(){const r={get(l){return get$2(this,l)},get size(){return size(this)},has:has$2,add:add$1,set:set$3,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},t={get(l){return get$2(this,l,!1,!0)},get size(){return size(this)},has:has$2,add:add$1,set:set$3,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},n={get(l){return get$2(this,l,!0)},get size(){return size(this,!0)},has(l){return has$2.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},o={get(l){return get$2(this,l,!0,!0)},get size(){return size(this,!0)},has(l){return has$2.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{r[l]=createIterableMethod(l,!1,!1),n[l]=createIterableMethod(l,!0,!1),t[l]=createIterableMethod(l,!1,!0),o[l]=createIterableMethod(l,!0,!0)}),[r,n,t,o]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(r,t){const n=t?r?shallowReadonlyInstrumentations:shallowInstrumentations:r?readonlyInstrumentations:mutableInstrumentations;return(o,a,l)=>a==="__v_isReactive"?!r:a==="__v_isReadonly"?r:a==="__v_raw"?o:Reflect.get(hasOwn$1(n,a)&&a in o?n:o,a,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(r){return createReactiveObject(r,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(r,t,n,o,a){if(!isObject$6(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const l=a.get(r);if(l)return l;const d=getTargetType(r);if(d===0)return r;const g=new Proxy(r,d===2?o:n);return a.set(r,g),g}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return isReactive(r)||isReadonly(r)}function toRaw(r){const t=r&&r.__v_raw;return t?toRaw(t):r}function markRaw(r){return def(r,"__v_skip",!0),r}const toReactive=r=>isObject$6(r)?reactive(r):r,toReadonly=r=>isObject$6(r)?readonly(r):r;function trackRefValue(r){shouldTrack&&activeEffect&&(r=toRaw(r),trackEffects(r.dep||(r.dep=createDep())))}function triggerRefValue(r,t){r=toRaw(r);const n=r.dep;n&&triggerEffects(n)}function isRef(r){return!!(r&&r.__v_isRef===!0)}function ref(r){return createRef(r,!1)}function shallowRef(r){return createRef(r,!0)}function createRef(r,t){return isRef(r)?r:new RefImpl(r,t)}class RefImpl{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:toRaw(t),this._value=n?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const n=this.__v_isShallow||isShallow(t)||isReadonly(t);t=n?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:toReactive(t),triggerRefValue(this))}}function triggerRef(r){triggerRefValue(r)}function unref(r){return isRef(r)?r.value:r}function toValue(r){return isFunction$2(r)?r():unref(r)}const shallowUnwrapHandlers={get:(r,t,n)=>unref(Reflect.get(r,t,n)),set:(r,t,n,o)=>{const a=r[t];return isRef(a)&&!isRef(n)?(a.value=n,!0):Reflect.set(r,t,n,o)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}class CustomRefImpl{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:o}=t(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=n,this._set=o}get value(){return this._get()}set value(t){this._set(t)}}function customRef(r){return new CustomRefImpl(r)}function toRefs(r){const t=isArray$4(r)?new Array(r.length):{};for(const n in r)t[n]=propertyToRef(r,n);return t}class ObjectRefImpl{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(r,t,n){return isRef(r)?r:isFunction$2(r)?new GetterRefImpl(r):isObject$6(r)&&arguments.length>1?propertyToRef(r,t,n):ref(r)}function propertyToRef(r,t,n){const o=r[t];return isRef(o)?o:new ObjectRefImpl(r,t,n)}class ComputedRefImpl{constructor(t,n,o,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=o}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(r,t,n=!1){let o,a;const l=isFunction$2(r);return l?(o=r,a=NOOP):(o=r.get,a=r.set),new ComputedRefImpl(o,a,l||!a,n)}function warn$1(r,...t){}function assertNumber(r,t){}function callWithErrorHandling(r,t,n,o){let a;try{a=o?r(...o):r()}catch(l){handleError(l,t,n)}return a}function callWithAsyncErrorHandling(r,t,n,o){if(isFunction$2(r)){const l=callWithErrorHandling(r,t,n,o);return l&&isPromise(l)&&l.catch(d=>{handleError(d,t,n)}),l}const a=[];for(let l=0;l<r.length;l++)a.push(callWithAsyncErrorHandling(r[l],t,n,o));return a}function handleError(r,t,n,o=!0){const a=t?t.vnode:null;if(t){let l=t.parent;const d=t.proxy,g=n;for(;l;){const S=l.ec;if(S){for(let x=0;x<S.length;x++)if(S[x](r,d,g)===!1)return}l=l.parent}const y=t.appContext.config.errorHandler;if(y){callWithErrorHandling(y,null,10,[r,d,g]);return}}logError$1(r,n,a,o)}function logError$1(r,t,n,o=!0){console.error(r)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const t=currentFlushPromise||resolvedPromise;return r?t.then(this?r.bind(this):r):t}function findInsertionIndex(r){let t=flushIndex+1,n=queue.length;for(;t<n;){const o=t+n>>>1;getId$1(queue[o])<r?t=o+1:n=o}return t}function queueJob(r){(!queue.length||!queue.includes(r,isFlushing&&r.allowRecurse?flushIndex+1:flushIndex))&&(r.id==null?queue.push(r):queue.splice(findInsertionIndex(r.id),0,r),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(r){const t=queue.indexOf(r);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(r){isArray$4(r)?pendingPostFlushCbs.push(...r):(!activePostFlushCbs||!activePostFlushCbs.includes(r,r.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(r),queueFlush()}function flushPreFlushCbs(r,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const n=queue[t];n&&n.pre&&(queue.splice(t,1),t--,n())}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((n,o)=>getId$1(n)-getId$1(o)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId$1=r=>r.id==null?1/0:r.id,comparator=(r,t)=>{const n=getId$1(r)-getId$1(t);if(n===0){if(r.pre&&!t.pre)return-1;if(t.pre&&!r.pre)return 1}return n};function flushJobs(r){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools,buffer=[];function setDevtoolsHook(r,t){var n,o;devtools=r,devtools?(devtools.enabled=!0,buffer.forEach(({event:a,args:l})=>devtools.emit(a,...l)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!((o=(n=window.navigator)==null?void 0:n.userAgent)!=null&&o.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(l=>{setDevtoolsHook(l,t)}),setTimeout(()=>{devtools||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer=[])},3e3)):buffer=[]}function emit(r,t,...n){if(r.isUnmounted)return;const o=r.vnode.props||EMPTY_OBJ$1;let a=n;const l=t.startsWith("update:"),d=l&&t.slice(7);if(d&&d in o){const x=`${d==="modelValue"?"model":d}Modifiers`,{number:w,trim:c}=o[x]||EMPTY_OBJ$1;c&&(a=n.map(A=>isString$2(A)?A.trim():A)),w&&(a=n.map(looseToNumber))}let g,y=o[g=toHandlerKey(t)]||o[g=toHandlerKey(camelize(t))];!y&&l&&(y=o[g=toHandlerKey(hyphenate(t))]),y&&callWithAsyncErrorHandling(y,r,6,a);const S=o[g+"Once"];if(S){if(!r.emitted)r.emitted={};else if(r.emitted[g])return;r.emitted[g]=!0,callWithAsyncErrorHandling(S,r,6,a)}}function normalizeEmitsOptions(r,t,n=!1){const o=t.emitsCache,a=o.get(r);if(a!==void 0)return a;const l=r.emits;let d={},g=!1;if(!isFunction$2(r)){const y=S=>{const x=normalizeEmitsOptions(S,t,!0);x&&(g=!0,extend$2(d,x))};!n&&t.mixins.length&&t.mixins.forEach(y),r.extends&&y(r.extends),r.mixins&&r.mixins.forEach(y)}return!l&&!g?(isObject$6(r)&&o.set(r,null),null):(isArray$4(l)?l.forEach(y=>d[y]=null):extend$2(d,l),isObject$6(r)&&o.set(r,d),d)}function isEmitListener(r,t){return!r||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$1(r,t[0].toLowerCase()+t.slice(1))||hasOwn$1(r,hyphenate(t))||hasOwn$1(r,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const t=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,t}function pushScopeId(r){currentScopeId=r}function popScopeId(){currentScopeId=null}const withScopeId=r=>withCtx;function withCtx(r,t=currentRenderingInstance,n){if(!t||r._n)return r;const o=(...a)=>{o._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(t);let d;try{d=r(...a)}finally{setCurrentRenderingInstance(l),o._d&&setBlockTracking(1)}return d};return o._n=!0,o._c=!0,o._d=!0,o}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:t,vnode:n,proxy:o,withProxy:a,props:l,propsOptions:[d],slots:g,attrs:y,emit:S,render:x,renderCache:w,data:c,setupState:A,ctx:R,inheritAttrs:L}=r;let $,O;const z=setCurrentRenderingInstance(r);try{if(n.shapeFlag&4){const j=a||o;$=normalizeVNode(x.call(j,j,w,l,A,c,R)),O=y}else{const j=t;$=normalizeVNode(j.length>1?j(l,{attrs:y,slots:g,emit:S}):j(l,null)),O=t.props?y:getFunctionalFallthrough(y)}}catch(j){blockStack.length=0,handleError(j,r,1),$=createVNode$1(Comment)}let V=$;if(O&&L!==!1){const j=Object.keys(O),{shapeFlag:K}=V;j.length&&K&7&&(d&&j.some(isModelListener)&&(O=filterModelListeners(O,d)),V=cloneVNode(V,O))}return n.dirs&&(V=cloneVNode(V),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&(V.transition=n.transition),$=V,setCurrentRenderingInstance(z),$}function filterSingleRoot(r){let t;for(let n=0;n<r.length;n++){const o=r[n];if(isVNode(o)){if(o.type!==Comment||o.children==="v-if"){if(t)return;t=o}}else return}return t}const getFunctionalFallthrough=r=>{let t;for(const n in r)(n==="class"||n==="style"||isOn(n))&&((t||(t={}))[n]=r[n]);return t},filterModelListeners=(r,t)=>{const n={};for(const o in r)(!isModelListener(o)||!(o.slice(9)in t))&&(n[o]=r[o]);return n};function shouldUpdateComponent(r,t,n){const{props:o,children:a,component:l}=r,{props:d,children:g,patchFlag:y}=t,S=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&y>=0){if(y&1024)return!0;if(y&16)return o?hasPropsChanged(o,d,S):!!d;if(y&8){const x=t.dynamicProps;for(let w=0;w<x.length;w++){const c=x[w];if(d[c]!==o[c]&&!isEmitListener(S,c))return!0}}}else return(a||g)&&(!g||!g.$stable)?!0:o===d?!1:o?d?hasPropsChanged(o,d,S):!0:!!d;return!1}function hasPropsChanged(r,t,n){const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!0;for(let a=0;a<o.length;a++){const l=o[a];if(t[l]!==r[l]&&!isEmitListener(n,l))return!0}return!1}function updateHOCHostEl({vnode:r,parent:t},n){for(;t&&t.subTree===r;)(r=t.vnode).el=n,t=t.parent}const isSuspense=r=>r.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(r,t,n,o,a,l,d,g,y,S){r==null?mountSuspense(t,n,o,a,l,d,g,y,S):patchSuspense(r,t,n,o,a,d,g,y,S)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(r,t){const n=r.props&&r.props[t];isFunction$2(n)&&n()}function mountSuspense(r,t,n,o,a,l,d,g,y){const{p:S,o:{createElement:x}}=y,w=x("div"),c=r.suspense=createSuspenseBoundary(r,a,o,t,w,n,l,d,g,y);S(null,c.pendingBranch=r.ssContent,w,null,o,c,l,d),c.deps>0?(triggerEvent(r,"onPending"),triggerEvent(r,"onFallback"),S(null,r.ssFallback,t,n,o,null,l,d),setActiveBranch(c,r.ssFallback)):c.resolve(!1,!0)}function patchSuspense(r,t,n,o,a,l,d,g,{p:y,um:S,o:{createElement:x}}){const w=t.suspense=r.suspense;w.vnode=t,t.el=r.el;const c=t.ssContent,A=t.ssFallback,{activeBranch:R,pendingBranch:L,isInFallback:$,isHydrating:O}=w;if(L)w.pendingBranch=c,isSameVNodeType(c,L)?(y(L,c,w.hiddenContainer,null,a,w,l,d,g),w.deps<=0?w.resolve():$&&(y(R,A,n,o,a,null,l,d,g),setActiveBranch(w,A))):(w.pendingId++,O?(w.isHydrating=!1,w.activeBranch=L):S(L,a,w),w.deps=0,w.effects.length=0,w.hiddenContainer=x("div"),$?(y(null,c,w.hiddenContainer,null,a,w,l,d,g),w.deps<=0?w.resolve():(y(R,A,n,o,a,null,l,d,g),setActiveBranch(w,A))):R&&isSameVNodeType(c,R)?(y(R,c,n,o,a,w,l,d,g),w.resolve(!0)):(y(null,c,w.hiddenContainer,null,a,w,l,d,g),w.deps<=0&&w.resolve()));else if(R&&isSameVNodeType(c,R))y(R,c,n,o,a,w,l,d,g),setActiveBranch(w,c);else if(triggerEvent(t,"onPending"),w.pendingBranch=c,w.pendingId++,y(null,c,w.hiddenContainer,null,a,w,l,d,g),w.deps<=0)w.resolve();else{const{timeout:z,pendingId:V}=w;z>0?setTimeout(()=>{w.pendingId===V&&w.fallback(A)},z):z===0&&w.fallback(A)}}function createSuspenseBoundary(r,t,n,o,a,l,d,g,y,S,x=!1){const{p:w,m:c,um:A,n:R,o:{parentNode:L,remove:$}}=S;let O;const z=isVNodeSuspensible(r);z&&t!=null&&t.pendingBranch&&(O=t.pendingId,t.deps++);const V=r.props?toNumber(r.props.timeout):void 0,j={vnode:r,parent:t,parentComponent:n,isSVG:d,container:o,hiddenContainer:a,anchor:l,deps:0,pendingId:0,timeout:typeof V=="number"?V:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:x,isUnmounted:!1,effects:[],resolve(K=!1,Z=!1){const{vnode:q,activeBranch:ie,pendingBranch:te,pendingId:oe,effects:re,parentComponent:he,container:_e}=j;if(j.isHydrating)j.isHydrating=!1;else if(!K){const Q=ie&&te.transition&&te.transition.mode==="out-in";Q&&(ie.transition.afterLeave=()=>{oe===j.pendingId&&c(te,_e,Ne,0)});let{anchor:Ne}=j;ie&&(Ne=R(ie),A(ie,he,j,!0)),Q||c(te,_e,Ne,0)}setActiveBranch(j,te),j.pendingBranch=null,j.isInFallback=!1;let me=j.parent,be=!1;for(;me;){if(me.pendingBranch){me.effects.push(...re),be=!0;break}me=me.parent}be||queuePostFlushCb(re),j.effects=[],z&&t&&t.pendingBranch&&O===t.pendingId&&(t.deps--,t.deps===0&&!Z&&t.resolve()),triggerEvent(q,"onResolve")},fallback(K){if(!j.pendingBranch)return;const{vnode:Z,activeBranch:q,parentComponent:ie,container:te,isSVG:oe}=j;triggerEvent(Z,"onFallback");const re=R(q),he=()=>{j.isInFallback&&(w(null,K,te,re,ie,null,oe,g,y),setActiveBranch(j,K))},_e=K.transition&&K.transition.mode==="out-in";_e&&(q.transition.afterLeave=he),j.isInFallback=!0,A(q,ie,null,!0),_e||he()},move(K,Z,q){j.activeBranch&&c(j.activeBranch,K,Z,q),j.container=K},next(){return j.activeBranch&&R(j.activeBranch)},registerDep(K,Z){const q=!!j.pendingBranch;q&&j.deps++;const ie=K.vnode.el;K.asyncDep.catch(te=>{handleError(te,K,0)}).then(te=>{if(K.isUnmounted||j.isUnmounted||j.pendingId!==K.suspenseId)return;K.asyncResolved=!0;const{vnode:oe}=K;handleSetupResult(K,te,!1),ie&&(oe.el=ie);const re=!ie&&K.subTree.el;Z(K,oe,L(ie||K.subTree.el),ie?null:R(K.subTree),j,d,y),re&&$(re),updateHOCHostEl(K,oe.el),q&&--j.deps===0&&j.resolve()})},unmount(K,Z){j.isUnmounted=!0,j.activeBranch&&A(j.activeBranch,n,K,Z),j.pendingBranch&&A(j.pendingBranch,n,K,Z)}};return j}function hydrateSuspense(r,t,n,o,a,l,d,g,y){const S=t.suspense=createSuspenseBoundary(t,o,n,r.parentNode,document.createElement("div"),null,a,l,d,g,!0),x=y(r,S.pendingBranch=t.ssContent,n,S,l,d);return S.deps===0&&S.resolve(!1,!0),x}function normalizeSuspenseChildren(r){const{shapeFlag:t,children:n}=r,o=t&32;r.ssContent=normalizeSuspenseSlot(o?n.default:n),r.ssFallback=o?normalizeSuspenseSlot(n.fallback):createVNode$1(Comment)}function normalizeSuspenseSlot(r){let t;if(isFunction$2(r)){const n=isBlockTreeEnabled&&r._c;n&&(r._d=!1,openBlock()),r=r(),n&&(r._d=!0,t=currentBlock,closeBlock())}return isArray$4(r)&&(r=filterSingleRoot(r)),r=normalizeVNode(r),t&&!r.dynamicChildren&&(r.dynamicChildren=t.filter(n=>n!==r)),r}function queueEffectWithSuspense(r,t){t&&t.pendingBranch?isArray$4(r)?t.effects.push(...r):t.effects.push(r):queuePostFlushCb(r)}function setActiveBranch(r,t){r.activeBranch=t;const{vnode:n,parentComponent:o}=r,a=n.el=t.el;o&&o.subTree===n&&(o.vnode.el=a,updateHOCHostEl(o,a))}function isVNodeSuspensible(r){var t;return((t=r.props)==null?void 0:t.suspensible)!=null&&r.props.suspensible!==!1}function watchEffect(r,t){return doWatch(r,null,t)}function watchPostEffect(r,t){return doWatch(r,null,{flush:"post"})}function watchSyncEffect(r,t){return doWatch(r,null,{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(r,t,n){return doWatch(r,t,n)}function doWatch(r,t,{immediate:n,deep:o,flush:a,onTrack:l,onTrigger:d}=EMPTY_OBJ$1){var g;const y=getCurrentScope()===((g=currentInstance)==null?void 0:g.scope)?currentInstance:null;let S,x=!1,w=!1;if(isRef(r)?(S=()=>r.value,x=isShallow(r)):isReactive(r)?(S=()=>r,o=!0):isArray$4(r)?(w=!0,x=r.some(j=>isReactive(j)||isShallow(j)),S=()=>r.map(j=>{if(isRef(j))return j.value;if(isReactive(j))return traverse(j);if(isFunction$2(j))return callWithErrorHandling(j,y,2)})):isFunction$2(r)?t?S=()=>callWithErrorHandling(r,y,2):S=()=>{if(!(y&&y.isUnmounted))return c&&c(),callWithAsyncErrorHandling(r,y,3,[A])}:S=NOOP,t&&o){const j=S;S=()=>traverse(j())}let c,A=j=>{c=z.onStop=()=>{callWithErrorHandling(j,y,4)}},R;if(isInSSRComponentSetup)if(A=NOOP,t?n&&callWithAsyncErrorHandling(t,y,3,[S(),w?[]:void 0,A]):S(),a==="sync"){const j=useSSRContext();R=j.__watcherHandles||(j.__watcherHandles=[])}else return NOOP;let L=w?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const $=()=>{if(z.active)if(t){const j=z.run();(o||x||(w?j.some((K,Z)=>hasChanged(K,L[Z])):hasChanged(j,L)))&&(c&&c(),callWithAsyncErrorHandling(t,y,3,[j,L===INITIAL_WATCHER_VALUE?void 0:w&&L[0]===INITIAL_WATCHER_VALUE?[]:L,A]),L=j)}else z.run()};$.allowRecurse=!!t;let O;a==="sync"?O=$:a==="post"?O=()=>queuePostRenderEffect($,y&&y.suspense):($.pre=!0,y&&($.id=y.uid),O=()=>queueJob($));const z=new ReactiveEffect(S,O);t?n?$():L=z.run():a==="post"?queuePostRenderEffect(z.run.bind(z),y&&y.suspense):z.run();const V=()=>{z.stop(),y&&y.scope&&remove(y.scope.effects,z)};return R&&R.push(V),V}function instanceWatch(r,t,n){const o=this.proxy,a=isString$2(r)?r.includes(".")?createPathGetter(o,r):()=>o[r]:r.bind(o,o);let l;isFunction$2(t)?l=t:(l=t.handler,n=t);const d=currentInstance;setCurrentInstance(this);const g=doWatch(a,l.bind(o),n);return d?setCurrentInstance(d):unsetCurrentInstance(),g}function createPathGetter(r,t){const n=t.split(".");return()=>{let o=r;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}function traverse(r,t){if(!isObject$6(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),isRef(r))traverse(r.value,t);else if(isArray$4(r))for(let n=0;n<r.length;n++)traverse(r[n],t);else if(isSet(r)||isMap(r))r.forEach(n=>{traverse(n,t)});else if(isPlainObject$2(r))for(const n in r)traverse(r[n],t);return r}function withDirectives(r,t){const n=currentRenderingInstance;if(n===null)return r;const o=getExposeProxy(n)||n.proxy,a=r.dirs||(r.dirs=[]);for(let l=0;l<t.length;l++){let[d,g,y,S=EMPTY_OBJ$1]=t[l];d&&(isFunction$2(d)&&(d={mounted:d,updated:d}),d.deep&&traverse(g),a.push({dir:d,instance:o,value:g,oldValue:void 0,arg:y,modifiers:S}))}return r}function invokeDirectiveHook(r,t,n,o){const a=r.dirs,l=t&&t.dirs;for(let d=0;d<a.length;d++){const g=a[d];l&&(g.oldValue=l[d].value);let y=g.dir[o];y&&(pauseTracking(),callWithAsyncErrorHandling(y,n,8,[r.el,g,r,t]),resetTracking())}}function useTransitionState(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{r.isMounted=!0}),onBeforeUnmount(()=>{r.isUnmounting=!0}),r}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(r,{slots:t}){const n=getCurrentInstance(),o=useTransitionState();let a;return()=>{const l=t.default&&getTransitionRawChildren(t.default(),!0);if(!l||!l.length)return;let d=l[0];if(l.length>1){for(const L of l)if(L.type!==Comment){d=L;break}}const g=toRaw(r),{mode:y}=g;if(o.isLeaving)return emptyPlaceholder(d);const S=getKeepAliveChild(d);if(!S)return emptyPlaceholder(d);const x=resolveTransitionHooks(S,g,o,n);setTransitionHooks(S,x);const w=n.subTree,c=w&&getKeepAliveChild(w);let A=!1;const{getTransitionKey:R}=S.type;if(R){const L=R();a===void 0?a=L:L!==a&&(a=L,A=!0)}if(c&&c.type!==Comment&&(!isSameVNodeType(S,c)||A)){const L=resolveTransitionHooks(c,g,o,n);if(setTransitionHooks(c,L),y==="out-in")return o.isLeaving=!0,L.afterLeave=()=>{o.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(d);y==="in-out"&&S.type!==Comment&&(L.delayLeave=($,O,z)=>{const V=getLeavingNodesForType(o,c);V[String(c.key)]=c,$._leaveCb=()=>{O(),$._leaveCb=void 0,delete x.delayedLeave},x.delayedLeave=z})}return d}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(r,t){const{leavingVNodes:n}=r;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function resolveTransitionHooks(r,t,n,o){const{appear:a,mode:l,persisted:d=!1,onBeforeEnter:g,onEnter:y,onAfterEnter:S,onEnterCancelled:x,onBeforeLeave:w,onLeave:c,onAfterLeave:A,onLeaveCancelled:R,onBeforeAppear:L,onAppear:$,onAfterAppear:O,onAppearCancelled:z}=t,V=String(r.key),j=getLeavingNodesForType(n,r),K=(ie,te)=>{ie&&callWithAsyncErrorHandling(ie,o,9,te)},Z=(ie,te)=>{const oe=te[1];K(ie,te),isArray$4(ie)?ie.every(re=>re.length<=1)&&oe():ie.length<=1&&oe()},q={mode:l,persisted:d,beforeEnter(ie){let te=g;if(!n.isMounted)if(a)te=L||g;else return;ie._leaveCb&&ie._leaveCb(!0);const oe=j[V];oe&&isSameVNodeType(r,oe)&&oe.el._leaveCb&&oe.el._leaveCb(),K(te,[ie])},enter(ie){let te=y,oe=S,re=x;if(!n.isMounted)if(a)te=$||y,oe=O||S,re=z||x;else return;let he=!1;const _e=ie._enterCb=me=>{he||(he=!0,me?K(re,[ie]):K(oe,[ie]),q.delayedLeave&&q.delayedLeave(),ie._enterCb=void 0)};te?Z(te,[ie,_e]):_e()},leave(ie,te){const oe=String(r.key);if(ie._enterCb&&ie._enterCb(!0),n.isUnmounting)return te();K(w,[ie]);let re=!1;const he=ie._leaveCb=_e=>{re||(re=!0,te(),_e?K(R,[ie]):K(A,[ie]),ie._leaveCb=void 0,j[oe]===r&&delete j[oe])};j[oe]=r,c?Z(c,[ie,he]):he()},clone(ie){return resolveTransitionHooks(ie,t,n,o)}};return q}function emptyPlaceholder(r){if(isKeepAlive(r))return r=cloneVNode(r),r.children=null,r}function getKeepAliveChild(r){return isKeepAlive(r)?r.children?r.children[0]:void 0:r}function setTransitionHooks(r,t){r.shapeFlag&6&&r.component?setTransitionHooks(r.component.subTree,t):r.shapeFlag&128?(r.ssContent.transition=t.clone(r.ssContent),r.ssFallback.transition=t.clone(r.ssFallback)):r.transition=t}function getTransitionRawChildren(r,t=!1,n){let o=[],a=0;for(let l=0;l<r.length;l++){let d=r[l];const g=n==null?d.key:String(n)+String(d.key!=null?d.key:l);d.type===Fragment?(d.patchFlag&128&&a++,o=o.concat(getTransitionRawChildren(d.children,t,g))):(t||d.type!==Comment)&&o.push(g!=null?cloneVNode(d,{key:g}):d)}if(a>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}function defineComponent(r,t){return isFunction$2(r)?(()=>extend$2({name:r.name},t,{setup:r}))():r}const isAsyncWrapper=r=>!!r.type.__asyncLoader;function defineAsyncComponent(r){isFunction$2(r)&&(r={loader:r});const{loader:t,loadingComponent:n,errorComponent:o,delay:a=200,timeout:l,suspensible:d=!0,onError:g}=r;let y=null,S,x=0;const w=()=>(x++,y=null,c()),c=()=>{let A;return y||(A=y=t().catch(R=>{if(R=R instanceof Error?R:new Error(String(R)),g)return new Promise((L,$)=>{g(R,()=>L(w()),()=>$(R),x+1)});throw R}).then(R=>A!==y&&y?y:(R&&(R.__esModule||R[Symbol.toStringTag]==="Module")&&(R=R.default),S=R,R)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:c,get __asyncResolved(){return S},setup(){const A=currentInstance;if(S)return()=>createInnerComp(S,A);const R=z=>{y=null,handleError(z,A,13,!o)};if(d&&A.suspense||isInSSRComponentSetup)return c().then(z=>()=>createInnerComp(z,A)).catch(z=>(R(z),()=>o?createVNode$1(o,{error:z}):null));const L=ref(!1),$=ref(),O=ref(!!a);return a&&setTimeout(()=>{O.value=!1},a),l!=null&&setTimeout(()=>{if(!L.value&&!$.value){const z=new Error(`Async component timed out after ${l}ms.`);R(z),$.value=z}},l),c().then(()=>{L.value=!0,A.parent&&isKeepAlive(A.parent.vnode)&&queueJob(A.parent.update)}).catch(z=>{R(z),$.value=z}),()=>{if(L.value&&S)return createInnerComp(S,A);if($.value&&o)return createVNode$1(o,{error:$.value});if(n&&!O.value)return createVNode$1(n)}}})}function createInnerComp(r,t){const{ref:n,props:o,children:a,ce:l}=t.vnode,d=createVNode$1(r,o,a);return d.ref=n,d.ce=l,delete t.vnode.ce,d}const isKeepAlive=r=>r.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(r,{slots:t}){const n=getCurrentInstance(),o=n.ctx;if(!o.renderer)return()=>{const z=t.default&&t.default();return z&&z.length===1?z[0]:z};const a=new Map,l=new Set;let d=null;const g=n.suspense,{renderer:{p:y,m:S,um:x,o:{createElement:w}}}=o,c=w("div");o.activate=(z,V,j,K,Z)=>{const q=z.component;S(z,V,j,0,g),y(q.vnode,z,V,j,q,g,K,z.slotScopeIds,Z),queuePostRenderEffect(()=>{q.isDeactivated=!1,q.a&&invokeArrayFns(q.a);const ie=z.props&&z.props.onVnodeMounted;ie&&invokeVNodeHook(ie,q.parent,z)},g)},o.deactivate=z=>{const V=z.component;S(z,c,null,1,g),queuePostRenderEffect(()=>{V.da&&invokeArrayFns(V.da);const j=z.props&&z.props.onVnodeUnmounted;j&&invokeVNodeHook(j,V.parent,z),V.isDeactivated=!0},g)};function A(z){resetShapeFlag(z),x(z,n,g,!0)}function R(z){a.forEach((V,j)=>{const K=getComponentName(V.type);K&&(!z||!z(K))&&L(j)})}function L(z){const V=a.get(z);!d||!isSameVNodeType(V,d)?A(V):d&&resetShapeFlag(d),a.delete(z),l.delete(z)}watch(()=>[r.include,r.exclude],([z,V])=>{z&&R(j=>matches(z,j)),V&&R(j=>!matches(V,j))},{flush:"post",deep:!0});let $=null;const O=()=>{$!=null&&a.set($,getInnerChild(n.subTree))};return onMounted(O),onUpdated(O),onBeforeUnmount(()=>{a.forEach(z=>{const{subTree:V,suspense:j}=n,K=getInnerChild(V);if(z.type===K.type&&z.key===K.key){resetShapeFlag(K);const Z=K.component.da;Z&&queuePostRenderEffect(Z,j);return}A(z)})}),()=>{if($=null,!t.default)return null;const z=t.default(),V=z[0];if(z.length>1)return d=null,z;if(!isVNode(V)||!(V.shapeFlag&4)&&!(V.shapeFlag&128))return d=null,V;let j=getInnerChild(V);const K=j.type,Z=getComponentName(isAsyncWrapper(j)?j.type.__asyncResolved||{}:K),{include:q,exclude:ie,max:te}=r;if(q&&(!Z||!matches(q,Z))||ie&&Z&&matches(ie,Z))return d=j,V;const oe=j.key==null?K:j.key,re=a.get(oe);return j.el&&(j=cloneVNode(j),V.shapeFlag&128&&(V.ssContent=j)),$=oe,re?(j.el=re.el,j.component=re.component,j.transition&&setTransitionHooks(j,j.transition),j.shapeFlag|=512,l.delete(oe),l.add(oe)):(l.add(oe),te&&l.size>parseInt(te,10)&&L(l.values().next().value)),j.shapeFlag|=256,d=j,isSuspense(V.type)?V:j}}},KeepAlive=KeepAliveImpl;function matches(r,t){return isArray$4(r)?r.some(n=>matches(n,t)):isString$2(r)?r.split(",").includes(t):isRegExp$2(r)?r.test(t):!1}function onActivated(r,t){registerKeepAliveHook(r,"a",t)}function onDeactivated(r,t){registerKeepAliveHook(r,"da",t)}function registerKeepAliveHook(r,t,n=currentInstance){const o=r.__wdc||(r.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return r()});if(injectHook(t,o,n),n){let a=n.parent;for(;a&&a.parent;)isKeepAlive(a.parent.vnode)&&injectToKeepAliveRoot(o,t,n,a),a=a.parent}}function injectToKeepAliveRoot(r,t,n,o){const a=injectHook(t,r,o,!0);onUnmounted(()=>{remove(o[t],a)},n)}function resetShapeFlag(r){r.shapeFlag&=-257,r.shapeFlag&=-513}function getInnerChild(r){return r.shapeFlag&128?r.ssContent:r}function injectHook(r,t,n=currentInstance,o=!1){if(n){const a=n[r]||(n[r]=[]),l=t.__weh||(t.__weh=(...d)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const g=callWithAsyncErrorHandling(t,n,r,d);return unsetCurrentInstance(),resetTracking(),g});return o?a.unshift(l):a.push(l),l}}const createHook=r=>(t,n=currentInstance)=>(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...o)=>t(...o),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,t=currentInstance){injectHook("ec",r,t)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(r,t){return resolveAsset(COMPONENTS,r,!0,t)||r}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(r){return isString$2(r)?resolveAsset(COMPONENTS,r,!1)||r:r||NULL_DYNAMIC_COMPONENT}function resolveDirective(r){return resolveAsset(DIRECTIVES,r)}function resolveAsset(r,t,n=!0,o=!1){const a=currentRenderingInstance||currentInstance;if(a){const l=a.type;if(r===COMPONENTS){const g=getComponentName(l,!1);if(g&&(g===t||g===camelize(t)||g===capitalize(camelize(t))))return l}const d=resolve(a[r]||l[r],t)||resolve(a.appContext[r],t);return!d&&o?l:d}}function resolve(r,t){return r&&(r[t]||r[camelize(t)]||r[capitalize(camelize(t))])}function renderList(r,t,n,o){let a;const l=n&&n[o];if(isArray$4(r)||isString$2(r)){a=new Array(r.length);for(let d=0,g=r.length;d<g;d++)a[d]=t(r[d],d,void 0,l&&l[d])}else if(typeof r=="number"){a=new Array(r);for(let d=0;d<r;d++)a[d]=t(d+1,d,void 0,l&&l[d])}else if(isObject$6(r))if(r[Symbol.iterator])a=Array.from(r,(d,g)=>t(d,g,void 0,l&&l[g]));else{const d=Object.keys(r);a=new Array(d.length);for(let g=0,y=d.length;g<y;g++){const S=d[g];a[g]=t(r[S],S,g,l&&l[g])}}else a=[];return n&&(n[o]=a),a}function createSlots(r,t){for(let n=0;n<t.length;n++){const o=t[n];if(isArray$4(o))for(let a=0;a<o.length;a++)r[o[a].name]=o[a].fn;else o&&(r[o.name]=o.key?(...a)=>{const l=o.fn(...a);return l&&(l.key=o.key),l}:o.fn)}return r}function renderSlot(r,t,n={},o,a){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return t!=="default"&&(n.name=t),createVNode$1("slot",n,o&&o());let l=r[t];l&&l._c&&(l._d=!1),openBlock();const d=l&&ensureValidVNode(l(n)),g=createBlock(Fragment,{key:n.key||d&&d.key||`_${t}`},d||(o?o():[]),d&&r._===1?64:-2);return!a&&g.scopeId&&(g.slotScopeIds=[g.scopeId+"-s"]),l&&l._c&&(l._d=!0),g}function ensureValidVNode(r){return r.some(t=>isVNode(t)?!(t.type===Comment||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?r:null}function toHandlers(r,t){const n={};for(const o in r)n[t&&/[A-Z]/.test(o)?`on:${o}`:toHandlerKey(o)]=r[o];return n}const getPublicInstance=r=>r?isStatefulComponent(r)?getExposeProxy(r)||r.proxy:getPublicInstance(r.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>queueJob(r.update)),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,t)=>r!==EMPTY_OBJ$1&&!r.__isScriptSetup&&hasOwn$1(r,t),PublicInstanceProxyHandlers={get({_:r},t){const{ctx:n,setupState:o,data:a,props:l,accessCache:d,type:g,appContext:y}=r;let S;if(t[0]!=="$"){const A=d[t];if(A!==void 0)switch(A){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return l[t]}else{if(hasSetupBinding(o,t))return d[t]=1,o[t];if(a!==EMPTY_OBJ$1&&hasOwn$1(a,t))return d[t]=2,a[t];if((S=r.propsOptions[0])&&hasOwn$1(S,t))return d[t]=3,l[t];if(n!==EMPTY_OBJ$1&&hasOwn$1(n,t))return d[t]=4,n[t];shouldCacheAccess&&(d[t]=0)}}const x=publicPropertiesMap[t];let w,c;if(x)return t==="$attrs"&&track(r,"get",t),x(r);if((w=g.__cssModules)&&(w=w[t]))return w;if(n!==EMPTY_OBJ$1&&hasOwn$1(n,t))return d[t]=4,n[t];if(c=y.config.globalProperties,hasOwn$1(c,t))return c[t]},set({_:r},t,n){const{data:o,setupState:a,ctx:l}=r;return hasSetupBinding(a,t)?(a[t]=n,!0):o!==EMPTY_OBJ$1&&hasOwn$1(o,t)?(o[t]=n,!0):hasOwn$1(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(l[t]=n,!0)},has({_:{data:r,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:l}},d){let g;return!!n[d]||r!==EMPTY_OBJ$1&&hasOwn$1(r,d)||hasSetupBinding(t,d)||(g=l[0])&&hasOwn$1(g,d)||hasOwn$1(o,d)||hasOwn$1(publicPropertiesMap,d)||hasOwn$1(a.config.globalProperties,d)},defineProperty(r,t,n){return n.get!=null?r._.accessCache[t]=0:hasOwn$1(n,"value")&&this.set(r,t,n.value,null),Reflect.defineProperty(r,t,n)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$2({},PublicInstanceProxyHandlers,{get(r,t){if(t!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(r,t,r)},has(r,t){return t[0]!=="_"&&!isGloballyWhitelisted(t)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(r){}function defineOptions(r){}function defineSlots(){return null}function defineModel(){}function withDefaults(r,t){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function useModel(r,t,n){const o=getCurrentInstance();if(n&&n.local){const a=ref(r[t]);return watch(()=>r[t],l=>a.value=l),watch(a,l=>{l!==r[t]&&o.emit(`update:${t}`,l)}),a}else return{__v_isRef:!0,get value(){return r[t]},set value(a){o.emit(`update:${t}`,a)}}}function getContext(){const r=getCurrentInstance();return r.setupContext||(r.setupContext=createSetupContext(r))}function normalizePropsOrEmits(r){return isArray$4(r)?r.reduce((t,n)=>(t[n]=null,t),{}):r}function mergeDefaults(r,t){const n=normalizePropsOrEmits(r);for(const o in t){if(o.startsWith("__skip"))continue;let a=n[o];a?isArray$4(a)||isFunction$2(a)?a=n[o]={type:a,default:t[o]}:a.default=t[o]:a===null&&(a=n[o]={default:t[o]}),a&&t[`__skip_${o}`]&&(a.skipFactory=!0)}return n}function mergeModels(r,t){return!r||!t?r||t:isArray$4(r)&&isArray$4(t)?r.concat(t):extend$2({},normalizePropsOrEmits(r),normalizePropsOrEmits(t))}function createPropsRestProxy(r,t){const n={};for(const o in r)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>r[o]});return n}function withAsyncContext(r){const t=getCurrentInstance();let n=r();return unsetCurrentInstance(),isPromise(n)&&(n=n.catch(o=>{throw setCurrentInstance(t),o})),[n,()=>setCurrentInstance(t)]}let shouldCacheAccess=!0;function applyOptions(r){const t=resolveMergedOptions(r),n=r.proxy,o=r.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,r,"bc");const{data:a,computed:l,methods:d,watch:g,provide:y,inject:S,created:x,beforeMount:w,mounted:c,beforeUpdate:A,updated:R,activated:L,deactivated:$,beforeDestroy:O,beforeUnmount:z,destroyed:V,unmounted:j,render:K,renderTracked:Z,renderTriggered:q,errorCaptured:ie,serverPrefetch:te,expose:oe,inheritAttrs:re,components:he,directives:_e,filters:me}=t;if(S&&resolveInjections(S,o,null),d)for(const Ne in d){const Ee=d[Ne];isFunction$2(Ee)&&(o[Ne]=Ee.bind(n))}if(a){const Ne=a.call(n,n);isObject$6(Ne)&&(r.data=reactive(Ne))}if(shouldCacheAccess=!0,l)for(const Ne in l){const Ee=l[Ne],Ge=isFunction$2(Ee)?Ee.bind(n,n):isFunction$2(Ee.get)?Ee.get.bind(n,n):NOOP,it=!isFunction$2(Ee)&&isFunction$2(Ee.set)?Ee.set.bind(n):NOOP,Te=computed({get:Ge,set:it});Object.defineProperty(o,Ne,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ke=>Te.value=Ke})}if(g)for(const Ne in g)createWatcher(g[Ne],o,n,Ne);if(y){const Ne=isFunction$2(y)?y.call(n):y;Reflect.ownKeys(Ne).forEach(Ee=>{provide(Ee,Ne[Ee])})}x&&callHook$1(x,r,"c");function Q(Ne,Ee){isArray$4(Ee)?Ee.forEach(Ge=>Ne(Ge.bind(n))):Ee&&Ne(Ee.bind(n))}if(Q(onBeforeMount,w),Q(onMounted,c),Q(onBeforeUpdate,A),Q(onUpdated,R),Q(onActivated,L),Q(onDeactivated,$),Q(onErrorCaptured,ie),Q(onRenderTracked,Z),Q(onRenderTriggered,q),Q(onBeforeUnmount,z),Q(onUnmounted,j),Q(onServerPrefetch,te),isArray$4(oe))if(oe.length){const Ne=r.exposed||(r.exposed={});oe.forEach(Ee=>{Object.defineProperty(Ne,Ee,{get:()=>n[Ee],set:Ge=>n[Ee]=Ge})})}else r.exposed||(r.exposed={});K&&r.render===NOOP&&(r.render=K),re!=null&&(r.inheritAttrs=re),he&&(r.components=he),_e&&(r.directives=_e)}function resolveInjections(r,t,n=NOOP){isArray$4(r)&&(r=normalizeInject(r));for(const o in r){const a=r[o];let l;isObject$6(a)?"default"in a?l=inject(a.from||o,a.default,!0):l=inject(a.from||o):l=inject(a),isRef(l)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:d=>l.value=d}):t[o]=l}}function callHook$1(r,t,n){callWithAsyncErrorHandling(isArray$4(r)?r.map(o=>o.bind(t.proxy)):r.bind(t.proxy),t,n)}function createWatcher(r,t,n,o){const a=o.includes(".")?createPathGetter(n,o):()=>n[o];if(isString$2(r)){const l=t[r];isFunction$2(l)&&watch(a,l)}else if(isFunction$2(r))watch(a,r.bind(n));else if(isObject$6(r))if(isArray$4(r))r.forEach(l=>createWatcher(l,t,n,o));else{const l=isFunction$2(r.handler)?r.handler.bind(n):t[r.handler];isFunction$2(l)&&watch(a,l,r)}}function resolveMergedOptions(r){const t=r.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:l,config:{optionMergeStrategies:d}}=r.appContext,g=l.get(t);let y;return g?y=g:!a.length&&!n&&!o?y=t:(y={},a.length&&a.forEach(S=>mergeOptions$1(y,S,d,!0)),mergeOptions$1(y,t,d)),isObject$6(t)&&l.set(t,y),y}function mergeOptions$1(r,t,n,o=!1){const{mixins:a,extends:l}=t;l&&mergeOptions$1(r,l,n,!0),a&&a.forEach(d=>mergeOptions$1(r,d,n,!0));for(const d in t)if(!(o&&d==="expose")){const g=internalOptionMergeStrats[d]||n&&n[d];r[d]=g?g(r[d],t[d]):t[d]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,t){return t?r?function(){return extend$2(isFunction$2(r)?r.call(this,this):r,isFunction$2(t)?t.call(this,this):t)}:t:r}function mergeInject(r,t){return mergeObjectOptions(normalizeInject(r),normalizeInject(t))}function normalizeInject(r){if(isArray$4(r)){const t={};for(let n=0;n<r.length;n++)t[r[n]]=r[n];return t}return r}function mergeAsArray(r,t){return r?[...new Set([].concat(r,t))]:t}function mergeObjectOptions(r,t){return r?extend$2(Object.create(null),r,t):t}function mergeEmitsOrPropsOptions(r,t){return r?isArray$4(r)&&isArray$4(t)?[...new Set([...r,...t])]:extend$2(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(r,t){if(!r)return t;if(!t)return r;const n=extend$2(Object.create(null),r);for(const o in t)n[o]=mergeAsArray(r[o],t[o]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,t){return function(o,a=null){isFunction$2(o)||(o=extend$2({},o)),a!=null&&!isObject$6(a)&&(a=null);const l=createAppContext(),d=new Set;let g=!1;const y=l.app={_uid:uid$1++,_component:o,_props:a,_container:null,_context:l,_instance:null,version:version$2,get config(){return l.config},set config(S){},use(S,...x){return d.has(S)||(S&&isFunction$2(S.install)?(d.add(S),S.install(y,...x)):isFunction$2(S)&&(d.add(S),S(y,...x))),y},mixin(S){return l.mixins.includes(S)||l.mixins.push(S),y},component(S,x){return x?(l.components[S]=x,y):l.components[S]},directive(S,x){return x?(l.directives[S]=x,y):l.directives[S]},mount(S,x,w){if(!g){const c=createVNode$1(o,a);return c.appContext=l,x&&t?t(c,S):r(c,S,w),g=!0,y._container=S,S.__vue_app__=y,getExposeProxy(c.component)||c.component.proxy}},unmount(){g&&(r(null,y._container),delete y._container.__vue_app__)},provide(S,x){return l.provides[S]=x,y},runWithContext(S){currentApp=y;try{return S()}finally{currentApp=null}}};return y}}let currentApp=null;function provide(r,t){if(currentInstance){let n=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===n&&(n=currentInstance.provides=Object.create(o)),n[r]=t}}function inject(r,t,n=!1){const o=currentInstance||currentRenderingInstance;if(o||currentApp){const a=o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:currentApp._context.provides;if(a&&r in a)return a[r];if(arguments.length>1)return n&&isFunction$2(t)?t.call(o&&o.proxy):t}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps$1(r,t,n,o=!1){const a={},l={};def(l,InternalObjectKey,1),r.propsDefaults=Object.create(null),setFullProps(r,t,a,l);for(const d in r.propsOptions[0])d in a||(a[d]=void 0);n?r.props=o?a:shallowReactive(a):r.type.props?r.props=a:r.props=l,r.attrs=l}function updateProps$2(r,t,n,o){const{props:a,attrs:l,vnode:{patchFlag:d}}=r,g=toRaw(a),[y]=r.propsOptions;let S=!1;if((o||d>0)&&!(d&16)){if(d&8){const x=r.vnode.dynamicProps;for(let w=0;w<x.length;w++){let c=x[w];if(isEmitListener(r.emitsOptions,c))continue;const A=t[c];if(y)if(hasOwn$1(l,c))A!==l[c]&&(l[c]=A,S=!0);else{const R=camelize(c);a[R]=resolvePropValue(y,g,R,A,r,!1)}else A!==l[c]&&(l[c]=A,S=!0)}}}else{setFullProps(r,t,a,l)&&(S=!0);let x;for(const w in g)(!t||!hasOwn$1(t,w)&&((x=hyphenate(w))===w||!hasOwn$1(t,x)))&&(y?n&&(n[w]!==void 0||n[x]!==void 0)&&(a[w]=resolvePropValue(y,g,w,void 0,r,!0)):delete a[w]);if(l!==g)for(const w in l)(!t||!hasOwn$1(t,w))&&(delete l[w],S=!0)}S&&trigger$2(r,"set","$attrs")}function setFullProps(r,t,n,o){const[a,l]=r.propsOptions;let d=!1,g;if(t)for(let y in t){if(isReservedProp(y))continue;const S=t[y];let x;a&&hasOwn$1(a,x=camelize(y))?!l||!l.includes(x)?n[x]=S:(g||(g={}))[x]=S:isEmitListener(r.emitsOptions,y)||(!(y in o)||S!==o[y])&&(o[y]=S,d=!0)}if(l){const y=toRaw(n),S=g||EMPTY_OBJ$1;for(let x=0;x<l.length;x++){const w=l[x];n[w]=resolvePropValue(a,y,w,S[w],r,!hasOwn$1(S,w))}}return d}function resolvePropValue(r,t,n,o,a,l){const d=r[n];if(d!=null){const g=hasOwn$1(d,"default");if(g&&o===void 0){const y=d.default;if(d.type!==Function&&!d.skipFactory&&isFunction$2(y)){const{propsDefaults:S}=a;n in S?o=S[n]:(setCurrentInstance(a),o=S[n]=y.call(null,t),unsetCurrentInstance())}else o=y}d[0]&&(l&&!g?o=!1:d[1]&&(o===""||o===hyphenate(n))&&(o=!0))}return o}function normalizePropsOptions(r,t,n=!1){const o=t.propsCache,a=o.get(r);if(a)return a;const l=r.props,d={},g=[];let y=!1;if(!isFunction$2(r)){const x=w=>{y=!0;const[c,A]=normalizePropsOptions(w,t,!0);extend$2(d,c),A&&g.push(...A)};!n&&t.mixins.length&&t.mixins.forEach(x),r.extends&&x(r.extends),r.mixins&&r.mixins.forEach(x)}if(!l&&!y)return isObject$6(r)&&o.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray$4(l))for(let x=0;x<l.length;x++){const w=camelize(l[x]);validatePropName(w)&&(d[w]=EMPTY_OBJ$1)}else if(l)for(const x in l){const w=camelize(x);if(validatePropName(w)){const c=l[x],A=d[w]=isArray$4(c)||isFunction$2(c)?{type:c}:extend$2({},c);if(A){const R=getTypeIndex(Boolean,A.type),L=getTypeIndex(String,A.type);A[0]=R>-1,A[1]=L<0||R<L,(R>-1||hasOwn$1(A,"default"))&&g.push(w)}}}const S=[d,g];return isObject$6(r)&&o.set(r,S),S}function validatePropName(r){return r[0]!=="$"}function getType(r){const t=r&&r.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:r===null?"null":""}function isSameType(r,t){return getType(r)===getType(t)}function getTypeIndex(r,t){return isArray$4(t)?t.findIndex(n=>isSameType(n,r)):isFunction$2(t)&&isSameType(t,r)?0:-1}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray$4(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot$1=(r,t,n)=>{if(t._n)return t;const o=withCtx((...a)=>normalizeSlotValue(t(...a)),n);return o._c=!1,o},normalizeObjectSlots=(r,t,n)=>{const o=r._ctx;for(const a in r){if(isInternalKey(a))continue;const l=r[a];if(isFunction$2(l))t[a]=normalizeSlot$1(a,l,o);else if(l!=null){const d=normalizeSlotValue(l);t[a]=()=>d}}},normalizeVNodeSlots=(r,t)=>{const n=normalizeSlotValue(t);r.slots.default=()=>n},initSlots=(r,t)=>{if(r.vnode.shapeFlag&32){const n=t._;n?(r.slots=toRaw(t),def(t,"_",n)):normalizeObjectSlots(t,r.slots={})}else r.slots={},t&&normalizeVNodeSlots(r,t);def(r.slots,InternalObjectKey,1)},updateSlots=(r,t,n)=>{const{vnode:o,slots:a}=r;let l=!0,d=EMPTY_OBJ$1;if(o.shapeFlag&32){const g=t._;g?n&&g===1?l=!1:(extend$2(a,t),!n&&g===1&&delete a._):(l=!t.$stable,normalizeObjectSlots(t,a)),d=t}else t&&(normalizeVNodeSlots(r,t),d={default:1});if(l)for(const g in a)!isInternalKey(g)&&!(g in d)&&delete a[g]};function setRef(r,t,n,o,a=!1){if(isArray$4(r)){r.forEach((c,A)=>setRef(c,t&&(isArray$4(t)?t[A]:t),n,o,a));return}if(isAsyncWrapper(o)&&!a)return;const l=o.shapeFlag&4?getExposeProxy(o.component)||o.component.proxy:o.el,d=a?null:l,{i:g,r:y}=r,S=t&&t.r,x=g.refs===EMPTY_OBJ$1?g.refs={}:g.refs,w=g.setupState;if(S!=null&&S!==y&&(isString$2(S)?(x[S]=null,hasOwn$1(w,S)&&(w[S]=null)):isRef(S)&&(S.value=null)),isFunction$2(y))callWithErrorHandling(y,g,12,[d,x]);else{const c=isString$2(y),A=isRef(y);if(c||A){const R=()=>{if(r.f){const L=c?hasOwn$1(w,y)?w[y]:x[y]:y.value;a?isArray$4(L)&&remove(L,l):isArray$4(L)?L.includes(l)||L.push(l):c?(x[y]=[l],hasOwn$1(w,y)&&(w[y]=x[y])):(y.value=[l],r.k&&(x[r.k]=y.value))}else c?(x[y]=d,hasOwn$1(w,y)&&(w[y]=d)):A&&(y.value=d,r.k&&(x[r.k]=d))};d?(R.id=-1,queuePostRenderEffect(R,n)):R()}}}let hasMismatch=!1;const isSVGContainer=r=>/svg/.test(r.namespaceURI)&&r.tagName!=="foreignObject",isComment=r=>r.nodeType===8;function createHydrationFunctions(r){const{mt:t,p:n,o:{patchProp:o,createText:a,nextSibling:l,parentNode:d,remove:g,insert:y,createComment:S}}=r,x=(O,z)=>{if(!z.hasChildNodes()){n(null,O,z),flushPostFlushCbs(),z._vnode=O;return}hasMismatch=!1,w(z.firstChild,O,null,null,null),flushPostFlushCbs(),z._vnode=O,hasMismatch&&console.error("Hydration completed but contains mismatches.")},w=(O,z,V,j,K,Z=!1)=>{const q=isComment(O)&&O.data==="[",ie=()=>L(O,z,V,j,K,q),{type:te,ref:oe,shapeFlag:re,patchFlag:he}=z;let _e=O.nodeType;z.el=O,he===-2&&(Z=!1,z.dynamicChildren=null);let me=null;switch(te){case Text:_e!==3?z.children===""?(y(z.el=a(""),d(O),O),me=O):me=ie():(O.data!==z.children&&(hasMismatch=!0,O.data=z.children),me=l(O));break;case Comment:_e!==8||q?me=ie():me=l(O);break;case Static:if(q&&(O=l(O),_e=O.nodeType),_e===1||_e===3){me=O;const be=!z.children.length;for(let Q=0;Q<z.staticCount;Q++)be&&(z.children+=me.nodeType===1?me.outerHTML:me.data),Q===z.staticCount-1&&(z.anchor=me),me=l(me);return q?l(me):me}else ie();break;case Fragment:q?me=R(O,z,V,j,K,Z):me=ie();break;default:if(re&1)_e!==1||z.type.toLowerCase()!==O.tagName.toLowerCase()?me=ie():me=c(O,z,V,j,K,Z);else if(re&6){z.slotScopeIds=K;const be=d(O);if(t(z,be,null,V,j,isSVGContainer(be),Z),me=q?$(O):l(O),me&&isComment(me)&&me.data==="teleport end"&&(me=l(me)),isAsyncWrapper(z)){let Q;q?(Q=createVNode$1(Fragment),Q.anchor=me?me.previousSibling:be.lastChild):Q=O.nodeType===3?createTextVNode(""):createVNode$1("div"),Q.el=O,z.component.subTree=Q}}else re&64?_e!==8?me=ie():me=z.type.hydrate(O,z,V,j,K,Z,r,A):re&128&&(me=z.type.hydrate(O,z,V,j,isSVGContainer(d(O)),K,Z,r,w))}return oe!=null&&setRef(oe,null,j,z),me},c=(O,z,V,j,K,Z)=>{Z=Z||!!z.dynamicChildren;const{type:q,props:ie,patchFlag:te,shapeFlag:oe,dirs:re}=z,he=q==="input"&&re||q==="option";if(he||te!==-1){if(re&&invokeDirectiveHook(z,null,V,"created"),ie)if(he||!Z||te&48)for(const me in ie)(he&&me.endsWith("value")||isOn(me)&&!isReservedProp(me))&&o(O,me,null,ie[me],!1,void 0,V);else ie.onClick&&o(O,"onClick",null,ie.onClick,!1,void 0,V);let _e;if((_e=ie&&ie.onVnodeBeforeMount)&&invokeVNodeHook(_e,V,z),re&&invokeDirectiveHook(z,null,V,"beforeMount"),((_e=ie&&ie.onVnodeMounted)||re)&&queueEffectWithSuspense(()=>{_e&&invokeVNodeHook(_e,V,z),re&&invokeDirectiveHook(z,null,V,"mounted")},j),oe&16&&!(ie&&(ie.innerHTML||ie.textContent))){let me=A(O.firstChild,z,O,V,j,K,Z);for(;me;){hasMismatch=!0;const be=me;me=me.nextSibling,g(be)}}else oe&8&&O.textContent!==z.children&&(hasMismatch=!0,O.textContent=z.children)}return O.nextSibling},A=(O,z,V,j,K,Z,q)=>{q=q||!!z.dynamicChildren;const ie=z.children,te=ie.length;for(let oe=0;oe<te;oe++){const re=q?ie[oe]:ie[oe]=normalizeVNode(ie[oe]);if(O)O=w(O,re,j,K,Z,q);else{if(re.type===Text&&!re.children)continue;hasMismatch=!0,n(null,re,V,null,j,K,isSVGContainer(V),Z)}}return O},R=(O,z,V,j,K,Z)=>{const{slotScopeIds:q}=z;q&&(K=K?K.concat(q):q);const ie=d(O),te=A(l(O),z,ie,V,j,K,Z);return te&&isComment(te)&&te.data==="]"?l(z.anchor=te):(hasMismatch=!0,y(z.anchor=S("]"),ie,te),te)},L=(O,z,V,j,K,Z)=>{if(hasMismatch=!0,z.el=null,Z){const te=$(O);for(;;){const oe=l(O);if(oe&&oe!==te)g(oe);else break}}const q=l(O),ie=d(O);return g(O),n(null,z,ie,q,V,j,isSVGContainer(ie),K),q},$=O=>{let z=0;for(;O;)if(O=l(O),O&&isComment(O)&&(O.data==="["&&z++,O.data==="]")){if(z===0)return l(O);z--}return O};return[x,w]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function createHydrationRenderer(r){return baseCreateRenderer(r,createHydrationFunctions)}function baseCreateRenderer(r,t){const n=getGlobalThis();n.__VUE__=!0;const{insert:o,remove:a,patchProp:l,createElement:d,createText:g,createComment:y,setText:S,setElementText:x,parentNode:w,nextSibling:c,setScopeId:A=NOOP,insertStaticContent:R}=r,L=(Se,Ye,$e,st=null,et=null,Fe=null,tn=!1,Gt=null,mt=!!Ye.dynamicChildren)=>{if(Se===Ye)return;Se&&!isSameVNodeType(Se,Ye)&&(st=Be(Se),Ke(Se,et,Fe,!0),Se=null),Ye.patchFlag===-2&&(mt=!1,Ye.dynamicChildren=null);const{type:en,ref:Bn,shapeFlag:Le}=Ye;switch(en){case Text:$(Se,Ye,$e,st);break;case Comment:O(Se,Ye,$e,st);break;case Static:Se==null&&z(Ye,$e,st,tn);break;case Fragment:he(Se,Ye,$e,st,et,Fe,tn,Gt,mt);break;default:Le&1?K(Se,Ye,$e,st,et,Fe,tn,Gt,mt):Le&6?_e(Se,Ye,$e,st,et,Fe,tn,Gt,mt):(Le&64||Le&128)&&en.process(Se,Ye,$e,st,et,Fe,tn,Gt,mt,Dt)}Bn!=null&&et&&setRef(Bn,Se&&Se.ref,Fe,Ye||Se,!Ye)},$=(Se,Ye,$e,st)=>{if(Se==null)o(Ye.el=g(Ye.children),$e,st);else{const et=Ye.el=Se.el;Ye.children!==Se.children&&S(et,Ye.children)}},O=(Se,Ye,$e,st)=>{Se==null?o(Ye.el=y(Ye.children||""),$e,st):Ye.el=Se.el},z=(Se,Ye,$e,st)=>{[Se.el,Se.anchor]=R(Se.children,Ye,$e,st,Se.el,Se.anchor)},V=({el:Se,anchor:Ye},$e,st)=>{let et;for(;Se&&Se!==Ye;)et=c(Se),o(Se,$e,st),Se=et;o(Ye,$e,st)},j=({el:Se,anchor:Ye})=>{let $e;for(;Se&&Se!==Ye;)$e=c(Se),a(Se),Se=$e;a(Ye)},K=(Se,Ye,$e,st,et,Fe,tn,Gt,mt)=>{tn=tn||Ye.type==="svg",Se==null?Z(Ye,$e,st,et,Fe,tn,Gt,mt):te(Se,Ye,et,Fe,tn,Gt,mt)},Z=(Se,Ye,$e,st,et,Fe,tn,Gt)=>{let mt,en;const{type:Bn,props:Le,shapeFlag:Ae,transition:ht,dirs:rn}=Se;if(mt=Se.el=d(Se.type,Fe,Le&&Le.is,Le),Ae&8?x(mt,Se.children):Ae&16&&ie(Se.children,mt,null,st,et,Fe&&Bn!=="foreignObject",tn,Gt),rn&&invokeDirectiveHook(Se,null,st,"created"),q(mt,Se,Se.scopeId,tn,st),Le){for(const Wt in Le)Wt!=="value"&&!isReservedProp(Wt)&&l(mt,Wt,null,Le[Wt],Fe,Se.children,st,et,Xe);"value"in Le&&l(mt,"value",null,Le.value),(en=Le.onVnodeBeforeMount)&&invokeVNodeHook(en,st,Se)}rn&&invokeDirectiveHook(Se,null,st,"beforeMount");const Kt=(!et||et&&!et.pendingBranch)&&ht&&!ht.persisted;Kt&&ht.beforeEnter(mt),o(mt,Ye,$e),((en=Le&&Le.onVnodeMounted)||Kt||rn)&&queuePostRenderEffect(()=>{en&&invokeVNodeHook(en,st,Se),Kt&&ht.enter(mt),rn&&invokeDirectiveHook(Se,null,st,"mounted")},et)},q=(Se,Ye,$e,st,et)=>{if($e&&A(Se,$e),st)for(let Fe=0;Fe<st.length;Fe++)A(Se,st[Fe]);if(et){let Fe=et.subTree;if(Ye===Fe){const tn=et.vnode;q(Se,tn,tn.scopeId,tn.slotScopeIds,et.parent)}}},ie=(Se,Ye,$e,st,et,Fe,tn,Gt,mt=0)=>{for(let en=mt;en<Se.length;en++){const Bn=Se[en]=Gt?cloneIfMounted(Se[en]):normalizeVNode(Se[en]);L(null,Bn,Ye,$e,st,et,Fe,tn,Gt)}},te=(Se,Ye,$e,st,et,Fe,tn)=>{const Gt=Ye.el=Se.el;let{patchFlag:mt,dynamicChildren:en,dirs:Bn}=Ye;mt|=Se.patchFlag&16;const Le=Se.props||EMPTY_OBJ$1,Ae=Ye.props||EMPTY_OBJ$1;let ht;$e&&toggleRecurse($e,!1),(ht=Ae.onVnodeBeforeUpdate)&&invokeVNodeHook(ht,$e,Ye,Se),Bn&&invokeDirectiveHook(Ye,Se,$e,"beforeUpdate"),$e&&toggleRecurse($e,!0);const rn=et&&Ye.type!=="foreignObject";if(en?oe(Se.dynamicChildren,en,Gt,$e,st,rn,Fe):tn||Ee(Se,Ye,Gt,null,$e,st,rn,Fe,!1),mt>0){if(mt&16)re(Gt,Ye,Le,Ae,$e,st,et);else if(mt&2&&Le.class!==Ae.class&&l(Gt,"class",null,Ae.class,et),mt&4&&l(Gt,"style",Le.style,Ae.style,et),mt&8){const Kt=Ye.dynamicProps;for(let Wt=0;Wt<Kt.length;Wt++){const xn=Kt[Wt],Mn=Le[xn],kn=Ae[xn];(kn!==Mn||xn==="value")&&l(Gt,xn,Mn,kn,et,Se.children,$e,st,Xe)}}mt&1&&Se.children!==Ye.children&&x(Gt,Ye.children)}else!tn&&en==null&&re(Gt,Ye,Le,Ae,$e,st,et);((ht=Ae.onVnodeUpdated)||Bn)&&queuePostRenderEffect(()=>{ht&&invokeVNodeHook(ht,$e,Ye,Se),Bn&&invokeDirectiveHook(Ye,Se,$e,"updated")},st)},oe=(Se,Ye,$e,st,et,Fe,tn)=>{for(let Gt=0;Gt<Ye.length;Gt++){const mt=Se[Gt],en=Ye[Gt],Bn=mt.el&&(mt.type===Fragment||!isSameVNodeType(mt,en)||mt.shapeFlag&70)?w(mt.el):$e;L(mt,en,Bn,null,st,et,Fe,tn,!0)}},re=(Se,Ye,$e,st,et,Fe,tn)=>{if($e!==st){if($e!==EMPTY_OBJ$1)for(const Gt in $e)!isReservedProp(Gt)&&!(Gt in st)&&l(Se,Gt,$e[Gt],null,tn,Ye.children,et,Fe,Xe);for(const Gt in st){if(isReservedProp(Gt))continue;const mt=st[Gt],en=$e[Gt];mt!==en&&Gt!=="value"&&l(Se,Gt,en,mt,tn,Ye.children,et,Fe,Xe)}"value"in st&&l(Se,"value",$e.value,st.value)}},he=(Se,Ye,$e,st,et,Fe,tn,Gt,mt)=>{const en=Ye.el=Se?Se.el:g(""),Bn=Ye.anchor=Se?Se.anchor:g("");let{patchFlag:Le,dynamicChildren:Ae,slotScopeIds:ht}=Ye;ht&&(Gt=Gt?Gt.concat(ht):ht),Se==null?(o(en,$e,st),o(Bn,$e,st),ie(Ye.children,$e,Bn,et,Fe,tn,Gt,mt)):Le>0&&Le&64&&Ae&&Se.dynamicChildren?(oe(Se.dynamicChildren,Ae,$e,et,Fe,tn,Gt),(Ye.key!=null||et&&Ye===et.subTree)&&traverseStaticChildren(Se,Ye,!0)):Ee(Se,Ye,$e,Bn,et,Fe,tn,Gt,mt)},_e=(Se,Ye,$e,st,et,Fe,tn,Gt,mt)=>{Ye.slotScopeIds=Gt,Se==null?Ye.shapeFlag&512?et.ctx.activate(Ye,$e,st,tn,mt):me(Ye,$e,st,et,Fe,tn,mt):be(Se,Ye,mt)},me=(Se,Ye,$e,st,et,Fe,tn)=>{const Gt=Se.component=createComponentInstance(Se,st,et);if(isKeepAlive(Se)&&(Gt.ctx.renderer=Dt),setupComponent(Gt),Gt.asyncDep){if(et&&et.registerDep(Gt,Q),!Se.el){const mt=Gt.subTree=createVNode$1(Comment);O(null,mt,Ye,$e)}return}Q(Gt,Se,Ye,$e,et,Fe,tn)},be=(Se,Ye,$e)=>{const st=Ye.component=Se.component;if(shouldUpdateComponent(Se,Ye,$e))if(st.asyncDep&&!st.asyncResolved){Ne(st,Ye,$e);return}else st.next=Ye,invalidateJob(st.update),st.update();else Ye.el=Se.el,st.vnode=Ye},Q=(Se,Ye,$e,st,et,Fe,tn)=>{const Gt=()=>{if(Se.isMounted){let{next:Bn,bu:Le,u:Ae,parent:ht,vnode:rn}=Se,Kt=Bn,Wt;toggleRecurse(Se,!1),Bn?(Bn.el=rn.el,Ne(Se,Bn,tn)):Bn=rn,Le&&invokeArrayFns(Le),(Wt=Bn.props&&Bn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Wt,ht,Bn,rn),toggleRecurse(Se,!0);const xn=renderComponentRoot(Se),Mn=Se.subTree;Se.subTree=xn,L(Mn,xn,w(Mn.el),Be(Mn),Se,et,Fe),Bn.el=xn.el,Kt===null&&updateHOCHostEl(Se,xn.el),Ae&&queuePostRenderEffect(Ae,et),(Wt=Bn.props&&Bn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Wt,ht,Bn,rn),et)}else{let Bn;const{el:Le,props:Ae}=Ye,{bm:ht,m:rn,parent:Kt}=Se,Wt=isAsyncWrapper(Ye);if(toggleRecurse(Se,!1),ht&&invokeArrayFns(ht),!Wt&&(Bn=Ae&&Ae.onVnodeBeforeMount)&&invokeVNodeHook(Bn,Kt,Ye),toggleRecurse(Se,!0),Le&&Bt){const xn=()=>{Se.subTree=renderComponentRoot(Se),Bt(Le,Se.subTree,Se,et,null)};Wt?Ye.type.__asyncLoader().then(()=>!Se.isUnmounted&&xn()):xn()}else{const xn=Se.subTree=renderComponentRoot(Se);L(null,xn,$e,st,Se,et,Fe),Ye.el=xn.el}if(rn&&queuePostRenderEffect(rn,et),!Wt&&(Bn=Ae&&Ae.onVnodeMounted)){const xn=Ye;queuePostRenderEffect(()=>invokeVNodeHook(Bn,Kt,xn),et)}(Ye.shapeFlag&256||Kt&&isAsyncWrapper(Kt.vnode)&&Kt.vnode.shapeFlag&256)&&Se.a&&queuePostRenderEffect(Se.a,et),Se.isMounted=!0,Ye=$e=st=null}},mt=Se.effect=new ReactiveEffect(Gt,()=>queueJob(en),Se.scope),en=Se.update=()=>mt.run();en.id=Se.uid,toggleRecurse(Se,!0),en()},Ne=(Se,Ye,$e)=>{Ye.component=Se;const st=Se.vnode.props;Se.vnode=Ye,Se.next=null,updateProps$2(Se,Ye.props,st,$e),updateSlots(Se,Ye.children,$e),pauseTracking(),flushPreFlushCbs(),resetTracking()},Ee=(Se,Ye,$e,st,et,Fe,tn,Gt,mt=!1)=>{const en=Se&&Se.children,Bn=Se?Se.shapeFlag:0,Le=Ye.children,{patchFlag:Ae,shapeFlag:ht}=Ye;if(Ae>0){if(Ae&128){it(en,Le,$e,st,et,Fe,tn,Gt,mt);return}else if(Ae&256){Ge(en,Le,$e,st,et,Fe,tn,Gt,mt);return}}ht&8?(Bn&16&&Xe(en,et,Fe),Le!==en&&x($e,Le)):Bn&16?ht&16?it(en,Le,$e,st,et,Fe,tn,Gt,mt):Xe(en,et,Fe,!0):(Bn&8&&x($e,""),ht&16&&ie(Le,$e,st,et,Fe,tn,Gt,mt))},Ge=(Se,Ye,$e,st,et,Fe,tn,Gt,mt)=>{Se=Se||EMPTY_ARR,Ye=Ye||EMPTY_ARR;const en=Se.length,Bn=Ye.length,Le=Math.min(en,Bn);let Ae;for(Ae=0;Ae<Le;Ae++){const ht=Ye[Ae]=mt?cloneIfMounted(Ye[Ae]):normalizeVNode(Ye[Ae]);L(Se[Ae],ht,$e,null,et,Fe,tn,Gt,mt)}en>Bn?Xe(Se,et,Fe,!0,!1,Le):ie(Ye,$e,st,et,Fe,tn,Gt,mt,Le)},it=(Se,Ye,$e,st,et,Fe,tn,Gt,mt)=>{let en=0;const Bn=Ye.length;let Le=Se.length-1,Ae=Bn-1;for(;en<=Le&&en<=Ae;){const ht=Se[en],rn=Ye[en]=mt?cloneIfMounted(Ye[en]):normalizeVNode(Ye[en]);if(isSameVNodeType(ht,rn))L(ht,rn,$e,null,et,Fe,tn,Gt,mt);else break;en++}for(;en<=Le&&en<=Ae;){const ht=Se[Le],rn=Ye[Ae]=mt?cloneIfMounted(Ye[Ae]):normalizeVNode(Ye[Ae]);if(isSameVNodeType(ht,rn))L(ht,rn,$e,null,et,Fe,tn,Gt,mt);else break;Le--,Ae--}if(en>Le){if(en<=Ae){const ht=Ae+1,rn=ht<Bn?Ye[ht].el:st;for(;en<=Ae;)L(null,Ye[en]=mt?cloneIfMounted(Ye[en]):normalizeVNode(Ye[en]),$e,rn,et,Fe,tn,Gt,mt),en++}}else if(en>Ae)for(;en<=Le;)Ke(Se[en],et,Fe,!0),en++;else{const ht=en,rn=en,Kt=new Map;for(en=rn;en<=Ae;en++){const oo=Ye[en]=mt?cloneIfMounted(Ye[en]):normalizeVNode(Ye[en]);oo.key!=null&&Kt.set(oo.key,en)}let Wt,xn=0;const Mn=Ae-rn+1;let kn=!1,Zn=0;const yo=new Array(Mn);for(en=0;en<Mn;en++)yo[en]=0;for(en=ht;en<=Le;en++){const oo=Se[en];if(xn>=Mn){Ke(oo,et,Fe,!0);continue}let Cr;if(oo.key!=null)Cr=Kt.get(oo.key);else for(Wt=rn;Wt<=Ae;Wt++)if(yo[Wt-rn]===0&&isSameVNodeType(oo,Ye[Wt])){Cr=Wt;break}Cr===void 0?Ke(oo,et,Fe,!0):(yo[Cr-rn]=en+1,Cr>=Zn?Zn=Cr:kn=!0,L(oo,Ye[Cr],$e,null,et,Fe,tn,Gt,mt),xn++)}const gn=kn?getSequence(yo):EMPTY_ARR;for(Wt=gn.length-1,en=Mn-1;en>=0;en--){const oo=rn+en,Cr=Ye[oo],Wr=oo+1<Bn?Ye[oo+1].el:st;yo[en]===0?L(null,Cr,$e,Wr,et,Fe,tn,Gt,mt):kn&&(Wt<0||en!==gn[Wt]?Te(Cr,$e,Wr,2):Wt--)}}},Te=(Se,Ye,$e,st,et=null)=>{const{el:Fe,type:tn,transition:Gt,children:mt,shapeFlag:en}=Se;if(en&6){Te(Se.component.subTree,Ye,$e,st);return}if(en&128){Se.suspense.move(Ye,$e,st);return}if(en&64){tn.move(Se,Ye,$e,Dt);return}if(tn===Fragment){o(Fe,Ye,$e);for(let Le=0;Le<mt.length;Le++)Te(mt[Le],Ye,$e,st);o(Se.anchor,Ye,$e);return}if(tn===Static){V(Se,Ye,$e);return}if(st!==2&&en&1&&Gt)if(st===0)Gt.beforeEnter(Fe),o(Fe,Ye,$e),queuePostRenderEffect(()=>Gt.enter(Fe),et);else{const{leave:Le,delayLeave:Ae,afterLeave:ht}=Gt,rn=()=>o(Fe,Ye,$e),Kt=()=>{Le(Fe,()=>{rn(),ht&&ht()})};Ae?Ae(Fe,rn,Kt):Kt()}else o(Fe,Ye,$e)},Ke=(Se,Ye,$e,st=!1,et=!1)=>{const{type:Fe,props:tn,ref:Gt,children:mt,dynamicChildren:en,shapeFlag:Bn,patchFlag:Le,dirs:Ae}=Se;if(Gt!=null&&setRef(Gt,null,$e,Se,!0),Bn&256){Ye.ctx.deactivate(Se);return}const ht=Bn&1&&Ae,rn=!isAsyncWrapper(Se);let Kt;if(rn&&(Kt=tn&&tn.onVnodeBeforeUnmount)&&invokeVNodeHook(Kt,Ye,Se),Bn&6)Qt(Se.component,$e,st);else{if(Bn&128){Se.suspense.unmount($e,st);return}ht&&invokeDirectiveHook(Se,null,Ye,"beforeUnmount"),Bn&64?Se.type.remove(Se,Ye,$e,et,Dt,st):en&&(Fe!==Fragment||Le>0&&Le&64)?Xe(en,Ye,$e,!1,!0):(Fe===Fragment&&Le&384||!et&&Bn&16)&&Xe(mt,Ye,$e),st&&Tt(Se)}(rn&&(Kt=tn&&tn.onVnodeUnmounted)||ht)&&queuePostRenderEffect(()=>{Kt&&invokeVNodeHook(Kt,Ye,Se),ht&&invokeDirectiveHook(Se,null,Ye,"unmounted")},$e)},Tt=Se=>{const{type:Ye,el:$e,anchor:st,transition:et}=Se;if(Ye===Fragment){Lt($e,st);return}if(Ye===Static){j(Se);return}const Fe=()=>{a($e),et&&!et.persisted&&et.afterLeave&&et.afterLeave()};if(Se.shapeFlag&1&&et&&!et.persisted){const{leave:tn,delayLeave:Gt}=et,mt=()=>tn($e,Fe);Gt?Gt(Se.el,Fe,mt):mt()}else Fe()},Lt=(Se,Ye)=>{let $e;for(;Se!==Ye;)$e=c(Se),a(Se),Se=$e;a(Ye)},Qt=(Se,Ye,$e)=>{const{bum:st,scope:et,update:Fe,subTree:tn,um:Gt}=Se;st&&invokeArrayFns(st),et.stop(),Fe&&(Fe.active=!1,Ke(tn,Se,Ye,$e)),Gt&&queuePostRenderEffect(Gt,Ye),queuePostRenderEffect(()=>{Se.isUnmounted=!0},Ye),Ye&&Ye.pendingBranch&&!Ye.isUnmounted&&Se.asyncDep&&!Se.asyncResolved&&Se.suspenseId===Ye.pendingId&&(Ye.deps--,Ye.deps===0&&Ye.resolve())},Xe=(Se,Ye,$e,st=!1,et=!1,Fe=0)=>{for(let tn=Fe;tn<Se.length;tn++)Ke(Se[tn],Ye,$e,st,et)},Be=Se=>Se.shapeFlag&6?Be(Se.component.subTree):Se.shapeFlag&128?Se.suspense.next():c(Se.anchor||Se.el),ue=(Se,Ye,$e)=>{Se==null?Ye._vnode&&Ke(Ye._vnode,null,null,!0):L(Ye._vnode||null,Se,Ye,null,null,null,$e),flushPreFlushCbs(),flushPostFlushCbs(),Ye._vnode=Se},Dt={p:L,um:Ke,m:Te,r:Tt,mt:me,mc:ie,pc:Ee,pbc:oe,n:Be,o:r};let Rt,Bt;return t&&([Rt,Bt]=t(Dt)),{render:ue,hydrate:Rt,createApp:createAppAPI(ue,Rt)}}function toggleRecurse({effect:r,update:t},n){r.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(r,t,n=!1){const o=r.children,a=t.children;if(isArray$4(o)&&isArray$4(a))for(let l=0;l<o.length;l++){const d=o[l];let g=a[l];g.shapeFlag&1&&!g.dynamicChildren&&((g.patchFlag<=0||g.patchFlag===32)&&(g=a[l]=cloneIfMounted(a[l]),g.el=d.el),n||traverseStaticChildren(d,g)),g.type===Text&&(g.el=d.el)}}function getSequence(r){const t=r.slice(),n=[0];let o,a,l,d,g;const y=r.length;for(o=0;o<y;o++){const S=r[o];if(S!==0){if(a=n[n.length-1],r[a]<S){t[o]=a,n.push(o);continue}for(l=0,d=n.length-1;l<d;)g=l+d>>1,r[n[g]]<S?l=g+1:d=g;S<r[n[l]]&&(l>0&&(t[o]=n[l-1]),n[l]=o)}}for(l=n.length,d=n[l-1];l-- >0;)n[l]=d,d=t[d];return n}const isTeleport=r=>r.__isTeleport,isTeleportDisabled=r=>r&&(r.disabled||r.disabled===""),isTargetSVG=r=>typeof SVGElement<"u"&&r instanceof SVGElement,resolveTarget=(r,t)=>{const n=r&&r.to;return isString$2(n)?t?t(n):null:n},TeleportImpl={__isTeleport:!0,process(r,t,n,o,a,l,d,g,y,S){const{mc:x,pc:w,pbc:c,o:{insert:A,querySelector:R,createText:L,createComment:$}}=S,O=isTeleportDisabled(t.props);let{shapeFlag:z,children:V,dynamicChildren:j}=t;if(r==null){const K=t.el=L(""),Z=t.anchor=L("");A(K,n,o),A(Z,n,o);const q=t.target=resolveTarget(t.props,R),ie=t.targetAnchor=L("");q&&(A(ie,q),d=d||isTargetSVG(q));const te=(oe,re)=>{z&16&&x(V,oe,re,a,l,d,g,y)};O?te(n,Z):q&&te(q,ie)}else{t.el=r.el;const K=t.anchor=r.anchor,Z=t.target=r.target,q=t.targetAnchor=r.targetAnchor,ie=isTeleportDisabled(r.props),te=ie?n:Z,oe=ie?K:q;if(d=d||isTargetSVG(Z),j?(c(r.dynamicChildren,j,te,a,l,d,g),traverseStaticChildren(r,t,!0)):y||w(r,t,te,oe,a,l,d,g,!1),O)ie||moveTeleport(t,n,K,S,1);else if((t.props&&t.props.to)!==(r.props&&r.props.to)){const re=t.target=resolveTarget(t.props,R);re&&moveTeleport(t,re,null,S,0)}else ie&&moveTeleport(t,Z,q,S,1)}updateCssVars(t)},remove(r,t,n,o,{um:a,o:{remove:l}},d){const{shapeFlag:g,children:y,anchor:S,targetAnchor:x,target:w,props:c}=r;if(w&&l(x),(d||!isTeleportDisabled(c))&&(l(S),g&16))for(let A=0;A<y.length;A++){const R=y[A];a(R,t,n,!0,!!R.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(r,t,n,{o:{insert:o},m:a},l=2){l===0&&o(r.targetAnchor,t,n);const{el:d,anchor:g,shapeFlag:y,children:S,props:x}=r,w=l===2;if(w&&o(d,t,n),(!w||isTeleportDisabled(x))&&y&16)for(let c=0;c<S.length;c++)a(S[c],t,n,2);w&&o(g,t,n)}function hydrateTeleport(r,t,n,o,a,l,{o:{nextSibling:d,parentNode:g,querySelector:y}},S){const x=t.target=resolveTarget(t.props,y);if(x){const w=x._lpa||x.firstChild;if(t.shapeFlag&16)if(isTeleportDisabled(t.props))t.anchor=S(d(r),t,g(r),n,o,a,l),t.targetAnchor=w;else{t.anchor=d(r);let c=w;for(;c;)if(c=d(c),c&&c.nodeType===8&&c.data==="teleport anchor"){t.targetAnchor=c,x._lpa=t.targetAnchor&&d(t.targetAnchor);break}S(w,t,x,n,o,a,l)}updateCssVars(t)}return t.anchor&&d(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(r){const t=r.ctx;if(t&&t.ut){let n=r.children[0].el;for(;n!==r.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r){isBlockTreeEnabled+=r}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,t,n,o,a,l){return setupBlock(createBaseVNode(r,t,n,o,a,l,!0))}function createBlock(r,t,n,o,a){return setupBlock(createVNode$1(r,t,n,o,a,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,t){return r.type===t.type&&r.key===t.key}function transformVNodeArgs(r){}const InternalObjectKey="__vInternal",normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:t,ref_for:n})=>(typeof r=="number"&&(r=""+r),r!=null?isString$2(r)||isRef(r)||isFunction$2(r)?{i:currentRenderingInstance,r,k:t,f:!!n}:r:null);function createBaseVNode(r,t=null,n=null,o=0,a=null,l=r===Fragment?0:1,d=!1,g=!1){const y={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return g?(normalizeChildren(y,n),l&128&&r.normalize(y)):n&&(y.shapeFlag|=isString$2(n)?8:16),isBlockTreeEnabled>0&&!d&&currentBlock&&(y.patchFlag>0||l&6)&&y.patchFlag!==32&&currentBlock.push(y),y}const createVNode$1=_createVNode;function _createVNode(r,t=null,n=null,o=0,a=null,l=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const g=cloneVNode(r,t,!0);return n&&normalizeChildren(g,n),isBlockTreeEnabled>0&&!l&&currentBlock&&(g.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=g:currentBlock.push(g)),g.patchFlag|=-2,g}if(isClassComponent(r)&&(r=r.__vccOpts),t){t=guardReactiveProps(t);let{class:g,style:y}=t;g&&!isString$2(g)&&(t.class=normalizeClass(g)),isObject$6(y)&&(isProxy(y)&&!isArray$4(y)&&(y=extend$2({},y)),t.style=normalizeStyle$1(y))}const d=isString$2(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject$6(r)?4:isFunction$2(r)?2:0;return createBaseVNode(r,t,n,o,a,d,l,!0)}function guardReactiveProps(r){return r?isProxy(r)||InternalObjectKey in r?extend$2({},r):r:null}function cloneVNode(r,t,n=!1){const{props:o,ref:a,patchFlag:l,children:d}=r,g=t?mergeProps(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:g,key:g&&normalizeKey(g),ref:t&&t.ref?n&&a?isArray$4(a)?a.concat(normalizeRef(t)):[a,normalizeRef(t)]:normalizeRef(t):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:d,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==Fragment?l===-1?16:l|16:l,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function createTextVNode(r=" ",t=0){return createVNode$1(Text,null,r,t)}function createStaticVNode(r,t){const n=createVNode$1(Static,null,r);return n.staticCount=t,n}function createCommentVNode(r="",t=!1){return t?(openBlock(),createBlock(Comment,null,r)):createVNode$1(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode$1(Comment):isArray$4(r)?createVNode$1(Fragment,null,r.slice()):typeof r=="object"?cloneIfMounted(r):createVNode$1(Text,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,t){let n=0;const{shapeFlag:o}=r;if(t==null)t=null;else if(isArray$4(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),normalizeChildren(r,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:a===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else isFunction$2(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),o&64?(n=16,t=[createTextVNode(t)]):n=8);r.children=t,r.shapeFlag|=n}function mergeProps(...r){const t={};for(let n=0;n<r.length;n++){const o=r[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=normalizeClass([t.class,o.class]));else if(a==="style")t.style=normalizeStyle$1([t.style,o.style]);else if(isOn(a)){const l=t[a],d=o[a];d&&l!==d&&!(isArray$4(l)&&l.includes(d))&&(t[a]=l?[].concat(l,d):d)}else a!==""&&(t[a]=o[a])}return t}function invokeVNodeHook(r,t,n,o=null){callWithAsyncErrorHandling(r,t,7,[n,o])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,t,n){const o=r.type,a=(t?t.appContext:r.appContext)||emptyAppContext,l={uid:uid++,vnode:r,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,a),emitsOptions:normalizeEmitsOptions(o,a),emit:null,emitted:null,propsDefaults:EMPTY_OBJ$1,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ$1,data:EMPTY_OBJ$1,props:EMPTY_OBJ$1,attrs:EMPTY_OBJ$1,slots:EMPTY_OBJ$1,refs:EMPTY_OBJ$1,setupState:EMPTY_OBJ$1,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=emit.bind(null,l),r.ce&&r.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(r=>currentInstance=r),internalSetCurrentInstance=r=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(r)):globalCurrentInstanceSetters[0](r)};const setCurrentInstance=r=>{internalSetCurrentInstance(r),r.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,t=!1){isInSSRComponentSetup=t;const{props:n,children:o}=r.vnode,a=isStatefulComponent(r);initProps$1(r,n,a,t),initSlots(r,o);const l=a?setupStatefulComponent(r,t):void 0;return isInSSRComponentSetup=!1,l}function setupStatefulComponent(r,t){const n=r.type;r.accessCache=Object.create(null),r.proxy=markRaw(new Proxy(r.ctx,PublicInstanceProxyHandlers));const{setup:o}=n;if(o){const a=r.setupContext=o.length>1?createSetupContext(r):null;setCurrentInstance(r),pauseTracking();const l=callWithErrorHandling(o,r,0,[r.props,a]);if(resetTracking(),unsetCurrentInstance(),isPromise(l)){if(l.then(unsetCurrentInstance,unsetCurrentInstance),t)return l.then(d=>{handleSetupResult(r,d,t)}).catch(d=>{handleError(d,r,0)});r.asyncDep=l}else handleSetupResult(r,l,t)}else finishComponentSetup(r,t)}function handleSetupResult(r,t,n){isFunction$2(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:isObject$6(t)&&(r.setupState=proxyRefs(t)),finishComponentSetup(r,n)}let compile$1,installWithProxy;function registerRuntimeCompiler(r){compile$1=r,installWithProxy=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(r,t,n){const o=r.type;if(!r.render){if(!t&&compile$1&&!o.render){const a=o.template||resolveMergedOptions(r).template;if(a){const{isCustomElement:l,compilerOptions:d}=r.appContext.config,{delimiters:g,compilerOptions:y}=o,S=extend$2(extend$2({isCustomElement:l,delimiters:g},d),y);o.render=compile$1(a,S)}}r.render=o.render||NOOP,installWithProxy&&installWithProxy(r)}setCurrentInstance(r),pauseTracking(),applyOptions(r),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(t,n){return track(r,"get","$attrs"),t[n]}}))}function createSetupContext(r){const t=n=>{r.exposed=n||{}};return{get attrs(){return getAttrsProxy(r)},slots:r.slots,emit:r.emit,expose:t}}function getExposeProxy(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(t,n){if(n in t)return t[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](r)},has(t,n){return n in t||n in publicPropertiesMap}}))}function getComponentName(r,t=!0){return isFunction$2(r)?r.displayName||r.name:r.name||t&&r.__name}function isClassComponent(r){return isFunction$2(r)&&"__vccOpts"in r}const computed=(r,t)=>computed$1(r,t,isInSSRComponentSetup);function h(r,t,n){const o=arguments.length;return o===2?isObject$6(t)&&!isArray$4(t)?isVNode(t)?createVNode$1(r,null,[t]):createVNode$1(r,t):createVNode$1(r,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&isVNode(n)&&(n=[n]),createVNode$1(r,t,n))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function initCustomFormatter(){}function withMemo(r,t,n,o){const a=n[o];if(a&&isMemoSame(a,r))return a;const l=t();return l.memo=r.slice(),n[o]=l}function isMemoSame(r,t){const n=r.memo;if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(hasChanged(n[o],t[o]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),!0}const version$2="3.3.4",_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,t,n)=>{t.insertBefore(r,n||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,n,o)=>{const a=t?doc.createElementNS(svgNS,r):doc.createElement(r,n?{is:n}:void 0);return r==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,n,o,a,l){const d=n?n.previousSibling:t.lastChild;if(a&&(a===l||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===l||!(a=a.nextSibling)););else{templateContainer.innerHTML=o?`<svg>${r}</svg>`:r;const g=templateContainer.content;if(o){const y=g.firstChild;for(;y.firstChild;)g.appendChild(y.firstChild);g.removeChild(y)}t.insertBefore(g,n)}return[d?d.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(r,t,n){const o=r._vtc;o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?r.removeAttribute("class"):n?r.setAttribute("class",t):r.className=t}function patchStyle(r,t,n){const o=r.style,a=isString$2(n);if(n&&!a){if(t&&!isString$2(t))for(const l in t)n[l]==null&&setStyle(o,l,"");for(const l in n)setStyle(o,l,n[l])}else{const l=o.display;a?t!==n&&(o.cssText=n):t&&r.removeAttribute("style"),"_vod"in r&&(o.display=l)}}const importantRE=/\s*!important$/;function setStyle(r,t,n){if(isArray$4(n))n.forEach(o=>setStyle(r,t,o));else if(n==null&&(n=""),t.startsWith("--"))r.setProperty(t,n);else{const o=autoPrefix(r,t);importantRE.test(n)?r.setProperty(hyphenate(o),n.replace(importantRE,""),"important"):r[o]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,t){const n=prefixCache[t];if(n)return n;let o=camelize(t);if(o!=="filter"&&o in r)return prefixCache[t]=o;o=capitalize(o);for(let a=0;a<prefixes.length;a++){const l=prefixes[a]+o;if(l in r)return prefixCache[t]=l}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,t,n,o,a){if(o&&t.startsWith("xlink:"))n==null?r.removeAttributeNS(xlinkNS,t.slice(6,t.length)):r.setAttributeNS(xlinkNS,t,n);else{const l=isSpecialBooleanAttr(t);n==null||l&&!includeBooleanAttr(n)?r.removeAttribute(t):r.setAttribute(t,l?"":n)}}function patchDOMProp(r,t,n,o,a,l,d){if(t==="innerHTML"||t==="textContent"){o&&d(o,a,l),r[t]=n??"";return}const g=r.tagName;if(t==="value"&&g!=="PROGRESS"&&!g.includes("-")){r._value=n;const S=g==="OPTION"?r.getAttribute("value"):r.value,x=n??"";S!==x&&(r.value=x),n==null&&r.removeAttribute(t);return}let y=!1;if(n===""||n==null){const S=typeof r[t];S==="boolean"?n=includeBooleanAttr(n):n==null&&S==="string"?(n="",y=!0):S==="number"&&(n=0,y=!0)}try{r[t]=n}catch{}y&&r.removeAttribute(t)}function addEventListener$1(r,t,n,o){r.addEventListener(t,n,o)}function removeEventListener$2(r,t,n,o){r.removeEventListener(t,n,o)}function patchEvent(r,t,n,o,a=null){const l=r._vei||(r._vei={}),d=l[t];if(o&&d)d.value=o;else{const[g,y]=parseName(t);if(o){const S=l[t]=createInvoker(o,a);addEventListener$1(r,g,S,y)}else d&&(removeEventListener$2(r,g,d,y),l[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let t;if(optionsModifierRE.test(r)){t={};let o;for(;o=r.match(optionsModifierRE);)r=r.slice(0,r.length-o[0].length),t[o[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,n.value),t,5,[o])};return n.value=r,n.attached=getNow(),n}function patchStopImmediatePropagation(r,t){if(isArray$4(t)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(r,t,n,o,a=!1,l,d,g,y)=>{t==="class"?patchClass(r,o,a):t==="style"?patchStyle(r,n,o):isOn(t)?isModelListener(t)||patchEvent(r,t,n,o,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(r,t,o,a))?patchDOMProp(r,t,o,l,d,g,y):(t==="true-value"?r._trueValue=o:t==="false-value"&&(r._falseValue=o),patchAttr(r,t,o,a))};function shouldSetAsProp(r,t,n,o){return o?!!(t==="innerHTML"||t==="textContent"||t in r&&nativeOnRE.test(t)&&isFunction$2(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$2(n)?!1:t in r}function defineCustomElement(r,t){const n=defineComponent(r);class o extends VueElement{constructor(l){super(n,l,t)}}return o.def=n,o}const defineSSRCustomElement=r=>defineCustomElement(r,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(t,n={},o){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&o?o(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render$1(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let o=0;o<this.attributes.length;o++)this._setAttr(this.attributes[o].name);new MutationObserver(o=>{for(const a of o)this._setAttr(a.attributeName)}).observe(this,{attributes:!0});const t=(o,a=!1)=>{const{props:l,styles:d}=o;let g;if(l&&!isArray$4(l))for(const y in l){const S=l[y];(S===Number||S&&S.type===Number)&&(y in this._props&&(this._props[y]=toNumber(this._props[y])),(g||(g=Object.create(null)))[camelize(y)]=!0)}this._numberProps=g,a&&this._resolveProps(o),this._applyStyles(d),this._update()},n=this._def.__asyncLoader;n?n().then(o=>t(o,!0)):t(this._def)}_resolveProps(t){const{props:n}=t,o=isArray$4(n)?n:Object.keys(n||{});for(const a of Object.keys(this))a[0]!=="_"&&o.includes(a)&&this._setProp(a,this[a],!0,!1);for(const a of o.map(camelize))Object.defineProperty(this,a,{get(){return this._getProp(a)},set(l){this._setProp(a,l)}})}_setAttr(t){let n=this.getAttribute(t);const o=camelize(t);this._numberProps&&this._numberProps[o]&&(n=toNumber(n)),this._setProp(o,n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,o=!0,a=!0){n!==this._props[t]&&(this._props[t]=n,a&&this._instance&&this._update(),o&&(n===!0?this.setAttribute(hyphenate(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(hyphenate(t),n+""):n||this.removeAttribute(hyphenate(t))))}_update(){render$1(this._createVNode(),this.shadowRoot)}_createVNode(){const t=createVNode$1(this._def,extend$2({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0;const o=(l,d)=>{this.dispatchEvent(new CustomEvent(l,{detail:d}))};n.emit=(l,...d)=>{o(l,d),hyphenate(l)!==l&&o(hyphenate(l),d)};let a=this;for(;a=a&&(a.parentNode||a.host);)if(a instanceof VueElement){n.parent=a._instance,n.provides=a._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const o=document.createElement("style");o.textContent=n,this.shadowRoot.appendChild(o)})}}function useCssModule(r="$style"){{const t=getCurrentInstance();if(!t)return EMPTY_OBJ$1;const n=t.type.__cssModules;if(!n)return EMPTY_OBJ$1;const o=n[r];return o||EMPTY_OBJ$1}}function useCssVars(r){const t=getCurrentInstance();if(!t)return;const n=t.ut=(a=r(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(l=>setVarsOnNode(l,a))},o=()=>{const a=r(t.proxy);setVarsOnVNode(t.subTree,a),n(a)};watchPostEffect(o),onMounted(()=>{const a=new MutationObserver(o);a.observe(t.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>a.disconnect())})}function setVarsOnVNode(r,t){if(r.shapeFlag&128){const n=r.suspense;r=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{setVarsOnVNode(n.activeBranch,t)})}for(;r.component;)r=r.component.subTree;if(r.shapeFlag&1&&r.el)setVarsOnNode(r.el,t);else if(r.type===Fragment)r.children.forEach(n=>setVarsOnVNode(n,t));else if(r.type===Static){let{el:n,anchor:o}=r;for(;n&&(setVarsOnNode(n,t),n!==o);)n=n.nextSibling}}function setVarsOnNode(r,t){if(r.nodeType===1){const n=r.style;for(const o in t)n.setProperty(`--${o}`,t[o])}}const TRANSITION="transition",ANIMATION="animation",Transition=(r,{slots:t})=>h(BaseTransition,resolveTransitionProps(r),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(r,t=[])=>{isArray$4(r)?r.forEach(n=>n(...t)):r&&r(...t)},hasExplicitCallback=r=>r?isArray$4(r)?r.some(t=>t.length>1):r.length>1:!1;function resolveTransitionProps(r){const t={};for(const he in r)he in DOMTransitionPropsValidators||(t[he]=r[he]);if(r.css===!1)return t;const{name:n="v",type:o,duration:a,enterFromClass:l=`${n}-enter-from`,enterActiveClass:d=`${n}-enter-active`,enterToClass:g=`${n}-enter-to`,appearFromClass:y=l,appearActiveClass:S=d,appearToClass:x=g,leaveFromClass:w=`${n}-leave-from`,leaveActiveClass:c=`${n}-leave-active`,leaveToClass:A=`${n}-leave-to`}=r,R=normalizeDuration(a),L=R&&R[0],$=R&&R[1],{onBeforeEnter:O,onEnter:z,onEnterCancelled:V,onLeave:j,onLeaveCancelled:K,onBeforeAppear:Z=O,onAppear:q=z,onAppearCancelled:ie=V}=t,te=(he,_e,me)=>{removeTransitionClass(he,_e?x:g),removeTransitionClass(he,_e?S:d),me&&me()},oe=(he,_e)=>{he._isLeaving=!1,removeTransitionClass(he,w),removeTransitionClass(he,A),removeTransitionClass(he,c),_e&&_e()},re=he=>(_e,me)=>{const be=he?q:z,Q=()=>te(_e,he,me);callHook(be,[_e,Q]),nextFrame(()=>{removeTransitionClass(_e,he?y:l),addTransitionClass(_e,he?x:g),hasExplicitCallback(be)||whenTransitionEnds(_e,o,L,Q)})};return extend$2(t,{onBeforeEnter(he){callHook(O,[he]),addTransitionClass(he,l),addTransitionClass(he,d)},onBeforeAppear(he){callHook(Z,[he]),addTransitionClass(he,y),addTransitionClass(he,S)},onEnter:re(!1),onAppear:re(!0),onLeave(he,_e){he._isLeaving=!0;const me=()=>oe(he,_e);addTransitionClass(he,w),forceReflow(),addTransitionClass(he,c),nextFrame(()=>{he._isLeaving&&(removeTransitionClass(he,w),addTransitionClass(he,A),hasExplicitCallback(j)||whenTransitionEnds(he,o,$,me))}),callHook(j,[he,me])},onEnterCancelled(he){te(he,!1),callHook(V,[he])},onAppearCancelled(he){te(he,!0),callHook(ie,[he])},onLeaveCancelled(he){oe(he),callHook(K,[he])}})}function normalizeDuration(r){if(r==null)return null;if(isObject$6(r))return[NumberOf(r.enter),NumberOf(r.leave)];{const t=NumberOf(r);return[t,t]}}function NumberOf(r){return toNumber(r)}function addTransitionClass(r,t){t.split(/\s+/).forEach(n=>n&&r.classList.add(n)),(r._vtc||(r._vtc=new Set)).add(t)}function removeTransitionClass(r,t){t.split(/\s+/).forEach(o=>o&&r.classList.remove(o));const{_vtc:n}=r;n&&(n.delete(t),n.size||(r._vtc=void 0))}function nextFrame(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let endId=0;function whenTransitionEnds(r,t,n,o){const a=r._endId=++endId,l=()=>{a===r._endId&&o()};if(n)return setTimeout(l,n);const{type:d,timeout:g,propCount:y}=getTransitionInfo(r,t);if(!d)return o();const S=d+"end";let x=0;const w=()=>{r.removeEventListener(S,c),l()},c=A=>{A.target===r&&++x>=y&&w()};setTimeout(()=>{x<y&&w()},g+1),r.addEventListener(S,c)}function getTransitionInfo(r,t){const n=window.getComputedStyle(r),o=R=>(n[R]||"").split(", "),a=o(`${TRANSITION}Delay`),l=o(`${TRANSITION}Duration`),d=getTimeout(a,l),g=o(`${ANIMATION}Delay`),y=o(`${ANIMATION}Duration`),S=getTimeout(g,y);let x=null,w=0,c=0;t===TRANSITION?d>0&&(x=TRANSITION,w=d,c=l.length):t===ANIMATION?S>0&&(x=ANIMATION,w=S,c=y.length):(w=Math.max(d,S),x=w>0?d>S?TRANSITION:ANIMATION:null,c=x?x===TRANSITION?l.length:y.length:0);const A=x===TRANSITION&&/\b(transform|all)(,|$)/.test(o(`${TRANSITION}Property`).toString());return{type:x,timeout:w,propCount:c,hasTransform:A}}function getTimeout(r,t){for(;r.length<t.length;)r=r.concat(r);return Math.max(...t.map((n,o)=>toMs(n)+toMs(r[o])))}function toMs(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(r,{slots:t}){const n=getCurrentInstance(),o=useTransitionState();let a,l;return onUpdated(()=>{if(!a.length)return;const d=r.moveClass||`${r.name||"v"}-move`;if(!hasCSSTransform(a[0].el,n.vnode.el,d))return;a.forEach(callPendingCbs),a.forEach(recordPosition);const g=a.filter(applyTranslation);forceReflow(),g.forEach(y=>{const S=y.el,x=S.style;addTransitionClass(S,d),x.transform=x.webkitTransform=x.transitionDuration="";const w=S._moveCb=c=>{c&&c.target!==S||(!c||/transform$/.test(c.propertyName))&&(S.removeEventListener("transitionend",w),S._moveCb=null,removeTransitionClass(S,d))};S.addEventListener("transitionend",w)})}),()=>{const d=toRaw(r),g=resolveTransitionProps(d);let y=d.tag||Fragment;a=l,l=t.default?getTransitionRawChildren(t.default()):[];for(let S=0;S<l.length;S++){const x=l[S];x.key!=null&&setTransitionHooks(x,resolveTransitionHooks(x,g,o,n))}if(a)for(let S=0;S<a.length;S++){const x=a[S];setTransitionHooks(x,resolveTransitionHooks(x,g,o,n)),positionMap.set(x,x.el.getBoundingClientRect())}return createVNode$1(y,null,l)}}},removeMode=r=>delete r.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(r){const t=r.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function recordPosition(r){newPositionMap.set(r,r.el.getBoundingClientRect())}function applyTranslation(r){const t=positionMap.get(r),n=newPositionMap.get(r),o=t.left-n.left,a=t.top-n.top;if(o||a){const l=r.el.style;return l.transform=l.webkitTransform=`translate(${o}px,${a}px)`,l.transitionDuration="0s",r}}function hasCSSTransform(r,t,n){const o=r.cloneNode();r._vtc&&r._vtc.forEach(d=>{d.split(/\s+/).forEach(g=>g&&o.classList.remove(g))}),n.split(/\s+/).forEach(d=>d&&o.classList.add(d)),o.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(o);const{hasTransform:l}=getTransitionInfo(o);return a.removeChild(o),l}const getModelAssigner=r=>{const t=r.props["onUpdate:modelValue"]||!1;return isArray$4(t)?n=>invokeArrayFns(t,n):t};function onCompositionStart(r){r.target.composing=!0}function onCompositionEnd(r){const t=r.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(r,{modifiers:{lazy:t,trim:n,number:o}},a){r._assign=getModelAssigner(a);const l=o||a.props&&a.props.type==="number";addEventListener$1(r,t?"change":"input",d=>{if(d.target.composing)return;let g=r.value;n&&(g=g.trim()),l&&(g=looseToNumber(g)),r._assign(g)}),n&&addEventListener$1(r,"change",()=>{r.value=r.value.trim()}),t||(addEventListener$1(r,"compositionstart",onCompositionStart),addEventListener$1(r,"compositionend",onCompositionEnd),addEventListener$1(r,"change",onCompositionEnd))},mounted(r,{value:t}){r.value=t??""},beforeUpdate(r,{value:t,modifiers:{lazy:n,trim:o,number:a}},l){if(r._assign=getModelAssigner(l),r.composing||document.activeElement===r&&r.type!=="range"&&(n||o&&r.value.trim()===t||(a||r.type==="number")&&looseToNumber(r.value)===t))return;const d=t??"";r.value!==d&&(r.value=d)}},vModelCheckbox={deep:!0,created(r,t,n){r._assign=getModelAssigner(n),addEventListener$1(r,"change",()=>{const o=r._modelValue,a=getValue(r),l=r.checked,d=r._assign;if(isArray$4(o)){const g=looseIndexOf(o,a),y=g!==-1;if(l&&!y)d(o.concat(a));else if(!l&&y){const S=[...o];S.splice(g,1),d(S)}}else if(isSet(o)){const g=new Set(o);l?g.add(a):g.delete(a),d(g)}else d(getCheckboxValue(r,l))})},mounted:setChecked,beforeUpdate(r,t,n){r._assign=getModelAssigner(n),setChecked(r,t,n)}};function setChecked(r,{value:t,oldValue:n},o){r._modelValue=t,isArray$4(t)?r.checked=looseIndexOf(t,o.props.value)>-1:isSet(t)?r.checked=t.has(o.props.value):t!==n&&(r.checked=looseEqual(t,getCheckboxValue(r,!0)))}const vModelRadio={created(r,{value:t},n){r.checked=looseEqual(t,n.props.value),r._assign=getModelAssigner(n),addEventListener$1(r,"change",()=>{r._assign(getValue(r))})},beforeUpdate(r,{value:t,oldValue:n},o){r._assign=getModelAssigner(o),t!==n&&(r.checked=looseEqual(t,o.props.value))}},vModelSelect={deep:!0,created(r,{value:t,modifiers:{number:n}},o){const a=isSet(t);addEventListener$1(r,"change",()=>{const l=Array.prototype.filter.call(r.options,d=>d.selected).map(d=>n?looseToNumber(getValue(d)):getValue(d));r._assign(r.multiple?a?new Set(l):l:l[0])}),r._assign=getModelAssigner(o)},mounted(r,{value:t}){setSelected(r,t)},beforeUpdate(r,t,n){r._assign=getModelAssigner(n)},updated(r,{value:t}){setSelected(r,t)}};function setSelected(r,t){const n=r.multiple;if(!(n&&!isArray$4(t)&&!isSet(t))){for(let o=0,a=r.options.length;o<a;o++){const l=r.options[o],d=getValue(l);if(n)isArray$4(t)?l.selected=looseIndexOf(t,d)>-1:l.selected=t.has(d);else if(looseEqual(getValue(l),t)){r.selectedIndex!==o&&(r.selectedIndex=o);return}}!n&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function getValue(r){return"_value"in r?r._value:r.value}function getCheckboxValue(r,t){const n=t?"_trueValue":"_falseValue";return n in r?r[n]:t}const vModelDynamic={created(r,t,n){callModelHook(r,t,n,null,"created")},mounted(r,t,n){callModelHook(r,t,n,null,"mounted")},beforeUpdate(r,t,n,o){callModelHook(r,t,n,o,"beforeUpdate")},updated(r,t,n,o){callModelHook(r,t,n,o,"updated")}};function resolveDynamicModel(r,t){switch(r){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(t){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(r,t,n,o,a){const d=resolveDynamicModel(r.tagName,n.props&&n.props.type)[a];d&&d(r,t,n,o)}function initVModelForSSR(){vModelText.getSSRProps=({value:r})=>({value:r}),vModelRadio.getSSRProps=({value:r},t)=>{if(t.props&&looseEqual(t.props.value,r))return{checked:!0}},vModelCheckbox.getSSRProps=({value:r},t)=>{if(isArray$4(r)){if(t.props&&looseIndexOf(r,t.props.value)>-1)return{checked:!0}}else if(isSet(r)){if(t.props&&r.has(t.props.value))return{checked:!0}}else if(r)return{checked:!0}},vModelDynamic.getSSRProps=(r,t)=>{if(typeof t.type!="string")return;const n=resolveDynamicModel(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(r,t)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,t)=>systemModifiers.some(n=>r[`${n}Key`]&&!t.includes(n))},withModifiers=(r,t)=>(n,...o)=>{for(let a=0;a<t.length;a++){const l=modifierGuards[t[a]];if(l&&l(n,t))return}return r(n,...o)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(r,t)=>n=>{if(!("key"in n))return;const o=hyphenate(n.key);if(t.some(a=>a===o||keyNames[a]===o))return r(n)},vShow={beforeMount(r,{value:t},{transition:n}){r._vod=r.style.display==="none"?"":r.style.display,n&&t?n.beforeEnter(r):setDisplay(r,t)},mounted(r,{value:t},{transition:n}){n&&t&&n.enter(r)},updated(r,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(r),setDisplay(r,!0),o.enter(r)):o.leave(r,()=>{setDisplay(r,!1)}):setDisplay(r,t))},beforeUnmount(r,{value:t}){setDisplay(r,t)}};function setDisplay(r,t){r.style.display=t?r._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:r})=>{if(!r)return{style:{display:"none"}}}}const rendererOptions=extend$2({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$1=(...r)=>{ensureRenderer().render(...r)},hydrate=(...r)=>{ensureHydrationRenderer().hydrate(...r)},createApp=(...r)=>{const t=ensureRenderer().createApp(...r),{mount:n}=t;return t.mount=o=>{const a=normalizeContainer(o);if(!a)return;const l=t._component;!isFunction$2(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const d=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),d},t},createSSRApp=(...r)=>{const t=ensureHydrationRenderer().createApp(...r),{mount:n}=t;return t.mount=o=>{const a=normalizeContainer(o);if(a)return n(a,!0,a instanceof SVGElement)},t};function normalizeContainer(r){return isString$2(r)?document.querySelector(r):r}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())},compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,EffectScope,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text,Transition,TransitionGroup,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode:createVNode$1,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,get devtools(){return devtools},effect,effectScope,getCurrentInstance,getCurrentScope,getTransitionRawChildren,guardReactiveProps,h,handleError,hasInjectionContext,hydrate,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle:normalizeStyle$1,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$1,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop:stop$1,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useModel,useSSRContext,useSlots,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$2,warn:warn$1,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));var isVue2=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=r=>activePinia=r,piniaSymbol=Symbol();function isPlainObject$1(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var MutationType;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const r=effectScope(!0),t=r.run(()=>ref({}));let n=[],o=[];const a=markRaw({install(l){setActivePinia(a),a._a=l,l.provide(piniaSymbol,a),l.config.globalProperties.$pinia=a,o.forEach(d=>n.push(d)),o=[]},use(l){return!this._a&&!isVue2?o.push(l):n.push(l),this},_p:n,_a:null,_e:r,_s:new Map,state:t});return a}const noop$3=()=>{};function addSubscription(r,t,n,o=noop$3){r.push(t);const a=()=>{const l=r.indexOf(t);l>-1&&(r.splice(l,1),o())};return!n&&getCurrentScope()&&onScopeDispose(a),a}function triggerSubscriptions(r,...t){r.slice().forEach(n=>{n(...t)})}const fallbackRunWithContext=r=>r();function mergeReactiveObjects(r,t){r instanceof Map&&t instanceof Map&&t.forEach((n,o)=>r.set(o,n)),r instanceof Set&&t instanceof Set&&t.forEach(r.add,r);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],a=r[n];isPlainObject$1(a)&&isPlainObject$1(o)&&r.hasOwnProperty(n)&&!isRef(o)&&!isReactive(o)?r[n]=mergeReactiveObjects(a,o):r[n]=o}return r}const skipHydrateSymbol=Symbol();function shouldHydrate(r){return!isPlainObject$1(r)||!r.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(r){return!!(isRef(r)&&r.effect)}function createOptionsStore(r,t,n,o){const{state:a,actions:l,getters:d}=t,g=n.state.value[r];let y;function S(){g||(n.state.value[r]=a?a():{});const x=toRefs(n.state.value[r]);return assign$1(x,l,Object.keys(d||{}).reduce((w,c)=>(w[c]=markRaw(computed(()=>{setActivePinia(n);const A=n._s.get(r);return d[c].call(A,A)})),w),{}))}return y=createSetupStore(r,S,t,n,o,!0),y}function createSetupStore(r,t,n={},o,a,l){let d;const g=assign$1({actions:{}},n),y={deep:!0};let S,x,w=[],c=[],A;const R=o.state.value[r];!l&&!R&&(o.state.value[r]={}),ref({});let L;function $(ie){let te;S=x=!1,typeof ie=="function"?(ie(o.state.value[r]),te={type:MutationType.patchFunction,storeId:r,events:A}):(mergeReactiveObjects(o.state.value[r],ie),te={type:MutationType.patchObject,payload:ie,storeId:r,events:A});const oe=L=Symbol();nextTick().then(()=>{L===oe&&(S=!0)}),x=!0,triggerSubscriptions(w,te,o.state.value[r])}const O=l?function(){const{state:te}=n,oe=te?te():{};this.$patch(re=>{assign$1(re,oe)})}:noop$3;function z(){d.stop(),w=[],c=[],o._s.delete(r)}function V(ie,te){return function(){setActivePinia(o);const oe=Array.from(arguments),re=[],he=[];function _e(Q){re.push(Q)}function me(Q){he.push(Q)}triggerSubscriptions(c,{args:oe,name:ie,store:K,after:_e,onError:me});let be;try{be=te.apply(this&&this.$id===r?this:K,oe)}catch(Q){throw triggerSubscriptions(he,Q),Q}return be instanceof Promise?be.then(Q=>(triggerSubscriptions(re,Q),Q)).catch(Q=>(triggerSubscriptions(he,Q),Promise.reject(Q))):(triggerSubscriptions(re,be),be)}}const j={_p:o,$id:r,$onAction:addSubscription.bind(null,c),$patch:$,$reset:O,$subscribe(ie,te={}){const oe=addSubscription(w,ie,te.detached,()=>re()),re=d.run(()=>watch(()=>o.state.value[r],he=>{(te.flush==="sync"?x:S)&&ie({storeId:r,type:MutationType.direct,events:A},he)},assign$1({},y,te)));return oe},$dispose:z},K=reactive(j);o._s.set(r,K);const q=(o._a&&o._a.runWithContext||fallbackRunWithContext)(()=>o._e.run(()=>(d=effectScope()).run(t)));for(const ie in q){const te=q[ie];if(isRef(te)&&!isComputed(te)||isReactive(te))l||(R&&shouldHydrate(te)&&(isRef(te)?te.value=R[ie]:mergeReactiveObjects(te,R[ie])),o.state.value[r][ie]=te);else if(typeof te=="function"){const oe=V(ie,te);q[ie]=oe,g.actions[ie]=te}}return assign$1(K,q),assign$1(toRaw(K),q),Object.defineProperty(K,"$state",{get:()=>o.state.value[r],set:ie=>{$(te=>{assign$1(te,ie)})}}),o._p.forEach(ie=>{assign$1(K,d.run(()=>ie({store:K,app:o._a,pinia:o,options:g})))}),R&&l&&n.hydrate&&n.hydrate(K.$state,R),S=!0,x=!0,K}function defineStore(r,t,n){let o,a;const l=typeof t=="function";typeof r=="string"?(o=r,a=l?n:t):(a=r,o=r.id);function d(g,y){const S=hasInjectionContext();return g=g||(S?inject(piniaSymbol,null):null),g&&setActivePinia(g),g=activePinia,g._s.has(o)||(l?createSetupStore(o,t,a,g):createOptionsStore(o,a,g)),g._s.get(o)}return d.$id=o,d}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(r,t){const n={};for(const o in t){const a=t[o];n[o]=isArray$3(a)?a.map(r):r(a)}return n}const noop$2=()=>{},isArray$3=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=r=>r.replace(TRAILING_SLASH_RE,"");function parseURL(r,t,n="/"){let o,a={},l="",d="";const g=t.indexOf("#");let y=t.indexOf("?");return g<y&&g>=0&&(y=-1),y>-1&&(o=t.slice(0,y),l=t.slice(y+1,g>-1?g:t.length),a=r(l)),g>-1&&(o=o||t.slice(0,g),d=t.slice(g,t.length)),o=resolveRelativePath(o??t,n),{fullPath:o+(l&&"?")+l+d,path:o,query:a,hash:d}}function stringifyURL(r,t){const n=t.query?r(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function stripBase(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function isSameRouteLocation(r,t,n){const o=t.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&isSameRouteRecord(t.matched[o],n.matched[a])&&isSameRouteLocationParams(t.params,n.params)&&r(t.query)===r(n.query)&&t.hash===n.hash}function isSameRouteRecord(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function isSameRouteLocationParams(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const n in r)if(!isSameRouteLocationParamsValue(r[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(r,t){return isArray$3(r)?isEquivalentArray(r,t):isArray$3(t)?isEquivalentArray(t,r):r===t}function isEquivalentArray(r,t){return isArray$3(t)?r.length===t.length&&r.every((n,o)=>n===t[o]):r.length===1&&r[0]===t}function resolveRelativePath(r,t){if(r.startsWith("/"))return r;if(!r)return t;const n=t.split("/"),o=r.split("/"),a=o[o.length-1];(a===".."||a===".")&&o.push("");let l=n.length-1,d,g;for(d=0;d<o.length;d++)if(g=o[d],g!==".")if(g==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+o.slice(d-(d===o.length?1:0)).join("/")}var NavigationType;(function(r){r.pop="pop",r.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(r){r.back="back",r.forward="forward",r.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(r){if(!r)if(isBrowser){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),removeTrailingSlash(r)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(r,t){return r.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(r,t){const n=document.documentElement.getBoundingClientRect(),o=r.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(r){let t;if("el"in r){const n=r.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=getElementPosition(a,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(r,t){return(history.state?history.state.position-t:-1)+r}const scrollPositions=new Map;function saveScrollPosition(r,t){scrollPositions.set(r,t)}function getSavedScrollPosition(r){const t=scrollPositions.get(r);return scrollPositions.delete(r),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(r,t){const{pathname:n,search:o,hash:a}=t,l=r.indexOf("#");if(l>-1){let g=a.includes(r.slice(l))?r.slice(l).length:1,y=a.slice(g);return y[0]!=="/"&&(y="/"+y),stripBase(y,"")}return stripBase(n,r)+o+a}function useHistoryListeners(r,t,n,o){let a=[],l=[],d=null;const g=({state:c})=>{const A=createCurrentLocation(r,location),R=n.value,L=t.value;let $=0;if(c){if(n.value=A,t.value=c,d&&d===R){d=null;return}$=L?c.position-L.position:0}else o(A);a.forEach(O=>{O(n.value,R,{delta:$,type:NavigationType.pop,direction:$?$>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function y(){d=n.value}function S(c){a.push(c);const A=()=>{const R=a.indexOf(c);R>-1&&a.splice(R,1)};return l.push(A),A}function x(){const{history:c}=window;c.state&&c.replaceState(assign({},c.state,{scroll:computeScrollPosition()}),"")}function w(){for(const c of l)c();l=[],window.removeEventListener("popstate",g),window.removeEventListener("beforeunload",x)}return window.addEventListener("popstate",g),window.addEventListener("beforeunload",x,{passive:!0}),{pauseListeners:y,listen:S,destroy:w}}function buildState(r,t,n,o=!1,a=!1){return{back:r,current:t,forward:n,replaced:o,position:window.history.length,scroll:a?computeScrollPosition():null}}function useHistoryStateNavigation(r){const{history:t,location:n}=window,o={value:createCurrentLocation(r,n)},a={value:t.state};a.value||l(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(y,S,x){const w=r.indexOf("#"),c=w>-1?(n.host&&document.querySelector("base")?r:r.slice(w))+y:createBaseLocation()+r+y;try{t[x?"replaceState":"pushState"](S,"",c),a.value=S}catch(A){console.error(A),n[x?"replace":"assign"](c)}}function d(y,S){const x=assign({},t.state,buildState(a.value.back,y,a.value.forward,!0),S,{position:a.value.position});l(y,x,!0),o.value=y}function g(y,S){const x=assign({},a.value,t.state,{forward:y,scroll:computeScrollPosition()});l(x.current,x,!0);const w=assign({},buildState(o.value,y,null),{position:x.position+1},S);l(y,w,!1),o.value=y}return{location:o,state:a,push:g,replace:d}}function createWebHistory(r){r=normalizeBase(r);const t=useHistoryStateNavigation(r),n=useHistoryListeners(r,t.state,t.location,t.replace);function o(l,d=!0){d||n.pauseListeners(),history.go(l)}const a=assign({location:"",base:r,go:o,createHref:createHref.bind(null,r)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function isRouteLocation(r){return typeof r=="string"||r&&typeof r=="object"}function isRouteName(r){return typeof r=="string"||typeof r=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(r,t){return assign(new Error,{type:r,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(r,t){return r instanceof Error&&NavigationFailureSymbol in r&&(t==null||!!(r.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(r,t){const n=assign({},BASE_PATH_PARSER_OPTIONS,t),o=[];let a=n.start?"^":"";const l=[];for(const S of r){const x=S.length?[]:[90];n.strict&&!S.length&&(a+="/");for(let w=0;w<S.length;w++){const c=S[w];let A=40+(n.sensitive?.25:0);if(c.type===0)w||(a+="/"),a+=c.value.replace(REGEX_CHARS_RE,"\\$&"),A+=40;else if(c.type===1){const{value:R,repeatable:L,optional:$,regexp:O}=c;l.push({name:R,repeatable:L,optional:$});const z=O||BASE_PARAM_PATTERN;if(z!==BASE_PARAM_PATTERN){A+=10;try{new RegExp(`(${z})`)}catch(j){throw new Error(`Invalid custom RegExp for param "${R}" (${z}): `+j.message)}}let V=L?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;w||(V=$&&S.length<2?`(?:/${V})`:"/"+V),$&&(V+="?"),a+=V,A+=20,$&&(A+=-8),L&&(A+=-20),z===".*"&&(A+=-50)}x.push(A)}o.push(x)}if(n.strict&&n.end){const S=o.length-1;o[S][o[S].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const d=new RegExp(a,n.sensitive?"":"i");function g(S){const x=S.match(d),w={};if(!x)return null;for(let c=1;c<x.length;c++){const A=x[c]||"",R=l[c-1];w[R.name]=A&&R.repeatable?A.split("/"):A}return w}function y(S){let x="",w=!1;for(const c of r){(!w||!x.endsWith("/"))&&(x+="/"),w=!1;for(const A of c)if(A.type===0)x+=A.value;else if(A.type===1){const{value:R,repeatable:L,optional:$}=A,O=R in S?S[R]:"";if(isArray$3(O)&&!L)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const z=isArray$3(O)?O.join("/"):O;if(!z)if($)c.length<2&&(x.endsWith("/")?x=x.slice(0,-1):w=!0);else throw new Error(`Missing required param "${R}"`);x+=z}}return x||"/"}return{re:d,score:o,keys:l,parse:g,stringify:y}}function compareScoreArray(r,t){let n=0;for(;n<r.length&&n<t.length;){const o=t[n]-r[n];if(o)return o;n++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(r,t){let n=0;const o=r.score,a=t.score;for(;n<o.length&&n<a.length;){const l=compareScoreArray(o[n],a[n]);if(l)return l;n++}if(Math.abs(a.length-o.length)===1){if(isLastScoreNegative(o))return 1;if(isLastScoreNegative(a))return-1}return a.length-o.length}function isLastScoreNegative(r){const t=r[r.length-1];return r.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(r){if(!r)return[[]];if(r==="/")return[[ROOT_TOKEN]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(A){throw new Error(`ERR (${n})/"${S}": ${A}`)}let n=0,o=n;const a=[];let l;function d(){l&&a.push(l),l=[]}let g=0,y,S="",x="";function w(){S&&(n===0?l.push({type:0,value:S}):n===1||n===2||n===3?(l.length>1&&(y==="*"||y==="+")&&t(`A repeatable param (${S}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:S,regexp:x,repeatable:y==="*"||y==="+",optional:y==="*"||y==="?"})):t("Invalid state to consume buffer"),S="")}function c(){S+=y}for(;g<r.length;){if(y=r[g++],y==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:y==="/"?(S&&w(),d()):y===":"?(w(),n=1):c();break;case 4:c(),n=o;break;case 1:y==="("?n=2:VALID_PARAM_RE.test(y)?c():(w(),n=0,y!=="*"&&y!=="?"&&y!=="+"&&g--);break;case 2:y===")"?x[x.length-1]=="\\"?x=x.slice(0,-1)+y:n=3:x+=y;break;case 3:w(),n=0,y!=="*"&&y!=="?"&&y!=="+"&&g--,x="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${S}"`),w(),d(),a}function createRouteRecordMatcher(r,t,n){const o=tokensToParser(tokenizePath(r.path),n),a=assign(o,{record:r,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function createRouterMatcher(r,t){const n=[],o=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function a(x){return o.get(x)}function l(x,w,c){const A=!c,R=normalizeRouteRecord(x);R.aliasOf=c&&c.record;const L=mergeOptions(t,x),$=[R];if("alias"in x){const V=typeof x.alias=="string"?[x.alias]:x.alias;for(const j of V)$.push(assign({},R,{components:c?c.record.components:R.components,path:j,aliasOf:c?c.record:R}))}let O,z;for(const V of $){const{path:j}=V;if(w&&j[0]!=="/"){const K=w.record.path,Z=K[K.length-1]==="/"?"":"/";V.path=w.record.path+(j&&Z+j)}if(O=createRouteRecordMatcher(V,w,L),c?c.alias.push(O):(z=z||O,z!==O&&z.alias.push(O),A&&x.name&&!isAliasRecord(O)&&d(x.name)),R.children){const K=R.children;for(let Z=0;Z<K.length;Z++)l(K[Z],O,c&&c.children[Z])}c=c||O,(O.record.components&&Object.keys(O.record.components).length||O.record.name||O.record.redirect)&&y(O)}return z?()=>{d(z)}:noop$2}function d(x){if(isRouteName(x)){const w=o.get(x);w&&(o.delete(x),n.splice(n.indexOf(w),1),w.children.forEach(d),w.alias.forEach(d))}else{const w=n.indexOf(x);w>-1&&(n.splice(w,1),x.record.name&&o.delete(x.record.name),x.children.forEach(d),x.alias.forEach(d))}}function g(){return n}function y(x){let w=0;for(;w<n.length&&comparePathParserScore(x,n[w])>=0&&(x.record.path!==n[w].record.path||!isRecordChildOf(x,n[w]));)w++;n.splice(w,0,x),x.record.name&&!isAliasRecord(x)&&o.set(x.record.name,x)}function S(x,w){let c,A={},R,L;if("name"in x&&x.name){if(c=o.get(x.name),!c)throw createRouterError(1,{location:x});L=c.record.name,A=assign(paramsFromLocation(w.params,c.keys.filter(z=>!z.optional).map(z=>z.name)),x.params&&paramsFromLocation(x.params,c.keys.map(z=>z.name))),R=c.stringify(A)}else if("path"in x)R=x.path,c=n.find(z=>z.re.test(R)),c&&(A=c.parse(R),L=c.record.name);else{if(c=w.name?o.get(w.name):n.find(z=>z.re.test(w.path)),!c)throw createRouterError(1,{location:x,currentLocation:w});L=c.record.name,A=assign({},w.params,x.params),R=c.stringify(A)}const $=[];let O=c;for(;O;)$.unshift(O.record),O=O.parent;return{name:L,path:R,params:A,matched:$,meta:mergeMetaFields($)}}return r.forEach(x=>l(x)),{addRoute:l,resolve:S,removeRoute:d,getRoutes:g,getRecordMatcher:a}}function paramsFromLocation(r,t){const n={};for(const o of t)o in r&&(n[o]=r[o]);return n}function normalizeRouteRecord(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:normalizeRecordProps(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function normalizeRecordProps(r){const t={},n=r.props||!1;if("component"in r)t.default=n;else for(const o in r.components)t[o]=typeof n=="object"?n[o]:n;return t}function isAliasRecord(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function mergeMetaFields(r){return r.reduce((t,n)=>assign(t,n.meta),{})}function mergeOptions(r,t){const n={};for(const o in r)n[o]=o in t?t[o]:r[o];return n}function isRecordChildOf(r,t){return t.children.some(n=>n===r||isRecordChildOf(r,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(r){return encodeURI(""+r).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(r){return commonEncode(r).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(r){return commonEncode(r).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(r){return encodeQueryValue(r).replace(EQUAL_RE,"%3D")}function encodePath(r){return commonEncode(r).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(r){return r==null?"":encodePath(r).replace(SLASH_RE,"%2F")}function decode$1(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function parseQuery(r){const t={};if(r===""||r==="?")return t;const o=(r[0]==="?"?r.slice(1):r).split("&");for(let a=0;a<o.length;++a){const l=o[a].replace(PLUS_RE," "),d=l.indexOf("="),g=decode$1(d<0?l:l.slice(0,d)),y=d<0?null:decode$1(l.slice(d+1));if(g in t){let S=t[g];isArray$3(S)||(S=t[g]=[S]),S.push(y)}else t[g]=y}return t}function stringifyQuery(r){let t="";for(let n in r){const o=r[n];if(n=encodeQueryKey(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(isArray$3(o)?o.map(l=>l&&encodeQueryValue(l)):[o&&encodeQueryValue(o)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+n,l!=null&&(t+="="+l))})}return t}function normalizeQuery(r){const t={};for(const n in r){const o=r[n];o!==void 0&&(t[n]=isArray$3(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let r=[];function t(o){return r.push(o),()=>{const a=r.indexOf(o);a>-1&&r.splice(a,1)}}function n(){r=[]}return{add:t,list:()=>r.slice(),reset:n}}function guardToPromiseFn(r,t,n,o,a){const l=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((d,g)=>{const y=w=>{w===!1?g(createRouterError(4,{from:n,to:t})):w instanceof Error?g(w):isRouteLocation(w)?g(createRouterError(2,{from:t,to:w})):(l&&o.enterCallbacks[a]===l&&typeof w=="function"&&l.push(w),d())},S=r.call(o&&o.instances[a],t,n,y);let x=Promise.resolve(S);r.length<3&&(x=x.then(y)),x.catch(w=>g(w))})}function extractComponentsGuards(r,t,n,o){const a=[];for(const l of r)for(const d in l.components){let g=l.components[d];if(!(t!=="beforeRouteEnter"&&!l.instances[d]))if(isRouteComponent(g)){const S=(g.__vccOpts||g)[t];S&&a.push(guardToPromiseFn(S,n,o,l,d))}else{let y=g();a.push(()=>y.then(S=>{if(!S)return Promise.reject(new Error(`Couldn't resolve component "${d}" at "${l.path}"`));const x=isESModule(S)?S.default:S;l.components[d]=x;const c=(x.__vccOpts||x)[t];return c&&guardToPromiseFn(c,n,o,l,d)()}))}}return a}function isRouteComponent(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function useLink(r){const t=inject(routerKey),n=inject(routeLocationKey),o=computed(()=>t.resolve(unref(r.to))),a=computed(()=>{const{matched:y}=o.value,{length:S}=y,x=y[S-1],w=n.matched;if(!x||!w.length)return-1;const c=w.findIndex(isSameRouteRecord.bind(null,x));if(c>-1)return c;const A=getOriginalPath(y[S-2]);return S>1&&getOriginalPath(x)===A&&w[w.length-1].path!==A?w.findIndex(isSameRouteRecord.bind(null,y[S-2])):c}),l=computed(()=>a.value>-1&&includesParams(n.params,o.value.params)),d=computed(()=>a.value>-1&&a.value===n.matched.length-1&&isSameRouteLocationParams(n.params,o.value.params));function g(y={}){return guardEvent(y)?t[unref(r.replace)?"replace":"push"](unref(r.to)).catch(noop$2):Promise.resolve()}return{route:o,href:computed(()=>o.value.href),isActive:l,isExactActive:d,navigate:g}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(r,{slots:t}){const n=reactive(useLink(r)),{options:o}=inject(routerKey),a=computed(()=>({[getLinkClass(r.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(r.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=t.default&&t.default(n);return r.custom?l:h("a",{"aria-current":n.isExactActive?r.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function includesParams(r,t){for(const n in t){const o=t[n],a=r[n];if(typeof o=="string"){if(o!==a)return!1}else if(!isArray$3(a)||a.length!==o.length||o.some((l,d)=>l!==a[d]))return!1}return!0}function getOriginalPath(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const getLinkClass=(r,t,n)=>r??t??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:t,slots:n}){const o=inject(routerViewLocationKey),a=computed(()=>r.route||o.value),l=inject(viewDepthKey,0),d=computed(()=>{let S=unref(l);const{matched:x}=a.value;let w;for(;(w=x[S])&&!w.components;)S++;return S}),g=computed(()=>a.value.matched[d.value]);provide(viewDepthKey,computed(()=>d.value+1)),provide(matchedRouteKey,g),provide(routerViewLocationKey,a);const y=ref();return watch(()=>[y.value,g.value,r.name],([S,x,w],[c,A,R])=>{x&&(x.instances[w]=S,A&&A!==x&&S&&S===c&&(x.leaveGuards.size||(x.leaveGuards=A.leaveGuards),x.updateGuards.size||(x.updateGuards=A.updateGuards))),S&&x&&(!A||!isSameRouteRecord(x,A)||!c)&&(x.enterCallbacks[w]||[]).forEach(L=>L(S))},{flush:"post"}),()=>{const S=a.value,x=r.name,w=g.value,c=w&&w.components[x];if(!c)return normalizeSlot(n.default,{Component:c,route:S});const A=w.props[x],R=A?A===!0?S.params:typeof A=="function"?A(S):A:null,$=h(c,assign({},R,t,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(w.instances[x]=null)},ref:y}));return normalizeSlot(n.default,{Component:$,route:S})||$}}});function normalizeSlot(r,t){if(!r)return null;const n=r(t);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(r){const t=createRouterMatcher(r.routes,r),n=r.parseQuery||parseQuery,o=r.stringifyQuery||stringifyQuery,a=r.history,l=useCallbacks(),d=useCallbacks(),g=useCallbacks(),y=shallowRef(START_LOCATION_NORMALIZED);let S=START_LOCATION_NORMALIZED;isBrowser&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=applyToParams.bind(null,Be=>""+Be),w=applyToParams.bind(null,encodeParam),c=applyToParams.bind(null,decode$1);function A(Be,ue){let Dt,Rt;return isRouteName(Be)?(Dt=t.getRecordMatcher(Be),Rt=ue):Rt=Be,t.addRoute(Rt,Dt)}function R(Be){const ue=t.getRecordMatcher(Be);ue&&t.removeRoute(ue)}function L(){return t.getRoutes().map(Be=>Be.record)}function $(Be){return!!t.getRecordMatcher(Be)}function O(Be,ue){if(ue=assign({},ue||y.value),typeof Be=="string"){const $e=parseURL(n,Be,ue.path),st=t.resolve({path:$e.path},ue),et=a.createHref($e.fullPath);return assign($e,st,{params:c(st.params),hash:decode$1($e.hash),redirectedFrom:void 0,href:et})}let Dt;if("path"in Be)Dt=assign({},Be,{path:parseURL(n,Be.path,ue.path).path});else{const $e=assign({},Be.params);for(const st in $e)$e[st]==null&&delete $e[st];Dt=assign({},Be,{params:w($e)}),ue.params=w(ue.params)}const Rt=t.resolve(Dt,ue),Bt=Be.hash||"";Rt.params=x(c(Rt.params));const Se=stringifyURL(o,assign({},Be,{hash:encodeHash(Bt),path:Rt.path})),Ye=a.createHref(Se);return assign({fullPath:Se,hash:Bt,query:o===stringifyQuery?normalizeQuery(Be.query):Be.query||{}},Rt,{redirectedFrom:void 0,href:Ye})}function z(Be){return typeof Be=="string"?parseURL(n,Be,y.value.path):assign({},Be)}function V(Be,ue){if(S!==Be)return createRouterError(8,{from:ue,to:Be})}function j(Be){return q(Be)}function K(Be){return j(assign(z(Be),{replace:!0}))}function Z(Be){const ue=Be.matched[Be.matched.length-1];if(ue&&ue.redirect){const{redirect:Dt}=ue;let Rt=typeof Dt=="function"?Dt(Be):Dt;return typeof Rt=="string"&&(Rt=Rt.includes("?")||Rt.includes("#")?Rt=z(Rt):{path:Rt},Rt.params={}),assign({query:Be.query,hash:Be.hash,params:"path"in Rt?{}:Be.params},Rt)}}function q(Be,ue){const Dt=S=O(Be),Rt=y.value,Bt=Be.state,Se=Be.force,Ye=Be.replace===!0,$e=Z(Dt);if($e)return q(assign(z($e),{state:typeof $e=="object"?assign({},Bt,$e.state):Bt,force:Se,replace:Ye}),ue||Dt);const st=Dt;st.redirectedFrom=ue;let et;return!Se&&isSameRouteLocation(o,Rt,Dt)&&(et=createRouterError(16,{to:st,from:Rt}),Te(Rt,Rt,!0,!1)),(et?Promise.resolve(et):oe(st,Rt)).catch(Fe=>isNavigationFailure(Fe)?isNavigationFailure(Fe,2)?Fe:it(Fe):Ee(Fe,st,Rt)).then(Fe=>{if(Fe){if(isNavigationFailure(Fe,2))return q(assign({replace:Ye},z(Fe.to),{state:typeof Fe.to=="object"?assign({},Bt,Fe.to.state):Bt,force:Se}),ue||st)}else Fe=he(st,Rt,!0,Ye,Bt);return re(st,Rt,Fe),Fe})}function ie(Be,ue){const Dt=V(Be,ue);return Dt?Promise.reject(Dt):Promise.resolve()}function te(Be){const ue=Lt.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(Be):Be()}function oe(Be,ue){let Dt;const[Rt,Bt,Se]=extractChangingRecords(Be,ue);Dt=extractComponentsGuards(Rt.reverse(),"beforeRouteLeave",Be,ue);for(const $e of Rt)$e.leaveGuards.forEach(st=>{Dt.push(guardToPromiseFn(st,Be,ue))});const Ye=ie.bind(null,Be,ue);return Dt.push(Ye),Xe(Dt).then(()=>{Dt=[];for(const $e of l.list())Dt.push(guardToPromiseFn($e,Be,ue));return Dt.push(Ye),Xe(Dt)}).then(()=>{Dt=extractComponentsGuards(Bt,"beforeRouteUpdate",Be,ue);for(const $e of Bt)$e.updateGuards.forEach(st=>{Dt.push(guardToPromiseFn(st,Be,ue))});return Dt.push(Ye),Xe(Dt)}).then(()=>{Dt=[];for(const $e of Se)if($e.beforeEnter)if(isArray$3($e.beforeEnter))for(const st of $e.beforeEnter)Dt.push(guardToPromiseFn(st,Be,ue));else Dt.push(guardToPromiseFn($e.beforeEnter,Be,ue));return Dt.push(Ye),Xe(Dt)}).then(()=>(Be.matched.forEach($e=>$e.enterCallbacks={}),Dt=extractComponentsGuards(Se,"beforeRouteEnter",Be,ue),Dt.push(Ye),Xe(Dt))).then(()=>{Dt=[];for(const $e of d.list())Dt.push(guardToPromiseFn($e,Be,ue));return Dt.push(Ye),Xe(Dt)}).catch($e=>isNavigationFailure($e,8)?$e:Promise.reject($e))}function re(Be,ue,Dt){g.list().forEach(Rt=>te(()=>Rt(Be,ue,Dt)))}function he(Be,ue,Dt,Rt,Bt){const Se=V(Be,ue);if(Se)return Se;const Ye=ue===START_LOCATION_NORMALIZED,$e=isBrowser?history.state:{};Dt&&(Rt||Ye?a.replace(Be.fullPath,assign({scroll:Ye&&$e&&$e.scroll},Bt)):a.push(Be.fullPath,Bt)),y.value=Be,Te(Be,ue,Dt,Ye),it()}let _e;function me(){_e||(_e=a.listen((Be,ue,Dt)=>{if(!Qt.listening)return;const Rt=O(Be),Bt=Z(Rt);if(Bt){q(assign(Bt,{replace:!0}),Rt).catch(noop$2);return}S=Rt;const Se=y.value;isBrowser&&saveScrollPosition(getScrollKey(Se.fullPath,Dt.delta),computeScrollPosition()),oe(Rt,Se).catch(Ye=>isNavigationFailure(Ye,12)?Ye:isNavigationFailure(Ye,2)?(q(Ye.to,Rt).then($e=>{isNavigationFailure($e,20)&&!Dt.delta&&Dt.type===NavigationType.pop&&a.go(-1,!1)}).catch(noop$2),Promise.reject()):(Dt.delta&&a.go(-Dt.delta,!1),Ee(Ye,Rt,Se))).then(Ye=>{Ye=Ye||he(Rt,Se,!1),Ye&&(Dt.delta&&!isNavigationFailure(Ye,8)?a.go(-Dt.delta,!1):Dt.type===NavigationType.pop&&isNavigationFailure(Ye,20)&&a.go(-1,!1)),re(Rt,Se,Ye)}).catch(noop$2)}))}let be=useCallbacks(),Q=useCallbacks(),Ne;function Ee(Be,ue,Dt){it(Be);const Rt=Q.list();return Rt.length?Rt.forEach(Bt=>Bt(Be,ue,Dt)):console.error(Be),Promise.reject(Be)}function Ge(){return Ne&&y.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Be,ue)=>{be.add([Be,ue])})}function it(Be){return Ne||(Ne=!Be,me(),be.list().forEach(([ue,Dt])=>Be?Dt(Be):ue()),be.reset()),Be}function Te(Be,ue,Dt,Rt){const{scrollBehavior:Bt}=r;if(!isBrowser||!Bt)return Promise.resolve();const Se=!Dt&&getSavedScrollPosition(getScrollKey(Be.fullPath,0))||(Rt||!Dt)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Bt(Be,ue,Se)).then(Ye=>Ye&&scrollToPosition(Ye)).catch(Ye=>Ee(Ye,Be,ue))}const Ke=Be=>a.go(Be);let Tt;const Lt=new Set,Qt={currentRoute:y,listening:!0,addRoute:A,removeRoute:R,hasRoute:$,getRoutes:L,resolve:O,options:r,push:j,replace:K,go:Ke,back:()=>Ke(-1),forward:()=>Ke(1),beforeEach:l.add,beforeResolve:d.add,afterEach:g.add,onError:Q.add,isReady:Ge,install(Be){const ue=this;Be.component("RouterLink",RouterLink),Be.component("RouterView",RouterView),Be.config.globalProperties.$router=ue,Object.defineProperty(Be.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(y)}),isBrowser&&!Tt&&y.value===START_LOCATION_NORMALIZED&&(Tt=!0,j(a.location).catch(Bt=>{}));const Dt={};for(const Bt in START_LOCATION_NORMALIZED)Object.defineProperty(Dt,Bt,{get:()=>y.value[Bt],enumerable:!0});Be.provide(routerKey,ue),Be.provide(routeLocationKey,shallowReactive(Dt)),Be.provide(routerViewLocationKey,y);const Rt=Be.unmount;Lt.add(Be),Be.unmount=function(){Lt.delete(Be),Lt.size<1&&(S=START_LOCATION_NORMALIZED,_e&&_e(),_e=null,y.value=START_LOCATION_NORMALIZED,Tt=!1,Ne=!1),Rt()}}};function Xe(Be){return Be.reduce((ue,Dt)=>ue.then(()=>te(Dt)),Promise.resolve())}return Qt}function extractChangingRecords(r,t){const n=[],o=[],a=[],l=Math.max(t.matched.length,r.matched.length);for(let d=0;d<l;d++){const g=t.matched[d];g&&(r.matched.find(S=>isSameRouteRecord(S,g))?o.push(g):n.push(g));const y=r.matched[d];y&&(t.matched.find(S=>isSameRouteRecord(S,y))||a.push(y))}return[n,o,a]}function useRouter(){return inject(routerKey)}function useRoute(){return inject(routeLocationKey)}const _export_sfc=(r,t)=>{const n=r.__vccOpts||r;for(const[o,a]of t)n[o]=a;return n},_sfc_main$p={components:{RouterView},setup(){}};function _sfc_render$1(r,t,n,o,a,l){const d=resolveComponent("RouterView");return openBlock(),createBlock(d)}const App=_export_sfc(_sfc_main$p,[["render",_sfc_render$1]]),_sfc_main$o={__name:"ArticleList",props:{title:{type:String,default:"无内容"},list:{type:Array}},setup(r){const t=r;return(n,o)=>{const a=resolveComponent("router-link"),l=resolveComponent("Card");return openBlock(),createBlock(l,{style:{width:"70%",position:"relative",left:"50%",transform:"translateX(-50%)"}},{title:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.title),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.list,d=>(openBlock(),createElementBlock("p",{key:d.id,style:{"border-bottom":"1px solid #dcdee2",padding:"20px 0 20px 0"}},[createVNode$1(a,{to:`/layout/article/${d.id}`},{default:withCtx(()=>[createTextVNode(toDisplayString(d.title),1)]),_:2},1032,["to"])]))),128))]),_:1})}}};function bind$2(r,t){return function(){return r.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(r=>t=>{const n=toString.call(t);return r[n]||(r[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=r=>(r=r.toLowerCase(),t=>kindOf(t)===r),typeOfTest=r=>t=>typeof t===r,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(r){return r!==null&&!isUndefined(r)&&r.constructor!==null&&!isUndefined(r.constructor)&&isFunction$1(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&isArrayBuffer(r.buffer),t}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$5=r=>r!==null&&typeof r=="object",isBoolean=r=>r===!0||r===!1,isPlainObject=r=>{if(kindOf(r)!=="object")return!1;const t=getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=r=>isObject$5(r)&&isFunction$1(r.pipe),isFormData=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||isFunction$1(r.append)&&((t=kindOf(r))==="formdata"||t==="object"&&isFunction$1(r.toString)&&r.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim$2=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(r,t,{allOwnKeys:n=!1}={}){if(r===null||typeof r>"u")return;let o,a;if(typeof r!="object"&&(r=[r]),isArray$2(r))for(o=0,a=r.length;o<a;o++)t.call(null,r[o],o,r);else{const l=n?Object.getOwnPropertyNames(r):Object.keys(r),d=l.length;let g;for(o=0;o<d;o++)g=l[o],t.call(null,r[g],g,r)}}function findKey(r,t){t=t.toLowerCase();const n=Object.keys(r);let o=n.length,a;for(;o-- >0;)if(a=n[o],t===a.toLowerCase())return a;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=r=>!isUndefined(r)&&r!==_global;function merge$1(){const{caseless:r}=isContextDefined(this)&&this||{},t={},n=(o,a)=>{const l=r&&findKey(t,a)||a;isPlainObject(t[l])&&isPlainObject(o)?t[l]=merge$1(t[l],o):isPlainObject(o)?t[l]=merge$1({},o):isArray$2(o)?t[l]=o.slice():t[l]=o};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&forEach(arguments[o],n);return t}const extend$1=(r,t,n,{allOwnKeys:o}={})=>(forEach(t,(a,l)=>{n&&isFunction$1(a)?r[l]=bind$2(a,n):r[l]=a},{allOwnKeys:o}),r),stripBOM=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),inherits$1=(r,t,n,o)=>{r.prototype=Object.create(t.prototype,o),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),n&&Object.assign(r.prototype,n)},toFlatObject=(r,t,n,o)=>{let a,l,d;const g={};if(t=t||{},r==null)return t;do{for(a=Object.getOwnPropertyNames(r),l=a.length;l-- >0;)d=a[l],(!o||o(d,r,t))&&!g[d]&&(t[d]=r[d],g[d]=!0);r=n!==!1&&getPrototypeOf(r)}while(r&&(!n||n(r,t))&&r!==Object.prototype);return t},endsWith=(r,t,n)=>{r=String(r),(n===void 0||n>r.length)&&(n=r.length),n-=t.length;const o=r.indexOf(t,n);return o!==-1&&o===n},toArray=r=>{if(!r)return null;if(isArray$2(r))return r;let t=r.length;if(!isNumber$1(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=r[t];return n},isTypedArray$1=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(r,t)=>{const o=(r&&r[Symbol.iterator]).call(r);let a;for(;(a=o.next())&&!a.done;){const l=a.value;t.call(r,l[0],l[1])}},matchAll=(r,t)=>{let n;const o=[];for(;(n=r.exec(t))!==null;)o.push(n);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),hasOwnProperty=(({hasOwnProperty:r})=>(t,n)=>r.call(t,n))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(r,t)=>{const n=Object.getOwnPropertyDescriptors(r),o={};forEach(n,(a,l)=>{let d;(d=t(a,l,r))!==!1&&(o[l]=d||a)}),Object.defineProperties(r,o)},freezeMethods=r=>{reduceDescriptors(r,(t,n)=>{if(isFunction$1(r)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=r[n];if(isFunction$1(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(r,t)=>{const n={},o=a=>{a.forEach(l=>{n[l]=!0})};return isArray$2(r)?o(r):o(String(r).split(t)),n},noop$1=()=>{},toFiniteNumber=(r,t)=>(r=+r,Number.isFinite(r)?r:t),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(r=16,t=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;r--;)n+=t[Math.random()*o|0];return n};function isSpecCompliantForm(r){return!!(r&&isFunction$1(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const toJSONObject=r=>{const t=new Array(10),n=(o,a)=>{if(isObject$5(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[a]=o;const l=isArray$2(o)?[]:{};return forEach(o,(d,g)=>{const y=n(d,a+1);!isUndefined(y)&&(l[g]=y)}),t[a]=void 0,l}}return o};return n(r,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=r=>r&&(isObject$5(r)||isFunction$1(r))&&isFunction$1(r.then)&&isFunction$1(r.catch),utils={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$5,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$1,trim:trim$2,stripBOM,inherits:inherits$1,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(r,t,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{descriptors[r]={value:r}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(r,t,n,o,a,l)=>{const d=Object.create(prototype$1);return utils.toFlatObject(r,d,function(y){return y!==Error.prototype},g=>g!=="isAxiosError"),AxiosError.call(d,r.message,t,n,o,a),d.cause=r,d.name=r.name,l&&Object.assign(d,l),d};const httpAdapter=null;function isVisitable(r){return utils.isPlainObject(r)||utils.isArray(r)}function removeBrackets(r){return utils.endsWith(r,"[]")?r.slice(0,-2):r}function renderKey(r,t,n){return r?r.concat(t).map(function(a,l){return a=removeBrackets(a),!n&&l?"["+a+"]":a}).join(n?".":""):t}function isFlatArray(r){return utils.isArray(r)&&!r.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData(r,t,n){if(!utils.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,n=utils.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,$){return!utils.isUndefined($[L])});const o=n.metaTokens,a=n.visitor||x,l=n.dots,d=n.indexes,y=(n.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(t);if(!utils.isFunction(a))throw new TypeError("visitor must be a function");function S(R){if(R===null)return"";if(utils.isDate(R))return R.toISOString();if(!y&&utils.isBlob(R))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(R)||utils.isTypedArray(R)?y&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function x(R,L,$){let O=R;if(R&&!$&&typeof R=="object"){if(utils.endsWith(L,"{}"))L=o?L:L.slice(0,-2),R=JSON.stringify(R);else if(utils.isArray(R)&&isFlatArray(R)||(utils.isFileList(R)||utils.endsWith(L,"[]"))&&(O=utils.toArray(R)))return L=removeBrackets(L),O.forEach(function(V,j){!(utils.isUndefined(V)||V===null)&&t.append(d===!0?renderKey([L],j,l):d===null?L:L+"[]",S(V))}),!1}return isVisitable(R)?!0:(t.append(renderKey($,L,l),S(R)),!1)}const w=[],c=Object.assign(predicates,{defaultVisitor:x,convertValue:S,isVisitable});function A(R,L){if(!utils.isUndefined(R)){if(w.indexOf(R)!==-1)throw Error("Circular reference detected in "+L.join("."));w.push(R),utils.forEach(R,function(O,z){(!(utils.isUndefined(O)||O===null)&&a.call(t,O,utils.isString(z)?z.trim():z,L,c))===!0&&A(O,L?L.concat(z):[z])}),w.pop()}}if(!utils.isObject(r))throw new TypeError("data must be an object");return A(r),t}function encode$1(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function AxiosURLSearchParams(r,t){this._pairs=[],r&&toFormData(r,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(o){return t.call(this,o,encode$1)}:encode$1;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function encode(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(r,t,n){if(!t)return r;const o=n&&n.encode||encode,a=n&&n.serialize;let l;if(a?l=a(t,n):l=utils.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(o),l){const d=r.indexOf("#");d!==-1&&(r=r.slice(0,d)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils.forEach(this.handlers,function(o){o!==null&&t(o)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(r,t){return toFormData(r,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(n,o,a,l){return platform$1.isNode&&utils.isBuffer(n)?(this.append(o,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(r){return utils.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(r){const t={},n=Object.keys(r);let o;const a=n.length;let l;for(o=0;o<a;o++)l=n[o],t[l]=r[l];return t}function formDataToJSON(r){function t(n,o,a,l){let d=n[l++];const g=Number.isFinite(+d),y=l>=n.length;return d=!d&&utils.isArray(a)?a.length:d,y?(utils.hasOwnProp(a,d)?a[d]=[a[d],o]:a[d]=o,!g):((!a[d]||!utils.isObject(a[d]))&&(a[d]=[]),t(n,o,a[d],l)&&utils.isArray(a[d])&&(a[d]=arrayToObject(a[d])),!g)}if(utils.isFormData(r)&&utils.isFunction(r.entries)){const n={};return utils.forEachEntry(r,(o,a)=>{t(parsePropPath(o),a,n,0)}),n}return null}function stringifySafely(r,t,n){if(utils.isString(r))try{return(t||JSON.parse)(r),utils.trim(r)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(r)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(t,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,l=utils.isObject(t);if(l&&utils.isHTMLForm(t)&&(t=new FormData(t)),utils.isFormData(t))return a&&a?JSON.stringify(formDataToJSON(t)):t;if(utils.isArrayBuffer(t)||utils.isBuffer(t)||utils.isStream(t)||utils.isFile(t)||utils.isBlob(t))return t;if(utils.isArrayBufferView(t))return t.buffer;if(utils.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((g=utils.isFileList(t))||o.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return toFormData(g?{"files[]":t}:t,y&&new y,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults$1.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&utils.isString(t)&&(o&&!this.responseType||a)){const d=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(g){if(d)throw g.name==="SyntaxError"?AxiosError.from(g,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils.forEach(["delete","get","head","post","put","patch"],r=>{defaults$1.headers[r]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=r=>{const t={};let n,o,a;return r&&r.split(`
`).forEach(function(d){a=d.indexOf(":"),n=d.substring(0,a).trim().toLowerCase(),o=d.substring(a+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},$internals=Symbol("internals");function normalizeHeader(r){return r&&String(r).trim().toLowerCase()}function normalizeValue(r){return r===!1||r==null?r:utils.isArray(r)?r.map(normalizeValue):String(r)}function parseTokens(r){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(r);)t[o[1]]=o[2];return t}const isValidHeaderName=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function matchHeaderValue(r,t,n,o,a){if(utils.isFunction(o))return o.call(this,t,n);if(a&&(t=n),!!utils.isString(t)){if(utils.isString(o))return t.indexOf(o)!==-1;if(utils.isRegExp(o))return o.test(t)}}function formatHeader(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function buildAccessors(r,t){const n=utils.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(r,o+n,{value:function(a,l,d){return this[o].call(this,t,a,l,d)},configurable:!0})})}class AxiosHeaders{constructor(t){t&&this.set(t)}set(t,n,o){const a=this;function l(g,y,S){const x=normalizeHeader(y);if(!x)throw new Error("header name must be a non-empty string");const w=utils.findKey(a,x);(!w||a[w]===void 0||S===!0||S===void 0&&a[w]!==!1)&&(a[w||y]=normalizeValue(g))}const d=(g,y)=>utils.forEach(g,(S,x)=>l(S,x,y));return utils.isPlainObject(t)||t instanceof this.constructor?d(t,n):utils.isString(t)&&(t=t.trim())&&!isValidHeaderName(t)?d(parseHeaders(t),n):t!=null&&l(n,t,o),this}get(t,n){if(t=normalizeHeader(t),t){const o=utils.findKey(this,t);if(o){const a=this[o];if(!n)return a;if(n===!0)return parseTokens(a);if(utils.isFunction(n))return n.call(this,a,o);if(utils.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const o=utils.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||matchHeaderValue(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let a=!1;function l(d){if(d=normalizeHeader(d),d){const g=utils.findKey(o,d);g&&(!n||matchHeaderValue(o,o[g],g,n))&&(delete o[g],a=!0)}}return utils.isArray(t)?t.forEach(l):l(t),a}clear(t){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const l=n[o];(!t||matchHeaderValue(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const n=this,o={};return utils.forEach(this,(a,l)=>{const d=utils.findKey(o,l);if(d){n[d]=normalizeValue(a),delete n[l];return}const g=t?formatHeader(l):String(l).trim();g!==l&&delete n[l],n[g]=normalizeValue(a),o[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=t&&utils.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(a=>o.set(a)),o}static accessor(t){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,a=this.prototype;function l(d){const g=normalizeHeader(d);o[g]||(buildAccessors(a,d),o[g]=!0)}return utils.isArray(t)?t.forEach(l):l(t),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.reduceDescriptors(AxiosHeaders.prototype,({value:r},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(o){this[n]=o}}});utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(r,t){const n=this||defaults$2,o=t||n,a=AxiosHeaders$1.from(o.headers);let l=o.data;return utils.forEach(r,function(g){l=g.call(n,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function isCancel(r){return!!(r&&r.__CANCEL__)}function CanceledError(r,t,n){AxiosError.call(this,r??"canceled",AxiosError.ERR_CANCELED,t,n),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(r,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?r(n):t(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cookies=platform$1.isStandardBrowserEnv?function(){return{write:function(n,o,a,l,d,g){const y=[];y.push(n+"="+encodeURIComponent(o)),utils.isNumber(a)&&y.push("expires="+new Date(a).toGMTString()),utils.isString(l)&&y.push("path="+l),utils.isString(d)&&y.push("domain="+d),g===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(n){const o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function combineURLs(r,t){return t?r.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):r}function buildFullPath(r,t){return r&&!isAbsoluteURL(t)?combineURLs(r,t):t}const isURLSameOrigin=platform$1.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let o;function a(l){let d=l;return t&&(n.setAttribute("href",d),d=n.href),n.setAttribute("href",d),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=a(window.location.href),function(d){const g=utils.isString(d)?a(d):d;return g.protocol===o.protocol&&g.host===o.host}}():function(){return function(){return!0}}();function parseProtocol(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function speedometer(r,t){r=r||10;const n=new Array(r),o=new Array(r);let a=0,l=0,d;return t=t!==void 0?t:1e3,function(y){const S=Date.now(),x=o[l];d||(d=S),n[a]=y,o[a]=S;let w=l,c=0;for(;w!==a;)c+=n[w++],w=w%r;if(a=(a+1)%r,a===l&&(l=(l+1)%r),S-d<t)return;const A=x&&S-x;return A?Math.round(c*1e3/A):void 0}}function progressEventReducer(r,t){let n=0;const o=speedometer(50,250);return a=>{const l=a.loaded,d=a.lengthComputable?a.total:void 0,g=l-n,y=o(g),S=l<=d;n=l;const x={loaded:l,total:d,progress:d?l/d:void 0,bytes:g,rate:y||void 0,estimated:y&&d&&S?(d-l)/y:void 0,event:a};x[t?"download":"upload"]=!0,r(x)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(r){return new Promise(function(n,o){let a=r.data;const l=AxiosHeaders$1.from(r.headers).normalize(),d=r.responseType;let g;function y(){r.cancelToken&&r.cancelToken.unsubscribe(g),r.signal&&r.signal.removeEventListener("abort",g)}let S;utils.isFormData(a)&&(platform$1.isStandardBrowserEnv||platform$1.isStandardBrowserWebWorkerEnv?l.setContentType(!1):l.getContentType(/^\s*multipart\/form-data/)?utils.isString(S=l.getContentType())&&l.setContentType(S.replace(/^\s*(multipart\/form-data);+/,"$1")):l.setContentType("multipart/form-data"));let x=new XMLHttpRequest;if(r.auth){const R=r.auth.username||"",L=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";l.set("Authorization","Basic "+btoa(R+":"+L))}const w=buildFullPath(r.baseURL,r.url);x.open(r.method.toUpperCase(),buildURL(w,r.params,r.paramsSerializer),!0),x.timeout=r.timeout;function c(){if(!x)return;const R=AxiosHeaders$1.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),$={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:R,config:r,request:x};settle(function(z){n(z),y()},function(z){o(z),y()},$),x=null}if("onloadend"in x?x.onloadend=c:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(c)},x.onabort=function(){x&&(o(new AxiosError("Request aborted",AxiosError.ECONNABORTED,r,x)),x=null)},x.onerror=function(){o(new AxiosError("Network Error",AxiosError.ERR_NETWORK,r,x)),x=null},x.ontimeout=function(){let L=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const $=r.transitional||transitionalDefaults;r.timeoutErrorMessage&&(L=r.timeoutErrorMessage),o(new AxiosError(L,$.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,r,x)),x=null},platform$1.isStandardBrowserEnv){const R=(r.withCredentials||isURLSameOrigin(w))&&r.xsrfCookieName&&cookies.read(r.xsrfCookieName);R&&l.set(r.xsrfHeaderName,R)}a===void 0&&l.setContentType(null),"setRequestHeader"in x&&utils.forEach(l.toJSON(),function(L,$){x.setRequestHeader($,L)}),utils.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),d&&d!=="json"&&(x.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&x.addEventListener("progress",progressEventReducer(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",progressEventReducer(r.onUploadProgress)),(r.cancelToken||r.signal)&&(g=R=>{x&&(o(!R||R.type?new CanceledError(null,r,x):R),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(g),r.signal&&(r.signal.aborted?g():r.signal.addEventListener("abort",g)));const A=parseProtocol(w);if(A&&platform$1.protocols.indexOf(A)===-1){o(new AxiosError("Unsupported protocol "+A+":",AxiosError.ERR_BAD_REQUEST,r));return}x.send(a||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const renderReason=r=>`- ${r}`,isResolvedHandle=r=>utils.isFunction(r)||r===null||r===!1,adapters={getAdapter:r=>{r=utils.isArray(r)?r:[r];const{length:t}=r;let n,o;const a={};for(let l=0;l<t;l++){n=r[l];let d;if(o=n,!isResolvedHandle(n)&&(o=knownAdapters[(d=String(n)).toLowerCase()],o===void 0))throw new AxiosError(`Unknown adapter '${d}'`);if(o)break;a[d||"#"+l]=o}if(!o){const l=Object.entries(a).map(([g,y])=>`adapter ${g} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?l.length>1?`since :
`+l.map(renderReason).join(`
`):" "+renderReason(l[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:knownAdapters};function throwIfCancellationRequested(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new CanceledError(null,r)}function dispatchRequest(r){return throwIfCancellationRequested(r),r.headers=AxiosHeaders$1.from(r.headers),r.data=transformData.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(r.adapter||defaults$2.adapter)(r).then(function(o){return throwIfCancellationRequested(r),o.data=transformData.call(r,r.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel(o)||(throwIfCancellationRequested(r),o&&o.response&&(o.response.data=transformData.call(r,r.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const headersToObject=r=>r instanceof AxiosHeaders$1?r.toJSON():r;function mergeConfig(r,t){t=t||{};const n={};function o(S,x,w){return utils.isPlainObject(S)&&utils.isPlainObject(x)?utils.merge.call({caseless:w},S,x):utils.isPlainObject(x)?utils.merge({},x):utils.isArray(x)?x.slice():x}function a(S,x,w){if(utils.isUndefined(x)){if(!utils.isUndefined(S))return o(void 0,S,w)}else return o(S,x,w)}function l(S,x){if(!utils.isUndefined(x))return o(void 0,x)}function d(S,x){if(utils.isUndefined(x)){if(!utils.isUndefined(S))return o(void 0,S)}else return o(void 0,x)}function g(S,x,w){if(w in t)return o(S,x);if(w in r)return o(void 0,S)}const y={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:g,headers:(S,x)=>a(headersToObject(S),headersToObject(x),!0)};return utils.forEach(Object.keys(Object.assign({},r,t)),function(x){const w=y[x]||a,c=w(r[x],t[x],x);utils.isUndefined(c)&&w!==g||(n[x]=c)}),n}const VERSION="1.5.1",validators$1={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{validators$1[r]=function(o){return typeof o===r||"a"+(t<1?"n ":" ")+r}});const deprecatedWarnings={};validators$1.transitional=function(t,n,o){function a(l,d){return"[Axios v"+VERSION+"] Transitional option '"+l+"'"+d+(o?". "+o:"")}return(l,d,g)=>{if(t===!1)throw new AxiosError(a(d," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[d]&&(deprecatedWarnings[d]=!0,console.warn(a(d," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,d,g):!0}};function assertOptions(r,t,n){if(typeof r!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const o=Object.keys(r);let a=o.length;for(;a-- >0;){const l=o[a],d=t[l];if(d){const g=r[l],y=g===void 0||d(g,l,r);if(y!==!0)throw new AxiosError("option "+l+" must be "+y,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+l,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:l}=n;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),a!=null&&(utils.isFunction(a)?n.paramsSerializer={serialize:a}:validator.assertOptions(a,{encode:validators.function,serialize:validators.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=l&&utils.merge(l.common,l[n.method]);l&&utils.forEach(["delete","get","head","post","put","patch","common"],R=>{delete l[R]}),n.headers=AxiosHeaders$1.concat(d,l);const g=[];let y=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(n)===!1||(y=y&&L.synchronous,g.unshift(L.fulfilled,L.rejected))});const S=[];this.interceptors.response.forEach(function(L){S.push(L.fulfilled,L.rejected)});let x,w=0,c;if(!y){const R=[dispatchRequest.bind(this),void 0];for(R.unshift.apply(R,g),R.push.apply(R,S),c=R.length,x=Promise.resolve(n);w<c;)x=x.then(R[w++],R[w++]);return x}c=g.length;let A=n;for(w=0;w<c;){const R=g[w++],L=g[w++];try{A=R(A)}catch($){L.call(this,$);break}}try{x=dispatchRequest.call(this,A)}catch(R){return Promise.reject(R)}for(w=0,c=S.length;w<c;)x=x.then(S[w++],S[w++]);return x}getUri(t){t=mergeConfig(this.defaults,t);const n=buildFullPath(t.baseURL,t.url);return buildURL(n,t.params,t.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(n,o){return this.request(mergeConfig(o||{},{method:t,url:n,data:(o||{}).data}))}});utils.forEach(["post","put","patch"],function(t){function n(o){return function(l,d,g){return this.request(mergeConfig(g||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}Axios.prototype[t]=n(),Axios.prototype[t+"Form"]=n(!0)});const Axios$1=Axios;class CancelToken{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const o=this;this.promise.then(a=>{if(!o._listeners)return;let l=o._listeners.length;for(;l-- >0;)o._listeners[l](a);o._listeners=null}),this.promise.then=a=>{let l;const d=new Promise(g=>{o.subscribe(g),l=g}).then(a);return d.cancel=function(){o.unsubscribe(l)},d},t(function(l,d,g){o.reason||(o.reason=new CanceledError(l,d,g),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new CancelToken(function(a){t=a}),cancel:t}}}const CancelToken$1=CancelToken;function spread(r){return function(n){return r.apply(null,n)}}function isAxiosError(r){return utils.isObject(r)&&r.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([r,t])=>{HttpStatusCode[t]=r});const HttpStatusCode$1=HttpStatusCode;function createInstance(r){const t=new Axios$1(r),n=bind$2(Axios$1.prototype.request,t);return utils.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return createInstance(mergeConfig(r,a))},n}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=r=>formDataToJSON(utils.isHTMLForm(r)?new FormData(r):r);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,request=axios$1.create({baseURL:"http://127.0.0.1:3002",headers:{fapp:"book"},timeout:5e3});request.interceptors.request.use(r=>{let t=sessionStorage.getItem("user");return t=JSON.parse(t),t&&(r.headers.token=t.userInfo.token),r});const getNewArticle=()=>request({url:"/getNewArticle"}),getHotArticle=()=>request({url:"/getHotArticle"}),getArticle=r=>request({url:`/getArticle/${r}`}),getArticleByType=r=>request({url:"/getArticleBytype",params:r}),getarticleTalk=r=>request({url:`/getarticleTalk/${r}`}),viewArticle=r=>request({url:`/viewArticle/${r}`}),articleLike=(r,t)=>request({url:`/articleLike/${r}/${t}`}),userinfoStore=defineStore("user",()=>{const r=ref({}),t=n=>{r.value=n};return computed(n=>n.value),{userInfo:r,getUserInfo:t}},{persist:{storage:sessionStorage}}),getTime$1=defineStore("themel",()=>{const r=["星期七","星期一","星期二","星期三","星期四","星期五","星期六"];let t=new Date,n=t.getHours(),o=t.getDate(),a=t.getDay(),l=t.getFullYear(),d=r[a],g=t.getMinutes(),y=n+":"+g;return{Time:t,Hour:n,date:o,workday:d,time:y,year:l}}),index_vue_vue_type_style_index_0_scoped_41797a76_lang="",_withScopeId$8=r=>(pushScopeId("data-v-41797a76"),r=r(),popScopeId(),r),_hoisted_1$j={style:{"background-color":"#f8f8f9"}},_hoisted_2$g=_withScopeId$8(()=>createBaseVNode("div",{class:"demo-carousel"},[createBaseVNode("img",{src:"http://localhost:3002/public/images/5.jpg",alt:""}),createBaseVNode("div",{class:"div"},toDisplayString("qwqeqwe"))],-1)),_hoisted_3$a=_withScopeId$8(()=>createBaseVNode("div",{class:"demo-carousel"},[createBaseVNode("img",{src:"http://localhost:3002/public/images/7.jpg",alt:""}),createBaseVNode("div",{class:"div"},toDisplayString("get"))],-1)),_hoisted_4$9={class:"article-list"},listTitle$1="最新文章",hotListTitle="最热文章",hover="hover",_sfc_main$n={__name:"index",setup(r){const t=ref(0),{proxy:n}=getCurrentInstance();let o=getTime$1();const a=ref([]),l=ref([]);getHotArticle().then(S=>{let x=S.data.data,w=[];x.map(c=>{c.id!==0&&w.push(c)}),l.value=w}),getNewArticle().then(S=>{let x=S.data.data,w=[];x.map(c=>{c.id!==0&&w.push(c)}),a.value=w}),onMounted(()=>{});const d=userinfoStore();let g=ref("hhhh");g.value=d.userInfo.username;function y(){window.name==""&&g.value&&n.$Notice.success({title:o.Hour>=12?o.Hour>=19?"晚上好~":"下午好~":"早上好~"+g.value,desc:`今天是${o.year}-${o.date},${o.workday}
        现在的时间是${o.time} ！`,duration:3})}return y(),(S,x)=>{const w=resolveComponent("CarouselItem"),c=resolveComponent("Carousel"),A=resolveComponent("Col"),R=resolveComponent("Row");return openBlock(),createElementBlock("div",_hoisted_1$j,[createVNode$1(c,{modelValue:t.value,"onUpdate:modelValue":x[0]||(x[0]=L=>t.value=L),loop:!0,autoplay:!0,arrow:hover,"autoplay-speed":5e3},{default:withCtx(()=>[createVNode$1(w,{key:"2"},{default:withCtx(()=>[_hoisted_2$g]),_:1}),createVNode$1(w,{key:"1"},{default:withCtx(()=>[_hoisted_3$a]),_:1})]),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4$9,[createVNode$1(R,{type:"flex",justify:"space-around",class:"code-row-bg"},{default:withCtx(()=>[createVNode$1(A,{span:"11"},{default:withCtx(()=>[createVNode$1(_sfc_main$o,{list:a.value,title:listTitle$1},null,8,["list"])]),_:1}),createVNode$1(A,{span:"11"},{default:withCtx(()=>[createVNode$1(_sfc_main$o,{list:l.value,title:hotListTitle},null,8,["list"])]),_:1})]),_:1})])])}}},index=_export_sfc(_sfc_main$n,[["__scopeId","data-v-41797a76"]]),_sfc_main$m={__name:"err",props:{types:{type:String,default:"404"},desc:{type:String,default:""}},setup(r){const t=r;return(n,o)=>{const a=resolveComponent("Exception");return openBlock(),createBlock(a,{type:t.types,desc:t.desc,"img-color":!0,redirect:"/"},null,8,["type","desc"])}}},login$1=r=>request({url:"/login",method:"post",data:r}),regist$1=r=>request({url:"/regist",method:"post",data:r}),getMail=r=>request({method:"get",url:"/users/getMails",params:{username:r}}),sendMail=(r,t)=>request({url:`users/mail/${r}`,method:"post",data:t}),articleCollection=(r,t)=>request({url:`/users/save/${r}`,method:"post",data:{username:t.username,title:t.title}}),articleTalk=r=>request({url:"/users/articleTalk",method:"post",data:{a_id:r.a_id,talk:r.talk,username:r.username}}),collectionList=r=>request({url:"/users/saveList",method:"post",data:{username:r}}),TalkEdit_vue_vue_type_style_index_0_scoped_8cd1fcbd_lang="",_hoisted_1$i={class:"input-area"},_hoisted_2$f={class:"button-area"},_sfc_main$l={__name:"TalkEdit",props:{a_id:Number},emits:["refresh"],setup(r,{emit:t}){const n=r,{proxy:o}=getCurrentInstance(),a=ref(""),l=userinfoStore(),d=()=>{let y={a_id:n.a_id,talk:a.value,username:l.userInfo.username};articleTalk(y).then(S=>{console.log(S),S.data.code===0?(a.value="",o.$Message.success("评论成功")):S.data.code===403?o.$Notice.warning({title:"提示",desc:"登录后才能评论"}):(a.value="",o.$Message.error("失败")),t("refresh")})},g=y=>{const S=y.target;S.style.height="inherit",S.style.height=`${S.scrollHeight}px`,S.style.resize="none"};return(y,S)=>{const x=resolveComponent("Button");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$i,[withDirectives(createBaseVNode("textarea",{name:"text",class:"textarea",cols:"30",rows:"10","onUpdate:modelValue":S[0]||(S[0]=w=>a.value=w),maxlength:"100",style:{resize:"none"},onInput:S[1]||(S[1]=w=>g(w))},null,544),[[vModelText,a.value]]),createBaseVNode("div",_hoisted_2$f,[createVNode$1(x,{id:"send-btn",onClick:d},{default:withCtx(()=>[createTextVNode("发送")]),_:1})])])])}}},TalkEdit=_export_sfc(_sfc_main$l,[["__scopeId","data-v-8cd1fcbd"]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var a=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return r[o]}})}),n}var prism={exports:{}};(function(r){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(o){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,l=0,d={},g={manual:o.Prism&&o.Prism.manual,disableWorkerMessageHandler:o.Prism&&o.Prism.disableWorkerMessageHandler,util:{encode:function z(V){return V instanceof y?new y(V.type,z(V.content),V.alias):Array.isArray(V)?V.map(z):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(z){return Object.prototype.toString.call(z).slice(8,-1)},objId:function(z){return z.__id||Object.defineProperty(z,"__id",{value:++l}),z.__id},clone:function z(V,j){j=j||{};var K,Z;switch(g.util.type(V)){case"Object":if(Z=g.util.objId(V),j[Z])return j[Z];K={},j[Z]=K;for(var q in V)V.hasOwnProperty(q)&&(K[q]=z(V[q],j));return K;case"Array":return Z=g.util.objId(V),j[Z]?j[Z]:(K=[],j[Z]=K,V.forEach(function(ie,te){K[te]=z(ie,j)}),K);default:return V}},getLanguage:function(z){for(;z;){var V=a.exec(z.className);if(V)return V[1].toLowerCase();z=z.parentElement}return"none"},setLanguage:function(z,V){z.className=z.className.replace(RegExp(a,"gi"),""),z.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(K){var z=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(K.stack)||[])[1];if(z){var V=document.getElementsByTagName("script");for(var j in V)if(V[j].src==z)return V[j]}return null}},isActive:function(z,V,j){for(var K="no-"+V;z;){var Z=z.classList;if(Z.contains(V))return!0;if(Z.contains(K))return!1;z=z.parentElement}return!!j}},languages:{plain:d,plaintext:d,text:d,txt:d,extend:function(z,V){var j=g.util.clone(g.languages[z]);for(var K in V)j[K]=V[K];return j},insertBefore:function(z,V,j,K){K=K||g.languages;var Z=K[z],q={};for(var ie in Z)if(Z.hasOwnProperty(ie)){if(ie==V)for(var te in j)j.hasOwnProperty(te)&&(q[te]=j[te]);j.hasOwnProperty(ie)||(q[ie]=Z[ie])}var oe=K[z];return K[z]=q,g.languages.DFS(g.languages,function(re,he){he===oe&&re!=z&&(this[re]=q)}),q},DFS:function z(V,j,K,Z){Z=Z||{};var q=g.util.objId;for(var ie in V)if(V.hasOwnProperty(ie)){j.call(V,ie,V[ie],K||ie);var te=V[ie],oe=g.util.type(te);oe==="Object"&&!Z[q(te)]?(Z[q(te)]=!0,z(te,j,null,Z)):oe==="Array"&&!Z[q(te)]&&(Z[q(te)]=!0,z(te,j,ie,Z))}}},plugins:{},highlightAll:function(z,V){g.highlightAllUnder(document,z,V)},highlightAllUnder:function(z,V,j){var K={callback:j,container:z,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};g.hooks.run("before-highlightall",K),K.elements=Array.prototype.slice.apply(K.container.querySelectorAll(K.selector)),g.hooks.run("before-all-elements-highlight",K);for(var Z=0,q;q=K.elements[Z++];)g.highlightElement(q,V===!0,K.callback)},highlightElement:function(z,V,j){var K=g.util.getLanguage(z),Z=g.languages[K];g.util.setLanguage(z,K);var q=z.parentElement;q&&q.nodeName.toLowerCase()==="pre"&&g.util.setLanguage(q,K);var ie=z.textContent,te={element:z,language:K,grammar:Z,code:ie};function oe(he){te.highlightedCode=he,g.hooks.run("before-insert",te),te.element.innerHTML=te.highlightedCode,g.hooks.run("after-highlight",te),g.hooks.run("complete",te),j&&j.call(te.element)}if(g.hooks.run("before-sanity-check",te),q=te.element.parentElement,q&&q.nodeName.toLowerCase()==="pre"&&!q.hasAttribute("tabindex")&&q.setAttribute("tabindex","0"),!te.code){g.hooks.run("complete",te),j&&j.call(te.element);return}if(g.hooks.run("before-highlight",te),!te.grammar){oe(g.util.encode(te.code));return}if(V&&o.Worker){var re=new Worker(g.filename);re.onmessage=function(he){oe(he.data)},re.postMessage(JSON.stringify({language:te.language,code:te.code,immediateClose:!0}))}else oe(g.highlight(te.code,te.grammar,te.language))},highlight:function(z,V,j){var K={code:z,grammar:V,language:j};if(g.hooks.run("before-tokenize",K),!K.grammar)throw new Error('The language "'+K.language+'" has no grammar.');return K.tokens=g.tokenize(K.code,K.grammar),g.hooks.run("after-tokenize",K),y.stringify(g.util.encode(K.tokens),K.language)},tokenize:function(z,V){var j=V.rest;if(j){for(var K in j)V[K]=j[K];delete V.rest}var Z=new w;return c(Z,Z.head,z),x(z,Z,V,Z.head,0),R(Z)},hooks:{all:{},add:function(z,V){var j=g.hooks.all;j[z]=j[z]||[],j[z].push(V)},run:function(z,V){var j=g.hooks.all[z];if(!(!j||!j.length))for(var K=0,Z;Z=j[K++];)Z(V)}},Token:y};o.Prism=g;function y(z,V,j,K){this.type=z,this.content=V,this.alias=j,this.length=(K||"").length|0}y.stringify=function z(V,j){if(typeof V=="string")return V;if(Array.isArray(V)){var K="";return V.forEach(function(oe){K+=z(oe,j)}),K}var Z={type:V.type,content:z(V.content,j),tag:"span",classes:["token",V.type],attributes:{},language:j},q=V.alias;q&&(Array.isArray(q)?Array.prototype.push.apply(Z.classes,q):Z.classes.push(q)),g.hooks.run("wrap",Z);var ie="";for(var te in Z.attributes)ie+=" "+te+'="'+(Z.attributes[te]||"").replace(/"/g,"&quot;")+'"';return"<"+Z.tag+' class="'+Z.classes.join(" ")+'"'+ie+">"+Z.content+"</"+Z.tag+">"};function S(z,V,j,K){z.lastIndex=V;var Z=z.exec(j);if(Z&&K&&Z[1]){var q=Z[1].length;Z.index+=q,Z[0]=Z[0].slice(q)}return Z}function x(z,V,j,K,Z,q){for(var ie in j)if(!(!j.hasOwnProperty(ie)||!j[ie])){var te=j[ie];te=Array.isArray(te)?te:[te];for(var oe=0;oe<te.length;++oe){if(q&&q.cause==ie+","+oe)return;var re=te[oe],he=re.inside,_e=!!re.lookbehind,me=!!re.greedy,be=re.alias;if(me&&!re.pattern.global){var Q=re.pattern.toString().match(/[imsuy]*$/)[0];re.pattern=RegExp(re.pattern.source,Q+"g")}for(var Ne=re.pattern||re,Ee=K.next,Ge=Z;Ee!==V.tail&&!(q&&Ge>=q.reach);Ge+=Ee.value.length,Ee=Ee.next){var it=Ee.value;if(V.length>z.length)return;if(!(it instanceof y)){var Te=1,Ke;if(me){if(Ke=S(Ne,Ge,z,_e),!Ke||Ke.index>=z.length)break;var Xe=Ke.index,Tt=Ke.index+Ke[0].length,Lt=Ge;for(Lt+=Ee.value.length;Xe>=Lt;)Ee=Ee.next,Lt+=Ee.value.length;if(Lt-=Ee.value.length,Ge=Lt,Ee.value instanceof y)continue;for(var Qt=Ee;Qt!==V.tail&&(Lt<Tt||typeof Qt.value=="string");Qt=Qt.next)Te++,Lt+=Qt.value.length;Te--,it=z.slice(Ge,Lt),Ke.index-=Ge}else if(Ke=S(Ne,0,it,_e),!Ke)continue;var Xe=Ke.index,Be=Ke[0],ue=it.slice(0,Xe),Dt=it.slice(Xe+Be.length),Rt=Ge+it.length;q&&Rt>q.reach&&(q.reach=Rt);var Bt=Ee.prev;ue&&(Bt=c(V,Bt,ue),Ge+=ue.length),A(V,Bt,Te);var Se=new y(ie,he?g.tokenize(Be,he):Be,be,Be);if(Ee=c(V,Bt,Se),Dt&&c(V,Ee,Dt),Te>1){var Ye={cause:ie+","+oe,reach:Rt};x(z,V,j,Ee.prev,Ge,Ye),q&&Ye.reach>q.reach&&(q.reach=Ye.reach)}}}}}}function w(){var z={value:null,prev:null,next:null},V={value:null,prev:z,next:null};z.next=V,this.head=z,this.tail=V,this.length=0}function c(z,V,j){var K=V.next,Z={value:j,prev:V,next:K};return V.next=Z,K.prev=Z,z.length++,Z}function A(z,V,j){for(var K=V.next,Z=0;Z<j&&K!==z.tail;Z++)K=K.next;V.next=K,K.prev=V,z.length-=Z}function R(z){for(var V=[],j=z.head.next;j!==z.tail;)V.push(j.value),j=j.next;return V}if(!o.document)return o.addEventListener&&(g.disableWorkerMessageHandler||o.addEventListener("message",function(z){var V=JSON.parse(z.data),j=V.language,K=V.code,Z=V.immediateClose;o.postMessage(g.highlight(K,g.languages[j],j)),Z&&o.close()},!1)),g;var L=g.util.currentScript();L&&(g.filename=L.src,L.hasAttribute("data-manual")&&(g.manual=!0));function $(){g.manual||g.highlightAll()}if(!g.manual){var O=document.readyState;O==="loading"||O==="interactive"&&L&&L.defer?document.addEventListener("DOMContentLoaded",$):window.requestAnimationFrame?window.requestAnimationFrame($):window.setTimeout($,16)}return g}(t);r.exports&&(r.exports=n),typeof commonjsGlobal<"u"&&(commonjsGlobal.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(o){o.type==="entity"&&(o.attributes.title=o.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,l){var d={};d["language-"+l]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[l]},d.cdata=/^<!\[CDATA\[|\]\]>$/i;var g={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:d}};g["language-"+l]={pattern:/[\s\S]+/,inside:n.languages[l]};var y={};y[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:g},n.languages.insertBefore("markup","cdata",y)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(o,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+o+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(o){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;o.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},o.languages.css.atrule.inside.rest=o.languages.css;var l=o.languages.markup;l&&(l.tag.addInlined("style","css"),l.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var o="Loading…",a=function(L,$){return"✖ Error "+L+" while fetching file: "+$},l="✖ Error: File does not exist or is empty",d={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},g="data-src-status",y="loading",S="loaded",x="failed",w="pre[data-src]:not(["+g+'="'+S+'"]):not(['+g+'="'+y+'"])';function c(L,$,O){var z=new XMLHttpRequest;z.open("GET",L,!0),z.onreadystatechange=function(){z.readyState==4&&(z.status<400&&z.responseText?$(z.responseText):z.status>=400?O(a(z.status,z.statusText)):O(l))},z.send(null)}function A(L){var $=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(L||"");if($){var O=Number($[1]),z=$[2],V=$[3];return z?V?[O,Number(V)]:[O,void 0]:[O,O]}}n.hooks.add("before-highlightall",function(L){L.selector+=", "+w}),n.hooks.add("before-sanity-check",function(L){var $=L.element;if($.matches(w)){L.code="",$.setAttribute(g,y);var O=$.appendChild(document.createElement("CODE"));O.textContent=o;var z=$.getAttribute("data-src"),V=L.language;if(V==="none"){var j=(/\.(\w+)$/.exec(z)||[,"none"])[1];V=d[j]||j}n.util.setLanguage(O,V),n.util.setLanguage($,V);var K=n.plugins.autoloader;K&&K.loadLanguages(V),c(z,function(Z){$.setAttribute(g,S);var q=A($.getAttribute("data-range"));if(q){var ie=Z.split(/\r\n?|\n/g),te=q[0],oe=q[1]==null?ie.length:q[1];te<0&&(te+=ie.length),te=Math.max(0,Math.min(te-1,ie.length)),oe<0&&(oe+=ie.length),oe=Math.max(0,Math.min(oe,ie.length)),Z=ie.slice(te,oe).join(`
`),$.hasAttribute("data-start")||$.setAttribute("data-start",String(te+1))}O.textContent=Z,n.highlightElement(O)},function(Z){$.setAttribute(g,x),O.textContent=Z})}}),n.plugins.fileHighlight={highlight:function($){for(var O=($||document).querySelectorAll(w),z=0,V;V=O[z++];)n.highlightElement(V)}};var R=!1;n.fileHighlight=function(){R||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),R=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(prism);var prismExports=prism.exports;const Prism$1=getDefaultExportFromCjs(prismExports),prismeditor_min="";Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp("(^|[^\\w$])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?|\\d+(?:_\\d+)*n|(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?)(?![\\w$])"),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(`((?:^|[^$\\w\\xA0-\\uFFFF."'\\])\\s]|\\b(?:return|yield))\\s*)/(?:(?:\\[(?:[^\\]\\\\\r
]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\r
])+/[dgimyus]{0,7}|(?:\\[(?:[^[\\]\\\\\r
]|\\\\.|\\[(?:[^[\\]\\\\\r
]|\\\\.|\\[(?:[^[\\]\\\\\r
]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\r
])+/[dgimyus]{0,7}v[dgimyus]{0,7})(?=(?:\\s|/\\*(?:[^*]|\\*(?!/))*\\*/)*(?:$|[\r
,.;:})\\]]|//))`),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute("on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)","javascript")),Prism.languages.js=Prism.languages.javascript;const prismTomorrow_min="",_hoisted_1$h={class:"article-p"},_hoisted_2$e={class:"article-p"},_hoisted_3$9={class:"article-p"},_hoisted_4$8=["innerHTML"],_sfc_main$k={__name:"articleShow",props:{article:{default:""}},setup(r){const t=r,{proxy:n}=getCurrentInstance();return onUpdated(()=>{Prism$1.highlightAll()}),(o,a)=>{const l=resolveComponent("router-link");return openBlock(),createElementBlock("div",null,[createBaseVNode("h2",null,toDisplayString(t.article.title),1),createBaseVNode("p",_hoisted_1$h,[createTextVNode("文章类型： "),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.article.type,d=>(openBlock(),createElementBlock("span",{key:d,style:{"margin-right":"7px"}},[createVNode$1(l,{to:{path:"/getArticleBytype"},style:{color:"#000"}},{default:withCtx(()=>[createTextVNode(toDisplayString(d),1)]),_:2},1024)]))),128))]),createBaseVNode("p",_hoisted_2$e,"发布于："+toDisplayString(unref(n).$Date(t.article.time).format("YYYY-MM-DD")),1),createBaseVNode("p",_hoisted_3$9,"作者: "+toDisplayString(r.article.writer)+" 浏览量："+toDisplayString(t.article.view)+" 收藏："+toDisplayString(t.article.collection),1),createBaseVNode("div",{innerHTML:t.article.text,class:"my-editor"},null,8,_hoisted_4$8)])}}},Article_vue_vue_type_style_index_0_scoped_26087df6_lang="",Article_vue_vue_type_style_index_1_lang="",_withScopeId$7=r=>(pushScopeId("data-v-26087df6"),r=r(),popScopeId(),r),_hoisted_1$g={key:1,class:"article"},_hoisted_2$d={class:"type"},_hoisted_3$8=_withScopeId$7(()=>createBaseVNode("br",null,null,-1)),_hoisted_4$7={style:{"text-align":"left"}},_hoisted_5$5={style:{float:"left"}},_hoisted_6$5={style:{float:"left"}},_hoisted_7$5={style:{float:"left"}},left="left",_sfc_main$j={__name:"Article",setup(r){const n=useRoute().params.id,o=userinfoStore(),{proxy:a}=getCurrentInstance(),l=ref({}),d=ref([]);let g=ref(!0),y=ref(!1),S={color:"red"},x={type:"",desc:""},w=!1,c=!1;const A=()=>{getArticle(n).then(j=>{j.data.code===403?(g.value=!1,x.type=j.data.type,x.desc=j.data.message):j.data.code===0&&(l.value=j.data.data,R(),viewArticle(n),z())})},R=()=>{getarticleTalk(n).then(j=>{let K=j.data.data;try{d.value=JSON.parse(K)}catch{d.value=[]}})};function L(){let j={username:o.userInfo.username,title:l.value.title,a_id:n};articleCollection(n,j).then(K=>{K.data.code===403?a.$Message.error("请先登录"):(y.value=y.value===!1,z())})}const $=()=>{w=w===!1,w&&(c=!1),V(n,1)},O=()=>{c=c===!1,c&&(w=!1),V(n,0)},z=()=>{collectionList(o.userInfo.username).then(j=>{if(j.data.code===403)a.$Message.warning("请先登录");else{let K=j.data.data;try{K=JSON.parse(K)}catch{K=[]}K.forEach(Z=>{Z.a_id===n&&(y.value=!0)})}})};function V(j,K){articleLike(j,K).then(Z=>{console.log(Z),A()})}return onMounted(()=>{A()}),onUpdated(()=>{Prism$1.highlightAll()}),(j,K)=>{const Z=resolveComponent("Icon"),q=resolveComponent("BreadcrumbItem"),ie=resolveComponent("Breadcrumb"),te=resolveComponent("router-link"),oe=resolveComponent("Tag"),re=resolveComponent("icon"),he=resolveComponent("Divider"),_e=resolveComponent("ListItemMeta"),me=resolveComponent("List-Item"),be=resolveComponent("List");return openBlock(),createElementBlock(Fragment,null,[unref(g)===!1?(openBlock(),createBlock(_sfc_main$m,{key:0,types:unref(x).type,desc:unref(x).desc},null,8,["types","desc"])):createCommentVNode("",!0),unref(g)===!0?(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$d,[createVNode$1(ie,null,{default:withCtx(()=>[createVNode$1(q,{to:"/"},{default:withCtx(()=>[createVNode$1(Z,{type:"ios-home-outline"}),createTextVNode(" 主页 ")]),_:1}),createVNode$1(q,{to:"/articles"},{default:withCtx(()=>[createVNode$1(Z,{type:"md-list-box"}),createTextVNode(" 全部文章 ")]),_:1}),createVNode$1(q,{to:{path:`/article/${unref(n)}`}},{default:withCtx(()=>[createTextVNode(toDisplayString(l.value.title),1)]),_:1},8,["to"])]),_:1})]),createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value.tag,Q=>(openBlock(),createBlock(oe,{key:Q},{default:withCtx(()=>[createVNode$1(te,{to:{path:"/getArticleBytype",query:{tag:Q}}},{default:withCtx(()=>[createTextVNode(toDisplayString(Q),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),createBaseVNode("div",null,[createVNode$1(_sfc_main$k,{article:l.value},null,8,["article"]),createBaseVNode("div",null,[createBaseVNode("span",null,[createBaseVNode("button",{style:normalizeStyle$1([{"font-size":"17px"},unref(w)===!0?{backgroundColor:"rgb(255, 184, 2)"}:null]),onClick:K[0]||(K[0]=Q=>$())},[createVNode$1(Z,{type:"ios-arrow-up"})],4),createTextVNode(" "+toDisplayString(l.value.like),1)]),createBaseVNode("span",null,[createBaseVNode("button",{onClick:O,style:normalizeStyle$1(unref(c)===!0?{backgroundColor:"rgb(56 168 216)"}:null)},[createVNode$1(re,{type:"ios-arrow-down"})],4),createTextVNode(" "+toDisplayString(l.value.dislike),1)]),createBaseVNode("span",null,[createBaseVNode("button",{type:"text",onClick:L},[createVNode$1(re,{type:"ios-heart",style:normalizeStyle$1(unref(y)?unref(S):null)},null,8,["style"])]),createTextVNode(" "+toDisplayString(l.value.collection),1)])])]),createVNode$1(he,{orientation:left,dashed:!0,size:"small"},{default:withCtx(()=>[createTextVNode("在这儿写下想说的话")]),_:1}),createVNode$1(TalkEdit,{a_id:l.value.a_id,onRefresh:R},null,8,["a_id"]),createVNode$1(he,{orientation:left,dashed:!0},{default:withCtx(()=>[createTextVNode("评论")]),_:1}),createVNode$1(be,{"item-layout":"vertical",border:!0,class:"talk"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,(Q,Ne)=>(openBlock(),createBlock(me,{key:Ne,style:{height:"170px"}},{action:withCtx(()=>[createBaseVNode("li",_hoisted_5$5,[createVNode$1(Z,{type:"ios-star",style:{color:"rgb(255, 184, 2)"},size:"20"})]),createBaseVNode("li",_hoisted_6$5,[createVNode$1(Z,{type:"ios-thumbs-up-outline",size:"20"})]),createBaseVNode("li",_hoisted_7$5,[createVNode$1(te,{to:`/mail/${Q.username}`},{default:withCtx(()=>[createVNode$1(Z,{type:"ios-text-outline",size:"20"})]),_:2},1032,["to"])])]),default:withCtx(()=>[createVNode$1(_e,{title:Q.username,avatar:"https://dev-file.iviewui.com/userinfoPDvn9gKWYihR24SpgC319vXY8qniCqj4/avatar",style:{"text-align":"left"}},{description:withCtx(()=>[createBaseVNode("span",null,[createTextVNode("评论时间："+toDisplayString(Q.date)+" ",1),_hoisted_3$8,createTextVNode("ip：四川")])]),_:2},1032,["title"]),createBaseVNode("div",_hoisted_4$7,toDisplayString(Q.talk),1)]),_:2},1024))),128))]),_:1}),createVNode$1(he,null,{default:withCtx(()=>[createTextVNode("到底了")]),_:1})])):createCommentVNode("",!0)],64)}}},article=_export_sfc(_sfc_main$j,[["__scopeId","data-v-26087df6"]]),Articles_vue_vue_type_style_index_0_lang="",_hoisted_1$f={class:"article-list",style:{height:"600px"}},listTitle="全部文章",_sfc_main$i={__name:"Articles",setup(r){const t=ref([]);return getNewArticle().then(n=>{t.value=n.data.data}),(n,o)=>{const a=resolveComponent("Col"),l=resolveComponent("Row"),d=resolveComponent("Footer");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$f,[createVNode$1(l,{type:"flex",justify:"space-around",class:"code-row-bg"},{default:withCtx(()=>[createVNode$1(a,{span:"24"},{default:withCtx(()=>[createVNode$1(_sfc_main$o,{list:t.value,title:listTitle},null,8,["list"])]),_:1})]),_:1})]),createBaseVNode("div",null,[createVNode$1(d)])])}}},_hoisted_1$e={class:"article-list"},_sfc_main$h={__name:"ArticleType",setup(r){const t=ref([]),n=ref(""),o=useRoute(),a=l=>getArticleByType(l);if("type"in o.query){let l={type:o.query.type};n.value="分类"+o.query.type,a(l).then(d=>{let g=[];d.data.data.map(y=>{y.id!==0&&g.push(y)}),t.value=g})}if("tag"in o.query){let l={type:o.query.type};n.value="标签："+o.query.tag,a(l).then(d=>{let g=[];d.data.data.map(y=>{y.id!==0&&g.push(y)}),t.value=g})}return console.log(t.value),(l,d)=>{const g=resolveComponent("Col"),y=resolveComponent("Row");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$e,[createVNode$1(y,{type:"flex",justify:"space-around",class:"code-row-bg"},{default:withCtx(()=>[createVNode$1(g,{span:"24"},{default:withCtx(()=>[createVNode$1(_sfc_main$o,{list:t.value,title:n.value},null,8,["list","title"])]),_:1})]),_:1})])])}}},scriptRel="modulepreload",assetsURL=function(r){return"/"+r},seen={},__vitePreload=function(t,n,o){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=assetsURL(l),l in seen)return;seen[l]=!0;const d=l.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(!!o)for(let x=a.length-1;x>=0;x--){const w=a[x];if(w.href===l&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const S=document.createElement("link");if(S.rel=d?"stylesheet":scriptRel,d||(S.as="script",S.crossOrigin=""),S.href=l,document.head.appendChild(S),d)return new Promise((x,w)=>{S.addEventListener("load",x),S.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l})},vaild_vue_vue_type_style_index_0_scoped_4412ad17_lang="",_withScopeId$6=r=>(pushScopeId("data-v-4412ad17"),r=r(),popScopeId(),r),_hoisted_1$d={border:0,cellspacing:"5"},_hoisted_2$c=_withScopeId$6(()=>createBaseVNode("td",null,[createBaseVNode("span",null,"看不起换一张")],-1)),_hoisted_3$7=_withScopeId$6(()=>createBaseVNode("td",null,"验证码",-1)),_hoisted_4$6=_withScopeId$6(()=>createBaseVNode("input",{type:"text",id:"text"},null,-1)),_sfc_main$g={__name:"vaild",emits:["code-message"],setup(r,{emit:t}){const n=ref("");let{proxy:o}=getCurrentInstance(),a=[];var l=document.createElement("canvas"),d=200,g=86,y=l.getContext("2d");l.width=d,l.height=g;function S(c=4){y.clearRect(0,0,d,g);for(var A=parseInt(c),R=Math.random()*30*Math.PI/180,L=new Array(0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),$=0;$<A;$++){var O=Math.floor(Math.random()*L.length),z=10+$*40,V=50+Math.random()*8;V>=86&&(V=80),z>=200&&(z=190),y.font="bold 23px 微软雅黑",y.fillStyle=x(),y.translate(z,V),y.rotate(R),y.fillText(L[O],0,0),y.rotate(-R),y.translate(-z,-V),a.push(L[O])}for(var j=0;j<=5;j++)y.strokeStyle=x(),y.beginPath(),y.moveTo(Math.random()*d,Math.random()*g),y.lineTo(Math.random()*d,Math.random()*g),y.stroke();for(var K=0;K<=50;K++){y.strokeStyle=x(),y.beginPath();var Z=Math.random()*d,q=Math.random()*g;y.moveTo(Z,q),y.lineTo(Z+1,q+1),y.stroke()}}function x(){var c=Math.floor(Math.random()*256),A=Math.floor(Math.random()*256),R=Math.floor(Math.random()*256);return`rgb(${c},${A},${R})`}onMounted(()=>{S(4),n.value.appendChild(l)}),onBeforeUnmount(()=>{n.value.removeChild(l)});const w=async()=>{let c=document.getElementById("text");a.join("").toLowerCase().toString()===c.value.toString()?(console.log(!0),t("code-message",!0)):(o.$Message.error("验证码错误"),S(4)),c.value=null};return(c,A)=>{const R=resolveComponent("Button");return openBlock(),createElementBlock("table",_hoisted_1$d,[createBaseVNode("tr",null,[createBaseVNode("td",null,[createBaseVNode("div",{class:"container",ref_key:"container",ref:n},null,512)]),_hoisted_2$c]),createBaseVNode("tr",null,[_hoisted_3$7,createBaseVNode("td",null,[_hoisted_4$6,createVNode$1(R,{type:"primary",style:{"margin-left":"7px"},onClick:w},{default:withCtx(()=>[createTextVNode("确认")]),_:1})])])])}}},vaild=_export_sfc(_sfc_main$g,[["__scopeId","data-v-4412ad17"]]),login_vue_vue_type_style_index_0_scoped_57b371f5_lang="",_withScopeId$5=r=>(pushScopeId("data-v-57b371f5"),r=r(),popScopeId(),r),_hoisted_1$c={class:"container"},_hoisted_2$b={class:"con-login"},_hoisted_3$6={class:"login"},_hoisted_4$5={style:{"margin-top":"70px"}},_hoisted_5$4=_withScopeId$5(()=>createBaseVNode("h2",{style:{color:"#352864","text-align":"left","padding-left":"60px"}},"Login",-1)),_hoisted_6$4=_withScopeId$5(()=>createBaseVNode("br",null,null,-1)),_hoisted_7$4={class:"body"},_hoisted_8$2={id:"valid",class:"vaild"},_hoisted_9$1=_withScopeId$5(()=>createBaseVNode("div",{style:{"text-align":"right","margin-right":"60px","margin-top":"10px"}},[createBaseVNode("a",{target:"_blank",href:"/regist"},"新用户注册")],-1)),_sfc_main$f={__name:"login",setup(r){const{proxy:t}=getCurrentInstance(),n=useRouter(),o=ref(null),a=userinfoStore();let l=ref(!1),d=null,g=ref(null),y={};const S=()=>{o.value.validate(L=>{if(L){let $=sessionStorage.getItem("user");if($=JSON.parse($),$&&$.userInfo.username===x.username)return!1;y={username:x.username,password:x.passWord},l.value=!0}})};d=document.documentElement.addEventListener("keydown",L=>{L.key==="Enter"&&S()}),onMounted(()=>{__vitePreload(()=>import("./backGround-5132d13e.js"),[]).then(L=>{L.backGround()})}),watch(g,(L,$)=>{L===!0?(l.value=!1,login$1(y).then(O=>{if(O.data.data.token)a.getUserInfo(O.data.data),n.push("/"),t.$Message.success("登陆成功");else return o.value.resetFields(),x.passWord="",t.$Message.error("账号或密码错误")})):t.$Message.error("验证码错误")}),onBeforeUnmount(()=>{removeEventListener("keydown",d),document.body.removeChild(document.body.lastElementChild)});const x=reactive({username:"",passWord:""}),A=reactive({username:[{validator:(L,$,O)=>x.username===""?O(new Error("this username is empty")):O(),trigger:"blur"}],passwd:[{validator:(L,$,O)=>x.passWord===""?O(new Error("this password is empty")):O(),trigger:"blur"}]}),R=L=>{g.value=L};return(L,$)=>{const O=resolveComponent("Input"),z=resolveComponent("FormItem"),V=resolveComponent("Button"),j=resolveComponent("Modal"),K=resolveComponent("Form");return openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("div",_hoisted_2$b,[createVNode$1(K,{"label-position":"top",model:x,rules:A,ref_key:"ruleforms",ref:o},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$5,[_hoisted_5$4,_hoisted_6$4,createBaseVNode("div",_hoisted_7$4,[createVNode$1(z,{label:"用户名",class:"form-label",prop:"username"},{default:withCtx(()=>[createVNode$1(O,{type:"text",size:"large",modelValue:x.username,"onUpdate:modelValue":$[0]||($[0]=Z=>x.username=Z),placeholder:"请输入用户名",clearable:!0,prefix:"ios-contact",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),createVNode$1(z,{label:"密码",class:"form-label",prop:"passwd"},{default:withCtx(()=>[createVNode$1(O,{type:"password",size:"large",modelValue:x.passWord,"onUpdate:modelValue":$[1]||($[1]=Z=>x.passWord=Z),prefix:"md-lock",password:!0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),createVNode$1(V,{size:"large",type:"primary",onClick:S,style:{width:"280px",color:"#fff","margin-top":"20px","margin-left":"57px"}},{default:withCtx(()=>[createTextVNode("登录 ")]),_:1}),createBaseVNode("div",_hoisted_8$2,[createVNode$1(j,{modelValue:unref(l),"onUpdate:modelValue":$[2]||($[2]=Z=>isRef(l)?l.value=Z:l=Z),"footer-hide":!0},{default:withCtx(()=>[createVNode$1(vaild,{onCodeMessage:R})]),_:1},8,["modelValue"])]),_hoisted_9$1])])]),_:1},8,["model","rules"])])])}}},login=_export_sfc(_sfc_main$f,[["__scopeId","data-v-57b371f5"]]);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="158",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",KeepStencilOp=7680,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[t]===void 0&&(o[t]=[]),o[t].indexOf(n)===-1&&o[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const o=this._listeners;return o[t]!==void 0&&o[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const a=this._listeners[t];if(a!==void 0){const l=a.indexOf(n);l!==-1&&a.splice(l,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const o=this._listeners[t.type];if(o!==void 0){t.target=this;const a=o.slice(0);for(let l=0,d=a.length;l<d;l++)a[l].call(this,t);t.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const r=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(_lut[r&255]+_lut[r>>8&255]+_lut[r>>16&255]+_lut[r>>24&255]+"-"+_lut[t&255]+_lut[t>>8&255]+"-"+_lut[t>>16&15|64]+_lut[t>>24&255]+"-"+_lut[n&63|128]+_lut[n>>8&255]+"-"+_lut[n>>16&255]+_lut[n>>24&255]+_lut[o&255]+_lut[o>>8&255]+_lut[o>>16&255]+_lut[o>>24&255]).toLowerCase()}function clamp$1(r,t,n){return Math.max(t,Math.min(n,r))}function euclideanModulo(r,t){return(r%t+t)%t}function lerp$2(r,t,n){return(1-n)*r+n*t}function isPowerOfTwo(r){return(r&r-1)===0&&r!==0}function floorPowerOfTwo(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function denormalize(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function normalize$4(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}class Vector2{constructor(t=0,n=0){Vector2.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,o=this.y,a=t.elements;return this.x=a[0]*n+a[3]*o+a[6],this.y=a[1]*n+a[4]*o+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(n,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const o=this.dot(t)/n;return Math.acos(clamp$1(o,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,o=this.y-t.y;return n*n+o*o}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,o){return this.x=t.x+(n.x-t.x)*o,this.y=t.y+(n.y-t.y)*o,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const o=Math.cos(n),a=Math.sin(n),l=this.x-t.x,d=this.y-t.y;return this.x=l*o-d*a+t.x,this.y=l*a+d*o+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(t,n,o,a,l,d,g,y,S){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,o,a,l,d,g,y,S)}set(t,n,o,a,l,d,g,y,S){const x=this.elements;return x[0]=t,x[1]=a,x[2]=g,x[3]=n,x[4]=l,x[5]=y,x[6]=o,x[7]=d,x[8]=S,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,o=t.elements;return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],this}extractBasis(t,n,o){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const o=t.elements,a=n.elements,l=this.elements,d=o[0],g=o[3],y=o[6],S=o[1],x=o[4],w=o[7],c=o[2],A=o[5],R=o[8],L=a[0],$=a[3],O=a[6],z=a[1],V=a[4],j=a[7],K=a[2],Z=a[5],q=a[8];return l[0]=d*L+g*z+y*K,l[3]=d*$+g*V+y*Z,l[6]=d*O+g*j+y*q,l[1]=S*L+x*z+w*K,l[4]=S*$+x*V+w*Z,l[7]=S*O+x*j+w*q,l[2]=c*L+A*z+R*K,l[5]=c*$+A*V+R*Z,l[8]=c*O+A*j+R*q,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],o=t[1],a=t[2],l=t[3],d=t[4],g=t[5],y=t[6],S=t[7],x=t[8];return n*d*x-n*g*S-o*l*x+o*g*y+a*l*S-a*d*y}invert(){const t=this.elements,n=t[0],o=t[1],a=t[2],l=t[3],d=t[4],g=t[5],y=t[6],S=t[7],x=t[8],w=x*d-g*S,c=g*y-x*l,A=S*l-d*y,R=n*w+o*c+a*A;if(R===0)return this.set(0,0,0,0,0,0,0,0,0);const L=1/R;return t[0]=w*L,t[1]=(a*S-x*o)*L,t[2]=(g*o-a*d)*L,t[3]=c*L,t[4]=(x*n-a*y)*L,t[5]=(a*l-g*n)*L,t[6]=A*L,t[7]=(o*y-S*n)*L,t[8]=(d*n-o*l)*L,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,o,a,l,d,g){const y=Math.cos(l),S=Math.sin(l);return this.set(o*y,o*S,-o*(y*d+S*g)+d+t,-a*S,a*y,-a*(-S*d+y*g)+g+n,0,0,1),this}scale(t,n){return this.premultiply(_m3.makeScale(t,n)),this}rotate(t){return this.premultiply(_m3.makeRotation(-t)),this}translate(t,n){return this.premultiply(_m3.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),o=Math.sin(t);return this.set(n,-o,0,o,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,o=t.elements;for(let a=0;a<9;a++)if(n[a]!==o[a])return!1;return!0}fromArray(t,n=0){for(let o=0;o<9;o++)this.elements[o]=t[o+n];return this}toArray(t=[],n=0){const o=this.elements;return t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2],t[n+3]=o[3],t[n+4]=o[4],t[n+5]=o[5],t[n+6]=o[6],t[n+7]=o[7],t[n+8]=o[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(r){for(let t=r.length-1;t>=0;--t)if(r[t]>=65535)return!0;return!1}function createElementNS(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function createCanvasElement(){const r=createElementNS("canvas");return r.style.display="block",r}const _cache={};function warnOnce(r){r in _cache||(_cache[r]=!0,console.warn(r))}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,toReference:r=>r,fromReference:r=>r},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,toReference:r=>r.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:r=>r.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,toReference:r=>r.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:r=>r.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!SUPPORTED_WORKING_COLOR_SPACES.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,t,n){if(this.enabled===!1||t===n||!t||!n)return r;const o=COLOR_SPACES[t].toReference,a=COLOR_SPACES[n].fromReference;return a(o(r))},fromWorkingColorSpace:function(r,t){return this.convert(r,this._workingColorSpace,t)},toWorkingColorSpace:function(r,t){return this.convert(r,t,this._workingColorSpace)},getPrimaries:function(r){return COLOR_SPACES[r].primaries},getTransfer:function(r){return r===NoColorSpace?LinearTransfer:COLOR_SPACES[r].transfer}};function SRGBToLinear(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function LinearToSRGB(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=t.width,_canvas.height=t.height;const o=_canvas.getContext("2d");t instanceof ImageData?o.putImageData(t,0,0):o.drawImage(t,0,0,t.width,t.height),n=_canvas}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=createElementNS("canvas");n.width=t.width,n.height=t.height;const o=n.getContext("2d");o.drawImage(t,0,0,t.width,t.height);const a=o.getImageData(0,0,t.width,t.height),l=a.data;for(let d=0;d<l.length;d++)l[d]=SRGBToLinear(l[d]/255)*255;return o.putImageData(a,0,0),n}else if(t.data){const n=t.data.slice(0);for(let o=0;o<n.length;o++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[o]=Math.floor(SRGBToLinear(n[o]/255)*255):n[o]=SRGBToLinear(n[o]);return{data:n,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let _sourceId=0;class Source{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const o={uuid:this.uuid,url:""},a=this.data;if(a!==null){let l;if(Array.isArray(a)){l=[];for(let d=0,g=a.length;d<g;d++)a[d].isDataTexture?l.push(serializeImage(a[d].image)):l.push(serializeImage(a[d]))}else l=serializeImage(a);o.url=l}return n||(t.images[this.uuid]=o),o}}function serializeImage(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?ImageUtils.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(t=Texture.DEFAULT_IMAGE,n=Texture.DEFAULT_MAPPING,o=ClampToEdgeWrapping,a=ClampToEdgeWrapping,l=LinearFilter,d=LinearMipmapLinearFilter,g=RGBAFormat,y=UnsignedByteType,S=Texture.DEFAULT_ANISOTROPY,x=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=o,this.wrapT=a,this.magFilter=l,this.minFilter=d,this.anisotropy=S,this.format=g,this.internalFormat=null,this.type=y,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof x=="string"?this.colorSpace=x:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=x===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const o={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(o.userData=this.userData),n||(t.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==UVMapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(t){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(t=0,n=0,o=0,a=1){Vector4.prototype.isVector4=!0,this.x=t,this.y=n,this.z=o,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,o,a){return this.x=t,this.y=n,this.z=o,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,o=this.y,a=this.z,l=this.w,d=t.elements;return this.x=d[0]*n+d[4]*o+d[8]*a+d[12]*l,this.y=d[1]*n+d[5]*o+d[9]*a+d[13]*l,this.z=d[2]*n+d[6]*o+d[10]*a+d[14]*l,this.w=d[3]*n+d[7]*o+d[11]*a+d[15]*l,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,o,a,l;const y=t.elements,S=y[0],x=y[4],w=y[8],c=y[1],A=y[5],R=y[9],L=y[2],$=y[6],O=y[10];if(Math.abs(x-c)<.01&&Math.abs(w-L)<.01&&Math.abs(R-$)<.01){if(Math.abs(x+c)<.1&&Math.abs(w+L)<.1&&Math.abs(R+$)<.1&&Math.abs(S+A+O-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const V=(S+1)/2,j=(A+1)/2,K=(O+1)/2,Z=(x+c)/4,q=(w+L)/4,ie=(R+$)/4;return V>j&&V>K?V<.01?(o=0,a=.707106781,l=.707106781):(o=Math.sqrt(V),a=Z/o,l=q/o):j>K?j<.01?(o=.707106781,a=0,l=.707106781):(a=Math.sqrt(j),o=Z/a,l=ie/a):K<.01?(o=.707106781,a=.707106781,l=0):(l=Math.sqrt(K),o=q/l,a=ie/l),this.set(o,a,l,n),this}let z=Math.sqrt(($-R)*($-R)+(w-L)*(w-L)+(c-x)*(c-x));return Math.abs(z)<.001&&(z=1),this.x=($-R)/z,this.y=(w-L)/z,this.z=(c-x)/z,this.w=Math.acos((S+A+O-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(n,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,o){return this.x=t.x+(n.x-t.x)*o,this.y=t.y+(n.y-t.y)*o,this.z=t.z+(n.z-t.z)*o,this.w=t.w+(n.w-t.w)*o,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(t=1,n=1,o={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new Vector4(0,0,t,n),this.scissorTest=!1,this.viewport=new Vector4(0,0,t,n);const a={width:t,height:n,depth:1};o.encoding!==void 0&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=o.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),o=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},o),this.texture=new Texture(a,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=o.generateMipmaps,this.texture.internalFormat=o.internalFormat,this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,this.depthTexture=o.depthTexture,this.samples=o.samples}setSize(t,n,o=1){(this.width!==t||this.height!==n||this.depth!==o)&&(this.width=t,this.height=n,this.depth=o,this.texture.image.width=t,this.texture.image.height=n,this.texture.image.depth=o,this.dispose()),this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new Source(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(t=1,n=1,o={}){super(t,n,o),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(t=null,n=1,o=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:o,depth:a},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Data3DTexture extends Texture{constructor(t=null,n=1,o=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:o,depth:a},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(t=0,n=0,o=0,a=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=o,this._w=a}static slerpFlat(t,n,o,a,l,d,g){let y=o[a+0],S=o[a+1],x=o[a+2],w=o[a+3];const c=l[d+0],A=l[d+1],R=l[d+2],L=l[d+3];if(g===0){t[n+0]=y,t[n+1]=S,t[n+2]=x,t[n+3]=w;return}if(g===1){t[n+0]=c,t[n+1]=A,t[n+2]=R,t[n+3]=L;return}if(w!==L||y!==c||S!==A||x!==R){let $=1-g;const O=y*c+S*A+x*R+w*L,z=O>=0?1:-1,V=1-O*O;if(V>Number.EPSILON){const K=Math.sqrt(V),Z=Math.atan2(K,O*z);$=Math.sin($*Z)/K,g=Math.sin(g*Z)/K}const j=g*z;if(y=y*$+c*j,S=S*$+A*j,x=x*$+R*j,w=w*$+L*j,$===1-g){const K=1/Math.sqrt(y*y+S*S+x*x+w*w);y*=K,S*=K,x*=K,w*=K}}t[n]=y,t[n+1]=S,t[n+2]=x,t[n+3]=w}static multiplyQuaternionsFlat(t,n,o,a,l,d){const g=o[a],y=o[a+1],S=o[a+2],x=o[a+3],w=l[d],c=l[d+1],A=l[d+2],R=l[d+3];return t[n]=g*R+x*w+y*A-S*c,t[n+1]=y*R+x*c+S*w-g*A,t[n+2]=S*R+x*A+g*c-y*w,t[n+3]=x*R-g*w-y*c-S*A,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,o,a){return this._x=t,this._y=n,this._z=o,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n){const o=t._x,a=t._y,l=t._z,d=t._order,g=Math.cos,y=Math.sin,S=g(o/2),x=g(a/2),w=g(l/2),c=y(o/2),A=y(a/2),R=y(l/2);switch(d){case"XYZ":this._x=c*x*w+S*A*R,this._y=S*A*w-c*x*R,this._z=S*x*R+c*A*w,this._w=S*x*w-c*A*R;break;case"YXZ":this._x=c*x*w+S*A*R,this._y=S*A*w-c*x*R,this._z=S*x*R-c*A*w,this._w=S*x*w+c*A*R;break;case"ZXY":this._x=c*x*w-S*A*R,this._y=S*A*w+c*x*R,this._z=S*x*R+c*A*w,this._w=S*x*w-c*A*R;break;case"ZYX":this._x=c*x*w-S*A*R,this._y=S*A*w+c*x*R,this._z=S*x*R-c*A*w,this._w=S*x*w+c*A*R;break;case"YZX":this._x=c*x*w+S*A*R,this._y=S*A*w+c*x*R,this._z=S*x*R-c*A*w,this._w=S*x*w-c*A*R;break;case"XZY":this._x=c*x*w-S*A*R,this._y=S*A*w-c*x*R,this._z=S*x*R+c*A*w,this._w=S*x*w+c*A*R;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const o=n/2,a=Math.sin(o);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(o),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,o=n[0],a=n[4],l=n[8],d=n[1],g=n[5],y=n[9],S=n[2],x=n[6],w=n[10],c=o+g+w;if(c>0){const A=.5/Math.sqrt(c+1);this._w=.25/A,this._x=(x-y)*A,this._y=(l-S)*A,this._z=(d-a)*A}else if(o>g&&o>w){const A=2*Math.sqrt(1+o-g-w);this._w=(x-y)/A,this._x=.25*A,this._y=(a+d)/A,this._z=(l+S)/A}else if(g>w){const A=2*Math.sqrt(1+g-o-w);this._w=(l-S)/A,this._x=(a+d)/A,this._y=.25*A,this._z=(y+x)/A}else{const A=2*Math.sqrt(1+w-o-g);this._w=(d-a)/A,this._x=(l+S)/A,this._y=(y+x)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let o=t.dot(n)+1;return o<Number.EPSILON?(o=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=o):(this._x=0,this._y=-t.z,this._z=t.y,this._w=o)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=o),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(clamp$1(this.dot(t),-1,1)))}rotateTowards(t,n){const o=this.angleTo(t);if(o===0)return this;const a=Math.min(1,n/o);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const o=t._x,a=t._y,l=t._z,d=t._w,g=n._x,y=n._y,S=n._z,x=n._w;return this._x=o*x+d*g+a*S-l*y,this._y=a*x+d*y+l*g-o*S,this._z=l*x+d*S+o*y-a*g,this._w=d*x-o*g-a*y-l*S,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const o=this._x,a=this._y,l=this._z,d=this._w;let g=d*t._w+o*t._x+a*t._y+l*t._z;if(g<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,g=-g):this.copy(t),g>=1)return this._w=d,this._x=o,this._y=a,this._z=l,this;const y=1-g*g;if(y<=Number.EPSILON){const A=1-n;return this._w=A*d+n*this._w,this._x=A*o+n*this._x,this._y=A*a+n*this._y,this._z=A*l+n*this._z,this.normalize(),this._onChangeCallback(),this}const S=Math.sqrt(y),x=Math.atan2(S,g),w=Math.sin((1-n)*x)/S,c=Math.sin(n*x)/S;return this._w=d*w+this._w*c,this._x=o*w+this._x*c,this._y=a*w+this._y*c,this._z=l*w+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,n,o){return this.copy(t).slerp(n,o)}random(){const t=Math.random(),n=Math.sqrt(1-t),o=Math.sqrt(t),a=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(n*Math.cos(a),o*Math.sin(l),o*Math.cos(l),n*Math.sin(a))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(t=0,n=0,o=0){Vector3.prototype.isVector3=!0,this.x=t,this.y=n,this.z=o}set(t,n,o){return o===void 0&&(o=this.z),this.x=t,this.y=n,this.z=o,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(_quaternion$4.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,o=this.y,a=this.z,l=t.elements;return this.x=l[0]*n+l[3]*o+l[6]*a,this.y=l[1]*n+l[4]*o+l[7]*a,this.z=l[2]*n+l[5]*o+l[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,o=this.y,a=this.z,l=t.elements,d=1/(l[3]*n+l[7]*o+l[11]*a+l[15]);return this.x=(l[0]*n+l[4]*o+l[8]*a+l[12])*d,this.y=(l[1]*n+l[5]*o+l[9]*a+l[13])*d,this.z=(l[2]*n+l[6]*o+l[10]*a+l[14])*d,this}applyQuaternion(t){const n=this.x,o=this.y,a=this.z,l=t.x,d=t.y,g=t.z,y=t.w,S=2*(d*a-g*o),x=2*(g*n-l*a),w=2*(l*o-d*n);return this.x=n+y*S+d*w-g*x,this.y=o+y*x+g*S-l*w,this.z=a+y*w+l*x-d*S,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,o=this.y,a=this.z,l=t.elements;return this.x=l[0]*n+l[4]*o+l[8]*a,this.y=l[1]*n+l[5]*o+l[9]*a,this.z=l[2]*n+l[6]*o+l[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(n,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,o){return this.x=t.x+(n.x-t.x)*o,this.y=t.y+(n.y-t.y)*o,this.z=t.z+(n.z-t.z)*o,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const o=t.x,a=t.y,l=t.z,d=n.x,g=n.y,y=n.z;return this.x=a*y-l*g,this.y=l*d-o*y,this.z=o*g-a*d,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const o=t.dot(this)/n;return this.copy(t).multiplyScalar(o)}projectOnPlane(t){return _vector$b.copy(this).projectOnVector(t),this.sub(_vector$b)}reflect(t){return this.sub(_vector$b.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const o=this.dot(t)/n;return Math.acos(clamp$1(o,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,o=this.y-t.y,a=this.z-t.z;return n*n+o*o+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,o){const a=Math.sin(n)*t;return this.x=a*Math.sin(o),this.y=Math.cos(n)*t,this.z=a*Math.cos(o),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,o){return this.x=t*Math.sin(n),this.y=o,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),o=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=o,this.z=a,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,o=Math.sqrt(1-t**2);return this.x=o*Math.cos(n),this.y=o*Math.sin(n),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$b=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(t=new Vector3(1/0,1/0,1/0),n=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,o=t.length;n<o;n+=3)this.expandByPoint(_vector$a.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,o=t.count;n<o;n++)this.expandByPoint(_vector$a.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,o=t.length;n<o;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const o=_vector$a.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const o=t.geometry;if(o!==void 0){const l=o.getAttribute("position");if(n===!0&&l!==void 0&&t.isInstancedMesh!==!0)for(let d=0,g=l.count;d<g;d++)t.isMesh===!0?t.getVertexPosition(d,_vector$a):_vector$a.fromBufferAttribute(l,d),_vector$a.applyMatrix4(t.matrixWorld),this.expandByPoint(_vector$a);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),_box$3.copy(t.boundingBox)):(o.boundingBox===null&&o.computeBoundingBox(),_box$3.copy(o.boundingBox)),_box$3.applyMatrix4(t.matrixWorld),this.union(_box$3)}const a=t.children;for(let l=0,d=a.length;l<d;l++)this.expandByObject(a[l],n);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,_vector$a),_vector$a.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,o;return t.normal.x>0?(n=t.normal.x*this.min.x,o=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,o=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,o+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,o+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,o+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,o+=t.normal.z*this.min.z),n<=-t.constant&&o>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(t.a,_center),_v1$7.subVectors(t.b,_center),_v2$4.subVectors(t.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let n=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(n,_v0$2,_v1$7,_v2$4,_extents)||(n=[1,0,0,0,1,0,0,0,1],!satForAxes(n,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),n=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(n,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,_vector$a).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(_vector$a).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(_points),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$a=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(r,t,n,o,a){for(let l=0,d=r.length-3;l<=d;l+=3){_testAxis.fromArray(r,l);const g=a.x*Math.abs(_testAxis.x)+a.y*Math.abs(_testAxis.y)+a.z*Math.abs(_testAxis.z),y=t.dot(_testAxis),S=n.dot(_testAxis),x=o.dot(_testAxis);if(Math.max(-Math.max(y,S,x),Math.min(y,S,x))>g)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(t=new Vector3,n=-1){this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const o=this.center;n!==void 0?o.copy(n):_box$2.setFromPoints(t).getCenter(o);let a=0;for(let l=0,d=t.length;l<d;l++)a=Math.max(a,o.distanceToSquared(t[l]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const o=this.center.distanceToSquared(t);return n.copy(t),o>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;_v1$6.subVectors(t,this.center);const n=_v1$6.lengthSq();if(n>this.radius*this.radius){const o=Math.sqrt(n),a=(o-this.radius)*.5;this.center.addScaledVector(_v1$6,a/o),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(_v2$3.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(_v1$6.copy(t.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(t.center).sub(_v2$3))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$9=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(t=new Vector3,n=new Vector3(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,_vector$9)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const o=n.dot(this.direction);return o<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,o)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=_vector$9.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(_vector$9.copy(this.origin).addScaledVector(this.direction,n),_vector$9.distanceToSquared(t))}distanceSqToSegment(t,n,o,a){_segCenter.copy(t).add(n).multiplyScalar(.5),_segDir.copy(n).sub(t).normalize(),_diff.copy(this.origin).sub(_segCenter);const l=t.distanceTo(n)*.5,d=-this.direction.dot(_segDir),g=_diff.dot(this.direction),y=-_diff.dot(_segDir),S=_diff.lengthSq(),x=Math.abs(1-d*d);let w,c,A,R;if(x>0)if(w=d*y-g,c=d*g-y,R=l*x,w>=0)if(c>=-R)if(c<=R){const L=1/x;w*=L,c*=L,A=w*(w+d*c+2*g)+c*(d*w+c+2*y)+S}else c=l,w=Math.max(0,-(d*c+g)),A=-w*w+c*(c+2*y)+S;else c=-l,w=Math.max(0,-(d*c+g)),A=-w*w+c*(c+2*y)+S;else c<=-R?(w=Math.max(0,-(-d*l+g)),c=w>0?-l:Math.min(Math.max(-l,-y),l),A=-w*w+c*(c+2*y)+S):c<=R?(w=0,c=Math.min(Math.max(-l,-y),l),A=c*(c+2*y)+S):(w=Math.max(0,-(d*l+g)),c=w>0?l:Math.min(Math.max(-l,-y),l),A=-w*w+c*(c+2*y)+S);else c=d>0?-l:l,w=Math.max(0,-(d*c+g)),A=-w*w+c*(c+2*y)+S;return o&&o.copy(this.origin).addScaledVector(this.direction,w),a&&a.copy(_segCenter).addScaledVector(_segDir,c),A}intersectSphere(t,n){_vector$9.subVectors(t.center,this.origin);const o=_vector$9.dot(this.direction),a=_vector$9.dot(_vector$9)-o*o,l=t.radius*t.radius;if(a>l)return null;const d=Math.sqrt(l-a),g=o-d,y=o+d;return y<0?null:g<0?this.at(y,n):this.at(g,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const o=-(this.origin.dot(t.normal)+t.constant)/n;return o>=0?o:null}intersectPlane(t,n){const o=this.distanceToPlane(t);return o===null?null:this.at(o,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let o,a,l,d,g,y;const S=1/this.direction.x,x=1/this.direction.y,w=1/this.direction.z,c=this.origin;return S>=0?(o=(t.min.x-c.x)*S,a=(t.max.x-c.x)*S):(o=(t.max.x-c.x)*S,a=(t.min.x-c.x)*S),x>=0?(l=(t.min.y-c.y)*x,d=(t.max.y-c.y)*x):(l=(t.max.y-c.y)*x,d=(t.min.y-c.y)*x),o>d||l>a||((l>o||isNaN(o))&&(o=l),(d<a||isNaN(a))&&(a=d),w>=0?(g=(t.min.z-c.z)*w,y=(t.max.z-c.z)*w):(g=(t.max.z-c.z)*w,y=(t.min.z-c.z)*w),o>y||g>a)||((g>o||o!==o)&&(o=g),(y<a||a!==a)&&(a=y),a<0)?null:this.at(o>=0?o:a,n)}intersectsBox(t){return this.intersectBox(t,_vector$9)!==null}intersectTriangle(t,n,o,a,l){_edge1.subVectors(n,t),_edge2.subVectors(o,t),_normal$1.crossVectors(_edge1,_edge2);let d=this.direction.dot(_normal$1),g;if(d>0){if(a)return null;g=1}else if(d<0)g=-1,d=-d;else return null;_diff.subVectors(this.origin,t);const y=g*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(y<0)return null;const S=g*this.direction.dot(_edge1.cross(_diff));if(S<0||y+S>d)return null;const x=-g*_diff.dot(_normal$1);return x<0?null:this.at(x/d,l)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(t,n,o,a,l,d,g,y,S,x,w,c,A,R,L,$){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,o,a,l,d,g,y,S,x,w,c,A,R,L,$)}set(t,n,o,a,l,d,g,y,S,x,w,c,A,R,L,$){const O=this.elements;return O[0]=t,O[4]=n,O[8]=o,O[12]=a,O[1]=l,O[5]=d,O[9]=g,O[13]=y,O[2]=S,O[6]=x,O[10]=w,O[14]=c,O[3]=A,O[7]=R,O[11]=L,O[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(t){const n=this.elements,o=t.elements;return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],this}copyPosition(t){const n=this.elements,o=t.elements;return n[12]=o[12],n[13]=o[13],n[14]=o[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,o){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(t,n,o){return this.set(t.x,n.x,o.x,0,t.y,n.y,o.y,0,t.z,n.z,o.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,o=t.elements,a=1/_v1$5.setFromMatrixColumn(t,0).length(),l=1/_v1$5.setFromMatrixColumn(t,1).length(),d=1/_v1$5.setFromMatrixColumn(t,2).length();return n[0]=o[0]*a,n[1]=o[1]*a,n[2]=o[2]*a,n[3]=0,n[4]=o[4]*l,n[5]=o[5]*l,n[6]=o[6]*l,n[7]=0,n[8]=o[8]*d,n[9]=o[9]*d,n[10]=o[10]*d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,o=t.x,a=t.y,l=t.z,d=Math.cos(o),g=Math.sin(o),y=Math.cos(a),S=Math.sin(a),x=Math.cos(l),w=Math.sin(l);if(t.order==="XYZ"){const c=d*x,A=d*w,R=g*x,L=g*w;n[0]=y*x,n[4]=-y*w,n[8]=S,n[1]=A+R*S,n[5]=c-L*S,n[9]=-g*y,n[2]=L-c*S,n[6]=R+A*S,n[10]=d*y}else if(t.order==="YXZ"){const c=y*x,A=y*w,R=S*x,L=S*w;n[0]=c+L*g,n[4]=R*g-A,n[8]=d*S,n[1]=d*w,n[5]=d*x,n[9]=-g,n[2]=A*g-R,n[6]=L+c*g,n[10]=d*y}else if(t.order==="ZXY"){const c=y*x,A=y*w,R=S*x,L=S*w;n[0]=c-L*g,n[4]=-d*w,n[8]=R+A*g,n[1]=A+R*g,n[5]=d*x,n[9]=L-c*g,n[2]=-d*S,n[6]=g,n[10]=d*y}else if(t.order==="ZYX"){const c=d*x,A=d*w,R=g*x,L=g*w;n[0]=y*x,n[4]=R*S-A,n[8]=c*S+L,n[1]=y*w,n[5]=L*S+c,n[9]=A*S-R,n[2]=-S,n[6]=g*y,n[10]=d*y}else if(t.order==="YZX"){const c=d*y,A=d*S,R=g*y,L=g*S;n[0]=y*x,n[4]=L-c*w,n[8]=R*w+A,n[1]=w,n[5]=d*x,n[9]=-g*x,n[2]=-S*x,n[6]=A*w+R,n[10]=c-L*w}else if(t.order==="XZY"){const c=d*y,A=d*S,R=g*y,L=g*S;n[0]=y*x,n[4]=-w,n[8]=S*x,n[1]=c*w+L,n[5]=d*x,n[9]=A*w-R,n[2]=R*w-A,n[6]=g*x,n[10]=L*w+c}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(_zero,t,_one)}lookAt(t,n,o){const a=this.elements;return _z.subVectors(t,n),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(o,_z),_x.lengthSq()===0&&(Math.abs(o.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(o,_z)),_x.normalize(),_y.crossVectors(_z,_x),a[0]=_x.x,a[4]=_y.x,a[8]=_z.x,a[1]=_x.y,a[5]=_y.y,a[9]=_z.y,a[2]=_x.z,a[6]=_y.z,a[10]=_z.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const o=t.elements,a=n.elements,l=this.elements,d=o[0],g=o[4],y=o[8],S=o[12],x=o[1],w=o[5],c=o[9],A=o[13],R=o[2],L=o[6],$=o[10],O=o[14],z=o[3],V=o[7],j=o[11],K=o[15],Z=a[0],q=a[4],ie=a[8],te=a[12],oe=a[1],re=a[5],he=a[9],_e=a[13],me=a[2],be=a[6],Q=a[10],Ne=a[14],Ee=a[3],Ge=a[7],it=a[11],Te=a[15];return l[0]=d*Z+g*oe+y*me+S*Ee,l[4]=d*q+g*re+y*be+S*Ge,l[8]=d*ie+g*he+y*Q+S*it,l[12]=d*te+g*_e+y*Ne+S*Te,l[1]=x*Z+w*oe+c*me+A*Ee,l[5]=x*q+w*re+c*be+A*Ge,l[9]=x*ie+w*he+c*Q+A*it,l[13]=x*te+w*_e+c*Ne+A*Te,l[2]=R*Z+L*oe+$*me+O*Ee,l[6]=R*q+L*re+$*be+O*Ge,l[10]=R*ie+L*he+$*Q+O*it,l[14]=R*te+L*_e+$*Ne+O*Te,l[3]=z*Z+V*oe+j*me+K*Ee,l[7]=z*q+V*re+j*be+K*Ge,l[11]=z*ie+V*he+j*Q+K*it,l[15]=z*te+V*_e+j*Ne+K*Te,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],o=t[4],a=t[8],l=t[12],d=t[1],g=t[5],y=t[9],S=t[13],x=t[2],w=t[6],c=t[10],A=t[14],R=t[3],L=t[7],$=t[11],O=t[15];return R*(+l*y*w-a*S*w-l*g*c+o*S*c+a*g*A-o*y*A)+L*(+n*y*A-n*S*c+l*d*c-a*d*A+a*S*x-l*y*x)+$*(+n*S*w-n*g*A-l*d*w+o*d*A+l*g*x-o*S*x)+O*(-a*g*x-n*y*w+n*g*c+a*d*w-o*d*c+o*y*x)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,o){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=n,a[14]=o),this}invert(){const t=this.elements,n=t[0],o=t[1],a=t[2],l=t[3],d=t[4],g=t[5],y=t[6],S=t[7],x=t[8],w=t[9],c=t[10],A=t[11],R=t[12],L=t[13],$=t[14],O=t[15],z=w*$*S-L*c*S+L*y*A-g*$*A-w*y*O+g*c*O,V=R*c*S-x*$*S-R*y*A+d*$*A+x*y*O-d*c*O,j=x*L*S-R*w*S+R*g*A-d*L*A-x*g*O+d*w*O,K=R*w*y-x*L*y-R*g*c+d*L*c+x*g*$-d*w*$,Z=n*z+o*V+a*j+l*K;if(Z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const q=1/Z;return t[0]=z*q,t[1]=(L*c*l-w*$*l-L*a*A+o*$*A+w*a*O-o*c*O)*q,t[2]=(g*$*l-L*y*l+L*a*S-o*$*S-g*a*O+o*y*O)*q,t[3]=(w*y*l-g*c*l-w*a*S+o*c*S+g*a*A-o*y*A)*q,t[4]=V*q,t[5]=(x*$*l-R*c*l+R*a*A-n*$*A-x*a*O+n*c*O)*q,t[6]=(R*y*l-d*$*l-R*a*S+n*$*S+d*a*O-n*y*O)*q,t[7]=(d*c*l-x*y*l+x*a*S-n*c*S-d*a*A+n*y*A)*q,t[8]=j*q,t[9]=(R*w*l-x*L*l-R*o*A+n*L*A+x*o*O-n*w*O)*q,t[10]=(d*L*l-R*g*l+R*o*S-n*L*S-d*o*O+n*g*O)*q,t[11]=(x*g*l-d*w*l-x*o*S+n*w*S+d*o*A-n*g*A)*q,t[12]=K*q,t[13]=(x*L*a-R*w*a+R*o*c-n*L*c-x*o*$+n*w*$)*q,t[14]=(R*g*a-d*L*a-R*o*y+n*L*y+d*o*$-n*g*$)*q,t[15]=(d*w*a-x*g*a+x*o*y-n*w*y-d*o*c+n*g*c)*q,this}scale(t){const n=this.elements,o=t.x,a=t.y,l=t.z;return n[0]*=o,n[4]*=a,n[8]*=l,n[1]*=o,n[5]*=a,n[9]*=l,n[2]*=o,n[6]*=a,n[10]*=l,n[3]*=o,n[7]*=a,n[11]*=l,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,o,a))}makeTranslation(t,n,o){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,o,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),o=Math.sin(t);return this.set(1,0,0,0,0,n,-o,0,0,o,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),o=Math.sin(t);return this.set(n,0,o,0,0,1,0,0,-o,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),o=Math.sin(t);return this.set(n,-o,0,0,o,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const o=Math.cos(n),a=Math.sin(n),l=1-o,d=t.x,g=t.y,y=t.z,S=l*d,x=l*g;return this.set(S*d+o,S*g-a*y,S*y+a*g,0,S*g+a*y,x*g+o,x*y-a*d,0,S*y-a*g,x*y+a*d,l*y*y+o,0,0,0,0,1),this}makeScale(t,n,o){return this.set(t,0,0,0,0,n,0,0,0,0,o,0,0,0,0,1),this}makeShear(t,n,o,a,l,d){return this.set(1,o,l,0,t,1,d,0,n,a,1,0,0,0,0,1),this}compose(t,n,o){const a=this.elements,l=n._x,d=n._y,g=n._z,y=n._w,S=l+l,x=d+d,w=g+g,c=l*S,A=l*x,R=l*w,L=d*x,$=d*w,O=g*w,z=y*S,V=y*x,j=y*w,K=o.x,Z=o.y,q=o.z;return a[0]=(1-(L+O))*K,a[1]=(A+j)*K,a[2]=(R-V)*K,a[3]=0,a[4]=(A-j)*Z,a[5]=(1-(c+O))*Z,a[6]=($+z)*Z,a[7]=0,a[8]=(R+V)*q,a[9]=($-z)*q,a[10]=(1-(c+L))*q,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,n,o){const a=this.elements;let l=_v1$5.set(a[0],a[1],a[2]).length();const d=_v1$5.set(a[4],a[5],a[6]).length(),g=_v1$5.set(a[8],a[9],a[10]).length();this.determinant()<0&&(l=-l),t.x=a[12],t.y=a[13],t.z=a[14],_m1$2.copy(this);const S=1/l,x=1/d,w=1/g;return _m1$2.elements[0]*=S,_m1$2.elements[1]*=S,_m1$2.elements[2]*=S,_m1$2.elements[4]*=x,_m1$2.elements[5]*=x,_m1$2.elements[6]*=x,_m1$2.elements[8]*=w,_m1$2.elements[9]*=w,_m1$2.elements[10]*=w,n.setFromRotationMatrix(_m1$2),o.x=l,o.y=d,o.z=g,this}makePerspective(t,n,o,a,l,d,g=WebGLCoordinateSystem){const y=this.elements,S=2*l/(n-t),x=2*l/(o-a),w=(n+t)/(n-t),c=(o+a)/(o-a);let A,R;if(g===WebGLCoordinateSystem)A=-(d+l)/(d-l),R=-2*d*l/(d-l);else if(g===WebGPUCoordinateSystem)A=-d/(d-l),R=-d*l/(d-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+g);return y[0]=S,y[4]=0,y[8]=w,y[12]=0,y[1]=0,y[5]=x,y[9]=c,y[13]=0,y[2]=0,y[6]=0,y[10]=A,y[14]=R,y[3]=0,y[7]=0,y[11]=-1,y[15]=0,this}makeOrthographic(t,n,o,a,l,d,g=WebGLCoordinateSystem){const y=this.elements,S=1/(n-t),x=1/(o-a),w=1/(d-l),c=(n+t)*S,A=(o+a)*x;let R,L;if(g===WebGLCoordinateSystem)R=(d+l)*w,L=-2*w;else if(g===WebGPUCoordinateSystem)R=l*w,L=-1*w;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+g);return y[0]=2*S,y[4]=0,y[8]=0,y[12]=-c,y[1]=0,y[5]=2*x,y[9]=0,y[13]=-A,y[2]=0,y[6]=0,y[10]=L,y[14]=-R,y[3]=0,y[7]=0,y[11]=0,y[15]=1,this}equals(t){const n=this.elements,o=t.elements;for(let a=0;a<16;a++)if(n[a]!==o[a])return!1;return!0}fromArray(t,n=0){for(let o=0;o<16;o++)this.elements[o]=t[o+n];return this}toArray(t=[],n=0){const o=this.elements;return t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2],t[n+3]=o[3],t[n+4]=o[4],t[n+5]=o[5],t[n+6]=o[6],t[n+7]=o[7],t[n+8]=o[8],t[n+9]=o[9],t[n+10]=o[10],t[n+11]=o[11],t[n+12]=o[12],t[n+13]=o[13],t[n+14]=o[14],t[n+15]=o[15],t}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(t=0,n=0,o=0,a=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=o,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,o,a=this._order){return this._x=t,this._y=n,this._z=o,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,o=!0){const a=t.elements,l=a[0],d=a[4],g=a[8],y=a[1],S=a[5],x=a[9],w=a[2],c=a[6],A=a[10];switch(n){case"XYZ":this._y=Math.asin(clamp$1(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-x,A),this._z=Math.atan2(-d,l)):(this._x=Math.atan2(c,S),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(g,A),this._z=Math.atan2(y,S)):(this._y=Math.atan2(-w,l),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-w,A),this._z=Math.atan2(-d,S)):(this._y=0,this._z=Math.atan2(y,l));break;case"ZYX":this._y=Math.asin(-clamp$1(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(c,A),this._z=Math.atan2(y,l)):(this._x=0,this._z=Math.atan2(-d,S));break;case"YZX":this._z=Math.asin(clamp$1(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-x,S),this._y=Math.atan2(-w,l)):(this._x=0,this._y=Math.atan2(g,A));break;case"XZY":this._z=Math.asin(-clamp$1(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(c,S),this._y=Math.atan2(g,l)):(this._x=Math.atan2(-x,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,o===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,o){return _matrix.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_matrix,n,o)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const t=new Vector3,n=new Euler,o=new Quaternion,a=new Vector3(1,1,1);function l(){o.setFromEuler(n,!1)}function d(){n.setFromQuaternion(o,void 0,!1)}n._onChange(l),o._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return _q1.setFromAxisAngle(t,n),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(t,n){return _q1.setFromAxisAngle(t,n),this.quaternion.premultiply(_q1),this}rotateX(t){return this.rotateOnAxis(_xAxis,t)}rotateY(t){return this.rotateOnAxis(_yAxis,t)}rotateZ(t){return this.rotateOnAxis(_zAxis,t)}translateOnAxis(t,n){return _v1$4.copy(t).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(_xAxis,t)}translateY(t){return this.translateOnAxis(_yAxis,t)}translateZ(t){return this.translateOnAxis(_zAxis,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(t,n,o){t.isVector3?_target.copy(t):_target.set(t,n,o);const a=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),a&&(_m1$1.extractRotation(a.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(_removedEvent)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(t.parent.matrixWorld)),t.applyMatrix4(_m1$1),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let o=0,a=this.children.length;o<a;o++){const d=this.children[o].getObjectByProperty(t,n);if(d!==void 0)return d}}getObjectsByProperty(t,n){let o=[];this[t]===n&&o.push(this);for(let a=0,l=this.children.length;a<l;a++){const d=this.children[a].getObjectsByProperty(t,n);d.length>0&&(o=o.concat(d))}return o}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,t,_scale$2),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let o=0,a=n.length;o<a;o++)n[o].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let o=0,a=n.length;o<a;o++)n[o].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let o=0,a=n.length;o<a;o++){const l=n[o];(l.matrixWorldAutoUpdate===!0||t===!0)&&l.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const o=this.parent;if(t===!0&&o!==null&&o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const a=this.children;for(let l=0,d=a.length;l<d;l++){const g=a[l];g.matrixWorldAutoUpdate===!0&&g.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=t===void 0||typeof t=="string",o={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},o.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function l(g,y){return g[y.uuid]===void 0&&(g[y.uuid]=y.toJSON(t)),y.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=l(t.geometries,this.geometry);const g=this.geometry.parameters;if(g!==void 0&&g.shapes!==void 0){const y=g.shapes;if(Array.isArray(y))for(let S=0,x=y.length;S<x;S++){const w=y[S];l(t.shapes,w)}else l(t.shapes,y)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const g=[];for(let y=0,S=this.material.length;y<S;y++)g.push(l(t.materials,this.material[y]));a.material=g}else a.material=l(t.materials,this.material);if(this.children.length>0){a.children=[];for(let g=0;g<this.children.length;g++)a.children.push(this.children[g].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let g=0;g<this.animations.length;g++){const y=this.animations[g];a.animations.push(l(t.animations,y))}}if(n){const g=d(t.geometries),y=d(t.materials),S=d(t.textures),x=d(t.images),w=d(t.shapes),c=d(t.skeletons),A=d(t.animations),R=d(t.nodes);g.length>0&&(o.geometries=g),y.length>0&&(o.materials=y),S.length>0&&(o.textures=S),x.length>0&&(o.images=x),w.length>0&&(o.shapes=w),c.length>0&&(o.skeletons=c),A.length>0&&(o.animations=A),R.length>0&&(o.nodes=R)}return o.object=a,o;function d(g){const y=[];for(const S in g){const x=g[S];delete x.metadata,y.push(x)}return y}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let o=0;o<t.children.length;o++){const a=t.children[o];this.add(a.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let warnedGetUV=!1,Triangle$1=class NC{constructor(t=new Vector3,n=new Vector3,o=new Vector3){this.a=t,this.b=n,this.c=o}static getNormal(t,n,o,a){a.subVectors(o,n),_v0$1.subVectors(t,n),a.cross(_v0$1);const l=a.lengthSq();return l>0?a.multiplyScalar(1/Math.sqrt(l)):a.set(0,0,0)}static getBarycoord(t,n,o,a,l){_v0$1.subVectors(a,n),_v1$3.subVectors(o,n),_v2$2.subVectors(t,n);const d=_v0$1.dot(_v0$1),g=_v0$1.dot(_v1$3),y=_v0$1.dot(_v2$2),S=_v1$3.dot(_v1$3),x=_v1$3.dot(_v2$2),w=d*S-g*g;if(w===0)return l.set(-2,-1,-1);const c=1/w,A=(S*y-g*x)*c,R=(d*x-g*y)*c;return l.set(1-A-R,R,A)}static containsPoint(t,n,o,a){return this.getBarycoord(t,n,o,a,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(t,n,o,a,l,d,g,y){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),this.getInterpolation(t,n,o,a,l,d,g,y)}static getInterpolation(t,n,o,a,l,d,g,y){return this.getBarycoord(t,n,o,a,_v3$1),y.setScalar(0),y.addScaledVector(l,_v3$1.x),y.addScaledVector(d,_v3$1.y),y.addScaledVector(g,_v3$1.z),y}static isFrontFacing(t,n,o,a){return _v0$1.subVectors(o,n),_v1$3.subVectors(t,n),_v0$1.cross(_v1$3).dot(a)<0}set(t,n,o){return this.a.copy(t),this.b.copy(n),this.c.copy(o),this}setFromPointsAndIndices(t,n,o,a){return this.a.copy(t[n]),this.b.copy(t[o]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,n,o,a){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,o),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return NC.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return NC.getBarycoord(t,this.a,this.b,this.c,n)}getUV(t,n,o,a,l){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),NC.getInterpolation(t,this.a,this.b,this.c,n,o,a,l)}getInterpolation(t,n,o,a,l){return NC.getInterpolation(t,this.a,this.b,this.c,n,o,a,l)}containsPoint(t){return NC.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return NC.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const o=this.a,a=this.b,l=this.c;let d,g;_vab.subVectors(a,o),_vac.subVectors(l,o),_vap.subVectors(t,o);const y=_vab.dot(_vap),S=_vac.dot(_vap);if(y<=0&&S<=0)return n.copy(o);_vbp.subVectors(t,a);const x=_vab.dot(_vbp),w=_vac.dot(_vbp);if(x>=0&&w<=x)return n.copy(a);const c=y*w-x*S;if(c<=0&&y>=0&&x<=0)return d=y/(y-x),n.copy(o).addScaledVector(_vab,d);_vcp.subVectors(t,l);const A=_vab.dot(_vcp),R=_vac.dot(_vcp);if(R>=0&&A<=R)return n.copy(l);const L=A*S-y*R;if(L<=0&&S>=0&&R<=0)return g=S/(S-R),n.copy(o).addScaledVector(_vac,g);const $=x*R-A*w;if($<=0&&w-x>=0&&A-R>=0)return _vbc.subVectors(l,a),g=(w-x)/(w-x+(A-R)),n.copy(a).addScaledVector(_vbc,g);const O=1/($+L+c);return d=L*O,g=c*O,n.copy(o).addScaledVector(_vab,d).addScaledVector(_vac,g)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}};const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(t-r)*6*n:n<1/2?t:n<2/3?r+(t-r)*6*(2/3-n):r}class Color{constructor(t,n,o){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,o)}set(t,n,o){if(n===void 0&&o===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,n,o);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=SRGBColorSpace){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,ColorManagement.toWorkingColorSpace(this,n),this}setRGB(t,n,o,a=ColorManagement.workingColorSpace){return this.r=t,this.g=n,this.b=o,ColorManagement.toWorkingColorSpace(this,a),this}setHSL(t,n,o,a=ColorManagement.workingColorSpace){if(t=euclideanModulo(t,1),n=clamp$1(n,0,1),o=clamp$1(o,0,1),n===0)this.r=this.g=this.b=o;else{const l=o<=.5?o*(1+n):o+n-o*n,d=2*o-l;this.r=hue2rgb(d,l,t+1/3),this.g=hue2rgb(d,l,t),this.b=hue2rgb(d,l,t-1/3)}return ColorManagement.toWorkingColorSpace(this,a),this}setStyle(t,n=SRGBColorSpace){function o(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let l;const d=a[1],g=a[2];switch(d){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return o(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,n);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return o(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,n);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return o(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=a[1],d=l.length;if(d===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,n);if(d===6)return this.setHex(parseInt(l,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=SRGBColorSpace){const o=_colorKeywords[t.toLowerCase()];return o!==void 0?this.setHex(o,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=SRGBToLinear(t.r),this.g=SRGBToLinear(t.g),this.b=SRGBToLinear(t.b),this}copyLinearToSRGB(t){return this.r=LinearToSRGB(t.r),this.g=LinearToSRGB(t.g),this.b=LinearToSRGB(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),t),Math.round(clamp$1(_color.r*255,0,255))*65536+Math.round(clamp$1(_color.g*255,0,255))*256+Math.round(clamp$1(_color.b*255,0,255))}getHexString(t=SRGBColorSpace){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),n);const o=_color.r,a=_color.g,l=_color.b,d=Math.max(o,a,l),g=Math.min(o,a,l);let y,S;const x=(g+d)/2;if(g===d)y=0,S=0;else{const w=d-g;switch(S=x<=.5?w/(d+g):w/(2-d-g),d){case o:y=(a-l)/w+(a<l?6:0);break;case a:y=(l-o)/w+2;break;case l:y=(o-a)/w+4;break}y/=6}return t.h=y,t.s=S,t.l=x,t}getRGB(t,n=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),n),t.r=_color.r,t.g=_color.g,t.b=_color.b,t}getStyle(t=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),t);const n=_color.r,o=_color.g,a=_color.b;return t!==SRGBColorSpace?`color(${t} ${n.toFixed(3)} ${o.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(o*255)},${Math.round(a*255)})`}offsetHSL(t,n,o){return this.getHSL(_hslA),this.setHSL(_hslA.h+t,_hslA.s+n,_hslA.l+o)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,o){return this.r=t.r+(n.r-t.r)*o,this.g=t.g+(n.g-t.g)*o,this.b=t.b+(n.b-t.b)*o,this}lerpHSL(t,n){this.getHSL(_hslA),t.getHSL(_hslB);const o=lerp$2(_hslA.h,_hslB.h,n),a=lerp$2(_hslA.s,_hslB.s,n),l=lerp$2(_hslA.l,_hslB.l,n);return this.setHSL(o,a,l),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,o=this.g,a=this.b,l=t.elements;return this.r=l[0]*n+l[3]*o+l[6]*a,this.g=l[1]*n+l[4]*o+l[7]*a,this.b=l[2]*n+l[5]*o+l[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const n in t){const o=t[n];if(o===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const a=this[n];if(a===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(o):a&&a.isVector3&&o&&o.isVector3?a.copy(o):this[n]=o}}toJSON(t){const n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});const o={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.sheen!==void 0&&(o.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(o.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(o.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(o.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(o.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearcoat!==void 0&&(o.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(o.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(o.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(o.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,o.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(o.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(o.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(o.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(o.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(o.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(o.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(o.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(o.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(t).uuid,o.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(o.aoMap=this.aoMap.toJSON(t).uuid,o.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(t).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(t).uuid,o.normalMapType=this.normalMapType,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(t).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(o.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(o.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(o.combine=this.combine)),this.envMapIntensity!==void 0&&(o.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(o.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(o.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(o.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(o.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(o.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(o.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(o.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(o.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(o.size=this.size),this.shadowSide!==null&&(o.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(o.blending=this.blending),this.side!==FrontSide&&(o.side=this.side),this.vertexColors===!0&&(o.vertexColors=!0),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(o.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(o.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(o.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(o.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(o.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(o.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(o.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(o.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(o.depthFunc=this.depthFunc),this.depthTest===!1&&(o.depthTest=this.depthTest),this.depthWrite===!1&&(o.depthWrite=this.depthWrite),this.colorWrite===!1&&(o.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(o.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(o.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(o.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(o.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(o.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(o.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(o.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(o.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(o.rotation=this.rotation),this.polygonOffset===!0&&(o.polygonOffset=!0),this.polygonOffsetFactor!==0&&(o.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(o.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(o.linewidth=this.linewidth),this.dashSize!==void 0&&(o.dashSize=this.dashSize),this.gapSize!==void 0&&(o.gapSize=this.gapSize),this.scale!==void 0&&(o.scale=this.scale),this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.alphaHash===!0&&(o.alphaHash=!0),this.alphaToCoverage===!0&&(o.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=!0),this.forceSinglePass===!0&&(o.forceSinglePass=!0),this.wireframe===!0&&(o.wireframe=!0),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(o.flatShading=!0),this.visible===!1&&(o.visible=!1),this.toneMapped===!1&&(o.toneMapped=!1),this.fog===!1&&(o.fog=!1),Object.keys(this.userData).length>0&&(o.userData=this.userData);function a(l){const d=[];for(const g in l){const y=l[g];delete y.metadata,d.push(y)}return d}if(n){const l=a(t.textures),d=a(t.images);l.length>0&&(o.textures=l),d.length>0&&(o.images=d)}return o}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let o=null;if(n!==null){const a=n.length;o=new Array(a);for(let l=0;l!==a;++l)o[l]=n[l].clone()}return this.clippingPlanes=o,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const _vector$8=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(t,n,o=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=o,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,o){t*=this.itemSize,o*=n.itemSize;for(let a=0,l=this.itemSize;a<l;a++)this.array[t+a]=n.array[o+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,o=this.count;n<o;n++)_vector2$1.fromBufferAttribute(this,n),_vector2$1.applyMatrix3(t),this.setXY(n,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let n=0,o=this.count;n<o;n++)_vector$8.fromBufferAttribute(this,n),_vector$8.applyMatrix3(t),this.setXYZ(n,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyMatrix4(t){for(let n=0,o=this.count;n<o;n++)_vector$8.fromBufferAttribute(this,n),_vector$8.applyMatrix4(t),this.setXYZ(n,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyNormalMatrix(t){for(let n=0,o=this.count;n<o;n++)_vector$8.fromBufferAttribute(this,n),_vector$8.applyNormalMatrix(t),this.setXYZ(n,_vector$8.x,_vector$8.y,_vector$8.z);return this}transformDirection(t){for(let n=0,o=this.count;n<o;n++)_vector$8.fromBufferAttribute(this,n),_vector$8.transformDirection(t),this.setXYZ(n,_vector$8.x,_vector$8.y,_vector$8.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let o=this.array[t*this.itemSize+n];return this.normalized&&(o=denormalize(o,this.array)),o}setComponent(t,n,o){return this.normalized&&(o=normalize$4(o,this.array)),this.array[t*this.itemSize+n]=o,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=denormalize(n,this.array)),n}setX(t,n){return this.normalized&&(n=normalize$4(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=denormalize(n,this.array)),n}setY(t,n){return this.normalized&&(n=normalize$4(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=denormalize(n,this.array)),n}setZ(t,n){return this.normalized&&(n=normalize$4(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=denormalize(n,this.array)),n}setW(t,n){return this.normalized&&(n=normalize$4(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,o){return t*=this.itemSize,this.normalized&&(n=normalize$4(n,this.array),o=normalize$4(o,this.array)),this.array[t+0]=n,this.array[t+1]=o,this}setXYZ(t,n,o,a){return t*=this.itemSize,this.normalized&&(n=normalize$4(n,this.array),o=normalize$4(o,this.array),a=normalize$4(a,this.array)),this.array[t+0]=n,this.array[t+1]=o,this.array[t+2]=a,this}setXYZW(t,n,o,a,l){return t*=this.itemSize,this.normalized&&(n=normalize$4(n,this.array),o=normalize$4(o,this.array),a=normalize$4(a,this.array),l=normalize$4(l,this.array)),this.array[t+0]=n,this.array[t+1]=o,this.array[t+2]=a,this.array[t+3]=l,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==StaticDrawUsage&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}class Uint16BufferAttribute extends BufferAttribute{constructor(t,n,o){super(new Uint16Array(t),n,o)}}class Uint32BufferAttribute extends BufferAttribute{constructor(t,n,o){super(new Uint32Array(t),n,o)}}class Float32BufferAttribute extends BufferAttribute{constructor(t,n,o){super(new Float32Array(t),n,o)}}let _id$2=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$7=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(arrayNeedsUint32(t)?Uint32BufferAttribute:Uint16BufferAttribute)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,o=0){this.groups.push({start:t,count:n,materialIndex:o})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const o=this.attributes.normal;if(o!==void 0){const l=new Matrix3().getNormalMatrix(t);o.applyNormalMatrix(l),o.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return _m1.makeRotationFromQuaternion(t),this.applyMatrix4(_m1),this}rotateX(t){return _m1.makeRotationX(t),this.applyMatrix4(_m1),this}rotateY(t){return _m1.makeRotationY(t),this.applyMatrix4(_m1),this}rotateZ(t){return _m1.makeRotationZ(t),this.applyMatrix4(_m1),this}translate(t,n,o){return _m1.makeTranslation(t,n,o),this.applyMatrix4(_m1),this}scale(t,n,o){return _m1.makeScale(t,n,o),this.applyMatrix4(_m1),this}lookAt(t){return _obj.lookAt(t),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(t){const n=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];n.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new Float32BufferAttribute(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let o=0,a=n.length;o<a;o++){const l=n[o];_box$1.setFromBufferAttribute(l),this.morphTargetsRelative?(_vector$7.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$7),_vector$7.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$7)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(t){const o=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(t),n)for(let l=0,d=n.length;l<d;l++){const g=n[l];_boxMorphTargets.setFromBufferAttribute(g),this.morphTargetsRelative?(_vector$7.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$7),_vector$7.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$7)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(o);let a=0;for(let l=0,d=t.count;l<d;l++)_vector$7.fromBufferAttribute(t,l),a=Math.max(a,o.distanceToSquared(_vector$7));if(n)for(let l=0,d=n.length;l<d;l++){const g=n[l],y=this.morphTargetsRelative;for(let S=0,x=g.count;S<x;S++)_vector$7.fromBufferAttribute(g,S),y&&(_offset.fromBufferAttribute(t,S),_vector$7.add(_offset)),a=Math.max(a,o.distanceToSquared(_vector$7))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const o=t.array,a=n.position.array,l=n.normal.array,d=n.uv.array,g=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*g),4));const y=this.getAttribute("tangent").array,S=[],x=[];for(let oe=0;oe<g;oe++)S[oe]=new Vector3,x[oe]=new Vector3;const w=new Vector3,c=new Vector3,A=new Vector3,R=new Vector2,L=new Vector2,$=new Vector2,O=new Vector3,z=new Vector3;function V(oe,re,he){w.fromArray(a,oe*3),c.fromArray(a,re*3),A.fromArray(a,he*3),R.fromArray(d,oe*2),L.fromArray(d,re*2),$.fromArray(d,he*2),c.sub(w),A.sub(w),L.sub(R),$.sub(R);const _e=1/(L.x*$.y-$.x*L.y);isFinite(_e)&&(O.copy(c).multiplyScalar($.y).addScaledVector(A,-L.y).multiplyScalar(_e),z.copy(A).multiplyScalar(L.x).addScaledVector(c,-$.x).multiplyScalar(_e),S[oe].add(O),S[re].add(O),S[he].add(O),x[oe].add(z),x[re].add(z),x[he].add(z))}let j=this.groups;j.length===0&&(j=[{start:0,count:o.length}]);for(let oe=0,re=j.length;oe<re;++oe){const he=j[oe],_e=he.start,me=he.count;for(let be=_e,Q=_e+me;be<Q;be+=3)V(o[be+0],o[be+1],o[be+2])}const K=new Vector3,Z=new Vector3,q=new Vector3,ie=new Vector3;function te(oe){q.fromArray(l,oe*3),ie.copy(q);const re=S[oe];K.copy(re),K.sub(q.multiplyScalar(q.dot(re))).normalize(),Z.crossVectors(ie,re);const _e=Z.dot(x[oe])<0?-1:1;y[oe*4]=K.x,y[oe*4+1]=K.y,y[oe*4+2]=K.z,y[oe*4+3]=_e}for(let oe=0,re=j.length;oe<re;++oe){const he=j[oe],_e=he.start,me=he.count;for(let be=_e,Q=_e+me;be<Q;be+=3)te(o[be+0]),te(o[be+1]),te(o[be+2])}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let o=this.getAttribute("normal");if(o===void 0)o=new BufferAttribute(new Float32Array(n.count*3),3),this.setAttribute("normal",o);else for(let c=0,A=o.count;c<A;c++)o.setXYZ(c,0,0,0);const a=new Vector3,l=new Vector3,d=new Vector3,g=new Vector3,y=new Vector3,S=new Vector3,x=new Vector3,w=new Vector3;if(t)for(let c=0,A=t.count;c<A;c+=3){const R=t.getX(c+0),L=t.getX(c+1),$=t.getX(c+2);a.fromBufferAttribute(n,R),l.fromBufferAttribute(n,L),d.fromBufferAttribute(n,$),x.subVectors(d,l),w.subVectors(a,l),x.cross(w),g.fromBufferAttribute(o,R),y.fromBufferAttribute(o,L),S.fromBufferAttribute(o,$),g.add(x),y.add(x),S.add(x),o.setXYZ(R,g.x,g.y,g.z),o.setXYZ(L,y.x,y.y,y.z),o.setXYZ($,S.x,S.y,S.z)}else for(let c=0,A=n.count;c<A;c+=3)a.fromBufferAttribute(n,c+0),l.fromBufferAttribute(n,c+1),d.fromBufferAttribute(n,c+2),x.subVectors(d,l),w.subVectors(a,l),x.cross(w),o.setXYZ(c+0,x.x,x.y,x.z),o.setXYZ(c+1,x.x,x.y,x.z),o.setXYZ(c+2,x.x,x.y,x.z);this.normalizeNormals(),o.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,o=t.count;n<o;n++)_vector$7.fromBufferAttribute(t,n),_vector$7.normalize(),t.setXYZ(n,_vector$7.x,_vector$7.y,_vector$7.z)}toNonIndexed(){function t(g,y){const S=g.array,x=g.itemSize,w=g.normalized,c=new S.constructor(y.length*x);let A=0,R=0;for(let L=0,$=y.length;L<$;L++){g.isInterleavedBufferAttribute?A=y[L]*g.data.stride+g.offset:A=y[L]*x;for(let O=0;O<x;O++)c[R++]=S[A++]}return new BufferAttribute(c,x,w)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new BufferGeometry,o=this.index.array,a=this.attributes;for(const g in a){const y=a[g],S=t(y,o);n.setAttribute(g,S)}const l=this.morphAttributes;for(const g in l){const y=[],S=l[g];for(let x=0,w=S.length;x<w;x++){const c=S[x],A=t(c,o);y.push(A)}n.morphAttributes[g]=y}n.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let g=0,y=d.length;g<y;g++){const S=d[g];n.addGroup(S.start,S.count,S.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const y=this.parameters;for(const S in y)y[S]!==void 0&&(t[S]=y[S]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const o=this.attributes;for(const y in o){const S=o[y];t.data.attributes[y]=S.toJSON(t.data)}const a={};let l=!1;for(const y in this.morphAttributes){const S=this.morphAttributes[y],x=[];for(let w=0,c=S.length;w<c;w++){const A=S[w];x.push(A.toJSON(t.data))}x.length>0&&(a[y]=x,l=!0)}l&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));const g=this.boundingSphere;return g!==null&&(t.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const o=t.index;o!==null&&this.setIndex(o.clone(n));const a=t.attributes;for(const S in a){const x=a[S];this.setAttribute(S,x.clone(n))}const l=t.morphAttributes;for(const S in l){const x=[],w=l[S];for(let c=0,A=w.length;c<A;c++)x.push(w[c].clone(n));this.morphAttributes[S]=x}this.morphTargetsRelative=t.morphTargetsRelative;const d=t.groups;for(let S=0,x=d.length;S<x;S++){const w=d[S];this.addGroup(w.start,w.count,w.materialIndex)}const g=t.boundingBox;g!==null&&(this.boundingBox=g.clone());const y=t.boundingSphere;return y!==null&&(this.boundingSphere=y.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$5=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(t=new BufferGeometry,n=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,o=Object.keys(n);if(o.length>0){const a=n[o[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=a.length;l<d;l++){const g=a[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=l}}}}getVertexPosition(t,n){const o=this.geometry,a=o.attributes.position,l=o.morphAttributes.position,d=o.morphTargetsRelative;n.fromBufferAttribute(a,t);const g=this.morphTargetInfluences;if(l&&g){_morphA.set(0,0,0);for(let y=0,S=l.length;y<S;y++){const x=g[y],w=l[y];x!==0&&(_tempA.fromBufferAttribute(w,t),d?_morphA.addScaledVector(_tempA,x):_morphA.addScaledVector(_tempA.sub(n),x))}n.add(_morphA)}return n}raycast(t,n){const o=this.geometry,a=this.material,l=this.matrixWorld;a!==void 0&&(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$5.copy(o.boundingSphere),_sphere$5.applyMatrix4(l),_ray$3.copy(t.ray).recast(t.near),!(_sphere$5.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$5,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(t.far-t.near)**2))&&(_inverseMatrix$3.copy(l).invert(),_ray$3.copy(t.ray).applyMatrix4(_inverseMatrix$3),!(o.boundingBox!==null&&_ray$3.intersectsBox(o.boundingBox)===!1)&&this._computeIntersections(t,n,_ray$3)))}_computeIntersections(t,n,o){let a;const l=this.geometry,d=this.material,g=l.index,y=l.attributes.position,S=l.attributes.uv,x=l.attributes.uv1,w=l.attributes.normal,c=l.groups,A=l.drawRange;if(g!==null)if(Array.isArray(d))for(let R=0,L=c.length;R<L;R++){const $=c[R],O=d[$.materialIndex],z=Math.max($.start,A.start),V=Math.min(g.count,Math.min($.start+$.count,A.start+A.count));for(let j=z,K=V;j<K;j+=3){const Z=g.getX(j),q=g.getX(j+1),ie=g.getX(j+2);a=checkGeometryIntersection(this,O,t,o,S,x,w,Z,q,ie),a&&(a.faceIndex=Math.floor(j/3),a.face.materialIndex=$.materialIndex,n.push(a))}}else{const R=Math.max(0,A.start),L=Math.min(g.count,A.start+A.count);for(let $=R,O=L;$<O;$+=3){const z=g.getX($),V=g.getX($+1),j=g.getX($+2);a=checkGeometryIntersection(this,d,t,o,S,x,w,z,V,j),a&&(a.faceIndex=Math.floor($/3),n.push(a))}}else if(y!==void 0)if(Array.isArray(d))for(let R=0,L=c.length;R<L;R++){const $=c[R],O=d[$.materialIndex],z=Math.max($.start,A.start),V=Math.min(y.count,Math.min($.start+$.count,A.start+A.count));for(let j=z,K=V;j<K;j+=3){const Z=j,q=j+1,ie=j+2;a=checkGeometryIntersection(this,O,t,o,S,x,w,Z,q,ie),a&&(a.faceIndex=Math.floor(j/3),a.face.materialIndex=$.materialIndex,n.push(a))}}else{const R=Math.max(0,A.start),L=Math.min(y.count,A.start+A.count);for(let $=R,O=L;$<O;$+=3){const z=$,V=$+1,j=$+2;a=checkGeometryIntersection(this,d,t,o,S,x,w,z,V,j),a&&(a.faceIndex=Math.floor($/3),n.push(a))}}}}function checkIntersection(r,t,n,o,a,l,d,g){let y;if(t.side===BackSide?y=o.intersectTriangle(d,l,a,!0,g):y=o.intersectTriangle(a,l,d,t.side===FrontSide,g),y===null)return null;_intersectionPointWorld.copy(g),_intersectionPointWorld.applyMatrix4(r.matrixWorld);const S=n.ray.origin.distanceTo(_intersectionPointWorld);return S<n.near||S>n.far?null:{distance:S,point:_intersectionPointWorld.clone(),object:r}}function checkGeometryIntersection(r,t,n,o,a,l,d,g,y,S){r.getVertexPosition(g,_vA$1),r.getVertexPosition(y,_vB$1),r.getVertexPosition(S,_vC$1);const x=checkIntersection(r,t,n,o,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(x){a&&(_uvA$1.fromBufferAttribute(a,g),_uvB$1.fromBufferAttribute(a,y),_uvC$1.fromBufferAttribute(a,S),x.uv=Triangle$1.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),l&&(_uvA$1.fromBufferAttribute(l,g),_uvB$1.fromBufferAttribute(l,y),_uvC$1.fromBufferAttribute(l,S),x.uv1=Triangle$1.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),x.uv2=x.uv1),d&&(_normalA.fromBufferAttribute(d,g),_normalB.fromBufferAttribute(d,y),_normalC.fromBufferAttribute(d,S),x.normal=Triangle$1.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),x.normal.dot(o.direction)>0&&x.normal.multiplyScalar(-1));const w={a:g,b:y,c:S,normal:new Vector3,materialIndex:0};Triangle$1.getNormal(_vA$1,_vB$1,_vC$1,w.normal),x.face=w}return x}class BoxGeometry extends BufferGeometry{constructor(t=1,n=1,o=1,a=1,l=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:o,widthSegments:a,heightSegments:l,depthSegments:d};const g=this;a=Math.floor(a),l=Math.floor(l),d=Math.floor(d);const y=[],S=[],x=[],w=[];let c=0,A=0;R("z","y","x",-1,-1,o,n,t,d,l,0),R("z","y","x",1,-1,o,n,-t,d,l,1),R("x","z","y",1,1,t,o,n,a,d,2),R("x","z","y",1,-1,t,o,-n,a,d,3),R("x","y","z",1,-1,t,n,o,a,l,4),R("x","y","z",-1,-1,t,n,-o,a,l,5),this.setIndex(y),this.setAttribute("position",new Float32BufferAttribute(S,3)),this.setAttribute("normal",new Float32BufferAttribute(x,3)),this.setAttribute("uv",new Float32BufferAttribute(w,2));function R(L,$,O,z,V,j,K,Z,q,ie,te){const oe=j/q,re=K/ie,he=j/2,_e=K/2,me=Z/2,be=q+1,Q=ie+1;let Ne=0,Ee=0;const Ge=new Vector3;for(let it=0;it<Q;it++){const Te=it*re-_e;for(let Ke=0;Ke<be;Ke++){const Tt=Ke*oe-he;Ge[L]=Tt*z,Ge[$]=Te*V,Ge[O]=me,S.push(Ge.x,Ge.y,Ge.z),Ge[L]=0,Ge[$]=0,Ge[O]=Z>0?1:-1,x.push(Ge.x,Ge.y,Ge.z),w.push(Ke/q),w.push(1-it/ie),Ne+=1}}for(let it=0;it<ie;it++)for(let Te=0;Te<q;Te++){const Ke=c+Te+be*it,Tt=c+Te+be*(it+1),Lt=c+(Te+1)+be*(it+1),Qt=c+(Te+1)+be*it;y.push(Ke,Tt,Qt),y.push(Tt,Lt,Qt),Ee+=6}g.addGroup(A,Ee,te),A+=Ee,c+=Ne}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new BoxGeometry(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function cloneUniforms(r){const t={};for(const n in r){t[n]={};for(const o in r[n]){const a=r[n][o];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][o]=null):t[n][o]=a.clone():Array.isArray(a)?t[n][o]=a.slice():t[n][o]=a}}return t}function mergeUniforms(r){const t={};for(let n=0;n<r.length;n++){const o=cloneUniforms(r[n]);for(const a in o)t[a]=o[a]}return t}function cloneUniformsGroups(r){const t=[];for(let n=0;n<r.length;n++)t.push(r[n].clone());return t}function getUnlitUniformColorSpace(r){return r.getRenderTarget()===null?r.outputColorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cloneUniforms(t.uniforms),this.uniformsGroups=cloneUniformsGroups(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const d=this.uniforms[a].value;d&&d.isTexture?n.uniforms[a]={type:"t",value:d.toJSON(t).uuid}:d&&d.isColor?n.uniforms[a]={type:"c",value:d.getHex()}:d&&d.isVector2?n.uniforms[a]={type:"v2",value:d.toArray()}:d&&d.isVector3?n.uniforms[a]={type:"v3",value:d.toArray()}:d&&d.isVector4?n.uniforms[a]={type:"v4",value:d.toArray()}:d&&d.isMatrix3?n.uniforms[a]={type:"m3",value:d.toArray()}:d&&d.isMatrix4?n.uniforms[a]={type:"m4",value:d.toArray()}:n.uniforms[a]={value:d}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const o={};for(const a in this.extensions)this.extensions[a]===!0&&(o[a]=!0);return Object.keys(o).length>0&&(n.extensions=o),n}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(t=50,n=1,o=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=o,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=RAD2DEG*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,n,o,a,l,d){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=o,this.view.offsetY=a,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,o=2*n,a=this.aspect*o,l=-.5*a;const d=this.view;if(this.view!==null&&this.view.enabled){const y=d.fullWidth,S=d.fullHeight;l+=d.offsetX*a/y,n-=d.offsetY*o/S,a*=d.width/y,o*=d.height/S}const g=this.filmOffset;g!==0&&(l+=t*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+a,n,n-o,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(t,n,o){super(),this.type="CubeCamera",this.renderTarget=o,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new PerspectiveCamera(fov,aspect,t,n);a.layers=this.layers,this.add(a);const l=new PerspectiveCamera(fov,aspect,t,n);l.layers=this.layers,this.add(l);const d=new PerspectiveCamera(fov,aspect,t,n);d.layers=this.layers,this.add(d);const g=new PerspectiveCamera(fov,aspect,t,n);g.layers=this.layers,this.add(g);const y=new PerspectiveCamera(fov,aspect,t,n);y.layers=this.layers,this.add(y);const S=new PerspectiveCamera(fov,aspect,t,n);S.layers=this.layers,this.add(S)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[o,a,l,d,g,y]=n;for(const S of n)this.remove(S);if(t===WebGLCoordinateSystem)o.up.set(0,1,0),o.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),d.up.set(0,0,1),d.lookAt(0,-1,0),g.up.set(0,1,0),g.lookAt(0,0,1),y.up.set(0,1,0),y.lookAt(0,0,-1);else if(t===WebGPUCoordinateSystem)o.up.set(0,-1,0),o.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),d.up.set(0,0,-1),d.lookAt(0,-1,0),g.up.set(0,-1,0),g.lookAt(0,0,1),y.up.set(0,-1,0),y.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const S of n)this.add(S),S.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:o,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[l,d,g,y,S,x]=this.children,w=t.getRenderTarget(),c=t.getActiveCubeFace(),A=t.getActiveMipmapLevel(),R=t.xr.enabled;t.xr.enabled=!1;const L=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,t.setRenderTarget(o,0,a),t.render(n,l),t.setRenderTarget(o,1,a),t.render(n,d),t.setRenderTarget(o,2,a),t.render(n,g),t.setRenderTarget(o,3,a),t.render(n,y),t.setRenderTarget(o,4,a),t.render(n,S),o.texture.generateMipmaps=L,t.setRenderTarget(o,5,a),t.render(n,x),t.setRenderTarget(w,c,A),t.xr.enabled=R,o.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(t,n,o,a,l,d,g,y,S,x){t=t!==void 0?t:[],n=n!==void 0?n:CubeReflectionMapping,super(t,n,o,a,l,d,g,y,S,x),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const o={width:t,height:t,depth:1},a=[o,o,o,o,o,o];n.encoding!==void 0&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(a,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:LinearFilter}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const o={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new BoxGeometry(5,5,5),l=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:BackSide,blending:NoBlending});l.uniforms.tEquirect.value=n;const d=new Mesh(a,l),g=n.minFilter;return n.minFilter===LinearMipmapLinearFilter&&(n.minFilter=LinearFilter),new CubeCamera(1,10,this).update(t,d),n.minFilter=g,d.geometry.dispose(),d.material.dispose(),this}clear(t,n,o,a){const l=t.getRenderTarget();for(let d=0;d<6;d++)t.setRenderTarget(this,d),t.clear(n,o,a);t.setRenderTarget(l)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(t=new Vector3(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,o,a){return this.normal.set(t,n,o),this.constant=a,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,o){const a=_vector1.subVectors(o,n).cross(_vector2.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const o=t.delta(_vector1),a=this.normal.dot(o);if(a===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const l=-(t.start.dot(this.normal)+this.constant)/a;return l<0||l>1?null:n.copy(t.start).addScaledVector(o,l)}intersectsLine(t){const n=this.distanceToPoint(t.start),o=this.distanceToPoint(t.end);return n<0&&o>0||o<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const o=n||_normalMatrix.getNormalMatrix(t),a=this.coplanarPoint(_vector1).applyMatrix4(t),l=this.normal.applyMatrix3(o).normalize();return this.constant=-a.dot(l),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$4=new Sphere,_vector$6=new Vector3;class Frustum{constructor(t=new Plane,n=new Plane,o=new Plane,a=new Plane,l=new Plane,d=new Plane){this.planes=[t,n,o,a,l,d]}set(t,n,o,a,l,d){const g=this.planes;return g[0].copy(t),g[1].copy(n),g[2].copy(o),g[3].copy(a),g[4].copy(l),g[5].copy(d),this}copy(t){const n=this.planes;for(let o=0;o<6;o++)n[o].copy(t.planes[o]);return this}setFromProjectionMatrix(t,n=WebGLCoordinateSystem){const o=this.planes,a=t.elements,l=a[0],d=a[1],g=a[2],y=a[3],S=a[4],x=a[5],w=a[6],c=a[7],A=a[8],R=a[9],L=a[10],$=a[11],O=a[12],z=a[13],V=a[14],j=a[15];if(o[0].setComponents(y-l,c-S,$-A,j-O).normalize(),o[1].setComponents(y+l,c+S,$+A,j+O).normalize(),o[2].setComponents(y+d,c+x,$+R,j+z).normalize(),o[3].setComponents(y-d,c-x,$-R,j-z).normalize(),o[4].setComponents(y-g,c-w,$-L,j-V).normalize(),n===WebGLCoordinateSystem)o[5].setComponents(y+g,c+w,$+L,j+V).normalize();else if(n===WebGPUCoordinateSystem)o[5].setComponents(g,w,L,V).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),_sphere$4.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$4.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(_sphere$4)}intersectsSprite(t){return _sphere$4.center.set(0,0,0),_sphere$4.radius=.7071067811865476,_sphere$4.applyMatrix4(t.matrixWorld),this.intersectsSphere(_sphere$4)}intersectsSphere(t){const n=this.planes,o=t.center,a=-t.radius;for(let l=0;l<6;l++)if(n[l].distanceToPoint(o)<a)return!1;return!0}intersectsBox(t){const n=this.planes;for(let o=0;o<6;o++){const a=n[o];if(_vector$6.x=a.normal.x>0?t.max.x:t.min.x,_vector$6.y=a.normal.y>0?t.max.y:t.min.y,_vector$6.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let o=0;o<6;o++)if(n[o].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let r=null,t=!1,n=null,o=null;function a(l,d){n(l,d),o=r.requestAnimationFrame(a)}return{start:function(){t!==!0&&n!==null&&(o=r.requestAnimationFrame(a),t=!0)},stop:function(){r.cancelAnimationFrame(o),t=!1},setAnimationLoop:function(l){n=l},setContext:function(l){r=l}}}function WebGLAttributes(r,t){const n=t.isWebGL2,o=new WeakMap;function a(S,x){const w=S.array,c=S.usage,A=r.createBuffer();r.bindBuffer(x,A),r.bufferData(x,w,c),S.onUploadCallback();let R;if(w instanceof Float32Array)R=r.FLOAT;else if(w instanceof Uint16Array)if(S.isFloat16BufferAttribute)if(n)R=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else R=r.UNSIGNED_SHORT;else if(w instanceof Int16Array)R=r.SHORT;else if(w instanceof Uint32Array)R=r.UNSIGNED_INT;else if(w instanceof Int32Array)R=r.INT;else if(w instanceof Int8Array)R=r.BYTE;else if(w instanceof Uint8Array)R=r.UNSIGNED_BYTE;else if(w instanceof Uint8ClampedArray)R=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+w);return{buffer:A,type:R,bytesPerElement:w.BYTES_PER_ELEMENT,version:S.version}}function l(S,x,w){const c=x.array,A=x.updateRange;r.bindBuffer(w,S),A.count===-1?r.bufferSubData(w,0,c):(n?r.bufferSubData(w,A.offset*c.BYTES_PER_ELEMENT,c,A.offset,A.count):r.bufferSubData(w,A.offset*c.BYTES_PER_ELEMENT,c.subarray(A.offset,A.offset+A.count)),A.count=-1),x.onUploadCallback()}function d(S){return S.isInterleavedBufferAttribute&&(S=S.data),o.get(S)}function g(S){S.isInterleavedBufferAttribute&&(S=S.data);const x=o.get(S);x&&(r.deleteBuffer(x.buffer),o.delete(S))}function y(S,x){if(S.isGLBufferAttribute){const c=o.get(S);(!c||c.version<S.version)&&o.set(S,{buffer:S.buffer,type:S.type,bytesPerElement:S.elementSize,version:S.version});return}S.isInterleavedBufferAttribute&&(S=S.data);const w=o.get(S);w===void 0?o.set(S,a(S,x)):w.version<S.version&&(l(w.buffer,S,x),w.version=S.version)}return{get:d,remove:g,update:y}}class PlaneGeometry extends BufferGeometry{constructor(t=1,n=1,o=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:o,heightSegments:a};const l=t/2,d=n/2,g=Math.floor(o),y=Math.floor(a),S=g+1,x=y+1,w=t/g,c=n/y,A=[],R=[],L=[],$=[];for(let O=0;O<x;O++){const z=O*c-d;for(let V=0;V<S;V++){const j=V*w-l;R.push(j,-z,0),L.push(0,0,1),$.push(V/g),$.push(1-O/y)}}for(let O=0;O<y;O++)for(let z=0;z<g;z++){const V=z+S*O,j=z+S*(O+1),K=z+1+S*(O+1),Z=z+1+S*O;A.push(V,j,Z),A.push(j,K,Z)}this.setIndex(A),this.setAttribute("position",new Float32BufferAttribute(R,3)),this.setAttribute("normal",new Float32BufferAttribute(L,3)),this.setAttribute("uv",new Float32BufferAttribute($,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new PlaneGeometry(t.width,t.height,t.widthSegments,t.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(r,t,n,o,a,l,d){const g=new Color(0);let y=l===!0?0:1,S,x,w=null,c=0,A=null;function R($,O){let z=!1,V=O.isScene===!0?O.background:null;V&&V.isTexture&&(V=(O.backgroundBlurriness>0?n:t).get(V)),V===null?L(g,y):V&&V.isColor&&(L(V,1),z=!0);const j=r.xr.getEnvironmentBlendMode();j==="additive"?o.buffers.color.setClear(0,0,0,1,d):j==="alpha-blend"&&o.buffers.color.setClear(0,0,0,0,d),(r.autoClear||z)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),V&&(V.isCubeTexture||V.mapping===CubeUVReflectionMapping)?(x===void 0&&(x=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(K,Z,q){this.matrixWorld.copyPosition(q.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(x)),x.material.uniforms.envMap.value=V,x.material.uniforms.flipEnvMap.value=V.isCubeTexture&&V.isRenderTargetTexture===!1?-1:1,x.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,x.material.toneMapped=ColorManagement.getTransfer(V.colorSpace)!==SRGBTransfer,(w!==V||c!==V.version||A!==r.toneMapping)&&(x.material.needsUpdate=!0,w=V,c=V.version,A=r.toneMapping),x.layers.enableAll(),$.unshift(x,x.geometry,x.material,0,0,null)):V&&V.isTexture&&(S===void 0&&(S=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),Object.defineProperty(S.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(S)),S.material.uniforms.t2D.value=V,S.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,S.material.toneMapped=ColorManagement.getTransfer(V.colorSpace)!==SRGBTransfer,V.matrixAutoUpdate===!0&&V.updateMatrix(),S.material.uniforms.uvTransform.value.copy(V.matrix),(w!==V||c!==V.version||A!==r.toneMapping)&&(S.material.needsUpdate=!0,w=V,c=V.version,A=r.toneMapping),S.layers.enableAll(),$.unshift(S,S.geometry,S.material,0,0,null))}function L($,O){$.getRGB(_rgb,getUnlitUniformColorSpace(r)),o.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,O,d)}return{getClearColor:function(){return g},setClearColor:function($,O=1){g.set($),y=O,L(g,y)},getClearAlpha:function(){return y},setClearAlpha:function($){y=$,L(g,y)},render:R}}function WebGLBindingStates(r,t,n,o){const a=r.getParameter(r.MAX_VERTEX_ATTRIBS),l=o.isWebGL2?null:t.get("OES_vertex_array_object"),d=o.isWebGL2||l!==null,g={},y=$(null);let S=y,x=!1;function w(me,be,Q,Ne,Ee){let Ge=!1;if(d){const it=L(Ne,Q,be);S!==it&&(S=it,A(S.object)),Ge=O(me,Ne,Q,Ee),Ge&&z(me,Ne,Q,Ee)}else{const it=be.wireframe===!0;(S.geometry!==Ne.id||S.program!==Q.id||S.wireframe!==it)&&(S.geometry=Ne.id,S.program=Q.id,S.wireframe=it,Ge=!0)}Ee!==null&&n.update(Ee,r.ELEMENT_ARRAY_BUFFER),(Ge||x)&&(x=!1,ie(me,be,Q,Ne),Ee!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.get(Ee).buffer))}function c(){return o.isWebGL2?r.createVertexArray():l.createVertexArrayOES()}function A(me){return o.isWebGL2?r.bindVertexArray(me):l.bindVertexArrayOES(me)}function R(me){return o.isWebGL2?r.deleteVertexArray(me):l.deleteVertexArrayOES(me)}function L(me,be,Q){const Ne=Q.wireframe===!0;let Ee=g[me.id];Ee===void 0&&(Ee={},g[me.id]=Ee);let Ge=Ee[be.id];Ge===void 0&&(Ge={},Ee[be.id]=Ge);let it=Ge[Ne];return it===void 0&&(it=$(c()),Ge[Ne]=it),it}function $(me){const be=[],Q=[],Ne=[];for(let Ee=0;Ee<a;Ee++)be[Ee]=0,Q[Ee]=0,Ne[Ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:be,enabledAttributes:Q,attributeDivisors:Ne,object:me,attributes:{},index:null}}function O(me,be,Q,Ne){const Ee=S.attributes,Ge=be.attributes;let it=0;const Te=Q.getAttributes();for(const Ke in Te)if(Te[Ke].location>=0){const Lt=Ee[Ke];let Qt=Ge[Ke];if(Qt===void 0&&(Ke==="instanceMatrix"&&me.instanceMatrix&&(Qt=me.instanceMatrix),Ke==="instanceColor"&&me.instanceColor&&(Qt=me.instanceColor)),Lt===void 0||Lt.attribute!==Qt||Qt&&Lt.data!==Qt.data)return!0;it++}return S.attributesNum!==it||S.index!==Ne}function z(me,be,Q,Ne){const Ee={},Ge=be.attributes;let it=0;const Te=Q.getAttributes();for(const Ke in Te)if(Te[Ke].location>=0){let Lt=Ge[Ke];Lt===void 0&&(Ke==="instanceMatrix"&&me.instanceMatrix&&(Lt=me.instanceMatrix),Ke==="instanceColor"&&me.instanceColor&&(Lt=me.instanceColor));const Qt={};Qt.attribute=Lt,Lt&&Lt.data&&(Qt.data=Lt.data),Ee[Ke]=Qt,it++}S.attributes=Ee,S.attributesNum=it,S.index=Ne}function V(){const me=S.newAttributes;for(let be=0,Q=me.length;be<Q;be++)me[be]=0}function j(me){K(me,0)}function K(me,be){const Q=S.newAttributes,Ne=S.enabledAttributes,Ee=S.attributeDivisors;Q[me]=1,Ne[me]===0&&(r.enableVertexAttribArray(me),Ne[me]=1),Ee[me]!==be&&((o.isWebGL2?r:t.get("ANGLE_instanced_arrays"))[o.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](me,be),Ee[me]=be)}function Z(){const me=S.newAttributes,be=S.enabledAttributes;for(let Q=0,Ne=be.length;Q<Ne;Q++)be[Q]!==me[Q]&&(r.disableVertexAttribArray(Q),be[Q]=0)}function q(me,be,Q,Ne,Ee,Ge,it){it===!0?r.vertexAttribIPointer(me,be,Q,Ee,Ge):r.vertexAttribPointer(me,be,Q,Ne,Ee,Ge)}function ie(me,be,Q,Ne){if(o.isWebGL2===!1&&(me.isInstancedMesh||Ne.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;V();const Ee=Ne.attributes,Ge=Q.getAttributes(),it=be.defaultAttributeValues;for(const Te in Ge){const Ke=Ge[Te];if(Ke.location>=0){let Tt=Ee[Te];if(Tt===void 0&&(Te==="instanceMatrix"&&me.instanceMatrix&&(Tt=me.instanceMatrix),Te==="instanceColor"&&me.instanceColor&&(Tt=me.instanceColor)),Tt!==void 0){const Lt=Tt.normalized,Qt=Tt.itemSize,Xe=n.get(Tt);if(Xe===void 0)continue;const Be=Xe.buffer,ue=Xe.type,Dt=Xe.bytesPerElement,Rt=o.isWebGL2===!0&&(ue===r.INT||ue===r.UNSIGNED_INT||Tt.gpuType===IntType);if(Tt.isInterleavedBufferAttribute){const Bt=Tt.data,Se=Bt.stride,Ye=Tt.offset;if(Bt.isInstancedInterleavedBuffer){for(let $e=0;$e<Ke.locationSize;$e++)K(Ke.location+$e,Bt.meshPerAttribute);me.isInstancedMesh!==!0&&Ne._maxInstanceCount===void 0&&(Ne._maxInstanceCount=Bt.meshPerAttribute*Bt.count)}else for(let $e=0;$e<Ke.locationSize;$e++)j(Ke.location+$e);r.bindBuffer(r.ARRAY_BUFFER,Be);for(let $e=0;$e<Ke.locationSize;$e++)q(Ke.location+$e,Qt/Ke.locationSize,ue,Lt,Se*Dt,(Ye+Qt/Ke.locationSize*$e)*Dt,Rt)}else{if(Tt.isInstancedBufferAttribute){for(let Bt=0;Bt<Ke.locationSize;Bt++)K(Ke.location+Bt,Tt.meshPerAttribute);me.isInstancedMesh!==!0&&Ne._maxInstanceCount===void 0&&(Ne._maxInstanceCount=Tt.meshPerAttribute*Tt.count)}else for(let Bt=0;Bt<Ke.locationSize;Bt++)j(Ke.location+Bt);r.bindBuffer(r.ARRAY_BUFFER,Be);for(let Bt=0;Bt<Ke.locationSize;Bt++)q(Ke.location+Bt,Qt/Ke.locationSize,ue,Lt,Qt*Dt,Qt/Ke.locationSize*Bt*Dt,Rt)}}else if(it!==void 0){const Lt=it[Te];if(Lt!==void 0)switch(Lt.length){case 2:r.vertexAttrib2fv(Ke.location,Lt);break;case 3:r.vertexAttrib3fv(Ke.location,Lt);break;case 4:r.vertexAttrib4fv(Ke.location,Lt);break;default:r.vertexAttrib1fv(Ke.location,Lt)}}}}Z()}function te(){he();for(const me in g){const be=g[me];for(const Q in be){const Ne=be[Q];for(const Ee in Ne)R(Ne[Ee].object),delete Ne[Ee];delete be[Q]}delete g[me]}}function oe(me){if(g[me.id]===void 0)return;const be=g[me.id];for(const Q in be){const Ne=be[Q];for(const Ee in Ne)R(Ne[Ee].object),delete Ne[Ee];delete be[Q]}delete g[me.id]}function re(me){for(const be in g){const Q=g[be];if(Q[me.id]===void 0)continue;const Ne=Q[me.id];for(const Ee in Ne)R(Ne[Ee].object),delete Ne[Ee];delete Q[me.id]}}function he(){_e(),x=!0,S!==y&&(S=y,A(S.object))}function _e(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:w,reset:he,resetDefaultState:_e,dispose:te,releaseStatesOfGeometry:oe,releaseStatesOfProgram:re,initAttributes:V,enableAttribute:j,disableUnusedAttributes:Z}}function WebGLBufferRenderer(r,t,n,o){const a=o.isWebGL2;let l;function d(S){l=S}function g(S,x){r.drawArrays(l,S,x),n.update(x,l,1)}function y(S,x,w){if(w===0)return;let c,A;if(a)c=r,A="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),A="drawArraysInstancedANGLE",c===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[A](l,S,x,w),n.update(x,l,w)}this.setMode=d,this.render=g,this.renderInstances=y}function WebGLCapabilities(r,t,n){let o;function a(){if(o!==void 0)return o;if(t.has("EXT_texture_filter_anisotropic")===!0){const q=t.get("EXT_texture_filter_anisotropic");o=r.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function l(q){if(q==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";q="mediump"}return q==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const d=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let g=n.precision!==void 0?n.precision:"highp";const y=l(g);y!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",y,"instead."),g=y);const S=d||t.has("WEBGL_draw_buffers"),x=n.logarithmicDepthBuffer===!0,w=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),c=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=r.getParameter(r.MAX_TEXTURE_SIZE),R=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),L=r.getParameter(r.MAX_VERTEX_ATTRIBS),$=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),O=r.getParameter(r.MAX_VARYING_VECTORS),z=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),V=c>0,j=d||t.has("OES_texture_float"),K=V&&j,Z=d?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:d,drawBuffers:S,getMaxAnisotropy:a,getMaxPrecision:l,precision:g,logarithmicDepthBuffer:x,maxTextures:w,maxVertexTextures:c,maxTextureSize:A,maxCubemapSize:R,maxAttributes:L,maxVertexUniforms:$,maxVaryings:O,maxFragmentUniforms:z,vertexTextures:V,floatFragmentTextures:j,floatVertexTextures:K,maxSamples:Z}}function WebGLClipping(r){const t=this;let n=null,o=0,a=!1,l=!1;const d=new Plane,g=new Matrix3,y={value:null,needsUpdate:!1};this.uniform=y,this.numPlanes=0,this.numIntersection=0,this.init=function(w,c){const A=w.length!==0||c||o!==0||a;return a=c,o=w.length,A},this.beginShadows=function(){l=!0,x(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(w,c){n=x(w,c,0)},this.setState=function(w,c,A){const R=w.clippingPlanes,L=w.clipIntersection,$=w.clipShadows,O=r.get(w);if(!a||R===null||R.length===0||l&&!$)l?x(null):S();else{const z=l?0:o,V=z*4;let j=O.clippingState||null;y.value=j,j=x(R,c,V,A);for(let K=0;K!==V;++K)j[K]=n[K];O.clippingState=j,this.numIntersection=L?this.numPlanes:0,this.numPlanes+=z}};function S(){y.value!==n&&(y.value=n,y.needsUpdate=o>0),t.numPlanes=o,t.numIntersection=0}function x(w,c,A,R){const L=w!==null?w.length:0;let $=null;if(L!==0){if($=y.value,R!==!0||$===null){const O=A+L*4,z=c.matrixWorldInverse;g.getNormalMatrix(z),($===null||$.length<O)&&($=new Float32Array(O));for(let V=0,j=A;V!==L;++V,j+=4)d.copy(w[V]).applyMatrix4(z,g),d.normal.toArray($,j),$[j+3]=d.constant}y.value=$,y.needsUpdate=!0}return t.numPlanes=L,t.numIntersection=0,$}}function WebGLCubeMaps(r){let t=new WeakMap;function n(d,g){return g===EquirectangularReflectionMapping?d.mapping=CubeReflectionMapping:g===EquirectangularRefractionMapping&&(d.mapping=CubeRefractionMapping),d}function o(d){if(d&&d.isTexture&&d.isRenderTargetTexture===!1){const g=d.mapping;if(g===EquirectangularReflectionMapping||g===EquirectangularRefractionMapping)if(t.has(d)){const y=t.get(d).texture;return n(y,d.mapping)}else{const y=d.image;if(y&&y.height>0){const S=new WebGLCubeRenderTarget(y.height/2);return S.fromEquirectangularTexture(r,d),t.set(d,S),d.addEventListener("dispose",a),n(S.texture,d.mapping)}else return null}}return d}function a(d){const g=d.target;g.removeEventListener("dispose",a);const y=t.get(g);y!==void 0&&(t.delete(g),y.dispose())}function l(){t=new WeakMap}return{get:o,dispose:l}}class OrthographicCamera extends Camera{constructor(t=-1,n=1,o=1,a=-1,l=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=o,this.bottom=a,this.near=l,this.far=d,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,o,a,l,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=o,this.view.offsetY=a,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let l=o-t,d=o+t,g=a+n,y=a-n;if(this.view!==null&&this.view.enabled){const S=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=S*this.view.offsetX,d=l+S*this.view.width,g-=x*this.view.offsetY,y=g-x*this.view.height}this.projectionMatrix.makeOrthographic(l,d,g,y,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,o=.1,a=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(t,o,a,l),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),t.scissorTest=!1,_setViewport(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===CubeReflectionMapping||t.mapping===CubeRefractionMapping?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel();const o=n||this._allocateTargets();return this._textureToCubeUV(t,o),this._applyPMREM(o),this._cleanup(o),o}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,o={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},a=_createRenderTarget(t,n,o);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(t,n,o);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(l)),this._blurMaterial=_getBlurShader(l,t,n)}return a}_compileMaterial(t){const n=new Mesh(this._lodPlanes[0],t);this._renderer.compile(n,_flatCamera)}_sceneToCubeUV(t,n,o,a){const g=new PerspectiveCamera(90,1,n,o),y=[1,-1,1,1,1,1],S=[1,1,1,-1,-1,-1],x=this._renderer,w=x.autoClear,c=x.toneMapping;x.getClearColor(_clearColor),x.toneMapping=NoToneMapping,x.autoClear=!1;const A=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),R=new Mesh(new BoxGeometry,A);let L=!1;const $=t.background;$?$.isColor&&(A.color.copy($),t.background=null,L=!0):(A.color.copy(_clearColor),L=!0);for(let O=0;O<6;O++){const z=O%3;z===0?(g.up.set(0,y[O],0),g.lookAt(S[O],0,0)):z===1?(g.up.set(0,0,y[O]),g.lookAt(0,S[O],0)):(g.up.set(0,y[O],0),g.lookAt(0,0,S[O]));const V=this._cubeSize;_setViewport(a,z*V,O>2?V:0,V,V),x.setRenderTarget(a),L&&x.render(R,g),x.render(t,g)}R.geometry.dispose(),R.material.dispose(),x.toneMapping=c,x.autoClear=w,t.background=$}_textureToCubeUV(t,n){const o=this._renderer,a=t.mapping===CubeReflectionMapping||t.mapping===CubeRefractionMapping;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const l=a?this._cubemapMaterial:this._equirectMaterial,d=new Mesh(this._lodPlanes[0],l),g=l.uniforms;g.envMap.value=t;const y=this._cubeSize;_setViewport(n,0,0,3*y,2*y),o.setRenderTarget(n),o.render(d,_flatCamera)}_applyPMREM(t){const n=this._renderer,o=n.autoClear;n.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const l=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),d=_axisDirections[(a-1)%_axisDirections.length];this._blur(t,a-1,a,l,d)}n.autoClear=o}_blur(t,n,o,a,l){const d=this._pingPongRenderTarget;this._halfBlur(t,d,n,o,a,"latitudinal",l),this._halfBlur(d,t,o,o,a,"longitudinal",l)}_halfBlur(t,n,o,a,l,d,g){const y=this._renderer,S=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const x=3,w=new Mesh(this._lodPlanes[a],S),c=S.uniforms,A=this._sizeLods[o]-1,R=isFinite(l)?Math.PI/(2*A):2*Math.PI/(2*MAX_SAMPLES-1),L=l/R,$=isFinite(l)?1+Math.floor(x*L):MAX_SAMPLES;$>MAX_SAMPLES&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${$} samples when the maximum is set to ${MAX_SAMPLES}`);const O=[];let z=0;for(let q=0;q<MAX_SAMPLES;++q){const ie=q/L,te=Math.exp(-ie*ie/2);O.push(te),q===0?z+=te:q<$&&(z+=2*te)}for(let q=0;q<O.length;q++)O[q]=O[q]/z;c.envMap.value=t.texture,c.samples.value=$,c.weights.value=O,c.latitudinal.value=d==="latitudinal",g&&(c.poleAxis.value=g);const{_lodMax:V}=this;c.dTheta.value=R,c.mipInt.value=V-o;const j=this._sizeLods[a],K=3*j*(a>V-LOD_MIN?a-V+LOD_MIN:0),Z=4*(this._cubeSize-j);_setViewport(n,K,Z,3*j,2*j),y.setRenderTarget(n),y.render(w,_flatCamera)}}function _createPlanes(r){const t=[],n=[],o=[];let a=r;const l=r-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let d=0;d<l;d++){const g=Math.pow(2,a);n.push(g);let y=1/g;d>r-LOD_MIN?y=EXTRA_LOD_SIGMA[d-r+LOD_MIN-1]:d===0&&(y=0),o.push(y);const S=1/(g-2),x=-S,w=1+S,c=[x,x,w,x,w,w,x,x,w,w,x,w],A=6,R=6,L=3,$=2,O=1,z=new Float32Array(L*R*A),V=new Float32Array($*R*A),j=new Float32Array(O*R*A);for(let Z=0;Z<A;Z++){const q=Z%3*2/3-1,ie=Z>2?0:-1,te=[q,ie,0,q+2/3,ie,0,q+2/3,ie+1,0,q,ie,0,q+2/3,ie+1,0,q,ie+1,0];z.set(te,L*R*Z),V.set(c,$*R*Z);const oe=[Z,Z,Z,Z,Z,Z];j.set(oe,O*R*Z)}const K=new BufferGeometry;K.setAttribute("position",new BufferAttribute(z,L)),K.setAttribute("uv",new BufferAttribute(V,$)),K.setAttribute("faceIndex",new BufferAttribute(j,O)),t.push(K),a>LOD_MIN&&a--}return{lodPlanes:t,sizeLods:n,sigmas:o}}function _createRenderTarget(r,t,n){const o=new WebGLRenderTarget(r,t,n);return o.texture.mapping=CubeUVReflectionMapping,o.texture.name="PMREM.cubeUv",o.scissorTest=!0,o}function _setViewport(r,t,n,o,a){r.viewport.set(t,n,o,a),r.scissor.set(t,n,o,a)}function _getBlurShader(r,t,n){const o=new Float32Array(MAX_SAMPLES),a=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(r){let t=new WeakMap,n=null;function o(g){if(g&&g.isTexture){const y=g.mapping,S=y===EquirectangularReflectionMapping||y===EquirectangularRefractionMapping,x=y===CubeReflectionMapping||y===CubeRefractionMapping;if(S||x)if(g.isRenderTargetTexture&&g.needsPMREMUpdate===!0){g.needsPMREMUpdate=!1;let w=t.get(g);return n===null&&(n=new PMREMGenerator(r)),w=S?n.fromEquirectangular(g,w):n.fromCubemap(g,w),t.set(g,w),w.texture}else{if(t.has(g))return t.get(g).texture;{const w=g.image;if(S&&w&&w.height>0||x&&w&&a(w)){n===null&&(n=new PMREMGenerator(r));const c=S?n.fromEquirectangular(g):n.fromCubemap(g);return t.set(g,c),g.addEventListener("dispose",l),c.texture}else return null}}}return g}function a(g){let y=0;const S=6;for(let x=0;x<S;x++)g[x]!==void 0&&y++;return y===S}function l(g){const y=g.target;y.removeEventListener("dispose",l);const S=t.get(y);S!==void 0&&(t.delete(y),S.dispose())}function d(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:o,dispose:d}}function WebGLExtensions(r){const t={};function n(o){if(t[o]!==void 0)return t[o];let a;switch(o){case"WEBGL_depth_texture":a=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=r.getExtension(o)}return t[o]=a,a}return{has:function(o){return n(o)!==null},init:function(o){o.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(o){const a=n(o);return a===null&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),a}}}function WebGLGeometries(r,t,n,o){const a={},l=new WeakMap;function d(w){const c=w.target;c.index!==null&&t.remove(c.index);for(const R in c.attributes)t.remove(c.attributes[R]);for(const R in c.morphAttributes){const L=c.morphAttributes[R];for(let $=0,O=L.length;$<O;$++)t.remove(L[$])}c.removeEventListener("dispose",d),delete a[c.id];const A=l.get(c);A&&(t.remove(A),l.delete(c)),o.releaseStatesOfGeometry(c),c.isInstancedBufferGeometry===!0&&delete c._maxInstanceCount,n.memory.geometries--}function g(w,c){return a[c.id]===!0||(c.addEventListener("dispose",d),a[c.id]=!0,n.memory.geometries++),c}function y(w){const c=w.attributes;for(const R in c)t.update(c[R],r.ARRAY_BUFFER);const A=w.morphAttributes;for(const R in A){const L=A[R];for(let $=0,O=L.length;$<O;$++)t.update(L[$],r.ARRAY_BUFFER)}}function S(w){const c=[],A=w.index,R=w.attributes.position;let L=0;if(A!==null){const z=A.array;L=A.version;for(let V=0,j=z.length;V<j;V+=3){const K=z[V+0],Z=z[V+1],q=z[V+2];c.push(K,Z,Z,q,q,K)}}else if(R!==void 0){const z=R.array;L=R.version;for(let V=0,j=z.length/3-1;V<j;V+=3){const K=V+0,Z=V+1,q=V+2;c.push(K,Z,Z,q,q,K)}}else return;const $=new(arrayNeedsUint32(c)?Uint32BufferAttribute:Uint16BufferAttribute)(c,1);$.version=L;const O=l.get(w);O&&t.remove(O),l.set(w,$)}function x(w){const c=l.get(w);if(c){const A=w.index;A!==null&&c.version<A.version&&S(w)}else S(w);return l.get(w)}return{get:g,update:y,getWireframeAttribute:x}}function WebGLIndexedBufferRenderer(r,t,n,o){const a=o.isWebGL2;let l;function d(c){l=c}let g,y;function S(c){g=c.type,y=c.bytesPerElement}function x(c,A){r.drawElements(l,A,g,c*y),n.update(A,l,1)}function w(c,A,R){if(R===0)return;let L,$;if(a)L=r,$="drawElementsInstanced";else if(L=t.get("ANGLE_instanced_arrays"),$="drawElementsInstancedANGLE",L===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}L[$](l,A,g,c*y,R),n.update(A,l,R)}this.setMode=d,this.setIndex=S,this.render=x,this.renderInstances=w}function WebGLInfo(r){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function o(l,d,g){switch(n.calls++,d){case r.TRIANGLES:n.triangles+=g*(l/3);break;case r.LINES:n.lines+=g*(l/2);break;case r.LINE_STRIP:n.lines+=g*(l-1);break;case r.LINE_LOOP:n.lines+=g*l;break;case r.POINTS:n.points+=g*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function a(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:a,update:o}}function numericalSort(r,t){return r[0]-t[0]}function absNumericalSort(r,t){return Math.abs(t[1])-Math.abs(r[1])}function WebGLMorphtargets(r,t,n){const o={},a=new Float32Array(8),l=new WeakMap,d=new Vector4,g=[];for(let S=0;S<8;S++)g[S]=[S,0];function y(S,x,w){const c=S.morphTargetInfluences;if(t.isWebGL2===!0){const A=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,R=A!==void 0?A.length:0;let L=l.get(x);if(L===void 0||L.count!==R){let me=function(){he.dispose(),l.delete(x),x.removeEventListener("dispose",me)};L!==void 0&&L.texture.dispose();const z=x.morphAttributes.position!==void 0,V=x.morphAttributes.normal!==void 0,j=x.morphAttributes.color!==void 0,K=x.morphAttributes.position||[],Z=x.morphAttributes.normal||[],q=x.morphAttributes.color||[];let ie=0;z===!0&&(ie=1),V===!0&&(ie=2),j===!0&&(ie=3);let te=x.attributes.position.count*ie,oe=1;te>t.maxTextureSize&&(oe=Math.ceil(te/t.maxTextureSize),te=t.maxTextureSize);const re=new Float32Array(te*oe*4*R),he=new DataArrayTexture(re,te,oe,R);he.type=FloatType,he.needsUpdate=!0;const _e=ie*4;for(let be=0;be<R;be++){const Q=K[be],Ne=Z[be],Ee=q[be],Ge=te*oe*4*be;for(let it=0;it<Q.count;it++){const Te=it*_e;z===!0&&(d.fromBufferAttribute(Q,it),re[Ge+Te+0]=d.x,re[Ge+Te+1]=d.y,re[Ge+Te+2]=d.z,re[Ge+Te+3]=0),V===!0&&(d.fromBufferAttribute(Ne,it),re[Ge+Te+4]=d.x,re[Ge+Te+5]=d.y,re[Ge+Te+6]=d.z,re[Ge+Te+7]=0),j===!0&&(d.fromBufferAttribute(Ee,it),re[Ge+Te+8]=d.x,re[Ge+Te+9]=d.y,re[Ge+Te+10]=d.z,re[Ge+Te+11]=Ee.itemSize===4?d.w:1)}}L={count:R,texture:he,size:new Vector2(te,oe)},l.set(x,L),x.addEventListener("dispose",me)}let $=0;for(let z=0;z<c.length;z++)$+=c[z];const O=x.morphTargetsRelative?1:1-$;w.getUniforms().setValue(r,"morphTargetBaseInfluence",O),w.getUniforms().setValue(r,"morphTargetInfluences",c),w.getUniforms().setValue(r,"morphTargetsTexture",L.texture,n),w.getUniforms().setValue(r,"morphTargetsTextureSize",L.size)}else{const A=c===void 0?0:c.length;let R=o[x.id];if(R===void 0||R.length!==A){R=[];for(let V=0;V<A;V++)R[V]=[V,0];o[x.id]=R}for(let V=0;V<A;V++){const j=R[V];j[0]=V,j[1]=c[V]}R.sort(absNumericalSort);for(let V=0;V<8;V++)V<A&&R[V][1]?(g[V][0]=R[V][0],g[V][1]=R[V][1]):(g[V][0]=Number.MAX_SAFE_INTEGER,g[V][1]=0);g.sort(numericalSort);const L=x.morphAttributes.position,$=x.morphAttributes.normal;let O=0;for(let V=0;V<8;V++){const j=g[V],K=j[0],Z=j[1];K!==Number.MAX_SAFE_INTEGER&&Z?(L&&x.getAttribute("morphTarget"+V)!==L[K]&&x.setAttribute("morphTarget"+V,L[K]),$&&x.getAttribute("morphNormal"+V)!==$[K]&&x.setAttribute("morphNormal"+V,$[K]),a[V]=Z,O+=Z):(L&&x.hasAttribute("morphTarget"+V)===!0&&x.deleteAttribute("morphTarget"+V),$&&x.hasAttribute("morphNormal"+V)===!0&&x.deleteAttribute("morphNormal"+V),a[V]=0)}const z=x.morphTargetsRelative?1:1-O;w.getUniforms().setValue(r,"morphTargetBaseInfluence",z),w.getUniforms().setValue(r,"morphTargetInfluences",a)}}return{update:y}}function WebGLObjects(r,t,n,o){let a=new WeakMap;function l(y){const S=o.render.frame,x=y.geometry,w=t.get(y,x);if(a.get(w)!==S&&(t.update(w),a.set(w,S)),y.isInstancedMesh&&(y.hasEventListener("dispose",g)===!1&&y.addEventListener("dispose",g),a.get(y)!==S&&(n.update(y.instanceMatrix,r.ARRAY_BUFFER),y.instanceColor!==null&&n.update(y.instanceColor,r.ARRAY_BUFFER),a.set(y,S))),y.isSkinnedMesh){const c=y.skeleton;a.get(c)!==S&&(c.update(),a.set(c,S))}return w}function d(){a=new WeakMap}function g(y){const S=y.target;S.removeEventListener("dispose",g),n.remove(S.instanceMatrix),S.instanceColor!==null&&n.remove(S.instanceColor)}return{update:l,dispose:d}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(r,t,n){const o=r[0];if(o<=0||o>0)return r;const a=t*n;let l=arrayCacheF32[a];if(l===void 0&&(l=new Float32Array(a),arrayCacheF32[a]=l),t!==0){o.toArray(l,0);for(let d=1,g=0;d!==t;++d)g+=n,r[d].toArray(l,g)}return l}function arraysEqual(r,t){if(r.length!==t.length)return!1;for(let n=0,o=r.length;n<o;n++)if(r[n]!==t[n])return!1;return!0}function copyArray(r,t){for(let n=0,o=t.length;n<o;n++)r[n]=t[n]}function allocTexUnits(r,t){let n=arrayCacheI32[t];n===void 0&&(n=new Int32Array(t),arrayCacheI32[t]=n);for(let o=0;o!==t;++o)n[o]=r.allocateTextureUnit();return n}function setValueV1f(r,t){const n=this.cache;n[0]!==t&&(r.uniform1f(this.addr,t),n[0]=t)}function setValueV2f(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;r.uniform2fv(this.addr,t),copyArray(n,t)}}function setValueV3f(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(arraysEqual(n,t))return;r.uniform3fv(this.addr,t),copyArray(n,t)}}function setValueV4f(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;r.uniform4fv(this.addr,t),copyArray(n,t)}}function setValueM2(r,t){const n=this.cache,o=t.elements;if(o===void 0){if(arraysEqual(n,t))return;r.uniformMatrix2fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,o))return;mat2array.set(o),r.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(n,o)}}function setValueM3(r,t){const n=this.cache,o=t.elements;if(o===void 0){if(arraysEqual(n,t))return;r.uniformMatrix3fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,o))return;mat3array.set(o),r.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(n,o)}}function setValueM4(r,t){const n=this.cache,o=t.elements;if(o===void 0){if(arraysEqual(n,t))return;r.uniformMatrix4fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,o))return;mat4array.set(o),r.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(n,o)}}function setValueV1i(r,t){const n=this.cache;n[0]!==t&&(r.uniform1i(this.addr,t),n[0]=t)}function setValueV2i(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;r.uniform2iv(this.addr,t),copyArray(n,t)}}function setValueV3i(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(arraysEqual(n,t))return;r.uniform3iv(this.addr,t),copyArray(n,t)}}function setValueV4i(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;r.uniform4iv(this.addr,t),copyArray(n,t)}}function setValueV1ui(r,t){const n=this.cache;n[0]!==t&&(r.uniform1ui(this.addr,t),n[0]=t)}function setValueV2ui(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;r.uniform2uiv(this.addr,t),copyArray(n,t)}}function setValueV3ui(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(arraysEqual(n,t))return;r.uniform3uiv(this.addr,t),copyArray(n,t)}}function setValueV4ui(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;r.uniform4uiv(this.addr,t),copyArray(n,t)}}function setValueT1(r,t,n){const o=this.cache,a=n.allocateTextureUnit();o[0]!==a&&(r.uniform1i(this.addr,a),o[0]=a),n.setTexture2D(t||emptyTexture,a)}function setValueT3D1(r,t,n){const o=this.cache,a=n.allocateTextureUnit();o[0]!==a&&(r.uniform1i(this.addr,a),o[0]=a),n.setTexture3D(t||empty3dTexture,a)}function setValueT6(r,t,n){const o=this.cache,a=n.allocateTextureUnit();o[0]!==a&&(r.uniform1i(this.addr,a),o[0]=a),n.setTextureCube(t||emptyCubeTexture,a)}function setValueT2DArray1(r,t,n){const o=this.cache,a=n.allocateTextureUnit();o[0]!==a&&(r.uniform1i(this.addr,a),o[0]=a),n.setTexture2DArray(t||emptyArrayTexture,a)}function getSingularSetter(r){switch(r){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(r,t){r.uniform1fv(this.addr,t)}function setValueV2fArray(r,t){const n=flatten(t,this.size,2);r.uniform2fv(this.addr,n)}function setValueV3fArray(r,t){const n=flatten(t,this.size,3);r.uniform3fv(this.addr,n)}function setValueV4fArray(r,t){const n=flatten(t,this.size,4);r.uniform4fv(this.addr,n)}function setValueM2Array(r,t){const n=flatten(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,n)}function setValueM3Array(r,t){const n=flatten(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,n)}function setValueM4Array(r,t){const n=flatten(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,n)}function setValueV1iArray(r,t){r.uniform1iv(this.addr,t)}function setValueV2iArray(r,t){r.uniform2iv(this.addr,t)}function setValueV3iArray(r,t){r.uniform3iv(this.addr,t)}function setValueV4iArray(r,t){r.uniform4iv(this.addr,t)}function setValueV1uiArray(r,t){r.uniform1uiv(this.addr,t)}function setValueV2uiArray(r,t){r.uniform2uiv(this.addr,t)}function setValueV3uiArray(r,t){r.uniform3uiv(this.addr,t)}function setValueV4uiArray(r,t){r.uniform4uiv(this.addr,t)}function setValueT1Array(r,t,n){const o=this.cache,a=t.length,l=allocTexUnits(n,a);arraysEqual(o,l)||(r.uniform1iv(this.addr,l),copyArray(o,l));for(let d=0;d!==a;++d)n.setTexture2D(t[d]||emptyTexture,l[d])}function setValueT3DArray(r,t,n){const o=this.cache,a=t.length,l=allocTexUnits(n,a);arraysEqual(o,l)||(r.uniform1iv(this.addr,l),copyArray(o,l));for(let d=0;d!==a;++d)n.setTexture3D(t[d]||empty3dTexture,l[d])}function setValueT6Array(r,t,n){const o=this.cache,a=t.length,l=allocTexUnits(n,a);arraysEqual(o,l)||(r.uniform1iv(this.addr,l),copyArray(o,l));for(let d=0;d!==a;++d)n.setTextureCube(t[d]||emptyCubeTexture,l[d])}function setValueT2DArrayArray(r,t,n){const o=this.cache,a=t.length,l=allocTexUnits(n,a);arraysEqual(o,l)||(r.uniform1iv(this.addr,l),copyArray(o,l));for(let d=0;d!==a;++d)n.setTexture2DArray(t[d]||emptyArrayTexture,l[d])}function getPureArraySetter(r){switch(r){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(t,n,o){this.id=t,this.addr=o,this.cache=[],this.setValue=getSingularSetter(n.type)}}class PureArrayUniform{constructor(t,n,o){this.id=t,this.addr=o,this.cache=[],this.size=n.size,this.setValue=getPureArraySetter(n.type)}}class StructuredUniform{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,o){const a=this.seq;for(let l=0,d=a.length;l!==d;++l){const g=a[l];g.setValue(t,n[g.id],o)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(r,t){r.seq.push(t),r.map[t.id]=t}function parseUniform(r,t,n){const o=r.name,a=o.length;for(RePathPart.lastIndex=0;;){const l=RePathPart.exec(o),d=RePathPart.lastIndex;let g=l[1];const y=l[2]==="]",S=l[3];if(y&&(g=g|0),S===void 0||S==="["&&d+2===a){addUniform(n,S===void 0?new SingleUniform(g,r,t):new PureArrayUniform(g,r,t));break}else{let w=n.map[g];w===void 0&&(w=new StructuredUniform(g),addUniform(n,w)),n=w}}}class WebGLUniforms{constructor(t,n){this.seq=[],this.map={};const o=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let a=0;a<o;++a){const l=t.getActiveUniform(n,a),d=t.getUniformLocation(n,l.name);parseUniform(l,d,this)}}setValue(t,n,o,a){const l=this.map[n];l!==void 0&&l.setValue(t,o,a)}setOptional(t,n,o){const a=n[o];a!==void 0&&this.setValue(t,o,a)}static upload(t,n,o,a){for(let l=0,d=n.length;l!==d;++l){const g=n[l],y=o[g.id];y.needsUpdate!==!1&&g.setValue(t,y.value,a)}}static seqWithValue(t,n){const o=[];for(let a=0,l=t.length;a!==l;++a){const d=t[a];d.id in n&&o.push(d)}return o}}function WebGLShader(r,t,n){const o=r.createShader(t);return r.shaderSource(o,n),r.compileShader(o),o}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(r,t){const n=r.split(`
`),o=[],a=Math.max(t-6,0),l=Math.min(t+6,n.length);for(let d=a;d<l;d++){const g=d+1;o.push(`${g===t?">":" "} ${g}: ${n[d]}`)}return o.join(`
`)}function getEncodingComponents(r){const t=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),n=ColorManagement.getPrimaries(r);let o;switch(t===n?o="":t===P3Primaries&&n===Rec709Primaries?o="LinearDisplayP3ToLinearSRGB":t===Rec709Primaries&&n===P3Primaries&&(o="LinearSRGBToLinearDisplayP3"),r){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[o,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[o,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[o,"LinearTransferOETF"]}}function getShaderErrors(r,t,n){const o=r.getShaderParameter(t,r.COMPILE_STATUS),a=r.getShaderInfoLog(t).trim();if(o&&a==="")return"";const l=/ERROR: 0:(\d+)/.exec(a);if(l){const d=parseInt(l[1]);return n.toUpperCase()+`

`+a+`

`+handleSource(r.getShaderSource(t),d)}else return a}function getTexelEncodingFunction(r,t){const n=getEncodingComponents(t);return`vec4 ${r}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function getToneMappingFunction(r,t){let n;switch(t){case LinearToneMapping:n="Linear";break;case ReinhardToneMapping:n="Reinhard";break;case CineonToneMapping:n="OptimizedCineon";break;case ACESFilmicToneMapping:n="ACESFilmic";break;case CustomToneMapping:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+r+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function generateExtensions(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(r){const t=[];for(const n in r){const o=r[n];o!==!1&&t.push("#define "+n+" "+o)}return t.join(`
`)}function fetchAttributeLocations(r,t){const n={},o=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES);for(let a=0;a<o;a++){const l=r.getActiveAttrib(t,a),d=l.name;let g=1;l.type===r.FLOAT_MAT2&&(g=2),l.type===r.FLOAT_MAT3&&(g=3),l.type===r.FLOAT_MAT4&&(g=4),n[d]={type:l.type,location:r.getAttribLocation(t,d),locationSize:g}}return n}function filterEmptyLine(r){return r!==""}function replaceLightNums(r,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function replaceClippingPlaneNums(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(r){return r.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function includeReplacer(r,t){let n=ShaderChunk[t];if(n===void 0){const o=shaderChunkMap.get(t);if(o!==void 0)n=ShaderChunk[o],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,o);else throw new Error("Can not resolve #include <"+t+">")}return resolveIncludes(n)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(r){return r.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(r,t,n,o){let a="";for(let l=parseInt(t);l<parseInt(n);l++)a+=o.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return a}function generatePrecision(r){let t="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function generateShadowMapTypeDefine(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===PCFShadowMap?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===PCFSoftShadowMap?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===VSMShadowMap&&(t="SHADOWMAP_TYPE_VSM"),t}function generateEnvMapTypeDefine(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:t="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:t="ENVMAP_TYPE_CUBE_UV";break}return t}function generateEnvMapModeDefine(r){let t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case CubeRefractionMapping:t="ENVMAP_MODE_REFRACTION";break}return t}function generateEnvMapBlendingDefine(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case MultiplyOperation:t="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:t="ENVMAP_BLENDING_MIX";break;case AddOperation:t="ENVMAP_BLENDING_ADD";break}return t}function generateCubeUVSize(r){const t=r.envMapCubeUVHeight;if(t===null)return null;const n=Math.log2(t)-2,o=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:o,maxMip:n}}function WebGLProgram(r,t,n,o){const a=r.getContext(),l=n.defines;let d=n.vertexShader,g=n.fragmentShader;const y=generateShadowMapTypeDefine(n),S=generateEnvMapTypeDefine(n),x=generateEnvMapModeDefine(n),w=generateEnvMapBlendingDefine(n),c=generateCubeUVSize(n),A=n.isWebGL2?"":generateExtensions(n),R=generateDefines(l),L=a.createProgram();let $,O,z=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?($=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,R].filter(filterEmptyLine).join(`
`),$.length>0&&($+=`
`),O=[A,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,R].filter(filterEmptyLine).join(`
`),O.length>0&&(O+=`
`)):($=[generatePrecision(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,R,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+y:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),O=[A,generatePrecision(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,R,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+S:"",n.envMap?"#define "+x:"",n.envMap?"#define "+w:"",c?"#define CUBEUV_TEXEL_WIDTH "+c.texelWidth:"",c?"#define CUBEUV_TEXEL_HEIGHT "+c.texelHeight:"",c?"#define CUBEUV_MAX_MIP "+c.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+y:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",n.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",n.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),d=resolveIncludes(d),d=replaceLightNums(d,n),d=replaceClippingPlaneNums(d,n),g=resolveIncludes(g),g=replaceLightNums(g,n),g=replaceClippingPlaneNums(g,n),d=unrollLoops(d),g=unrollLoops(g),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(z=`#version 300 es
`,$=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+$,O=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O);const V=z+$+d,j=z+O+g,K=WebGLShader(a,a.VERTEX_SHADER,V),Z=WebGLShader(a,a.FRAGMENT_SHADER,j);a.attachShader(L,K),a.attachShader(L,Z),n.index0AttributeName!==void 0?a.bindAttribLocation(L,0,n.index0AttributeName):n.morphTargets===!0&&a.bindAttribLocation(L,0,"position"),a.linkProgram(L);function q(re){if(r.debug.checkShaderErrors){const he=a.getProgramInfoLog(L).trim(),_e=a.getShaderInfoLog(K).trim(),me=a.getShaderInfoLog(Z).trim();let be=!0,Q=!0;if(a.getProgramParameter(L,a.LINK_STATUS)===!1)if(be=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(a,L,K,Z);else{const Ne=getShaderErrors(a,K,"vertex"),Ee=getShaderErrors(a,Z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(L,a.VALIDATE_STATUS)+`

Program Info Log: `+he+`
`+Ne+`
`+Ee)}else he!==""?console.warn("THREE.WebGLProgram: Program Info Log:",he):(_e===""||me==="")&&(Q=!1);Q&&(re.diagnostics={runnable:be,programLog:he,vertexShader:{log:_e,prefix:$},fragmentShader:{log:me,prefix:O}})}a.deleteShader(K),a.deleteShader(Z),ie=new WebGLUniforms(a,L),te=fetchAttributeLocations(a,L)}let ie;this.getUniforms=function(){return ie===void 0&&q(this),ie};let te;this.getAttributes=function(){return te===void 0&&q(this),te};let oe=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return oe===!1&&(oe=a.getProgramParameter(L,COMPLETION_STATUS_KHR)),oe},this.destroy=function(){o.releaseStatesOfProgram(this),a.deleteProgram(L),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=programIdCount++,this.cacheKey=t,this.usedTimes=1,this.program=L,this.vertexShader=K,this.fragmentShader=Z,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,o=t.fragmentShader,a=this._getShaderStage(n),l=this._getShaderStage(o),d=this._getShaderCacheForMaterial(t);return d.has(a)===!1&&(d.add(a),a.usedTimes++),d.has(l)===!1&&(d.add(l),l.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const o of n)o.usedTimes--,o.usedTimes===0&&this.shaderCache.delete(o.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let o=n.get(t);return o===void 0&&(o=new Set,n.set(t,o)),o}_getShaderStage(t){const n=this.shaderCache;let o=n.get(t);return o===void 0&&(o=new WebGLShaderStage(t),n.set(t,o)),o}}class WebGLShaderStage{constructor(t){this.id=_id$1++,this.code=t,this.usedTimes=0}}function WebGLPrograms(r,t,n,o,a,l,d){const g=new Layers,y=new WebGLShaderCache,S=[],x=a.isWebGL2,w=a.logarithmicDepthBuffer,c=a.vertexTextures;let A=a.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function L(te){return te===0?"uv":`uv${te}`}function $(te,oe,re,he,_e){const me=he.fog,be=_e.geometry,Q=te.isMeshStandardMaterial?he.environment:null,Ne=(te.isMeshStandardMaterial?n:t).get(te.envMap||Q),Ee=Ne&&Ne.mapping===CubeUVReflectionMapping?Ne.image.height:null,Ge=R[te.type];te.precision!==null&&(A=a.getMaxPrecision(te.precision),A!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",A,"instead."));const it=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Te=it!==void 0?it.length:0;let Ke=0;be.morphAttributes.position!==void 0&&(Ke=1),be.morphAttributes.normal!==void 0&&(Ke=2),be.morphAttributes.color!==void 0&&(Ke=3);let Tt,Lt,Qt,Xe;if(Ge){const vi=ShaderLib[Ge];Tt=vi.vertexShader,Lt=vi.fragmentShader}else Tt=te.vertexShader,Lt=te.fragmentShader,y.update(te),Qt=y.getVertexShaderID(te),Xe=y.getFragmentShaderID(te);const Be=r.getRenderTarget(),ue=_e.isInstancedMesh===!0,Dt=!!te.map,Rt=!!te.matcap,Bt=!!Ne,Se=!!te.aoMap,Ye=!!te.lightMap,$e=!!te.bumpMap,st=!!te.normalMap,et=!!te.displacementMap,Fe=!!te.emissiveMap,tn=!!te.metalnessMap,Gt=!!te.roughnessMap,mt=te.anisotropy>0,en=te.clearcoat>0,Bn=te.iridescence>0,Le=te.sheen>0,Ae=te.transmission>0,ht=mt&&!!te.anisotropyMap,rn=en&&!!te.clearcoatMap,Kt=en&&!!te.clearcoatNormalMap,Wt=en&&!!te.clearcoatRoughnessMap,xn=Bn&&!!te.iridescenceMap,Mn=Bn&&!!te.iridescenceThicknessMap,kn=Le&&!!te.sheenColorMap,Zn=Le&&!!te.sheenRoughnessMap,yo=!!te.specularMap,gn=!!te.specularColorMap,oo=!!te.specularIntensityMap,Cr=Ae&&!!te.transmissionMap,Wr=Ae&&!!te.thicknessMap,Lr=!!te.gradientMap,qn=!!te.alphaMap,Oo=te.alphaTest>0,Ue=!!te.alphaHash,yn=!!te.extensions,Dn=!!be.attributes.uv1,Xt=!!be.attributes.uv2,Kn=!!be.attributes.uv3;let Yr=NoToneMapping;return te.toneMapped&&(Be===null||Be.isXRRenderTarget===!0)&&(Yr=r.toneMapping),{isWebGL2:x,shaderID:Ge,shaderType:te.type,shaderName:te.name,vertexShader:Tt,fragmentShader:Lt,defines:te.defines,customVertexShaderID:Qt,customFragmentShaderID:Xe,isRawShaderMaterial:te.isRawShaderMaterial===!0,glslVersion:te.glslVersion,precision:A,instancing:ue,instancingColor:ue&&_e.instanceColor!==null,supportsVertexTextures:c,outputColorSpace:Be===null?r.outputColorSpace:Be.isXRRenderTarget===!0?Be.texture.colorSpace:LinearSRGBColorSpace,map:Dt,matcap:Rt,envMap:Bt,envMapMode:Bt&&Ne.mapping,envMapCubeUVHeight:Ee,aoMap:Se,lightMap:Ye,bumpMap:$e,normalMap:st,displacementMap:c&&et,emissiveMap:Fe,normalMapObjectSpace:st&&te.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:st&&te.normalMapType===TangentSpaceNormalMap,metalnessMap:tn,roughnessMap:Gt,anisotropy:mt,anisotropyMap:ht,clearcoat:en,clearcoatMap:rn,clearcoatNormalMap:Kt,clearcoatRoughnessMap:Wt,iridescence:Bn,iridescenceMap:xn,iridescenceThicknessMap:Mn,sheen:Le,sheenColorMap:kn,sheenRoughnessMap:Zn,specularMap:yo,specularColorMap:gn,specularIntensityMap:oo,transmission:Ae,transmissionMap:Cr,thicknessMap:Wr,gradientMap:Lr,opaque:te.transparent===!1&&te.blending===NormalBlending,alphaMap:qn,alphaTest:Oo,alphaHash:Ue,combine:te.combine,mapUv:Dt&&L(te.map.channel),aoMapUv:Se&&L(te.aoMap.channel),lightMapUv:Ye&&L(te.lightMap.channel),bumpMapUv:$e&&L(te.bumpMap.channel),normalMapUv:st&&L(te.normalMap.channel),displacementMapUv:et&&L(te.displacementMap.channel),emissiveMapUv:Fe&&L(te.emissiveMap.channel),metalnessMapUv:tn&&L(te.metalnessMap.channel),roughnessMapUv:Gt&&L(te.roughnessMap.channel),anisotropyMapUv:ht&&L(te.anisotropyMap.channel),clearcoatMapUv:rn&&L(te.clearcoatMap.channel),clearcoatNormalMapUv:Kt&&L(te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Wt&&L(te.clearcoatRoughnessMap.channel),iridescenceMapUv:xn&&L(te.iridescenceMap.channel),iridescenceThicknessMapUv:Mn&&L(te.iridescenceThicknessMap.channel),sheenColorMapUv:kn&&L(te.sheenColorMap.channel),sheenRoughnessMapUv:Zn&&L(te.sheenRoughnessMap.channel),specularMapUv:yo&&L(te.specularMap.channel),specularColorMapUv:gn&&L(te.specularColorMap.channel),specularIntensityMapUv:oo&&L(te.specularIntensityMap.channel),transmissionMapUv:Cr&&L(te.transmissionMap.channel),thicknessMapUv:Wr&&L(te.thicknessMap.channel),alphaMapUv:qn&&L(te.alphaMap.channel),vertexTangents:!!be.attributes.tangent&&(st||mt),vertexColors:te.vertexColors,vertexAlphas:te.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,vertexUv1s:Dn,vertexUv2s:Xt,vertexUv3s:Kn,pointsUvs:_e.isPoints===!0&&!!be.attributes.uv&&(Dt||qn),fog:!!me,useFog:te.fog===!0,fogExp2:me&&me.isFogExp2,flatShading:te.flatShading===!0,sizeAttenuation:te.sizeAttenuation===!0,logarithmicDepthBuffer:w,skinning:_e.isSkinnedMesh===!0,morphTargets:be.morphAttributes.position!==void 0,morphNormals:be.morphAttributes.normal!==void 0,morphColors:be.morphAttributes.color!==void 0,morphTargetsCount:Te,morphTextureStride:Ke,numDirLights:oe.directional.length,numPointLights:oe.point.length,numSpotLights:oe.spot.length,numSpotLightMaps:oe.spotLightMap.length,numRectAreaLights:oe.rectArea.length,numHemiLights:oe.hemi.length,numDirLightShadows:oe.directionalShadowMap.length,numPointLightShadows:oe.pointShadowMap.length,numSpotLightShadows:oe.spotShadowMap.length,numSpotLightShadowsWithMaps:oe.numSpotLightShadowsWithMaps,numLightProbes:oe.numLightProbes,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:te.dithering,shadowMapEnabled:r.shadowMap.enabled&&re.length>0,shadowMapType:r.shadowMap.type,toneMapping:Yr,useLegacyLights:r._useLegacyLights,decodeVideoTexture:Dt&&te.map.isVideoTexture===!0&&ColorManagement.getTransfer(te.map.colorSpace)===SRGBTransfer,premultipliedAlpha:te.premultipliedAlpha,doubleSided:te.side===DoubleSide,flipSided:te.side===BackSide,useDepthPacking:te.depthPacking>=0,depthPacking:te.depthPacking||0,index0AttributeName:te.index0AttributeName,extensionDerivatives:yn&&te.extensions.derivatives===!0,extensionFragDepth:yn&&te.extensions.fragDepth===!0,extensionDrawBuffers:yn&&te.extensions.drawBuffers===!0,extensionShaderTextureLOD:yn&&te.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:x||o.has("EXT_frag_depth"),rendererExtensionDrawBuffers:x||o.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:x||o.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:o.has("KHR_parallel_shader_compile"),customProgramCacheKey:te.customProgramCacheKey()}}function O(te){const oe=[];if(te.shaderID?oe.push(te.shaderID):(oe.push(te.customVertexShaderID),oe.push(te.customFragmentShaderID)),te.defines!==void 0)for(const re in te.defines)oe.push(re),oe.push(te.defines[re]);return te.isRawShaderMaterial===!1&&(z(oe,te),V(oe,te),oe.push(r.outputColorSpace)),oe.push(te.customProgramCacheKey),oe.join()}function z(te,oe){te.push(oe.precision),te.push(oe.outputColorSpace),te.push(oe.envMapMode),te.push(oe.envMapCubeUVHeight),te.push(oe.mapUv),te.push(oe.alphaMapUv),te.push(oe.lightMapUv),te.push(oe.aoMapUv),te.push(oe.bumpMapUv),te.push(oe.normalMapUv),te.push(oe.displacementMapUv),te.push(oe.emissiveMapUv),te.push(oe.metalnessMapUv),te.push(oe.roughnessMapUv),te.push(oe.anisotropyMapUv),te.push(oe.clearcoatMapUv),te.push(oe.clearcoatNormalMapUv),te.push(oe.clearcoatRoughnessMapUv),te.push(oe.iridescenceMapUv),te.push(oe.iridescenceThicknessMapUv),te.push(oe.sheenColorMapUv),te.push(oe.sheenRoughnessMapUv),te.push(oe.specularMapUv),te.push(oe.specularColorMapUv),te.push(oe.specularIntensityMapUv),te.push(oe.transmissionMapUv),te.push(oe.thicknessMapUv),te.push(oe.combine),te.push(oe.fogExp2),te.push(oe.sizeAttenuation),te.push(oe.morphTargetsCount),te.push(oe.morphAttributeCount),te.push(oe.numDirLights),te.push(oe.numPointLights),te.push(oe.numSpotLights),te.push(oe.numSpotLightMaps),te.push(oe.numHemiLights),te.push(oe.numRectAreaLights),te.push(oe.numDirLightShadows),te.push(oe.numPointLightShadows),te.push(oe.numSpotLightShadows),te.push(oe.numSpotLightShadowsWithMaps),te.push(oe.numLightProbes),te.push(oe.shadowMapType),te.push(oe.toneMapping),te.push(oe.numClippingPlanes),te.push(oe.numClipIntersection),te.push(oe.depthPacking)}function V(te,oe){g.disableAll(),oe.isWebGL2&&g.enable(0),oe.supportsVertexTextures&&g.enable(1),oe.instancing&&g.enable(2),oe.instancingColor&&g.enable(3),oe.matcap&&g.enable(4),oe.envMap&&g.enable(5),oe.normalMapObjectSpace&&g.enable(6),oe.normalMapTangentSpace&&g.enable(7),oe.clearcoat&&g.enable(8),oe.iridescence&&g.enable(9),oe.alphaTest&&g.enable(10),oe.vertexColors&&g.enable(11),oe.vertexAlphas&&g.enable(12),oe.vertexUv1s&&g.enable(13),oe.vertexUv2s&&g.enable(14),oe.vertexUv3s&&g.enable(15),oe.vertexTangents&&g.enable(16),oe.anisotropy&&g.enable(17),oe.alphaHash&&g.enable(18),te.push(g.mask),g.disableAll(),oe.fog&&g.enable(0),oe.useFog&&g.enable(1),oe.flatShading&&g.enable(2),oe.logarithmicDepthBuffer&&g.enable(3),oe.skinning&&g.enable(4),oe.morphTargets&&g.enable(5),oe.morphNormals&&g.enable(6),oe.morphColors&&g.enable(7),oe.premultipliedAlpha&&g.enable(8),oe.shadowMapEnabled&&g.enable(9),oe.useLegacyLights&&g.enable(10),oe.doubleSided&&g.enable(11),oe.flipSided&&g.enable(12),oe.useDepthPacking&&g.enable(13),oe.dithering&&g.enable(14),oe.transmission&&g.enable(15),oe.sheen&&g.enable(16),oe.opaque&&g.enable(17),oe.pointsUvs&&g.enable(18),oe.decodeVideoTexture&&g.enable(19),te.push(g.mask)}function j(te){const oe=R[te.type];let re;if(oe){const he=ShaderLib[oe];re=UniformsUtils.clone(he.uniforms)}else re=te.uniforms;return re}function K(te,oe){let re;for(let he=0,_e=S.length;he<_e;he++){const me=S[he];if(me.cacheKey===oe){re=me,++re.usedTimes;break}}return re===void 0&&(re=new WebGLProgram(r,oe,te,l),S.push(re)),re}function Z(te){if(--te.usedTimes===0){const oe=S.indexOf(te);S[oe]=S[S.length-1],S.pop(),te.destroy()}}function q(te){y.remove(te)}function ie(){y.dispose()}return{getParameters:$,getProgramCacheKey:O,getUniforms:j,acquireProgram:K,releaseProgram:Z,releaseShaderCache:q,programs:S,dispose:ie}}function WebGLProperties(){let r=new WeakMap;function t(l){let d=r.get(l);return d===void 0&&(d={},r.set(l,d)),d}function n(l){r.delete(l)}function o(l,d,g){r.get(l)[d]=g}function a(){r=new WeakMap}return{get:t,remove:n,update:o,dispose:a}}function painterSortStable(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function reversePainterSortStable(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function WebGLRenderList(){const r=[];let t=0;const n=[],o=[],a=[];function l(){t=0,n.length=0,o.length=0,a.length=0}function d(w,c,A,R,L,$){let O=r[t];return O===void 0?(O={id:w.id,object:w,geometry:c,material:A,groupOrder:R,renderOrder:w.renderOrder,z:L,group:$},r[t]=O):(O.id=w.id,O.object=w,O.geometry=c,O.material=A,O.groupOrder=R,O.renderOrder=w.renderOrder,O.z=L,O.group=$),t++,O}function g(w,c,A,R,L,$){const O=d(w,c,A,R,L,$);A.transmission>0?o.push(O):A.transparent===!0?a.push(O):n.push(O)}function y(w,c,A,R,L,$){const O=d(w,c,A,R,L,$);A.transmission>0?o.unshift(O):A.transparent===!0?a.unshift(O):n.unshift(O)}function S(w,c){n.length>1&&n.sort(w||painterSortStable),o.length>1&&o.sort(c||reversePainterSortStable),a.length>1&&a.sort(c||reversePainterSortStable)}function x(){for(let w=t,c=r.length;w<c;w++){const A=r[w];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}}return{opaque:n,transmissive:o,transparent:a,init:l,push:g,unshift:y,finish:x,sort:S}}function WebGLRenderLists(){let r=new WeakMap;function t(o,a){const l=r.get(o);let d;return l===void 0?(d=new WebGLRenderList,r.set(o,[d])):a>=l.length?(d=new WebGLRenderList,l.push(d)):d=l[a],d}function n(){r=new WeakMap}return{get:t,dispose:n}}function UniformsCache(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Vector3,color:new Color};break;case"SpotLight":n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return r[t.id]=n,n}}}function ShadowUniformsCache(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[t.id]=n,n}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(r,t){return(t.castShadow?2:0)-(r.castShadow?2:0)+(t.map?1:0)-(r.map?1:0)}function WebGLLights(r,t){const n=new UniformsCache,o=ShadowUniformsCache(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let x=0;x<9;x++)a.probe.push(new Vector3);const l=new Vector3,d=new Matrix4,g=new Matrix4;function y(x,w){let c=0,A=0,R=0;for(let he=0;he<9;he++)a.probe[he].set(0,0,0);let L=0,$=0,O=0,z=0,V=0,j=0,K=0,Z=0,q=0,ie=0,te=0;x.sort(shadowCastingAndTexturingLightsFirst);const oe=w===!0?Math.PI:1;for(let he=0,_e=x.length;he<_e;he++){const me=x[he],be=me.color,Q=me.intensity,Ne=me.distance,Ee=me.shadow&&me.shadow.map?me.shadow.map.texture:null;if(me.isAmbientLight)c+=be.r*Q*oe,A+=be.g*Q*oe,R+=be.b*Q*oe;else if(me.isLightProbe){for(let Ge=0;Ge<9;Ge++)a.probe[Ge].addScaledVector(me.sh.coefficients[Ge],Q);te++}else if(me.isDirectionalLight){const Ge=n.get(me);if(Ge.color.copy(me.color).multiplyScalar(me.intensity*oe),me.castShadow){const it=me.shadow,Te=o.get(me);Te.shadowBias=it.bias,Te.shadowNormalBias=it.normalBias,Te.shadowRadius=it.radius,Te.shadowMapSize=it.mapSize,a.directionalShadow[L]=Te,a.directionalShadowMap[L]=Ee,a.directionalShadowMatrix[L]=me.shadow.matrix,j++}a.directional[L]=Ge,L++}else if(me.isSpotLight){const Ge=n.get(me);Ge.position.setFromMatrixPosition(me.matrixWorld),Ge.color.copy(be).multiplyScalar(Q*oe),Ge.distance=Ne,Ge.coneCos=Math.cos(me.angle),Ge.penumbraCos=Math.cos(me.angle*(1-me.penumbra)),Ge.decay=me.decay,a.spot[O]=Ge;const it=me.shadow;if(me.map&&(a.spotLightMap[q]=me.map,q++,it.updateMatrices(me),me.castShadow&&ie++),a.spotLightMatrix[O]=it.matrix,me.castShadow){const Te=o.get(me);Te.shadowBias=it.bias,Te.shadowNormalBias=it.normalBias,Te.shadowRadius=it.radius,Te.shadowMapSize=it.mapSize,a.spotShadow[O]=Te,a.spotShadowMap[O]=Ee,Z++}O++}else if(me.isRectAreaLight){const Ge=n.get(me);Ge.color.copy(be).multiplyScalar(Q),Ge.halfWidth.set(me.width*.5,0,0),Ge.halfHeight.set(0,me.height*.5,0),a.rectArea[z]=Ge,z++}else if(me.isPointLight){const Ge=n.get(me);if(Ge.color.copy(me.color).multiplyScalar(me.intensity*oe),Ge.distance=me.distance,Ge.decay=me.decay,me.castShadow){const it=me.shadow,Te=o.get(me);Te.shadowBias=it.bias,Te.shadowNormalBias=it.normalBias,Te.shadowRadius=it.radius,Te.shadowMapSize=it.mapSize,Te.shadowCameraNear=it.camera.near,Te.shadowCameraFar=it.camera.far,a.pointShadow[$]=Te,a.pointShadowMap[$]=Ee,a.pointShadowMatrix[$]=me.shadow.matrix,K++}a.point[$]=Ge,$++}else if(me.isHemisphereLight){const Ge=n.get(me);Ge.skyColor.copy(me.color).multiplyScalar(Q*oe),Ge.groundColor.copy(me.groundColor).multiplyScalar(Q*oe),a.hemi[V]=Ge,V++}}z>0&&(t.isWebGL2||r.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,a.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=UniformsLib.LTC_HALF_1,a.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=c,a.ambient[1]=A,a.ambient[2]=R;const re=a.hash;(re.directionalLength!==L||re.pointLength!==$||re.spotLength!==O||re.rectAreaLength!==z||re.hemiLength!==V||re.numDirectionalShadows!==j||re.numPointShadows!==K||re.numSpotShadows!==Z||re.numSpotMaps!==q||re.numLightProbes!==te)&&(a.directional.length=L,a.spot.length=O,a.rectArea.length=z,a.point.length=$,a.hemi.length=V,a.directionalShadow.length=j,a.directionalShadowMap.length=j,a.pointShadow.length=K,a.pointShadowMap.length=K,a.spotShadow.length=Z,a.spotShadowMap.length=Z,a.directionalShadowMatrix.length=j,a.pointShadowMatrix.length=K,a.spotLightMatrix.length=Z+q-ie,a.spotLightMap.length=q,a.numSpotLightShadowsWithMaps=ie,a.numLightProbes=te,re.directionalLength=L,re.pointLength=$,re.spotLength=O,re.rectAreaLength=z,re.hemiLength=V,re.numDirectionalShadows=j,re.numPointShadows=K,re.numSpotShadows=Z,re.numSpotMaps=q,re.numLightProbes=te,a.version=nextVersion++)}function S(x,w){let c=0,A=0,R=0,L=0,$=0;const O=w.matrixWorldInverse;for(let z=0,V=x.length;z<V;z++){const j=x[z];if(j.isDirectionalLight){const K=a.directional[c];K.direction.setFromMatrixPosition(j.matrixWorld),l.setFromMatrixPosition(j.target.matrixWorld),K.direction.sub(l),K.direction.transformDirection(O),c++}else if(j.isSpotLight){const K=a.spot[R];K.position.setFromMatrixPosition(j.matrixWorld),K.position.applyMatrix4(O),K.direction.setFromMatrixPosition(j.matrixWorld),l.setFromMatrixPosition(j.target.matrixWorld),K.direction.sub(l),K.direction.transformDirection(O),R++}else if(j.isRectAreaLight){const K=a.rectArea[L];K.position.setFromMatrixPosition(j.matrixWorld),K.position.applyMatrix4(O),g.identity(),d.copy(j.matrixWorld),d.premultiply(O),g.extractRotation(d),K.halfWidth.set(j.width*.5,0,0),K.halfHeight.set(0,j.height*.5,0),K.halfWidth.applyMatrix4(g),K.halfHeight.applyMatrix4(g),L++}else if(j.isPointLight){const K=a.point[A];K.position.setFromMatrixPosition(j.matrixWorld),K.position.applyMatrix4(O),A++}else if(j.isHemisphereLight){const K=a.hemi[$];K.direction.setFromMatrixPosition(j.matrixWorld),K.direction.transformDirection(O),$++}}}return{setup:y,setupView:S,state:a}}function WebGLRenderState(r,t){const n=new WebGLLights(r,t),o=[],a=[];function l(){o.length=0,a.length=0}function d(w){o.push(w)}function g(w){a.push(w)}function y(w){n.setup(o,w)}function S(w){n.setupView(o,w)}return{init:l,state:{lightsArray:o,shadowsArray:a,lights:n},setupLights:y,setupLightsView:S,pushLight:d,pushShadow:g}}function WebGLRenderStates(r,t){let n=new WeakMap;function o(l,d=0){const g=n.get(l);let y;return g===void 0?(y=new WebGLRenderState(r,t),n.set(l,[y])):d>=g.length?(y=new WebGLRenderState(r,t),g.push(y)):y=g[d],y}function a(){n=new WeakMap}return{get:o,dispose:a}}class MeshDepthMaterial extends Material{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(r,t,n){let o=new Frustum;const a=new Vector2,l=new Vector2,d=new Vector4,g=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),y=new MeshDistanceMaterial,S={},x=n.maxTextureSize,w={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},c=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),A=c.clone();A.defines.HORIZONTAL_PASS=1;const R=new BufferGeometry;R.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const L=new Mesh(R,c),$=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let O=this.type;this.render=function(K,Z,q){if($.enabled===!1||$.autoUpdate===!1&&$.needsUpdate===!1||K.length===0)return;const ie=r.getRenderTarget(),te=r.getActiveCubeFace(),oe=r.getActiveMipmapLevel(),re=r.state;re.setBlending(NoBlending),re.buffers.color.setClear(1,1,1,1),re.buffers.depth.setTest(!0),re.setScissorTest(!1);const he=O!==VSMShadowMap&&this.type===VSMShadowMap,_e=O===VSMShadowMap&&this.type!==VSMShadowMap;for(let me=0,be=K.length;me<be;me++){const Q=K[me],Ne=Q.shadow;if(Ne===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(Ne.autoUpdate===!1&&Ne.needsUpdate===!1)continue;a.copy(Ne.mapSize);const Ee=Ne.getFrameExtents();if(a.multiply(Ee),l.copy(Ne.mapSize),(a.x>x||a.y>x)&&(a.x>x&&(l.x=Math.floor(x/Ee.x),a.x=l.x*Ee.x,Ne.mapSize.x=l.x),a.y>x&&(l.y=Math.floor(x/Ee.y),a.y=l.y*Ee.y,Ne.mapSize.y=l.y)),Ne.map===null||he===!0||_e===!0){const it=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Ne.map!==null&&Ne.map.dispose(),Ne.map=new WebGLRenderTarget(a.x,a.y,it),Ne.map.texture.name=Q.name+".shadowMap",Ne.camera.updateProjectionMatrix()}r.setRenderTarget(Ne.map),r.clear();const Ge=Ne.getViewportCount();for(let it=0;it<Ge;it++){const Te=Ne.getViewport(it);d.set(l.x*Te.x,l.y*Te.y,l.x*Te.z,l.y*Te.w),re.viewport(d),Ne.updateMatrices(Q,it),o=Ne.getFrustum(),j(Z,q,Ne.camera,Q,this.type)}Ne.isPointLightShadow!==!0&&this.type===VSMShadowMap&&z(Ne,q),Ne.needsUpdate=!1}O=this.type,$.needsUpdate=!1,r.setRenderTarget(ie,te,oe)};function z(K,Z){const q=t.update(L);c.defines.VSM_SAMPLES!==K.blurSamples&&(c.defines.VSM_SAMPLES=K.blurSamples,A.defines.VSM_SAMPLES=K.blurSamples,c.needsUpdate=!0,A.needsUpdate=!0),K.mapPass===null&&(K.mapPass=new WebGLRenderTarget(a.x,a.y)),c.uniforms.shadow_pass.value=K.map.texture,c.uniforms.resolution.value=K.mapSize,c.uniforms.radius.value=K.radius,r.setRenderTarget(K.mapPass),r.clear(),r.renderBufferDirect(Z,null,q,c,L,null),A.uniforms.shadow_pass.value=K.mapPass.texture,A.uniforms.resolution.value=K.mapSize,A.uniforms.radius.value=K.radius,r.setRenderTarget(K.map),r.clear(),r.renderBufferDirect(Z,null,q,A,L,null)}function V(K,Z,q,ie){let te=null;const oe=q.isPointLight===!0?K.customDistanceMaterial:K.customDepthMaterial;if(oe!==void 0)te=oe;else if(te=q.isPointLight===!0?y:g,r.localClippingEnabled&&Z.clipShadows===!0&&Array.isArray(Z.clippingPlanes)&&Z.clippingPlanes.length!==0||Z.displacementMap&&Z.displacementScale!==0||Z.alphaMap&&Z.alphaTest>0||Z.map&&Z.alphaTest>0){const re=te.uuid,he=Z.uuid;let _e=S[re];_e===void 0&&(_e={},S[re]=_e);let me=_e[he];me===void 0&&(me=te.clone(),_e[he]=me),te=me}if(te.visible=Z.visible,te.wireframe=Z.wireframe,ie===VSMShadowMap?te.side=Z.shadowSide!==null?Z.shadowSide:Z.side:te.side=Z.shadowSide!==null?Z.shadowSide:w[Z.side],te.alphaMap=Z.alphaMap,te.alphaTest=Z.alphaTest,te.map=Z.map,te.clipShadows=Z.clipShadows,te.clippingPlanes=Z.clippingPlanes,te.clipIntersection=Z.clipIntersection,te.displacementMap=Z.displacementMap,te.displacementScale=Z.displacementScale,te.displacementBias=Z.displacementBias,te.wireframeLinewidth=Z.wireframeLinewidth,te.linewidth=Z.linewidth,q.isPointLight===!0&&te.isMeshDistanceMaterial===!0){const re=r.properties.get(te);re.light=q}return te}function j(K,Z,q,ie,te){if(K.visible===!1)return;if(K.layers.test(Z.layers)&&(K.isMesh||K.isLine||K.isPoints)&&(K.castShadow||K.receiveShadow&&te===VSMShadowMap)&&(!K.frustumCulled||o.intersectsObject(K))){K.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,K.matrixWorld);const he=t.update(K),_e=K.material;if(Array.isArray(_e)){const me=he.groups;for(let be=0,Q=me.length;be<Q;be++){const Ne=me[be],Ee=_e[Ne.materialIndex];if(Ee&&Ee.visible){const Ge=V(K,Ee,ie,te);r.renderBufferDirect(q,null,he,Ge,K,Ne)}}}else if(_e.visible){const me=V(K,_e,ie,te);r.renderBufferDirect(q,null,he,me,K,null)}}const re=K.children;for(let he=0,_e=re.length;he<_e;he++)j(re[he],Z,q,ie,te)}}function WebGLState(r,t,n){const o=n.isWebGL2;function a(){let Ue=!1;const yn=new Vector4;let Dn=null;const Xt=new Vector4(0,0,0,0);return{setMask:function(Kn){Dn!==Kn&&!Ue&&(r.colorMask(Kn,Kn,Kn,Kn),Dn=Kn)},setLocked:function(Kn){Ue=Kn},setClear:function(Kn,Yr,qo,vi,js){js===!0&&(Kn*=vi,Yr*=vi,qo*=vi),yn.set(Kn,Yr,qo,vi),Xt.equals(yn)===!1&&(r.clearColor(Kn,Yr,qo,vi),Xt.copy(yn))},reset:function(){Ue=!1,Dn=null,Xt.set(-1,0,0,0)}}}function l(){let Ue=!1,yn=null,Dn=null,Xt=null;return{setTest:function(Kn){Kn?Dt(r.DEPTH_TEST):Rt(r.DEPTH_TEST)},setMask:function(Kn){yn!==Kn&&!Ue&&(r.depthMask(Kn),yn=Kn)},setFunc:function(Kn){if(Dn!==Kn){switch(Kn){case NeverDepth:r.depthFunc(r.NEVER);break;case AlwaysDepth:r.depthFunc(r.ALWAYS);break;case LessDepth:r.depthFunc(r.LESS);break;case LessEqualDepth:r.depthFunc(r.LEQUAL);break;case EqualDepth:r.depthFunc(r.EQUAL);break;case GreaterEqualDepth:r.depthFunc(r.GEQUAL);break;case GreaterDepth:r.depthFunc(r.GREATER);break;case NotEqualDepth:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Dn=Kn}},setLocked:function(Kn){Ue=Kn},setClear:function(Kn){Xt!==Kn&&(r.clearDepth(Kn),Xt=Kn)},reset:function(){Ue=!1,yn=null,Dn=null,Xt=null}}}function d(){let Ue=!1,yn=null,Dn=null,Xt=null,Kn=null,Yr=null,qo=null,vi=null,js=null;return{setTest:function(Nr){Ue||(Nr?Dt(r.STENCIL_TEST):Rt(r.STENCIL_TEST))},setMask:function(Nr){yn!==Nr&&!Ue&&(r.stencilMask(Nr),yn=Nr)},setFunc:function(Nr,Vn,Is){(Dn!==Nr||Xt!==Vn||Kn!==Is)&&(r.stencilFunc(Nr,Vn,Is),Dn=Nr,Xt=Vn,Kn=Is)},setOp:function(Nr,Vn,Is){(Yr!==Nr||qo!==Vn||vi!==Is)&&(r.stencilOp(Nr,Vn,Is),Yr=Nr,qo=Vn,vi=Is)},setLocked:function(Nr){Ue=Nr},setClear:function(Nr){js!==Nr&&(r.clearStencil(Nr),js=Nr)},reset:function(){Ue=!1,yn=null,Dn=null,Xt=null,Kn=null,Yr=null,qo=null,vi=null,js=null}}}const g=new a,y=new l,S=new d,x=new WeakMap,w=new WeakMap;let c={},A={},R=new WeakMap,L=[],$=null,O=!1,z=null,V=null,j=null,K=null,Z=null,q=null,ie=null,te=new Color(0,0,0),oe=0,re=!1,he=null,_e=null,me=null,be=null,Q=null;const Ne=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ee=!1,Ge=0;const it=r.getParameter(r.VERSION);it.indexOf("WebGL")!==-1?(Ge=parseFloat(/^WebGL (\d)/.exec(it)[1]),Ee=Ge>=1):it.indexOf("OpenGL ES")!==-1&&(Ge=parseFloat(/^OpenGL ES (\d)/.exec(it)[1]),Ee=Ge>=2);let Te=null,Ke={};const Tt=r.getParameter(r.SCISSOR_BOX),Lt=r.getParameter(r.VIEWPORT),Qt=new Vector4().fromArray(Tt),Xe=new Vector4().fromArray(Lt);function Be(Ue,yn,Dn,Xt){const Kn=new Uint8Array(4),Yr=r.createTexture();r.bindTexture(Ue,Yr),r.texParameteri(Ue,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(Ue,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let qo=0;qo<Dn;qo++)o&&(Ue===r.TEXTURE_3D||Ue===r.TEXTURE_2D_ARRAY)?r.texImage3D(yn,0,r.RGBA,1,1,Xt,0,r.RGBA,r.UNSIGNED_BYTE,Kn):r.texImage2D(yn+qo,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Kn);return Yr}const ue={};ue[r.TEXTURE_2D]=Be(r.TEXTURE_2D,r.TEXTURE_2D,1),ue[r.TEXTURE_CUBE_MAP]=Be(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),o&&(ue[r.TEXTURE_2D_ARRAY]=Be(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),ue[r.TEXTURE_3D]=Be(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),g.setClear(0,0,0,1),y.setClear(1),S.setClear(0),Dt(r.DEPTH_TEST),y.setFunc(LessEqualDepth),tn(!1),Gt(CullFaceBack),Dt(r.CULL_FACE),et(NoBlending);function Dt(Ue){c[Ue]!==!0&&(r.enable(Ue),c[Ue]=!0)}function Rt(Ue){c[Ue]!==!1&&(r.disable(Ue),c[Ue]=!1)}function Bt(Ue,yn){return A[Ue]!==yn?(r.bindFramebuffer(Ue,yn),A[Ue]=yn,o&&(Ue===r.DRAW_FRAMEBUFFER&&(A[r.FRAMEBUFFER]=yn),Ue===r.FRAMEBUFFER&&(A[r.DRAW_FRAMEBUFFER]=yn)),!0):!1}function Se(Ue,yn){let Dn=L,Xt=!1;if(Ue)if(Dn=R.get(yn),Dn===void 0&&(Dn=[],R.set(yn,Dn)),Ue.isWebGLMultipleRenderTargets){const Kn=Ue.texture;if(Dn.length!==Kn.length||Dn[0]!==r.COLOR_ATTACHMENT0){for(let Yr=0,qo=Kn.length;Yr<qo;Yr++)Dn[Yr]=r.COLOR_ATTACHMENT0+Yr;Dn.length=Kn.length,Xt=!0}}else Dn[0]!==r.COLOR_ATTACHMENT0&&(Dn[0]=r.COLOR_ATTACHMENT0,Xt=!0);else Dn[0]!==r.BACK&&(Dn[0]=r.BACK,Xt=!0);Xt&&(n.isWebGL2?r.drawBuffers(Dn):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Dn))}function Ye(Ue){return $!==Ue?(r.useProgram(Ue),$=Ue,!0):!1}const $e={[AddEquation]:r.FUNC_ADD,[SubtractEquation]:r.FUNC_SUBTRACT,[ReverseSubtractEquation]:r.FUNC_REVERSE_SUBTRACT};if(o)$e[MinEquation]=r.MIN,$e[MaxEquation]=r.MAX;else{const Ue=t.get("EXT_blend_minmax");Ue!==null&&($e[MinEquation]=Ue.MIN_EXT,$e[MaxEquation]=Ue.MAX_EXT)}const st={[ZeroFactor]:r.ZERO,[OneFactor]:r.ONE,[SrcColorFactor]:r.SRC_COLOR,[SrcAlphaFactor]:r.SRC_ALPHA,[SrcAlphaSaturateFactor]:r.SRC_ALPHA_SATURATE,[DstColorFactor]:r.DST_COLOR,[DstAlphaFactor]:r.DST_ALPHA,[OneMinusSrcColorFactor]:r.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:r.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:r.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:r.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:r.CONSTANT_COLOR,[OneMinusConstantColorFactor]:r.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:r.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:r.ONE_MINUS_CONSTANT_ALPHA};function et(Ue,yn,Dn,Xt,Kn,Yr,qo,vi,js,Nr){if(Ue===NoBlending){O===!0&&(Rt(r.BLEND),O=!1);return}if(O===!1&&(Dt(r.BLEND),O=!0),Ue!==CustomBlending){if(Ue!==z||Nr!==re){if((V!==AddEquation||Z!==AddEquation)&&(r.blendEquation(r.FUNC_ADD),V=AddEquation,Z=AddEquation),Nr)switch(Ue){case NormalBlending:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:r.blendFunc(r.ONE,r.ONE);break;case SubtractiveBlending:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case MultiplyBlending:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ue);break}else switch(Ue){case NormalBlending:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case SubtractiveBlending:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case MultiplyBlending:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ue);break}j=null,K=null,q=null,ie=null,te.set(0,0,0),oe=0,z=Ue,re=Nr}return}Kn=Kn||yn,Yr=Yr||Dn,qo=qo||Xt,(yn!==V||Kn!==Z)&&(r.blendEquationSeparate($e[yn],$e[Kn]),V=yn,Z=Kn),(Dn!==j||Xt!==K||Yr!==q||qo!==ie)&&(r.blendFuncSeparate(st[Dn],st[Xt],st[Yr],st[qo]),j=Dn,K=Xt,q=Yr,ie=qo),(vi.equals(te)===!1||js!==oe)&&(r.blendColor(vi.r,vi.g,vi.b,js),te.copy(vi),oe=js),z=Ue,re=!1}function Fe(Ue,yn){Ue.side===DoubleSide?Rt(r.CULL_FACE):Dt(r.CULL_FACE);let Dn=Ue.side===BackSide;yn&&(Dn=!Dn),tn(Dn),Ue.blending===NormalBlending&&Ue.transparent===!1?et(NoBlending):et(Ue.blending,Ue.blendEquation,Ue.blendSrc,Ue.blendDst,Ue.blendEquationAlpha,Ue.blendSrcAlpha,Ue.blendDstAlpha,Ue.blendColor,Ue.blendAlpha,Ue.premultipliedAlpha),y.setFunc(Ue.depthFunc),y.setTest(Ue.depthTest),y.setMask(Ue.depthWrite),g.setMask(Ue.colorWrite);const Xt=Ue.stencilWrite;S.setTest(Xt),Xt&&(S.setMask(Ue.stencilWriteMask),S.setFunc(Ue.stencilFunc,Ue.stencilRef,Ue.stencilFuncMask),S.setOp(Ue.stencilFail,Ue.stencilZFail,Ue.stencilZPass)),en(Ue.polygonOffset,Ue.polygonOffsetFactor,Ue.polygonOffsetUnits),Ue.alphaToCoverage===!0?Dt(r.SAMPLE_ALPHA_TO_COVERAGE):Rt(r.SAMPLE_ALPHA_TO_COVERAGE)}function tn(Ue){he!==Ue&&(Ue?r.frontFace(r.CW):r.frontFace(r.CCW),he=Ue)}function Gt(Ue){Ue!==CullFaceNone?(Dt(r.CULL_FACE),Ue!==_e&&(Ue===CullFaceBack?r.cullFace(r.BACK):Ue===CullFaceFront?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Rt(r.CULL_FACE),_e=Ue}function mt(Ue){Ue!==me&&(Ee&&r.lineWidth(Ue),me=Ue)}function en(Ue,yn,Dn){Ue?(Dt(r.POLYGON_OFFSET_FILL),(be!==yn||Q!==Dn)&&(r.polygonOffset(yn,Dn),be=yn,Q=Dn)):Rt(r.POLYGON_OFFSET_FILL)}function Bn(Ue){Ue?Dt(r.SCISSOR_TEST):Rt(r.SCISSOR_TEST)}function Le(Ue){Ue===void 0&&(Ue=r.TEXTURE0+Ne-1),Te!==Ue&&(r.activeTexture(Ue),Te=Ue)}function Ae(Ue,yn,Dn){Dn===void 0&&(Te===null?Dn=r.TEXTURE0+Ne-1:Dn=Te);let Xt=Ke[Dn];Xt===void 0&&(Xt={type:void 0,texture:void 0},Ke[Dn]=Xt),(Xt.type!==Ue||Xt.texture!==yn)&&(Te!==Dn&&(r.activeTexture(Dn),Te=Dn),r.bindTexture(Ue,yn||ue[Ue]),Xt.type=Ue,Xt.texture=yn)}function ht(){const Ue=Ke[Te];Ue!==void 0&&Ue.type!==void 0&&(r.bindTexture(Ue.type,null),Ue.type=void 0,Ue.texture=void 0)}function rn(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Kt(){try{r.compressedTexImage3D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Wt(){try{r.texSubImage2D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function xn(){try{r.texSubImage3D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Mn(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function kn(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Zn(){try{r.texStorage2D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function yo(){try{r.texStorage3D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function gn(){try{r.texImage2D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function oo(){try{r.texImage3D.apply(r,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Cr(Ue){Qt.equals(Ue)===!1&&(r.scissor(Ue.x,Ue.y,Ue.z,Ue.w),Qt.copy(Ue))}function Wr(Ue){Xe.equals(Ue)===!1&&(r.viewport(Ue.x,Ue.y,Ue.z,Ue.w),Xe.copy(Ue))}function Lr(Ue,yn){let Dn=w.get(yn);Dn===void 0&&(Dn=new WeakMap,w.set(yn,Dn));let Xt=Dn.get(Ue);Xt===void 0&&(Xt=r.getUniformBlockIndex(yn,Ue.name),Dn.set(Ue,Xt))}function qn(Ue,yn){const Xt=w.get(yn).get(Ue);x.get(yn)!==Xt&&(r.uniformBlockBinding(yn,Xt,Ue.__bindingPointIndex),x.set(yn,Xt))}function Oo(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),o===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),c={},Te=null,Ke={},A={},R=new WeakMap,L=[],$=null,O=!1,z=null,V=null,j=null,K=null,Z=null,q=null,ie=null,te=new Color(0,0,0),oe=0,re=!1,he=null,_e=null,me=null,be=null,Q=null,Qt.set(0,0,r.canvas.width,r.canvas.height),Xe.set(0,0,r.canvas.width,r.canvas.height),g.reset(),y.reset(),S.reset()}return{buffers:{color:g,depth:y,stencil:S},enable:Dt,disable:Rt,bindFramebuffer:Bt,drawBuffers:Se,useProgram:Ye,setBlending:et,setMaterial:Fe,setFlipSided:tn,setCullFace:Gt,setLineWidth:mt,setPolygonOffset:en,setScissorTest:Bn,activeTexture:Le,bindTexture:Ae,unbindTexture:ht,compressedTexImage2D:rn,compressedTexImage3D:Kt,texImage2D:gn,texImage3D:oo,updateUBOMapping:Lr,uniformBlockBinding:qn,texStorage2D:Zn,texStorage3D:yo,texSubImage2D:Wt,texSubImage3D:xn,compressedTexSubImage2D:Mn,compressedTexSubImage3D:kn,scissor:Cr,viewport:Wr,reset:Oo}}function WebGLTextures(r,t,n,o,a,l,d){const g=a.isWebGL2,y=a.maxTextures,S=a.maxCubemapSize,x=a.maxTextureSize,w=a.maxSamples,c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,A=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),R=new WeakMap;let L;const $=new WeakMap;let O=!1;try{O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function z(Le,Ae){return O?new OffscreenCanvas(Le,Ae):createElementNS("canvas")}function V(Le,Ae,ht,rn){let Kt=1;if((Le.width>rn||Le.height>rn)&&(Kt=rn/Math.max(Le.width,Le.height)),Kt<1||Ae===!0)if(typeof HTMLImageElement<"u"&&Le instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Le instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Le instanceof ImageBitmap){const Wt=Ae?floorPowerOfTwo:Math.floor,xn=Wt(Kt*Le.width),Mn=Wt(Kt*Le.height);L===void 0&&(L=z(xn,Mn));const kn=ht?z(xn,Mn):L;return kn.width=xn,kn.height=Mn,kn.getContext("2d").drawImage(Le,0,0,xn,Mn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Le.width+"x"+Le.height+") to ("+xn+"x"+Mn+")."),kn}else return"data"in Le&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Le.width+"x"+Le.height+")."),Le;return Le}function j(Le){return isPowerOfTwo(Le.width)&&isPowerOfTwo(Le.height)}function K(Le){return g?!1:Le.wrapS!==ClampToEdgeWrapping||Le.wrapT!==ClampToEdgeWrapping||Le.minFilter!==NearestFilter&&Le.minFilter!==LinearFilter}function Z(Le,Ae){return Le.generateMipmaps&&Ae&&Le.minFilter!==NearestFilter&&Le.minFilter!==LinearFilter}function q(Le){r.generateMipmap(Le)}function ie(Le,Ae,ht,rn,Kt=!1){if(g===!1)return Ae;if(Le!==null){if(r[Le]!==void 0)return r[Le];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Le+"'")}let Wt=Ae;if(Ae===r.RED&&(ht===r.FLOAT&&(Wt=r.R32F),ht===r.HALF_FLOAT&&(Wt=r.R16F),ht===r.UNSIGNED_BYTE&&(Wt=r.R8)),Ae===r.RED_INTEGER&&(ht===r.UNSIGNED_BYTE&&(Wt=r.R8UI),ht===r.UNSIGNED_SHORT&&(Wt=r.R16UI),ht===r.UNSIGNED_INT&&(Wt=r.R32UI),ht===r.BYTE&&(Wt=r.R8I),ht===r.SHORT&&(Wt=r.R16I),ht===r.INT&&(Wt=r.R32I)),Ae===r.RG&&(ht===r.FLOAT&&(Wt=r.RG32F),ht===r.HALF_FLOAT&&(Wt=r.RG16F),ht===r.UNSIGNED_BYTE&&(Wt=r.RG8)),Ae===r.RGBA){const xn=Kt?LinearTransfer:ColorManagement.getTransfer(rn);ht===r.FLOAT&&(Wt=r.RGBA32F),ht===r.HALF_FLOAT&&(Wt=r.RGBA16F),ht===r.UNSIGNED_BYTE&&(Wt=xn===SRGBTransfer?r.SRGB8_ALPHA8:r.RGBA8),ht===r.UNSIGNED_SHORT_4_4_4_4&&(Wt=r.RGBA4),ht===r.UNSIGNED_SHORT_5_5_5_1&&(Wt=r.RGB5_A1)}return(Wt===r.R16F||Wt===r.R32F||Wt===r.RG16F||Wt===r.RG32F||Wt===r.RGBA16F||Wt===r.RGBA32F)&&t.get("EXT_color_buffer_float"),Wt}function te(Le,Ae,ht){return Z(Le,ht)===!0||Le.isFramebufferTexture&&Le.minFilter!==NearestFilter&&Le.minFilter!==LinearFilter?Math.log2(Math.max(Ae.width,Ae.height))+1:Le.mipmaps!==void 0&&Le.mipmaps.length>0?Le.mipmaps.length:Le.isCompressedTexture&&Array.isArray(Le.image)?Ae.mipmaps.length:1}function oe(Le){return Le===NearestFilter||Le===NearestMipmapNearestFilter||Le===NearestMipmapLinearFilter?r.NEAREST:r.LINEAR}function re(Le){const Ae=Le.target;Ae.removeEventListener("dispose",re),_e(Ae),Ae.isVideoTexture&&R.delete(Ae)}function he(Le){const Ae=Le.target;Ae.removeEventListener("dispose",he),be(Ae)}function _e(Le){const Ae=o.get(Le);if(Ae.__webglInit===void 0)return;const ht=Le.source,rn=$.get(ht);if(rn){const Kt=rn[Ae.__cacheKey];Kt.usedTimes--,Kt.usedTimes===0&&me(Le),Object.keys(rn).length===0&&$.delete(ht)}o.remove(Le)}function me(Le){const Ae=o.get(Le);r.deleteTexture(Ae.__webglTexture);const ht=Le.source,rn=$.get(ht);delete rn[Ae.__cacheKey],d.memory.textures--}function be(Le){const Ae=Le.texture,ht=o.get(Le),rn=o.get(Ae);if(rn.__webglTexture!==void 0&&(r.deleteTexture(rn.__webglTexture),d.memory.textures--),Le.depthTexture&&Le.depthTexture.dispose(),Le.isWebGLCubeRenderTarget)for(let Kt=0;Kt<6;Kt++){if(Array.isArray(ht.__webglFramebuffer[Kt]))for(let Wt=0;Wt<ht.__webglFramebuffer[Kt].length;Wt++)r.deleteFramebuffer(ht.__webglFramebuffer[Kt][Wt]);else r.deleteFramebuffer(ht.__webglFramebuffer[Kt]);ht.__webglDepthbuffer&&r.deleteRenderbuffer(ht.__webglDepthbuffer[Kt])}else{if(Array.isArray(ht.__webglFramebuffer))for(let Kt=0;Kt<ht.__webglFramebuffer.length;Kt++)r.deleteFramebuffer(ht.__webglFramebuffer[Kt]);else r.deleteFramebuffer(ht.__webglFramebuffer);if(ht.__webglDepthbuffer&&r.deleteRenderbuffer(ht.__webglDepthbuffer),ht.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ht.__webglMultisampledFramebuffer),ht.__webglColorRenderbuffer)for(let Kt=0;Kt<ht.__webglColorRenderbuffer.length;Kt++)ht.__webglColorRenderbuffer[Kt]&&r.deleteRenderbuffer(ht.__webglColorRenderbuffer[Kt]);ht.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ht.__webglDepthRenderbuffer)}if(Le.isWebGLMultipleRenderTargets)for(let Kt=0,Wt=Ae.length;Kt<Wt;Kt++){const xn=o.get(Ae[Kt]);xn.__webglTexture&&(r.deleteTexture(xn.__webglTexture),d.memory.textures--),o.remove(Ae[Kt])}o.remove(Ae),o.remove(Le)}let Q=0;function Ne(){Q=0}function Ee(){const Le=Q;return Le>=y&&console.warn("THREE.WebGLTextures: Trying to use "+Le+" texture units while this GPU supports only "+y),Q+=1,Le}function Ge(Le){const Ae=[];return Ae.push(Le.wrapS),Ae.push(Le.wrapT),Ae.push(Le.wrapR||0),Ae.push(Le.magFilter),Ae.push(Le.minFilter),Ae.push(Le.anisotropy),Ae.push(Le.internalFormat),Ae.push(Le.format),Ae.push(Le.type),Ae.push(Le.generateMipmaps),Ae.push(Le.premultiplyAlpha),Ae.push(Le.flipY),Ae.push(Le.unpackAlignment),Ae.push(Le.colorSpace),Ae.join()}function it(Le,Ae){const ht=o.get(Le);if(Le.isVideoTexture&&en(Le),Le.isRenderTargetTexture===!1&&Le.version>0&&ht.__version!==Le.version){const rn=Le.image;if(rn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(rn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Dt(ht,Le,Ae);return}}n.bindTexture(r.TEXTURE_2D,ht.__webglTexture,r.TEXTURE0+Ae)}function Te(Le,Ae){const ht=o.get(Le);if(Le.version>0&&ht.__version!==Le.version){Dt(ht,Le,Ae);return}n.bindTexture(r.TEXTURE_2D_ARRAY,ht.__webglTexture,r.TEXTURE0+Ae)}function Ke(Le,Ae){const ht=o.get(Le);if(Le.version>0&&ht.__version!==Le.version){Dt(ht,Le,Ae);return}n.bindTexture(r.TEXTURE_3D,ht.__webglTexture,r.TEXTURE0+Ae)}function Tt(Le,Ae){const ht=o.get(Le);if(Le.version>0&&ht.__version!==Le.version){Rt(ht,Le,Ae);return}n.bindTexture(r.TEXTURE_CUBE_MAP,ht.__webglTexture,r.TEXTURE0+Ae)}const Lt={[RepeatWrapping]:r.REPEAT,[ClampToEdgeWrapping]:r.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:r.MIRRORED_REPEAT},Qt={[NearestFilter]:r.NEAREST,[NearestMipmapNearestFilter]:r.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:r.NEAREST_MIPMAP_LINEAR,[LinearFilter]:r.LINEAR,[LinearMipmapNearestFilter]:r.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:r.LINEAR_MIPMAP_LINEAR},Xe={[NeverCompare]:r.NEVER,[AlwaysCompare]:r.ALWAYS,[LessCompare]:r.LESS,[LessEqualCompare]:r.LEQUAL,[EqualCompare]:r.EQUAL,[GreaterEqualCompare]:r.GEQUAL,[GreaterCompare]:r.GREATER,[NotEqualCompare]:r.NOTEQUAL};function Be(Le,Ae,ht){if(ht?(r.texParameteri(Le,r.TEXTURE_WRAP_S,Lt[Ae.wrapS]),r.texParameteri(Le,r.TEXTURE_WRAP_T,Lt[Ae.wrapT]),(Le===r.TEXTURE_3D||Le===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Le,r.TEXTURE_WRAP_R,Lt[Ae.wrapR]),r.texParameteri(Le,r.TEXTURE_MAG_FILTER,Qt[Ae.magFilter]),r.texParameteri(Le,r.TEXTURE_MIN_FILTER,Qt[Ae.minFilter])):(r.texParameteri(Le,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(Le,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(Le===r.TEXTURE_3D||Le===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Le,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(Ae.wrapS!==ClampToEdgeWrapping||Ae.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Le,r.TEXTURE_MAG_FILTER,oe(Ae.magFilter)),r.texParameteri(Le,r.TEXTURE_MIN_FILTER,oe(Ae.minFilter)),Ae.minFilter!==NearestFilter&&Ae.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Ae.compareFunction&&(r.texParameteri(Le,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Le,r.TEXTURE_COMPARE_FUNC,Xe[Ae.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){const rn=t.get("EXT_texture_filter_anisotropic");if(Ae.magFilter===NearestFilter||Ae.minFilter!==NearestMipmapLinearFilter&&Ae.minFilter!==LinearMipmapLinearFilter||Ae.type===FloatType&&t.has("OES_texture_float_linear")===!1||g===!1&&Ae.type===HalfFloatType&&t.has("OES_texture_half_float_linear")===!1)return;(Ae.anisotropy>1||o.get(Ae).__currentAnisotropy)&&(r.texParameterf(Le,rn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ae.anisotropy,a.getMaxAnisotropy())),o.get(Ae).__currentAnisotropy=Ae.anisotropy)}}function ue(Le,Ae){let ht=!1;Le.__webglInit===void 0&&(Le.__webglInit=!0,Ae.addEventListener("dispose",re));const rn=Ae.source;let Kt=$.get(rn);Kt===void 0&&(Kt={},$.set(rn,Kt));const Wt=Ge(Ae);if(Wt!==Le.__cacheKey){Kt[Wt]===void 0&&(Kt[Wt]={texture:r.createTexture(),usedTimes:0},d.memory.textures++,ht=!0),Kt[Wt].usedTimes++;const xn=Kt[Le.__cacheKey];xn!==void 0&&(Kt[Le.__cacheKey].usedTimes--,xn.usedTimes===0&&me(Ae)),Le.__cacheKey=Wt,Le.__webglTexture=Kt[Wt].texture}return ht}function Dt(Le,Ae,ht){let rn=r.TEXTURE_2D;(Ae.isDataArrayTexture||Ae.isCompressedArrayTexture)&&(rn=r.TEXTURE_2D_ARRAY),Ae.isData3DTexture&&(rn=r.TEXTURE_3D);const Kt=ue(Le,Ae),Wt=Ae.source;n.bindTexture(rn,Le.__webglTexture,r.TEXTURE0+ht);const xn=o.get(Wt);if(Wt.version!==xn.__version||Kt===!0){n.activeTexture(r.TEXTURE0+ht);const Mn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),kn=Ae.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Ae.colorSpace),Zn=Ae.colorSpace===NoColorSpace||Mn===kn?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Ae.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Ae.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Zn);const yo=K(Ae)&&j(Ae.image)===!1;let gn=V(Ae.image,yo,!1,x);gn=Bn(Ae,gn);const oo=j(gn)||g,Cr=l.convert(Ae.format,Ae.colorSpace);let Wr=l.convert(Ae.type),Lr=ie(Ae.internalFormat,Cr,Wr,Ae.colorSpace,Ae.isVideoTexture);Be(rn,Ae,oo);let qn;const Oo=Ae.mipmaps,Ue=g&&Ae.isVideoTexture!==!0,yn=xn.__version===void 0||Kt===!0,Dn=te(Ae,gn,oo);if(Ae.isDepthTexture)Lr=r.DEPTH_COMPONENT,g?Ae.type===FloatType?Lr=r.DEPTH_COMPONENT32F:Ae.type===UnsignedIntType?Lr=r.DEPTH_COMPONENT24:Ae.type===UnsignedInt248Type?Lr=r.DEPTH24_STENCIL8:Lr=r.DEPTH_COMPONENT16:Ae.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Ae.format===DepthFormat&&Lr===r.DEPTH_COMPONENT&&Ae.type!==UnsignedShortType&&Ae.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Ae.type=UnsignedIntType,Wr=l.convert(Ae.type)),Ae.format===DepthStencilFormat&&Lr===r.DEPTH_COMPONENT&&(Lr=r.DEPTH_STENCIL,Ae.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Ae.type=UnsignedInt248Type,Wr=l.convert(Ae.type))),yn&&(Ue?n.texStorage2D(r.TEXTURE_2D,1,Lr,gn.width,gn.height):n.texImage2D(r.TEXTURE_2D,0,Lr,gn.width,gn.height,0,Cr,Wr,null));else if(Ae.isDataTexture)if(Oo.length>0&&oo){Ue&&yn&&n.texStorage2D(r.TEXTURE_2D,Dn,Lr,Oo[0].width,Oo[0].height);for(let Xt=0,Kn=Oo.length;Xt<Kn;Xt++)qn=Oo[Xt],Ue?n.texSubImage2D(r.TEXTURE_2D,Xt,0,0,qn.width,qn.height,Cr,Wr,qn.data):n.texImage2D(r.TEXTURE_2D,Xt,Lr,qn.width,qn.height,0,Cr,Wr,qn.data);Ae.generateMipmaps=!1}else Ue?(yn&&n.texStorage2D(r.TEXTURE_2D,Dn,Lr,gn.width,gn.height),n.texSubImage2D(r.TEXTURE_2D,0,0,0,gn.width,gn.height,Cr,Wr,gn.data)):n.texImage2D(r.TEXTURE_2D,0,Lr,gn.width,gn.height,0,Cr,Wr,gn.data);else if(Ae.isCompressedTexture)if(Ae.isCompressedArrayTexture){Ue&&yn&&n.texStorage3D(r.TEXTURE_2D_ARRAY,Dn,Lr,Oo[0].width,Oo[0].height,gn.depth);for(let Xt=0,Kn=Oo.length;Xt<Kn;Xt++)qn=Oo[Xt],Ae.format!==RGBAFormat?Cr!==null?Ue?n.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Xt,0,0,0,qn.width,qn.height,gn.depth,Cr,qn.data,0,0):n.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Xt,Lr,qn.width,qn.height,gn.depth,0,qn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ue?n.texSubImage3D(r.TEXTURE_2D_ARRAY,Xt,0,0,0,qn.width,qn.height,gn.depth,Cr,Wr,qn.data):n.texImage3D(r.TEXTURE_2D_ARRAY,Xt,Lr,qn.width,qn.height,gn.depth,0,Cr,Wr,qn.data)}else{Ue&&yn&&n.texStorage2D(r.TEXTURE_2D,Dn,Lr,Oo[0].width,Oo[0].height);for(let Xt=0,Kn=Oo.length;Xt<Kn;Xt++)qn=Oo[Xt],Ae.format!==RGBAFormat?Cr!==null?Ue?n.compressedTexSubImage2D(r.TEXTURE_2D,Xt,0,0,qn.width,qn.height,Cr,qn.data):n.compressedTexImage2D(r.TEXTURE_2D,Xt,Lr,qn.width,qn.height,0,qn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ue?n.texSubImage2D(r.TEXTURE_2D,Xt,0,0,qn.width,qn.height,Cr,Wr,qn.data):n.texImage2D(r.TEXTURE_2D,Xt,Lr,qn.width,qn.height,0,Cr,Wr,qn.data)}else if(Ae.isDataArrayTexture)Ue?(yn&&n.texStorage3D(r.TEXTURE_2D_ARRAY,Dn,Lr,gn.width,gn.height,gn.depth),n.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,gn.width,gn.height,gn.depth,Cr,Wr,gn.data)):n.texImage3D(r.TEXTURE_2D_ARRAY,0,Lr,gn.width,gn.height,gn.depth,0,Cr,Wr,gn.data);else if(Ae.isData3DTexture)Ue?(yn&&n.texStorage3D(r.TEXTURE_3D,Dn,Lr,gn.width,gn.height,gn.depth),n.texSubImage3D(r.TEXTURE_3D,0,0,0,0,gn.width,gn.height,gn.depth,Cr,Wr,gn.data)):n.texImage3D(r.TEXTURE_3D,0,Lr,gn.width,gn.height,gn.depth,0,Cr,Wr,gn.data);else if(Ae.isFramebufferTexture){if(yn)if(Ue)n.texStorage2D(r.TEXTURE_2D,Dn,Lr,gn.width,gn.height);else{let Xt=gn.width,Kn=gn.height;for(let Yr=0;Yr<Dn;Yr++)n.texImage2D(r.TEXTURE_2D,Yr,Lr,Xt,Kn,0,Cr,Wr,null),Xt>>=1,Kn>>=1}}else if(Oo.length>0&&oo){Ue&&yn&&n.texStorage2D(r.TEXTURE_2D,Dn,Lr,Oo[0].width,Oo[0].height);for(let Xt=0,Kn=Oo.length;Xt<Kn;Xt++)qn=Oo[Xt],Ue?n.texSubImage2D(r.TEXTURE_2D,Xt,0,0,Cr,Wr,qn):n.texImage2D(r.TEXTURE_2D,Xt,Lr,Cr,Wr,qn);Ae.generateMipmaps=!1}else Ue?(yn&&n.texStorage2D(r.TEXTURE_2D,Dn,Lr,gn.width,gn.height),n.texSubImage2D(r.TEXTURE_2D,0,0,0,Cr,Wr,gn)):n.texImage2D(r.TEXTURE_2D,0,Lr,Cr,Wr,gn);Z(Ae,oo)&&q(rn),xn.__version=Wt.version,Ae.onUpdate&&Ae.onUpdate(Ae)}Le.__version=Ae.version}function Rt(Le,Ae,ht){if(Ae.image.length!==6)return;const rn=ue(Le,Ae),Kt=Ae.source;n.bindTexture(r.TEXTURE_CUBE_MAP,Le.__webglTexture,r.TEXTURE0+ht);const Wt=o.get(Kt);if(Kt.version!==Wt.__version||rn===!0){n.activeTexture(r.TEXTURE0+ht);const xn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Mn=Ae.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Ae.colorSpace),kn=Ae.colorSpace===NoColorSpace||xn===Mn?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Ae.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Ae.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,kn);const Zn=Ae.isCompressedTexture||Ae.image[0].isCompressedTexture,yo=Ae.image[0]&&Ae.image[0].isDataTexture,gn=[];for(let Xt=0;Xt<6;Xt++)!Zn&&!yo?gn[Xt]=V(Ae.image[Xt],!1,!0,S):gn[Xt]=yo?Ae.image[Xt].image:Ae.image[Xt],gn[Xt]=Bn(Ae,gn[Xt]);const oo=gn[0],Cr=j(oo)||g,Wr=l.convert(Ae.format,Ae.colorSpace),Lr=l.convert(Ae.type),qn=ie(Ae.internalFormat,Wr,Lr,Ae.colorSpace),Oo=g&&Ae.isVideoTexture!==!0,Ue=Wt.__version===void 0||rn===!0;let yn=te(Ae,oo,Cr);Be(r.TEXTURE_CUBE_MAP,Ae,Cr);let Dn;if(Zn){Oo&&Ue&&n.texStorage2D(r.TEXTURE_CUBE_MAP,yn,qn,oo.width,oo.height);for(let Xt=0;Xt<6;Xt++){Dn=gn[Xt].mipmaps;for(let Kn=0;Kn<Dn.length;Kn++){const Yr=Dn[Kn];Ae.format!==RGBAFormat?Wr!==null?Oo?n.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn,0,0,Yr.width,Yr.height,Wr,Yr.data):n.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn,qn,Yr.width,Yr.height,0,Yr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Oo?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn,0,0,Yr.width,Yr.height,Wr,Lr,Yr.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn,qn,Yr.width,Yr.height,0,Wr,Lr,Yr.data)}}}else{Dn=Ae.mipmaps,Oo&&Ue&&(Dn.length>0&&yn++,n.texStorage2D(r.TEXTURE_CUBE_MAP,yn,qn,gn[0].width,gn[0].height));for(let Xt=0;Xt<6;Xt++)if(yo){Oo?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,gn[Xt].width,gn[Xt].height,Wr,Lr,gn[Xt].data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,qn,gn[Xt].width,gn[Xt].height,0,Wr,Lr,gn[Xt].data);for(let Kn=0;Kn<Dn.length;Kn++){const qo=Dn[Kn].image[Xt].image;Oo?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn+1,0,0,qo.width,qo.height,Wr,Lr,qo.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn+1,qn,qo.width,qo.height,0,Wr,Lr,qo.data)}}else{Oo?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,Wr,Lr,gn[Xt]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,qn,Wr,Lr,gn[Xt]);for(let Kn=0;Kn<Dn.length;Kn++){const Yr=Dn[Kn];Oo?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn+1,0,0,Wr,Lr,Yr.image[Xt]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,Kn+1,qn,Wr,Lr,Yr.image[Xt])}}}Z(Ae,Cr)&&q(r.TEXTURE_CUBE_MAP),Wt.__version=Kt.version,Ae.onUpdate&&Ae.onUpdate(Ae)}Le.__version=Ae.version}function Bt(Le,Ae,ht,rn,Kt,Wt){const xn=l.convert(ht.format,ht.colorSpace),Mn=l.convert(ht.type),kn=ie(ht.internalFormat,xn,Mn,ht.colorSpace);if(!o.get(Ae).__hasExternalTextures){const yo=Math.max(1,Ae.width>>Wt),gn=Math.max(1,Ae.height>>Wt);Kt===r.TEXTURE_3D||Kt===r.TEXTURE_2D_ARRAY?n.texImage3D(Kt,Wt,kn,yo,gn,Ae.depth,0,xn,Mn,null):n.texImage2D(Kt,Wt,kn,yo,gn,0,xn,Mn,null)}n.bindFramebuffer(r.FRAMEBUFFER,Le),mt(Ae)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,rn,Kt,o.get(ht).__webglTexture,0,Gt(Ae)):(Kt===r.TEXTURE_2D||Kt>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Kt<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,rn,Kt,o.get(ht).__webglTexture,Wt),n.bindFramebuffer(r.FRAMEBUFFER,null)}function Se(Le,Ae,ht){if(r.bindRenderbuffer(r.RENDERBUFFER,Le),Ae.depthBuffer&&!Ae.stencilBuffer){let rn=g===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(ht||mt(Ae)){const Kt=Ae.depthTexture;Kt&&Kt.isDepthTexture&&(Kt.type===FloatType?rn=r.DEPTH_COMPONENT32F:Kt.type===UnsignedIntType&&(rn=r.DEPTH_COMPONENT24));const Wt=Gt(Ae);mt(Ae)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Wt,rn,Ae.width,Ae.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Wt,rn,Ae.width,Ae.height)}else r.renderbufferStorage(r.RENDERBUFFER,rn,Ae.width,Ae.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,Le)}else if(Ae.depthBuffer&&Ae.stencilBuffer){const rn=Gt(Ae);ht&&mt(Ae)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,rn,r.DEPTH24_STENCIL8,Ae.width,Ae.height):mt(Ae)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,rn,r.DEPTH24_STENCIL8,Ae.width,Ae.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,Ae.width,Ae.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,Le)}else{const rn=Ae.isWebGLMultipleRenderTargets===!0?Ae.texture:[Ae.texture];for(let Kt=0;Kt<rn.length;Kt++){const Wt=rn[Kt],xn=l.convert(Wt.format,Wt.colorSpace),Mn=l.convert(Wt.type),kn=ie(Wt.internalFormat,xn,Mn,Wt.colorSpace),Zn=Gt(Ae);ht&&mt(Ae)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Zn,kn,Ae.width,Ae.height):mt(Ae)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Zn,kn,Ae.width,Ae.height):r.renderbufferStorage(r.RENDERBUFFER,kn,Ae.width,Ae.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function Ye(Le,Ae){if(Ae&&Ae.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(r.FRAMEBUFFER,Le),!(Ae.depthTexture&&Ae.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!o.get(Ae.depthTexture).__webglTexture||Ae.depthTexture.image.width!==Ae.width||Ae.depthTexture.image.height!==Ae.height)&&(Ae.depthTexture.image.width=Ae.width,Ae.depthTexture.image.height=Ae.height,Ae.depthTexture.needsUpdate=!0),it(Ae.depthTexture,0);const rn=o.get(Ae.depthTexture).__webglTexture,Kt=Gt(Ae);if(Ae.depthTexture.format===DepthFormat)mt(Ae)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,rn,0,Kt):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,rn,0);else if(Ae.depthTexture.format===DepthStencilFormat)mt(Ae)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,rn,0,Kt):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,rn,0);else throw new Error("Unknown depthTexture format")}function $e(Le){const Ae=o.get(Le),ht=Le.isWebGLCubeRenderTarget===!0;if(Le.depthTexture&&!Ae.__autoAllocateDepthBuffer){if(ht)throw new Error("target.depthTexture not supported in Cube render targets");Ye(Ae.__webglFramebuffer,Le)}else if(ht){Ae.__webglDepthbuffer=[];for(let rn=0;rn<6;rn++)n.bindFramebuffer(r.FRAMEBUFFER,Ae.__webglFramebuffer[rn]),Ae.__webglDepthbuffer[rn]=r.createRenderbuffer(),Se(Ae.__webglDepthbuffer[rn],Le,!1)}else n.bindFramebuffer(r.FRAMEBUFFER,Ae.__webglFramebuffer),Ae.__webglDepthbuffer=r.createRenderbuffer(),Se(Ae.__webglDepthbuffer,Le,!1);n.bindFramebuffer(r.FRAMEBUFFER,null)}function st(Le,Ae,ht){const rn=o.get(Le);Ae!==void 0&&Bt(rn.__webglFramebuffer,Le,Le.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ht!==void 0&&$e(Le)}function et(Le){const Ae=Le.texture,ht=o.get(Le),rn=o.get(Ae);Le.addEventListener("dispose",he),Le.isWebGLMultipleRenderTargets!==!0&&(rn.__webglTexture===void 0&&(rn.__webglTexture=r.createTexture()),rn.__version=Ae.version,d.memory.textures++);const Kt=Le.isWebGLCubeRenderTarget===!0,Wt=Le.isWebGLMultipleRenderTargets===!0,xn=j(Le)||g;if(Kt){ht.__webglFramebuffer=[];for(let Mn=0;Mn<6;Mn++)if(g&&Ae.mipmaps&&Ae.mipmaps.length>0){ht.__webglFramebuffer[Mn]=[];for(let kn=0;kn<Ae.mipmaps.length;kn++)ht.__webglFramebuffer[Mn][kn]=r.createFramebuffer()}else ht.__webglFramebuffer[Mn]=r.createFramebuffer()}else{if(g&&Ae.mipmaps&&Ae.mipmaps.length>0){ht.__webglFramebuffer=[];for(let Mn=0;Mn<Ae.mipmaps.length;Mn++)ht.__webglFramebuffer[Mn]=r.createFramebuffer()}else ht.__webglFramebuffer=r.createFramebuffer();if(Wt)if(a.drawBuffers){const Mn=Le.texture;for(let kn=0,Zn=Mn.length;kn<Zn;kn++){const yo=o.get(Mn[kn]);yo.__webglTexture===void 0&&(yo.__webglTexture=r.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&Le.samples>0&&mt(Le)===!1){const Mn=Wt?Ae:[Ae];ht.__webglMultisampledFramebuffer=r.createFramebuffer(),ht.__webglColorRenderbuffer=[],n.bindFramebuffer(r.FRAMEBUFFER,ht.__webglMultisampledFramebuffer);for(let kn=0;kn<Mn.length;kn++){const Zn=Mn[kn];ht.__webglColorRenderbuffer[kn]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ht.__webglColorRenderbuffer[kn]);const yo=l.convert(Zn.format,Zn.colorSpace),gn=l.convert(Zn.type),oo=ie(Zn.internalFormat,yo,gn,Zn.colorSpace,Le.isXRRenderTarget===!0),Cr=Gt(Le);r.renderbufferStorageMultisample(r.RENDERBUFFER,Cr,oo,Le.width,Le.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+kn,r.RENDERBUFFER,ht.__webglColorRenderbuffer[kn])}r.bindRenderbuffer(r.RENDERBUFFER,null),Le.depthBuffer&&(ht.__webglDepthRenderbuffer=r.createRenderbuffer(),Se(ht.__webglDepthRenderbuffer,Le,!0)),n.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Kt){n.bindTexture(r.TEXTURE_CUBE_MAP,rn.__webglTexture),Be(r.TEXTURE_CUBE_MAP,Ae,xn);for(let Mn=0;Mn<6;Mn++)if(g&&Ae.mipmaps&&Ae.mipmaps.length>0)for(let kn=0;kn<Ae.mipmaps.length;kn++)Bt(ht.__webglFramebuffer[Mn][kn],Le,Ae,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Mn,kn);else Bt(ht.__webglFramebuffer[Mn],Le,Ae,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Mn,0);Z(Ae,xn)&&q(r.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Wt){const Mn=Le.texture;for(let kn=0,Zn=Mn.length;kn<Zn;kn++){const yo=Mn[kn],gn=o.get(yo);n.bindTexture(r.TEXTURE_2D,gn.__webglTexture),Be(r.TEXTURE_2D,yo,xn),Bt(ht.__webglFramebuffer,Le,yo,r.COLOR_ATTACHMENT0+kn,r.TEXTURE_2D,0),Z(yo,xn)&&q(r.TEXTURE_2D)}n.unbindTexture()}else{let Mn=r.TEXTURE_2D;if((Le.isWebGL3DRenderTarget||Le.isWebGLArrayRenderTarget)&&(g?Mn=Le.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Mn,rn.__webglTexture),Be(Mn,Ae,xn),g&&Ae.mipmaps&&Ae.mipmaps.length>0)for(let kn=0;kn<Ae.mipmaps.length;kn++)Bt(ht.__webglFramebuffer[kn],Le,Ae,r.COLOR_ATTACHMENT0,Mn,kn);else Bt(ht.__webglFramebuffer,Le,Ae,r.COLOR_ATTACHMENT0,Mn,0);Z(Ae,xn)&&q(Mn),n.unbindTexture()}Le.depthBuffer&&$e(Le)}function Fe(Le){const Ae=j(Le)||g,ht=Le.isWebGLMultipleRenderTargets===!0?Le.texture:[Le.texture];for(let rn=0,Kt=ht.length;rn<Kt;rn++){const Wt=ht[rn];if(Z(Wt,Ae)){const xn=Le.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Mn=o.get(Wt).__webglTexture;n.bindTexture(xn,Mn),q(xn),n.unbindTexture()}}}function tn(Le){if(g&&Le.samples>0&&mt(Le)===!1){const Ae=Le.isWebGLMultipleRenderTargets?Le.texture:[Le.texture],ht=Le.width,rn=Le.height;let Kt=r.COLOR_BUFFER_BIT;const Wt=[],xn=Le.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Mn=o.get(Le),kn=Le.isWebGLMultipleRenderTargets===!0;if(kn)for(let Zn=0;Zn<Ae.length;Zn++)n.bindFramebuffer(r.FRAMEBUFFER,Mn.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Zn,r.RENDERBUFFER,null),n.bindFramebuffer(r.FRAMEBUFFER,Mn.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Zn,r.TEXTURE_2D,null,0);n.bindFramebuffer(r.READ_FRAMEBUFFER,Mn.__webglMultisampledFramebuffer),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Mn.__webglFramebuffer);for(let Zn=0;Zn<Ae.length;Zn++){Wt.push(r.COLOR_ATTACHMENT0+Zn),Le.depthBuffer&&Wt.push(xn);const yo=Mn.__ignoreDepthValues!==void 0?Mn.__ignoreDepthValues:!1;if(yo===!1&&(Le.depthBuffer&&(Kt|=r.DEPTH_BUFFER_BIT),Le.stencilBuffer&&(Kt|=r.STENCIL_BUFFER_BIT)),kn&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Mn.__webglColorRenderbuffer[Zn]),yo===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[xn]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[xn])),kn){const gn=o.get(Ae[Zn]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,gn,0)}r.blitFramebuffer(0,0,ht,rn,0,0,ht,rn,Kt,r.NEAREST),A&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Wt)}if(n.bindFramebuffer(r.READ_FRAMEBUFFER,null),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),kn)for(let Zn=0;Zn<Ae.length;Zn++){n.bindFramebuffer(r.FRAMEBUFFER,Mn.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Zn,r.RENDERBUFFER,Mn.__webglColorRenderbuffer[Zn]);const yo=o.get(Ae[Zn]).__webglTexture;n.bindFramebuffer(r.FRAMEBUFFER,Mn.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Zn,r.TEXTURE_2D,yo,0)}n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Mn.__webglMultisampledFramebuffer)}}function Gt(Le){return Math.min(w,Le.samples)}function mt(Le){const Ae=o.get(Le);return g&&Le.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Ae.__useRenderToTexture!==!1}function en(Le){const Ae=d.render.frame;R.get(Le)!==Ae&&(R.set(Le,Ae),Le.update())}function Bn(Le,Ae){const ht=Le.colorSpace,rn=Le.format,Kt=Le.type;return Le.isCompressedTexture===!0||Le.isVideoTexture===!0||Le.format===_SRGBAFormat||ht!==LinearSRGBColorSpace&&ht!==NoColorSpace&&(ColorManagement.getTransfer(ht)===SRGBTransfer?g===!1?t.has("EXT_sRGB")===!0&&rn===RGBAFormat?(Le.format=_SRGBAFormat,Le.minFilter=LinearFilter,Le.generateMipmaps=!1):Ae=ImageUtils.sRGBToLinear(Ae):(rn!==RGBAFormat||Kt!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ht)),Ae}this.allocateTextureUnit=Ee,this.resetTextureUnits=Ne,this.setTexture2D=it,this.setTexture2DArray=Te,this.setTexture3D=Ke,this.setTextureCube=Tt,this.rebindTextures=st,this.setupRenderTarget=et,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=tn,this.setupDepthRenderbuffer=$e,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=mt}function WebGLUtils(r,t,n){const o=n.isWebGL2;function a(l,d=NoColorSpace){let g;const y=ColorManagement.getTransfer(d);if(l===UnsignedByteType)return r.UNSIGNED_BYTE;if(l===UnsignedShort4444Type)return r.UNSIGNED_SHORT_4_4_4_4;if(l===UnsignedShort5551Type)return r.UNSIGNED_SHORT_5_5_5_1;if(l===ByteType)return r.BYTE;if(l===ShortType)return r.SHORT;if(l===UnsignedShortType)return r.UNSIGNED_SHORT;if(l===IntType)return r.INT;if(l===UnsignedIntType)return r.UNSIGNED_INT;if(l===FloatType)return r.FLOAT;if(l===HalfFloatType)return o?r.HALF_FLOAT:(g=t.get("OES_texture_half_float"),g!==null?g.HALF_FLOAT_OES:null);if(l===AlphaFormat)return r.ALPHA;if(l===RGBAFormat)return r.RGBA;if(l===LuminanceFormat)return r.LUMINANCE;if(l===LuminanceAlphaFormat)return r.LUMINANCE_ALPHA;if(l===DepthFormat)return r.DEPTH_COMPONENT;if(l===DepthStencilFormat)return r.DEPTH_STENCIL;if(l===_SRGBAFormat)return g=t.get("EXT_sRGB"),g!==null?g.SRGB_ALPHA_EXT:null;if(l===RedFormat)return r.RED;if(l===RedIntegerFormat)return r.RED_INTEGER;if(l===RGFormat)return r.RG;if(l===RGIntegerFormat)return r.RG_INTEGER;if(l===RGBAIntegerFormat)return r.RGBA_INTEGER;if(l===RGB_S3TC_DXT1_Format||l===RGBA_S3TC_DXT1_Format||l===RGBA_S3TC_DXT3_Format||l===RGBA_S3TC_DXT5_Format)if(y===SRGBTransfer)if(g=t.get("WEBGL_compressed_texture_s3tc_srgb"),g!==null){if(l===RGB_S3TC_DXT1_Format)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===RGBA_S3TC_DXT1_Format)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===RGBA_S3TC_DXT3_Format)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===RGBA_S3TC_DXT5_Format)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(g=t.get("WEBGL_compressed_texture_s3tc"),g!==null){if(l===RGB_S3TC_DXT1_Format)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===RGBA_S3TC_DXT1_Format)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===RGBA_S3TC_DXT3_Format)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===RGBA_S3TC_DXT5_Format)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===RGB_PVRTC_4BPPV1_Format||l===RGB_PVRTC_2BPPV1_Format||l===RGBA_PVRTC_4BPPV1_Format||l===RGBA_PVRTC_2BPPV1_Format)if(g=t.get("WEBGL_compressed_texture_pvrtc"),g!==null){if(l===RGB_PVRTC_4BPPV1_Format)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===RGB_PVRTC_2BPPV1_Format)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===RGBA_PVRTC_4BPPV1_Format)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===RGBA_PVRTC_2BPPV1_Format)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===RGB_ETC1_Format)return g=t.get("WEBGL_compressed_texture_etc1"),g!==null?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===RGB_ETC2_Format||l===RGBA_ETC2_EAC_Format)if(g=t.get("WEBGL_compressed_texture_etc"),g!==null){if(l===RGB_ETC2_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(l===RGBA_ETC2_EAC_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===RGBA_ASTC_4x4_Format||l===RGBA_ASTC_5x4_Format||l===RGBA_ASTC_5x5_Format||l===RGBA_ASTC_6x5_Format||l===RGBA_ASTC_6x6_Format||l===RGBA_ASTC_8x5_Format||l===RGBA_ASTC_8x6_Format||l===RGBA_ASTC_8x8_Format||l===RGBA_ASTC_10x5_Format||l===RGBA_ASTC_10x6_Format||l===RGBA_ASTC_10x8_Format||l===RGBA_ASTC_10x10_Format||l===RGBA_ASTC_12x10_Format||l===RGBA_ASTC_12x12_Format)if(g=t.get("WEBGL_compressed_texture_astc"),g!==null){if(l===RGBA_ASTC_4x4_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===RGBA_ASTC_5x4_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===RGBA_ASTC_5x5_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===RGBA_ASTC_6x5_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===RGBA_ASTC_6x6_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===RGBA_ASTC_8x5_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===RGBA_ASTC_8x6_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===RGBA_ASTC_8x8_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===RGBA_ASTC_10x5_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===RGBA_ASTC_10x6_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===RGBA_ASTC_10x8_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===RGBA_ASTC_10x10_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===RGBA_ASTC_12x10_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===RGBA_ASTC_12x12_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===RGBA_BPTC_Format||l===RGB_BPTC_SIGNED_Format||l===RGB_BPTC_UNSIGNED_Format)if(g=t.get("EXT_texture_compression_bptc"),g!==null){if(l===RGBA_BPTC_Format)return y===SRGBTransfer?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(l===RGB_BPTC_SIGNED_Format)return g.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(l===RGB_BPTC_UNSIGNED_Format)return g.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(l===RED_RGTC1_Format||l===SIGNED_RED_RGTC1_Format||l===RED_GREEN_RGTC2_Format||l===SIGNED_RED_GREEN_RGTC2_Format)if(g=t.get("EXT_texture_compression_rgtc"),g!==null){if(l===RGBA_BPTC_Format)return g.COMPRESSED_RED_RGTC1_EXT;if(l===SIGNED_RED_RGTC1_Format)return g.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(l===RED_GREEN_RGTC2_Format)return g.COMPRESSED_RED_GREEN_RGTC2_EXT;if(l===SIGNED_RED_GREEN_RGTC2_Format)return g.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return l===UnsignedInt248Type?o?r.UNSIGNED_INT_24_8:(g=t.get("WEBGL_depth_texture"),g!==null?g.UNSIGNED_INT_24_8_WEBGL:null):r[l]!==void 0?r[l]:null}return{convert:a}}class ArrayCamera extends PerspectiveCamera{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}let Group$5=class extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}};const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group$5,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group$5,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group$5,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const o of t.hand.values())this._getHandJoint(n,o)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,o){let a=null,l=null,d=null;const g=this._targetRay,y=this._grip,S=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(S&&t.hand){d=!0;for(const L of t.hand.values()){const $=n.getJointPose(L,o),O=this._getHandJoint(S,L);$!==null&&(O.matrix.fromArray($.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.matrixWorldNeedsUpdate=!0,O.jointRadius=$.radius),O.visible=$!==null}const x=S.joints["index-finger-tip"],w=S.joints["thumb-tip"],c=x.position.distanceTo(w.position),A=.02,R=.005;S.inputState.pinching&&c>A+R?(S.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!S.inputState.pinching&&c<=A-R&&(S.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else y!==null&&t.gripSpace&&(l=n.getPose(t.gripSpace,o),l!==null&&(y.matrix.fromArray(l.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,l.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(l.linearVelocity)):y.hasLinearVelocity=!1,l.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(l.angularVelocity)):y.hasAngularVelocity=!1));g!==null&&(a=n.getPose(t.targetRaySpace,o),a===null&&l!==null&&(a=l),a!==null&&(g.matrix.fromArray(a.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,a.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(a.linearVelocity)):g.hasLinearVelocity=!1,a.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(a.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return g!==null&&(g.visible=a!==null),y!==null&&(y.visible=l!==null),S!==null&&(S.visible=d!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const o=new Group$5;o.matrixAutoUpdate=!1,o.visible=!1,t.joints[n.jointName]=o,t.add(o)}return t.joints[n.jointName]}}class DepthTexture extends Texture{constructor(t,n,o,a,l,d,g,y,S,x){if(x=x!==void 0?x:DepthFormat,x!==DepthFormat&&x!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");o===void 0&&x===DepthFormat&&(o=UnsignedIntType),o===void 0&&x===DepthStencilFormat&&(o=UnsignedInt248Type),super(null,a,l,d,g,y,x,o,S),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=g!==void 0?g:NearestFilter,this.minFilter=y!==void 0?y:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class WebXRManager extends EventDispatcher{constructor(t,n){super();const o=this;let a=null,l=1,d=null,g="local-floor",y=1,S=null,x=null,w=null,c=null,A=null,R=null;const L=n.getContextAttributes();let $=null,O=null;const z=[],V=[],j=new PerspectiveCamera;j.layers.enable(1),j.viewport=new Vector4;const K=new PerspectiveCamera;K.layers.enable(2),K.viewport=new Vector4;const Z=[j,K],q=new ArrayCamera;q.layers.enable(1),q.layers.enable(2);let ie=null,te=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Te){let Ke=z[Te];return Ke===void 0&&(Ke=new WebXRController,z[Te]=Ke),Ke.getTargetRaySpace()},this.getControllerGrip=function(Te){let Ke=z[Te];return Ke===void 0&&(Ke=new WebXRController,z[Te]=Ke),Ke.getGripSpace()},this.getHand=function(Te){let Ke=z[Te];return Ke===void 0&&(Ke=new WebXRController,z[Te]=Ke),Ke.getHandSpace()};function oe(Te){const Ke=V.indexOf(Te.inputSource);if(Ke===-1)return;const Tt=z[Ke];Tt!==void 0&&(Tt.update(Te.inputSource,Te.frame,S||d),Tt.dispatchEvent({type:Te.type,data:Te.inputSource}))}function re(){a.removeEventListener("select",oe),a.removeEventListener("selectstart",oe),a.removeEventListener("selectend",oe),a.removeEventListener("squeeze",oe),a.removeEventListener("squeezestart",oe),a.removeEventListener("squeezeend",oe),a.removeEventListener("end",re),a.removeEventListener("inputsourceschange",he);for(let Te=0;Te<z.length;Te++){const Ke=V[Te];Ke!==null&&(V[Te]=null,z[Te].disconnect(Ke))}ie=null,te=null,t.setRenderTarget($),A=null,c=null,w=null,a=null,O=null,it.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Te){l=Te,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Te){g=Te,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return S||d},this.setReferenceSpace=function(Te){S=Te},this.getBaseLayer=function(){return c!==null?c:A},this.getBinding=function(){return w},this.getFrame=function(){return R},this.getSession=function(){return a},this.setSession=async function(Te){if(a=Te,a!==null){if($=t.getRenderTarget(),a.addEventListener("select",oe),a.addEventListener("selectstart",oe),a.addEventListener("selectend",oe),a.addEventListener("squeeze",oe),a.addEventListener("squeezestart",oe),a.addEventListener("squeezeend",oe),a.addEventListener("end",re),a.addEventListener("inputsourceschange",he),L.xrCompatible!==!0&&await n.makeXRCompatible(),a.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const Ke={antialias:a.renderState.layers===void 0?L.antialias:!0,alpha:!0,depth:L.depth,stencil:L.stencil,framebufferScaleFactor:l};A=new XRWebGLLayer(a,n,Ke),a.updateRenderState({baseLayer:A}),O=new WebGLRenderTarget(A.framebufferWidth,A.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:t.outputColorSpace,stencilBuffer:L.stencil})}else{let Ke=null,Tt=null,Lt=null;L.depth&&(Lt=L.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Ke=L.stencil?DepthStencilFormat:DepthFormat,Tt=L.stencil?UnsignedInt248Type:UnsignedIntType);const Qt={colorFormat:n.RGBA8,depthFormat:Lt,scaleFactor:l};w=new XRWebGLBinding(a,n),c=w.createProjectionLayer(Qt),a.updateRenderState({layers:[c]}),O=new WebGLRenderTarget(c.textureWidth,c.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(c.textureWidth,c.textureHeight,Tt,void 0,void 0,void 0,void 0,void 0,void 0,Ke),stencilBuffer:L.stencil,colorSpace:t.outputColorSpace,samples:L.antialias?4:0});const Xe=t.properties.get(O);Xe.__ignoreDepthValues=c.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(y),S=null,d=await a.requestReferenceSpace(g),it.setContext(a),it.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode};function he(Te){for(let Ke=0;Ke<Te.removed.length;Ke++){const Tt=Te.removed[Ke],Lt=V.indexOf(Tt);Lt>=0&&(V[Lt]=null,z[Lt].disconnect(Tt))}for(let Ke=0;Ke<Te.added.length;Ke++){const Tt=Te.added[Ke];let Lt=V.indexOf(Tt);if(Lt===-1){for(let Xe=0;Xe<z.length;Xe++)if(Xe>=V.length){V.push(Tt),Lt=Xe;break}else if(V[Xe]===null){V[Xe]=Tt,Lt=Xe;break}if(Lt===-1)break}const Qt=z[Lt];Qt&&Qt.connect(Tt)}}const _e=new Vector3,me=new Vector3;function be(Te,Ke,Tt){_e.setFromMatrixPosition(Ke.matrixWorld),me.setFromMatrixPosition(Tt.matrixWorld);const Lt=_e.distanceTo(me),Qt=Ke.projectionMatrix.elements,Xe=Tt.projectionMatrix.elements,Be=Qt[14]/(Qt[10]-1),ue=Qt[14]/(Qt[10]+1),Dt=(Qt[9]+1)/Qt[5],Rt=(Qt[9]-1)/Qt[5],Bt=(Qt[8]-1)/Qt[0],Se=(Xe[8]+1)/Xe[0],Ye=Be*Bt,$e=Be*Se,st=Lt/(-Bt+Se),et=st*-Bt;Ke.matrixWorld.decompose(Te.position,Te.quaternion,Te.scale),Te.translateX(et),Te.translateZ(st),Te.matrixWorld.compose(Te.position,Te.quaternion,Te.scale),Te.matrixWorldInverse.copy(Te.matrixWorld).invert();const Fe=Be+st,tn=ue+st,Gt=Ye-et,mt=$e+(Lt-et),en=Dt*ue/tn*Fe,Bn=Rt*ue/tn*Fe;Te.projectionMatrix.makePerspective(Gt,mt,en,Bn,Fe,tn),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert()}function Q(Te,Ke){Ke===null?Te.matrixWorld.copy(Te.matrix):Te.matrixWorld.multiplyMatrices(Ke.matrixWorld,Te.matrix),Te.matrixWorldInverse.copy(Te.matrixWorld).invert()}this.updateCamera=function(Te){if(a===null)return;q.near=K.near=j.near=Te.near,q.far=K.far=j.far=Te.far,(ie!==q.near||te!==q.far)&&(a.updateRenderState({depthNear:q.near,depthFar:q.far}),ie=q.near,te=q.far);const Ke=Te.parent,Tt=q.cameras;Q(q,Ke);for(let Lt=0;Lt<Tt.length;Lt++)Q(Tt[Lt],Ke);Tt.length===2?be(q,j,K):q.projectionMatrix.copy(j.projectionMatrix),Ne(Te,q,Ke)};function Ne(Te,Ke,Tt){Tt===null?Te.matrix.copy(Ke.matrixWorld):(Te.matrix.copy(Tt.matrixWorld),Te.matrix.invert(),Te.matrix.multiply(Ke.matrixWorld)),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.updateMatrixWorld(!0),Te.projectionMatrix.copy(Ke.projectionMatrix),Te.projectionMatrixInverse.copy(Ke.projectionMatrixInverse),Te.isPerspectiveCamera&&(Te.fov=RAD2DEG*2*Math.atan(1/Te.projectionMatrix.elements[5]),Te.zoom=1)}this.getCamera=function(){return q},this.getFoveation=function(){if(!(c===null&&A===null))return y},this.setFoveation=function(Te){y=Te,c!==null&&(c.fixedFoveation=Te),A!==null&&A.fixedFoveation!==void 0&&(A.fixedFoveation=Te)};let Ee=null;function Ge(Te,Ke){if(x=Ke.getViewerPose(S||d),R=Ke,x!==null){const Tt=x.views;A!==null&&(t.setRenderTargetFramebuffer(O,A.framebuffer),t.setRenderTarget(O));let Lt=!1;Tt.length!==q.cameras.length&&(q.cameras.length=0,Lt=!0);for(let Qt=0;Qt<Tt.length;Qt++){const Xe=Tt[Qt];let Be=null;if(A!==null)Be=A.getViewport(Xe);else{const Dt=w.getViewSubImage(c,Xe);Be=Dt.viewport,Qt===0&&(t.setRenderTargetTextures(O,Dt.colorTexture,c.ignoreDepthValues?void 0:Dt.depthStencilTexture),t.setRenderTarget(O))}let ue=Z[Qt];ue===void 0&&(ue=new PerspectiveCamera,ue.layers.enable(Qt),ue.viewport=new Vector4,Z[Qt]=ue),ue.matrix.fromArray(Xe.transform.matrix),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.projectionMatrix.fromArray(Xe.projectionMatrix),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert(),ue.viewport.set(Be.x,Be.y,Be.width,Be.height),Qt===0&&(q.matrix.copy(ue.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale)),Lt===!0&&q.cameras.push(ue)}}for(let Tt=0;Tt<z.length;Tt++){const Lt=V[Tt],Qt=z[Tt];Lt!==null&&Qt!==void 0&&Qt.update(Lt,Ke,S||d)}Ee&&Ee(Te,Ke),Ke.detectedPlanes&&o.dispatchEvent({type:"planesdetected",data:Ke}),R=null}const it=new WebGLAnimation;it.setAnimationLoop(Ge),this.setAnimationLoop=function(Te){Ee=Te},this.dispose=function(){}}}function WebGLMaterials(r,t){function n($,O){$.matrixAutoUpdate===!0&&$.updateMatrix(),O.value.copy($.matrix)}function o($,O){O.color.getRGB($.fogColor.value,getUnlitUniformColorSpace(r)),O.isFog?($.fogNear.value=O.near,$.fogFar.value=O.far):O.isFogExp2&&($.fogDensity.value=O.density)}function a($,O,z,V,j){O.isMeshBasicMaterial||O.isMeshLambertMaterial?l($,O):O.isMeshToonMaterial?(l($,O),w($,O)):O.isMeshPhongMaterial?(l($,O),x($,O)):O.isMeshStandardMaterial?(l($,O),c($,O),O.isMeshPhysicalMaterial&&A($,O,j)):O.isMeshMatcapMaterial?(l($,O),R($,O)):O.isMeshDepthMaterial?l($,O):O.isMeshDistanceMaterial?(l($,O),L($,O)):O.isMeshNormalMaterial?l($,O):O.isLineBasicMaterial?(d($,O),O.isLineDashedMaterial&&g($,O)):O.isPointsMaterial?y($,O,z,V):O.isSpriteMaterial?S($,O):O.isShadowMaterial?($.color.value.copy(O.color),$.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}function l($,O){$.opacity.value=O.opacity,O.color&&$.diffuse.value.copy(O.color),O.emissive&&$.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&($.map.value=O.map,n(O.map,$.mapTransform)),O.alphaMap&&($.alphaMap.value=O.alphaMap,n(O.alphaMap,$.alphaMapTransform)),O.bumpMap&&($.bumpMap.value=O.bumpMap,n(O.bumpMap,$.bumpMapTransform),$.bumpScale.value=O.bumpScale,O.side===BackSide&&($.bumpScale.value*=-1)),O.normalMap&&($.normalMap.value=O.normalMap,n(O.normalMap,$.normalMapTransform),$.normalScale.value.copy(O.normalScale),O.side===BackSide&&$.normalScale.value.negate()),O.displacementMap&&($.displacementMap.value=O.displacementMap,n(O.displacementMap,$.displacementMapTransform),$.displacementScale.value=O.displacementScale,$.displacementBias.value=O.displacementBias),O.emissiveMap&&($.emissiveMap.value=O.emissiveMap,n(O.emissiveMap,$.emissiveMapTransform)),O.specularMap&&($.specularMap.value=O.specularMap,n(O.specularMap,$.specularMapTransform)),O.alphaTest>0&&($.alphaTest.value=O.alphaTest);const z=t.get(O).envMap;if(z&&($.envMap.value=z,$.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,$.reflectivity.value=O.reflectivity,$.ior.value=O.ior,$.refractionRatio.value=O.refractionRatio),O.lightMap){$.lightMap.value=O.lightMap;const V=r._useLegacyLights===!0?Math.PI:1;$.lightMapIntensity.value=O.lightMapIntensity*V,n(O.lightMap,$.lightMapTransform)}O.aoMap&&($.aoMap.value=O.aoMap,$.aoMapIntensity.value=O.aoMapIntensity,n(O.aoMap,$.aoMapTransform))}function d($,O){$.diffuse.value.copy(O.color),$.opacity.value=O.opacity,O.map&&($.map.value=O.map,n(O.map,$.mapTransform))}function g($,O){$.dashSize.value=O.dashSize,$.totalSize.value=O.dashSize+O.gapSize,$.scale.value=O.scale}function y($,O,z,V){$.diffuse.value.copy(O.color),$.opacity.value=O.opacity,$.size.value=O.size*z,$.scale.value=V*.5,O.map&&($.map.value=O.map,n(O.map,$.uvTransform)),O.alphaMap&&($.alphaMap.value=O.alphaMap,n(O.alphaMap,$.alphaMapTransform)),O.alphaTest>0&&($.alphaTest.value=O.alphaTest)}function S($,O){$.diffuse.value.copy(O.color),$.opacity.value=O.opacity,$.rotation.value=O.rotation,O.map&&($.map.value=O.map,n(O.map,$.mapTransform)),O.alphaMap&&($.alphaMap.value=O.alphaMap,n(O.alphaMap,$.alphaMapTransform)),O.alphaTest>0&&($.alphaTest.value=O.alphaTest)}function x($,O){$.specular.value.copy(O.specular),$.shininess.value=Math.max(O.shininess,1e-4)}function w($,O){O.gradientMap&&($.gradientMap.value=O.gradientMap)}function c($,O){$.metalness.value=O.metalness,O.metalnessMap&&($.metalnessMap.value=O.metalnessMap,n(O.metalnessMap,$.metalnessMapTransform)),$.roughness.value=O.roughness,O.roughnessMap&&($.roughnessMap.value=O.roughnessMap,n(O.roughnessMap,$.roughnessMapTransform)),t.get(O).envMap&&($.envMapIntensity.value=O.envMapIntensity)}function A($,O,z){$.ior.value=O.ior,O.sheen>0&&($.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),$.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&($.sheenColorMap.value=O.sheenColorMap,n(O.sheenColorMap,$.sheenColorMapTransform)),O.sheenRoughnessMap&&($.sheenRoughnessMap.value=O.sheenRoughnessMap,n(O.sheenRoughnessMap,$.sheenRoughnessMapTransform))),O.clearcoat>0&&($.clearcoat.value=O.clearcoat,$.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&($.clearcoatMap.value=O.clearcoatMap,n(O.clearcoatMap,$.clearcoatMapTransform)),O.clearcoatRoughnessMap&&($.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap,n(O.clearcoatRoughnessMap,$.clearcoatRoughnessMapTransform)),O.clearcoatNormalMap&&($.clearcoatNormalMap.value=O.clearcoatNormalMap,n(O.clearcoatNormalMap,$.clearcoatNormalMapTransform),$.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),O.side===BackSide&&$.clearcoatNormalScale.value.negate())),O.iridescence>0&&($.iridescence.value=O.iridescence,$.iridescenceIOR.value=O.iridescenceIOR,$.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],$.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&($.iridescenceMap.value=O.iridescenceMap,n(O.iridescenceMap,$.iridescenceMapTransform)),O.iridescenceThicknessMap&&($.iridescenceThicknessMap.value=O.iridescenceThicknessMap,n(O.iridescenceThicknessMap,$.iridescenceThicknessMapTransform))),O.transmission>0&&($.transmission.value=O.transmission,$.transmissionSamplerMap.value=z.texture,$.transmissionSamplerSize.value.set(z.width,z.height),O.transmissionMap&&($.transmissionMap.value=O.transmissionMap,n(O.transmissionMap,$.transmissionMapTransform)),$.thickness.value=O.thickness,O.thicknessMap&&($.thicknessMap.value=O.thicknessMap,n(O.thicknessMap,$.thicknessMapTransform)),$.attenuationDistance.value=O.attenuationDistance,$.attenuationColor.value.copy(O.attenuationColor)),O.anisotropy>0&&($.anisotropyVector.value.set(O.anisotropy*Math.cos(O.anisotropyRotation),O.anisotropy*Math.sin(O.anisotropyRotation)),O.anisotropyMap&&($.anisotropyMap.value=O.anisotropyMap,n(O.anisotropyMap,$.anisotropyMapTransform))),$.specularIntensity.value=O.specularIntensity,$.specularColor.value.copy(O.specularColor),O.specularColorMap&&($.specularColorMap.value=O.specularColorMap,n(O.specularColorMap,$.specularColorMapTransform)),O.specularIntensityMap&&($.specularIntensityMap.value=O.specularIntensityMap,n(O.specularIntensityMap,$.specularIntensityMapTransform))}function R($,O){O.matcap&&($.matcap.value=O.matcap)}function L($,O){const z=t.get(O).light;$.referencePosition.value.setFromMatrixPosition(z.matrixWorld),$.nearDistance.value=z.shadow.camera.near,$.farDistance.value=z.shadow.camera.far}return{refreshFogUniforms:o,refreshMaterialUniforms:a}}function WebGLUniformsGroups(r,t,n,o){let a={},l={},d=[];const g=n.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function y(z,V){const j=V.program;o.uniformBlockBinding(z,j)}function S(z,V){let j=a[z.id];j===void 0&&(R(z),j=x(z),a[z.id]=j,z.addEventListener("dispose",$));const K=V.program;o.updateUBOMapping(z,K);const Z=t.render.frame;l[z.id]!==Z&&(c(z),l[z.id]=Z)}function x(z){const V=w();z.__bindingPointIndex=V;const j=r.createBuffer(),K=z.__size,Z=z.usage;return r.bindBuffer(r.UNIFORM_BUFFER,j),r.bufferData(r.UNIFORM_BUFFER,K,Z),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,V,j),j}function w(){for(let z=0;z<g;z++)if(d.indexOf(z)===-1)return d.push(z),z;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function c(z){const V=a[z.id],j=z.uniforms,K=z.__cache;r.bindBuffer(r.UNIFORM_BUFFER,V);for(let Z=0,q=j.length;Z<q;Z++){const ie=j[Z];if(A(ie,Z,K)===!0){const te=ie.__offset,oe=Array.isArray(ie.value)?ie.value:[ie.value];let re=0;for(let he=0;he<oe.length;he++){const _e=oe[he],me=L(_e);typeof _e=="number"?(ie.__data[0]=_e,r.bufferSubData(r.UNIFORM_BUFFER,te+re,ie.__data)):_e.isMatrix3?(ie.__data[0]=_e.elements[0],ie.__data[1]=_e.elements[1],ie.__data[2]=_e.elements[2],ie.__data[3]=_e.elements[0],ie.__data[4]=_e.elements[3],ie.__data[5]=_e.elements[4],ie.__data[6]=_e.elements[5],ie.__data[7]=_e.elements[0],ie.__data[8]=_e.elements[6],ie.__data[9]=_e.elements[7],ie.__data[10]=_e.elements[8],ie.__data[11]=_e.elements[0]):(_e.toArray(ie.__data,re),re+=me.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,te,ie.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function A(z,V,j){const K=z.value;if(j[V]===void 0){if(typeof K=="number")j[V]=K;else{const Z=Array.isArray(K)?K:[K],q=[];for(let ie=0;ie<Z.length;ie++)q.push(Z[ie].clone());j[V]=q}return!0}else if(typeof K=="number"){if(j[V]!==K)return j[V]=K,!0}else{const Z=Array.isArray(j[V])?j[V]:[j[V]],q=Array.isArray(K)?K:[K];for(let ie=0;ie<Z.length;ie++){const te=Z[ie];if(te.equals(q[ie])===!1)return te.copy(q[ie]),!0}}return!1}function R(z){const V=z.uniforms;let j=0;const K=16;let Z=0;for(let q=0,ie=V.length;q<ie;q++){const te=V[q],oe={boundary:0,storage:0},re=Array.isArray(te.value)?te.value:[te.value];for(let he=0,_e=re.length;he<_e;he++){const me=re[he],be=L(me);oe.boundary+=be.boundary,oe.storage+=be.storage}if(te.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=j,q>0){Z=j%K;const he=K-Z;Z!==0&&he-oe.boundary<0&&(j+=K-Z,te.__offset=j)}j+=oe.storage}return Z=j%K,Z>0&&(j+=K-Z),z.__size=j,z.__cache={},this}function L(z){const V={boundary:0,storage:0};return typeof z=="number"?(V.boundary=4,V.storage=4):z.isVector2?(V.boundary=8,V.storage=8):z.isVector3||z.isColor?(V.boundary=16,V.storage=12):z.isVector4?(V.boundary=16,V.storage=16):z.isMatrix3?(V.boundary=48,V.storage=48):z.isMatrix4?(V.boundary=64,V.storage=64):z.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",z),V}function $(z){const V=z.target;V.removeEventListener("dispose",$);const j=d.indexOf(V.__bindingPointIndex);d.splice(j,1),r.deleteBuffer(a[V.id]),delete a[V.id],delete l[V.id]}function O(){for(const z in a)r.deleteBuffer(a[z]);d=[],a={},l={}}return{bind:y,update:S,dispose:O}}class WebGLRenderer{constructor(t={}){const{canvas:n=createCanvasElement(),context:o=null,depth:a=!0,stencil:l=!0,alpha:d=!1,antialias:g=!1,premultipliedAlpha:y=!0,preserveDrawingBuffer:S=!1,powerPreference:x="default",failIfMajorPerformanceCaveat:w=!1}=t;this.isWebGLRenderer=!0;let c;o!==null?c=o.getContextAttributes().alpha:c=d;const A=new Uint32Array(4),R=new Int32Array(4);let L=null,$=null;const O=[],z=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const V=this;let j=!1,K=0,Z=0,q=null,ie=-1,te=null;const oe=new Vector4,re=new Vector4;let he=null;const _e=new Color(0);let me=0,be=n.width,Q=n.height,Ne=1,Ee=null,Ge=null;const it=new Vector4(0,0,be,Q),Te=new Vector4(0,0,be,Q);let Ke=!1;const Tt=new Frustum;let Lt=!1,Qt=!1,Xe=null;const Be=new Matrix4,ue=new Vector2,Dt=new Vector3,Rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Bt(){return q===null?Ne:1}let Se=o;function Ye(ze,vt){for(let zt=0;zt<ze.length;zt++){const Yt=ze[zt],qt=n.getContext(Yt,vt);if(qt!==null)return qt}return null}try{const ze={alpha:!0,depth:a,stencil:l,antialias:g,premultipliedAlpha:y,preserveDrawingBuffer:S,powerPreference:x,failIfMajorPerformanceCaveat:w};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${REVISION}`),n.addEventListener("webglcontextlost",Oo,!1),n.addEventListener("webglcontextrestored",Ue,!1),n.addEventListener("webglcontextcreationerror",yn,!1),Se===null){const vt=["webgl2","webgl","experimental-webgl"];if(V.isWebGL1Renderer===!0&&vt.shift(),Se=Ye(vt,ze),Se===null)throw Ye(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Se instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Se.getShaderPrecisionFormat===void 0&&(Se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ze){throw console.error("THREE.WebGLRenderer: "+ze.message),ze}let $e,st,et,Fe,tn,Gt,mt,en,Bn,Le,Ae,ht,rn,Kt,Wt,xn,Mn,kn,Zn,yo,gn,oo,Cr,Wr;function Lr(){$e=new WebGLExtensions(Se),st=new WebGLCapabilities(Se,$e,t),$e.init(st),oo=new WebGLUtils(Se,$e,st),et=new WebGLState(Se,$e,st),Fe=new WebGLInfo(Se),tn=new WebGLProperties,Gt=new WebGLTextures(Se,$e,et,tn,st,oo,Fe),mt=new WebGLCubeMaps(V),en=new WebGLCubeUVMaps(V),Bn=new WebGLAttributes(Se,st),Cr=new WebGLBindingStates(Se,$e,Bn,st),Le=new WebGLGeometries(Se,Bn,Fe,Cr),Ae=new WebGLObjects(Se,Le,Bn,Fe),Zn=new WebGLMorphtargets(Se,st,Gt),xn=new WebGLClipping(tn),ht=new WebGLPrograms(V,mt,en,$e,st,Cr,xn),rn=new WebGLMaterials(V,tn),Kt=new WebGLRenderLists,Wt=new WebGLRenderStates($e,st),kn=new WebGLBackground(V,mt,en,et,Ae,c,y),Mn=new WebGLShadowMap(V,Ae,st),Wr=new WebGLUniformsGroups(Se,Fe,st,et),yo=new WebGLBufferRenderer(Se,$e,Fe,st),gn=new WebGLIndexedBufferRenderer(Se,$e,Fe,st),Fe.programs=ht.programs,V.capabilities=st,V.extensions=$e,V.properties=tn,V.renderLists=Kt,V.shadowMap=Mn,V.state=et,V.info=Fe}Lr();const qn=new WebXRManager(V,Se);this.xr=qn,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){const ze=$e.get("WEBGL_lose_context");ze&&ze.loseContext()},this.forceContextRestore=function(){const ze=$e.get("WEBGL_lose_context");ze&&ze.restoreContext()},this.getPixelRatio=function(){return Ne},this.setPixelRatio=function(ze){ze!==void 0&&(Ne=ze,this.setSize(be,Q,!1))},this.getSize=function(ze){return ze.set(be,Q)},this.setSize=function(ze,vt,zt=!0){if(qn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}be=ze,Q=vt,n.width=Math.floor(ze*Ne),n.height=Math.floor(vt*Ne),zt===!0&&(n.style.width=ze+"px",n.style.height=vt+"px"),this.setViewport(0,0,ze,vt)},this.getDrawingBufferSize=function(ze){return ze.set(be*Ne,Q*Ne).floor()},this.setDrawingBufferSize=function(ze,vt,zt){be=ze,Q=vt,Ne=zt,n.width=Math.floor(ze*zt),n.height=Math.floor(vt*zt),this.setViewport(0,0,ze,vt)},this.getCurrentViewport=function(ze){return ze.copy(oe)},this.getViewport=function(ze){return ze.copy(it)},this.setViewport=function(ze,vt,zt,Yt){ze.isVector4?it.set(ze.x,ze.y,ze.z,ze.w):it.set(ze,vt,zt,Yt),et.viewport(oe.copy(it).multiplyScalar(Ne).floor())},this.getScissor=function(ze){return ze.copy(Te)},this.setScissor=function(ze,vt,zt,Yt){ze.isVector4?Te.set(ze.x,ze.y,ze.z,ze.w):Te.set(ze,vt,zt,Yt),et.scissor(re.copy(Te).multiplyScalar(Ne).floor())},this.getScissorTest=function(){return Ke},this.setScissorTest=function(ze){et.setScissorTest(Ke=ze)},this.setOpaqueSort=function(ze){Ee=ze},this.setTransparentSort=function(ze){Ge=ze},this.getClearColor=function(ze){return ze.copy(kn.getClearColor())},this.setClearColor=function(){kn.setClearColor.apply(kn,arguments)},this.getClearAlpha=function(){return kn.getClearAlpha()},this.setClearAlpha=function(){kn.setClearAlpha.apply(kn,arguments)},this.clear=function(ze=!0,vt=!0,zt=!0){let Yt=0;if(ze){let qt=!1;if(q!==null){const fr=q.texture.format;qt=fr===RGBAIntegerFormat||fr===RGIntegerFormat||fr===RedIntegerFormat}if(qt){const fr=q.texture.type,jr=fr===UnsignedByteType||fr===UnsignedIntType||fr===UnsignedShortType||fr===UnsignedInt248Type||fr===UnsignedShort4444Type||fr===UnsignedShort5551Type,Nt=kn.getClearColor(),po=kn.getClearAlpha(),So=Nt.r,xo=Nt.g,go=Nt.b;jr?(A[0]=So,A[1]=xo,A[2]=go,A[3]=po,Se.clearBufferuiv(Se.COLOR,0,A)):(R[0]=So,R[1]=xo,R[2]=go,R[3]=po,Se.clearBufferiv(Se.COLOR,0,R))}else Yt|=Se.COLOR_BUFFER_BIT}vt&&(Yt|=Se.DEPTH_BUFFER_BIT),zt&&(Yt|=Se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Se.clear(Yt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Oo,!1),n.removeEventListener("webglcontextrestored",Ue,!1),n.removeEventListener("webglcontextcreationerror",yn,!1),Kt.dispose(),Wt.dispose(),tn.dispose(),mt.dispose(),en.dispose(),Ae.dispose(),Cr.dispose(),Wr.dispose(),ht.dispose(),qn.dispose(),qn.removeEventListener("sessionstart",js),qn.removeEventListener("sessionend",Nr),Xe&&(Xe.dispose(),Xe=null),Vn.stop()};function Oo(ze){ze.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),j=!0}function Ue(){console.log("THREE.WebGLRenderer: Context Restored."),j=!1;const ze=Fe.autoReset,vt=Mn.enabled,zt=Mn.autoUpdate,Yt=Mn.needsUpdate,qt=Mn.type;Lr(),Fe.autoReset=ze,Mn.enabled=vt,Mn.autoUpdate=zt,Mn.needsUpdate=Yt,Mn.type=qt}function yn(ze){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ze.statusMessage)}function Dn(ze){const vt=ze.target;vt.removeEventListener("dispose",Dn),Xt(vt)}function Xt(ze){Kn(ze),tn.remove(ze)}function Kn(ze){const vt=tn.get(ze).programs;vt!==void 0&&(vt.forEach(function(zt){ht.releaseProgram(zt)}),ze.isShaderMaterial&&ht.releaseShaderCache(ze))}this.renderBufferDirect=function(ze,vt,zt,Yt,qt,fr){vt===null&&(vt=Rt);const jr=qt.isMesh&&qt.matrixWorld.determinant()<0,Nt=Pa(ze,vt,zt,Yt,qt);et.setMaterial(Yt,jr);let po=zt.index,So=1;if(Yt.wireframe===!0){if(po=Le.getWireframeAttribute(zt),po===void 0)return;So=2}const xo=zt.drawRange,go=zt.attributes.position;let Ui=xo.start*So,tl=(xo.start+xo.count)*So;fr!==null&&(Ui=Math.max(Ui,fr.start*So),tl=Math.min(tl,(fr.start+fr.count)*So)),po!==null?(Ui=Math.max(Ui,0),tl=Math.min(tl,po.count)):go!=null&&(Ui=Math.max(Ui,0),tl=Math.min(tl,go.count));const Ra=tl-Ui;if(Ra<0||Ra===1/0)return;Cr.setup(qt,Yt,Nt,zt,po);let jl,$i=yo;if(po!==null&&(jl=Bn.get(po),$i=gn,$i.setIndex(jl)),qt.isMesh)Yt.wireframe===!0?(et.setLineWidth(Yt.wireframeLinewidth*Bt()),$i.setMode(Se.LINES)):$i.setMode(Se.TRIANGLES);else if(qt.isLine){let Ur=Yt.linewidth;Ur===void 0&&(Ur=1),et.setLineWidth(Ur*Bt()),qt.isLineSegments?$i.setMode(Se.LINES):qt.isLineLoop?$i.setMode(Se.LINE_LOOP):$i.setMode(Se.LINE_STRIP)}else qt.isPoints?$i.setMode(Se.POINTS):qt.isSprite&&$i.setMode(Se.TRIANGLES);if(qt.isInstancedMesh)$i.renderInstances(Ui,Ra,qt.count);else if(zt.isInstancedBufferGeometry){const Ur=zt._maxInstanceCount!==void 0?zt._maxInstanceCount:1/0,Li=Math.min(zt.instanceCount,Ur);$i.renderInstances(Ui,Ra,Li)}else $i.render(Ui,Ra)};function Yr(ze,vt,zt){ze.transparent===!0&&ze.side===DoubleSide&&ze.forceSinglePass===!1?(ze.side=BackSide,ze.needsUpdate=!0,Da(ze,vt,zt),ze.side=FrontSide,ze.needsUpdate=!0,Da(ze,vt,zt),ze.side=DoubleSide):Da(ze,vt,zt)}this.compile=function(ze,vt,zt=null){zt===null&&(zt=ze),$=Wt.get(zt),$.init(),z.push($),zt.traverseVisible(function(qt){qt.isLight&&qt.layers.test(vt.layers)&&($.pushLight(qt),qt.castShadow&&$.pushShadow(qt))}),ze!==zt&&ze.traverseVisible(function(qt){qt.isLight&&qt.layers.test(vt.layers)&&($.pushLight(qt),qt.castShadow&&$.pushShadow(qt))}),$.setupLights(V._useLegacyLights);const Yt=new Set;return ze.traverse(function(qt){const fr=qt.material;if(fr)if(Array.isArray(fr))for(let jr=0;jr<fr.length;jr++){const Nt=fr[jr];Yr(Nt,zt,qt),Yt.add(Nt)}else Yr(fr,zt,qt),Yt.add(fr)}),z.pop(),$=null,Yt},this.compileAsync=function(ze,vt,zt=null){const Yt=this.compile(ze,vt,zt);return new Promise(qt=>{function fr(){if(Yt.forEach(function(jr){tn.get(jr).currentProgram.isReady()&&Yt.delete(jr)}),Yt.size===0){qt(ze);return}setTimeout(fr,10)}$e.get("KHR_parallel_shader_compile")!==null?fr():setTimeout(fr,10)})};let qo=null;function vi(ze){qo&&qo(ze)}function js(){Vn.stop()}function Nr(){Vn.start()}const Vn=new WebGLAnimation;Vn.setAnimationLoop(vi),typeof self<"u"&&Vn.setContext(self),this.setAnimationLoop=function(ze){qo=ze,qn.setAnimationLoop(ze),ze===null?Vn.stop():Vn.start()},qn.addEventListener("sessionstart",js),qn.addEventListener("sessionend",Nr),this.render=function(ze,vt){if(vt!==void 0&&vt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(j===!0)return;ze.matrixWorldAutoUpdate===!0&&ze.updateMatrixWorld(),vt.parent===null&&vt.matrixWorldAutoUpdate===!0&&vt.updateMatrixWorld(),qn.enabled===!0&&qn.isPresenting===!0&&(qn.cameraAutoUpdate===!0&&qn.updateCamera(vt),vt=qn.getCamera()),ze.isScene===!0&&ze.onBeforeRender(V,ze,vt,q),$=Wt.get(ze,z.length),$.init(),z.push($),Be.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),Tt.setFromProjectionMatrix(Be),Qt=this.localClippingEnabled,Lt=xn.init(this.clippingPlanes,Qt),L=Kt.get(ze,O.length),L.init(),O.push(L),Is(ze,vt,0,V.sortObjects),L.finish(),V.sortObjects===!0&&L.sort(Ee,Ge),this.info.render.frame++,Lt===!0&&xn.beginShadows();const zt=$.state.shadowsArray;if(Mn.render(zt,ze,vt),Lt===!0&&xn.endShadows(),this.info.autoReset===!0&&this.info.reset(),kn.render(L,ze),$.setupLights(V._useLegacyLights),vt.isArrayCamera){const Yt=vt.cameras;for(let qt=0,fr=Yt.length;qt<fr;qt++){const jr=Yt[qt];M0(L,ze,jr,jr.viewport)}}else M0(L,ze,vt);q!==null&&(Gt.updateMultisampleRenderTarget(q),Gt.updateRenderTargetMipmap(q)),ze.isScene===!0&&ze.onAfterRender(V,ze,vt),Cr.resetDefaultState(),ie=-1,te=null,z.pop(),z.length>0?$=z[z.length-1]:$=null,O.pop(),O.length>0?L=O[O.length-1]:L=null};function Is(ze,vt,zt,Yt){if(ze.visible===!1)return;if(ze.layers.test(vt.layers)){if(ze.isGroup)zt=ze.renderOrder;else if(ze.isLOD)ze.autoUpdate===!0&&ze.update(vt);else if(ze.isLight)$.pushLight(ze),ze.castShadow&&$.pushShadow(ze);else if(ze.isSprite){if(!ze.frustumCulled||Tt.intersectsSprite(ze)){Yt&&Dt.setFromMatrixPosition(ze.matrixWorld).applyMatrix4(Be);const jr=Ae.update(ze),Nt=ze.material;Nt.visible&&L.push(ze,jr,Nt,zt,Dt.z,null)}}else if((ze.isMesh||ze.isLine||ze.isPoints)&&(!ze.frustumCulled||Tt.intersectsObject(ze))){const jr=Ae.update(ze),Nt=ze.material;if(Yt&&(ze.boundingSphere!==void 0?(ze.boundingSphere===null&&ze.computeBoundingSphere(),Dt.copy(ze.boundingSphere.center)):(jr.boundingSphere===null&&jr.computeBoundingSphere(),Dt.copy(jr.boundingSphere.center)),Dt.applyMatrix4(ze.matrixWorld).applyMatrix4(Be)),Array.isArray(Nt)){const po=jr.groups;for(let So=0,xo=po.length;So<xo;So++){const go=po[So],Ui=Nt[go.materialIndex];Ui&&Ui.visible&&L.push(ze,jr,Ui,zt,Dt.z,go)}}else Nt.visible&&L.push(ze,jr,Nt,zt,Dt.z,null)}}const fr=ze.children;for(let jr=0,Nt=fr.length;jr<Nt;jr++)Is(fr[jr],vt,zt,Yt)}function M0(ze,vt,zt,Yt){const qt=ze.opaque,fr=ze.transmissive,jr=ze.transparent;$.setupLightsView(zt),Lt===!0&&xn.setGlobalState(V.clippingPlanes,zt),fr.length>0&&sg(qt,fr,vt,zt),Yt&&et.viewport(oe.copy(Yt)),qt.length>0&&xh(qt,vt,zt),fr.length>0&&xh(fr,vt,zt),jr.length>0&&xh(jr,vt,zt),et.buffers.depth.setTest(!0),et.buffers.depth.setMask(!0),et.buffers.color.setMask(!0),et.setPolygonOffset(!1)}function sg(ze,vt,zt,Yt){if((zt.isScene===!0?zt.overrideMaterial:null)!==null)return;const fr=st.isWebGL2;Xe===null&&(Xe=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:fr?4:0})),V.getDrawingBufferSize(ue),fr?Xe.setSize(ue.x,ue.y):Xe.setSize(floorPowerOfTwo(ue.x),floorPowerOfTwo(ue.y));const jr=V.getRenderTarget();V.setRenderTarget(Xe),V.getClearColor(_e),me=V.getClearAlpha(),me<1&&V.setClearColor(16777215,.5),V.clear();const Nt=V.toneMapping;V.toneMapping=NoToneMapping,xh(ze,zt,Yt),Gt.updateMultisampleRenderTarget(Xe),Gt.updateRenderTargetMipmap(Xe);let po=!1;for(let So=0,xo=vt.length;So<xo;So++){const go=vt[So],Ui=go.object,tl=go.geometry,Ra=go.material,jl=go.group;if(Ra.side===DoubleSide&&Ui.layers.test(Yt.layers)){const $i=Ra.side;Ra.side=BackSide,Ra.needsUpdate=!0,Md(Ui,zt,Yt,tl,Ra,jl),Ra.side=$i,Ra.needsUpdate=!0,po=!0}}po===!0&&(Gt.updateMultisampleRenderTarget(Xe),Gt.updateRenderTargetMipmap(Xe)),V.setRenderTarget(jr),V.setClearColor(_e,me),V.toneMapping=Nt}function xh(ze,vt,zt){const Yt=vt.isScene===!0?vt.overrideMaterial:null;for(let qt=0,fr=ze.length;qt<fr;qt++){const jr=ze[qt],Nt=jr.object,po=jr.geometry,So=Yt===null?jr.material:Yt,xo=jr.group;Nt.layers.test(zt.layers)&&Md(Nt,vt,zt,po,So,xo)}}function Md(ze,vt,zt,Yt,qt,fr){ze.onBeforeRender(V,vt,zt,Yt,qt,fr),ze.modelViewMatrix.multiplyMatrices(zt.matrixWorldInverse,ze.matrixWorld),ze.normalMatrix.getNormalMatrix(ze.modelViewMatrix),qt.onBeforeRender(V,vt,zt,Yt,ze,fr),qt.transparent===!0&&qt.side===DoubleSide&&qt.forceSinglePass===!1?(qt.side=BackSide,qt.needsUpdate=!0,V.renderBufferDirect(zt,vt,Yt,qt,ze,fr),qt.side=FrontSide,qt.needsUpdate=!0,V.renderBufferDirect(zt,vt,Yt,qt,ze,fr),qt.side=DoubleSide):V.renderBufferDirect(zt,vt,Yt,qt,ze,fr),ze.onAfterRender(V,vt,zt,Yt,qt,fr)}function Da(ze,vt,zt){vt.isScene!==!0&&(vt=Rt);const Yt=tn.get(ze),qt=$.state.lights,fr=$.state.shadowsArray,jr=qt.state.version,Nt=ht.getParameters(ze,qt.state,fr,vt,zt),po=ht.getProgramCacheKey(Nt);let So=Yt.programs;Yt.environment=ze.isMeshStandardMaterial?vt.environment:null,Yt.fog=vt.fog,Yt.envMap=(ze.isMeshStandardMaterial?en:mt).get(ze.envMap||Yt.environment),So===void 0&&(ze.addEventListener("dispose",Dn),So=new Map,Yt.programs=So);let xo=So.get(po);if(xo!==void 0){if(Yt.currentProgram===xo&&Yt.lightsStateVersion===jr)return Lu(ze,Nt),xo}else Nt.uniforms=ht.getUniforms(ze),ze.onBuild(zt,Nt,V),ze.onBeforeCompile(Nt,V),xo=ht.acquireProgram(Nt,po),So.set(po,xo),Yt.uniforms=Nt.uniforms;const go=Yt.uniforms;return(!ze.isShaderMaterial&&!ze.isRawShaderMaterial||ze.clipping===!0)&&(go.clippingPlanes=xn.uniform),Lu(ze,Nt),Yt.needsLights=Nu(ze),Yt.lightsStateVersion=jr,Yt.needsLights&&(go.ambientLightColor.value=qt.state.ambient,go.lightProbe.value=qt.state.probe,go.directionalLights.value=qt.state.directional,go.directionalLightShadows.value=qt.state.directionalShadow,go.spotLights.value=qt.state.spot,go.spotLightShadows.value=qt.state.spotShadow,go.rectAreaLights.value=qt.state.rectArea,go.ltc_1.value=qt.state.rectAreaLTC1,go.ltc_2.value=qt.state.rectAreaLTC2,go.pointLights.value=qt.state.point,go.pointLightShadows.value=qt.state.pointShadow,go.hemisphereLights.value=qt.state.hemi,go.directionalShadowMap.value=qt.state.directionalShadowMap,go.directionalShadowMatrix.value=qt.state.directionalShadowMatrix,go.spotShadowMap.value=qt.state.spotShadowMap,go.spotLightMatrix.value=qt.state.spotLightMatrix,go.spotLightMap.value=qt.state.spotLightMap,go.pointShadowMap.value=qt.state.pointShadowMap,go.pointShadowMatrix.value=qt.state.pointShadowMatrix),Yt.currentProgram=xo,Yt.uniformsList=null,xo}function Ch(ze){if(ze.uniformsList===null){const vt=ze.currentProgram.getUniforms();ze.uniformsList=WebGLUniforms.seqWithValue(vt.seq,ze.uniforms)}return ze.uniformsList}function Lu(ze,vt){const zt=tn.get(ze);zt.outputColorSpace=vt.outputColorSpace,zt.instancing=vt.instancing,zt.instancingColor=vt.instancingColor,zt.skinning=vt.skinning,zt.morphTargets=vt.morphTargets,zt.morphNormals=vt.morphNormals,zt.morphColors=vt.morphColors,zt.morphTargetsCount=vt.morphTargetsCount,zt.numClippingPlanes=vt.numClippingPlanes,zt.numIntersection=vt.numClipIntersection,zt.vertexAlphas=vt.vertexAlphas,zt.vertexTangents=vt.vertexTangents,zt.toneMapping=vt.toneMapping}function Pa(ze,vt,zt,Yt,qt){vt.isScene!==!0&&(vt=Rt),Gt.resetTextureUnits();const fr=vt.fog,jr=Yt.isMeshStandardMaterial?vt.environment:null,Nt=q===null?V.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:LinearSRGBColorSpace,po=(Yt.isMeshStandardMaterial?en:mt).get(Yt.envMap||jr),So=Yt.vertexColors===!0&&!!zt.attributes.color&&zt.attributes.color.itemSize===4,xo=!!zt.attributes.tangent&&(!!Yt.normalMap||Yt.anisotropy>0),go=!!zt.morphAttributes.position,Ui=!!zt.morphAttributes.normal,tl=!!zt.morphAttributes.color;let Ra=NoToneMapping;Yt.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(Ra=V.toneMapping);const jl=zt.morphAttributes.position||zt.morphAttributes.normal||zt.morphAttributes.color,$i=jl!==void 0?jl.length:0,Ur=tn.get(Yt),Li=$.state.lights;if(Lt===!0&&(Qt===!0||ze!==te)){const ea=ze===te&&Yt.id===ie;xn.setState(Yt,ze,ea)}let Mo=!1;Yt.version===Ur.__version?(Ur.needsLights&&Ur.lightsStateVersion!==Li.state.version||Ur.outputColorSpace!==Nt||qt.isInstancedMesh&&Ur.instancing===!1||!qt.isInstancedMesh&&Ur.instancing===!0||qt.isSkinnedMesh&&Ur.skinning===!1||!qt.isSkinnedMesh&&Ur.skinning===!0||qt.isInstancedMesh&&Ur.instancingColor===!0&&qt.instanceColor===null||qt.isInstancedMesh&&Ur.instancingColor===!1&&qt.instanceColor!==null||Ur.envMap!==po||Yt.fog===!0&&Ur.fog!==fr||Ur.numClippingPlanes!==void 0&&(Ur.numClippingPlanes!==xn.numPlanes||Ur.numIntersection!==xn.numIntersection)||Ur.vertexAlphas!==So||Ur.vertexTangents!==xo||Ur.morphTargets!==go||Ur.morphNormals!==Ui||Ur.morphColors!==tl||Ur.toneMapping!==Ra||st.isWebGL2===!0&&Ur.morphTargetsCount!==$i)&&(Mo=!0):(Mo=!0,Ur.__version=Yt.version);let Ei=Ur.currentProgram;Mo===!0&&(Ei=Da(Yt,vt,qt));let kd=!1,Zc=!1,Cf=!1;const Fo=Ei.getUniforms(),ts=Ur.uniforms;if(et.useProgram(Ei.program)&&(kd=!0,Zc=!0,Cf=!0),Yt.id!==ie&&(ie=Yt.id,Zc=!0),kd||te!==ze){Fo.setValue(Se,"projectionMatrix",ze.projectionMatrix),Fo.setValue(Se,"viewMatrix",ze.matrixWorldInverse);const ea=Fo.map.cameraPosition;ea!==void 0&&ea.setValue(Se,Dt.setFromMatrixPosition(ze.matrixWorld)),st.logarithmicDepthBuffer&&Fo.setValue(Se,"logDepthBufFC",2/(Math.log(ze.far+1)/Math.LN2)),(Yt.isMeshPhongMaterial||Yt.isMeshToonMaterial||Yt.isMeshLambertMaterial||Yt.isMeshBasicMaterial||Yt.isMeshStandardMaterial||Yt.isShaderMaterial)&&Fo.setValue(Se,"isOrthographic",ze.isOrthographicCamera===!0),te!==ze&&(te=ze,Zc=!0,Cf=!0)}if(qt.isSkinnedMesh){Fo.setOptional(Se,qt,"bindMatrix"),Fo.setOptional(Se,qt,"bindMatrixInverse");const ea=qt.skeleton;ea&&(st.floatVertexTextures?(ea.boneTexture===null&&ea.computeBoneTexture(),Fo.setValue(Se,"boneTexture",ea.boneTexture,Gt),Fo.setValue(Se,"boneTextureSize",ea.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const cg=zt.morphAttributes;if((cg.position!==void 0||cg.normal!==void 0||cg.color!==void 0&&st.isWebGL2===!0)&&Zn.update(qt,zt,Ei),(Zc||Ur.receiveShadow!==qt.receiveShadow)&&(Ur.receiveShadow=qt.receiveShadow,Fo.setValue(Se,"receiveShadow",qt.receiveShadow)),Yt.isMeshGouraudMaterial&&Yt.envMap!==null&&(ts.envMap.value=po,ts.flipEnvMap.value=po.isCubeTexture&&po.isRenderTargetTexture===!1?-1:1),Zc&&(Fo.setValue(Se,"toneMappingExposure",V.toneMappingExposure),Ur.needsLights&&lg(ts,Cf),fr&&Yt.fog===!0&&rn.refreshFogUniforms(ts,fr),rn.refreshMaterialUniforms(ts,Yt,Ne,Q,Xe),WebGLUniforms.upload(Se,Ch(Ur),ts,Gt)),Yt.isShaderMaterial&&Yt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Se,Ch(Ur),ts,Gt),Yt.uniformsNeedUpdate=!1),Yt.isSpriteMaterial&&Fo.setValue(Se,"center",qt.center),Fo.setValue(Se,"modelViewMatrix",qt.modelViewMatrix),Fo.setValue(Se,"normalMatrix",qt.normalMatrix),Fo.setValue(Se,"modelMatrix",qt.matrixWorld),Yt.isShaderMaterial||Yt.isRawShaderMaterial){const ea=Yt.uniformsGroups;for(let qc=0,Zl=ea.length;qc<Zl;qc++)if(st.isWebGL2){const ug=ea[qc];Wr.update(ug,Ei),Wr.bind(ug,Ei)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ei}function lg(ze,vt){ze.ambientLightColor.needsUpdate=vt,ze.lightProbe.needsUpdate=vt,ze.directionalLights.needsUpdate=vt,ze.directionalLightShadows.needsUpdate=vt,ze.pointLights.needsUpdate=vt,ze.pointLightShadows.needsUpdate=vt,ze.spotLights.needsUpdate=vt,ze.spotLightShadows.needsUpdate=vt,ze.rectAreaLights.needsUpdate=vt,ze.hemisphereLights.needsUpdate=vt}function Nu(ze){return ze.isMeshLambertMaterial||ze.isMeshToonMaterial||ze.isMeshPhongMaterial||ze.isMeshStandardMaterial||ze.isShadowMaterial||ze.isShaderMaterial&&ze.lights===!0}this.getActiveCubeFace=function(){return K},this.getActiveMipmapLevel=function(){return Z},this.getRenderTarget=function(){return q},this.setRenderTargetTextures=function(ze,vt,zt){tn.get(ze.texture).__webglTexture=vt,tn.get(ze.depthTexture).__webglTexture=zt;const Yt=tn.get(ze);Yt.__hasExternalTextures=!0,Yt.__hasExternalTextures&&(Yt.__autoAllocateDepthBuffer=zt===void 0,Yt.__autoAllocateDepthBuffer||$e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Yt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ze,vt){const zt=tn.get(ze);zt.__webglFramebuffer=vt,zt.__useDefaultFramebuffer=vt===void 0},this.setRenderTarget=function(ze,vt=0,zt=0){q=ze,K=vt,Z=zt;let Yt=!0,qt=null,fr=!1,jr=!1;if(ze){const po=tn.get(ze);po.__useDefaultFramebuffer!==void 0?(et.bindFramebuffer(Se.FRAMEBUFFER,null),Yt=!1):po.__webglFramebuffer===void 0?Gt.setupRenderTarget(ze):po.__hasExternalTextures&&Gt.rebindTextures(ze,tn.get(ze.texture).__webglTexture,tn.get(ze.depthTexture).__webglTexture);const So=ze.texture;(So.isData3DTexture||So.isDataArrayTexture||So.isCompressedArrayTexture)&&(jr=!0);const xo=tn.get(ze).__webglFramebuffer;ze.isWebGLCubeRenderTarget?(Array.isArray(xo[vt])?qt=xo[vt][zt]:qt=xo[vt],fr=!0):st.isWebGL2&&ze.samples>0&&Gt.useMultisampledRTT(ze)===!1?qt=tn.get(ze).__webglMultisampledFramebuffer:Array.isArray(xo)?qt=xo[zt]:qt=xo,oe.copy(ze.viewport),re.copy(ze.scissor),he=ze.scissorTest}else oe.copy(it).multiplyScalar(Ne).floor(),re.copy(Te).multiplyScalar(Ne).floor(),he=Ke;if(et.bindFramebuffer(Se.FRAMEBUFFER,qt)&&st.drawBuffers&&Yt&&et.drawBuffers(ze,qt),et.viewport(oe),et.scissor(re),et.setScissorTest(he),fr){const po=tn.get(ze.texture);Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_CUBE_MAP_POSITIVE_X+vt,po.__webglTexture,zt)}else if(jr){const po=tn.get(ze.texture),So=vt||0;Se.framebufferTextureLayer(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,po.__webglTexture,zt||0,So)}ie=-1},this.readRenderTargetPixels=function(ze,vt,zt,Yt,qt,fr,jr){if(!(ze&&ze.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nt=tn.get(ze).__webglFramebuffer;if(ze.isWebGLCubeRenderTarget&&jr!==void 0&&(Nt=Nt[jr]),Nt){et.bindFramebuffer(Se.FRAMEBUFFER,Nt);try{const po=ze.texture,So=po.format,xo=po.type;if(So!==RGBAFormat&&oo.convert(So)!==Se.getParameter(Se.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const go=xo===HalfFloatType&&($e.has("EXT_color_buffer_half_float")||st.isWebGL2&&$e.has("EXT_color_buffer_float"));if(xo!==UnsignedByteType&&oo.convert(xo)!==Se.getParameter(Se.IMPLEMENTATION_COLOR_READ_TYPE)&&!(xo===FloatType&&(st.isWebGL2||$e.has("OES_texture_float")||$e.has("WEBGL_color_buffer_float")))&&!go){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}vt>=0&&vt<=ze.width-Yt&&zt>=0&&zt<=ze.height-qt&&Se.readPixels(vt,zt,Yt,qt,oo.convert(So),oo.convert(xo),fr)}finally{const po=q!==null?tn.get(q).__webglFramebuffer:null;et.bindFramebuffer(Se.FRAMEBUFFER,po)}}},this.copyFramebufferToTexture=function(ze,vt,zt=0){const Yt=Math.pow(2,-zt),qt=Math.floor(vt.image.width*Yt),fr=Math.floor(vt.image.height*Yt);Gt.setTexture2D(vt,0),Se.copyTexSubImage2D(Se.TEXTURE_2D,zt,0,0,ze.x,ze.y,qt,fr),et.unbindTexture()},this.copyTextureToTexture=function(ze,vt,zt,Yt=0){const qt=vt.image.width,fr=vt.image.height,jr=oo.convert(zt.format),Nt=oo.convert(zt.type);Gt.setTexture2D(zt,0),Se.pixelStorei(Se.UNPACK_FLIP_Y_WEBGL,zt.flipY),Se.pixelStorei(Se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,zt.premultiplyAlpha),Se.pixelStorei(Se.UNPACK_ALIGNMENT,zt.unpackAlignment),vt.isDataTexture?Se.texSubImage2D(Se.TEXTURE_2D,Yt,ze.x,ze.y,qt,fr,jr,Nt,vt.image.data):vt.isCompressedTexture?Se.compressedTexSubImage2D(Se.TEXTURE_2D,Yt,ze.x,ze.y,vt.mipmaps[0].width,vt.mipmaps[0].height,jr,vt.mipmaps[0].data):Se.texSubImage2D(Se.TEXTURE_2D,Yt,ze.x,ze.y,jr,Nt,vt.image),Yt===0&&zt.generateMipmaps&&Se.generateMipmap(Se.TEXTURE_2D),et.unbindTexture()},this.copyTextureToTexture3D=function(ze,vt,zt,Yt,qt=0){if(V.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const fr=ze.max.x-ze.min.x+1,jr=ze.max.y-ze.min.y+1,Nt=ze.max.z-ze.min.z+1,po=oo.convert(Yt.format),So=oo.convert(Yt.type);let xo;if(Yt.isData3DTexture)Gt.setTexture3D(Yt,0),xo=Se.TEXTURE_3D;else if(Yt.isDataArrayTexture)Gt.setTexture2DArray(Yt,0),xo=Se.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Se.pixelStorei(Se.UNPACK_FLIP_Y_WEBGL,Yt.flipY),Se.pixelStorei(Se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Yt.premultiplyAlpha),Se.pixelStorei(Se.UNPACK_ALIGNMENT,Yt.unpackAlignment);const go=Se.getParameter(Se.UNPACK_ROW_LENGTH),Ui=Se.getParameter(Se.UNPACK_IMAGE_HEIGHT),tl=Se.getParameter(Se.UNPACK_SKIP_PIXELS),Ra=Se.getParameter(Se.UNPACK_SKIP_ROWS),jl=Se.getParameter(Se.UNPACK_SKIP_IMAGES),$i=zt.isCompressedTexture?zt.mipmaps[0]:zt.image;Se.pixelStorei(Se.UNPACK_ROW_LENGTH,$i.width),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,$i.height),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,ze.min.x),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,ze.min.y),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,ze.min.z),zt.isDataTexture||zt.isData3DTexture?Se.texSubImage3D(xo,qt,vt.x,vt.y,vt.z,fr,jr,Nt,po,So,$i.data):zt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Se.compressedTexSubImage3D(xo,qt,vt.x,vt.y,vt.z,fr,jr,Nt,po,$i.data)):Se.texSubImage3D(xo,qt,vt.x,vt.y,vt.z,fr,jr,Nt,po,So,$i),Se.pixelStorei(Se.UNPACK_ROW_LENGTH,go),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,Ui),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,tl),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,Ra),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,jl),qt===0&&Yt.generateMipmaps&&Se.generateMipmap(xo),et.unbindTexture()},this.initTexture=function(ze){ze.isCubeTexture?Gt.setTextureCube(ze,0):ze.isData3DTexture?Gt.setTexture3D(ze,0):ze.isDataArrayTexture||ze.isCompressedArrayTexture?Gt.setTexture2DArray(ze,0):Gt.setTexture2D(ze,0),et.unbindTexture()},this.resetState=function(){K=0,Z=0,q=null,et.reset(),Cr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===DisplayP3ColorSpace?"display-p3":"srgb",n.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class PointsMaterial extends Material{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(t=new BufferGeometry,n=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,n){const o=this.geometry,a=this.matrixWorld,l=t.params.Points.threshold,d=o.drawRange;if(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere.copy(o.boundingSphere),_sphere.applyMatrix4(a),_sphere.radius+=l,t.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(a).invert(),_ray.copy(t.ray).applyMatrix4(_inverseMatrix);const g=l/((this.scale.x+this.scale.y+this.scale.z)/3),y=g*g,S=o.index,w=o.attributes.position;if(S!==null){const c=Math.max(0,d.start),A=Math.min(S.count,d.start+d.count);for(let R=c,L=A;R<L;R++){const $=S.getX(R);_position$2.fromBufferAttribute(w,$),testPoint(_position$2,$,y,a,t,n,this)}}else{const c=Math.max(0,d.start),A=Math.min(w.count,d.start+d.count);for(let R=c,L=A;R<L;R++)_position$2.fromBufferAttribute(w,R),testPoint(_position$2,R,y,a,t,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,o=Object.keys(n);if(o.length>0){const a=n[o[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=a.length;l<d;l++){const g=a[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=l}}}}}function testPoint(r,t,n,o,a,l,d){const g=_ray.distanceSqToPoint(r);if(g<n){const y=new Vector3;_ray.closestPointToPoint(r,y),y.applyMatrix4(o);const S=a.ray.origin.distanceTo(y);if(S<a.near||S>a.far)return;l.push({distance:S,distanceToRay:Math.sqrt(g),point:y,index:t,face:null,object:d})}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const backGround_vue_vue_type_style_index_0_lang="",_hoisted_1$b={id:"bg"},_sfc_main$e={__name:"backGround",setup(r){let t,n,o,a,l=0,d="#fff";onMounted(()=>{g()});function g(){y(),x()}function y(){let w=document.createElement("div");document.getElementById("bg").appendChild(w),n=new Scene,o=new PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),o.position.z=1e3,o.position.set(500,350),o.lookAt(n.position);let c=new BufferGeometry,A=new Float32Array(50*50*3),R=new Float32Array(50*50),L=0,$=0;for(let z=0;z<50;z++)for(let V=0;V<50;V++)A[L]=z*100-50*100/2,A[L+1]=0,A[L+2]=V*100-50*100/2,R[$]=1,L+=3,$++;c.setAttribute("position",new BufferAttribute(A,3)),c.setAttribute("scale",new BufferAttribute(R,1));let O=new ShaderMaterial({uniforms:{color:{value:new Color(d)}},vertexShader:"attribute float scale; void main() {vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );gl_PointSize = scale * ( 300.0 / - mvPosition.z );gl_Position = projectionMatrix * mvPosition;}",fragmentShader:"uniform vec3 color;void main() {if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;gl_FragColor = vec4( color, 1.0 );}"});a=new Points(c,O),n.add(a),t=new WebGLRenderer({antialias:!0,alpha:!0}),t.setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),w.appendChild(t.domElement),window.addEventListener("resize",S,!1)}function S(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}function x(){requestAnimationFrame(x);let w=a.geometry.attributes.position.array,c=a.geometry.attributes.scale.array,A=0,R=0;for(let L=0;L<50;L++)for(let $=0;$<50;$++)w[A+1]=Math.sin((L+l)*.3)*50+Math.sin(($+l)*.5)*50,c[R]=(Math.sin((L+l)*.3)+1)*8+(Math.sin(($+l)*.5)+1)*8,A+=3,R++;a.geometry.attributes.position.needsUpdate=!0,a.geometry.attributes.scale.needsUpdate=!0,t.render(n,o),l+=.1}return(w,c)=>(openBlock(),createElementBlock("div",_hoisted_1$b,[renderSlot(w.$slots,"default")]))}},regist_vue_vue_type_style_index_0_scoped_92409147_lang="",_withScopeId$4=r=>(pushScopeId("data-v-92409147"),r=r(),popScopeId(),r),_hoisted_1$a={id:"container"},_hoisted_2$a={id:"regist"},_hoisted_3$5=_withScopeId$4(()=>createBaseVNode("h2",{style:{color:"#352864","text-align":"left","padding-left":"60px","margin-top":"40px","font-size":"24px"}}," regist",-1)),_hoisted_4$4={class:"body"},_sfc_main$d={__name:"regist",setup(r){let t=null;const{proxy:n}=getCurrentInstance(),o=useRouter(),a=reactive({username:"",passWord:""}),l=()=>{d.value.validate(x=>{if(x){let w={username:a.username,password:a.passWord};regist$1(w).then(c=>{console.log(c),n.$Message.success("注册成功"),o.push("/login")})}})},d=ref(null),S=reactive({username:[{validator:(x,w,c)=>w===""?c(new Error("this username is empty")):c(),trigger:"blur"}],passwd:[{validator:(x,w,c)=>a.passWord===""?c(new Error("this password is empty")):c(),trigger:"blur"}]});return t=document.documentElement.addEventListener("keydown",x=>{x.key==="Enter"&&l()}),onBeforeUnmount(()=>{document.removeEventListener(t)}),(x,w)=>{const c=resolveComponent("Input"),A=resolveComponent("FormItem"),R=resolveComponent("Button"),L=resolveComponent("Form");return openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode$1(_sfc_main$e,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$a,[createVNode$1(L,{"label-position":"top",model:a,rules:S,ref_key:"ruleforms",ref:d},{default:withCtx(()=>[_hoisted_3$5,createBaseVNode("div",_hoisted_4$4,[createVNode$1(A,{label:"用户名",class:"form-label",prop:"username"},{default:withCtx(()=>[createVNode$1(c,{type:"text",size:"large",placeholder:"请输入用户名",modelValue:a.username,"onUpdate:modelValue":w[0]||(w[0]=$=>a.username=$),clearable:!0,prefix:"ios-contact",style:{width:"85%"}},null,8,["modelValue"])]),_:1}),createVNode$1(A,{label:"密码",class:"form-label",prop:"passwd"},{default:withCtx(()=>[createVNode$1(c,{type:"password",size:"large",prefix:"md-lock",password:!0,modelValue:a.passWord,"onUpdate:modelValue":w[1]||(w[1]=$=>a.passWord=$),style:{width:"85%"}},null,8,["modelValue"])]),_:1})]),createVNode$1(R,{size:"large",type:"primary",onClick:l,style:{width:"75%",color:"#fff","margin-top":"45px","margin-left":"53px",height:"45px"}},{default:withCtx(()=>[createTextVNode("注册 ")]),_:1})]),_:1},8,["model","rules"])])]),_:1})])}}},regist=_export_sfc(_sfc_main$d,[["__scopeId","data-v-92409147"]]),getNav=()=>request({url:"/getNavMenu"}),Nav_vue_vue_type_style_index_0_scoped_697a0c55_lang="",_hoisted_1$9={style:{border:"1px solid #e8eaec","border-left":"0","border-right":"0"}},_hoisted_2$9={href:"javascript:void(0)"},_sfc_main$c={__name:"Nav",setup(__props){const{proxy}=getCurrentInstance();let menu=ref([]),dateNow=getTime$1();const router=useRouter(),themel=ref("dark");onMounted(()=>{time(),getnav(),isLogin()});const getnav=async()=>{menu.value.length=0;let data=await getNav();menu.value=eval("("+data.data+")")},goUrl=r=>{usename.value?router.push({path:r}):proxy.$Message.info("请先登录")},exit=()=>{user.userInfo.token=void 0,sessionStorage.removeItem("token"),router.push("/login")},time=()=>{dateNow.Hour>=19?themel.value="dark":themel.value="light"},toLogin=()=>{router.push("/login")};let isLogin=()=>(user.userInfo.token===void 0?flag.value=!0:flag.value=!1,flag);setInterval(time,3600/2*1e3);let flag=ref(!0);const user=userinfoStore();let usename=ref("hhhh");return usename.value=user.userInfo.username,(r,t)=>{const n=resolveComponent("Icon"),o=resolveComponent("router-link"),a=resolveComponent("Menu-Item"),l=resolveComponent("Dropdown-item"),d=resolveComponent("Dropdown-menu"),g=resolveComponent("Dropdown"),y=resolveComponent("Button"),S=resolveComponent("i-Menu");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$9,[createVNode$1(S,{mode:"horizontal",theme:themel.value,"active-name":"1",class:"nv"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(menu),x=>(openBlock(),createBlock(a,{name:x.name,key:x.name},{default:withCtx(()=>[createBaseVNode("div",null,[createVNode$1(n,{type:x.type},null,8,["type"]),createVNode$1(o,{to:x.src,class:normalizeClass([themel.value,"nv"])},{default:withCtx(()=>[createTextVNode(toDisplayString(x.name),1)]),_:2},1032,["to","class"])])]),_:2},1032,["name"]))),128)),createVNode$1(a,{name:"2"},{default:withCtx(()=>[createVNode$1(g,{transfer:!0},createSlots({default:withCtx(()=>[createBaseVNode("a",_hoisted_2$9,[createTextVNode(" 用户："+toDisplayString(unref(usename))+" ",1),createVNode$1(n,{type:"arrow-down-b"})])]),_:2},[unref(flag)==!1?{name:"list",fn:withCtx(()=>[createVNode$1(d,null,{default:withCtx(()=>[createVNode$1(l,null,{default:withCtx(()=>[createBaseVNode("div",{onClick:t[0]||(t[0]=x=>goUrl("/index/userinfo/:username"))},"个人信息")]),_:1}),createVNode$1(l,null,{default:withCtx(()=>[createBaseVNode("div",{onClick:t[1]||(t[1]=x=>goUrl("/mail"))},"私信")]),_:1}),createVNode$1(l,null,{default:withCtx(()=>[createBaseVNode("div",{onClick:t[2]||(t[2]=x=>goUrl("/index/collection"))},"我的收藏")]),_:1}),createVNode$1(l,null,{default:withCtx(()=>[createBaseVNode("div",{onClick:exit},"退出")]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1}),withDirectives(createVNode$1(y,{type:"primary",style:{right:"20px",position:"absolute",top:"15px"},onClick:toLogin},{default:withCtx(()=>[createTextVNode("登录")]),_:1},512),[[vShow,unref(flag)]])]),_:1},8,["theme"])])])}}},Nav=_export_sfc(_sfc_main$c,[["__scopeId","data-v-697a0c55"]]),Mail_vue_vue_type_style_index_0_scoped_90190d93_lang="",_hoisted_1$8={class:"article"},_hoisted_2$8={class:"type"},_hoisted_3$4={style:{"margin-left":"15px"}},_sfc_main$b={__name:"Mail",setup(r){const t=useRouter(),n=userinfoStore().userInfo.username;let o=sessionStorage.getItem("user");o=JSON.parse(o),o||t.push("/login");let a=ref([]);onMounted(()=>{l()});const l=()=>{getMail(n).then(d=>{let y=JSON.parse(d.data.data)[0].users;a.value=y.filter(S=>S!==n)})};return l(),onUnmounted(()=>{}),onBeforeUnmount(()=>{}),(d,g)=>{const y=resolveComponent("Divider"),S=resolveComponent("Avatar"),x=resolveComponent("Time"),w=resolveComponent("router-link"),c=resolveComponent("Icon"),A=resolveComponent("Card"),R=resolveComponent("Col"),L=resolveComponent("Row");return openBlock(),createElementBlock(Fragment,null,[createVNode$1(Nav),createBaseVNode("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$8,[createVNode$1(y,{orientation:"left"},{default:withCtx(()=>[createTextVNode("私信")]),_:1}),createTextVNode(" // 私信用户的展示区域 "),createVNode$1(L,{gutter:16,warp:!0},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(a),$=>(openBlock(),createBlock(R,{span:"6",key:$.m_id,xs:24,sm:16,md:16,lg:6,xl:6},{default:withCtx(()=>[createVNode$1(A,{class:"card"},{extra:withCtx(()=>[createVNode$1(c,{type:"ios-close",size:"24",style:{top:"-13px",right:"-10px",position:"absolute",cursor:"pointer"}})]),default:withCtx(()=>[createVNode$1(S,{icon:"ios-person"}),createVNode$1(x,{time:new Date().getTime()-86400*3*1e3,type:"date"},null,8,["time"]),createBaseVNode("p",_hoisted_3$4,[createVNode$1(w,{to:`/mail/${$}`},{default:withCtx(()=>[createTextVNode(toDisplayString($),1)]),_:2},1032,["to"]),createVNode$1(c,{type:"ios-more",size:"24",style:{right:"40px",position:"absolute",cursor:"pointer"}})])]),_:2},1024)]),_:2},1024))),128))]),_:1})])])],64)}}},Mail=_export_sfc(_sfc_main$b,[["__scopeId","data-v-90190d93"]]);var viewuiplus_min={exports:{}};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);(function(r,t){var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(w,c,A)=>c in w?n(w,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):w[c]=A,S=(w,c)=>{for(var A in c||(c={}))d.call(c,A)&&y(w,A,c[A]);if(l)for(var A of l(c))g.call(c,A)&&y(w,A,c[A]);return w},x=(w,c)=>o(w,a(c));(function(w,c){c(t,require$$0)})(commonjsGlobal,function(w,c){const A=typeof window<"u",R=function(){return A&&document.addEventListener?function(v,E,P,G=!1){v&&E&&P&&v.addEventListener(E,P,G)}:function(v,E,P){v&&E&&P&&v.attachEvent("on"+E,P)}}(),L=function(){return A&&document.removeEventListener?function(v,E,P,G=!1){v&&E&&v.removeEventListener(E,P,G)}:function(v,E,P){v&&E&&v.detachEvent("on"+E,P)}}();var $=(v,E)=>{const P=v.__vccOpts||v;for(const[G,H]of E)P[G]=H;return P};const O="ivu-affix";function z(v,E){const P=E?"pageYOffset":"pageXOffset",G=E?"scrollTop":"scrollLeft";let H=v[P];return A&&typeof H!="number"&&(H=window.document.documentElement[G]),H}function V(v){if(!A)return;const E=v.getBoundingClientRect(),P=z(window,!0),G=z(window),H=window.document.body,N=H.clientTop||0,ee=H.clientLeft||0;return{top:E.top+P-N,left:E.left+G-ee}}const j={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let v="top";return this.offsetBottom>=0&&(v="bottom"),v},classes(){return[{[`${O}`]:this.affix}]}},mounted(){R(window,"scroll",this.handleScroll,this.useCapture),R(window,"resize",this.handleScroll,this.useCapture),c.nextTick(()=>{this.handleScroll()})},beforeUnmount(){L(window,"scroll",this.handleScroll,this.useCapture),L(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!A)return;const v=this.affix,E=z(window,!0),P=V(this.$el),G=window.innerHeight,H=this.$el.getElementsByTagName("div")[0].offsetHeight;P.top-this.offsetTop<E&&this.offsetType=="top"&&!v?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${P.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):P.top-this.offsetTop>E&&this.offsetType=="top"&&v&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),P.top+this.offsetBottom+H>E+G&&this.offsetType=="bottom"&&!v?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${P.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):P.top+this.offsetBottom+H<E+G&&this.offsetType=="bottom"&&v&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function K(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",null,[c.createElementVNode("div",{ref:"point",class:c.normalizeClass(N.classes),style:c.normalizeStyle(H.styles)},[c.renderSlot(v.$slots,"default")],6),c.withDirectives(c.createElementVNode("div",{style:c.normalizeStyle(H.slotStyle)},null,4),[[c.vShow,H.slot]])])}var Z=$(j,[["render",K]]);const q="ivu-icon",ie={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${q}`,{[`${q}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let v={};return this.size&&(v["font-size"]=`${this.size}px`),this.color&&(v.color=this.color),v}}};function te(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("i",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles)},null,6)}var oe=$(ie,[["render",te]]);function re(v,E){for(let P=0;P<E.length;P++)if(v===E[P])return!0;return!1}let he;function _e(v){if(A&&(v||he===void 0)){const E=document.createElement("div");E.style.width="100%",E.style.height="200px";const P=document.createElement("div"),G=P.style;G.position="absolute",G.top=0,G.left=0,G.pointerEvents="none",G.visibility="hidden",G.width="200px",G.height="150px",G.overflow="hidden",P.appendChild(E),document.body.appendChild(P);const H=E.offsetWidth;P.style.overflow="scroll";let N=E.offsetWidth;H===N&&(N=P.clientWidth),document.body.removeChild(P),he=H-N}return he}const me=A&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||!1,be=/([\:\-\_]+(.))/g,Q=/^moz([A-Z])/;function Ne(v){return v.replace(be,function(E,P,G,H){return H?G.toUpperCase():G}).replace(Q,"Moz$1")}function Ee(v,E){if(A){if(!v||!E)return null;E=Ne(E),E==="float"&&(E="cssFloat");try{const P=document.defaultView.getComputedStyle(v,"");return v.style[E]||P?P[E]:null}catch{return v.style[E]}}}function Ge(v){return v.toString()[0].toUpperCase()+v.toString().slice(1)}function it(v){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(v)]}function Te(v){const E=it(v);let P;if(E==="array")P=[];else if(E==="object")P={};else return v;if(E==="array")for(let G=0;G<v.length;G++)P.push(Te(v[G]));else if(E==="object")for(let G in v)P[G]=Te(v[G]);return P}function Ke(v,E=0,P,G=500,H){if(!A)return;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Ce){return window.setTimeout(Ce,1e3/60)});const N=Math.abs(E-P),ee=Math.ceil(N/G*50);function le(Ce,pe,we){if(Ce===pe){H&&H();return}let We=Ce+we>pe?pe:Ce+we;Ce>pe&&(We=Ce-we<pe?pe:Ce-we),v===window?window.scrollTo(We,We):v.scrollTop=We,window.requestAnimationFrame(()=>le(We,pe,we))}le(E,P,ee)}function Tt(v,E,P){typeof E=="string"?P=[E]:P=E;let G=v.$parent,H=G.$options.name;for(;G&&(!H||P.indexOf(H)<0);)G=G.$parent,G&&(H=G.$options.name);return G}function Lt(v,E){let P=[];const G=v.$parent;return G?(G.$options.name===E&&P.push(G),P.concat(Lt(G,E))):[]}const Qt=function(v){return(v||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function Xe(v,E){if(!v||!E)return!1;if(E.indexOf(" ")!==-1)throw new Error("className should not contain space.");return v.classList?v.classList.contains(E):(" "+v.className+" ").indexOf(" "+E+" ")>-1}function Be(v,E){if(!v)return;let P=v.className;const G=(E||"").split(" ");for(let H=0,N=G.length;H<N;H++){const ee=G[H];!ee||(v.classList?v.classList.add(ee):Xe(v,ee)||(P+=" "+ee))}v.classList||(v.className=P)}function ue(v,E){if(!v||!E)return;const P=E.split(" ");let G=" "+v.className+" ";for(let H=0,N=P.length;H<N;H++){const ee=P[H];!ee||(v.classList?v.classList.remove(ee):Xe(v,ee)&&(G=G.replace(" "+ee+" "," ")))}v.classList||(v.className=Qt(G))}const Dt={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"};function Rt(){if(!A)return;const v=E=>({media:E,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||v}const Bt=/#([^#]+)$/;async function Se(v,E="unnamed"){if(!A)return Promise.reject();try{const P=await(await fetch(v)).blob();if(!P)return Promise.reject();const G=URL.createObjectURL(P),H=document.createElement("a");return H.setAttribute("href",G),H.setAttribute("download",E),H.click(),URL.revokeObjectURL(G),Promise.resolve()}catch(P){return Promise.reject(P)}}const Ye="ivu-alert",$e={name:"Alert",components:{Icon:oe},props:{type:{validator(v){return re(v,["success","info","warning","error"])},default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},fade:{type:Boolean,default:!0}},data(){return{closed:!1,desc:!1}},computed:{wrapClasses(){return[`${Ye}`,`${Ye}-${this.type}`,{[`${Ye}-with-icon`]:this.showIcon,[`${Ye}-with-desc`]:this.desc,[`${Ye}-with-banner`]:this.banner}]},messageClasses(){return`${Ye}-message`},descClasses(){return`${Ye}-desc`},closeClasses(){return`${Ye}-close`},iconClasses(){return`${Ye}-icon`},iconType(){let v="";switch(this.type){case"success":v="ios-checkmark-circle";break;case"info":v="ios-information-circle";break;case"warning":v="ios-alert";break;case"error":v="ios-close-circle";break}return this.desc&&(v+="-outline"),v}},methods:{close(v){this.closed=!0,this.$emit("on-close",v)}},mounted(){this.desc=this.$slots.desc!==void 0}};function st(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createBlock(c.Transition,{name:P.fade?"fade":""},{default:c.withCtx(()=>[H.closed?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.wrapClasses)},[P.showIcon?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(N.iconClasses)},[c.renderSlot(v.$slots,"icon",{},()=>[c.createVNode(ee,{type:N.iconType},null,8,["type"])])],2)):c.createCommentVNode("",!0),c.createElementVNode("span",{class:c.normalizeClass(N.messageClasses)},[c.renderSlot(v.$slots,"default")],2),c.createElementVNode("span",{class:c.normalizeClass(N.descClasses)},[c.renderSlot(v.$slots,"desc")],2),P.closable?(c.openBlock(),c.createElementBlock("a",{key:1,class:c.normalizeClass(N.closeClasses),onClick:E[0]||(E[0]=(...le)=>N.close&&N.close(...le))},[c.renderSlot(v.$slots,"close",{},()=>[c.createVNode(ee,{type:"ios-close"})])],2)):c.createCommentVNode("",!0)],2))]),_:3},8,["name"])}var et=$($e,[["render",st]]);const Fe={name:"Anchor",provide(){return{AnchorInstance:this}},emits:["on-change","on-select"],props:{affix:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},offsetBottom:Number,bounds:{type:Number,default:5},container:null,showInk:{type:Boolean,default:!1},scrollOffset:{type:Number,default:0}},data(){return{prefix:"ivu-anchor",isAffixed:!1,inkTop:0,animating:!1,currentLink:"",currentId:"",scrollContainer:null,scrollElement:null,wrapperTop:0,upperFirstTitle:!0,links:[]}},computed:{wrapperComponent(){return this.affix?"Affix":"div"},wrapperStyle(){return{maxHeight:this.offsetTop?`calc(100vh - ${this.offsetTop}px)`:"100vh"}},containerIsWindow(){return this.scrollContainer===window},titlesOffsetArr(){const v=this.links.map(P=>P.link.href).map(P=>P.split("#")[1]);let E=[];return A&&v.forEach(P=>{const G=document.getElementById(P);G&&E.push({link:`#${P}`,offset:G.offsetTop-this.scrollElement.offsetTop})}),E}},methods:{handleAffixStateChange(v){this.isAffixed=this.affix&&v},handleScroll(v){if(this.upperFirstTitle=!!this.titlesOffsetArr[0]&&v.target.scrollTop<this.titlesOffsetArr[0].offset,this.animating)return;const E=A?document.documentElement.scrollTop||document.body.scrollTop||v.target.scrollTop:0;this.getCurrentScrollAtTitleId(E)},handleHashChange(){if(!A)return;const v=window.location.href,E=Bt.exec(v);!E||(this.currentLink=E[0],this.currentId=E[1])},handleScrollTo(){if(!A)return;const v=document.getElementById(this.currentId),E=document.querySelector(`a[data-href="${this.currentLink}"]`);let P=this.scrollOffset;if(E&&(P=parseFloat(E.getAttribute("data-scroll-offset"))),!v)return;const G=v.offsetTop-this.wrapperTop-P;this.animating=!0,Ke(this.scrollContainer,this.scrollElement.scrollTop,G,600,()=>{this.animating=!1}),this.handleSetInkTop()},handleSetInkTop(){if(!A)return;const v=document.querySelector(`a[data-href="${this.currentLink}"]`);if(!v)return;const E=v.offsetTop,P=E<0?this.offsetTop:E;this.inkTop=P},getCurrentScrollAtTitleId(v){let E=-1,P=this.titlesOffsetArr.length,G={link:"#",offset:0};for(v+=this.bounds;++E<P;){let H=this.titlesOffsetArr[E],N=this.titlesOffsetArr[E+1];if(v>=H.offset&&v<(N&&N.offset||1/0)){G=this.titlesOffsetArr[E];break}}this.currentLink=G.link,this.handleSetInkTop()},getContainer(){!A||(this.scrollContainer=this.container?typeof this.container=="string"?document.querySelector(this.container):this.container:window,this.scrollElement=this.container?this.scrollContainer:document.documentElement||document.body)},removeListener(){L(this.scrollContainer,"scroll",this.handleScroll),L(window,"hashchange",this.handleHashChange)},init(){this.handleHashChange(),c.nextTick(()=>{this.removeListener(),this.getContainer(),this.wrapperTop=this.containerIsWindow?0:this.scrollElement.offsetTop,this.handleScrollTo(),this.handleSetInkTop(),this.titlesOffsetArr[0]&&(this.upperFirstTitle=this.scrollElement.scrollTop<this.titlesOffsetArr[0].offset),R(this.scrollContainer,"scroll",this.handleScroll),R(window,"hashchange",this.handleHashChange)})},addLink(v,E){this.links.push({id:v,link:E})},removeLink(v){const E=this.links.findIndex(P=>P.id===v);this.links.splice(E,1)}},watch:{$route(){this.currentLink="",this.currentId="",this.handleHashChange(),c.nextTick(()=>{this.handleScrollTo()})},container(){this.init()},currentLink(v,E){this.$emit("on-change",v,E)}},mounted(){this.init()},beforeUnmount(){this.removeListener()}};function tn(v,E,P,G,H,N){return c.openBlock(),c.createBlock(c.resolveDynamicComponent(N.wrapperComponent),{"offset-top":P.offsetTop,"offset-bottom":P.offsetBottom,onOnChange:N.handleAffixStateChange},{default:c.withCtx(()=>[c.createElementVNode("div",{class:c.normalizeClass(`${H.prefix}-wrapper`),style:c.normalizeStyle(N.wrapperStyle)},[c.createElementVNode("div",{class:c.normalizeClass(`${H.prefix}`)},[c.createElementVNode("div",{class:c.normalizeClass(`${H.prefix}-ink`)},[c.withDirectives(c.createElementVNode("span",{class:c.normalizeClass(`${H.prefix}-ink-ball`),style:c.normalizeStyle({top:`${H.inkTop}px`})},null,6),[[c.vShow,P.showInk]])],2),c.renderSlot(v.$slots,"default")],2)],6)]),_:3},40,["offset-top","offset-bottom","onOnChange"])}var Gt=$(Fe,[["render",tn]]);function mt(v=32){const E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",P=E.length;let G="";for(let H=0;H<v;H++)G+=E.charAt(Math.floor(Math.random()*P));return G}const en={name:"AnchorLink",inject:["AnchorInstance"],props:{href:String,title:String,scrollOffset:{type:Number,default(){return c.inject("AnchorInstance").scrollOffset}}},data(){return{prefix:"ivu-anchor-link",id:mt(6)}},computed:{anchorLinkClasses(){return[this.prefix,this.AnchorInstance.currentLink===this.href?`${this.prefix}-active`:""]},linkTitleClasses(){return[`${this.prefix}-title`]}},methods:{goAnchor(){this.currentLink=this.href,this.AnchorInstance.handleHashChange(),this.AnchorInstance.handleScrollTo(),this.AnchorInstance.$emit("on-select",this.href),this.$router?this.$router.push(this.href,()=>{}):A&&(window.location.href=this.href)}},mounted(){this.AnchorInstance.addLink(this.id,this),c.nextTick(()=>{this.AnchorInstance.init()})},beforeUnmount(){this.AnchorInstance.removeLink(this.id)}},Bn=["href","data-scroll-offset","data-href","title"];function Le(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.anchorLinkClasses)},[c.createElementVNode("a",{class:c.normalizeClass(N.linkTitleClasses),href:P.href,"data-scroll-offset":P.scrollOffset,"data-href":P.href,onClick:E[0]||(E[0]=c.withModifiers((...ee)=>N.goAnchor&&N.goAnchor(...ee),["prevent"])),title:P.title},c.toDisplayString(P.title),11,Bn),c.renderSlot(v.$slots,"default")],2)}var Ae=$(en,[["render",Le]]),ht={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(v){return re(v,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!="string")return null;if(this.to.includes("//"))return this.to;const v=this.$router;if(v){const E=this.$route,P=v.resolve(this.to,E,this.append);return P?P.href:this.to}return this.to}},methods:{handleOpenTo(){if(!A)return;const v=this.$router;let E=this.to;if(v){const P=this.$route,G=v.resolve(this.to,P,this.append);E=G?G.href:this.to}typeof this.to!="string"&&window.open(E)},handleClick(v=!1){const E=this.$router;!A||(v?this.handleOpenTo():E?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(v,E=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;v.preventDefault(),this.handleClick(E)}}}};function rn(v,E){let P=!1;return E.forEach(G=>{v.includes(G)&&(P=!0)}),P}const Kt={name:"Auth",mixins:[ht],emits:["click"],props:{authority:{type:[String,Array,Function,Boolean],default:!0},access:{type:[String,Array]},prevent:{type:Boolean,default:!1},message:{type:String,default:"您没有权限进行此操作"},customTip:{type:Boolean,default:!1},display:{type:String}},computed:{isPermission(){let v;if(typeof this.authority=="boolean")v=this.authority;else if(this.authority instanceof Function)v=this.authority();else{const E=typeof this.authority=="string"?[this.authority]:this.authority,P=typeof this.access=="string"?[this.access]:this.access;v=rn(E,P)}return v},options(){let v={};return this.display&&(v.display=this.display),{class:{"ivu-auth":!0,"ivu-auth-permission":this.isPermission,"ivu-auth-no-math":!this.isPermission,"ivu-auth-redirect":!this.isPermission&&this.to,"ivu-auth-prevent":this.prevent},style:v}}},render(){return this.isPermission?c.h("div",this.options,this.$slots.default()):this.to?c.h("div",this.options):this.prevent?c.h("div",Object.assign({},this.options,{onClick:this.handlePreventClick}),[c.h("div",{class:"ivu-auth-prevent-no-match"},this.$slots.default())]):c.h("div",this.options,this.$slots.noMatch())},methods:{handlePreventClick(v){this.isPermission||(this.customTip||this.$Message.info({content:this.message,duration:3}),this.$emit("click",v))}},created(){!this.isPermission&&this.to&&this.handleClick(!1)}};var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{};function xn(v){throw new Error('Could not dynamically require "'+v+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mn={exports:{}};/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/(function(v,E){(function(P,G){v.exports=G()})(Wt,function(){var P=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",G=function(){for(var Pe=["Edge","Trident","Firefox"],at=0;at<Pe.length;at+=1)if(P&&navigator.userAgent.indexOf(Pe[at])>=0)return 1;return 0}();function H(Pe){var at=!1;return function(){at||(at=!0,window.Promise.resolve().then(function(){at=!1,Pe()}))}}function N(Pe){var at=!1;return function(){at||(at=!0,setTimeout(function(){at=!1,Pe()},G))}}var ee=P&&window.Promise,le=ee?H:N;function Ce(Pe){var at={};return Pe&&at.toString.call(Pe)==="[object Function]"}function pe(Pe,at){if(Pe.nodeType!==1)return[];var _t=Pe.ownerDocument.defaultView,Ot=_t.getComputedStyle(Pe,null);return at?Ot[at]:Ot}function we(Pe){return Pe.nodeName==="HTML"?Pe:Pe.parentNode||Pe.host}function We(Pe){if(!Pe)return document.body;switch(Pe.nodeName){case"HTML":case"BODY":return Pe.ownerDocument.body;case"#document":return Pe.body}var at=pe(Pe),_t=at.overflow,Ot=at.overflowX,vn=at.overflowY;return/(auto|scroll|overlay)/.test(_t+vn+Ot)?Pe:We(we(Pe))}function ut(Pe){return Pe&&Pe.referenceNode?Pe.referenceNode:Pe}var ct=P&&!!(window.MSInputMethodContext&&document.documentMode),ot=P&&/MSIE 10/.test(navigator.userAgent);function Oe(Pe){return Pe===11?ct:Pe===10?ot:ct||ot}function wt(Pe){if(!Pe)return document.documentElement;for(var at=Oe(10)?document.body:null,_t=Pe.offsetParent||null;_t===at&&Pe.nextElementSibling;)_t=(Pe=Pe.nextElementSibling).offsetParent;var Ot=_t&&_t.nodeName;return!Ot||Ot==="BODY"||Ot==="HTML"?Pe?Pe.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(_t.nodeName)!==-1&&pe(_t,"position")==="static"?wt(_t):_t}function Er(Pe){var at=Pe.nodeName;return at==="BODY"?!1:at==="HTML"||wt(Pe.firstElementChild)===Pe}function ir(Pe){return Pe.parentNode!==null?ir(Pe.parentNode):Pe}function Wn(Pe,at){if(!Pe||!Pe.nodeType||!at||!at.nodeType)return document.documentElement;var _t=Pe.compareDocumentPosition(at)&Node.DOCUMENT_POSITION_FOLLOWING,Ot=_t?Pe:at,vn=_t?at:Pe,fn=document.createRange();fn.setStart(Ot,0),fn.setEnd(vn,0);var En=fn.commonAncestorContainer;if(Pe!==En&&at!==En||Ot.contains(vn))return Er(En)?En:wt(En);var Un=ir(Pe);return Un.host?Wn(Un.host,at):Wn(Pe,ir(at).host)}function jt(Pe){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",_t=at==="top"?"scrollTop":"scrollLeft",Ot=Pe.nodeName;if(Ot==="BODY"||Ot==="HTML"){var vn=Pe.ownerDocument.documentElement,fn=Pe.ownerDocument.scrollingElement||vn;return fn[_t]}return Pe[_t]}function It(Pe,at){var _t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ot=jt(at,"top"),vn=jt(at,"left"),fn=_t?-1:1;return Pe.top+=Ot*fn,Pe.bottom+=Ot*fn,Pe.left+=vn*fn,Pe.right+=vn*fn,Pe}function Cn(Pe,at){var _t=at==="x"?"Left":"Top",Ot=_t==="Left"?"Right":"Bottom";return parseFloat(Pe["border"+_t+"Width"])+parseFloat(Pe["border"+Ot+"Width"])}function Pt(Pe,at,_t,Ot){return Math.max(at["offset"+Pe],at["scroll"+Pe],_t["client"+Pe],_t["offset"+Pe],_t["scroll"+Pe],Oe(10)?parseInt(_t["offset"+Pe])+parseInt(Ot["margin"+(Pe==="Height"?"Top":"Left")])+parseInt(Ot["margin"+(Pe==="Height"?"Bottom":"Right")]):0)}function Pr(Pe){var at=Pe.body,_t=Pe.documentElement,Ot=Oe(10)&&getComputedStyle(_t);return{height:Pt("Height",at,_t,Ot),width:Pt("Width",at,_t,Ot)}}var cr=function(Pe,at){if(!(Pe instanceof at))throw new TypeError("Cannot call a class as a function")},ar=function(){function Pe(at,_t){for(var Ot=0;Ot<_t.length;Ot++){var vn=_t[Ot];vn.enumerable=vn.enumerable||!1,vn.configurable=!0,"value"in vn&&(vn.writable=!0),Object.defineProperty(at,vn.key,vn)}}return function(at,_t,Ot){return _t&&Pe(at.prototype,_t),Ot&&Pe(at,Ot),at}}(),uo=function(Pe,at,_t){return at in Pe?Object.defineProperty(Pe,at,{value:_t,enumerable:!0,configurable:!0,writable:!0}):Pe[at]=_t,Pe},Tr=Object.assign||function(Pe){for(var at=1;at<arguments.length;at++){var _t=arguments[at];for(var Ot in _t)Object.prototype.hasOwnProperty.call(_t,Ot)&&(Pe[Ot]=_t[Ot])}return Pe};function Ln(Pe){return Tr({},Pe,{right:Pe.left+Pe.width,bottom:Pe.top+Pe.height})}function Yn(Pe){var at={};try{if(Oe(10)){at=Pe.getBoundingClientRect();var _t=jt(Pe,"top"),Ot=jt(Pe,"left");at.top+=_t,at.left+=Ot,at.bottom+=_t,at.right+=Ot}else at=Pe.getBoundingClientRect()}catch{}var vn={left:at.left,top:at.top,width:at.right-at.left,height:at.bottom-at.top},fn=Pe.nodeName==="HTML"?Pr(Pe.ownerDocument):{},En=fn.width||Pe.clientWidth||vn.width,Un=fn.height||Pe.clientHeight||vn.height,hr=Pe.offsetWidth-En,Or=Pe.offsetHeight-Un;if(hr||Or){var Gr=pe(Pe);hr-=Cn(Gr,"x"),Or-=Cn(Gr,"y"),vn.width-=hr,vn.height-=Or}return Ln(vn)}function nr(Pe,at){var _t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ot=Oe(10),vn=at.nodeName==="HTML",fn=Yn(Pe),En=Yn(at),Un=We(Pe),hr=pe(at),Or=parseFloat(hr.borderTopWidth),Gr=parseFloat(hr.borderLeftWidth);_t&&vn&&(En.top=Math.max(En.top,0),En.left=Math.max(En.left,0));var Vr=Ln({top:fn.top-En.top-Or,left:fn.left-En.left-Gr,width:fn.width,height:fn.height});if(Vr.marginTop=0,Vr.marginLeft=0,!Ot&&vn){var to=parseFloat(hr.marginTop),zo=parseFloat(hr.marginLeft);Vr.top-=Or-to,Vr.bottom-=Or-to,Vr.left-=Gr-zo,Vr.right-=Gr-zo,Vr.marginTop=to,Vr.marginLeft=zo}return(Ot&&!_t?at.contains(Un):at===Un&&Un.nodeName!=="BODY")&&(Vr=It(Vr,at)),Vr}function Hr(Pe){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_t=Pe.ownerDocument.documentElement,Ot=nr(Pe,_t),vn=Math.max(_t.clientWidth,window.innerWidth||0),fn=Math.max(_t.clientHeight,window.innerHeight||0),En=at?0:jt(_t),Un=at?0:jt(_t,"left"),hr={top:En-Ot.top+Ot.marginTop,left:Un-Ot.left+Ot.marginLeft,width:vn,height:fn};return Ln(hr)}function rr(Pe){var at=Pe.nodeName;if(at==="BODY"||at==="HTML")return!1;if(pe(Pe,"position")==="fixed")return!0;var _t=we(Pe);return _t?rr(_t):!1}function ao(Pe){if(!Pe||!Pe.parentElement||Oe())return document.documentElement;for(var at=Pe.parentElement;at&&pe(at,"transform")==="none";)at=at.parentElement;return at||document.documentElement}function Xr(Pe,at,_t,Ot){var vn=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,fn={top:0,left:0},En=vn?ao(Pe):Wn(Pe,ut(at));if(Ot==="viewport")fn=Hr(En,vn);else{var Un=void 0;Ot==="scrollParent"?(Un=We(we(at)),Un.nodeName==="BODY"&&(Un=Pe.ownerDocument.documentElement)):Ot==="window"?Un=Pe.ownerDocument.documentElement:Un=Ot;var hr=nr(Un,En,vn);if(Un.nodeName==="HTML"&&!rr(En)){var Or=Pr(Pe.ownerDocument),Gr=Or.height,Vr=Or.width;fn.top+=hr.top-hr.marginTop,fn.bottom=Gr+hr.top,fn.left+=hr.left-hr.marginLeft,fn.right=Vr+hr.left}else fn=hr}_t=_t||0;var to=typeof _t=="number";return fn.left+=to?_t:_t.left||0,fn.top+=to?_t:_t.top||0,fn.right-=to?_t:_t.right||0,fn.bottom-=to?_t:_t.bottom||0,fn}function Ir(Pe){var at=Pe.width,_t=Pe.height;return at*_t}function Ci(Pe,at,_t,Ot,vn){var fn=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(Pe.indexOf("auto")===-1)return Pe;var En=Xr(_t,Ot,fn,vn),Un={top:{width:En.width,height:at.top-En.top},right:{width:En.right-at.right,height:En.height},bottom:{width:En.width,height:En.bottom-at.bottom},left:{width:at.left-En.left,height:En.height}},hr=Object.keys(Un).map(function(to){return Tr({key:to},Un[to],{area:Ir(Un[to])})}).sort(function(to,zo){return zo.area-to.area}),Or=hr.filter(function(to){var zo=to.width,Yo=to.height;return zo>=_t.clientWidth&&Yo>=_t.clientHeight}),Gr=Or.length>0?Or[0].key:hr[0].key,Vr=Pe.split("-")[1];return Gr+(Vr?"-"+Vr:"")}function Io(Pe,at,_t){var Ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,vn=Ot?ao(at):Wn(at,ut(_t));return nr(_t,vn,Ot)}function Ji(Pe){var at=Pe.ownerDocument.defaultView,_t=at.getComputedStyle(Pe),Ot=parseFloat(_t.marginTop||0)+parseFloat(_t.marginBottom||0),vn=parseFloat(_t.marginLeft||0)+parseFloat(_t.marginRight||0),fn={width:Pe.offsetWidth+vn,height:Pe.offsetHeight+Ot};return fn}function Gs(Pe){var at={left:"right",right:"left",bottom:"top",top:"bottom"};return Pe.replace(/left|right|bottom|top/g,function(_t){return at[_t]})}function Ii(Pe,at,_t){_t=_t.split("-")[0];var Ot=Ji(Pe),vn={width:Ot.width,height:Ot.height},fn=["right","left"].indexOf(_t)!==-1,En=fn?"top":"left",Un=fn?"left":"top",hr=fn?"height":"width",Or=fn?"width":"height";return vn[En]=at[En]+at[hr]/2-Ot[hr]/2,_t===Un?vn[Un]=at[Un]-Ot[Or]:vn[Un]=at[Gs(Un)],vn}function za(Pe,at){return Array.prototype.find?Pe.find(at):Pe.filter(at)[0]}function Nc(Pe,at,_t){if(Array.prototype.findIndex)return Pe.findIndex(function(vn){return vn[at]===_t});var Ot=za(Pe,function(vn){return vn[at]===_t});return Pe.indexOf(Ot)}function yl(Pe,at,_t){var Ot=_t===void 0?Pe:Pe.slice(0,Nc(Pe,"name",_t));return Ot.forEach(function(vn){vn.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var fn=vn.function||vn.fn;vn.enabled&&Ce(fn)&&(at.offsets.popper=Ln(at.offsets.popper),at.offsets.reference=Ln(at.offsets.reference),at=fn(at,vn))}),at}function zn(){if(!this.state.isDestroyed){var Pe={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};Pe.offsets.reference=Io(this.state,this.popper,this.reference,this.options.positionFixed),Pe.placement=Ci(this.options.placement,Pe.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),Pe.originalPlacement=Pe.placement,Pe.positionFixed=this.options.positionFixed,Pe.offsets.popper=Ii(this.popper,Pe.offsets.reference,Pe.placement),Pe.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",Pe=yl(this.modifiers,Pe),this.state.isCreated?this.options.onUpdate(Pe):(this.state.isCreated=!0,this.options.onCreate(Pe))}}function Zr(Pe,at){return Pe.some(function(_t){var Ot=_t.name,vn=_t.enabled;return vn&&Ot===at})}function pi(Pe){for(var at=[!1,"ms","Webkit","Moz","O"],_t=Pe.charAt(0).toUpperCase()+Pe.slice(1),Ot=0;Ot<at.length;Ot++){var vn=at[Ot],fn=vn?""+vn+_t:Pe;if(typeof document.body.style[fn]<"u")return fn}return null}function va(){return this.state.isDestroyed=!0,Zr(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[pi("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function je(Pe){var at=Pe.ownerDocument;return at?at.defaultView:window}function xt(Pe,at,_t,Ot){var vn=Pe.nodeName==="BODY",fn=vn?Pe.ownerDocument.defaultView:Pe;fn.addEventListener(at,_t,{passive:!0}),vn||xt(We(fn.parentNode),at,_t,Ot),Ot.push(fn)}function Qe(Pe,at,_t,Ot){_t.updateBound=Ot,je(Pe).addEventListener("resize",_t.updateBound,{passive:!0});var vn=We(Pe);return xt(vn,"scroll",_t.updateBound,_t.scrollParents),_t.scrollElement=vn,_t.eventsEnabled=!0,_t}function hn(){this.state.eventsEnabled||(this.state=Qe(this.reference,this.options,this.state,this.scheduleUpdate))}function Pn(Pe,at){return je(Pe).removeEventListener("resize",at.updateBound),at.scrollParents.forEach(function(_t){_t.removeEventListener("scroll",at.updateBound)}),at.updateBound=null,at.scrollParents=[],at.scrollElement=null,at.eventsEnabled=!1,at}function Jn(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Pn(this.reference,this.state))}function Ao(Pe){return Pe!==""&&!isNaN(parseFloat(Pe))&&isFinite(Pe)}function Lo(Pe,at){Object.keys(at).forEach(function(_t){var Ot="";["width","height","top","right","bottom","left"].indexOf(_t)!==-1&&Ao(at[_t])&&(Ot="px"),Pe.style[_t]=at[_t]+Ot})}function si(Pe,at){Object.keys(at).forEach(function(_t){var Ot=at[_t];Ot!==!1?Pe.setAttribute(_t,at[_t]):Pe.removeAttribute(_t)})}function Ua(Pe){return Lo(Pe.instance.popper,Pe.styles),si(Pe.instance.popper,Pe.attributes),Pe.arrowElement&&Object.keys(Pe.arrowStyles).length&&Lo(Pe.arrowElement,Pe.arrowStyles),Pe}function Oc(Pe,at,_t,Ot,vn){var fn=Io(vn,at,Pe,_t.positionFixed),En=Ci(_t.placement,fn,at,Pe,_t.modifiers.flip.boundariesElement,_t.modifiers.flip.padding);return at.setAttribute("x-placement",En),Lo(at,{position:_t.positionFixed?"fixed":"absolute"}),_t}function ks(Pe,at){var _t=Pe.offsets,Ot=_t.popper,vn=_t.reference,fn=Math.round,En=Math.floor,Un=function(xu){return xu},hr=fn(vn.width),Or=fn(Ot.width),Gr=["left","right"].indexOf(Pe.placement)!==-1,Vr=Pe.placement.indexOf("-")!==-1,to=hr%2===Or%2,zo=hr%2===1&&Or%2===1,Yo=at?Gr||Vr||to?fn:En:Un,Ea=at?fn:Un;return{left:Yo(zo&&!Vr&&at?Ot.left-1:Ot.left),top:Ea(Ot.top),bottom:Ea(Ot.bottom),right:Yo(Ot.right)}}var bp=P&&/Firefox/i.test(navigator.userAgent);function qv(Pe,at){var _t=at.x,Ot=at.y,vn=Pe.offsets.popper,fn=za(Pe.instance.modifiers,function(hh){return hh.name==="applyStyle"}).gpuAcceleration;fn!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var En=fn!==void 0?fn:at.gpuAcceleration,Un=wt(Pe.instance.popper),hr=Yn(Un),Or={position:vn.position},Gr=ks(Pe,window.devicePixelRatio<2||!bp),Vr=_t==="bottom"?"top":"bottom",to=Ot==="right"?"left":"right",zo=pi("transform"),Yo=void 0,Ea=void 0;if(Vr==="bottom"?Un.nodeName==="HTML"?Ea=-Un.clientHeight+Gr.bottom:Ea=-hr.height+Gr.bottom:Ea=Gr.top,to==="right"?Un.nodeName==="HTML"?Yo=-Un.clientWidth+Gr.right:Yo=-hr.width+Gr.right:Yo=Gr.left,En&&zo)Or[zo]="translate3d("+Yo+"px, "+Ea+"px, 0)",Or[Vr]=0,Or[to]=0,Or.willChange="transform";else{var xu=Vr==="bottom"?-1:1,rf=to==="right"?-1:1;Or[Vr]=Ea*xu,Or[to]=Yo*rf,Or.willChange=Vr+", "+to}var lc={"x-placement":Pe.placement};return Pe.attributes=Tr({},lc,Pe.attributes),Pe.styles=Tr({},Or,Pe.styles),Pe.arrowStyles=Tr({},Pe.offsets.arrow,Pe.arrowStyles),Pe}function Js(Pe,at,_t){var Ot=za(Pe,function(Un){var hr=Un.name;return hr===at}),vn=!!Ot&&Pe.some(function(Un){return Un.name===_t&&Un.enabled&&Un.order<Ot.order});if(!vn){var fn="`"+at+"`",En="`"+_t+"`";console.warn(En+" modifier is required by "+fn+" modifier in order to work, be sure to include it before "+fn+"!")}return vn}function Qa(Pe,at){var _t;if(!Js(Pe.instance.modifiers,"arrow","keepTogether"))return Pe;var Ot=at.element;if(typeof Ot=="string"){if(Ot=Pe.instance.popper.querySelector(Ot),!Ot)return Pe}else if(!Pe.instance.popper.contains(Ot))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),Pe;var vn=Pe.placement.split("-")[0],fn=Pe.offsets,En=fn.popper,Un=fn.reference,hr=["left","right"].indexOf(vn)!==-1,Or=hr?"height":"width",Gr=hr?"Top":"Left",Vr=Gr.toLowerCase(),to=hr?"left":"top",zo=hr?"bottom":"right",Yo=Ji(Ot)[Or];Un[zo]-Yo<En[Vr]&&(Pe.offsets.popper[Vr]-=En[Vr]-(Un[zo]-Yo)),Un[Vr]+Yo>En[zo]&&(Pe.offsets.popper[Vr]+=Un[Vr]+Yo-En[zo]),Pe.offsets.popper=Ln(Pe.offsets.popper);var Ea=Un[Vr]+Un[Or]/2-Yo/2,xu=pe(Pe.instance.popper),rf=parseFloat(xu["margin"+Gr]),lc=parseFloat(xu["border"+Gr+"Width"]),hh=Ea-Pe.offsets.popper[Vr]-rf-lc;return hh=Math.max(Math.min(En[Or]-Yo,hh),0),Pe.arrowElement=Ot,Pe.offsets.arrow=(_t={},uo(_t,Vr,Math.round(hh)),uo(_t,to,""),_t),Pe}function Bc(Pe){return Pe==="end"?"start":Pe==="start"?"end":Pe}var nf=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],sc=nf.slice(3);function $m(Pe){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_t=sc.indexOf(Pe),Ot=sc.slice(_t+1).concat(sc.slice(0,_t));return at?Ot.reverse():Ot}var Ol={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function A1(Pe,at){if(Zr(Pe.instance.modifiers,"inner")||Pe.flipped&&Pe.placement===Pe.originalPlacement)return Pe;var _t=Xr(Pe.instance.popper,Pe.instance.reference,at.padding,at.boundariesElement,Pe.positionFixed),Ot=Pe.placement.split("-")[0],vn=Gs(Ot),fn=Pe.placement.split("-")[1]||"",En=[];switch(at.behavior){case Ol.FLIP:En=[Ot,vn];break;case Ol.CLOCKWISE:En=$m(Ot);break;case Ol.COUNTERCLOCKWISE:En=$m(Ot,!0);break;default:En=at.behavior}return En.forEach(function(Un,hr){if(Ot!==Un||En.length===hr+1)return Pe;Ot=Pe.placement.split("-")[0],vn=Gs(Ot);var Or=Pe.offsets.popper,Gr=Pe.offsets.reference,Vr=Math.floor,to=Ot==="left"&&Vr(Or.right)>Vr(Gr.left)||Ot==="right"&&Vr(Or.left)<Vr(Gr.right)||Ot==="top"&&Vr(Or.bottom)>Vr(Gr.top)||Ot==="bottom"&&Vr(Or.top)<Vr(Gr.bottom),zo=Vr(Or.left)<Vr(_t.left),Yo=Vr(Or.right)>Vr(_t.right),Ea=Vr(Or.top)<Vr(_t.top),xu=Vr(Or.bottom)>Vr(_t.bottom),rf=Ot==="left"&&zo||Ot==="right"&&Yo||Ot==="top"&&Ea||Ot==="bottom"&&xu,lc=["top","bottom"].indexOf(Ot)!==-1,hh=!!at.flipVariations&&(lc&&fn==="start"&&zo||lc&&fn==="end"&&Yo||!lc&&fn==="start"&&Ea||!lc&&fn==="end"&&xu),mx=!!at.flipVariationsByContent&&(lc&&fn==="start"&&Yo||lc&&fn==="end"&&zo||!lc&&fn==="start"&&xu||!lc&&fn==="end"&&Ea),Qv=hh||mx;(to||rf||Qv)&&(Pe.flipped=!0,(to||rf)&&(Ot=En[hr+1]),Qv&&(fn=Bc(fn)),Pe.placement=Ot+(fn?"-"+fn:""),Pe.offsets.popper=Tr({},Pe.offsets.popper,Ii(Pe.instance.popper,Pe.offsets.reference,Pe.placement)),Pe=yl(Pe.instance.modifiers,Pe,"flip"))}),Pe}function fd(Pe){var at=Pe.offsets,_t=at.popper,Ot=at.reference,vn=Pe.placement.split("-")[0],fn=Math.floor,En=["top","bottom"].indexOf(vn)!==-1,Un=En?"right":"bottom",hr=En?"left":"top",Or=En?"width":"height";return _t[Un]<fn(Ot[hr])&&(Pe.offsets.popper[hr]=fn(Ot[hr])-_t[Or]),_t[hr]>fn(Ot[Un])&&(Pe.offsets.popper[hr]=fn(Ot[Un])),Pe}function Ws(Pe,at,_t,Ot){var vn=Pe.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),fn=+vn[1],En=vn[2];if(!fn)return Pe;if(En.indexOf("%")===0){var Un=void 0;switch(En){case"%p":Un=_t;break;case"%":case"%r":default:Un=Ot}var hr=Ln(Un);return hr[at]/100*fn}else if(En==="vh"||En==="vw"){var Or=void 0;return En==="vh"?Or=Math.max(document.documentElement.clientHeight,window.innerHeight||0):Or=Math.max(document.documentElement.clientWidth,window.innerWidth||0),Or/100*fn}else return fn}function Kv(Pe,at,_t,Ot){var vn=[0,0],fn=["right","left"].indexOf(Ot)!==-1,En=Pe.split(/(\+|\-)/).map(function(Gr){return Gr.trim()}),Un=En.indexOf(za(En,function(Gr){return Gr.search(/,|\s/)!==-1}));En[Un]&&En[Un].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var hr=/\s*,\s*|\s+/,Or=Un!==-1?[En.slice(0,Un).concat([En[Un].split(hr)[0]]),[En[Un].split(hr)[1]].concat(En.slice(Un+1))]:[En];return Or=Or.map(function(Gr,Vr){var to=(Vr===1?!fn:fn)?"height":"width",zo=!1;return Gr.reduce(function(Yo,Ea){return Yo[Yo.length-1]===""&&["+","-"].indexOf(Ea)!==-1?(Yo[Yo.length-1]=Ea,zo=!0,Yo):zo?(Yo[Yo.length-1]+=Ea,zo=!1,Yo):Yo.concat(Ea)},[]).map(function(Yo){return Ws(Yo,to,at,_t)})}),Or.forEach(function(Gr,Vr){Gr.forEach(function(to,zo){Ao(to)&&(vn[Vr]+=to*(Gr[zo-1]==="-"?-1:1))})}),vn}function Wo(Pe,at){var _t=at.offset,Ot=Pe.placement,vn=Pe.offsets,fn=vn.popper,En=vn.reference,Un=Ot.split("-")[0],hr=void 0;return Ao(+_t)?hr=[+_t,0]:hr=Kv(_t,fn,En,Un),Un==="left"?(fn.top+=hr[0],fn.left-=hr[1]):Un==="right"?(fn.top+=hr[0],fn.left+=hr[1]):Un==="top"?(fn.left+=hr[0],fn.top-=hr[1]):Un==="bottom"&&(fn.left+=hr[0],fn.top+=hr[1]),Pe.popper=fn,Pe}function Xv(Pe,at){var _t=at.boundariesElement||wt(Pe.instance.popper);Pe.instance.reference===_t&&(_t=wt(_t));var Ot=pi("transform"),vn=Pe.instance.popper.style,fn=vn.top,En=vn.left,Un=vn[Ot];vn.top="",vn.left="",vn[Ot]="";var hr=Xr(Pe.instance.popper,Pe.instance.reference,at.padding,_t,Pe.positionFixed);vn.top=fn,vn.left=En,vn[Ot]=Un,at.boundaries=hr;var Or=at.priority,Gr=Pe.offsets.popper,Vr={primary:function(to){var zo=Gr[to];return Gr[to]<hr[to]&&!at.escapeWithReference&&(zo=Math.max(Gr[to],hr[to])),uo({},to,zo)},secondary:function(to){var zo=to==="right"?"left":"top",Yo=Gr[zo];return Gr[to]>hr[to]&&!at.escapeWithReference&&(Yo=Math.min(Gr[zo],hr[to]-(to==="right"?Gr.width:Gr.height))),uo({},zo,Yo)}};return Or.forEach(function(to){var zo=["left","top"].indexOf(to)!==-1?"primary":"secondary";Gr=Tr({},Gr,Vr[zo](to))}),Pe.offsets.popper=Gr,Pe}function rA(Pe){var at=Pe.placement,_t=at.split("-")[0],Ot=at.split("-")[1];if(Ot){var vn=Pe.offsets,fn=vn.reference,En=vn.popper,Un=["bottom","top"].indexOf(_t)!==-1,hr=Un?"left":"top",Or=Un?"width":"height",Gr={start:uo({},hr,fn[hr]),end:uo({},hr,fn[hr]+fn[Or]-En[Or])};Pe.offsets.popper=Tr({},En,Gr[Ot])}return Pe}function oA(Pe){if(!Js(Pe.instance.modifiers,"hide","preventOverflow"))return Pe;var at=Pe.offsets.reference,_t=za(Pe.instance.modifiers,function(Ot){return Ot.name==="preventOverflow"}).boundaries;if(at.bottom<_t.top||at.left>_t.right||at.top>_t.bottom||at.right<_t.left){if(Pe.hide===!0)return Pe;Pe.hide=!0,Pe.attributes["x-out-of-boundaries"]=""}else{if(Pe.hide===!1)return Pe;Pe.hide=!1,Pe.attributes["x-out-of-boundaries"]=!1}return Pe}function M1(Pe){var at=Pe.placement,_t=at.split("-")[0],Ot=Pe.offsets,vn=Ot.popper,fn=Ot.reference,En=["left","right"].indexOf(_t)!==-1,Un=["top","left"].indexOf(_t)===-1;return vn[En?"left":"top"]=fn[_t]-(Un?vn[En?"width":"height"]:0),Pe.placement=Gs(at),Pe.offsets.popper=Ln(vn),Pe}var Jv={shift:{order:100,enabled:!0,fn:rA},offset:{order:200,enabled:!0,fn:Wo,offset:0},preventOverflow:{order:300,enabled:!0,fn:Xv,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:fd},arrow:{order:500,enabled:!0,fn:Qa,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:A1,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:M1},hide:{order:800,enabled:!0,fn:oA},computeStyle:{order:850,enabled:!0,fn:qv,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Ua,onLoad:Oc,gpuAcceleration:void 0}},px={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Jv},dh=function(){function Pe(at,_t){var Ot=this,vn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};cr(this,Pe),this.scheduleUpdate=function(){return requestAnimationFrame(Ot.update)},this.update=le(this.update.bind(this)),this.options=Tr({},Pe.Defaults,vn),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=at&&at.jquery?at[0]:at,this.popper=_t&&_t.jquery?_t[0]:_t,this.options.modifiers={},Object.keys(Tr({},Pe.Defaults.modifiers,vn.modifiers)).forEach(function(En){Ot.options.modifiers[En]=Tr({},Pe.Defaults.modifiers[En]||{},vn.modifiers?vn.modifiers[En]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(En){return Tr({name:En},Ot.options.modifiers[En])}).sort(function(En,Un){return En.order-Un.order}),this.modifiers.forEach(function(En){En.enabled&&Ce(En.onLoad)&&En.onLoad(Ot.reference,Ot.popper,Ot.options,En,Ot.state)}),this.update();var fn=this.options.eventsEnabled;fn&&this.enableEventListeners(),this.state.eventsEnabled=fn}return ar(Pe,[{key:"update",value:function(){return zn.call(this)}},{key:"destroy",value:function(){return va.call(this)}},{key:"enableEventListeners",value:function(){return hn.call(this)}},{key:"disableEventListeners",value:function(){return Jn.call(this)}}]),Pe}();return dh.Utils=(typeof window<"u"?window:Wt).PopperUtils,dh.placements=nf,dh.Defaults=px,dh})})(Mn);var kn=Mn.exports;let Zn=0,yo=0;function gn(){Zn++}function oo(){yo++}const Cr={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let v={};return this.width&&(v.minWidth=`${this.width}px`),this.transfer&&(v["z-index"]=1060+this.tIndex),Object.assign({},this.styles,v)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){c.nextTick(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new kn(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),c.nextTick(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(Ee(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let v=this.popper.popper.getAttribute("x-placement"),E=v.split("-")[0],P=v.split("-")[1];v==="left"||v==="right"||(this.popper.popper.style.transformOrigin=E==="bottom"||E!=="top"&&P==="start"?"center top":"center bottom")},handleGetIndex(){return gn(),Zn},handleMouseenter(v){this.$emit("mouseenter",v)},handleMouseleave(v){this.$emit("mouseleave",v)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(v){this.$emit("click",v)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function Wr(v,E,P,G,H,N){return c.openBlock(),c.createBlock(c.Teleport,{to:"body",disabled:!P.transfer},[c.createVNode(c.Transition,{name:P.transitionName},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",c.mergeProps({class:["ivu-select-dropdown",N.mergedClass],ref:"drop",style:N.mergedStyle},v.$attrs,{onMouseenter:E[0]||(E[0]=(...ee)=>N.handleMouseenter&&N.handleMouseenter(...ee)),onMouseleave:E[1]||(E[1]=(...ee)=>N.handleMouseleave&&N.handleMouseleave(...ee)),onClick:E[2]||(E[2]=c.withModifiers((...ee)=>N.handleClick&&N.handleClick(...ee),["stop"]))}),[c.renderSlot(v.$slots,"default")],16),[[c.vShow,P.visible]])]),_:3},8,["name"])],8,["disabled"])}var Lr=$(Cr,[["render",Wr]]);function qn(v){A&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[v.i.locale]=v)}const Oo={i:{locale:"zh-CN",select:{placeholder:"请选择",noMatch:"无匹配数据",loading:"加载中"},table:{noDataText:"暂无数据",noFilteredDataText:"暂无筛选结果",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},datepicker:{selectDate:"选择日期",selectTime:"选择时间",startTime:"开始时间",endTime:"结束时间",clear:"清空",ok:"确定",datePanelLabel:"[yyyy年] [m月]",month:"月",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",year:"年",weekStartDay:"0",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{m1:"1月",m2:"2月",m3:"3月",m4:"4月",m5:"5月",m6:"6月",m7:"7月",m8:"8月",m9:"9月",m10:"10月",m11:"11月",m12:"12月"}},transfer:{titles:{source:"源列表",target:"目的列表"},filterPlaceholder:"请输入搜索内容",notFoundText:"列表为空"},modal:{okText:"确定",cancelText:"取消"},poptip:{okText:"确定",cancelText:"取消"},page:{prev:"上一页",next:"下一页",total:"共",item:"条",items:"条",prev5:"向前 5 页",next5:"向后 5 页",page:"条/页",goto:"跳至",p:"页"},rate:{star:"星",stars:"星"},time:{before:"前",after:"后",just:"刚刚",seconds:"秒",minutes:"分钟",hours:"小时",days:"天"},tree:{emptyText:"暂无数据"},image:{zoomIn:"放大",zoomOut:"缩小",rotateLeft:"左旋转",rotateRight:"右旋转",fail:"失败",preview:"预览"}}};qn(Oo);var Ue=function(v){return yn(v)&&!Dn(v)};function yn(v){return!!v&&typeof v=="object"}function Dn(v){var E=Object.prototype.toString.call(v);return E==="[object RegExp]"||E==="[object Date]"||Yr(v)}var Xt=typeof Symbol=="function"&&Symbol.for,Kn=Xt?Symbol.for("react.element"):60103;function Yr(v){return v.$$typeof===Kn}function qo(v){return Array.isArray(v)?[]:{}}function vi(v,E){return E.clone!==!1&&E.isMergeableObject(v)?Vn(qo(v),v,E):v}function js(v,E,P){return v.concat(E).map(function(G){return vi(G,P)})}function Nr(v,E,P){var G={};return P.isMergeableObject(v)&&Object.keys(v).forEach(function(H){G[H]=vi(v[H],P)}),Object.keys(E).forEach(function(H){!P.isMergeableObject(E[H])||!v[H]?G[H]=vi(E[H],P):G[H]=Vn(v[H],E[H],P)}),G}function Vn(v,E,P){P=P||{},P.arrayMerge=P.arrayMerge||js,P.isMergeableObject=P.isMergeableObject||Ue;var G=Array.isArray(E),H=Array.isArray(v),N=G===H;return N?G?P.arrayMerge(v,E,P):Nr(v,E,P):vi(E,P)}Vn.all=function(v,E){if(!Array.isArray(v))throw new Error("first argument should be an array");return v.reduce(function(P,G){return Vn(P,G,E)},{})};var Is=Vn;const M0=/(%|)\{([0-9a-zA-Z_]+)\}/g;function sg(){function v(P,G){return Object.prototype.hasOwnProperty.call(P,G)}function E(P,...G){return G.length===1&&typeof G[0]=="object"&&(G=G[0]),(!G||!G.hasOwnProperty)&&(G={}),P===void 0?"":P.replace(M0,(H,N,ee,le)=>{let Ce;return P[le-1]==="{"&&P[le+H.length]==="}"?ee:(Ce=v(G,ee)?G[ee]:null,Ce??"")})}return E}const xh=sg();let Md=Oo;const Da={zh:Oo};let Ch=null,Lu={},Pa=null,lg=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments);if(Pa&&Pa.global)return Pa.global.t(...arguments);if(Pa&&Pa.locale){if(!Lu[Pa.locale]||Ch!=Pa.locale){Lu[Pa.locale]=!0;let v=Pa.getLocaleMessage(Pa.locale)||{},E={};Is(E,Da[Pa.locale],v),Md=E,Pa.setLocaleMessage(Pa.locale,E),Ch=Pa.locale}return Pa.hlang(...arguments)}};const Nu=function(v,E){let P=lg.apply(this,arguments);if(P!=null)return P;const G=v.split(".");let H=Md;for(let N=0,ee=G.length;N<ee;N++){const le=G[N];if(P=H[le],N===ee-1)return xh(P,E);if(!P)return"";H=P}return""};var ze={use:function(v){Md=v||Md},t:Nu,i18n:function(v){Pa=v}},vt={methods:{t(...v){return Nu.apply(this,v)}}},zt={data(){return{globalConfig:{}}},created(){const v=c.getCurrentInstance();this.globalConfig=v.appContext.config.globalProperties.$VIEWUI}};const Yt="ivu-select",qt={name:"iSelectHead",mixins:[vt,zt],components:{Icon:oe},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:Yt,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:v,multiple:E,showPlaceholder:P}=this;return[{[Yt+"-head-with-prefix"]:this.showPrefix,[Yt+"-placeholder"]:P&&!v,[Yt+"-selected-value"]:!P&&!E&&!v}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let v=!1;if(this.multiple)!this.values.length>0&&(v=!0);else{const E=this.values[0];(typeof E>"u"||String(E).trim()==="")&&(v=!this.remoteInitialLabel)}return v},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let v={};return this.multiple&&(this.showPlaceholder?v.width="100%":v.width=`${this.inputLength}px`),v},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const v=this.values[0];return v?v.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((v,E)=>this.maxTagCount===void 0||E<this.maxTagCount)},headCls(){return{[`${Yt}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const v=this.globalConfig;let E="ios-arrow-down";return v&&(v.select.customArrow?E="":v.select.arrow&&(E=v.select.arrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.select.customArrow&&(E=v.select.customArrow),E},showPrefix(){const v=this.$slots.prefix&&this.$slots.prefix();let E=!1;return v&&(E=v[0].children.length>0),E||this.prefix},arrowSize(){const v=this.globalConfig;let E="";return v&&v.select.arrowSize&&(E=v.select.arrowSize),E}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(v){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(v)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(v){const E=v.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&E===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(v){this.$emit("on-enter"),this.showCreateItem&&v.stopPropagation()},onHeaderClick(v){this.filterable&&v.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([v]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof v>"u"||v===""||v===null?this.query="":this.query=v.label,c.nextTick(()=>this.preventRemoteCall=!1)}},query(v){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",v)},queryProp(v){v!==this.query&&(this.query=v)}}},fr={key:1,class:"ivu-tag ivu-tag-checked"},jr={class:"ivu-tag-text ivu-select-max-tag"},Nt=["id","disabled","placeholder"];function po(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{onClick:E[6]||(E[6]=(...le)=>N.onHeaderClick&&N.onHeaderClick(...le)),class:c.normalizeClass(N.headCls)},[N.showPrefix?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass([H.prefixCls+"-prefix"])},[c.renderSlot(v.$slots,"prefix",{},()=>[P.prefix?(c.openBlock(),c.createBlock(ee,{key:0,type:P.prefix},null,8,["type"])):c.createCommentVNode("",!0)])],2)):c.createCommentVNode("",!0),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.selectedMultiple,(le,Ce)=>(c.openBlock(),c.createElementBlock("div",{class:"ivu-tag ivu-tag-checked",key:Ce},[c.createElementVNode("span",{class:c.normalizeClass(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":le.disabled}])},c.toDisplayString(le.tag!==void 0?le.tag:le.label),3),le.disabled?c.createCommentVNode("",!0):(c.openBlock(),c.createBlock(ee,{key:0,type:"ios-close",onClick:c.withModifiers(pe=>N.removeTag(le),["stop"])},null,8,["onClick"]))]))),128)),P.maxTagCount!==void 0&&P.values.length>P.maxTagCount?(c.openBlock(),c.createElementBlock("div",fr,[c.createElementVNode("span",jr,[P.maxTagPlaceholder?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(P.maxTagPlaceholder(P.values.length-P.maxTagCount)),1)],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode("+ "+c.toDisplayString(P.values.length-P.maxTagCount)+"...",1)],64))])])):c.createCommentVNode("",!0),c.withDirectives(c.createElementVNode("span",{class:c.normalizeClass(N.singleDisplayClasses)},c.toDisplayString(N.singleDisplayValue),3),[[c.vShow,N.singleDisplayValue]]),P.filterable?c.withDirectives((c.openBlock(),c.createElementBlock("input",{key:2,id:P.inputElementId,type:"text","onUpdate:modelValue":E[0]||(E[0]=le=>H.query=le),disabled:P.disabled,class:c.normalizeClass([H.prefixCls+"-input"]),placeholder:N.showPlaceholder?N.localePlaceholder:"",style:c.normalizeStyle(N.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[E[1]||(E[1]=(...le)=>N.resetInputState&&N.resetInputState(...le)),E[2]||(E[2]=c.withKeys((...le)=>N.handleInputDelete&&N.handleInputDelete(...le),["delete"])),E[3]||(E[3]=c.withKeys((...le)=>N.handleInputEnter&&N.handleInputEnter(...le),["enter"]))],onFocus:E[4]||(E[4]=(...le)=>N.onInputFocus&&N.onInputFocus(...le)),onBlur:E[5]||(E[5]=(...le)=>N.onInputBlur&&N.onInputBlur(...le)),ref:"input"},null,46,Nt)),[[c.vModelText,H.query]]):c.createCommentVNode("",!0),N.resetSelect?(c.openBlock(),c.createBlock(ee,{key:3,type:"ios-close-circle",class:c.normalizeClass([H.prefixCls+"-arrow"]),onClick:c.withModifiers(N.onClear,["stop"])},null,8,["class","onClick"])):c.createCommentVNode("",!0),!N.resetSelect&&!P.remote?(c.openBlock(),c.createBlock(ee,{key:4,type:N.arrowType,custom:N.customArrowType,size:N.arrowSize,class:c.normalizeClass([H.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):c.createCommentVNode("",!0)],2)}var So=$(qt,[["render",po]]);const xo="click",go=Object.create(null),Ui=Object.create(null),tl=[go,Ui],Ra=function(v,E,P){const{target:G}=P,H=function(ee){const{el:le}=ee;if(le!==G&&!le.contains(G)){const{binding:Ce}=ee;Ce.modifiers.stop&&P.stopPropagation(),Ce.modifiers.prevent&&P.preventDefault(),Ce.value.call(v,P)}},N=function(ee){return E[ee].forEach(H)};Object.keys(E).forEach(N)},jl=function(v){Ra(this,go,v)},$i=function(v){Ra(this,Ui,v)},Ur=function(v){return v?jl:$i},Li=Object.defineProperties({},{$_captureInstances:{value:go},$_nonCaptureInstances:{value:Ui},$_onCaptureEvent:{value:jl},$_onNonCaptureEvent:{value:$i},beforeMount:{value:function(v,E){if(typeof E.value!="function")throw new TypeError("Binding value must be a function.");let P;const G=E.modifiers;G.click?P="click":G.mousedown?P="mousedown":G.touchstart?P="touchstart":P=xo;const H=E.arg,N=x(S({},E),{modifiers:S({capture:!1,prevent:!1,stop:!1},E.modifiers)}),ee=H?go:Ui;Array.isArray(ee[P])||(ee[P]=[]),ee[P].push({el:v,binding:N})===1&&typeof document=="object"&&document&&document.addEventListener(P,Ur(H),H)}},unmounted:{value:function(v){const E=function(G){return G.el!==v},P=function(G){const H=Object.keys(G);if(H.length){const N=G===go,ee=function(le){const Ce=G[le].filter(E);Ce.length?G[le]=Ce:(typeof document=="object"&&document&&document.removeEventListener(le,Ur(N),N),delete G[le])};H.forEach(ee)}};tl.forEach(P)}},version:{enumerable:!0,value:"3.7.1"}});var Mo={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let v=this.disabled;return!v&&this.FormInstance&&(v=this.FormInstance.disabled),v?!0:null}},methods:{handleFormItemChange(v,E){this.FormItemInstance&&(v==="blur"?this.FormItemInstance.formBlur(E):v==="change"&&this.FormItemInstance.formChange(E))}}};const Ei="ivu-select",kd=(v,E,P)=>{const G=JSON.stringify(v),H=JSON.stringify(E),N=JSON.stringify(P.map(ee=>ee.value));return G!==H||G!==N||N!==H},Zc=300,Cf={name:"iSelect",mixins:[vt,Mo],components:{Drop:Lr,SelectHead:So,Icon:oe},directives:{clickOutside:Li},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(v){return re(v,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(v=>typeof v!="number"&&!v?null:this.getOptionData(v)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const v=this.modelValue.map((E,P)=>({value:E,label:this.defaultLabel[P]}));setTimeout(()=>{this.values=v})}}},data(){return{prefixCls:Ei,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${Ei}`,{[`${Ei}-visible`]:this.visible,[`${Ei}-disabled`]:this.itemDisabled,[`${Ei}-multiple`]:this.multiple,[`${Ei}-single`]:!this.multiple,[`${Ei}-${this.size}`]:!!this.size}]},dropdownCls(){return{[Ei+"-dropdown-transfer"]:this.transfer,[Ei+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${Ei}-selection`]:!this.autoComplete,[`${Ei}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let v=!1;const{allowCreate:E,query:P,slotOptions:G}=this;return E&&P!==""&&(v=!0,(G||[]).find(H=>H.proxy&&H.proxy.showLabel===P)&&(v=!1)),v},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let v=!0;const E=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&E&&(v=!1),this.autoComplete&&E&&(v=!1),this.visible&&v},showNotFoundLabel(){const{loading:v,remote:E,slotOptions:P,hideNotFound:G}=this,H=P||[],N=H.find(ee=>ee.proxy.isShow);return(H.length===0||!N)&&(!E||E&&!v)&&!G},publicValue(){return this.multiple?this.values.map(v=>v.value):(this.values[0]||{}).value},canBeCleared(){const v=this.hasMouseHoverHead,E=!this.multiple&&!this.itemDisabled&&this.clearable;return v&&E&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(v){if(v){this.onQueryChange(v);return}v===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(v){const E=this.slotOptions.find(({props:H})=>H.value===v);if(!E)return null;const{optionLabel:P,disabled:G}=E.proxy||{};return{value:v,label:P,disabled:G}},getInitialValue(){const{multiple:v,remote:E,modelValue:P}=this;let G=Array.isArray(P)?P:[P];if(!v&&(typeof G[0]>"u"||String(G[0]).trim()===""&&!Number.isFinite(G[0]))&&(G=[]),E&&!v&&P){const H=this.getOptionData(P);this.query=H?H.label:String(P)}return G.filter(H=>!!H||H===0)},validateOption({children:v,elm:E,propsData:P}){const G=P.value,H=P.label||"",N=E&&E.textContent||(v||[]).reduce((Ce,pe)=>{const we=pe.elm?pe.elm.textContent:pe.text;return`${Ce} ${we}`},"")||"",ee=this.filterByLabel?[H].toString():[G,H,N].toString(),le=this.query.toLowerCase().trim();return ee.toLowerCase().includes(le)},toggleMenu(v,E){if(this.itemDisabled)return!1;this.visible=typeof E<"u"?E:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,Zc)},onClickOutside(v){if(this.visible){if(v.type==="mousedown"){v.preventDefault();return}if(this.transfer){const E=this.$refs.dropdown.$refs.drop;if(E===v.target||E.contains(v.target))return}if(this.filterable){const E=this.$el.querySelector('input[type="text"]');this.caretPosition=E.selectionStart,c.nextTick(()=>{const P=this.caretPosition===-1?E.value.length:this.caretPosition;E.setSelectionRange(P,P)})}this.autoComplete||v.stopPropagation(),v.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",v)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(v){const E=v.key||v.code,P=v.keyCode||v.which;if(!(E==="Backspace"||P===8))if(this.visible){if(v.preventDefault(),E==="Tab"&&v.stopPropagation(),E==="Escape"&&(v.stopPropagation(),this.hideMenu()),E==="ArrowUp"&&this.navigateOptions(-1),E==="ArrowDown"&&this.navigateOptions(1),E==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const G=this.slotOptions[this.focusIndex];if(G){const H=this.getOptionData(G.props.value);this.onOptionClick(H)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(v.key)&&this.toggleMenu(null,!0)},navigateOptions(v){const E=this.slotOptions,P=E.length-1;if(P<0)return;let G=this.focusIndex+v;G<0&&(G=P),G>P&&(G=0);let H,N=null;if(v>0){H=-1;for(let ee=0;ee<E.length;ee++){const{proxy:le}=E[ee];if(!le.disabled&&(H=ee),le.isShow&&N===null)N=ee;else if(!le.isShow){H=ee;continue}if(H>=G)break}}else{H=E.length;for(let ee=P;ee>=0;ee--){const{proxy:le}=E[ee];if(!le.disabled&&(H=ee),le.isShow&&N===null)N=ee;else if(!le.isShow){H=ee;continue}if(H<=G)break}}G=E[H].proxy.isShow?H:N,this.focusIndex=G},onOptionClick(v){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:E})=>E===v.value)?this.values=this.values.filter(({value:E})=>E!==v.value):this.values=this.values.concat(v),this.isFocused=!0):(this.query=String(v.label).trim(),this.values=[v],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(E=>E?E.props.value===v.value:!1),this.filterable){const E=this.$el.querySelector('input[type="text"]');this.autoComplete||c.nextTick(()=>E.focus())}this.$emit("on-select",v),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},Zc)},onQueryChange(v){if(this.isTyping=!0,v.length>0&&v!==this.query)if(A&&this.autoComplete){let E=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=E}else this.visible=!0;this.query=v,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:v}){this.itemDisabled||(this.isFocused=v==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const v=this.query;this.$emit("on-create",v),this.query="";const E={value:v,label:v,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(E)})}},handleOnSelectSelected(v){this.onOptionClick(v)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(v){const{getInitialValue:E,isLocking:P,defaultLabel:G,remote:H,modelValue:N,values:ee}=this,le=!!(G&&G.length);(N&&N.length||ee.length||le)&&H&&v||P||(this.isLocking=!0,c.nextTick(()=>{this.values=E().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(v){const{publicValue:E,values:P}=this;this.checkUpdateStatus(),v===""?(this.values=[],this.query=""):kd(v,E,P)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(v,E){const P=JSON.stringify(v),G=JSON.stringify(E);let H=this.publicValue;if(P!==G&&H!==this.modelValue){let N=this.publicValue;this.labelInValue&&(this.multiple?N=this.values:N=this.values[0]),(Array.isArray(H)&&!H.length&&this.modelValue===null||H===void 0&&this.modelValue===null)&&(H=null),this.$emit("update:modelValue",H),this.$emit("on-change",N),this.handleFormItemChange("change",N)}},query(v){this.focusIndex=-1,this.$emit("on-query-change",v);const{remoteMethod:E,lastRemoteQuery:P}=this,G=E&&v!==""&&(v!==P||!P)&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,G){const H=this.remoteMethod(v);this.initialLabel="",H&&H.then&&H.then(N=>{N&&(this.options=N)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),v!==""&&this.remote&&(this.lastRemoteQuery=v)},isFocused(v){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[E]=this.values;if(E&&this.filterable&&!this.multiple&&!v){const P=String(E.label||E.value).trim();P&&this.query!==P&&(this.preventRemoteCall=!0,this.query=P)}},focusIndex(v){if(!(v<0||this.autoComplete)&&this.slotOptions[v]){const E=this.slotOptions[v].proxy.$el,P=this.$refs.dropdown.$refs.drop;let G=E.getBoundingClientRect().bottom-P.getBoundingClientRect().bottom,H=E.getBoundingClientRect().top-P.getBoundingClientRect().top;G>0&&(P.scrollTop+=G),H<0&&(P.scrollTop+=H)}},dropVisible(v){v?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(v){this.$emit("on-open-change",v)}}},Fo=["tabindex"],ts=["name","value"];function cg(v,E,P,G,H,N){const ee=c.resolveComponent("select-head"),le=c.resolveComponent("Icon"),Ce=c.resolveComponent("Drop"),pe=c.resolveDirective("click-outside");return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("div",{ref:"reference",class:c.normalizeClass(N.selectionCls),tabindex:N.selectTabindex,onBlur:E[2]||(E[2]=(...we)=>N.toggleHeaderFocus&&N.toggleHeaderFocus(...we)),onFocus:E[3]||(E[3]=(...we)=>N.toggleHeaderFocus&&N.toggleHeaderFocus(...we)),onClick:E[4]||(E[4]=(...we)=>N.toggleMenu&&N.toggleMenu(...we)),onKeydown:[E[5]||(E[5]=c.withKeys((...we)=>N.handleKeydown&&N.handleKeydown(...we),["esc"])),E[6]||(E[6]=c.withKeys((...we)=>N.handleKeydown&&N.handleKeydown(...we),["enter"])),E[7]||(E[7]=c.withKeys(c.withModifiers((...we)=>N.handleKeydown&&N.handleKeydown(...we),["prevent"]),["up"])),E[8]||(E[8]=c.withKeys(c.withModifiers((...we)=>N.handleKeydown&&N.handleKeydown(...we),["prevent"]),["down"])),E[9]||(E[9]=c.withKeys((...we)=>N.handleKeydown&&N.handleKeydown(...we),["tab"])),E[10]||(E[10]=c.withKeys((...we)=>N.handleKeydown&&N.handleKeydown(...we),["delete"]))],onMouseenter:E[11]||(E[11]=we=>H.hasMouseHoverHead=!0),onMouseleave:E[12]||(E[12]=we=>H.hasMouseHoverHead=!1)},[c.renderSlot(v.$slots,"input",{},()=>[c.createElementVNode("input",{type:"hidden",name:P.name,value:N.publicValue},null,8,ts),c.createVNode(ee,{ref:"selectHead",filterable:P.filterable,multiple:P.multiple,values:H.values,clearable:N.canBeCleared,prefix:P.prefix,disabled:v.itemDisabled,remote:N.remote,"input-element-id":P.elementId,"initial-label":H.initialLabel,placeholder:P.placeholder,"query-prop":H.query,"max-tag-count":P.maxTagCount,"max-tag-placeholder":P.maxTagPlaceholder,"allow-create":P.allowCreate,"show-create-item":N.showCreateItem,onOnQueryChange:N.onQueryChange,onOnInputFocus:E[0]||(E[0]=we=>H.isFocused=!0),onOnInputBlur:E[1]||(E[1]=we=>H.isFocused=!1),onOnClear:N.clearSingleSelect,onOnEnter:N.handleCreateItem},{prefix:c.withCtx(()=>[c.renderSlot(v.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,Fo),c.createVNode(Ce,{ref:"dropdown",classes:N.dropdownCls,visible:N.dropVisible,placement:P.placement,eventsEnabled:P.eventsEnabled,transfer:P.transfer,"transition-name":"transition-drop"},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-not-found"])},[c.createElementVNode("li",null,c.toDisplayString(N.localeNotFoundText),1)],2),[[c.vShow,N.showNotFoundLabel&&!P.allowCreate]]),!N.remote||N.remote&&!P.loading?(c.openBlock(),c.createElementBlock("ul",{key:0,class:c.normalizeClass(H.prefixCls+"-dropdown-list")},[N.showCreateItem?(c.openBlock(),c.createElementBlock("li",{key:0,class:c.normalizeClass(H.prefixCls+"-item"),onClick:E[13]||(E[13]=(...we)=>N.handleCreateItem&&N.handleCreateItem(...we))},[c.createTextVNode(c.toDisplayString(H.query)+" ",1),c.createVNode(le,{type:"md-return-left",class:c.normalizeClass(H.prefixCls+"-item-enter")},null,8,["class"])],2)):c.createCommentVNode("",!0),c.renderSlot(v.$slots,"default")],2)):(c.openBlock(),c.createElementBlock("ul",{key:1,class:c.normalizeClass(H.prefixCls+"-dropdown-list")},[N.showCreateItem?(c.openBlock(),c.createElementBlock("li",{key:0,class:c.normalizeClass(H.prefixCls+"-item"),onClick:E[14]||(E[14]=(...we)=>N.handleCreateItem&&N.handleCreateItem(...we))},[c.createTextVNode(c.toDisplayString(H.query)+" ",1),c.createVNode(le,{type:"md-return-left",class:c.normalizeClass(H.prefixCls+"-item-enter")},null,8,["class"])],2)):c.createCommentVNode("",!0)],2)),c.withDirectives(c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-loading"])},c.toDisplayString(N.localeLoadingText),3),[[c.vShow,P.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[pe,N.onClickOutside,P.capture],[pe,N.onClickOutside,P.capture,{mousedown:!0}],[pe,N.onClickOutside,P.capture,{touchstart:!0}]])}var ea=$(Cf,[["render",cg]]);const qc="ivu-select-item",Zl={name:"iOption",componentName:"select-item",mixins:[Mo],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:mt(6),instance:null}},computed:{classes(){return[`${qc}`,{[`${qc}-disabled`]:this.itemDisabled,[`${qc}-selected`]:this.selected&&!this.autoComplete,[`${qc}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const v=this.SelectInstance;let E=v.slotOptions||[];const P=v.focusIndex,G=v.$slots.default;if(this.autoComplete&&G){E=[];let N=G();for(;N.length>0;){const ee=N.shift();ee.type&&typeof ee.type=="object"&&ee.type.name==="iOption"?E.push(ee):Array.isArray(ee.children)&&(N=N.concat(ee.children))}}const H=E[P];return H&&H.props&&H.props.value===this.value},isShow(){const v=this.SelectInstance,E=v.filterable,P=v.query.toLowerCase().trim(),G=v.filterByLabel,H=v.slotOptionsMap,{props:N}=H.get(this.value)||{props:{}},ee=this.label||this.$el&&this.$el.textContent;let le=(ee||N.value||"").toLowerCase();G&&(le=(ee||"").toLowerCase());const Ce=le.includes(P);return!E||E&&(Ce||!v.filterQueryChange)||it(v.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(v=>v.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const v=this.SelectInstance,E=this.OptionGroupInstance,{id:P,value:G,instance:H}=this;if(E&&E.optionList.push(x(S({},H),{id:P,tag:"option"})),v){v.slotOptions.push(x(S({},H),{id:P,tag:"option"})),v.slotOptionsMap.set(G,H);const{modelValue:N}=v;N&&N.length&&v.lazyUpdateValue(!0)}},removeOption(){const v=this.OptionGroupInstance,E=this.SelectInstance,{id:P,value:G}=this;if(v){const H=v.optionList.findIndex(N=>N.id===P);H!==-1&&v.optionList.splice(H,1)}if(E){const H=this.SelectInstance,N=H.slotOptions.findIndex(ee=>ee.id===P);N!==-1&&H.slotOptions.splice(N,1),H.slotOptionsMap.has(G)&&H.slotOptionsMap.delete(G)}}},created(){this.instance=c.getCurrentInstance()},mounted(){this.addOption();const v=Tt(this,"iSelect");v&&(this.autoComplete=v.autoComplete)},beforeUnmount(){c.nextTick(()=>{this.removeOption(),this.instance=null})}};function ug(v,E,P,G,H,N){return c.withDirectives((c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.classes),onClick:E[0]||(E[0]=c.withModifiers((...ee)=>N.select&&N.select(...ee),["stop"])),onMousedown:E[1]||(E[1]=c.withModifiers(()=>{},["prevent"]))},[c.renderSlot(v.$slots,"default",{},()=>[c.createTextVNode(c.toDisplayString(N.showLabel),1)])],34)),[[c.vShow,N.isShow]])}var Pp=$(Zl,[["render",ug]]);const OC=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,ni=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let wf={},Ia;function dg(v,E=!1){if(!A)return;const P=v.getAttribute("id")||v.getAttribute("data-reactid")||v.getAttribute("name");if(E&&wf[P])return wf[P];const G=window.getComputedStyle(v),H=G.getPropertyValue("box-sizing")||G.getPropertyValue("-moz-box-sizing")||G.getPropertyValue("-webkit-box-sizing"),N=parseFloat(G.getPropertyValue("padding-bottom"))+parseFloat(G.getPropertyValue("padding-top")),ee=parseFloat(G.getPropertyValue("border-bottom-width"))+parseFloat(G.getPropertyValue("border-top-width")),le={sizingStyle:ni.map(Ce=>`${Ce}:${G.getPropertyValue(Ce)}`).join(";"),paddingSize:N,borderSize:ee,boxSizing:H};return E&&P&&(wf[P]=le),le}function k0(v,E=null,P=null,G=!1){A&&!Ia&&(Ia=document.createElement("textarea"),document.body.appendChild(Ia)),v.getAttribute("wrap")?Ia.setAttribute("wrap",v.getAttribute("wrap")):Ia.removeAttribute("wrap");let{paddingSize:H,borderSize:N,boxSizing:ee,sizingStyle:le}=dg(v,G);Ia.setAttribute("style",`${le};${OC}`),Ia.value=v.value||v.placeholder||"";let Ce=Number.MIN_SAFE_INTEGER,pe=Number.MAX_SAFE_INTEGER,we=Ia.scrollHeight,We;if(ee==="border-box"?we=we+N:ee==="content-box"&&(we=we-H),E!==null||P!==null){Ia.value=" ";let ut=Ia.scrollHeight-H;E!==null&&(Ce=ut*E,ee==="border-box"&&(Ce=Ce+H+N),we=Math.max(Ce,we)),P!==null&&(pe=ut*P,ee==="border-box"&&(pe=pe+H+N),We=we>pe?"":"hidden",we=Math.min(pe,we))}return P||(We="hidden"),{height:`${we}px`,minHeight:`${Ce}px`,maxHeight:`${pe}px`,overflowY:We}}const qi="ivu-input",Kc={name:"Input",mixins:[Mo],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(v){return re(v,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(v){return re(v,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:qi,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let v=this.type;return v==="password"&&this.password&&this.showPassword&&(v="text"),v},prepend(){let v=!1;return this.type!=="textarea"&&(v=this.$slots.prepend!==void 0),v},append(){let v=!1;return this.type!=="textarea"&&(v=this.$slots.append!==void 0),v},showPrefix(){let v=!1;return this.type!=="textarea"&&(v=this.prefix!==""||this.$slots.prefix!==void 0),v},showSuffix(){let v=!1;return this.type!=="textarea"&&(v=this.suffix!==""||this.$slots.suffix!==void 0),v},wrapClasses(){return[`${qi}-wrapper`,{[`${qi}-wrapper-${this.size}`]:!!this.size,[`${qi}-type-${this.type}`]:this.type,[`${qi}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${qi}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${qi}-group-with-prepend`]:this.prepend,[`${qi}-group-with-append`]:this.append||this.search&&this.enterButton,[`${qi}-hide-icon`]:this.append,[`${qi}-with-search`]:this.search&&this.enterButton,[`${qi}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${qi}`,{[`${qi}-${this.size}`]:!!this.size,[`${qi}-disabled`]:this.itemDisabled,[`${qi}-no-border`]:!this.border,[`${qi}-with-prefix`]:this.showPrefix,[`${qi}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${qi}`,{[`${qi}-disabled`]:this.itemDisabled,[`${qi}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const v={};let E=this.clearableIconOffset;return E&&(v.transform=`translateX(-${E}px)`),v}},methods:{handleEnter(v){this.$emit("on-enter",v),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(v){this.$emit("on-keydown",v)},handleKeypress(v){this.$emit("on-keypress",v)},handleKeyup(v){this.$emit("on-keyup",v)},handleIconClick(v){this.$emit("on-click",v)},handleFocus(v){this.$emit("on-focus",v)},handleBlur(v){this.$emit("on-blur",v),Tt(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(v){v.type==="compositionstart"&&(this.isOnComposition=!0),v.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(v))},handleInput(v){if(this.isOnComposition)return;let E=v.target.value;this.number&&E!==""&&(E=Number.isNaN(Number(E))?E:Number(E)),this.$emit("update:modelValue",E),this.setCurrentValue(E),this.$emit("on-change",v)},handleChange(v){this.$emit("on-input-change",v)},setCurrentValue(v){v!==this.currentValue&&(c.nextTick(()=>{this.resizeTextarea()}),this.currentValue=v,Tt(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",v))},resizeTextarea(){const v=this.autosize;if(!v||this.type!=="textarea")return!1;const E=v.minRows,P=v.maxRows;this.textareaStyles=k0(this.$refs.textarea,E,P)},focus(v){const E=this.type==="textarea"?this.$refs.textarea:this.$refs.input;E.focus(v);const{cursor:P}=v||{};if(P){const G=E.value.length;switch(P){case"start":E.setSelectionRange(0,0);break;case"end":E.setSelectionRange(G,G);break;default:E.setSelectionRange(0,G)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const v={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",v),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const v=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(v,v)},0)},handleCalcIconOffset(){const v=this.$el.querySelectorAll(".ivu-input-group-append")[0];v?this.clearableIconOffset=v.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(v){this.setCurrentValue(v)},type(){c.nextTick(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){c.nextTick(this.handleCalcIconOffset)}},BC={key:4,class:"ivu-input-suffix"},Ou={key:5,class:"ivu-input-word-count"},FC={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},Mb={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},VC=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],Xc={key:0,class:"ivu-icon ivu-icon-ios-search"},wh={key:9,class:"ivu-input-prefix"},D0=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],kb={key:0,class:"ivu-input-word-count"};function Db(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[P.type!=="textarea"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[N.prepend?c.withDirectives((c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-group-prepend"])},[c.renderSlot(v.$slots,"prepend")],2)),[[c.vShow,H.slotReady]]):c.createCommentVNode("",!0),P.clearable&&H.currentValue&&!v.itemDisabled?(c.openBlock(),c.createElementBlock("i",{key:1,class:c.normalizeClass(["ivu-icon",["ivu-icon-ios-close-circle",H.prefixCls+"-icon",H.prefixCls+"-icon-clear",H.prefixCls+"-icon-normal"]]),onClick:E[0]||(E[0]=(...ee)=>N.handleClear&&N.handleClear(...ee)),style:c.normalizeStyle(N.clearableStyles)},null,6)):P.icon?(c.openBlock(),c.createElementBlock("i",{key:2,class:c.normalizeClass(["ivu-icon",["ivu-icon-"+P.icon,H.prefixCls+"-icon",H.prefixCls+"-icon-normal"]]),onClick:E[1]||(E[1]=(...ee)=>N.handleIconClick&&N.handleIconClick(...ee))},null,2)):P.search&&P.enterButton===!1?(c.openBlock(),c.createElementBlock("i",{key:3,class:c.normalizeClass(["ivu-icon ivu-icon-ios-search",[H.prefixCls+"-icon",H.prefixCls+"-icon-normal",H.prefixCls+"-search-icon"]]),onClick:E[2]||(E[2]=(...ee)=>N.handleSearch&&N.handleSearch(...ee))},null,2)):N.showSuffix?(c.openBlock(),c.createElementBlock("span",BC,[c.renderSlot(v.$slots,"suffix",{},()=>[P.suffix?(c.openBlock(),c.createElementBlock("i",{key:0,class:c.normalizeClass(["ivu-icon",["ivu-icon-"+P.suffix]])},null,2)):c.createCommentVNode("",!0)])])):P.showWordLimit?(c.openBlock(),c.createElementBlock("span",Ou,c.toDisplayString(N.textLength)+"/"+c.toDisplayString(N.upperLimit),1)):P.password?(c.openBlock(),c.createElementBlock("span",{key:6,class:"ivu-input-suffix",onClick:E[3]||(E[3]=(...ee)=>N.handleToggleShowPassword&&N.handleToggleShowPassword(...ee))},[H.showPassword?(c.openBlock(),c.createElementBlock("i",FC)):(c.openBlock(),c.createElementBlock("i",Mb))])):c.createCommentVNode("",!0),c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[P.icon?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("i",{key:0,class:c.normalizeClass(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[H.prefixCls+"-icon",H.prefixCls+"-icon-validate"]])},null,2))]),_:1}),c.createElementVNode("input",{id:P.elementId,autocomplete:P.autocomplete,spellcheck:P.spellcheck,ref:"input",type:N.currentType,class:c.normalizeClass(N.inputClasses),placeholder:P.placeholder,disabled:v.itemDisabled,maxlength:P.maxlength,readonly:P.readonly,name:P.name,value:H.currentValue,number:P.number,autofocus:P.autofocus,onKeyup:[E[4]||(E[4]=c.withKeys((...ee)=>N.handleEnter&&N.handleEnter(...ee),["enter"])),E[5]||(E[5]=(...ee)=>N.handleKeyup&&N.handleKeyup(...ee))],onKeypress:E[6]||(E[6]=(...ee)=>N.handleKeypress&&N.handleKeypress(...ee)),onKeydown:E[7]||(E[7]=(...ee)=>N.handleKeydown&&N.handleKeydown(...ee)),onFocus:E[8]||(E[8]=(...ee)=>N.handleFocus&&N.handleFocus(...ee)),onBlur:E[9]||(E[9]=(...ee)=>N.handleBlur&&N.handleBlur(...ee)),onCompositionstart:E[10]||(E[10]=(...ee)=>N.handleComposition&&N.handleComposition(...ee)),onCompositionupdate:E[11]||(E[11]=(...ee)=>N.handleComposition&&N.handleComposition(...ee)),onCompositionend:E[12]||(E[12]=(...ee)=>N.handleComposition&&N.handleComposition(...ee)),onInput:E[13]||(E[13]=(...ee)=>N.handleInput&&N.handleInput(...ee)),onChange:E[14]||(E[14]=(...ee)=>N.handleChange&&N.handleChange(...ee))},null,42,VC),N.append?c.withDirectives((c.openBlock(),c.createElementBlock("div",{key:7,class:c.normalizeClass([H.prefixCls+"-group-append"])},[c.renderSlot(v.$slots,"append")],2)),[[c.vShow,H.slotReady]]):P.search&&P.enterButton?(c.openBlock(),c.createElementBlock("div",{key:8,class:c.normalizeClass([H.prefixCls+"-group-append",H.prefixCls+"-search"]),onClick:E[15]||(E[15]=(...ee)=>N.handleSearch&&N.handleSearch(...ee))},[P.enterButton===!0?(c.openBlock(),c.createElementBlock("i",Xc)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode(c.toDisplayString(P.enterButton),1)],64))],2)):N.showPrefix?(c.openBlock(),c.createElementBlock("span",wh,[c.renderSlot(v.$slots,"prefix",{},()=>[P.prefix?(c.openBlock(),c.createElementBlock("i",{key:0,class:c.normalizeClass(["ivu-icon",["ivu-icon-"+P.prefix]])},null,2)):c.createCommentVNode("",!0)])])):c.createCommentVNode("",!0)],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createElementVNode("textarea",{id:P.elementId,wrap:P.wrap,autocomplete:P.autocomplete,spellcheck:P.spellcheck,ref:"textarea",class:c.normalizeClass(N.textareaClasses),style:c.normalizeStyle(H.textareaStyles),placeholder:P.placeholder,disabled:v.itemDisabled,rows:P.rows,maxlength:P.maxlength,readonly:P.readonly,name:P.name,value:H.currentValue,autofocus:P.autofocus,onKeyup:[E[16]||(E[16]=c.withKeys((...ee)=>N.handleEnter&&N.handleEnter(...ee),["enter"])),E[17]||(E[17]=(...ee)=>N.handleKeyup&&N.handleKeyup(...ee))],onKeypress:E[18]||(E[18]=(...ee)=>N.handleKeypress&&N.handleKeypress(...ee)),onKeydown:E[19]||(E[19]=(...ee)=>N.handleKeydown&&N.handleKeydown(...ee)),onFocus:E[20]||(E[20]=(...ee)=>N.handleFocus&&N.handleFocus(...ee)),onBlur:E[21]||(E[21]=(...ee)=>N.handleBlur&&N.handleBlur(...ee)),onCompositionstart:E[22]||(E[22]=(...ee)=>N.handleComposition&&N.handleComposition(...ee)),onCompositionupdate:E[23]||(E[23]=(...ee)=>N.handleComposition&&N.handleComposition(...ee)),onCompositionend:E[24]||(E[24]=(...ee)=>N.handleComposition&&N.handleComposition(...ee)),onInput:E[25]||(E[25]=(...ee)=>N.handleInput&&N.handleInput(...ee))},`
            `,46,D0),P.showWordLimit?(c.openBlock(),c.createElementBlock("span",kb,c.toDisplayString(N.textLength)+"/"+c.toDisplayString(N.upperLimit),1)):c.createCommentVNode("",!0)],64))],2)}var Sl=$(Kc,[["render",Db]]);const Pb={name:"AutoComplete",mixins:[Mo],components:{iSelect:ea,iOption:Pp,iInput:Sl},emits:["update:modelValue","on-change","on-search","on-select","on-focus","on-blur","on-clear"],props:{modelValue:{type:[String,Number],default:""},label:{type:[String,Number],default:""},data:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},icon:{type:String},filterMethod:{type:[Function,Boolean],default:!1},placement:{validator(v){return re(v,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},transferClassName:{type:String},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,disableEmitChange:!1}},computed:{inputIcon(){let v="";return this.clearable&&this.currentValue&&!this.disabled?v="ios-close-circle":this.icon&&(v=this.icon),v},filteredData(){return this.filterMethod?this.data.filter(v=>this.filterMethod(this.currentValue,v)):this.data}},watch:{modelValue(v){this.currentValue!==v&&(this.disableEmitChange=!0),this.currentValue=v},currentValue(v){if(this.$refs.select.setQuery(v),this.$emit("update:modelValue",v),this.disableEmitChange){this.disableEmitChange=!1;return}this.$emit("on-change",v),this.handleFormItemChange("change",v)}},methods:{remoteMethod(v){this.$emit("on-search",v)},handleSelect(v){const E=v.value;E!=null&&(this.currentValue=E,this.$refs.input.blur(),this.$emit("on-select",E))},handleFocus(v){this.$emit("on-focus",v)},handleBlur(v){this.$emit("on-blur",v)},handleClear(){!this.clearable||(this.currentValue="",this.$refs.select.reset(),this.$emit("on-clear"))},handleClickOutside(){c.nextTick(()=>{this.$refs.input.blur()})}}};function zC(v,E,P,G,H,N){const ee=c.resolveComponent("i-input"),le=c.resolveComponent("i-option"),Ce=c.resolveComponent("i-select");return c.openBlock(),c.createBlock(Ce,{ref:"select",class:"ivu-auto-complete",label:P.label,disabled:v.itemDisabled,clearable:P.clearable,placeholder:P.placeholder,size:P.size,placement:P.placement,"model-value":H.currentValue,"transfer-class-name":P.transferClassName,filterable:"",remote:"","auto-complete":"","remote-method":N.remoteMethod,onOnSelect:N.handleSelect,onOnClickoutside:N.handleClickOutside,transfer:P.transfer,capture:P.capture,eventsEnabled:P.eventsEnabled},{input:c.withCtx(()=>[c.renderSlot(v.$slots,"input",{},()=>[c.createVNode(ee,{"element-id":P.elementId,ref:"input",modelValue:H.currentValue,"onUpdate:modelValue":E[0]||(E[0]=pe=>H.currentValue=pe),name:P.name,placeholder:P.placeholder,disabled:v.itemDisabled,size:P.size,icon:N.inputIcon,onOnClick:N.handleClear,onOnFocus:N.handleFocus,onOnBlur:N.handleBlur},null,8,["element-id","modelValue","name","placeholder","disabled","size","icon","onOnClick","onOnFocus","onOnBlur"])])]),default:c.withCtx(()=>[c.renderSlot(v.$slots,"default",{},()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.filteredData,pe=>(c.openBlock(),c.createBlock(le,{value:pe,key:pe},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(pe),1)]),_:2},1032,["value"]))),128))])]),_:3},8,["label","disabled","clearable","placeholder","size","placement","model-value","transfer-class-name","remote-method","onOnSelect","onOnClickoutside","transfer","capture","eventsEnabled"])}var $s=$(Pb,[["render",zC]]);const Jc="ivu-avatar",UC=["small","large","default"],Rb={name:"Avatar",components:{Icon:oe},emits:["on-error"],props:{shape:{validator(v){return re(v,["circle","square"])},default:"circle"},size:{type:[String,Number],default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},src:{type:String},icon:{type:String},customIcon:{type:String,default:""}},data(){return{prefixCls:Jc,scale:1,childrenWidth:0,isSlotShow:!1,slotTemp:null}},computed:{classes(){return[`${Jc}`,`${Jc}-${this.shape}`,{[`${Jc}-image`]:!!this.src,[`${Jc}-icon`]:!!this.icon||!!this.customIcon,[`${Jc}-${this.size}`]:re(this.size,UC)}]},styles(){let v={};return this.size&&!re(this.size,UC)&&(v.width=`${this.size}px`,v.height=`${this.size}px`,v.lineHeight=`${this.size}px`,v.fontSize=`${this.size/2}px`),v},childrenStyle(){let v={};return this.isSlotShow&&(v={msTransform:`scale(${this.scale})`,WebkitTransform:`scale(${this.scale})`,transform:`scale(${this.scale})`,position:"absolute",display:"inline-block",left:`calc(50% - ${Math.round(this.childrenWidth/2)}px)`}),v}},watch:{size(v,E){v!==E&&this.setScale()}},methods:{setScale(){if(this.isSlotShow=!this.src&&!this.icon,this.$refs.children){this.childrenWidth=this.$refs.children.offsetWidth;const v=this.$el.getBoundingClientRect().width;v-8<this.childrenWidth?this.scale=(v-8)/this.childrenWidth:this.scale=1}},handleError(v){this.$emit("on-error",v)}},beforeCreate(){this.slotTemp=this.$slots.default?this.$slots.default():null},mounted(){this.setScale()},updated(){const v=this.$slots.default?this.$slots.default():null;v&&v!==this.slotTemp&&this.setScale()}},Qc=["src"];function OM(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("span",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles)},[P.src?(c.openBlock(),c.createElementBlock("img",{key:0,src:P.src,onError:E[0]||(E[0]=(...le)=>N.handleError&&N.handleError(...le))},null,40,Qc)):P.icon||P.customIcon?(c.openBlock(),c.createBlock(ee,{key:1,type:P.icon,custom:P.customIcon},null,8,["type","custom"])):(c.openBlock(),c.createElementBlock("span",{key:2,ref:"children",class:c.normalizeClass([H.prefixCls+"-string"]),style:c.normalizeStyle(N.childrenStyle)},[c.renderSlot(v.$slots,"default")],6))],6)}var Ef=$(Rb,[["render",OM]]),ba={emits:["on-popper-show","on-popper-hide","created","update:modelValue"],props:{eventsEnabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:Object,popper:Object,offset:{default:0},modelValue:{type:Boolean,default:!1},transition:String,options:{type:Object,default(){return{modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}}}}}},data(){return{visible:this.modelValue}},watch:{modelValue:{immediate:!0,handler(v){this.visible=v,this.$emit("update:modelValue",v)}},visible(v){v?(this.handleIndexIncrease&&this.handleIndexIncrease(),this.updatePopper(),this.$emit("on-popper-show")):this.$emit("on-popper-hide"),this.$emit("update:modelValue",v)}},methods:{createPopper(){if(!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.placement))return;const v=this.options,E=this.popper||this.$refs.popper,P=this.reference||this.$refs.reference;!E||!P||(this.popperJS&&this.popperJS.hasOwnProperty("destroy")&&this.popperJS.destroy(),v.eventsEnabled=this.eventsEnabled,v.placement=this.placement,v.modifiers.offset||(v.modifiers.offset={}),v.modifiers.offset.offset=this.offset,v.onCreate=()=>{c.nextTick(this.updatePopper),this.$emit("created",this)},this.popperJS=new kn(P,E,v))},updatePopper(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy(){this.visible||(this.popperJS.destroy(),this.popperJS=null)}},updated(){c.nextTick(()=>this.updatePopper())},beforeUnmount(){this.popperJS&&this.popperJS.destroy()}};const ta="ivu-tooltip",Tf={name:"Tooltip",mixins:[ba],props:{placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},content:{type:[String,Number],default:""},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1},controlled:{type:Boolean,default:!1},always:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},theme:{validator(v){return re(v,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number]},transferClassName:{type:String}},data(){return{prefixCls:ta,tIndex:this.handleGetIndex()}},computed:{innerStyles(){const v={};return this.maxWidth&&(v["max-width"]=`${this.maxWidth}px`),v},innerClasses(){return[`${ta}-inner`,{[`${ta}-inner-with-width`]:!!this.maxWidth}]},dropStyles(){let v={};return this.transfer&&(v["z-index"]=1060+this.tIndex),v},dropdownCls(){return[`${ta}-popper`,`${ta}-${this.theme}`,{[ta+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]}},watch:{content(){this.updatePopper()}},methods:{handleShowPopper(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!0},this.delay),this.tIndex=this.handleGetIndex()},handleClosePopper(){this.timeout&&(clearTimeout(this.timeout),this.controlled||(this.timeout=setTimeout(()=>{this.visible=!1},100)))},handleGetIndex(){return gn(),Zn}},mounted(){this.always&&this.updatePopper()}};function HC(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls]),onMouseenter:E[2]||(E[2]=(...ee)=>N.handleShowPopper&&N.handleShowPopper(...ee)),onMouseleave:E[3]||(E[3]=(...ee)=>N.handleClosePopper&&N.handleClosePopper(...ee))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-rel"]),ref:"reference"},[c.renderSlot(v.$slots,"default")],2),(c.openBlock(),c.createBlock(c.Teleport,{to:"body",disabled:!P.transfer},[c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",{ref:"popper",class:c.normalizeClass(N.dropdownCls),style:c.normalizeStyle(N.dropStyles),onMouseenter:E[0]||(E[0]=(...ee)=>N.handleShowPopper&&N.handleShowPopper(...ee)),onMouseleave:E[1]||(E[1]=(...ee)=>N.handleClosePopper&&N.handleClosePopper(...ee))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-arrow"])},null,2),c.createElementVNode("div",{class:c.normalizeClass(N.innerClasses),style:c.normalizeStyle(N.innerStyles)},[c.renderSlot(v.$slots,"content",{},()=>[c.createTextVNode(c.toDisplayString(P.content),1)])],6)],2)],38),[[c.vShow,!P.disabled&&(v.visible||P.always)]])]),_:3})],8,["disabled"]))],34)}var bn=$(Tf,[["render",HC]]);const hg={name:"AvatarList",components:{Avatar:Ef,Tooltip:bn},props:{list:{type:Array,default(){return[]}},shape:{validator(v){return re(v,["circle","square"])},default:"circle"},size:{validator(v){return re(v,["small","large","default"])},default:"default"},excessStyle:{type:Object,default(){return{}}},max:{type:Number},tooltip:{type:Boolean,default:!0},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{currentList(){const v=this.list.length,E=this.max;return v<=E?[...this.list]:[...this.list].slice(0,E)}}},ns={key:0,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"},Ls={key:1,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"};function GC(v,E,P,G,H,N){const ee=c.resolveComponent("Avatar"),le=c.resolveComponent("Tooltip");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-avatar-list","ivu-avatar-list-"+P.size])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.currentList,(Ce,pe)=>(c.openBlock(),c.createElementBlock("div",{class:"ivu-avatar-list-item",key:pe},[P.tooltip&&Ce.tip?(c.openBlock(),c.createBlock(le,{key:0,content:Ce.tip,placement:P.placement},{default:c.withCtx(()=>[c.createVNode(ee,{src:Ce.src,size:P.size,shape:P.shape},null,8,["src","size","shape"])]),_:2},1032,["content","placement"])):(c.openBlock(),c.createBlock(ee,{key:1,src:Ce.src,size:P.size,shape:P.shape},null,8,["src","size","shape"]))]))),128)),v.$slots.extra?(c.openBlock(),c.createElementBlock("div",ns,[c.createVNode(ee,{size:P.size,shape:P.shape,style:c.normalizeStyle(P.excessStyle)},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"extra")]),_:3},8,["size","shape","style"])])):P.list.length>P.max?(c.openBlock(),c.createElementBlock("div",Ls,[c.createVNode(ee,{size:P.size,shape:P.shape,style:c.normalizeStyle(P.excessStyle)},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"excess",{},()=>[c.createTextVNode("+"+c.toDisplayString(P.list.length-P.max),1)])]),_:3},8,["size","shape","style"])])):c.createCommentVNode("",!0)],2)}var Ni=$(hg,[["render",GC]]);const Ib="ivu-back-top",P0={name:"BackTop",emits:["on-click"],props:{height:{type:Number,default:400},bottom:{type:Number,default:30},right:{type:Number,default:30},duration:{type:Number,default:1e3}},data(){return{backTop:!1}},mounted(){R(window,"scroll",this.handleScroll),R(window,"resize",this.handleScroll)},beforeUnmount(){L(window,"scroll",this.handleScroll),L(window,"resize",this.handleScroll)},computed:{classes(){return[`${Ib}`,{[`${Ib}-show`]:this.backTop}]},styles(){return{bottom:`${this.bottom}px`,right:`${this.right}px`}},innerClasses(){return`${Ib}-inner`}},methods:{handleScroll(){!A||(this.backTop=window.pageYOffset>=this.height)},back(){if(!A)return;const v=document.documentElement.scrollTop||document.body.scrollTop;Ke(window,v,0,this.duration),this.$emit("on-click")}}},BM=[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-up"},null,-1)];function $r(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles),onClick:E[0]||(E[0]=(...ee)=>N.back&&N.back(...ee))},[c.renderSlot(v.$slots,"default",{},()=>[c.createElementVNode("div",{class:c.normalizeClass(N.innerClasses)},BM,2)])],6)}var Af=$(P0,[["render",$r]]);const on=["blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],mi="ivu-badge",$b={name:"Badge",props:{count:Number,dot:{type:Boolean,default:!1},overflowCount:{type:[Number,String],default:99},className:String,showZero:{type:Boolean,default:!1},text:{type:String,default:""},status:{validator(v){return re(v,["success","processing","default","error","warning"])}},type:{validator(v){return re(v,["success","primary","normal","error","warning","info"])}},offset:{type:Array},color:{type:String}},computed:{classes(){return`${mi}`},dotClasses(){return`${mi}-dot`},countClasses(){return[`${mi}-count`,{[`${this.className}`]:!!this.className,[`${mi}-count-alone`]:this.alone,[`${mi}-count-${this.type}`]:!!this.type}]},customCountClasses(){return[`${mi}-count`,`${mi}-count-custom`,{[`${this.className}`]:!!this.className}]},statusClasses(){return[`${mi}-status-dot`,{[`${mi}-status-${this.status}`]:!!this.status,[`${mi}-status-${this.color}`]:!!this.color&&re(this.color,on)}]},statusStyles(){return re(this.color,on)?{}:{backgroundColor:this.color}},styles(){const v={};return this.offset&&this.offset.length===2&&(v["margin-top"]=`${this.offset[0]}px`,v["margin-right"]=`${this.offset[1]}px`),v},finalCount(){return this.text!==""?this.text:parseInt(this.count)>=parseInt(this.overflowCount)?`${this.overflowCount}+`:this.count},badge(){let v=!1;return this.count&&(v=parseInt(this.count)!==0),this.dot&&(v=!0,this.count!==null&&parseInt(this.count)===0&&(v=!1)),this.text!==""&&(v=!0),v||this.showZero},hasCount(){return!!(this.count||this.text!==""||this.showZero&&parseInt(this.count)===0)},alone(){return this.$slots.default===void 0}}},Wa={class:"ivu-badge-status-text"};function rs(v,E,P,G,H,N){return P.dot?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(N.classes),ref:"badge"},[c.renderSlot(v.$slots,"default"),c.withDirectives(c.createElementVNode("sup",{class:c.normalizeClass(N.dotClasses),style:c.normalizeStyle(N.styles)},null,6),[[c.vShow,N.badge]])],2)):P.status||P.color?(c.openBlock(),c.createElementBlock("span",{key:1,class:c.normalizeClass([N.classes,"ivu-badge-status"]),ref:"badge"},[c.createElementVNode("span",{class:c.normalizeClass(N.statusClasses),style:c.normalizeStyle(N.statusStyles)},null,6),c.createElementVNode("span",Wa,[c.renderSlot(v.$slots,"text",{},()=>[c.createTextVNode(c.toDisplayString(P.text),1)])])],2)):(c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass(N.classes),ref:"badge"},[c.renderSlot(v.$slots,"default"),v.$slots.count?(c.openBlock(),c.createElementBlock("sup",{key:0,style:c.normalizeStyle(N.styles),class:c.normalizeClass(N.customCountClasses)},[c.renderSlot(v.$slots,"count")],6)):N.hasCount?c.withDirectives((c.openBlock(),c.createElementBlock("sup",{key:1,style:c.normalizeStyle(N.styles),class:c.normalizeClass(N.countClasses)},[c.renderSlot(v.$slots,"text",{},()=>[c.createTextVNode(c.toDisplayString(N.finalCount),1)])],6)),[[c.vShow,N.badge]]):c.createCommentVNode("",!0)],2))}var fg=$($b,[["render",rs]]);const Do={name:"Breadcrumb",provide(){return{BreadcrumbInstance:this}},props:{separator:{type:String,default:"/"}}},pg={class:"ivu-breadcrumb"};function WC(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",pg,[c.renderSlot(v.$slots,"default")])}var Rp=$(Do,[["render",WC]]);const ua="ivu-breadcrumb-item",Eh={name:"BreadcrumbItem",mixins:[ht],inject:["BreadcrumbInstance"],props:{},data(){return{showSeparator:!1}},computed:{linkClasses(){return`${ua}-link`},separatorClasses(){return`${ua}-separator`},separator(){return this.BreadcrumbInstance.separator}},mounted(){this.showSeparator=this.$slots.separator!==void 0}},FM=["href","target"],YC=["innerHTML"];function Ti(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",null,[v.to?(c.openBlock(),c.createElementBlock("a",{key:0,href:v.linkUrl,target:v.target,class:c.normalizeClass(N.linkClasses),onClick:[E[0]||(E[0]=c.withModifiers(ee=>v.handleCheckClick(ee,!1),["exact"])),E[1]||(E[1]=c.withModifiers(ee=>v.handleCheckClick(ee,!0),["ctrl"])),E[2]||(E[2]=c.withModifiers(ee=>v.handleCheckClick(ee,!0),["meta"]))]},[c.renderSlot(v.$slots,"default")],10,FM)):(c.openBlock(),c.createElementBlock("span",{key:1,class:c.normalizeClass(N.linkClasses)},[c.renderSlot(v.$slots,"default")],2)),H.showSeparator?(c.openBlock(),c.createElementBlock("span",{key:3,class:c.normalizeClass(N.separatorClasses)},[c.renderSlot(v.$slots,"separator")],2)):(c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass(N.separatorClasses),innerHTML:N.separator},null,10,YC))])}var R0=$(Eh,[["render",Ti]]);const hc="ivu-btn",Oi={name:"Button",mixins:[ht,Mo],components:{Icon:oe},emits:["click"],props:{type:{validator(v){return re(v,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(v){return re(v,["circle","circle-outline"])}},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(v){return re(v,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${hc}`,`${hc}-${this.type}`,{[`${hc}-long`]:this.long,[`${hc}-${this.shape}`]:!!this.shape,[`${hc}-${this.size}`]:this.size!=="default",[`${hc}-loading`]:this.loading!=null&&this.loading,[`${hc}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${hc}-ghost`]:this.ghost}]},isHrefPattern(){const{to:v}=this;return!!v},tagName(){const{isHrefPattern:v}=this;return v?"a":"button"},tagProps(){const{isHrefPattern:v}=this;if(v){const{linkUrl:E,target:P}=this;return{href:E,target:P}}else{const{htmlType:E}=this;return{type:E}}}},methods:{handleClickLink(v){this.$emit("click",v);const E=v.ctrlKey||v.metaKey;this.handleCheckClick(v,E)}},render(){let v;this.tagName==="button"?v="button":this.tagName==="a"&&(v="a");let E=[];return this.loading&&E.push(c.h(oe,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&E.push(c.h(oe,{type:this.icon,custom:this.customIcon})),this.$slots.default&&E.push(c.h("span",{ref:"slot"},this.$slots.default())),c.h(v,S({class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink},this.tagProps),E)}},Bu="ivu-btn-group",mg={name:"ButtonGroup",props:{size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},shape:{validator(v){return re(v,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${Bu}`,{[`${Bu}-${this.size}`]:!!this.size,[`${Bu}-${this.shape}`]:!!this.shape,[`${Bu}-vertical`]:this.vertical}]}}};function Co(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.renderSlot(v.$slots,"default")],2)}var os=$(mg,[["render",Co]]);const xl="ivu-radio-group";let VM=0;const eu=Date.now(),Cl={name:"RadioGroup",mixins:[Mo],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},type:{validator(v){return re(v,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:()=>`ivuRadioGroup_${eu}_${VM++}`},buttonStyle:{validator(v){return re(v,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${xl}`,{[`${xl}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${xl}-${this.type}`]:!!this.type,[`${xl}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${xl}-vertical`]:this.vertical}]}},methods:{change(v){this.currentValue=v.value,this.$emit("update:modelValue",v.value),this.$emit("on-change",v.value),this.handleFormItemChange("change",v.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},ql=["name"];function zM(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),name:P.name},[c.renderSlot(v.$slots,"default")],10,ql)}var I0=$(Cl,[["render",zM]]);const Ns="ivu-radio",$0={name:"Radio",mixins:[Mo],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${Ns}-wrapper`,{[`${Ns}-group-item`]:this.group,[`${Ns}-wrapper-checked`]:this.currentValue,[`${Ns}-wrapper-disabled`]:this.itemDisabled,[`${Ns}-${this.size}`]:!!this.size,[`${Ns}-focus`]:this.focusWrapper,[`${Ns}-border`]:this.border}]},radioClasses(){return[`${Ns}`,{[`${Ns}-checked`]:this.currentValue,[`${Ns}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${Ns}-inner`,{[`${Ns}-focus`]:this.focusInner}]},inputClasses(){return`${Ns}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(v){if(this.itemDisabled)return!1;const E=v.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",E),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",E),this.handleFormItemChange("change",E))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(v){if(!(v===this.trueValue||v===this.falseValue))throw"Value should be trueValue or falseValue."}}},na=["disabled","checked","name"];function Dd(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("label",{class:c.normalizeClass(N.wrapClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.radioClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.innerClasses)},null,2),c.createElementVNode("input",{type:"radio",class:c.normalizeClass(N.inputClasses),disabled:v.itemDisabled,checked:N.currentValue,name:H.groupName,onChange:E[0]||(E[0]=(...ee)=>N.change&&N.change(...ee)),onFocus:E[1]||(E[1]=(...ee)=>N.onFocus&&N.onFocus(...ee)),onBlur:E[2]||(E[2]=(...ee)=>N.onBlur&&N.onBlur(...ee))},null,42,na)],2),c.renderSlot(v.$slots,"default",{},()=>[c.createTextVNode(c.toDisplayString(P.label),1)])],2)}var ms=$($0,[["render",Dd]]),Fu={exports:{}};(function(v,E){(function(P,G){v.exports=G()})(Wt,function(){var P=1e3,G=6e4,H=36e5,N="millisecond",ee="second",le="minute",Ce="hour",pe="day",we="week",We="month",ut="quarter",ct="year",ot="date",Oe="Invalid Date",wt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Er=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ir={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Wn=function(Ln,Yn,nr){var Hr=String(Ln);return!Hr||Hr.length>=Yn?Ln:""+Array(Yn+1-Hr.length).join(nr)+Ln},jt={s:Wn,z:function(Ln){var Yn=-Ln.utcOffset(),nr=Math.abs(Yn),Hr=Math.floor(nr/60),rr=nr%60;return(Yn<=0?"+":"-")+Wn(Hr,2,"0")+":"+Wn(rr,2,"0")},m:function Ln(Yn,nr){if(Yn.date()<nr.date())return-Ln(nr,Yn);var Hr=12*(nr.year()-Yn.year())+(nr.month()-Yn.month()),rr=Yn.clone().add(Hr,We),ao=nr-rr<0,Xr=Yn.clone().add(Hr+(ao?-1:1),We);return+(-(Hr+(nr-rr)/(ao?rr-Xr:Xr-rr))||0)},a:function(Ln){return Ln<0?Math.ceil(Ln)||0:Math.floor(Ln)},p:function(Ln){return{M:We,y:ct,w:we,d:pe,D:ot,h:Ce,m:le,s:ee,ms:N,Q:ut}[Ln]||String(Ln||"").toLowerCase().replace(/s$/,"")},u:function(Ln){return Ln===void 0}},It="en",Cn={};Cn[It]=ir;var Pt=function(Ln){return Ln instanceof uo},Pr=function Ln(Yn,nr,Hr){var rr;if(!Yn)return It;if(typeof Yn=="string"){var ao=Yn.toLowerCase();Cn[ao]&&(rr=ao),nr&&(Cn[ao]=nr,rr=ao);var Xr=Yn.split("-");if(!rr&&Xr.length>1)return Ln(Xr[0])}else{var Ir=Yn.name;Cn[Ir]=Yn,rr=Ir}return!Hr&&rr&&(It=rr),rr||!Hr&&It},cr=function(Ln,Yn){if(Pt(Ln))return Ln.clone();var nr=typeof Yn=="object"?Yn:{};return nr.date=Ln,nr.args=arguments,new uo(nr)},ar=jt;ar.l=Pr,ar.i=Pt,ar.w=function(Ln,Yn){return cr(Ln,{locale:Yn.$L,utc:Yn.$u,x:Yn.$x,$offset:Yn.$offset})};var uo=function(){function Ln(nr){this.$L=Pr(nr.locale,null,!0),this.parse(nr)}var Yn=Ln.prototype;return Yn.parse=function(nr){this.$d=function(Hr){var rr=Hr.date,ao=Hr.utc;if(rr===null)return new Date(NaN);if(ar.u(rr))return new Date;if(rr instanceof Date)return new Date(rr);if(typeof rr=="string"&&!/Z$/i.test(rr)){var Xr=rr.match(wt);if(Xr){var Ir=Xr[2]-1||0,Ci=(Xr[7]||"0").substring(0,3);return ao?new Date(Date.UTC(Xr[1],Ir,Xr[3]||1,Xr[4]||0,Xr[5]||0,Xr[6]||0,Ci)):new Date(Xr[1],Ir,Xr[3]||1,Xr[4]||0,Xr[5]||0,Xr[6]||0,Ci)}}return new Date(rr)}(nr),this.$x=nr.x||{},this.init()},Yn.init=function(){var nr=this.$d;this.$y=nr.getFullYear(),this.$M=nr.getMonth(),this.$D=nr.getDate(),this.$W=nr.getDay(),this.$H=nr.getHours(),this.$m=nr.getMinutes(),this.$s=nr.getSeconds(),this.$ms=nr.getMilliseconds()},Yn.$utils=function(){return ar},Yn.isValid=function(){return this.$d.toString()!==Oe},Yn.isSame=function(nr,Hr){var rr=cr(nr);return this.startOf(Hr)<=rr&&rr<=this.endOf(Hr)},Yn.isAfter=function(nr,Hr){return cr(nr)<this.startOf(Hr)},Yn.isBefore=function(nr,Hr){return this.endOf(Hr)<cr(nr)},Yn.$g=function(nr,Hr,rr){return ar.u(nr)?this[Hr]:this.set(rr,nr)},Yn.unix=function(){return Math.floor(this.valueOf()/1e3)},Yn.valueOf=function(){return this.$d.getTime()},Yn.startOf=function(nr,Hr){var rr=this,ao=!!ar.u(Hr)||Hr,Xr=ar.p(nr),Ir=function(yl,zn){var Zr=ar.w(rr.$u?Date.UTC(rr.$y,zn,yl):new Date(rr.$y,zn,yl),rr);return ao?Zr:Zr.endOf(pe)},Ci=function(yl,zn){return ar.w(rr.toDate()[yl].apply(rr.toDate("s"),(ao?[0,0,0,0]:[23,59,59,999]).slice(zn)),rr)},Io=this.$W,Ji=this.$M,Gs=this.$D,Ii="set"+(this.$u?"UTC":"");switch(Xr){case ct:return ao?Ir(1,0):Ir(31,11);case We:return ao?Ir(1,Ji):Ir(0,Ji+1);case we:var za=this.$locale().weekStart||0,Nc=(Io<za?Io+7:Io)-za;return Ir(ao?Gs-Nc:Gs+(6-Nc),Ji);case pe:case ot:return Ci(Ii+"Hours",0);case Ce:return Ci(Ii+"Minutes",1);case le:return Ci(Ii+"Seconds",2);case ee:return Ci(Ii+"Milliseconds",3);default:return this.clone()}},Yn.endOf=function(nr){return this.startOf(nr,!1)},Yn.$set=function(nr,Hr){var rr,ao=ar.p(nr),Xr="set"+(this.$u?"UTC":""),Ir=(rr={},rr[pe]=Xr+"Date",rr[ot]=Xr+"Date",rr[We]=Xr+"Month",rr[ct]=Xr+"FullYear",rr[Ce]=Xr+"Hours",rr[le]=Xr+"Minutes",rr[ee]=Xr+"Seconds",rr[N]=Xr+"Milliseconds",rr)[ao],Ci=ao===pe?this.$D+(Hr-this.$W):Hr;if(ao===We||ao===ct){var Io=this.clone().set(ot,1);Io.$d[Ir](Ci),Io.init(),this.$d=Io.set(ot,Math.min(this.$D,Io.daysInMonth())).$d}else Ir&&this.$d[Ir](Ci);return this.init(),this},Yn.set=function(nr,Hr){return this.clone().$set(nr,Hr)},Yn.get=function(nr){return this[ar.p(nr)]()},Yn.add=function(nr,Hr){var rr,ao=this;nr=Number(nr);var Xr=ar.p(Hr),Ir=function(Ji){var Gs=cr(ao);return ar.w(Gs.date(Gs.date()+Math.round(Ji*nr)),ao)};if(Xr===We)return this.set(We,this.$M+nr);if(Xr===ct)return this.set(ct,this.$y+nr);if(Xr===pe)return Ir(1);if(Xr===we)return Ir(7);var Ci=(rr={},rr[le]=G,rr[Ce]=H,rr[ee]=P,rr)[Xr]||1,Io=this.$d.getTime()+nr*Ci;return ar.w(Io,this)},Yn.subtract=function(nr,Hr){return this.add(-1*nr,Hr)},Yn.format=function(nr){var Hr=this,rr=this.$locale();if(!this.isValid())return rr.invalidDate||Oe;var ao=nr||"YYYY-MM-DDTHH:mm:ssZ",Xr=ar.z(this),Ir=this.$H,Ci=this.$m,Io=this.$M,Ji=rr.weekdays,Gs=rr.months,Ii=function(zn,Zr,pi,va){return zn&&(zn[Zr]||zn(Hr,ao))||pi[Zr].substr(0,va)},za=function(zn){return ar.s(Ir%12||12,zn,"0")},Nc=rr.meridiem||function(zn,Zr,pi){var va=zn<12?"AM":"PM";return pi?va.toLowerCase():va},yl={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Io+1,MM:ar.s(Io+1,2,"0"),MMM:Ii(rr.monthsShort,Io,Gs,3),MMMM:Ii(Gs,Io),D:this.$D,DD:ar.s(this.$D,2,"0"),d:String(this.$W),dd:Ii(rr.weekdaysMin,this.$W,Ji,2),ddd:Ii(rr.weekdaysShort,this.$W,Ji,3),dddd:Ji[this.$W],H:String(Ir),HH:ar.s(Ir,2,"0"),h:za(1),hh:za(2),a:Nc(Ir,Ci,!0),A:Nc(Ir,Ci,!1),m:String(Ci),mm:ar.s(Ci,2,"0"),s:String(this.$s),ss:ar.s(this.$s,2,"0"),SSS:ar.s(this.$ms,3,"0"),Z:Xr};return ao.replace(Er,function(zn,Zr){return Zr||yl[zn]||Xr.replace(":","")})},Yn.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Yn.diff=function(nr,Hr,rr){var ao,Xr=ar.p(Hr),Ir=cr(nr),Ci=(Ir.utcOffset()-this.utcOffset())*G,Io=this-Ir,Ji=ar.m(this,Ir);return Ji=(ao={},ao[ct]=Ji/12,ao[We]=Ji,ao[ut]=Ji/3,ao[we]=(Io-Ci)/6048e5,ao[pe]=(Io-Ci)/864e5,ao[Ce]=Io/H,ao[le]=Io/G,ao[ee]=Io/P,ao)[Xr]||Io,rr?Ji:ar.a(Ji)},Yn.daysInMonth=function(){return this.endOf(We).$D},Yn.$locale=function(){return Cn[this.$L]},Yn.locale=function(nr,Hr){if(!nr)return this.$L;var rr=this.clone(),ao=Pr(nr,Hr,!0);return ao&&(rr.$L=ao),rr},Yn.clone=function(){return ar.w(this.$d,this)},Yn.toDate=function(){return new Date(this.valueOf())},Yn.toJSON=function(){return this.isValid()?this.toISOString():null},Yn.toISOString=function(){return this.$d.toISOString()},Yn.toString=function(){return this.$d.toUTCString()},Ln}(),Tr=uo.prototype;return cr.prototype=Tr,[["$ms",N],["$s",ee],["$m",le],["$H",Ce],["$W",pe],["$M",We],["$y",ct],["$D",ot]].forEach(function(Ln){Tr[Ln[1]]=function(Yn){return this.$g(Yn,Ln[0],Ln[1])}}),cr.extend=function(Ln,Yn){return Ln.$i||(Ln(Yn,uo,cr),Ln.$i=!0),cr},cr.locale=Pr,cr.isDayjs=Pt,cr.unix=function(Ln){return cr(1e3*Ln)},cr.en=Cn[It],cr.Ls=Cn,cr.p={},cr})})(Fu);var Os=Fu.exports,da=1/0,Vu=9007199254740991,jC=17976931348623157e292,L0=0/0,ZC="[object Function]",qC="[object GeneratorFunction]",Ip="[object Symbol]",Lb=/^\s+|\s+$/g,Nb=/^[-+]0x[0-9a-f]+$/i,Ob=/^0b[01]+$/i,KC=/^0o[0-7]+$/i,$p=/^(?:0|[1-9]\d*)$/,Bb=parseInt,Lp=Object.prototype,Fb=Lp.toString,N0=Math.ceil,XC=Math.max;function JC(v,E,P){var G=-1,H=v.length;E<0&&(E=-E>H?0:H+E),P=P>H?H:P,P<0&&(P+=H),H=E>P?0:P-E>>>0,E>>>=0;for(var N=Array(H);++G<H;)N[G]=v[G+E];return N}function QC(v,E){return E=E??Vu,!!E&&(typeof v=="number"||$p.test(v))&&v>-1&&v%1==0&&v<E}function Np(v,E,P){if(!zb(P))return!1;var G=typeof E;return(G=="number"?ew(P)&&QC(E,P.length):G=="string"&&E in P)?Ve(P[E],v):!1}function UM(v,E,P){(P?Np(v,E,P):E===void 0)?E=1:E=XC(zu(E),0);var G=v?v.length:0;if(!G||E<1)return[];for(var H=0,N=0,ee=Array(N0(G/E));H<G;)ee[N++]=JC(v,H,H+=E);return ee}function Ve(v,E){return v===E||v!==v&&E!==E}function ew(v){return v!=null&&Vb(v.length)&&!fc(v)}function fc(v){var E=zb(v)?Fb.call(v):"";return E==ZC||E==qC}function Vb(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=Vu}function zb(v){var E=typeof v;return!!v&&(E=="object"||E=="function")}function HM(v){return!!v&&typeof v=="object"}function Bo(v){return typeof v=="symbol"||HM(v)&&Fb.call(v)==Ip}function Pd(v){if(!v)return v===0?v:0;if(v=Rd(v),v===da||v===-da){var E=v<0?-1:1;return E*jC}return v===v?v:0}function zu(v){var E=Pd(v),P=E%1;return E===E?P?E-P:E:0}function Rd(v){if(typeof v=="number")return v;if(Bo(v))return L0;if(zb(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=zb(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=v.replace(Lb,"");var P=Ob.test(v);return P||KC.test(v)?Bb(v.slice(2),P?2:8):Nb.test(v)?L0:+v}var Ub=UM,Op={emits:["on-cell-click","on-cell-contextmenu"],methods:{handleCellClick(v){this.CalendarInstance.$emit("on-cell-click",v)},handleCellContextmenu(v){this.CalendarInstance.$emit("on-cell-contextmenu",v)}}};const Kl={name:"CalendarMonth",mixins:[Op],inject:["CalendarInstance"],props:{date:Object},data(){return{firstDayOfWeek:this.CalendarInstance.firstDayOfWeek,weekDays:this.CalendarInstance.locale.weekDays}},computed:{finalWeekDays(){return this.weekDays.slice(this.firstDayOfWeek).concat(this.weekDays.slice(0,this.firstDayOfWeek))},days(){let v=[];const E=Os(this.date.format("YYYY-MM-01")),P=E.day(),G=this.firstDayOfWeek,H=G<=P?P-G:7-(G-P);for(let Ce=0;Ce<H;Ce++){const pe=E.subtract(H-Ce,"day"),we={text:pe.format("YYYY-MM-DD"),date:pe.format("D"),type:"prev"};v.push(we)}const N=E.daysInMonth();for(let Ce=0;Ce<N;Ce++){const pe=E.add(Ce,"day"),we={text:pe.format("YYYY-MM-DD"),date:pe.format("D"),type:"current"};v.push(we)}const ee=42-v.length,le=E.add(1,"month");for(let Ce=0;Ce<ee;Ce++){const pe=le.add(Ce,"day"),we={text:pe.format("YYYY-MM-DD"),date:pe.format("D"),type:"next"};v.push(we)}return v},chunkDays(){return Ub(this.days,7)},dayStyles(){let v={};return this.CalendarInstance.cellHeight!==100&&(v.height=`${this.CalendarInstance.cellHeight}px`),v},currentDate(){return this.date.format("YYYY-MM-DD")}},methods:{handleClickDate(v){this.CalendarInstance.handleChangeDate(Os(v))}}},O0={class:"ivu-calendar-table",cellspacing:"0",cellpadding:"0"},tw=["onClick","onContextmenu"],GM=["onClick"],tu={class:"ivu-calendar-table-day-title"},gg={class:"ivu-calendar-table-day-slot"};function nw(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("table",O0,[c.createElementVNode("thead",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.finalWeekDays,ee=>(c.openBlock(),c.createElementBlock("th",{key:ee},c.toDisplayString(ee),1))),128))]),c.createElementVNode("tbody",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.chunkDays,(ee,le)=>(c.openBlock(),c.createElementBlock("tr",{key:le},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ee,Ce=>(c.openBlock(),c.createElementBlock("td",{key:Ce.text,onClick:pe=>v.handleCellClick(Ce),onContextmenu:c.withModifiers(pe=>v.handleCellContextmenu(Ce),["prevent"])},[c.createElementVNode("div",{class:c.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-other":Ce.type!=="current","ivu-calendar-table-day-current":Ce.text===N.currentDate}]),style:c.normalizeStyle(N.dayStyles),onClick:pe=>N.handleClickDate(Ce.text)},[c.createElementVNode("div",tu,c.toDisplayString(Ce.date),1),c.createElementVNode("div",gg,[c.renderSlot(v.$slots,"month",{date:new Date(Ce.date),data:{type:Ce.type+"-month",day:Ce.text,selected:Ce.text===N.currentDate}})])],14,GM)],40,tw))),128))]))),128))])])}var Xl=$(Kl,[["render",nw]]);const Ya={name:"CalendarYear",mixins:[Op],inject:["CalendarInstance"],props:{date:Object},data(){return{}},computed:{months(){let v=[];const E=Os(this.date.format("YYYY-01-01"));for(let P=0;P<12;P++){const G=E.add(P,"month");v.push({text:G.format("YYYY-MM"),month:this.CalendarInstance.locale.months[P],type:"current"})}return v},chunkMonths(){return Ub(this.months,3)},dayStyles(){let v={};return this.CalendarInstance.cellHeight!==100&&(v.height=`${this.CalendarInstance.cellHeight}px`),v},currentMonth(){return this.date.format("YYYY-MM")}},methods:{handleClickDate(v){this.CalendarInstance.handleChangeDate(Os(v))}}},Mf={class:"ivu-calendar-table ivu-calendar-table-year",cellspacing:"0",cellpadding:"0"},vg=["onClick","onContextmenu"],nu=["onClick"],wl={class:"ivu-calendar-table-day-title"},rw={class:"ivu-calendar-table-day-slot"};function WM(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("table",Mf,[c.createElementVNode("tbody",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.chunkMonths,(ee,le)=>(c.openBlock(),c.createElementBlock("tr",{key:le},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ee,Ce=>(c.openBlock(),c.createElementBlock("td",{key:Ce.text,onClick:pe=>v.handleCellClick(Ce),onContextmenu:c.withModifiers(pe=>v.handleCellContextmenu(Ce),["prevent"])},[c.createElementVNode("div",{class:c.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-current":Ce.text===N.currentMonth}]),style:c.normalizeStyle(N.dayStyles),onClick:pe=>N.handleClickDate(Ce.text)},[c.createElementVNode("div",wl,c.toDisplayString(Ce.month),1),c.createElementVNode("div",rw,[c.renderSlot(v.$slots,"year",{month:new Date(Ce.month),data:{type:Ce.type+"-year",month:Ce.text,selected:Ce.text===N.currentMonth}})])],14,nu)],40,vg))),128))]))),128))])])}var B0=$(Ya,[["render",WM]]);const Hb={name:"Calendar",components:{CalendarMonth:Xl,CalendarYear:B0,ButtonGroup:os,Button:Oi,RadioGroup:I0,Radio:ms,Icon:oe},emits:["on-type-change","on-prev","on-next","on-today","on-change","update:modelValue","on-cell-click","on-cell-contextmenu"],provide(){return{CalendarInstance:this}},props:{modelValue:{type:[Date,String,Number]},type:{validator(v){return re(v,["month","year"])},default:"month"},cellHeight:{type:Number,default:100},showHeader:{type:Boolean,default:!0},headerType:{validator(v){return re(v,["simple","full"])},default:"simple"},firstDayOfWeek:{validator(v){return re(v,[1,2,3,4,5,6,7])},default:1},hideType:{type:Boolean,default:!1},locale:{type:Object,default(){return{today:"今天",type:{month:"月",year:"年"},weekDays:["日","一","二","三","四","五","六"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}}}},data(){const v=this.modelValue?this.modelValue:new Date;return{currentValue:Os(v),mode:this.type}},watch:{modelValue(v){const E=v||new Date;this.currentValue=Os(E)},type(v){this.mode=v}},computed:{headerTitle(){if(this.mode==="month")return this.currentValue.format("YYYY 年 M 月");if(this.mode==="year")return this.currentValue.format("YYYY 年")}},methods:{handleChangeType(v){this.$emit("on-type-change",v)},handlePrev(){const v=this.currentValue.format("YYYY-MM-01");let E;this.mode==="month"?E=Os(v).subtract(1,"month"):this.mode==="year"&&(E=Os(v).subtract(1,"year")),this.handleChangeDate(E),this.$emit("on-prev")},handleNext(){const v=this.currentValue.format("YYYY-MM-01");let E;this.mode==="month"?E=Os(v).add(1,"month"):this.mode==="year"&&(E=Os(v).add(1,"year")),this.handleChangeDate(E),this.$emit("on-next")},handleToday(){const v=Os(new Date),E=v.format("YYYY-MM-DD"),P=this.currentValue.format("YYYY-MM-DD");E!==P&&this.handleChangeDate(v),this.$emit("on-today")},handleChangeDate(v){this.currentValue=v;const E=new Date(v.format("YYYY-MM-DD"));this.$emit("update:modelValue",E),this.$emit("on-change",E)}}},Gb={class:"ivu-calendar"},Id={key:0,class:"ivu-calendar-header"},Wb={class:"ivu-calendar-header-title"},QL={class:"ivu-calendar-header-action"},eN={class:"ivu-calendar-body"};function YM(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Button"),Ce=c.resolveComponent("ButtonGroup"),pe=c.resolveComponent("Radio"),we=c.resolveComponent("RadioGroup"),We=c.resolveComponent("CalendarMonth"),ut=c.resolveComponent("CalendarYear");return c.openBlock(),c.createElementBlock("div",Gb,[P.showHeader?(c.openBlock(),c.createElementBlock("div",Id,[c.renderSlot(v.$slots,"header",{},()=>[c.createElementVNode("div",Wb,[c.renderSlot(v.$slots,"headerTitle",{},()=>[c.createTextVNode(c.toDisplayString(N.headerTitle),1)])]),c.createElementVNode("div",QL,[P.headerType==="simple"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createVNode(Ce,null,{default:c.withCtx(()=>[c.createVNode(le,{onClick:N.handlePrev},{default:c.withCtx(()=>[c.createVNode(ee,{type:"ios-arrow-back"})]),_:1},8,["onClick"]),c.createVNode(le,{onClick:N.handleToday},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(P.locale.today),1)]),_:1},8,["onClick"]),c.createVNode(le,{onClick:N.handleNext},{default:c.withCtx(()=>[c.createVNode(ee,{type:"ios-arrow-forward"})]),_:1},8,["onClick"])]),_:1}),P.hideType?c.createCommentVNode("",!0):(c.openBlock(),c.createBlock(we,{key:0,modelValue:H.mode,"onUpdate:modelValue":E[0]||(E[0]=ct=>H.mode=ct),type:"button",class:"ivu-ml",onOnChange:N.handleChangeType},{default:c.withCtx(()=>[c.createVNode(pe,{label:"month"},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(P.locale.type.month),1)]),_:1}),c.createVNode(pe,{label:"year"},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(P.locale.type.year),1)]),_:1})]),_:1},8,["modelValue","onOnChange"]))],64)):P.headerType==="full"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[],64)):c.createCommentVNode("",!0)])])])):c.createCommentVNode("",!0),c.createElementVNode("div",eN,[H.mode==="month"?(c.openBlock(),c.createBlock(We,{key:0,date:H.currentValue},{month:c.withCtx(({date:ct,data:ot})=>[c.renderSlot(v.$slots,"month",{date:ct,data:ot})]),_:3},8,["date"])):H.mode==="year"?(c.openBlock(),c.createBlock(ut,{key:1,date:H.currentValue},{year:c.withCtx(({month:ct,data:ot})=>[c.renderSlot(v.$slots,"year",{month:ct,data:ot})]),_:3},8,["date"])):c.createCommentVNode("",!0)])])}var yg=$(Hb,[["render",YM]]);const $d="ivu-col";function Bp(v){return typeof v=="number"?`${v} ${v} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(v)?`0 0 ${v}`:v}const ha={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let v=[`${$d}`,{[`${$d}-span-${this.span}`]:this.span,[`${$d}-order-${this.order}`]:this.order,[`${$d}-offset-${this.offset}`]:this.offset,[`${$d}-push-${this.push}`]:this.push,[`${$d}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(E=>{if(typeof this[E]=="number")v.push(`${$d}-span-${E}-${this[E]}`);else if(typeof this[E]=="object"){let P=this[E];Object.keys(P).forEach(G=>{v.push(G!=="span"?`${$d}-${E}-${G}-${P[G]}`:`${$d}-span-${E}-${P[G]}`)})}}),v},styles(){let v={};return this.gutter!==0&&(v={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(v.flex=Bp(this.flex)),v}}};function Bi(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles)},[c.renderSlot(v.$slots,"default")],6)}var Sa=$(ha,[["render",Bi]]);const Ld="ivu-row",jM={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(v){return re(v,["flex"])}},align:{validator(v){return re(v,["top","middle","bottom"])}},justify:{validator(v){return re(v,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${Ld}`,{[`${Ld}-${this.type}`]:!!this.type,[`${Ld}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${Ld}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${Ld}-${this.align}`]:!!this.align,[`${Ld}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${Ld}-no-wrap`]:!this.wrap}]},styles(){let v={};return this.gutter!==0&&(v={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),v}}};function gs(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles)},[c.renderSlot(v.$slots,"default")],6)}var pc=$(jM,[["render",gs]]);function mc(){return mc=Object.assign||function(v){for(var E=1;E<arguments.length;E++){var P=arguments[E];for(var G in P)Object.prototype.hasOwnProperty.call(P,G)&&(v[G]=P[G])}return v},mc.apply(this,arguments)}function Th(v,E){v.prototype=Object.create(E.prototype),v.prototype.constructor=v,kr(v,E)}function ow(v){return ow=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},ow(v)}function kr(v,E){return kr=Object.setPrototypeOf||function(P,G){return P.__proto__=G,P},kr(v,E)}function Jl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uu(v,E,P){return Jl()?Uu=Reflect.construct:Uu=function(G,H,N){var ee=[null];ee.push.apply(ee,H);var le=Function.bind.apply(G,ee),Ce=new le;return N&&kr(Ce,N.prototype),Ce},Uu.apply(null,arguments)}function iw(v){return Function.toString.call(v).indexOf("[native code]")!==-1}function Yb(v){var E=typeof Map=="function"?new Map:void 0;return Yb=function(P){if(P===null||!iw(P))return P;if(typeof P!="function")throw new TypeError("Super expression must either be null or a function");if(typeof E<"u"){if(E.has(P))return E.get(P);E.set(P,G)}function G(){return Uu(P,arguments,ow(this).constructor)}return G.prototype=Object.create(P.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),kr(G,P)},Yb(v)}var aw=/%[sdj%]/g,F0=function(){};typeof process<"u"&&process.env;function gc(v){if(!v||!v.length)return null;var E={};return v.forEach(function(P){var G=P.field;E[G]=E[G]||[],E[G].push(P)}),E}function nl(){for(var v=arguments.length,E=new Array(v),P=0;P<v;P++)E[P]=arguments[P];var G=1,H=E[0],N=E.length;if(typeof H=="function")return H.apply(null,E.slice(1));if(typeof H=="string"){var ee=String(H).replace(aw,function(le){if(le==="%%")return"%";if(G>=N)return le;switch(le){case"%s":return String(E[G++]);case"%d":return Number(E[G++]);case"%j":try{return JSON.stringify(E[G++])}catch{return"[Circular]"}break;default:return le}});return ee}return H}function bg(v){return v==="string"||v==="url"||v==="hex"||v==="email"||v==="date"||v==="pattern"}function ja(v,E){return!!(v==null||E==="array"&&Array.isArray(v)&&!v.length||bg(E)&&typeof v=="string"&&!v)}function ZM(v,E,P){var G=[],H=0,N=v.length;function ee(le){G.push.apply(G,le),H++,H===N&&P(G)}v.forEach(function(le){E(le,ee)})}function Hi(v,E,P){var G=0,H=v.length;function N(ee){if(ee&&ee.length){P(ee);return}var le=G;G=G+1,le<H?E(v[le],N):P([])}N([])}function Zs(v){var E=[];return Object.keys(v).forEach(function(P){E.push.apply(E,v[P])}),E}var Hu=function(v){Th(E,v);function E(P,G){var H;return H=v.call(this,"Async Validation Error")||this,H.errors=P,H.fields=G,H}return E}(Yb(Error));function _g(v,E,P,G){if(E.first){var H=new Promise(function(We,ut){var ct=function(Oe){return G(Oe),Oe.length?ut(new Hu(Oe,gc(Oe))):We()},ot=Zs(v);Hi(ot,P,ct)});return H.catch(function(We){return We}),H}var N=E.firstFields||[];N===!0&&(N=Object.keys(v));var ee=Object.keys(v),le=ee.length,Ce=0,pe=[],we=new Promise(function(We,ut){var ct=function(ot){if(pe.push.apply(pe,ot),Ce++,Ce===le)return G(pe),pe.length?ut(new Hu(pe,gc(pe))):We()};ee.length||(G(pe),We()),ee.forEach(function(ot){var Oe=v[ot];N.indexOf(ot)!==-1?Hi(Oe,P,ct):ZM(Oe,P,ct)})});return we.catch(function(We){return We}),we}function Ki(v){return function(E){return E&&E.message?(E.field=E.field||v.fullField,E):{message:typeof E=="function"?E():E,field:E.field||v.fullField}}}function jb(v,E){if(E){for(var P in E)if(E.hasOwnProperty(P)){var G=E[P];typeof G=="object"&&typeof v[P]=="object"?v[P]=mc({},v[P],G):v[P]=G}}return v}function Zb(v,E,P,G,H,N){v.required&&(!P.hasOwnProperty(v.field)||ja(E,N||v.type))&&G.push(nl(H.messages.required,v.fullField))}function ci(v,E,P,G,H){(/^\s+$/.test(E)||E==="")&&G.push(nl(H.messages.whitespace,v.fullField))}var Nd={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},wo={integer:function(v){return wo.number(v)&&parseInt(v,10)===v},float:function(v){return wo.number(v)&&!wo.integer(v)},array:function(v){return Array.isArray(v)},regexp:function(v){if(v instanceof RegExp)return!0;try{return!!new RegExp(v)}catch{return!1}},date:function(v){return typeof v.getTime=="function"&&typeof v.getMonth=="function"&&typeof v.getYear=="function"&&!isNaN(v.getTime())},number:function(v){return isNaN(v)?!1:typeof v=="number"},object:function(v){return typeof v=="object"&&!wo.array(v)},method:function(v){return typeof v=="function"},email:function(v){return typeof v=="string"&&!!v.match(Nd.email)&&v.length<255},url:function(v){return typeof v=="string"&&!!v.match(Nd.url)},hex:function(v){return typeof v=="string"&&!!v.match(Nd.hex)}};function vc(v,E,P,G,H){if(v.required&&E===void 0){Zb(v,E,P,G,H);return}var N=["integer","float","array","regexp","object","method","email","number","date","url","hex"],ee=v.type;N.indexOf(ee)>-1?wo[ee](E)||G.push(nl(H.messages.types[ee],v.fullField,v.type)):ee&&typeof E!==v.type&&G.push(nl(H.messages.types[ee],v.fullField,v.type))}function V0(v,E,P,G,H){var N=typeof v.len=="number",ee=typeof v.min=="number",le=typeof v.max=="number",Ce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pe=E,we=null,We=typeof E=="number",ut=typeof E=="string",ct=Array.isArray(E);if(We?we="number":ut?we="string":ct&&(we="array"),!we)return!1;ct&&(pe=E.length),ut&&(pe=E.replace(Ce,"_").length),N?pe!==v.len&&G.push(nl(H.messages[we].len,v.fullField,v.len)):ee&&!le&&pe<v.min?G.push(nl(H.messages[we].min,v.fullField,v.min)):le&&!ee&&pe>v.max?G.push(nl(H.messages[we].max,v.fullField,v.max)):ee&&le&&(pe<v.min||pe>v.max)&&G.push(nl(H.messages[we].range,v.fullField,v.min,v.max))}var Gu="enum";function z0(v,E,P,G,H){v[Gu]=Array.isArray(v[Gu])?v[Gu]:[],v[Gu].indexOf(E)===-1&&G.push(nl(H.messages[Gu],v.fullField,v[Gu].join(", ")))}function U0(v,E,P,G,H){if(v.pattern){if(v.pattern instanceof RegExp)v.pattern.lastIndex=0,v.pattern.test(E)||G.push(nl(H.messages.pattern.mismatch,v.fullField,E,v.pattern));else if(typeof v.pattern=="string"){var N=new RegExp(v.pattern);N.test(E)||G.push(nl(H.messages.pattern.mismatch,v.fullField,E,v.pattern))}}}var ti={required:Zb,whitespace:ci,type:vc,range:V0,enum:z0,pattern:U0};function sw(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E,"string")&&!v.required)return P();ti.required(v,E,G,N,H,"string"),ja(E,"string")||(ti.type(v,E,G,N,H),ti.range(v,E,G,N,H),ti.pattern(v,E,G,N,H),v.whitespace===!0&&ti.whitespace(v,E,G,N,H))}P(N)}function tN(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&ti.type(v,E,G,N,H)}P(N)}function nN(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(E===""&&(E=void 0),ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&(ti.type(v,E,G,N,H),ti.range(v,E,G,N,H))}P(N)}function lw(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&ti.type(v,E,G,N,H)}P(N)}function qb(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),ja(E)||ti.type(v,E,G,N,H)}P(N)}function qM(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&(ti.type(v,E,G,N,H),ti.range(v,E,G,N,H))}P(N)}function Fp(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&(ti.type(v,E,G,N,H),ti.range(v,E,G,N,H))}P(N)}function Vp(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(E==null&&!v.required)return P();ti.required(v,E,G,N,H,"array"),E!=null&&(ti.type(v,E,G,N,H),ti.range(v,E,G,N,H))}P(N)}function KM(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&ti.type(v,E,G,N,H)}P(N)}var H0="enum";function XM(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H),E!==void 0&&ti[H0](v,E,G,N,H)}P(N)}function Kb(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E,"string")&&!v.required)return P();ti.required(v,E,G,N,H),ja(E,"string")||ti.pattern(v,E,G,N,H)}P(N)}function Ah(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E,"date")&&!v.required)return P();if(ti.required(v,E,G,N,H),!ja(E,"date")){var le;E instanceof Date?le=E:le=new Date(E),ti.type(v,le,G,N,H),le&&ti.range(v,le.getTime(),G,N,H)}}P(N)}function Xb(v,E,P,G,H){var N=[],ee=Array.isArray(E)?"array":typeof E;ti.required(v,E,G,N,H,ee),P(N)}function G0(v,E,P,G,H){var N=v.type,ee=[],le=v.required||!v.required&&G.hasOwnProperty(v.field);if(le){if(ja(E,N)&&!v.required)return P();ti.required(v,E,G,ee,H,N),ja(E,N)||ti.type(v,E,G,ee,H)}P(ee)}function cw(v,E,P,G,H){var N=[],ee=v.required||!v.required&&G.hasOwnProperty(v.field);if(ee){if(ja(E)&&!v.required)return P();ti.required(v,E,G,N,H)}P(N)}var zp={string:sw,method:tN,number:nN,boolean:lw,regexp:qb,integer:qM,float:Fp,array:Vp,object:KM,enum:XM,pattern:Kb,date:Ah,url:G0,hex:G0,email:G0,required:Xb,any:cw};function W0(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var v=JSON.parse(JSON.stringify(this));return v.clone=this.clone,v}}}var Jb=W0();function Od(v){this.rules=null,this._messages=Jb,this.define(v)}Od.prototype={messages:function(v){return v&&(this._messages=jb(W0(),v)),this._messages},define:function(v){if(!v)throw new Error("Cannot configure a schema with no rules");if(typeof v!="object"||Array.isArray(v))throw new Error("Rules must be an object");this.rules={};var E,P;for(E in v)v.hasOwnProperty(E)&&(P=v[E],this.rules[E]=Array.isArray(P)?P:[P])},validate:function(v,E,P){var G=this;E===void 0&&(E={}),P===void 0&&(P=function(){});var H=v,N=E,ee=P;if(typeof N=="function"&&(ee=N,N={}),!this.rules||Object.keys(this.rules).length===0)return ee&&ee(),Promise.resolve();function le(ot){var Oe,wt=[],Er={};function ir(Wn){if(Array.isArray(Wn)){var jt;wt=(jt=wt).concat.apply(jt,Wn)}else wt.push(Wn)}for(Oe=0;Oe<ot.length;Oe++)ir(ot[Oe]);wt.length?Er=gc(wt):(wt=null,Er=null),ee(wt,Er)}if(N.messages){var Ce=this.messages();Ce===Jb&&(Ce=W0()),jb(Ce,N.messages),N.messages=Ce}else N.messages=this.messages();var pe,we,We={},ut=N.keys||Object.keys(this.rules);ut.forEach(function(ot){pe=G.rules[ot],we=H[ot],pe.forEach(function(Oe){var wt=Oe;typeof wt.transform=="function"&&(H===v&&(H=mc({},H)),we=H[ot]=wt.transform(we)),typeof wt=="function"?wt={validator:wt}:wt=mc({},wt),wt.validator=G.getValidationMethod(wt),wt.field=ot,wt.fullField=wt.fullField||ot,wt.type=G.getType(wt),wt.validator&&(We[ot]=We[ot]||[],We[ot].push({rule:wt,value:we,source:H,field:ot}))})});var ct={};return _g(We,N,function(ot,Oe){var wt=ot.rule,Er=(wt.type==="object"||wt.type==="array")&&(typeof wt.fields=="object"||typeof wt.defaultField=="object");Er=Er&&(wt.required||!wt.required&&ot.value),wt.field=ot.field;function ir(It,Cn){return mc({},Cn,{fullField:wt.fullField+"."+It})}function Wn(It){It===void 0&&(It=[]);var Cn=It;if(Array.isArray(Cn)||(Cn=[Cn]),!N.suppressWarning&&Cn.length&&Od.warning("async-validator:",Cn),Cn.length&&wt.message!==void 0&&(Cn=[].concat(wt.message)),Cn=Cn.map(Ki(wt)),N.first&&Cn.length)return ct[wt.field]=1,Oe(Cn);if(!Er)Oe(Cn);else{if(wt.required&&!ot.value)return wt.message!==void 0?Cn=[].concat(wt.message).map(Ki(wt)):N.error&&(Cn=[N.error(wt,nl(N.messages.required,wt.field))]),Oe(Cn);var Pt={};if(wt.defaultField)for(var Pr in ot.value)ot.value.hasOwnProperty(Pr)&&(Pt[Pr]=wt.defaultField);Pt=mc({},Pt,ot.rule.fields);for(var cr in Pt)if(Pt.hasOwnProperty(cr)){var ar=Array.isArray(Pt[cr])?Pt[cr]:[Pt[cr]];Pt[cr]=ar.map(ir.bind(null,cr))}var uo=new Od(Pt);uo.messages(N.messages),ot.rule.options&&(ot.rule.options.messages=N.messages,ot.rule.options.error=N.error),uo.validate(ot.value,ot.rule.options||N,function(Tr){var Ln=[];Cn&&Cn.length&&Ln.push.apply(Ln,Cn),Tr&&Tr.length&&Ln.push.apply(Ln,Tr),Oe(Ln.length?Ln:null)})}}var jt;wt.asyncValidator?jt=wt.asyncValidator(wt,ot.value,Wn,ot.source,N):wt.validator&&(jt=wt.validator(wt,ot.value,Wn,ot.source,N),jt===!0?Wn():jt===!1?Wn(wt.message||wt.field+" fails"):jt instanceof Array?Wn(jt):jt instanceof Error&&Wn(jt.message)),jt&&jt.then&&jt.then(function(){return Wn()},function(It){return Wn(It)})},function(ot){le(ot)})},getType:function(v){if(v.type===void 0&&v.pattern instanceof RegExp&&(v.type="pattern"),typeof v.validator!="function"&&v.type&&!zp.hasOwnProperty(v.type))throw new Error(nl("Unknown rule type %s",v.type));return v.type||"string"},getValidationMethod:function(v){if(typeof v.validator=="function")return v.validator;var E=Object.keys(v),P=E.indexOf("message");return P!==-1&&E.splice(P,1),E.length===1&&E[0]==="required"?zp.required:zp[this.getType(v)]||!1}},Od.register=function(v,E){if(typeof E!="function")throw new Error("Cannot register a validator by type, validator is not a function");zp[v]=E},Od.warning=F0,Od.messages=Jb,Od.validators=zp;const fa="ivu-form-item";function Qb(v,E){let P=v;E=E.replace(/\[(\w+)\]/g,".$1"),E=E.replace(/^\./,"");let G=E.split("."),H=0;for(let N=G.length;H<N-1;++H){let ee=G[H];if(ee in P)P=P[ee];else throw new Error("[View UI warn]: please transfer a valid prop path to form item!")}return{o:P,k:G[H],v:P[G[H]]}}const ri={name:"FormItem",inject:["FormInstance"],provide(){return{FormItemInstance:this}},props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data(){return{prefixCls:fa,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:{handler(v){this.validateMessage=v,this.validateState=v?"error":""},immediate:!0},validateStatus(v){this.validateState=v},rules(){this.setRules()},required(v,E){this.isRequired=v,E&&!v&&this.resetField()}},computed:{classes(){return[`${fa}`,{[`${fa}-required`]:this.required||this.isRequired,[`${fa}-error`]:this.validateState==="error",[`${fa}-validating`]:this.validateState==="validating"}]},fieldValue(){const v=this.FormInstance.model;if(!v||!this.prop)return;let E=this.prop;return E.indexOf(":")!==-1&&(E=E.replace(/:/,".")),Qb(v,E).v},labelStyles(){let v={};const E=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(E||E===0)&&(v.width=`${E}px`),v},contentStyles(){let v={};const E=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(E||E===0)&&(v.marginLeft=`${E}px`),v}},methods:{setRules(){let v=this.getRules();v.length&&this.required||(v.length?v.every(E=>{this.isRequired=E.required}):this.required&&(this.isRequired=this.required))},getRules(){let v=this.FormInstance.rules;const E=this.rules;return v=v?v[this.prop]:[],[].concat(E||v||[])},getFilteredRule(v){return this.getRules().filter(E=>!E.trigger||E.trigger.indexOf(v)!==-1)},validate(v,E=function(){}){let P=this.getFilteredRule(v);if(!P||P.length===0)if(this.required)P=[{required:!0}];else return E(),!0;this.validateState="validating";let G={};G[this.prop]=P;const H=new Od(G);let N={};N[this.prop]=this.fieldValue,H.validate(N,{firstFields:!0},ee=>{this.validateState=ee?"error":"success",this.validateMessage=ee?ee[0].message:"",E(this.validateMessage),this.FormInstance&&this.FormInstance.$emit("on-validate",this.prop,!ee,this.validateMessage||null)}),this.validateDisabled=!1},resetField(){this.validateState="",this.validateMessage="";let v=this.FormInstance.model,E=this.fieldValue,P=this.prop;P.indexOf(":")!==-1&&(P=P.replace(/:/,"."));let G=Qb(v,P);Array.isArray(E)&&this.initialValue!==null?(this.validateDisabled=!0,G.o[G.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,G.o[G.k]=this.initialValue)},onFieldBlur(){this.validate("blur")},onFieldChange(){if(this.validateDisabled){this.validateDisabled=!1;return}this.validate("change")},formBlur(){this.onFieldBlur()},formChange(){this.onFieldChange()}},mounted(){this.prop&&(this.FormInstance.addField(this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeUnmount(){this.FormInstance.removeField(this)}},er=["for"];function ru(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[P.label||v.$slots.label?(c.openBlock(),c.createElementBlock("label",{key:0,class:c.normalizeClass([H.prefixCls+"-label"]),for:P.labelFor,style:c.normalizeStyle(N.labelStyles)},[c.renderSlot(v.$slots,"label",{},()=>[c.createTextVNode(c.toDisplayString(P.label)+c.toDisplayString(N.FormInstance.colon),1)])],14,er)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"]),style:c.normalizeStyle(N.contentStyles)},[c.renderSlot(v.$slots,"default"),c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[H.validateState==="error"&&P.showMessage&&N.FormInstance.showMessage?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-error-tip"])},c.toDisplayString(H.validateMessage),3)):c.createCommentVNode("",!0)]),_:1})],6)],2)}var Rn=$(ri,[["render",ru]]),ou={UserName:"请输入用户名！",Password:"请输入密码！",Email:"请输入邮箱！",Mobile:"请输入手机号码！",Captcha:"请输入验证码！"},Sg={inject:["LoginInstance"],emits:["on-change"],props:{rules:{type:[Object,Array],default(){const v=c.getCurrentInstance().type.name;return[{required:!0,message:ou[v],trigger:"change"}]}},value:{type:String},name:{type:String,required:!0},enterToSubmit:{type:Boolean,default:!1}},data(){return{prop:""}},methods:{handleChange(v){this.LoginInstance.formValidate[this.prop]=v,this.$emit("on-change",v)},handleEnter(){this.enterToSubmit&&this.LoginInstance.handleSubmit()},handleSetValue(){const v=this.$props;v.value&&(this.LoginInstance.formValidate[this.prop]=v.value)},handleGetProps(){let v=this.$props.name;const E={prefix:this.prefix,placeholder:this.placeholder,type:this.type,size:"large",modelValue:this.LoginInstance.formValidate[this.prop]};return v&&(E.name=v),Object.assign(E,this.$attrs)}},render(){const v=this.handleGetProps(),E=c.h(Sl,x(S({},v),{"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter})),P=c.h(Rn,{prop:this.prop,rules:this.rules},()=>[E]);return c.h("div",{class:this.className},[P])},created(){const v=this.name,E=Object.assign({},this.LoginInstance.formValidate);E[v]="",this.LoginInstance.formValidate=E,this.prop=v,this.handleSetValue()}};const Mh={name:"Captcha",mixins:[Sg],emits:["on-get-captcha"],props:{field:{type:[String,Array]},countDown:{type:Number,default:60},text:{type:String},unitText:{type:String,default:"秒"},beforeClick:Function},data(){return{className:"ivu-login-captcha",prefix:"ios-keypad-outline",placeholder:"请输入验证码",type:"text",buttonDisabled:!1,limitCountDown:0}},methods:{handleClickCaptcha(){if(this.field){const v=typeof this.field=="string"?[this.field]:this.field;this.LoginInstance.handleValidate(v,E=>{E&&this.handleBeforeGetCaptcha()})}else this.handleBeforeGetCaptcha()},handleBeforeGetCaptcha(){if(!this.beforeClick)return this.handleGetCaptcha();const v=this.beforeClick();v&&v.then?v.then(()=>{this.handleGetCaptcha()}):this.handleGetCaptcha()},handleGetCaptcha(){this.countDown>0&&(this.buttonDisabled=!0,this.limitCountDown=this.countDown,this.handleCountDown()),this.$emit("on-get-captcha",this.LoginInstance.formValidate[this.prop],JSON.parse(JSON.stringify(this.LoginInstance.formValidate)))},handleCountDown(){this.timer=setTimeout(()=>{this.limitCountDown--,this.limitCountDown===0?(this.buttonDisabled=!1,clearTimeout(this.timer)):this.handleCountDown()},1e3)}},render(){const v=this.$attrs,E=this.handleGetProps(),P={size:"large",type:"default",long:!0,disabled:this.buttonDisabled};"size"in v&&(P.size=v.size),"button-type"in v&&(P.type=v["button-type"]);let G;this.$slots.text?G=this.$slots.text:this.limitCountDown!==0?G=()=>`${this.limitCountDown} ${this.unitText}`:this.text?G=()=>this.text:G=()=>"获取验证码";const H=c.h(Oi,x(S({},P),{onClick:this.handleClickCaptcha}),G),N=c.h(Sl,x(S({},E),{"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter})),ee=c.h(Sa,{span:16},()=>[N]),le=c.h(Sa,{span:8},()=>[H]),Ce=c.h(pc,{gutter:8},()=>[ee,le]),pe=c.h(Rn,{prop:this.prop,rules:this.rules},()=>[Ce]);return c.h("div",{class:this.className},[pe])},beforeUnmount(){this.timer&&clearTimeout(this.timer)}},Fi="ivu-card",kh=16,xg={name:"Card",mixins:[ht],components:{Icon:oe},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:kh},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${Fi}`,{[`${Fi}-bordered`]:this.bordered&&!this.shadow,[`${Fi}-dis-hover`]:this.disHover||this.shadow,[`${Fi}-shadow`]:this.shadow}]},headClasses(){return`${Fi}-head`},extraClasses(){return`${Fi}-extra`},bodyClasses(){return`${Fi}-body`},bodyStyles(){return this.padding!==kh?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:v}=this;return!!v},tagName(){const{isHrefPattern:v}=this;return v?"a":"div"},tagProps(){const{isHrefPattern:v}=this;if(v){const{linkUrl:E,target:P}=this;return{href:E,target:P}}else return{}}},methods:{handleClickLink(v){if(!this.isHrefPattern)return;const E=v.ctrlKey||v.metaKey;this.handleCheckClick(v,E)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},$a={key:0};function iu(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createBlock(c.resolveDynamicComponent(N.tagName),c.mergeProps({class:N.classes},N.tagProps,{onClick:N.handleClickLink}),{default:c.withCtx(()=>[H.showHead?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.headClasses)},[c.renderSlot(v.$slots,"title",{},()=>[P.title?(c.openBlock(),c.createElementBlock("p",$a,[P.icon?(c.openBlock(),c.createBlock(ee,{key:0,type:P.icon},null,8,["type"])):c.createCommentVNode("",!0),c.createElementVNode("span",null,c.toDisplayString(P.title),1)])):c.createCommentVNode("",!0)])],2)):c.createCommentVNode("",!0),H.showExtra?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass(N.extraClasses)},[c.renderSlot(v.$slots,"extra")],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass(N.bodyClasses),style:c.normalizeStyle(N.bodyStyles)},[c.renderSlot(v.$slots,"default")],6)]),_:3},16,["class","onClick"])}var Y0=$(xg,[["render",iu]]);const rl="ivu-carousel",uw={name:"Carousel",provide(){return{CarouselInstance:this}},components:{Icon:oe},emits:["on-change","on-click","update:modelValue"],props:{arrow:{type:String,default:"hover",validator(v){return re(v,["hover","always","never"])}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:2e3},loop:{type:Boolean,default:!1},easing:{type:String,default:"ease"},dots:{type:String,default:"inside",validator(v){return re(v,["inside","outside","none"])}},radiusDot:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator(v){return re(v,["click","hover"])}},modelValue:{type:Number,default:0},height:{type:[String,Number],default:"auto",validator(v){return v==="auto"||Object.prototype.toString.call(v)==="[object Number]"}}},data(){return{prefixCls:rl,listWidth:0,trackWidth:0,trackOffset:0,trackCopyOffset:0,showCopyTrack:!1,slides:[],slideInstances:[],timer:null,ready:!1,currentIndex:this.modelValue,trackIndex:this.modelValue,copyTrackIndex:this.modelValue,hideTrackPos:-1,carouselItemList:[]}},computed:{classes(){return[`${rl}`]},trackStyles(){const v=this.trackIndex===-1?"hidden":"visible";return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,visibility:v}},copyTrackStyles(){return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackCopyOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,position:"absolute"}},arrowClasses(){return[`${rl}-arrow`,`${rl}-arrow-${this.arrow}`]},dotsClasses(){return[`${rl}-dots`,`${rl}-dots-${this.dots}`]}},methods:{findChild(v){this.carouselItemList.length&&this.carouselItemList.forEach(E=>{v(E.carouselItem)})},initCopyTrackDom(){c.nextTick(()=>{this.$refs.copyTrack.innerHTML=this.$refs.originTrack.innerHTML})},updateSlides(v){let E=[],P=1;this.findChild(G=>{E.push({$el:G.$el}),G.index=P++,v&&this.slideInstances.push(G)}),this.slides=E,this.updatePos()},updatePos(){this.findChild(v=>{v.width=this.listWidth,v.height=typeof this.height=="number"?`${this.height}px`:this.height}),this.trackWidth=(this.slides.length||0)*this.listWidth},slotChange(){c.nextTick(()=>{this.slides=[],this.slideInstances=[],this.updateSlides(!0,!0),this.updatePos(),this.updateOffset()})},handleResize(){this.listWidth=parseInt(Ee(this.$el,"width")),this.updatePos(),this.updateOffset()},updateTrackPos(v){this.showCopyTrack?this.trackIndex=v:this.copyTrackIndex=v},updateTrackIndex(v){this.showCopyTrack?this.copyTrackIndex=v:this.trackIndex=v,this.currentIndex=v},add(v){let E=this.slides.length;this.loop&&(v>0?this.hideTrackPos=-1:this.hideTrackPos=E,this.updateTrackPos(this.hideTrackPos));const P=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;let G=P+v;for(;G<0;)G+=E;(v>0&&G===E||v<0&&G===E-1)&&this.loop?(this.showCopyTrack=!this.showCopyTrack,this.trackIndex+=v,this.copyTrackIndex+=v):(this.loop||(G=G%this.slides.length),this.updateTrackIndex(G)),this.currentIndex=G===this.slides.length?0:G,this.$emit("on-change",P,this.currentIndex),this.$emit("update:modelValue",this.currentIndex)},arrowEvent(v){this.setAutoplay(),this.add(v)},dotsEvent(v,E){let P=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;const G=this.currentIndex;v===this.trigger&&P!==E&&(this.updateTrackIndex(E),this.$emit("on-change",G,this.currentIndex),this.$emit("update:modelValue",E),this.setAutoplay())},setAutoplay(){!A||(window.clearInterval(this.timer),this.autoplay&&(this.timer=window.setInterval(()=>{this.add(1)},this.autoplaySpeed)))},updateOffset(){c.nextTick(()=>{let v=this.copyTrackIndex>0?-1:1;this.trackOffset=this.trackIndex*this.listWidth,this.trackCopyOffset=this.copyTrackIndex*this.listWidth+v})},handleClick(v){this.$emit("on-click",this[v])}},watch:{autoplay(){this.setAutoplay()},autoplaySpeed(){this.setAutoplay()},trackIndex(){this.updateOffset()},copyTrackIndex(){this.updateOffset()},height(){this.updatePos()},modelValue(v){this.updateTrackIndex(v),this.setAutoplay()}},mounted(){this.updateSlides(!0),this.handleResize(),this.setAutoplay(),R(window,"resize",this.handleResize)},beforeUnmount(){L(window,"resize",this.handleResize)}},e_=["onClick","onMouseover"];function Zt(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("button",{type:"button",class:c.normalizeClass([N.arrowClasses,"left"]),onClick:E[0]||(E[0]=le=>N.arrowEvent(-1))},[c.createVNode(ee,{type:"ios-arrow-back"})],2),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-list"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-track",H.showCopyTrack?"":"higher"]),style:c.normalizeStyle(N.trackStyles),ref:"originTrack",onClick:E[1]||(E[1]=le=>N.handleClick("currentIndex"))},[c.renderSlot(v.$slots,"default")],6),P.loop?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-track",H.showCopyTrack?"higher":""]),style:c.normalizeStyle(N.copyTrackStyles),ref:"copyTrack",onClick:E[2]||(E[2]=le=>N.handleClick("copyTrackIndex"))},null,6)):c.createCommentVNode("",!0)],2),c.createElementVNode("button",{type:"button",class:c.normalizeClass([N.arrowClasses,"right"]),onClick:E[3]||(E[3]=le=>N.arrowEvent(1))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2),c.createElementVNode("ul",{class:c.normalizeClass(N.dotsClasses)},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.slides.length,le=>(c.openBlock(),c.createElementBlock("li",{key:le,class:c.normalizeClass([le-1===H.currentIndex?H.prefixCls+"-active":""]),onClick:Ce=>N.dotsEvent("click",le-1),onMouseover:Ce=>N.dotsEvent("hover",le-1)},[c.createElementVNode("button",{type:"button",class:c.normalizeClass([P.radiusDot?"radius":""])},null,2)],42,e_))),128))],2)],2)}var dw=$(uw,[["render",Zt]]);const Cg="ivu-carousel-item",Bd={componentName:"carousel-item",name:"CarouselItem",inject:["CarouselInstance"],data(){return{prefixCls:Cg,width:0,height:"auto",left:0,id:mt(6)}},computed:{styles(){return{width:`${this.width}px`,height:`${this.height}`,left:`${this.left}px`}}},watch:{width(v){v&&this.CarouselInstance.loop&&c.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})},height(v){v&&this.CarouselInstance.loop&&c.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})}},methods:{addInstance(){const v=this.CarouselInstance;v.carouselItemList||(v.carouselItemList=[]),v.carouselItemList.push({id:this.id,carouselItem:this})},removeInstance(){const v=this.CarouselInstance;if(!v.carouselItemList)return;const E=v.carouselItemList.findIndex(P=>P.id===this.id);v.carouselItemList.splice(E,1)}},mounted(){this.addInstance(),this.CarouselInstance.slotChange()},beforeUnmount(){this.removeInstance(),this.CarouselInstance.slotChange()}};function wg(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(H.prefixCls),style:c.normalizeStyle(N.styles)},[c.renderSlot(v.$slots,"default")],6)}var yi=$(Bd,[["render",wg]]);const Ko={name:"Casitem",components:{Icon:oe},mixins:[zt],props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes(){return[`${this.prefixCls}-menu-item`,{[`${this.prefixCls}-menu-item-active`]:this.tmpItem.value===this.data.value,[`${this.prefixCls}-menu-item-disabled`]:this.data.disabled}]},showArrow(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},arrowType(){const v=this.globalConfig;let E="ios-arrow-forward";return v&&(v.cascader.customItemArrow?E="":v.cascader.itemArrow&&(E=v.cascader.itemArrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.cascader.customItemArrow&&(E=v.cascader.customItemArrow),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.cascader.itemArrowSize&&(E=v.cascader.itemArrowSize),E}}},Bs={key:1,class:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"};function Fs(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.classes)},[c.createTextVNode(c.toDisplayString(P.data.label)+" ",1),N.showArrow?(c.openBlock(),c.createBlock(ee,{key:0,type:N.arrowType,custom:N.customArrowType,size:N.arrowSize},null,8,["type","custom","size"])):c.createCommentVNode("",!0),N.showLoading?(c.openBlock(),c.createElementBlock("i",Bs)):c.createCommentVNode("",!0)],2)}var Eo=$(Ko,[["render",Fs]]);let Eg=1;const Za={name:"Caspanel",components:{Casitem:Eo},inject:["CascaderInstance"],provide(){return{CaspanelInstance:this}},props:{data:{type:Array,default(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data(){return{tmpItem:{},result:[],sublist:[],id:mt(6),childCaspanelList:[]}},watch:{data(){this.sublist=[]}},methods:{handleClickItem(v){this.trigger!=="click"&&v.children&&v.children.length||this.handleTriggerItem(v,!1,!0)},handleHoverItem(v){this.trigger!=="hover"||!v.children||!v.children.length||this.handleTriggerItem(v,!1,!0)},handleTriggerItem(v,E=!1,P=!1){if(v.disabled)return;const G=Tt(this,"Cascader");if(v.loading!==void 0&&!v.children.length&&G&&G.loadData){G.loadData(v,()=>{P&&(G.isLoadedChildren=!0),v.children.length&&this.handleTriggerItem(v)});return}const H=this.getBaseItem(v);(this.changeOnSelect||H.label!==this.tmpItem.label||H.value!==this.tmpItem.value||H.label===this.tmpItem.label&&H.value===this.tmpItem.value)&&(this.tmpItem=H,this.emitUpdate([H])),v.children&&v.children.length?(this.sublist=v.children,this.CascaderInstance.handleOnResultChange({lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:E}),this.changeOnSelect&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)):(this.sublist=[],this.CascaderInstance.handleOnResultChange({lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:E})),G&&G.$refs.drop.update()},updateResult(v){this.result=[this.tmpItem].concat(v),this.emitUpdate(this.result)},getBaseItem(v){let E=Object.assign({},v);return E.children&&delete E.children,E},emitUpdate(v){this.$parent.$options.name==="Caspanel"?this.$parent.updateResult(v):this.CascaderInstance.updateResult(v)},getKey(){return Eg++},handleOnFindSelected(v){let E=[...v.value];for(let P=0;P<E.length;P++)for(let G=0;G<this.data.length;G++)if(E[P]===this.data[G].value)return this.handleTriggerItem(this.data[G],!0),E.splice(0,1),c.nextTick(()=>{this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnFindSelected({value:E})}),!1},handleOnClear(v=!1){this.sublist=[],this.tmpItem={},v&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)},addCaspanel(){const v=this.CascaderInstance;v.caspanelList||(v.caspanelList=[]),v.caspanelList.push({id:this.id,caspanel:this});const E=Tt(this,"Caspanel");E&&(E.childCaspanelList||(E.childCaspanelList=[]),E.childCaspanelList.push({id:this.id,caspanel:this}))},removeCaspanel(){const v=this.CascaderInstance;if(v.caspanelList&&v.caspanelList.length){const P=v.caspanelList.findIndex(G=>G.id===this.id);v.caspanelList.splice(P,1)}const E=Tt(this,"Caspanel");if(E&&E.childCaspanelList&&E.childCaspanelList.length){const P=E.childCaspanelList.findIndex(G=>G.id===this.id);E.childCaspanelList.splice(P,1)}}},mounted(){this.addCaspanel()},beforeUnmount(){this.removeCaspanel()}};function Gi(v,E,P,G,H,N){const ee=c.resolveComponent("Casitem"),le=c.resolveComponent("Caspanel",!0);return c.openBlock(),c.createElementBlock("span",null,[P.data&&P.data.length?(c.openBlock(),c.createElementBlock("ul",{key:0,class:c.normalizeClass([P.prefixCls+"-menu"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.data,(Ce,pe)=>(c.openBlock(),c.createBlock(ee,{key:pe,"prefix-cls":P.prefixCls,data:Ce,"tmp-item":H.tmpItem,onClick:c.withModifiers(we=>N.handleClickItem(Ce),["stop"]),onMouseenter:c.withModifiers(we=>N.handleHoverItem(Ce),["stop"])},null,8,["prefix-cls","data","tmp-item","onClick","onMouseenter"]))),128))],2)):c.createCommentVNode("",!0),H.sublist&&H.sublist.length?(c.openBlock(),c.createBlock(le,{key:1,"prefix-cls":P.prefixCls,data:H.sublist,disabled:P.disabled,trigger:P.trigger,"change-on-select":P.changeOnSelect},null,8,["prefix-cls","data","disabled","trigger","change-on-select"])):c.createCommentVNode("",!0)])}var t_=$(Za,[["render",Gi]]),Ft={beforeMount(v,E,P){function G(H){if(v.contains(H.target))return!1;E.value(H)}v.__vueClickOutside__=G,A&&document.addEventListener("click",G)},unmounted(v,E){A&&document.removeEventListener("click",v.__vueClickOutside__),delete v.__vueClickOutside__}};const La="ivu-cascader",Tg="ivu-select",ko={name:"Cascader",mixins:[vt,Mo,zt],components:{iInput:Sl,Drop:Lr,Icon:oe,Caspanel:t_},directives:{clickOutside:Ft},emits:["on-change","on-visible-change","update:modelValue"],provide(){return{CascaderInstance:this}},props:{data:{type:Array,default(){return[]}},modelValue:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},trigger:{validator(v){return re(v,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default(v){return v.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:La,selectPrefixCls:Tg,visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.modelValue||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1,caspanelList:[]}},computed:{classes(){return[`${La}`,{[`${La}-show-clear`]:this.showCloseIcon,[`${La}-size-${this.size}`]:!!this.size,[`${La}-visible`]:this.visible,[`${La}-disabled`]:this.itemDisabled,[`${La}-not-found`]:this.filterable&&this.query!==""&&!this.querySelections.length}]},showCloseIcon(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender(){let v=[];for(let E=0;E<this.selected.length;E++)v.push(this.selected[E].label);return this.renderFormat(v,this.selected)},displayInputRender(){return this.filterable?"":this.displayRender},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.select.noMatch"):this.notFoundText},querySelections(){let v=[];function E(P,G,H){const N=Te(P);for(let ee=0;ee<N.length;ee++){let le=N[ee];le.__label=G?G+" / "+le.label:le.label,le.__value=H?H+","+le.value:le.value,le.children&&le.children.length?(E(le.children,le.__label,le.__value),delete le.__label,delete le.__value):v.push({label:le.__label,value:le.__value,display:le.__label,item:le,disabled:!!le.disabled})}}return E(this.data),v=v.filter(P=>P.label?P.label.indexOf(this.query)>-1:!1).map(P=>(P.display=P.display.replace(new RegExp(this.query,"g"),`<span>${this.query}</span>`),P)),v},arrowType(){const v=this.globalConfig;let E="ios-arrow-down";return v&&(v.cascader.customArrow?E="":v.cascader.arrow&&(E=v.cascader.arrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.cascader.customArrow&&(E=v.cascader.customArrow),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.cascader.arrowSize&&(E=v.cascader.arrowSize),E},dropdownCls(){return{[La+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{clearSelect(){if(this.itemDisabled)return!1;const v=JSON.stringify(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,v),this.caspanelList.forEach(E=>{E.caspanel.handleOnClear()})},handleClose(){this.visible=!1},toggleOpen(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus(){this.visible=!0,this.currentValue.length||this.caspanelList.forEach(v=>{v.caspanel.handleOnClear()})},updateResult(v){this.tmpSelected=v},updateSelected(v=!1,E=!1){(!this.changeOnSelect||v||E)&&this.caspanelList.forEach(P=>{P.caspanel.handleOnFindSelected({value:this.currentValue})})},emitValue(v,E){JSON.stringify(v)!==E&&(this.$emit("on-change",this.currentValue,JSON.parse(JSON.stringify(this.selected))),c.nextTick(()=>{this.handleFormItemChange("change",{value:this.currentValue,selected:JSON.parse(JSON.stringify(this.selected))})}))},handleInput(v){this.query=v.target.value},handleSelectItem(v){const E=this.querySelections[v];if(E.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";const P=JSON.stringify(this.currentValue);this.currentValue=E.value.split(","),setTimeout(()=>{this.emitValue(this.currentValue,P),this.handleClose()},0)},handleFocus(){this.$refs.input.focus()},getValidData(v){const E=Te(v);function P(G){const H=Object.assign({},G);return"loading"in H&&delete H.loading,"__value"in H&&delete H.__value,"__label"in H&&delete H.__label,"children"in H&&H.children.length&&(H.children=H.children.map(N=>P(N))),H}return E.map(G=>P(G))},handleOnResultChange(v){const E=v.lastValue,P=v.changeOnSelect,G=v.fromInit;if(E||P){const H=JSON.stringify(this.currentValue);this.selected=this.tmpSelected;let N=[];this.selected.forEach(ee=>{N.push(ee.value)}),G||(this.updatingValue=!0,this.currentValue=N,this.emitValue(this.currentValue,H))}E&&!G&&this.handleClose()}},created(){this.validDataStr=JSON.stringify(this.getValidData(this.data))},mounted(){this.updateSelected(!0)},watch:{visible(v){v?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.$refs.drop.handleOnUpdatePopper()):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.$refs.drop.handleOnDestroyPopper()),this.$emit("on-visible-change",v)},modelValue(v){v===null&&(this.isValueNull=!0),this.currentValue=v||[],(v===null||!v.length)&&(this.selected=[])},currentValue(){if(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",this.currentValue),this.updatingValue){this.updatingValue=!1;return}this.updateSelected(!0)},data:{deep:!0,handler(){const v=JSON.stringify(this.getValidData(this.data));v!==this.validDataStr&&(this.validDataStr=v,this.isLoadedChildren||c.nextTick(()=>this.updateSelected(!1,this.changeOnSelect)),this.isLoadedChildren=!1)}}}},au=["name","value"],JM=["onClick","innerHTML"];function su(v,E,P,G,H,N){const ee=c.resolveComponent("i-input"),le=c.resolveComponent("Icon"),Ce=c.resolveComponent("Caspanel"),pe=c.resolveComponent("Drop"),we=c.resolveDirective("click-outside");return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-rel"]),onClick:E[1]||(E[1]=(...We)=>N.toggleOpen&&N.toggleOpen(...We)),ref:"reference"},[c.createElementVNode("input",{type:"hidden",name:P.name,value:H.currentValue},null,8,au),c.renderSlot(v.$slots,"default",{},()=>[c.createVNode(ee,{"element-id":P.elementId,ref:"input",readonly:!P.filterable,disabled:v.itemDisabled,modelValue:N.displayInputRender,onOnChange:N.handleInput,size:P.size,placeholder:N.inputPlaceholder},null,8,["element-id","readonly","disabled","modelValue","onOnChange","size","placeholder"]),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-label"]),onClick:E[0]||(E[0]=(...We)=>N.handleFocus&&N.handleFocus(...We))},c.toDisplayString(N.displayRender),3),[[c.vShow,P.filterable&&H.query===""]]),c.withDirectives(c.createVNode(le,{type:"ios-close-circle",class:c.normalizeClass([H.prefixCls+"-arrow"]),onClick:c.withModifiers(N.clearSelect,["stop"])},null,8,["class","onClick"]),[[c.vShow,N.showCloseIcon]]),c.createVNode(le,{type:N.arrowType,custom:N.customArrowType,size:N.arrowSize,class:c.normalizeClass([H.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])])],2),c.createVNode(pe,{ref:"drop",visible:H.visible,classes:N.dropdownCls,eventsEnabled:P.eventsEnabled,"transition-name":"transition-drop",transfer:P.transfer},{default:c.withCtx(()=>[c.createElementVNode("div",null,[c.withDirectives(c.createVNode(Ce,{ref:"caspanel","prefix-cls":H.prefixCls,data:P.data,disabled:v.itemDisabled,"change-on-select":P.changeOnSelect,trigger:P.trigger},null,8,["prefix-cls","data","disabled","change-on-select","trigger"]),[[c.vShow,!P.filterable||P.filterable&&H.query===""]]),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-dropdown"])},[c.createElementVNode("ul",{class:c.normalizeClass([H.selectPrefixCls+"-dropdown-list"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.querySelections,(We,ut)=>(c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass([H.selectPrefixCls+"-item",{[H.selectPrefixCls+"-item-disabled"]:We.disabled}]),key:ut,onClick:ct=>N.handleSelectItem(ut),innerHTML:We.display},null,10,JM))),128))],2)],2),[[c.vShow,P.filterable&&H.query!==""&&N.querySelections.length]]),c.withDirectives(c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-not-found-tip"])},[c.createElementVNode("li",null,c.toDisplayString(N.localeNotFoundText),1)],2),[[c.vShow,P.filterable&&H.query!==""&&!N.querySelections.length||!P.data.length]])])]),_:1},8,["visible","classes","eventsEnabled","transfer"])],2)),[[we,N.handleClose]])}var j0=$(ko,[["render",su]]);const lu={name:"CellItem",props:{title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""}}},n_={class:"ivu-cell-item"},El={class:"ivu-cell-icon"},Ro={class:"ivu-cell-main"},Wu={class:"ivu-cell-title"},Ag={class:"ivu-cell-label"},vs={class:"ivu-cell-footer"},hw={class:"ivu-cell-extra"};function kf(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",n_,[c.createElementVNode("div",El,[c.renderSlot(v.$slots,"icon")]),c.createElementVNode("div",Ro,[c.createElementVNode("div",Wu,[c.renderSlot(v.$slots,"default",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])]),c.createElementVNode("div",Ag,[c.renderSlot(v.$slots,"label",{},()=>[c.createTextVNode(c.toDisplayString(P.label),1)])])]),c.createElementVNode("div",vs,[c.createElementVNode("span",hw,[c.renderSlot(v.$slots,"extra",{},()=>[c.createTextVNode(c.toDisplayString(P.extra),1)])])])])}var Df=$(lu,[["render",kf]]);const ys="ivu-cell",Pf={name:"Cell",inject:["CellGroupInstance"],mixins:[ht,zt],components:{CellItem:Df,Icon:oe},props:{name:{type:[String,Number]},title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},data(){return{prefixCls:ys}},computed:{classes(){return[`${ys}`,{[`${ys}-disabled`]:this.disabled,[`${ys}-selected`]:this.selected,[`${ys}-with-link`]:this.to}]},arrowType(){const v=this.globalConfig;let E="ios-arrow-forward";return v&&(v.cell.customArrow?E="":v.cell.arrow&&(E=v.cell.arrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.cell.customArrow&&(E=v.cell.customArrow),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.cell.arrowSize&&(E=v.cell.arrowSize),E}},methods:{handleClickItem(v,E){this.CellGroupInstance.handleClick(this.name),this.handleCheckClick(v,E)}}},ft=["href","target"],ol={key:2,class:"ivu-cell-arrow"};function Rf(v,E,P,G,H,N){const ee=c.resolveComponent("CellItem"),le=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[v.to?(c.openBlock(),c.createElementBlock("a",{key:0,href:v.linkUrl,target:v.target,class:"ivu-cell-link",onClick:[E[0]||(E[0]=c.withModifiers(Ce=>N.handleClickItem(Ce,!1),["exact"])),E[1]||(E[1]=c.withModifiers(Ce=>N.handleClickItem(Ce,!0),["ctrl"])),E[2]||(E[2]=c.withModifiers(Ce=>N.handleClickItem(Ce,!0),["meta"]))]},[c.createVNode(ee,{title:P.title,label:P.label,extra:P.extra},{icon:c.withCtx(()=>[c.renderSlot(v.$slots,"icon")]),default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),extra:c.withCtx(()=>[c.renderSlot(v.$slots,"extra")]),label:c.withCtx(()=>[c.renderSlot(v.$slots,"label")]),_:3},8,["title","label","extra"])],8,ft)):(c.openBlock(),c.createElementBlock("div",{key:1,class:"ivu-cell-link",onClick:E[3]||(E[3]=(...Ce)=>N.handleClickItem&&N.handleClickItem(...Ce))},[c.createVNode(ee,{title:P.title,label:P.label,extra:P.extra},{icon:c.withCtx(()=>[c.renderSlot(v.$slots,"icon")]),default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),extra:c.withCtx(()=>[c.renderSlot(v.$slots,"extra")]),label:c.withCtx(()=>[c.renderSlot(v.$slots,"label")]),_:3},8,["title","label","extra"])])),v.to?(c.openBlock(),c.createElementBlock("div",ol,[c.renderSlot(v.$slots,"arrow",{},()=>[c.createVNode(le,{type:N.arrowType,custom:N.customArrowType,size:N.arrowSize},null,8,["type","custom","size"])])])):c.createCommentVNode("",!0)],2)}var Yu=$(Pf,[["render",Rf]]);const Tl={name:"CellGroup",emits:["on-click"],provide(){return{CellGroupInstance:this}},methods:{handleClick(v){this.$emit("on-click",v)}}},xa={class:"ivu-cell-group"};function Ca(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",xa,[c.renderSlot(v.$slots,"default")])}var fw=$(Tl,[["render",Ca]]);const pa="ivu-checkbox",ju={name:"Checkbox",mixins:[Mo],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${pa}-wrapper`,{[`${pa}-group-item`]:this.group,[`${pa}-wrapper-checked`]:this.currentValue,[`${pa}-wrapper-disabled`]:this.itemDisabled,[`${pa}-${this.size}`]:!!this.size,[`${pa}-border`]:this.border}]},checkboxClasses(){return[`${pa}`,{[`${pa}-checked`]:this.currentValue,[`${pa}-disabled`]:this.itemDisabled,[`${pa}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${pa}-inner`,{[`${pa}-focus`]:this.focusInner}]},inputClasses(){return`${pa}-input`},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(v){if(this.itemDisabled)return!1;const E=v.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",E),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",E),this.handleFormItemChange("change",E))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(v){if(!(v===this.trueValue||v===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(v){this.model=v||[]},immediate:!0}}},sr=["disabled","value","name"],Na=["disabled","checked","name"],il={key:0,class:"ivu-checkbox-label-text"};function Al(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("label",{class:c.normalizeClass(N.wrapClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.checkboxClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.innerClasses)},null,2),N.group?c.withDirectives((c.openBlock(),c.createElementBlock("input",{key:0,type:"checkbox",class:c.normalizeClass(N.inputClasses),disabled:v.itemDisabled,value:P.label,"onUpdate:modelValue":E[0]||(E[0]=ee=>H.model=ee),name:P.name,onChange:E[1]||(E[1]=(...ee)=>N.change&&N.change(...ee)),onFocus:E[2]||(E[2]=(...ee)=>N.onFocus&&N.onFocus(...ee)),onBlur:E[3]||(E[3]=(...ee)=>N.onBlur&&N.onBlur(...ee))},null,42,sr)),[[c.vModelCheckbox,H.model]]):(c.openBlock(),c.createElementBlock("input",{key:1,type:"checkbox",class:c.normalizeClass(N.inputClasses),disabled:v.itemDisabled,checked:N.currentValue,name:P.name,onChange:E[4]||(E[4]=(...ee)=>N.change&&N.change(...ee)),onFocus:E[5]||(E[5]=(...ee)=>N.onFocus&&N.onFocus(...ee)),onBlur:E[6]||(E[6]=(...ee)=>N.onBlur&&N.onBlur(...ee))},null,42,Na))],2),H.showSlot?(c.openBlock(),c.createElementBlock("span",il,[c.renderSlot(v.$slots,"default",{},()=>[c.createTextVNode(c.toDisplayString(P.label),1)])])):c.createCommentVNode("",!0)],2)}var Up=$(ju,[["render",Al]]);const QM="ivu-checkbox-group",Hp={name:"CheckboxGroup",mixins:[Mo],emits:["update:modelValue","on-change"],provide(){return{CheckboxGroupInstance:this}},props:{modelValue:{type:Array,default(){return[]}},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}}},data(){return{currentValue:this.modelValue||[],children:[]}},computed:{classes(){return[`${QM}`,{[`ivu-checkbox-${this.size}`]:!!this.size}]}},methods:{change(v){this.currentValue=v,this.$emit("update:modelValue",v),this.$emit("on-change",v),this.handleFormItemChange("change",v)}}};function Gp(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.renderSlot(v.$slots,"default")],2)}var qs=$(Hp,[["render",Gp]]);const is="ivu-chart-circle",pw={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:[String,Array],default:"#2d8cf0"},strokeLinecap:{validator(v){return re(v,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},data(){return{id:`ivu-chart-circle-${mt(3)}`}},computed:{circleSize(){return{width:`${this.size}px`,height:`${this.size}px`}},computedStrokeWidth(){return this.percent===0&&this.dashboard?0:this.strokeWidth},radius(){return 50-this.strokeWidth/2},pathString(){return this.dashboard?`M 50,50 m 0,${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}`:`M 50,50 m 0,-${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}`},len(){return Math.PI*2*this.radius},trailStyle(){let v={};return this.dashboard&&(v={"stroke-dasharray":`${this.len-75}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),v},pathStyle(){let v={};return this.dashboard?v={"stroke-dasharray":`${this.percent/100*(this.len-75)}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:v={"stroke-dasharray":`${this.len}px ${this.len}px`,"stroke-dashoffset":`${(100-this.percent)/100*this.len}px`,transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"},v},wrapClasses(){return`${is}`},innerClasses(){return`${is}-inner`},strokeValue(){let v=this.strokeColor;return typeof this.strokeColor!="string"&&(v=`url(#${this.id})`),v},showDefs(){return typeof this.strokeColor!="string"}}},ek={viewBox:"0 0 100 100"},r_={key:0},Z0=["id"],mw=["stop-color"],If=["stop-color"],Mg=["d","stroke","stroke-width","stroke-linecap"],tk=["d","stroke-linecap","stroke","stroke-width"];function Dh(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{style:c.normalizeStyle(N.circleSize),class:c.normalizeClass(N.wrapClasses)},[(c.openBlock(),c.createElementBlock("svg",ek,[N.showDefs?(c.openBlock(),c.createElementBlock("defs",r_,[c.createElementVNode("linearGradient",{id:H.id,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[c.createElementVNode("stop",{offset:"0%","stop-color":P.strokeColor[0]},null,8,mw),c.createElementVNode("stop",{offset:"100%","stop-color":P.strokeColor[1]},null,8,If)],8,Z0)])):c.createCommentVNode("",!0),c.createElementVNode("path",{d:N.pathString,stroke:P.trailColor,"stroke-width":P.trailWidth,"fill-opacity":0,style:c.normalizeStyle(N.trailStyle),"stroke-linecap":P.strokeLinecap},null,12,Mg),c.createElementVNode("path",{d:N.pathString,"stroke-linecap":P.strokeLinecap,stroke:N.strokeValue,"stroke-width":N.computedStrokeWidth,"fill-opacity":"0",style:c.normalizeStyle(N.pathStyle)},null,12,tk)])),c.createElementVNode("div",{class:c.normalizeClass(N.innerClasses)},[c.renderSlot(v.$slots,"default")],2)],6)}var kg=$(pw,[["render",Dh]]);const Dg="ivu-dropdown",nk={name:"Dropdown",directives:{clickOutside:Ft},components:{Drop:Lr},emits:["on-visible-change","on-clickoutside","on-click","on-hover-click","on-haschild-click"],props:{trigger:{validator(v){return re(v,["click","hover","custom","contextMenu"])},default:"hover"},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},visible:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},transferClassName:{type:String},stopPropagation:{type:Boolean,default:!1},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1},boundariesElement:{default:"window"}},computed:{transition(){return["bottom-start","bottom","bottom-end"].indexOf(this.placement)>-1?"slide-up":"fade"},dropdownCls(){return{[Dg+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}},relClasses(){return[`${Dg}-rel`,{[`${Dg}-rel-user-select-none`]:this.trigger==="contextMenu"}]}},data(){return{prefixCls:Dg,currentVisible:this.visible,timeout:null}},watch:{visible(v){this.currentVisible=v},currentVisible(v){v?this.$refs.drop.update():this.$refs.drop.destroy(),this.$emit("on-visible-change",v)}},methods:{handleClick(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.hasParent()||(this.currentVisible=!this.currentVisible)},handleRightClick(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!this.currentVisible},handleMouseenter(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!0},250)},handleMouseleave(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!1},150))},onClickoutside(v){this.handleClose(),this.handleRightClose(),this.currentVisible&&this.$emit("on-clickoutside",v)},handleClose(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.currentVisible=!1},handleRightClose(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!1},hasParent(){return Tt(this,"Dropdown")||!1},handleHaschildClick(){c.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!0});const v=this.hasParent();v&&v.handleHaschildClick()},handleItemClick(v){if(this.stopPropagation)return;const E=this.hasParent();E?E.handleItemClick(v):this.$emit("on-click",v)},handleHoverClick(){const v=this.hasParent();v?(c.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1}),v.handleHoverClick()):c.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1})}}};function rk(v,E,P,G,H,N){const ee=c.resolveComponent("Drop"),le=c.resolveDirective("click-outside");return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls]),onMouseenter:E[2]||(E[2]=(...Ce)=>N.handleMouseenter&&N.handleMouseenter(...Ce)),onMouseleave:E[3]||(E[3]=(...Ce)=>N.handleMouseleave&&N.handleMouseleave(...Ce))},[c.createElementVNode("div",{class:c.normalizeClass(N.relClasses),ref:"reference",onClick:E[0]||(E[0]=(...Ce)=>N.handleClick&&N.handleClick(...Ce)),onContextmenu:E[1]||(E[1]=c.withModifiers((...Ce)=>N.handleRightClick&&N.handleRightClick(...Ce),["prevent"]))},[c.renderSlot(v.$slots,"default")],34),c.createVNode(ee,{ref:"drop",visible:H.currentVisible,classes:N.dropdownCls,placement:P.placement,eventsEnabled:P.eventsEnabled,boundariesElement:P.boundariesElement,transfer:P.transfer,"transition-name":"transition-drop",onMouseenter:N.handleMouseenter,onMouseleave:N.handleMouseleave},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"list")]),_:3},8,["visible","classes","placement","eventsEnabled","boundariesElement","transfer","onMouseenter","onMouseleave"])],34)),[[le,N.onClickoutside]])}var Wi=$(nk,[["render",rk]]);const Fd={name:"DropdownMenu"},Wp={class:"ivu-dropdown-menu"};function $f(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("ul",Wp,[c.renderSlot(v.$slots,"default")])}var Ph=$(Fd,[["render",$f]]);const oi="ivu-tag",yc=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Pg=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],o_={name:"Tag",components:{Icon:oe},emits:["on-change","on-close"],props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(v){return re(v,["border","dot"])}},name:{type:[String,Number]},size:{validator(v){return re(v,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[`${oi}`,`${oi}-size-${this.size}`,{[`${oi}-${this.color}`]:!!this.color&&re(this.color,yc),[`${oi}-${this.type}`]:!!this.type,[`${oi}-closable`]:this.closable,[`${oi}-checked`]:this.isChecked,[`${oi}-checkable`]:this.checkable}]},wraperStyles(){return re(this.color,yc)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:this.type!=="dot"&&this.type!=="border"&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[`${oi}-text`,this.type==="border"&&re(this.color,yc)?`${oi}-color-${this.color}`:"",this.type!=="dot"&&this.type!=="border"&&this.color!=="default"&&this.isChecked&&Pg.indexOf(this.color)<0?`${oi}-color-white`:""]},dotClasses(){return`${oi}-dot-inner`},iconClass(){return this.type==="dot"?"":this.type==="border"?re(this.color,yc)?`${oi}-color-${this.color}`:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&this.type==="dot"},lineColor(){return this.type==="dot"?"":this.type==="border"?this.color!==void 0?re(this.color,yc)?"":this.color:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},borderColor(){return this.color!==void 0?this.color==="default"?"":this.color:""},dotColor(){return this.color!==void 0?re(this.color,yc)?"":this.color:""},textColorStyle(){return re(this.color,yc)?{}:this.type!=="dot"&&this.type!=="border"?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return re(this.color,yc)?{}:{background:this.dotColor}},defaultTypeColor(){return this.type!=="dot"&&this.type!=="border"&&this.color!==void 0?re(this.color,yc)?"":this.color:""}},methods:{close(v){this.name===void 0?this.$emit("on-close",v):this.$emit("on-close",v,this.name)},check(){if(!this.checkable)return;const v=!this.isChecked;this.isChecked=v,this.name===void 0?this.$emit("on-change",v):this.$emit("on-change",v,this.name)}},watch:{checked(v){this.isChecked=v}}};function Vd(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),onClick:E[0]||(E[0]=c.withModifiers((...le)=>N.check&&N.check(...le),["stop"])),style:c.normalizeStyle(N.wraperStyles)},[N.showDot?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(N.dotClasses),style:c.normalizeStyle(N.bgColorStyle)},null,6)):c.createCommentVNode("",!0),c.createElementVNode("span",{class:c.normalizeClass(N.textClasses),style:c.normalizeStyle(N.textColorStyle)},[c.renderSlot(v.$slots,"default")],6),P.closable?(c.openBlock(),c.createBlock(ee,{key:1,class:c.normalizeClass(N.iconClass),color:N.lineColor,type:"ios-close",onClick:c.withModifiers(N.close,["stop"])},null,8,["class","color","onClick"])):c.createCommentVNode("",!0)],6)}var Ml=$(o_,[["render",Vd]]),q0={11e4:{l:"Z1",n:"北京",c:"110000",p:"86"},12e4:{l:"Z1",n:"天津",c:"120000",p:"86"},13e4:{l:"H",n:"河北",c:"130000",p:"86"},14e4:{l:"S",n:"山西",c:"140000",p:"86"},15e4:{l:"N",n:"内蒙古",c:"150000",p:"86"},21e4:{l:"L",n:"辽宁",c:"210000",p:"86"},22e4:{l:"J",n:"吉林",c:"220000",p:"86"},23e4:{l:"H",n:"黑龙江",c:"230000",p:"86"},31e4:{l:"Z1",n:"上海",c:"310000",p:"86"},32e4:{l:"J",n:"江苏",c:"320000",p:"86"},33e4:{l:"Z",n:"浙江",c:"330000",p:"86"},34e4:{l:"A",n:"安徽",c:"340000",p:"86"},35e4:{l:"F",n:"福建",c:"350000",p:"86"},36e4:{l:"J",n:"江西",c:"360000",p:"86"},37e4:{l:"S",n:"山东",c:"370000",p:"86"},41e4:{l:"H",n:"河南",c:"410000",p:"86"},42e4:{l:"H",n:"湖北",c:"420000",p:"86"},43e4:{l:"H",n:"湖南",c:"430000",p:"86"},44e4:{l:"G",n:"广东",c:"440000",p:"86"},45e4:{l:"G",n:"广西",c:"450000",p:"86"},46e4:{l:"H",n:"海南",c:"460000",p:"86"},5e5:{l:"Z1",n:"重庆",c:"500000",p:"86"},51e4:{l:"S",n:"四川",c:"510000",p:"86"},52e4:{l:"G",n:"贵州",c:"520000",p:"86"},53e4:{l:"Y",n:"云南",c:"530000",p:"86"},54e4:{l:"X",n:"西藏",c:"540000",p:"86"},61e4:{l:"S",n:"陕西",c:"610000",p:"86"},62e4:{l:"G",n:"甘肃",c:"620000",p:"86"},63e4:{l:"Q",n:"青海",c:"630000",p:"86"},64e4:{l:"N",n:"宁夏",c:"640000",p:"86"},65e4:{l:"X",n:"新疆",c:"650000",p:"86"},71e4:{l:"T",n:"台湾",c:"710000",p:"86"},81e4:{l:"Z2",n:"香港",c:"810000",p:"86"},82e4:{l:"Z2",n:"澳门",c:"820000",p:"86"}},Ks={11e4:{l:"B",n:"北京市",c:"110000",p:"86"},12e4:{l:"T",n:"天津市",c:"120000",p:"86"},130100:{l:"S",n:"石家庄市",c:"130100",p:"130000"},130200:{l:"T",n:"唐山市",c:"130200",p:"130000"},130300:{l:"Q",n:"秦皇岛市",c:"130300",p:"130000"},130400:{l:"H",n:"邯郸市",c:"130400",p:"130000"},130500:{l:"X",n:"邢台市",c:"130500",p:"130000"},130600:{l:"B",n:"保定市",c:"130600",p:"130000"},130700:{l:"Z",n:"张家口市",c:"130700",p:"130000"},130800:{l:"C",n:"承德市",c:"130800",p:"130000"},130900:{l:"C",n:"沧州市",c:"130900",p:"130000"},131e3:{l:"L",n:"廊坊市",c:"131000",p:"130000"},131100:{l:"H",n:"衡水市",c:"131100",p:"130000"},139001:{l:"D",n:"定州市",c:"139001",p:"130000"},139002:{l:"X",n:"辛集市",c:"139002",p:"130000"},140100:{l:"T",n:"太原市",c:"140100",p:"140000"},140200:{l:"D",n:"大同市",c:"140200",p:"140000"},140300:{l:"Y",n:"阳泉市",c:"140300",p:"140000"},140400:{l:"C",n:"长治市",c:"140400",p:"140000"},140500:{l:"J",n:"晋城市",c:"140500",p:"140000"},140600:{l:"S",n:"朔州市",c:"140600",p:"140000"},140700:{l:"J",n:"晋中市",c:"140700",p:"140000"},140800:{l:"Y",n:"运城市",c:"140800",p:"140000"},140900:{l:"X",n:"忻州市",c:"140900",p:"140000"},141e3:{l:"L",n:"临汾市",c:"141000",p:"140000"},141100:{l:"L",n:"吕梁市",c:"141100",p:"140000"},150100:{l:"H",n:"呼和浩特市",c:"150100",p:"150000"},150200:{l:"B",n:"包头市",c:"150200",p:"150000"},150300:{l:"W",n:"乌海市",c:"150300",p:"150000"},150400:{l:"C",n:"赤峰市",c:"150400",p:"150000"},150500:{l:"T",n:"通辽市",c:"150500",p:"150000"},150600:{l:"E",n:"鄂尔多斯市",c:"150600",p:"150000"},150700:{l:"H",n:"呼伦贝尔市",c:"150700",p:"150000"},150800:{l:"B",n:"巴彦淖尔市",c:"150800",p:"150000"},150900:{l:"W",n:"乌兰察布市",c:"150900",p:"150000"},152200:{l:"X",n:"兴安盟",c:"152200",p:"150000"},152500:{l:"X",n:"锡林郭勒盟",c:"152500",p:"150000"},152900:{l:"A",n:"阿拉善盟",c:"152900",p:"150000"},210100:{l:"S",n:"沈阳市",c:"210100",p:"210000"},210200:{l:"D",n:"大连市",c:"210200",p:"210000"},210300:{l:"A",n:"鞍山市",c:"210300",p:"210000"},210400:{l:"F",n:"抚顺市",c:"210400",p:"210000"},210500:{l:"B",n:"本溪市",c:"210500",p:"210000"},210600:{l:"D",n:"丹东市",c:"210600",p:"210000"},210700:{l:"J",n:"锦州市",c:"210700",p:"210000"},210800:{l:"Y",n:"营口市",c:"210800",p:"210000"},210900:{l:"F",n:"阜新市",c:"210900",p:"210000"},211e3:{l:"L",n:"辽阳市",c:"211000",p:"210000"},211100:{l:"P",n:"盘锦市",c:"211100",p:"210000"},211200:{l:"T",n:"铁岭市",c:"211200",p:"210000"},211300:{l:"C",n:"朝阳市",c:"211300",p:"210000"},211400:{l:"H",n:"葫芦岛市",c:"211400",p:"210000"},220100:{l:"C",n:"长春市",c:"220100",p:"220000"},220200:{l:"J",n:"吉林市",c:"220200",p:"220000"},220300:{l:"S",n:"四平市",c:"220300",p:"220000"},220400:{l:"L",n:"辽源市",c:"220400",p:"220000"},220500:{l:"T",n:"通化市",c:"220500",p:"220000"},220600:{l:"B",n:"白山市",c:"220600",p:"220000"},220700:{l:"S",n:"松原市",c:"220700",p:"220000"},220800:{l:"B",n:"白城市",c:"220800",p:"220000"},222400:{l:"Y",n:"延边朝鲜族自治州",c:"222400",p:"220000"},230100:{l:"H",n:"哈尔滨市",c:"230100",p:"230000"},230200:{l:"Q",n:"齐齐哈尔市",c:"230200",p:"230000"},230300:{l:"J",n:"鸡西市",c:"230300",p:"230000"},230400:{l:"H",n:"鹤岗市",c:"230400",p:"230000"},230500:{l:"S",n:"双鸭山市",c:"230500",p:"230000"},230600:{l:"D",n:"大庆市",c:"230600",p:"230000"},230700:{l:"Y",n:"伊春市",c:"230700",p:"230000"},230800:{l:"J",n:"佳木斯市",c:"230800",p:"230000"},230900:{l:"Q",n:"七台河市",c:"230900",p:"230000"},231e3:{l:"M",n:"牡丹江市",c:"231000",p:"230000"},231100:{l:"H",n:"黑河市",c:"231100",p:"230000"},231200:{l:"S",n:"绥化市",c:"231200",p:"230000"},232700:{l:"D",n:"大兴安岭地区",c:"232700",p:"230000"},31e4:{l:"S",n:"上海市",c:"310000",p:"86"},320100:{l:"N",n:"南京市",c:"320100",p:"320000"},320200:{l:"W",n:"无锡市",c:"320200",p:"320000"},320300:{l:"X",n:"徐州市",c:"320300",p:"320000"},320400:{l:"C",n:"常州市",c:"320400",p:"320000"},320500:{l:"S",n:"苏州市",c:"320500",p:"320000"},320600:{l:"N",n:"南通市",c:"320600",p:"320000"},320700:{l:"L",n:"连云港市",c:"320700",p:"320000"},320800:{l:"H",n:"淮安市",c:"320800",p:"320000"},320900:{l:"Y",n:"盐城市",c:"320900",p:"320000"},321e3:{l:"Y",n:"扬州市",c:"321000",p:"320000"},321100:{l:"Z",n:"镇江市",c:"321100",p:"320000"},321200:{l:"T",n:"泰州市",c:"321200",p:"320000"},321300:{l:"X",n:"宿迁市",c:"321300",p:"320000"},330100:{l:"H",n:"杭州市",c:"330100",p:"330000"},330200:{l:"N",n:"宁波市",c:"330200",p:"330000"},330300:{l:"W",n:"温州市",c:"330300",p:"330000"},330400:{l:"J",n:"嘉兴市",c:"330400",p:"330000"},330500:{l:"H",n:"湖州市",c:"330500",p:"330000"},330600:{l:"S",n:"绍兴市",c:"330600",p:"330000"},330700:{l:"J",n:"金华市",c:"330700",p:"330000"},330800:{l:"Q",n:"衢州市",c:"330800",p:"330000"},330900:{l:"Z",n:"舟山市",c:"330900",p:"330000"},331e3:{l:"T",n:"台州市",c:"331000",p:"330000"},331100:{l:"L",n:"丽水市",c:"331100",p:"330000"},340100:{l:"H",n:"合肥市",c:"340100",p:"340000"},340200:{l:"W",n:"芜湖市",c:"340200",p:"340000"},340300:{l:"B",n:"蚌埠市",c:"340300",p:"340000"},340400:{l:"H",n:"淮南市",c:"340400",p:"340000"},340500:{l:"M",n:"马鞍山市",c:"340500",p:"340000"},340600:{l:"H",n:"淮北市",c:"340600",p:"340000"},340700:{l:"T",n:"铜陵市",c:"340700",p:"340000"},340800:{l:"A",n:"安庆市",c:"340800",p:"340000"},341e3:{l:"H",n:"黄山市",c:"341000",p:"340000"},341100:{l:"C",n:"滁州市",c:"341100",p:"340000"},341200:{l:"F",n:"阜阳市",c:"341200",p:"340000"},341300:{l:"X",n:"宿州市",c:"341300",p:"340000"},341500:{l:"L",n:"六安市",c:"341500",p:"340000"},341600:{l:"B",n:"亳州市",c:"341600",p:"340000"},341700:{l:"C",n:"池州市",c:"341700",p:"340000"},341800:{l:"X",n:"宣城市",c:"341800",p:"340000"},350100:{l:"F",n:"福州市",c:"350100",p:"350000"},350200:{l:"S",n:"厦门市",c:"350200",p:"350000"},350300:{l:"P",n:"莆田市",c:"350300",p:"350000"},350400:{l:"S",n:"三明市",c:"350400",p:"350000"},350500:{l:"Q",n:"泉州市",c:"350500",p:"350000"},350600:{l:"Z",n:"漳州市",c:"350600",p:"350000"},350700:{l:"N",n:"南平市",c:"350700",p:"350000"},350800:{l:"L",n:"龙岩市",c:"350800",p:"350000"},350900:{l:"N",n:"宁德市",c:"350900",p:"350000"},360100:{l:"N",n:"南昌市",c:"360100",p:"360000"},360200:{l:"J",n:"景德镇市",c:"360200",p:"360000"},360300:{l:"P",n:"萍乡市",c:"360300",p:"360000"},360400:{l:"J",n:"九江市",c:"360400",p:"360000"},360500:{l:"X",n:"新余市",c:"360500",p:"360000"},360600:{l:"Y",n:"鹰潭市",c:"360600",p:"360000"},360700:{l:"G",n:"赣州市",c:"360700",p:"360000"},360800:{l:"J",n:"吉安市",c:"360800",p:"360000"},360900:{l:"Y",n:"宜春市",c:"360900",p:"360000"},361e3:{l:"F",n:"抚州市",c:"361000",p:"360000"},361100:{l:"S",n:"上饶市",c:"361100",p:"360000"},370100:{l:"J",n:"济南市",c:"370100",p:"370000"},370200:{l:"Q",n:"青岛市",c:"370200",p:"370000"},370300:{l:"Z",n:"淄博市",c:"370300",p:"370000"},370400:{l:"Z",n:"枣庄市",c:"370400",p:"370000"},370500:{l:"D",n:"东营市",c:"370500",p:"370000"},370600:{l:"Y",n:"烟台市",c:"370600",p:"370000"},370700:{l:"W",n:"潍坊市",c:"370700",p:"370000"},370800:{l:"J",n:"济宁市",c:"370800",p:"370000"},370900:{l:"T",n:"泰安市",c:"370900",p:"370000"},371e3:{l:"W",n:"威海市",c:"371000",p:"370000"},371100:{l:"R",n:"日照市",c:"371100",p:"370000"},371200:{l:"L",n:"莱芜市",c:"371200",p:"370000"},371300:{l:"L",n:"临沂市",c:"371300",p:"370000"},371400:{l:"D",n:"德州市",c:"371400",p:"370000"},371500:{l:"L",n:"聊城市",c:"371500",p:"370000"},371600:{l:"B",n:"滨州市",c:"371600",p:"370000"},371700:{l:"H",n:"菏泽市",c:"371700",p:"370000"},410100:{l:"Z",n:"郑州市",c:"410100",p:"410000"},410200:{l:"K",n:"开封市",c:"410200",p:"410000"},410300:{l:"L",n:"洛阳市",c:"410300",p:"410000"},410400:{l:"P",n:"平顶山市",c:"410400",p:"410000"},410500:{l:"A",n:"安阳市",c:"410500",p:"410000"},410600:{l:"H",n:"鹤壁市",c:"410600",p:"410000"},410700:{l:"X",n:"新乡市",c:"410700",p:"410000"},410800:{l:"J",n:"焦作市",c:"410800",p:"410000"},410900:{l:"P",n:"濮阳市",c:"410900",p:"410000"},411e3:{l:"X",n:"许昌市",c:"411000",p:"410000"},411100:{l:"L",n:"漯河市",c:"411100",p:"410000"},411200:{l:"S",n:"三门峡市",c:"411200",p:"410000"},411300:{l:"N",n:"南阳市",c:"411300",p:"410000"},411400:{l:"S",n:"商丘市",c:"411400",p:"410000"},411500:{l:"X",n:"信阳市",c:"411500",p:"410000"},411600:{l:"Z",n:"周口市",c:"411600",p:"410000"},411700:{l:"Z",n:"驻马店市",c:"411700",p:"410000"},419001:{l:"J",n:"济源市",c:"419001",p:"410000"},420100:{l:"W",n:"武汉市",c:"420100",p:"420000"},420200:{l:"H",n:"黄石市",c:"420200",p:"420000"},420300:{l:"S",n:"十堰市",c:"420300",p:"420000"},420500:{l:"Y",n:"宜昌市",c:"420500",p:"420000"},420600:{l:"X",n:"襄阳市",c:"420600",p:"420000"},420700:{l:"E",n:"鄂州市",c:"420700",p:"420000"},420800:{l:"J",n:"荆门市",c:"420800",p:"420000"},420900:{l:"X",n:"孝感市",c:"420900",p:"420000"},421e3:{l:"J",n:"荆州市",c:"421000",p:"420000"},421100:{l:"H",n:"黄冈市",c:"421100",p:"420000"},421200:{l:"X",n:"咸宁市",c:"421200",p:"420000"},421300:{l:"S",n:"随州市",c:"421300",p:"420000"},422800:{l:"E",n:"恩施土家族苗族自治州",c:"422800",p:"420000"},429004:{l:"X",n:"仙桃市",c:"429004",p:"420000"},429005:{l:"Q",n:"潜江市",c:"429005",p:"420000"},429006:{l:"T",n:"天门市",c:"429006",p:"420000"},429021:{l:"S",n:"神农架林区",c:"429021",p:"420000"},430100:{l:"C",n:"长沙市",c:"430100",p:"430000"},430200:{l:"Z",n:"株洲市",c:"430200",p:"430000"},430300:{l:"X",n:"湘潭市",c:"430300",p:"430000"},430400:{l:"H",n:"衡阳市",c:"430400",p:"430000"},430500:{l:"S",n:"邵阳市",c:"430500",p:"430000"},430600:{l:"Y",n:"岳阳市",c:"430600",p:"430000"},430700:{l:"C",n:"常德市",c:"430700",p:"430000"},430800:{l:"Z",n:"张家界市",c:"430800",p:"430000"},430900:{l:"Y",n:"益阳市",c:"430900",p:"430000"},431e3:{l:"C",n:"郴州市",c:"431000",p:"430000"},431100:{l:"Y",n:"永州市",c:"431100",p:"430000"},431200:{l:"H",n:"怀化市",c:"431200",p:"430000"},431300:{l:"L",n:"娄底市",c:"431300",p:"430000"},433100:{l:"X",n:"湘西土家族苗族自治州",c:"433100",p:"430000"},440100:{l:"G",n:"广州市",c:"440100",p:"440000"},440200:{l:"S",n:"韶关市",c:"440200",p:"440000"},440300:{l:"S",n:"深圳市",c:"440300",p:"440000"},440400:{l:"Z",n:"珠海市",c:"440400",p:"440000"},440500:{l:"S",n:"汕头市",c:"440500",p:"440000"},440600:{l:"F",n:"佛山市",c:"440600",p:"440000"},440700:{l:"J",n:"江门市",c:"440700",p:"440000"},440800:{l:"Z",n:"湛江市",c:"440800",p:"440000"},440900:{l:"M",n:"茂名市",c:"440900",p:"440000"},441200:{l:"Z",n:"肇庆市",c:"441200",p:"440000"},441300:{l:"H",n:"惠州市",c:"441300",p:"440000"},441400:{l:"M",n:"梅州市",c:"441400",p:"440000"},441500:{l:"S",n:"汕尾市",c:"441500",p:"440000"},441600:{l:"H",n:"河源市",c:"441600",p:"440000"},441700:{l:"Y",n:"阳江市",c:"441700",p:"440000"},441800:{l:"Q",n:"清远市",c:"441800",p:"440000"},441900:{l:"D",n:"东莞市",c:"441900",p:"440000"},442e3:{l:"Z",n:"中山市",c:"442000",p:"440000"},445100:{l:"C",n:"潮州市",c:"445100",p:"440000"},445200:{l:"J",n:"揭阳市",c:"445200",p:"440000"},445300:{l:"Y",n:"云浮市",c:"445300",p:"440000"},450100:{l:"N",n:"南宁市",c:"450100",p:"450000"},450200:{l:"L",n:"柳州市",c:"450200",p:"450000"},450300:{l:"G",n:"桂林市",c:"450300",p:"450000"},450400:{l:"W",n:"梧州市",c:"450400",p:"450000"},450500:{l:"B",n:"北海市",c:"450500",p:"450000"},450600:{l:"F",n:"防城港市",c:"450600",p:"450000"},450700:{l:"Q",n:"钦州市",c:"450700",p:"450000"},450800:{l:"G",n:"贵港市",c:"450800",p:"450000"},450900:{l:"Y",n:"玉林市",c:"450900",p:"450000"},451e3:{l:"B",n:"百色市",c:"451000",p:"450000"},451100:{l:"H",n:"贺州市",c:"451100",p:"450000"},451200:{l:"H",n:"河池市",c:"451200",p:"450000"},451300:{l:"L",n:"来宾市",c:"451300",p:"450000"},451400:{l:"C",n:"崇左市",c:"451400",p:"450000"},460100:{l:"H",n:"海口市",c:"460100",p:"460000"},460200:{l:"S",n:"三亚市",c:"460200",p:"460000"},460300:{l:"S",n:"三沙市",c:"460300",p:"460000"},460400:{l:"D",n:"儋州市",c:"460400",p:"460000"},469001:{l:"W",n:"五指山市",c:"469001",p:"460000"},469002:{l:"Q",n:"琼海市",c:"469002",p:"460000"},469005:{l:"W",n:"文昌市",c:"469005",p:"460000"},469006:{l:"W",n:"万宁市",c:"469006",p:"460000"},469007:{l:"D",n:"东方市",c:"469007",p:"460000"},469021:{l:"D",n:"定安县",c:"469021",p:"460000"},469022:{l:"T",n:"屯昌县",c:"469022",p:"460000"},469023:{l:"C",n:"澄迈县",c:"469023",p:"460000"},469024:{l:"L",n:"临高县",c:"469024",p:"460000"},469025:{l:"B",n:"白沙黎族自治县",c:"469025",p:"460000"},469026:{l:"C",n:"昌江黎族自治县",c:"469026",p:"460000"},469027:{l:"L",n:"乐东黎族自治县",c:"469027",p:"460000"},469028:{l:"L",n:"陵水黎族自治县",c:"469028",p:"460000"},469029:{l:"B",n:"保亭黎族苗族自治县",c:"469029",p:"460000"},469030:{l:"Q",n:"琼中黎族苗族自治县",c:"469030",p:"460000"},5e5:{l:"C",n:"重庆市",c:"500000",p:"86"},510100:{l:"C",n:"成都市",c:"510100",p:"510000"},510300:{l:"Z",n:"自贡市",c:"510300",p:"510000"},510400:{l:"P",n:"攀枝花市",c:"510400",p:"510000"},510500:{l:"L",n:"泸州市",c:"510500",p:"510000"},510600:{l:"D",n:"德阳市",c:"510600",p:"510000"},510700:{l:"M",n:"绵阳市",c:"510700",p:"510000"},510800:{l:"G",n:"广元市",c:"510800",p:"510000"},510900:{l:"S",n:"遂宁市",c:"510900",p:"510000"},511e3:{l:"N",n:"内江市",c:"511000",p:"510000"},511100:{l:"L",n:"乐山市",c:"511100",p:"510000"},511300:{l:"N",n:"南充市",c:"511300",p:"510000"},511400:{l:"M",n:"眉山市",c:"511400",p:"510000"},511500:{l:"Y",n:"宜宾市",c:"511500",p:"510000"},511600:{l:"G",n:"广安市",c:"511600",p:"510000"},511700:{l:"D",n:"达州市",c:"511700",p:"510000"},511800:{l:"Y",n:"雅安市",c:"511800",p:"510000"},511900:{l:"B",n:"巴中市",c:"511900",p:"510000"},512e3:{l:"Z",n:"资阳市",c:"512000",p:"510000"},513200:{l:"A",n:"阿坝藏族羌族自治州",c:"513200",p:"510000"},513300:{l:"G",n:"甘孜藏族自治州",c:"513300",p:"510000"},513400:{l:"L",n:"凉山彝族自治州",c:"513400",p:"510000"},520100:{l:"G",n:"贵阳市",c:"520100",p:"520000"},520200:{l:"L",n:"六盘水市",c:"520200",p:"520000"},520300:{l:"Z",n:"遵义市",c:"520300",p:"520000"},520400:{l:"A",n:"安顺市",c:"520400",p:"520000"},520500:{l:"B",n:"毕节市",c:"520500",p:"520000"},520600:{l:"T",n:"铜仁市",c:"520600",p:"520000"},522300:{l:"Q",n:"黔西南布依族苗族自治州",c:"522300",p:"520000"},522600:{l:"Q",n:"黔东南苗族侗族自治州",c:"522600",p:"520000"},522700:{l:"Q",n:"黔南布依族苗族自治州",c:"522700",p:"520000"},530100:{l:"K",n:"昆明市",c:"530100",p:"530000"},530300:{l:"Q",n:"曲靖市",c:"530300",p:"530000"},530400:{l:"Y",n:"玉溪市",c:"530400",p:"530000"},530500:{l:"B",n:"保山市",c:"530500",p:"530000"},530600:{l:"Z",n:"昭通市",c:"530600",p:"530000"},530700:{l:"L",n:"丽江市",c:"530700",p:"530000"},530800:{l:"P",n:"普洱市",c:"530800",p:"530000"},530900:{l:"L",n:"临沧市",c:"530900",p:"530000"},532300:{l:"C",n:"楚雄彝族自治州",c:"532300",p:"530000"},532500:{l:"H",n:"红河哈尼族彝族自治州",c:"532500",p:"530000"},532600:{l:"W",n:"文山壮族苗族自治州",c:"532600",p:"530000"},532800:{l:"X",n:"西双版纳傣族自治州",c:"532800",p:"530000"},532900:{l:"D",n:"大理白族自治州",c:"532900",p:"530000"},533100:{l:"D",n:"德宏傣族景颇族自治州",c:"533100",p:"530000"},533300:{l:"N",n:"怒江傈僳族自治州",c:"533300",p:"530000"},533400:{l:"D",n:"迪庆藏族自治州",c:"533400",p:"530000"},540100:{l:"L",n:"拉萨市",c:"540100",p:"540000"},540200:{l:"R",n:"日喀则市",c:"540200",p:"540000"},540300:{l:"C",n:"昌都市",c:"540300",p:"540000"},540400:{l:"L",n:"林芝市",c:"540400",p:"540000"},540500:{l:"S",n:"山南市",c:"540500",p:"540000"},542400:{l:"N",n:"那曲地区",c:"542400",p:"540000"},542500:{l:"A",n:"阿里地区",c:"542500",p:"540000"},610100:{l:"X",n:"西安市",c:"610100",p:"610000"},610200:{l:"T",n:"铜川市",c:"610200",p:"610000"},610300:{l:"B",n:"宝鸡市",c:"610300",p:"610000"},610400:{l:"X",n:"咸阳市",c:"610400",p:"610000"},610500:{l:"W",n:"渭南市",c:"610500",p:"610000"},610600:{l:"Y",n:"延安市",c:"610600",p:"610000"},610700:{l:"H",n:"汉中市",c:"610700",p:"610000"},610800:{l:"Y",n:"榆林市",c:"610800",p:"610000"},610900:{l:"A",n:"安康市",c:"610900",p:"610000"},611e3:{l:"S",n:"商洛市",c:"611000",p:"610000"},620100:{l:"L",n:"兰州市",c:"620100",p:"620000"},620200:{l:"J",n:"嘉峪关市",c:"620200",p:"620000"},620300:{l:"J",n:"金昌市",c:"620300",p:"620000"},620400:{l:"B",n:"白银市",c:"620400",p:"620000"},620500:{l:"T",n:"天水市",c:"620500",p:"620000"},620600:{l:"W",n:"武威市",c:"620600",p:"620000"},620700:{l:"Z",n:"张掖市",c:"620700",p:"620000"},620800:{l:"P",n:"平凉市",c:"620800",p:"620000"},620900:{l:"J",n:"酒泉市",c:"620900",p:"620000"},621e3:{l:"Q",n:"庆阳市",c:"621000",p:"620000"},621100:{l:"D",n:"定西市",c:"621100",p:"620000"},621200:{l:"L",n:"陇南市",c:"621200",p:"620000"},622900:{l:"L",n:"临夏回族自治州",c:"622900",p:"620000"},623e3:{l:"G",n:"甘南藏族自治州",c:"623000",p:"620000"},630100:{l:"X",n:"西宁市",c:"630100",p:"630000"},630200:{l:"H",n:"海东市",c:"630200",p:"630000"},632200:{l:"H",n:"海北藏族自治州",c:"632200",p:"630000"},632300:{l:"H",n:"黄南藏族自治州",c:"632300",p:"630000"},632500:{l:"H",n:"海南藏族自治州",c:"632500",p:"630000"},632600:{l:"G",n:"果洛藏族自治州",c:"632600",p:"630000"},632700:{l:"Y",n:"玉树藏族自治州",c:"632700",p:"630000"},632800:{l:"H",n:"海西蒙古族藏族自治州",c:"632800",p:"630000"},640100:{l:"Y",n:"银川市",c:"640100",p:"640000"},640200:{l:"S",n:"石嘴山市",c:"640200",p:"640000"},640300:{l:"W",n:"吴忠市",c:"640300",p:"640000"},640400:{l:"G",n:"固原市",c:"640400",p:"640000"},640500:{l:"Z",n:"中卫市",c:"640500",p:"640000"},650100:{l:"W",n:"乌鲁木齐市",c:"650100",p:"650000"},650200:{l:"K",n:"克拉玛依市",c:"650200",p:"650000"},650400:{l:"T",n:"吐鲁番市",c:"650400",p:"650000"},650500:{l:"H",n:"哈密市",c:"650500",p:"650000"},652300:{l:"C",n:"昌吉回族自治州",c:"652300",p:"650000"},652700:{l:"B",n:"博尔塔拉蒙古自治州",c:"652700",p:"650000"},652800:{l:"B",n:"巴音郭楞蒙古自治州",c:"652800",p:"650000"},652900:{l:"A",n:"阿克苏地区",c:"652900",p:"650000"},653e3:{l:"K",n:"克孜勒苏柯尔克孜自治州",c:"653000",p:"650000"},653100:{l:"K",n:"喀什地区",c:"653100",p:"650000"},653200:{l:"H",n:"和田地区",c:"653200",p:"650000"},654e3:{l:"Y",n:"伊犁哈萨克自治州",c:"654000",p:"650000"},654200:{l:"T",n:"塔城地区",c:"654200",p:"650000"},654300:{l:"A",n:"阿勒泰地区",c:"654300",p:"650000"},659001:{l:"S",n:"石河子市",c:"659001",p:"650000"},659002:{l:"A",n:"阿拉尔市",c:"659002",p:"650000"},659003:{l:"T",n:"图木舒克市",c:"659003",p:"650000"},659004:{l:"W",n:"五家渠市",c:"659004",p:"650000"},659006:{l:"T",n:"铁门关市",c:"659006",p:"650000"},710101:{l:"J",n:"金门",c:"710101",p:"710000"},710102:{l:"L",n:"连江",c:"710102",p:"710000"},710103:{l:"M",n:"苗栗",c:"710103",p:"710000"},710104:{l:"N",n:"南投",c:"710104",p:"710000"},710105:{l:"P",n:"澎湖",c:"710105",p:"710000"},710106:{l:"P",n:"屏东",c:"710106",p:"710000"},710107:{l:"T",n:"台东",c:"710107",p:"710000"},710108:{l:"T",n:"台中",c:"710108",p:"710000"},710109:{l:"T",n:"台南",c:"710109",p:"710000"},710110:{l:"T",n:"台北",c:"710110",p:"710000"},710111:{l:"T",n:"桃园",c:"710111",p:"710000"},710112:{l:"Y",n:"云林",c:"710112",p:"710000"},710113:{l:"X",n:"新北",c:"710113",p:"710000"},710114:{l:"Z",n:"彰化",c:"710114",p:"710000"},710115:{l:"J",n:"嘉义",c:"710115",p:"710000"},710116:{l:"X",n:"新竹",c:"710116",p:"710000"},710117:{l:"H",n:"花莲",c:"710117",p:"710000"},710118:{l:"Y",n:"宜兰",c:"710118",p:"710000"},710119:{l:"G",n:"高雄",c:"710119",p:"710000"},710120:{l:"J",n:"基隆",c:"710120",p:"710000"},81e4:{l:"X",n:"香港特别行政区",c:"810000",p:"86"},82e4:{l:"A",n:"澳门特别行政区",c:"820000",p:"86"}};function bc(v){return v.replace("市","").replace("地区","").replace("特别行政区","")}function Lf(){const v=Te(Ks),E=[];for(let P in v){const G=v[P];G.n=bc(G.n),E.push(G)}return E}function Nf(v,E){if(!E)return"";const P=v.find(G=>G.n===E);return P?P.c:(console.error("[View UI warn]: City name error."),"")}function Rh(v,E){return v.find(P=>P.c===E).n}const ok={name:"City",mixins:[Mo],components:{Dropdown:Wi,DropdownMenu:Ph,Select:ea,Option:Pp,Tag:Ml,Icon:oe,RadioGroup:I0,Radio:ms},emits:["on-change","update:modelValue"],props:{modelValue:{type:String},useName:{type:Boolean,default:!1},cities:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},placeholder:{type:String,default:"请选择"},searchPlaceholder:{type:String,default:"输入城市名称搜索"},transferClassName:{type:String}},data(){const v=Lf();return{currentValue:this.useName?Nf(v,this.modelValue):this.modelValue,visible:!1,provinceList:[],cityListByProvince:[],cityListByLetter:{},allCities:v,listType:"province",queryCity:""}},watch:{modelValue(v){const E=this.useName?Nf(this.allCities,v):v;this.currentValue=E}},computed:{showCloseIcon(){return this.currentValue&&this.clearable&&!this.itemDisabled},classes(){return[{"ivu-city-show-clear":this.showCloseIcon,[`ivu-city-size-${this.size}`]:!!this.size,"ivu-city-visible":this.visible,"ivu-city-disabled":this.itemDisabled}]},transferClasses(){let v="ivu-city-transfer";return this.transferClassName&&(v+=` ${this.transferClassName}`),v},relCities(){const v=[];return this.cities.length&&this.cities.forEach(E=>{const P=Ks[E];P.n=bc(P.n),v.push(P)}),v},codeToName(){if(!this.currentValue)return this.placeholder;const v=Ks[this.currentValue].n;return this.showSuffix?v:bc(v)}},methods:{handleSelect(v){v&&(this.handleChangeValue(v),c.nextTick(()=>{this.queryCity=""}))},handleChangeValue(v){this.currentValue=v,this.visible=!1;const E=this.useName?Rh(this.allCities,v):v;this.$emit("update:modelValue",E),this.$emit("on-change",Ks[v]),this.handleFormItemChange("change",v)},handleClickLetter(v){let E=v;E==="直辖市"?E="Z1":E==="港澳"&&(E="Z2");const P=`.ivu-city-${E}`,G=this.$refs.list,H=G.querySelectorAll(P)[0].offsetTop,N=G.offsetTop;G.scrollTop=H-N},clearSelect(){if(this.itemDisabled)return!1},handleToggleOpen(){if(this.itemDisabled)return!1;this.visible=!this.visible},handleVisibleChange(v){this.visible=v},handleClickOutside(v){this.$refs.city.contains(v.target)||(this.visible=!1)},handleGetProvinceByLetter(){const v={A:{n:"A",p:[],c:[]},F:{n:"F",p:[],c:[]},G:{n:"G",p:[],c:[]},H:{n:"H",p:[],c:[]},J:{n:"J",p:[],c:[]},L:{n:"L",p:[],c:[]},N:{n:"N",p:[],c:[]},Q:{n:"Q",p:[],c:[]},S:{n:"S",p:[],c:[]},T:{n:"T",p:[],c:[]},X:{n:"X",p:[],c:[]},Y:{n:"Y",p:[],c:[]},Z:{n:"Z",p:[],c:[]},Z1:{n:"直辖市",p:[],c:[]},Z2:{n:"港澳",p:[],c:[]}};for(let E in q0){const P=q0[E];v[P.l].p.push(P)}this.provinceList=v},handleGetCityByProvince(){const v=Te(this.provinceList),E=[],P=Te(Ks),G=[{p:{n:"直辖市",p:"86",l:"Z1"},c:[]},{p:{n:"港澳",p:"86",l:"Z2"},c:[]}];for(let H in v){const N=v[H];for(let ee=0;ee<N.p.length;ee++){const le=N.p[ee],Ce=le.c,pe={p:le,c:[]};for(let we in P){const We=P[we];We.n=bc(We.n),Ce===We.p&&pe.c.push(We)}H==="Z1"?G[0].c.push(P[Ce]):H==="Z2"?G[1].c.push(P[Ce]):E.push(pe)}}this.cityListByProvince=E.concat(G)},handleGetCityByLetter(){const v=Te(Ks),E={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],J:[],K:[],L:[],M:[],N:[],P:[],Q:[],R:[],S:[],T:[],W:[],X:[],Y:[],Z:[]};for(let P in v){const G=v[P];G.n=bc(G.n),E[G.l].push(G)}this.cityListByLetter=E}},created(){this.handleGetProvinceByLetter(),this.handleGetCityByProvince(),this.handleGetCityByLetter()}},Yp=["name","value"],ik={class:"ivu-city-drop"},ak={key:0,class:"ivu-city-drop-cities"},Yi=["onClick"],K0={class:"ivu-city-drop-menu"},Ih={class:"ivu-city-drop-type"},i_={class:"ivu-city-drop-search"},a_={key:1,class:"ivu-city-drop-list"},Of={class:"ivu-city-drop-list-letter"},kl={class:"ivu-city-drop-list-main",ref:"list"},Ai=["onClick"],cu={key:2,class:"ivu-city-drop-list"},s_={class:"ivu-city-drop-list-letter"},Rg={class:"ivu-city-drop-list-main ivu-city-drop-list-main-city",ref:"list"},l_=["onClick"];function X0(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Radio"),Ce=c.resolveComponent("RadioGroup"),pe=c.resolveComponent("Option"),we=c.resolveComponent("Select"),We=c.resolveComponent("Tag"),ut=c.resolveComponent("DropdownMenu"),ct=c.resolveComponent("Dropdown");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-city",N.classes]),ref:"city"},[c.createVNode(ct,{trigger:"custom",visible:H.visible,transfer:P.transfer,placement:"bottom-start","transfer-class-name":N.transferClasses,onOnVisibleChange:N.handleVisibleChange,onOnClickoutside:N.handleClickOutside},{list:c.withCtx(()=>[c.createVNode(ut,{onClick:E[3]||(E[3]=c.withModifiers(()=>{},["stop"]))},{default:c.withCtx(()=>[c.createElementVNode("div",ik,[P.cities.length?(c.openBlock(),c.createElementBlock("div",ak,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.relCities,ot=>(c.openBlock(),c.createElementBlock("span",{key:ot.n,onClick:Oe=>N.handleChangeValue(ot.c)},c.toDisplayString(ot.n),9,Yi))),128))])):c.createCommentVNode("",!0),c.createElementVNode("div",K0,[c.createElementVNode("div",Ih,[c.createVNode(Ce,{modelValue:H.listType,"onUpdate:modelValue":E[1]||(E[1]=ot=>H.listType=ot),type:"button",size:"small"},{default:c.withCtx(()=>[c.createVNode(le,{label:"province"},{default:c.withCtx(()=>[c.createTextVNode("按省份")]),_:1}),c.createVNode(le,{label:"city"},{default:c.withCtx(()=>[c.createTextVNode("按城市")]),_:1})]),_:1},8,["modelValue"])]),c.createElementVNode("div",i_,[c.createVNode(we,{modelValue:H.queryCity,"onUpdate:modelValue":E[2]||(E[2]=ot=>H.queryCity=ot),filterable:"",size:"small",transfer:"",placeholder:P.searchPlaceholder,onOnChange:N.handleSelect},{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.allCities,ot=>(c.openBlock(),c.createBlock(pe,{value:ot.c,key:ot.c},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(ot.n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","onOnChange"])])]),H.listType==="province"?(c.openBlock(),c.createElementBlock("div",a_,[c.createElementVNode("div",Of,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.provinceList,ot=>(c.openBlock(),c.createBlock(We,{onClick:Oe=>N.handleClickLetter(ot.n),type:"border",fade:!1,key:ot.n},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(ot.n),1)]),_:2},1032,["onClick"]))),128))]),c.createElementVNode("div",kl,[c.createElementVNode("dl",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.cityListByProvince,ot=>(c.openBlock(),c.createElementBlock(c.Fragment,{key:ot.p.n},[c.createElementVNode("dt",{class:c.normalizeClass("ivu-city-"+ot.p.l)},c.toDisplayString(ot.p.n)+"：",3),c.createElementVNode("dd",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ot.c,Oe=>(c.openBlock(),c.createElementBlock("li",{key:Oe.n,onClick:wt=>N.handleChangeValue(Oe.c)},c.toDisplayString(Oe.n),9,Ai))),128))])],64))),128))])],512)])):c.createCommentVNode("",!0),H.listType==="city"?(c.openBlock(),c.createElementBlock("div",cu,[c.createElementVNode("div",s_,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.cityListByLetter,(ot,Oe)=>(c.openBlock(),c.createBlock(We,{onClick:wt=>N.handleClickLetter(Oe),type:"border",fade:!1,key:Oe},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(Oe),1)]),_:2},1032,["onClick"]))),128))]),c.createElementVNode("div",Rg,[c.createElementVNode("dl",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.cityListByLetter,(ot,Oe)=>(c.openBlock(),c.createElementBlock(c.Fragment,{key:Oe},[c.createElementVNode("dt",{class:c.normalizeClass("ivu-city-"+Oe)},c.toDisplayString(Oe)+"：",3),c.createElementVNode("dd",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ot,wt=>(c.openBlock(),c.createElementBlock("li",{key:wt.n,onClick:Er=>N.handleChangeValue(wt.c)},c.toDisplayString(wt.n),9,l_))),128))])],64))),128))])],512)])):c.createCommentVNode("",!0)])]),_:1})]),default:c.withCtx(()=>[c.createElementVNode("div",{class:"ivu-city-rel",onClick:E[0]||(E[0]=c.withModifiers((...ot)=>N.handleToggleOpen&&N.handleToggleOpen(...ot),["prevent","stop"]))},[c.createElementVNode("input",{type:"hidden",name:P.name,value:H.currentValue},null,8,Yp),c.renderSlot(v.$slots,"default",{},()=>[c.createElementVNode("span",null,c.toDisplayString(N.codeToName),1),c.withDirectives(c.createVNode(ee,{type:"ios-close-circle",class:"ivu-city-arrow",onClick:c.withModifiers(N.clearSelect,["stop"])},null,8,["onClick"]),[[c.vShow,N.showCloseIcon]]),c.createVNode(ee,{type:"ios-arrow-down",class:"ivu-city-arrow"})])])]),_:3},8,["visible","transfer","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],2)}var Ig=$(ok,[["render",X0]]);const gw="ivu-collapse",$g={name:"Collapse",emits:["on-change","update:modelValue"],provide(){return{CollapseInstance:this}},props:{accordion:{type:Boolean,default:!1},modelValue:{type:[Array,String]},simple:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,panelCount:0}},computed:{classes(){return[`${gw}`,{[`${gw}-simple`]:this.simple}]}},methods:{getActiveKey(){let v=this.currentValue||[];const E=this.accordion;Array.isArray(v)||(v=[v]),E&&v.length>1&&(v=[v[0]]);for(let P=0;P<v.length;P++)v[P]=v[P].toString();return v},toggle(v){const E=v.name.toString();let P=[];if(this.accordion)v.isActive||P.push(E);else{let G=this.getActiveKey();const H=G.indexOf(E);v.isActive?H>-1&&G.splice(H,1):H<0&&G.push(E),P=G}this.currentValue=P,this.$emit("update:modelValue",P),this.$emit("on-change",P)}},watch:{modelValue(v){this.currentValue=v}}};function Lg(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.renderSlot(v.$slots,"default")],2)}var Sc=$($g,[["render",Lg]]),$h={exports:{}};(function(v){(function(E){var P=/^\s+/,G=/\s+$/,H=0,N=E.round,ee=E.min,le=E.max,Ce=E.random;function pe(je,xt){if(je=je||"",xt=xt||{},je instanceof pe)return je;if(!(this instanceof pe))return new pe(je,xt);var Qe=we(je);this._originalInput=je,this._r=Qe.r,this._g=Qe.g,this._b=Qe.b,this._a=Qe.a,this._roundA=N(100*this._a)/100,this._format=xt.format||Qe.format,this._gradientType=xt.gradientType,this._r<1&&(this._r=N(this._r)),this._g<1&&(this._g=N(this._g)),this._b<1&&(this._b=N(this._b)),this._ok=Qe.ok,this._tc_id=H++}pe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var je=this.toRgb();return(je.r*299+je.g*587+je.b*114)/1e3},getLuminance:function(){var je=this.toRgb(),xt,Qe,hn,Pn,Jn,Ao;return xt=je.r/255,Qe=je.g/255,hn=je.b/255,xt<=.03928?Pn=xt/12.92:Pn=E.pow((xt+.055)/1.055,2.4),Qe<=.03928?Jn=Qe/12.92:Jn=E.pow((Qe+.055)/1.055,2.4),hn<=.03928?Ao=hn/12.92:Ao=E.pow((hn+.055)/1.055,2.4),.2126*Pn+.7152*Jn+.0722*Ao},setAlpha:function(je){return this._a=Xr(je),this._roundA=N(100*this._a)/100,this},toHsv:function(){var je=ot(this._r,this._g,this._b);return{h:je.h*360,s:je.s,v:je.v,a:this._a}},toHsvString:function(){var je=ot(this._r,this._g,this._b),xt=N(je.h*360),Qe=N(je.s*100),hn=N(je.v*100);return this._a==1?"hsv("+xt+", "+Qe+"%, "+hn+"%)":"hsva("+xt+", "+Qe+"%, "+hn+"%, "+this._roundA+")"},toHsl:function(){var je=ut(this._r,this._g,this._b);return{h:je.h*360,s:je.s,l:je.l,a:this._a}},toHslString:function(){var je=ut(this._r,this._g,this._b),xt=N(je.h*360),Qe=N(je.s*100),hn=N(je.l*100);return this._a==1?"hsl("+xt+", "+Qe+"%, "+hn+"%)":"hsla("+xt+", "+Qe+"%, "+hn+"%, "+this._roundA+")"},toHex:function(je){return wt(this._r,this._g,this._b,je)},toHexString:function(je){return"#"+this.toHex(je)},toHex8:function(je){return Er(this._r,this._g,this._b,this._a,je)},toHex8String:function(je){return"#"+this.toHex8(je)},toRgb:function(){return{r:N(this._r),g:N(this._g),b:N(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+N(this._r)+", "+N(this._g)+", "+N(this._b)+")":"rgba("+N(this._r)+", "+N(this._g)+", "+N(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:N(Ir(this._r,255)*100)+"%",g:N(Ir(this._g,255)*100)+"%",b:N(Ir(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+N(Ir(this._r,255)*100)+"%, "+N(Ir(this._g,255)*100)+"%, "+N(Ir(this._b,255)*100)+"%)":"rgba("+N(Ir(this._r,255)*100)+"%, "+N(Ir(this._g,255)*100)+"%, "+N(Ir(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:rr[wt(this._r,this._g,this._b,!0)]||!1},toFilter:function(je){var xt="#"+ir(this._r,this._g,this._b,this._a),Qe=xt,hn=this._gradientType?"GradientType = 1, ":"";if(je){var Pn=pe(je);Qe="#"+ir(Pn._r,Pn._g,Pn._b,Pn._a)}return"progid:DXImageTransform.Microsoft.gradient("+hn+"startColorstr="+xt+",endColorstr="+Qe+")"},toString:function(je){var xt=!!je;je=je||this._format;var Qe=!1,hn=this._a<1&&this._a>=0,Pn=!xt&&hn&&(je==="hex"||je==="hex6"||je==="hex3"||je==="hex4"||je==="hex8"||je==="name");return Pn?je==="name"&&this._a===0?this.toName():this.toRgbString():(je==="rgb"&&(Qe=this.toRgbString()),je==="prgb"&&(Qe=this.toPercentageRgbString()),(je==="hex"||je==="hex6")&&(Qe=this.toHexString()),je==="hex3"&&(Qe=this.toHexString(!0)),je==="hex4"&&(Qe=this.toHex8String(!0)),je==="hex8"&&(Qe=this.toHex8String()),je==="name"&&(Qe=this.toName()),je==="hsl"&&(Qe=this.toHslString()),je==="hsv"&&(Qe=this.toHsvString()),Qe||this.toHexString())},clone:function(){return pe(this.toString())},_applyModification:function(je,xt){var Qe=je.apply(null,[this].concat([].slice.call(xt)));return this._r=Qe._r,this._g=Qe._g,this._b=Qe._b,this.setAlpha(Qe._a),this},lighten:function(){return this._applyModification(Cn,arguments)},brighten:function(){return this._applyModification(Pt,arguments)},darken:function(){return this._applyModification(Pr,arguments)},desaturate:function(){return this._applyModification(Wn,arguments)},saturate:function(){return this._applyModification(jt,arguments)},greyscale:function(){return this._applyModification(It,arguments)},spin:function(){return this._applyModification(cr,arguments)},_applyCombination:function(je,xt){return je.apply(null,[this].concat([].slice.call(xt)))},analogous:function(){return this._applyCombination(Yn,arguments)},complement:function(){return this._applyCombination(ar,arguments)},monochromatic:function(){return this._applyCombination(nr,arguments)},splitcomplement:function(){return this._applyCombination(Ln,arguments)},triad:function(){return this._applyCombination(uo,arguments)},tetrad:function(){return this._applyCombination(Tr,arguments)}},pe.fromRatio=function(je,xt){if(typeof je=="object"){var Qe={};for(var hn in je)je.hasOwnProperty(hn)&&(hn==="a"?Qe[hn]=je[hn]:Qe[hn]=za(je[hn]));je=Qe}return pe(je,xt)};function we(je){var xt={r:0,g:0,b:0},Qe=1,hn=null,Pn=null,Jn=null,Ao=!1,Lo=!1;return typeof je=="string"&&(je=pi(je)),typeof je=="object"&&(Zr(je.r)&&Zr(je.g)&&Zr(je.b)?(xt=We(je.r,je.g,je.b),Ao=!0,Lo=String(je.r).substr(-1)==="%"?"prgb":"rgb"):Zr(je.h)&&Zr(je.s)&&Zr(je.v)?(hn=za(je.s),Pn=za(je.v),xt=Oe(je.h,hn,Pn),Ao=!0,Lo="hsv"):Zr(je.h)&&Zr(je.s)&&Zr(je.l)&&(hn=za(je.s),Jn=za(je.l),xt=ct(je.h,hn,Jn),Ao=!0,Lo="hsl"),je.hasOwnProperty("a")&&(Qe=je.a)),Qe=Xr(Qe),{ok:Ao,format:je.format||Lo,r:ee(255,le(xt.r,0)),g:ee(255,le(xt.g,0)),b:ee(255,le(xt.b,0)),a:Qe}}function We(je,xt,Qe){return{r:Ir(je,255)*255,g:Ir(xt,255)*255,b:Ir(Qe,255)*255}}function ut(je,xt,Qe){je=Ir(je,255),xt=Ir(xt,255),Qe=Ir(Qe,255);var hn=le(je,xt,Qe),Pn=ee(je,xt,Qe),Jn,Ao,Lo=(hn+Pn)/2;if(hn==Pn)Jn=Ao=0;else{var si=hn-Pn;switch(Ao=Lo>.5?si/(2-hn-Pn):si/(hn+Pn),hn){case je:Jn=(xt-Qe)/si+(xt<Qe?6:0);break;case xt:Jn=(Qe-je)/si+2;break;case Qe:Jn=(je-xt)/si+4;break}Jn/=6}return{h:Jn,s:Ao,l:Lo}}function ct(je,xt,Qe){var hn,Pn,Jn;je=Ir(je,360),xt=Ir(xt,100),Qe=Ir(Qe,100);function Ao(Ua,Oc,ks){return ks<0&&(ks+=1),ks>1&&(ks-=1),ks<1/6?Ua+(Oc-Ua)*6*ks:ks<1/2?Oc:ks<2/3?Ua+(Oc-Ua)*(2/3-ks)*6:Ua}if(xt===0)hn=Pn=Jn=Qe;else{var Lo=Qe<.5?Qe*(1+xt):Qe+xt-Qe*xt,si=2*Qe-Lo;hn=Ao(si,Lo,je+1/3),Pn=Ao(si,Lo,je),Jn=Ao(si,Lo,je-1/3)}return{r:hn*255,g:Pn*255,b:Jn*255}}function ot(je,xt,Qe){je=Ir(je,255),xt=Ir(xt,255),Qe=Ir(Qe,255);var hn=le(je,xt,Qe),Pn=ee(je,xt,Qe),Jn,Ao,Lo=hn,si=hn-Pn;if(Ao=hn===0?0:si/hn,hn==Pn)Jn=0;else{switch(hn){case je:Jn=(xt-Qe)/si+(xt<Qe?6:0);break;case xt:Jn=(Qe-je)/si+2;break;case Qe:Jn=(je-xt)/si+4;break}Jn/=6}return{h:Jn,s:Ao,v:Lo}}function Oe(je,xt,Qe){je=Ir(je,360)*6,xt=Ir(xt,100),Qe=Ir(Qe,100);var hn=E.floor(je),Pn=je-hn,Jn=Qe*(1-xt),Ao=Qe*(1-Pn*xt),Lo=Qe*(1-(1-Pn)*xt),si=hn%6,Ua=[Qe,Ao,Jn,Jn,Lo,Qe][si],Oc=[Lo,Qe,Qe,Ao,Jn,Jn][si],ks=[Jn,Jn,Lo,Qe,Qe,Ao][si];return{r:Ua*255,g:Oc*255,b:ks*255}}function wt(je,xt,Qe,hn){var Pn=[Ii(N(je).toString(16)),Ii(N(xt).toString(16)),Ii(N(Qe).toString(16))];return hn&&Pn[0].charAt(0)==Pn[0].charAt(1)&&Pn[1].charAt(0)==Pn[1].charAt(1)&&Pn[2].charAt(0)==Pn[2].charAt(1)?Pn[0].charAt(0)+Pn[1].charAt(0)+Pn[2].charAt(0):Pn.join("")}function Er(je,xt,Qe,hn,Pn){var Jn=[Ii(N(je).toString(16)),Ii(N(xt).toString(16)),Ii(N(Qe).toString(16)),Ii(Nc(hn))];return Pn&&Jn[0].charAt(0)==Jn[0].charAt(1)&&Jn[1].charAt(0)==Jn[1].charAt(1)&&Jn[2].charAt(0)==Jn[2].charAt(1)&&Jn[3].charAt(0)==Jn[3].charAt(1)?Jn[0].charAt(0)+Jn[1].charAt(0)+Jn[2].charAt(0)+Jn[3].charAt(0):Jn.join("")}function ir(je,xt,Qe,hn){var Pn=[Ii(Nc(hn)),Ii(N(je).toString(16)),Ii(N(xt).toString(16)),Ii(N(Qe).toString(16))];return Pn.join("")}pe.equals=function(je,xt){return!je||!xt?!1:pe(je).toRgbString()==pe(xt).toRgbString()},pe.random=function(){return pe.fromRatio({r:Ce(),g:Ce(),b:Ce()})};function Wn(je,xt){xt=xt===0?0:xt||10;var Qe=pe(je).toHsl();return Qe.s-=xt/100,Qe.s=Ci(Qe.s),pe(Qe)}function jt(je,xt){xt=xt===0?0:xt||10;var Qe=pe(je).toHsl();return Qe.s+=xt/100,Qe.s=Ci(Qe.s),pe(Qe)}function It(je){return pe(je).desaturate(100)}function Cn(je,xt){xt=xt===0?0:xt||10;var Qe=pe(je).toHsl();return Qe.l+=xt/100,Qe.l=Ci(Qe.l),pe(Qe)}function Pt(je,xt){xt=xt===0?0:xt||10;var Qe=pe(je).toRgb();return Qe.r=le(0,ee(255,Qe.r-N(255*-(xt/100)))),Qe.g=le(0,ee(255,Qe.g-N(255*-(xt/100)))),Qe.b=le(0,ee(255,Qe.b-N(255*-(xt/100)))),pe(Qe)}function Pr(je,xt){xt=xt===0?0:xt||10;var Qe=pe(je).toHsl();return Qe.l-=xt/100,Qe.l=Ci(Qe.l),pe(Qe)}function cr(je,xt){var Qe=pe(je).toHsl(),hn=(Qe.h+xt)%360;return Qe.h=hn<0?360+hn:hn,pe(Qe)}function ar(je){var xt=pe(je).toHsl();return xt.h=(xt.h+180)%360,pe(xt)}function uo(je){var xt=pe(je).toHsl(),Qe=xt.h;return[pe(je),pe({h:(Qe+120)%360,s:xt.s,l:xt.l}),pe({h:(Qe+240)%360,s:xt.s,l:xt.l})]}function Tr(je){var xt=pe(je).toHsl(),Qe=xt.h;return[pe(je),pe({h:(Qe+90)%360,s:xt.s,l:xt.l}),pe({h:(Qe+180)%360,s:xt.s,l:xt.l}),pe({h:(Qe+270)%360,s:xt.s,l:xt.l})]}function Ln(je){var xt=pe(je).toHsl(),Qe=xt.h;return[pe(je),pe({h:(Qe+72)%360,s:xt.s,l:xt.l}),pe({h:(Qe+216)%360,s:xt.s,l:xt.l})]}function Yn(je,xt,Qe){xt=xt||6,Qe=Qe||30;var hn=pe(je).toHsl(),Pn=360/Qe,Jn=[pe(je)];for(hn.h=(hn.h-(Pn*xt>>1)+720)%360;--xt;)hn.h=(hn.h+Pn)%360,Jn.push(pe(hn));return Jn}function nr(je,xt){xt=xt||6;for(var Qe=pe(je).toHsv(),hn=Qe.h,Pn=Qe.s,Jn=Qe.v,Ao=[],Lo=1/xt;xt--;)Ao.push(pe({h:hn,s:Pn,v:Jn})),Jn=(Jn+Lo)%1;return Ao}pe.mix=function(je,xt,Qe){Qe=Qe===0?0:Qe||50;var hn=pe(je).toRgb(),Pn=pe(xt).toRgb(),Jn=Qe/100,Ao={r:(Pn.r-hn.r)*Jn+hn.r,g:(Pn.g-hn.g)*Jn+hn.g,b:(Pn.b-hn.b)*Jn+hn.b,a:(Pn.a-hn.a)*Jn+hn.a};return pe(Ao)},pe.readability=function(je,xt){var Qe=pe(je),hn=pe(xt);return(E.max(Qe.getLuminance(),hn.getLuminance())+.05)/(E.min(Qe.getLuminance(),hn.getLuminance())+.05)},pe.isReadable=function(je,xt,Qe){var hn=pe.readability(je,xt),Pn,Jn;switch(Jn=!1,Pn=va(Qe),Pn.level+Pn.size){case"AAsmall":case"AAAlarge":Jn=hn>=4.5;break;case"AAlarge":Jn=hn>=3;break;case"AAAsmall":Jn=hn>=7;break}return Jn},pe.mostReadable=function(je,xt,Qe){var hn=null,Pn=0,Jn,Ao,Lo,si;Qe=Qe||{},Ao=Qe.includeFallbackColors,Lo=Qe.level,si=Qe.size;for(var Ua=0;Ua<xt.length;Ua++)Jn=pe.readability(je,xt[Ua]),Jn>Pn&&(Pn=Jn,hn=pe(xt[Ua]));return pe.isReadable(je,hn,{level:Lo,size:si})||!Ao?hn:(Qe.includeFallbackColors=!1,pe.mostReadable(je,["#fff","#000"],Qe))};var Hr=pe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},rr=pe.hexNames=ao(Hr);function ao(je){var xt={};for(var Qe in je)je.hasOwnProperty(Qe)&&(xt[je[Qe]]=Qe);return xt}function Xr(je){return je=parseFloat(je),(isNaN(je)||je<0||je>1)&&(je=1),je}function Ir(je,xt){Ji(je)&&(je="100%");var Qe=Gs(je);return je=ee(xt,le(0,parseFloat(je))),Qe&&(je=parseInt(je*xt,10)/100),E.abs(je-xt)<1e-6?1:je%xt/parseFloat(xt)}function Ci(je){return ee(1,le(0,je))}function Io(je){return parseInt(je,16)}function Ji(je){return typeof je=="string"&&je.indexOf(".")!=-1&&parseFloat(je)===1}function Gs(je){return typeof je=="string"&&je.indexOf("%")!=-1}function Ii(je){return je.length==1?"0"+je:""+je}function za(je){return je<=1&&(je=je*100+"%"),je}function Nc(je){return E.round(parseFloat(je)*255).toString(16)}function yl(je){return Io(je)/255}var zn=function(){var je="[-\\+]?\\d+%?",xt="[-\\+]?\\d*\\.\\d+%?",Qe="(?:"+xt+")|(?:"+je+")",hn="[\\s|\\(]+("+Qe+")[,|\\s]+("+Qe+")[,|\\s]+("+Qe+")\\s*\\)?",Pn="[\\s|\\(]+("+Qe+")[,|\\s]+("+Qe+")[,|\\s]+("+Qe+")[,|\\s]+("+Qe+")\\s*\\)?";return{CSS_UNIT:new RegExp(Qe),rgb:new RegExp("rgb"+hn),rgba:new RegExp("rgba"+Pn),hsl:new RegExp("hsl"+hn),hsla:new RegExp("hsla"+Pn),hsv:new RegExp("hsv"+hn),hsva:new RegExp("hsva"+Pn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Zr(je){return!!zn.CSS_UNIT.exec(je)}function pi(je){je=je.replace(P,"").replace(G,"").toLowerCase();var xt=!1;if(Hr[je])je=Hr[je],xt=!0;else if(je=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Qe;return(Qe=zn.rgb.exec(je))?{r:Qe[1],g:Qe[2],b:Qe[3]}:(Qe=zn.rgba.exec(je))?{r:Qe[1],g:Qe[2],b:Qe[3],a:Qe[4]}:(Qe=zn.hsl.exec(je))?{h:Qe[1],s:Qe[2],l:Qe[3]}:(Qe=zn.hsla.exec(je))?{h:Qe[1],s:Qe[2],l:Qe[3],a:Qe[4]}:(Qe=zn.hsv.exec(je))?{h:Qe[1],s:Qe[2],v:Qe[3]}:(Qe=zn.hsva.exec(je))?{h:Qe[1],s:Qe[2],v:Qe[3],a:Qe[4]}:(Qe=zn.hex8.exec(je))?{r:Io(Qe[1]),g:Io(Qe[2]),b:Io(Qe[3]),a:yl(Qe[4]),format:xt?"name":"hex8"}:(Qe=zn.hex6.exec(je))?{r:Io(Qe[1]),g:Io(Qe[2]),b:Io(Qe[3]),format:xt?"name":"hex"}:(Qe=zn.hex4.exec(je))?{r:Io(Qe[1]+""+Qe[1]),g:Io(Qe[2]+""+Qe[2]),b:Io(Qe[3]+""+Qe[3]),a:yl(Qe[4]+""+Qe[4]),format:xt?"name":"hex8"}:(Qe=zn.hex3.exec(je))?{r:Io(Qe[1]+""+Qe[1]),g:Io(Qe[2]+""+Qe[2]),b:Io(Qe[3]+""+Qe[3]),format:xt?"name":"hex"}:!1}function va(je){var xt,Qe;return je=je||{level:"AA",size:"small"},xt=(je.level||"AA").toUpperCase(),Qe=(je.size||"small").toLowerCase(),xt!=="AA"&&xt!=="AAA"&&(xt="AA"),Qe!=="small"&&Qe!=="large"&&(Qe="small"),{level:xt,size:Qe}}v.exports?v.exports=pe:window.tinycolor=pe})(Math)})($h);var Zu=$h.exports,c_={inject:["ColorPickerInstance"],methods:{handleEscape(v){this.ColorPickerInstance.handleOnEscapeKeydown(v)}}},Lh={data(){return{prefixCls:"ivu-color-picker",inputPrefixCls:"ivu-input",iconPrefixCls:"ivu-icon",transferPrefixCls:"ivu-transfer"}}};function Bf(v,E){const P=Zu(v),{_a:G}=P;return G==null&&P.setAlpha(E||1),P}function vw(v,E){const P=E&&E.a;if(E){if(E.hsl)return Bf(E.hsl,P);if(E.hex&&E.hex.length>0)return Bf(E.hex,P)}return Bf(E,P)}function jp(v,E){const P=v===""?"#2d8cf0":v,G=vw(v,P),H=G.toHsl(),N=G.toHsv();return H.s===0&&(H.h=P.h||P.hsl&&P.hsl.h||E||0,N.h=H.h),N.v<.0164&&(N.h=P.h||P.hsv&&P.hsv.h||0,N.s=P.s||P.hsv&&P.hsv.s||0),H.l<.01&&(H.h=P.h||P.hsl&&P.hsl.h||0,H.s=P.s||P.hsl&&P.hsl.s||0),{hsl:H,hex:G.toHexString().toUpperCase(),rgba:G.toRgb(),hsv:N,oldHue:P.h||E||H.h,source:P.source,a:P.a||G.getAlpha()}}function Dl(v,E,P){return v<E?E:v>P?P:v}function Zp(v,E,P){return re(v,E)?P:0}function qp(v,E){return v.touches?v.touches[0][E]:0}function Kr(v){const{r:E,g:P,b:G,a:H}=v;return`rgba(${[E,P,G,H].join(",")})`}const tr={name:"RecommendedColors",mixins:[c_,Lh],emits:["picker-color","change"],props:{list:{type:Array,default:void 0}},data(){const v=Math.ceil(this.list.length/12),E=1;return{left:-E,right:E,up:-E,down:E,powerKey:"shiftKey",grid:{x:1,y:1},rows:v,columns:12}},computed:{hideClass(){return`${this.prefixCls}-hide`},linearIndex(){return this.getLinearIndex(this.grid)},currentCircle(){return this.$refs[`color-circle-${this.linearIndex}`][0]}},methods:{getLinearIndex(v){return this.columns*(v.y-1)+v.x-1},getMaxLimit(v){return v==="x"?this.columns:this.rows},handleArrow(v,E,P){v.preventDefault(),v.stopPropagation(),this.blurColor();const G=S({},this.grid);v[this.powerKey]?P<0?G[E]=1:G[E]=this.getMaxLimit(E):G[E]+=P;const H=this.getLinearIndex(G);H>=0&&H<this.list.length&&(this.grid[E]=Dl(G[E],1,this.getMaxLimit(E))),this.focusColor()},blurColor(){this.currentCircle.classList.add(this.hideClass)},focusColor(){this.currentCircle.classList.remove(this.hideClass)},handleEnter(v){this.handleClick(v,this.currentCircle)},handleClick(v,E){v.preventDefault(),v.stopPropagation(),this.$refs.reference.focus();const P=E||v.target,G=P.dataset.colorId||P.parentElement.dataset.colorId;if(G){this.blurColor();const H=Number(G)+1;this.grid.x=H%this.columns||this.columns,this.grid.y=Math.ceil(H/this.columns),this.focusColor(),this.$emit("picker-color",this.list[G]),this.$emit("change",{hex:this.list[G],source:"hex"})}},lineBreak(v,E){if(!E)return!1;const P=E+1;return P<v.length&&P%this.columns===0}}},zd=["data-color-id"],u_={key:0};function J0(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{ref:"reference",tabindex:"0",onClick:E[0]||(E[0]=(...ee)=>N.handleClick&&N.handleClick(...ee)),onKeydown:[E[1]||(E[1]=c.withKeys((...ee)=>v.handleEscape&&v.handleEscape(...ee),["esc"])),E[2]||(E[2]=c.withKeys((...ee)=>N.handleEnter&&N.handleEnter(...ee),["enter"])),E[3]||(E[3]=c.withKeys(ee=>N.handleArrow(ee,"x",H.left),["left"])),E[4]||(E[4]=c.withKeys(ee=>N.handleArrow(ee,"x",H.right),["right"])),E[5]||(E[5]=c.withKeys(ee=>N.handleArrow(ee,"y",H.up),["up"])),E[6]||(E[6]=c.withKeys(ee=>N.handleArrow(ee,"y",H.down),["down"]))],onBlur:E[7]||(E[7]=(...ee)=>N.blurColor&&N.blurColor(...ee)),onFocus:E[8]||(E[8]=(...ee)=>N.focusColor&&N.focusColor(...ee))},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.list,(ee,le)=>(c.openBlock(),c.createElementBlock(c.Fragment,{key:ee+":"+le},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-picker-colors-wrapper"])},[c.createElementVNode("div",{"data-color-id":le},[c.createElementVNode("div",{style:c.normalizeStyle({background:ee}),class:c.normalizeClass([v.prefixCls+"-picker-colors-wrapper-color"])},null,6),c.createElementVNode("div",{ref_for:!0,ref:"color-circle-"+le,class:c.normalizeClass([v.prefixCls+"-picker-colors-wrapper-circle",N.hideClass])},null,2)],8,zd)],2),N.lineBreak(P.list,le)?(c.openBlock(),c.createElementBlock("br",u_)):c.createCommentVNode("",!0)],64))),128))],544)}var sk=$(tr,[["render",J0]]),Ff={mixins:[c_],props:{focused:{type:Boolean,default:!1},value:{type:Object,default:void 0}},created(){this.focused&&setTimeout(()=>this.$el.focus(),1)},beforeUnmount(){this.unbindEventListeners()},methods:{handleLeft(v){this.handleSlide(v,this.left,"left")},handleRight(v){this.handleSlide(v,this.right,"right")},handleUp(v){this.handleSlide(v,this.up,"up")},handleDown(v){this.handleSlide(v,this.down,"down")},handleMouseDown(v){this.ColorPickerInstance.handleOnDragging(!0),this.handleChange(v,!0),R(window,"mousemove",this.handleChange),R(window,"mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){L(window,"mousemove",this.handleChange),L(window,"mouseup",this.handleMouseUp),setTimeout(()=>this.ColorPickerInstance.handleOnDragging(!1),1)},getLeft(v){if(!A)return;const{container:E}=this.$refs,P=E.getBoundingClientRect().left+window.pageXOffset;return(v.pageX||qp(v,"PageX"))-P},getTop(v){if(!A)return;const{container:E}=this.$refs,P=E.getBoundingClientRect().top+window.pageYOffset;return(v.pageY||qp(v,"PageY"))-P}}};const ui={name:"Saturation",mixins:[Ff,Lh],emits:["change"],data(){return{left:-.01,right:.01,up:.01,down:-.01,multiplier:10,powerKey:"shiftKey"}},computed:{bgColorStyle(){return{background:`hsl(${this.value.hsv.h}, 100%, 50%)`}},pointerStyle(){return{top:`${-(this.value.hsv.v*100)+1+100}%`,left:`${this.value.hsv.s*100}%`}}},methods:{change(v,E,P,G){this.$emit("change",{h:v,s:E,v:P,a:G,source:"hsva"})},handleSlide(v,E,P){v.preventDefault(),v.stopPropagation();const G=v[this.powerKey]?E*this.multiplier:E,{h:H,s:N,v:ee,a:le}=this.value.hsv,Ce=Dl(N+Zp(P,["left","right"],G),0,1),pe=Dl(ee+Zp(P,["up","down"],G),0,1);this.change(H,Ce,pe,le)},handleChange(v){v.preventDefault(),v.stopPropagation();const{clientWidth:E,clientHeight:P}=this.$refs.container,G=Dl(this.getLeft(v),0,E),H=Dl(this.getTop(v),0,P),N=G/E,ee=Dl(1-H/P,0,1);this.change(this.value.hsv.h,N,ee,this.value.hsv.a)},handleMouseDown(v){Ff.methods.handleMouseDown.call(this,v),R(window,"mouseup",this.handleChange)},unbindEventListeners(v){Ff.methods.unbindEventListeners.call(this,v),L(window,"mouseup",this.handleChange)}}};function d_(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([v.prefixCls+"-saturation-wrapper"]),tabindex:"0",onKeydown:[E[1]||(E[1]=c.withKeys((...ee)=>v.handleEscape&&v.handleEscape(...ee),["esc"])),E[3]||(E[3]=c.withKeys((...ee)=>v.handleLeft&&v.handleLeft(...ee),["left"])),E[4]||(E[4]=c.withKeys((...ee)=>v.handleRight&&v.handleRight(...ee),["right"])),E[5]||(E[5]=c.withKeys((...ee)=>v.handleUp&&v.handleUp(...ee),["up"])),E[6]||(E[6]=c.withKeys((...ee)=>v.handleDown&&v.handleDown(...ee),["down"]))],onClick:E[2]||(E[2]=ee=>v.$el.focus())},[c.createElementVNode("div",{ref:"container",style:c.normalizeStyle(N.bgColorStyle),class:c.normalizeClass([v.prefixCls+"-saturation"]),onMousedown:E[0]||(E[0]=(...ee)=>N.handleMouseDown&&N.handleMouseDown(...ee))},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-saturation--white"])},null,2),c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-saturation--black"])},null,2),c.createElementVNode("div",{style:c.normalizeStyle(N.pointerStyle),class:c.normalizeClass([v.prefixCls+"-saturation-pointer"])},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-saturation-circle"])},null,2)],6)],38)],34)}var rN=$(ui,[["render",d_]]);const h_={name:"Hue",mixins:[Ff,Lh],emits:["change"],data(){const v=.06944444444444445,E=20*v;return{left:-v,right:v,up:E,down:-E,powerKey:"shiftKey",percent:Dl(this.value.hsl.h*100/360,0,100)}},watch:{value(){this.percent=Dl(this.value.hsl.h*100/360,0,100)}},methods:{change(v){this.percent=Dl(v,0,100);const{h:E,s:P,l:G,a:H}=this.value.hsl,N=Dl(v/100*360,0,360);E!==N&&this.$emit("change",{h:N,s:P,l:G,a:H,source:"hsl"})},handleSlide(v,E){if(v.preventDefault(),v.stopPropagation(),v[this.powerKey]){this.change(E<0?0:100);return}this.change(this.percent+E)},handleChange(v){v.preventDefault(),v.stopPropagation();const E=this.getLeft(v);if(E<0){this.change(0);return}const{clientWidth:P}=this.$refs.container;if(E>P){this.change(100);return}this.change(E*100/P)}}};function Vt(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([v.prefixCls+"-hue"]),tabindex:"0",onClick:E[3]||(E[3]=ee=>v.$el.focus()),onKeydown:[E[4]||(E[4]=c.withKeys((...ee)=>v.handleEscape&&v.handleEscape(...ee),["esc"])),E[5]||(E[5]=c.withKeys((...ee)=>v.handleLeft&&v.handleLeft(...ee),["left"])),E[6]||(E[6]=c.withKeys((...ee)=>v.handleRight&&v.handleRight(...ee),["right"])),E[7]||(E[7]=c.withKeys((...ee)=>v.handleUp&&v.handleUp(...ee),["up"])),E[8]||(E[8]=c.withKeys((...ee)=>v.handleDown&&v.handleDown(...ee),["down"]))]},[c.createElementVNode("div",{ref:"container",class:c.normalizeClass([v.prefixCls+"-hue-container"]),onMousedown:E[0]||(E[0]=(...ee)=>v.handleMouseDown&&v.handleMouseDown(...ee)),onTouchmove:E[1]||(E[1]=(...ee)=>N.handleChange&&N.handleChange(...ee)),onTouchstart:E[2]||(E[2]=(...ee)=>N.handleChange&&N.handleChange(...ee))},[c.createElementVNode("div",{style:c.normalizeStyle({top:0,left:`${H.percent}%`}),class:c.normalizeClass([v.prefixCls+"-hue-pointer"])},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-hue-picker"])},null,2)],6)],34)],34)}var Q0=$(h_,[["render",Vt]]);const lk={name:"Alpha",mixins:[Ff,Lh],emits:["change"],data(){return{left:-1,right:1,up:10,down:-10,powerKey:"shiftKey"}},computed:{gradientStyle(){const{r:v,g:E,b:P}=this.value.rgba,G=Kr({r:v,g:E,b:P,a:0}),H=Kr({r:v,g:E,b:P,a:1});return{background:`linear-gradient(to right, ${G} 0%, ${H} 100%)`}}},methods:{change(v){const{h:E,s:P,l:G}=this.value.hsl,{a:H}=this.value;H!==v&&this.$emit("change",{h:E,s:P,l:G,a:v,source:"rgba"})},handleSlide(v,E){v.preventDefault(),v.stopPropagation(),this.change(Dl(v[this.powerKey]?E:Math.round(this.value.hsl.a*100+E)/100,0,1))},handleChange(v){v.preventDefault(),v.stopPropagation();const E=this.getLeft(v);if(E<0){this.change(0);return}const{clientWidth:P}=this.$refs.container;if(E>P){this.change(1);return}this.change(Math.round(E*100/P)/100)}}};function Ng(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([v.prefixCls+"-alpha"]),tabindex:"0",onClick:E[3]||(E[3]=ee=>v.$el.focus()),onKeydown:[E[4]||(E[4]=c.withKeys((...ee)=>v.handleEscape&&v.handleEscape(...ee),["esc"])),E[5]||(E[5]=c.withKeys((...ee)=>v.handleLeft&&v.handleLeft(...ee),["left"])),E[6]||(E[6]=c.withKeys((...ee)=>v.handleRight&&v.handleRight(...ee),["right"])),E[7]||(E[7]=c.withKeys((...ee)=>v.handleUp&&v.handleUp(...ee),["up"])),E[8]||(E[8]=c.withKeys((...ee)=>v.handleDown&&v.handleDown(...ee),["down"]))]},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-alpha-checkboard-wrap"])},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-alpha-checkerboard"])},null,2)],2),c.createElementVNode("div",{style:c.normalizeStyle(N.gradientStyle),class:c.normalizeClass([v.prefixCls+"-alpha-gradient"])},null,6),c.createElementVNode("div",{ref:"container",class:c.normalizeClass([v.prefixCls+"-alpha-container"]),onMousedown:E[0]||(E[0]=(...ee)=>v.handleMouseDown&&v.handleMouseDown(...ee)),onTouchmove:E[1]||(E[1]=(...ee)=>N.handleChange&&N.handleChange(...ee)),onTouchstart:E[2]||(E[2]=(...ee)=>N.handleChange&&N.handleChange(...ee))},[c.createElementVNode("div",{style:c.normalizeStyle({top:0,left:`${v.value.a*100}%`}),class:c.normalizeClass([v.prefixCls+"-alpha-pointer"])},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-alpha-picker"])},null,2)],6)],34)],34)}var ck=$(lk,[["render",Ng]]);const Kp={name:"ColorPicker",components:{Drop:Lr,RecommendColors:sk,Saturation:rN,Hue:Q0,Alpha:ck,iInput:Sl,iButton:Oi,Icon:oe},directives:{clickOutside:Li},mixins:[vt,Lh,Mo,zt],emits:["on-active-change","on-open-change","on-change","on-pick-success","on-pick-clear","update:modelValue"],provide(){return{ColorPickerInstance:this}},props:{modelValue:{type:String,default:void 0},hue:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},recommend:{type:Boolean,default:!1},format:{type:String,validator(v){return re(v,["hsl","hsv","hex","rgb"])},default:void 0},colors:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},hideDropDown:{type:Boolean,default:!1},placement:{type:String,validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},name:{type:String,default:void 0},editable:{type:Boolean,default:!0},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{val:jp(this.modelValue||""),currentValue:this.modelValue||"",dragging:!1,visible:!1,recommendedColor:["#2d8cf0","#19be6b","#ff9900","#ed4014","#00b5ff","#19c919","#f9e31c","#ea1a1a","#9b1dea","#00c2b1","#ac7a33","#1d35ea","#8bc34a","#f16b62","#ea4ca3","#0d94aa","#febd79","#5d4037","#00bcd4","#f06292","#cddc39","#607d8b","#000000","#ffffff"]}},computed:{arrowClasses(){return[`${this.inputPrefixCls}-icon`,`${this.inputPrefixCls}-icon-normal`]},transition(){return re(this.placement,["bottom-start","bottom","bottom-end"])?"slide-up":"fade"},saturationColors:{get(){return this.val},set(v){this.val=v,this.$emit("on-active-change",this.formatColor)}},classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-transfer`]:this.transfer}]},wrapClasses(){return[`${this.prefixCls}-rel`,`${this.prefixCls}-${this.size}`,`${this.inputPrefixCls}-wrapper`,`${this.inputPrefixCls}-wrapper-${this.size}`,{[`${this.prefixCls}-disabled`]:this.itemDisabled}]},inputClasses(){return[`${this.prefixCls}-input`,`${this.inputPrefixCls}`,`${this.inputPrefixCls}-${this.size}`,{[`${this.prefixCls}-focused`]:this.visible,[`${this.prefixCls}-disabled`]:this.itemDisabled}]},dropClasses(){return{[`${this.transferPrefixCls}-no-max-height`]:!0,[`${this.prefixCls}-transfer`]:this.transfer,[`${this.prefixCls}-hide-drop`]:this.hideDropDown,[this.transferClassName]:this.transferClassName}},displayedColorStyle(){return{backgroundColor:Kr(this.visible?this.saturationColors.rgba:Zu(this.modelValue).toRgb())}},formatColor(){const{format:v,saturationColors:E}=this;if(v){if(v==="hsl")return Zu(E.hsl).toHslString();if(v==="hsv")return Zu(E.hsv).toHsvString();if(v==="hex")return E.hex;if(v==="rgb")return Kr(E.rgba)}else if(this.alpha)return Kr(E.rgba);return E.hex},confirmColorClasses(){return[`${this.prefixCls}-confirm-color`,{[`${this.prefixCls}-confirm-color-editable`]:this.editable}]},arrowType(){const v=this.globalConfig;let E="ios-arrow-down";return v&&(v.colorPicker.customArrow?E="":v.colorPicker.arrow&&(E=v.colorPicker.arrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.colorPicker.customArrow&&(E=v.colorPicker.customArrow),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.colorPicker.arrowSize&&(E=v.colorPicker.arrowSize),E}},watch:{modelValue(v){this.val=jp(v||"")},visible(v){this.val=jp(this.modelValue||""),this.$refs.drop[v?"update":"destroy"](),this.$emit("on-open-change",!!v)}},methods:{setDragging(v){this.dragging=v},handleClose(v){if(this.visible){if(this.dragging||v.type==="mousedown"){this.$refs.editColorInput&&v.target!==this.$refs.editColorInput.$el.querySelector("input")&&v.preventDefault();return}if(this.transfer){const E=this.$refs.drop.$refs.drop;if(E===v.target||E.contains(v.target))return}this.closer(v);return}this.visible=!1},toggleVisible(){this.itemDisabled||(this.visible=!this.visible,this.$refs.input.focus())},childChange(v){this.colorChange(v)},colorChange(v,E){this.oldHue=this.saturationColors.hsl.h,this.saturationColors=jp(v,E||this.oldHue)},closer(v){v&&(v.preventDefault(),v.stopPropagation()),this.visible=!1,this.$refs.input.focus()},handleButtons(v,E){this.currentValue=E,this.$emit("update:modelValue",E),this.$emit("on-change",E),this.handleFormItemChange("change",E),this.closer(v)},handleSuccess(v){this.handleButtons(v,this.formatColor),this.$emit("on-pick-success")},handleClear(v){this.handleButtons(v,""),this.$emit("on-pick-clear")},handleSelectColor(v){this.val=jp(v),this.$emit("on-active-change",this.formatColor)},handleEditColor(v){const E=v.target.value;this.handleSelectColor(E)},handleFirstTab(v){v.shiftKey&&(v.preventDefault(),v.stopPropagation(),this.$refs.ok.$el.focus())},handleLastTab(v){v.shiftKey||(v.preventDefault(),v.stopPropagation(),this.$refs.saturation.$el.focus())},onTab(v){this.visible&&v.preventDefault()},onEscape(v){this.visible&&this.closer(v)},onArrow(v){this.visible||(v.preventDefault(),v.stopPropagation(),this.visible=!0)},handleOnEscapeKeydown(v){this.closer(v)},handleOnDragging(v){this.setDragging(v)}}},f_=["name","value"],Ud=["tabindex"];function uk(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Saturation"),Ce=c.resolveComponent("Hue"),pe=c.resolveComponent("Alpha"),we=c.resolveComponent("recommend-colors"),We=c.resolveComponent("i-input"),ut=c.resolveComponent("i-button"),ct=c.resolveComponent("Drop"),ot=c.resolveDirective("click-outside");return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("div",{ref:"reference",class:c.normalizeClass(N.wrapClasses),onClick:E[4]||(E[4]=(...Oe)=>N.toggleVisible&&N.toggleVisible(...Oe))},[c.createElementVNode("input",{name:P.name,value:H.currentValue,type:"hidden"},null,8,f_),c.createVNode(ee,{type:N.arrowType,custom:N.customArrowType,size:N.arrowSize,class:c.normalizeClass(N.arrowClasses)},null,8,["type","custom","size","class"]),c.createElementVNode("div",{ref:"input",tabindex:v.itemDisabled?void 0:0,class:c.normalizeClass(N.inputClasses),onKeydown:[E[0]||(E[0]=c.withKeys((...Oe)=>N.onTab&&N.onTab(...Oe),["tab"])),E[1]||(E[1]=c.withKeys((...Oe)=>N.onEscape&&N.onEscape(...Oe),["esc"])),E[2]||(E[2]=c.withKeys((...Oe)=>N.onArrow&&N.onArrow(...Oe),["up"])),E[3]||(E[3]=c.withKeys((...Oe)=>N.onArrow&&N.onArrow(...Oe),["down"]))]},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-color"])},[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-color-empty"])},[c.createElementVNode("i",{class:c.normalizeClass([v.iconPrefixCls,v.iconPrefixCls+"-ios-close"])},null,2)],2),[[c.vShow,P.modelValue===""&&!H.visible]]),c.withDirectives(c.createElementVNode("div",{style:c.normalizeStyle(N.displayedColorStyle)},null,4),[[c.vShow,P.modelValue||H.visible]])],2)],42,Ud)],2),c.createVNode(ct,{ref:"drop",visible:H.visible,placement:P.placement,transfer:P.transfer,classes:N.dropClasses,eventsEnabled:P.eventsEnabled,"transition-name":"transition-drop"},{default:c.withCtx(()=>[c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[H.visible?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([v.prefixCls+"-picker"])},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-picker-wrapper"])},[c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-picker-panel"])},[c.createVNode(le,{ref:"saturation",value:N.saturationColors,focused:H.visible,onChange:N.childChange,onKeydown:c.withKeys(N.handleFirstTab,["tab"])},null,8,["value","focused","onChange","onKeydown"])],2),P.hue?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([v.prefixCls+"-picker-hue-slider"])},[c.createVNode(Ce,{value:N.saturationColors,onChange:N.childChange},null,8,["value","onChange"])],2)):c.createCommentVNode("",!0),P.alpha?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass([v.prefixCls+"-picker-alpha-slider"])},[c.createVNode(pe,{value:N.saturationColors,onChange:N.childChange},null,8,["value","onChange"])],2)):c.createCommentVNode("",!0),P.colors.length?(c.openBlock(),c.createBlock(we,{key:2,list:P.colors,class:c.normalizeClass([v.prefixCls+"-picker-colors"]),onPickerColor:N.handleSelectColor},null,8,["list","class","onPickerColor"])):c.createCommentVNode("",!0),!P.colors.length&&P.recommend?(c.openBlock(),c.createBlock(we,{key:3,list:H.recommendedColor,class:c.normalizeClass([v.prefixCls+"-picker-colors"]),onPickerColor:N.handleSelectColor},null,8,["list","class","onPickerColor"])):c.createCommentVNode("",!0)],2),c.createElementVNode("div",{class:c.normalizeClass([v.prefixCls+"-confirm"])},[c.createElementVNode("span",{class:c.normalizeClass(N.confirmColorClasses)},[P.editable?(c.openBlock(),c.createBlock(We,{key:0,ref:"editColorInput",modelValue:N.formatColor,size:"small",onOnEnter:N.handleEditColor,onOnBlur:N.handleEditColor},null,8,["modelValue","onOnEnter","onOnBlur"])):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode(c.toDisplayString(N.formatColor),1)],64))],2),c.createVNode(ut,{class:c.normalizeClass([v.prefixCls+"-confirm-btn-cancel"]),ref:"clear",tabindex:0,size:"small",onClick:N.handleClear,onKeydown:[c.withKeys(N.handleClear,["enter"]),c.withKeys(N.closer,["esc"])]},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(v.t("i.datepicker.clear")),1)]),_:1},8,["class","onClick","onKeydown"]),c.createVNode(ut,{ref:"ok",tabindex:0,size:"small",type:"primary",onClick:N.handleSuccess,onKeydown:[c.withKeys(N.handleLastTab,["tab"]),c.withKeys(N.handleSuccess,["enter"]),c.withKeys(N.closer,["esc"])]},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(v.t("i.datepicker.ok")),1)]),_:1},8,["onClick","onKeydown"])],2)],2)):c.createCommentVNode("",!0)]),_:1})]),_:1},8,["visible","placement","transfer","classes","eventsEnabled"])],2)),[[ot,N.handleClose,P.capture]])}var qu=$(Kp,[["render",uk]]);const ii="ivu-layout",Ku={name:"Content",computed:{wrapClasses(){return`${ii}-content`}}};function dk(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[c.renderSlot(v.$slots,"default")],2)}var uu=$(Ku,[["render",dk]]);function Vf(v){var E;if(v.nodeName==="SELECT")v.focus(),E=v.value;else if(v.nodeName==="INPUT"||v.nodeName==="TEXTAREA"){var P=v.hasAttribute("readonly");P||v.setAttribute("readonly",""),v.select(),v.setSelectionRange(0,v.value.length),P||v.removeAttribute("readonly"),E=v.value}else{v.hasAttribute("contenteditable")&&v.focus();var G=window.getSelection(),H=document.createRange();H.selectNodeContents(v),G.removeAllRanges(),G.addRange(H),E=G.toString()}return E}var p_=Vf,zf={name:"RenderCell",props:{render:Function},render(){return this.render(c.h)}};const yw={components:{RenderCell:zf},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(v){this.type==="message"&&(v.style.height=v.scrollHeight+"px")},handleLeave(v){this.type==="message"&&A&&document.getElementsByClassName("ivu-message-notice").length!==1&&(v.style.height=0,v.style.paddingTop=0,v.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let v=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:v?v.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},ey=["innerHTML"],bw=[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)],hk=["innerHTML"],_w=[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)];function Xu(v,E,P,G,H,N){const ee=c.resolveComponent("render-cell");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(P.styles)},[P.type==="notice"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses),ref:"content",innerHTML:P.content},null,10,ey),c.createElementVNode("div",{class:c.normalizeClass(N.contentWithIcon)},[c.createVNode(ee,{render:N.renderFunc},null,8,["render"])],2),P.closable?(c.openBlock(),c.createElementBlock("a",{key:0,class:c.normalizeClass([N.baseClass+"-close"]),onClick:E[0]||(E[0]=(...le)=>N.close&&N.close(...le))},bw,2)):c.createCommentVNode("",!0)],64)):c.createCommentVNode("",!0),P.type==="message"?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass(N.messageContentClasses),ref:"content"},[c.createElementVNode("div",{class:c.normalizeClass([N.baseClass+"-content-text"]),innerHTML:P.content},null,10,hk),c.createElementVNode("div",{class:c.normalizeClass([N.baseClass+"-content-text"])},[c.createVNode(ee,{render:N.renderFunc},null,8,["render"])],2),P.closable?(c.openBlock(),c.createElementBlock("a",{key:0,class:c.normalizeClass([N.baseClass+"-close"]),onClick:E[1]||(E[1]=(...le)=>N.close&&N.close(...le))},_w,2)):c.createCommentVNode("",!0)],2)):c.createCommentVNode("",!0)],6)}var oN=$(yw,[["render",Xu]]);const iN="ivu-notification";let Nh=0;const qa=Date.now();function In(){return"ivuNotification_"+qa+"_"+Nh++}const fk={components:{Notice:oN},props:{prefixCls:{type:String,default:iN},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let v=Object.assign({},this.styles);return v["z-index"]=1010+this.tIndex,v}},methods:{add(v){const E=v.name||In();let P=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:E},v);this.notices.push(P),this.tIndex=this.handleGetIndex()},close(v){const E=this.notices;for(let P=0;P<E.length;P++)if(E[P].name===v){this.notices.splice(P,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return gn(),Zn}}};function pk(v,E,P,G,H,N){const ee=c.resolveComponent("Notice");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.wrapStyles)},[c.createVNode(c.TransitionGroup,{name:P.transitionName,appear:""},{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.notices,le=>(c.openBlock(),c.createBlock(ee,{key:le.name,"prefix-cls":P.prefixCls,styles:le.styles,type:le.type,content:le.content,duration:le.duration,render:le.render,"has-title":le.hasTitle,withIcon:le.withIcon,closable:le.closable,name:le.name,"transition-name":le.transitionName,background:le.background,"msg-type":le.msgType,"on-close":le.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}var ty=$(fk,[["render",pk]]);ty.newInstance=v=>{if(!A)return;const E=v||{};let P=null;const G=c.createApp({render(){return c.h(ty,Object.assign({ref:"notification"},E))},created(){P=c.getCurrentInstance()}}),H=document.createElement("div");document.body.appendChild(H),G.mount(H);const N=P.refs.notification;return{notice(ee){N.add(ee)},remove(ee){N.close(ee)},component:N,destroy(ee){N.closeAll(),A&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(ee)[0])},500)}}};const ny="ivu-message",Sw="ivu-icon",ry="ivu_message_key_",Ju={top:24,duration:1.5,background:!1};let Hd,Og=1;const Oh={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},xc="move-up";function oy(){return Hd=Hd||ty.newInstance({prefixCls:ny,styles:{top:`${Ju.top}px`},transitionName:xc}),Hd}function iy(v="",E=Ju.duration,P,G=function(){},H=!1,N=function(){},ee=Ju.background){const le=Oh[P],Ce=P==="loading"?" ivu-load-loop":"";let pe=oy();return pe.notice({name:`${ry}${Og}`,duration:E,styles:{},transitionName:xc,content:`
            <div class="${ny}-custom-content ${ny}-${P}">
                <i class="${Sw} ${Sw}-${le} ${Ce}"></i>
                <span>${v}</span>
            </div>
        `,render:N,onClose:G,closable:H,type:"message",msgType:P,background:ee}),function(){let we=Og++;return function(){pe.remove(`${ry}${we}`)}}()}var Bh={name:"Message",info(v){return this.message("info",v)},success(v){return this.message("success",v)},warning(v){return this.message("warning",v)},error(v){return this.message("error",v)},loading(v){return this.message("loading",v)},message(v,E){return typeof E=="string"&&(E={content:E}),iy(E.content,E.duration,v,E.onClose,E.closable,E.render,E.background)},config(v){(v.top||v.top===0)&&(Ju.top=v.top),(v.duration||v.duration===0)&&(Ju.duration=v.duration),v.background&&(Ju.background=v.background)},destroy(){let v=oy();Hd=null,v.destroy("ivu-message")}};const xw="复制成功",Xp="复制失败";function Cc({text:v="",successTip:E=xw,errorTip:P=Xp,success:G,error:H,showTip:N=!0}){if(!A)return;const ee=document.documentElement.getAttribute("dir")==="rtl",le=document.createElement("textarea");le.style.fontSize="12pt",le.style.border="0",le.style.padding="0",le.style.margin="0",le.style.position="absolute",le.style[ee?"right":"left"]="-9999px";let Ce=window.pageYOffset||document.documentElement.scrollTop;le.style.top=`${Ce}px`,le.setAttribute("readonly",""),le.value=v,document.body.appendChild(le),p_(le);let pe;try{pe=document.execCommand("copy"),N&&Bh.success({content:E}),document.body.removeChild(le),G&&G.call()}catch{pe=!1,N&&Bh.error({content:P}),document.body.removeChild(le),H&&H.call()}}function m_(v){return v*1<10?`0${v}`:v}const Cw={name:"CountDown",emits:["on-end"],props:{format:{type:Function},target:{type:[Date,Number]},interval:{type:Number,default:1e3}},data(){return{lastTime:""}},methods:{initTime(){let v=0,E=0;try{Object.prototype.toString.call(this.target)==="[object Date]"?E=this.target.getTime():E=new Date(this.target).getTime()}catch(P){throw new Error("invalid target prop",P)}return v=E-new Date().getTime(),v<0?0:v},tick(){let{lastTime:v}=this;this.timer=setTimeout(()=>{v<this.interval?(clearTimeout(this.timer),this.lastTime=0,this.$emit("on-end")):(v-=this.interval,this.lastTime=v,this.tick())},this.interval)},defaultFormat(v){const E=Math.floor(v/36e5),P=Math.floor((v-E*36e5)/6e4),G=Math.floor((v-E*36e5-P*6e4)/1e3);return`${m_(E)}:${m_(P)}:${m_(G)}`}},computed:{result(){const{format:v=this.defaultFormat}=this;return v(this.lastTime)}},watch:{target(){this.timer&&clearTimeout(this.timer),this.lastTime=this.initTime(),this.tick()}},created(){this.lastTime=this.initTime()},mounted(){this.tick()},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};function Jp(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",null,c.toDisplayString(N.result),1)}var wc=$(Cw,[["render",Jp]]),Xs={exports:{}};(function(v,E){(function(P,G){v.exports=G(xn,E,v)})(Wt,function(P,G,H){var N=function(ee,le,Ce,pe,we,We){function ut(jt){var It,Cn,Pt,Pr,cr,ar,uo=jt<0;if(jt=Math.abs(jt).toFixed(Oe.decimals),jt+="",It=jt.split("."),Cn=It[0],Pt=It.length>1?Oe.options.decimal+It[1]:"",Oe.options.useGrouping){for(Pr="",cr=0,ar=Cn.length;cr<ar;++cr)cr!==0&&cr%3===0&&(Pr=Oe.options.separator+Pr),Pr=Cn[ar-cr-1]+Pr;Cn=Pr}return Oe.options.numerals.length&&(Cn=Cn.replace(/[0-9]/g,function(Tr){return Oe.options.numerals[+Tr]}),Pt=Pt.replace(/[0-9]/g,function(Tr){return Oe.options.numerals[+Tr]})),(uo?"-":"")+Oe.options.prefix+Cn+Pt+Oe.options.suffix}function ct(jt,It,Cn,Pt){return Cn*(-Math.pow(2,-10*jt/Pt)+1)*1024/1023+It}function ot(jt){return typeof jt=="number"&&!isNaN(jt)}var Oe=this;if(Oe.version=function(){return"1.9.3"},Oe.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:ct,formattingFn:ut,prefix:"",suffix:"",numerals:[]},We&&typeof We=="object")for(var wt in Oe.options)We.hasOwnProperty(wt)&&We[wt]!==null&&(Oe.options[wt]=We[wt]);Oe.options.separator===""?Oe.options.useGrouping=!1:Oe.options.separator=""+Oe.options.separator;for(var Er=0,ir=["webkit","moz","ms","o"],Wn=0;Wn<ir.length&&!window.requestAnimationFrame;++Wn)window.requestAnimationFrame=window[ir[Wn]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ir[Wn]+"CancelAnimationFrame"]||window[ir[Wn]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(jt,It){var Cn=new Date().getTime(),Pt=Math.max(0,16-(Cn-Er)),Pr=window.setTimeout(function(){jt(Cn+Pt)},Pt);return Er=Cn+Pt,Pr}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(jt){clearTimeout(jt)}),Oe.initialize=function(){return!!Oe.initialized||(Oe.error="",Oe.d=typeof ee=="string"?document.getElementById(ee):ee,Oe.d?(Oe.startVal=Number(le),Oe.endVal=Number(Ce),ot(Oe.startVal)&&ot(Oe.endVal)?(Oe.decimals=Math.max(0,pe||0),Oe.dec=Math.pow(10,Oe.decimals),Oe.duration=1e3*Number(we)||2e3,Oe.countDown=Oe.startVal>Oe.endVal,Oe.frameVal=Oe.startVal,Oe.initialized=!0,!0):(Oe.error="[CountUp] startVal ("+le+") or endVal ("+Ce+") is not a number",!1)):(Oe.error="[CountUp] target is null or undefined",!1))},Oe.printValue=function(jt){var It=Oe.options.formattingFn(jt);Oe.d.tagName==="INPUT"?this.d.value=It:Oe.d.tagName==="text"||Oe.d.tagName==="tspan"?this.d.textContent=It:this.d.innerHTML=It},Oe.count=function(jt){Oe.startTime||(Oe.startTime=jt),Oe.timestamp=jt;var It=jt-Oe.startTime;Oe.remaining=Oe.duration-It,Oe.options.useEasing?Oe.countDown?Oe.frameVal=Oe.startVal-Oe.options.easingFn(It,0,Oe.startVal-Oe.endVal,Oe.duration):Oe.frameVal=Oe.options.easingFn(It,Oe.startVal,Oe.endVal-Oe.startVal,Oe.duration):Oe.countDown?Oe.frameVal=Oe.startVal-(Oe.startVal-Oe.endVal)*(It/Oe.duration):Oe.frameVal=Oe.startVal+(Oe.endVal-Oe.startVal)*(It/Oe.duration),Oe.countDown?Oe.frameVal=Oe.frameVal<Oe.endVal?Oe.endVal:Oe.frameVal:Oe.frameVal=Oe.frameVal>Oe.endVal?Oe.endVal:Oe.frameVal,Oe.frameVal=Math.round(Oe.frameVal*Oe.dec)/Oe.dec,Oe.printValue(Oe.frameVal),It<Oe.duration?Oe.rAF=requestAnimationFrame(Oe.count):Oe.callback&&Oe.callback()},Oe.start=function(jt){Oe.initialize()&&(Oe.callback=jt,Oe.rAF=requestAnimationFrame(Oe.count))},Oe.pauseResume=function(){Oe.paused?(Oe.paused=!1,delete Oe.startTime,Oe.duration=Oe.remaining,Oe.startVal=Oe.frameVal,requestAnimationFrame(Oe.count)):(Oe.paused=!0,cancelAnimationFrame(Oe.rAF))},Oe.reset=function(){Oe.paused=!1,delete Oe.startTime,Oe.initialized=!1,Oe.initialize()&&(cancelAnimationFrame(Oe.rAF),Oe.printValue(Oe.startVal))},Oe.update=function(jt){if(Oe.initialize()){if(jt=Number(jt),!ot(jt))return void(Oe.error="[CountUp] update() - new endVal is not a number: "+jt);Oe.error="",jt!==Oe.frameVal&&(cancelAnimationFrame(Oe.rAF),Oe.paused=!1,delete Oe.startTime,Oe.startVal=Oe.frameVal,Oe.endVal=jt,Oe.countDown=Oe.startVal>Oe.endVal,Oe.rAF=requestAnimationFrame(Oe.count))}},Oe.initialize()&&Oe.printValue(Oe.startVal)};return N})})(Xs,Xs.exports);var mk=Xs.exports;const ww={name:"CountUp",props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1,default(){return{}}},callback:{type:Function,required:!1,default:()=>{}}},data(){return{CountUp:null}},watch:{end(v){this.CountUp&&this.CountUp.update&&this.CountUp.update(v)}},mounted(){this.init()},methods:{init(){this.CountUp||(this.CountUp=new mk(this.$el,this.start,this.end,this.decimals,this.duration,this.options),this.CountUp.start(()=>{this.callback(this.CountUp)}))},destroy(){this.CountUp=null}},beforeUnmounted(){this.destroy()},start(v){this.CountUp&&this.CountUp.start&&this.CountUp.start(()=>{v&&v(this.CountUp)})},pauseResume(){this.CountUp&&this.CountUp.pauseResume&&this.CountUp.pauseResume()},reset(){this.CountUp&&this.CountUp.reset&&this.CountUp.reset()},update(v){this.CountUp&&this.CountUp.update&&this.CountUp.update(v)}},Ew={class:"ivu-count-up"};function g_(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",Ew)}var Ql=$(ww,[["render",g_]]),al={},ay=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Uf=/\d\d?/,gk=/\d{3}/,vk=/\d{4}/,sy=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Bg=function(){};function ly(v,E){for(var P=[],G=0,H=v.length;G<H;G++)P.push(v[G].substr(0,E));return P}function Tw(v){return function(E,P,G){var H=G[v].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~H&&(E.month=H)}}function Qu(v,E){for(v=String(v),E=E||2;v.length<E;)v="0"+v;return v}var cy=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Fg=["January","February","March","April","May","June","July","August","September","October","November","December"],yk=ly(Fg,3),Vg=ly(cy,3);al.i18n={dayNamesShort:Vg,dayNames:cy,monthNamesShort:yk,monthNames:Fg,amPm:["am","pm"],DoFn:function(v){return v+["th","st","nd","rd"][v%10>3?0:(v-v%10!==10)*v%10]}};var Aw={D:function(v){return v.getDay()},DD:function(v){return Qu(v.getDay())},Do:function(v,E){return E.DoFn(v.getDate())},d:function(v){return v.getDate()},dd:function(v){return Qu(v.getDate())},ddd:function(v,E){return E.dayNamesShort[v.getDay()]},dddd:function(v,E){return E.dayNames[v.getDay()]},M:function(v){return v.getMonth()+1},MM:function(v){return Qu(v.getMonth()+1)},MMM:function(v,E){return E.monthNamesShort[v.getMonth()]},MMMM:function(v,E){return E.monthNames[v.getMonth()]},yy:function(v){return String(v.getFullYear()).substr(2)},yyyy:function(v){return v.getFullYear()},h:function(v){return v.getHours()%12||12},hh:function(v){return Qu(v.getHours()%12||12)},H:function(v){return v.getHours()},HH:function(v){return Qu(v.getHours())},m:function(v){return v.getMinutes()},mm:function(v){return Qu(v.getMinutes())},s:function(v){return v.getSeconds()},ss:function(v){return Qu(v.getSeconds())},S:function(v){return Math.round(v.getMilliseconds()/100)},SS:function(v){return Qu(Math.round(v.getMilliseconds()/10),2)},SSS:function(v){return Qu(v.getMilliseconds(),3)},a:function(v,E){return v.getHours()<12?E.amPm[0]:E.amPm[1]},A:function(v,E){return v.getHours()<12?E.amPm[0].toUpperCase():E.amPm[1].toUpperCase()},ZZ:function(v){var E=v.getTimezoneOffset();return(E>0?"-":"+")+Qu(Math.floor(Math.abs(E)/60)*100+Math.abs(E)%60,4)}},di={d:[Uf,function(v,E){v.day=E}],M:[Uf,function(v,E){v.month=E-1}],yy:[Uf,function(v,E){var P=new Date,G=+(""+P.getFullYear()).substr(0,2);v.year=""+(E>68?G-1:G)+E}],h:[Uf,function(v,E){v.hour=E}],m:[Uf,function(v,E){v.minute=E}],s:[Uf,function(v,E){v.second=E}],yyyy:[vk,function(v,E){v.year=E}],S:[/\d/,function(v,E){v.millisecond=E*100}],SS:[/\d{2}/,function(v,E){v.millisecond=E*10}],SSS:[gk,function(v,E){v.millisecond=E}],D:[Uf,Bg],ddd:[sy,Bg],MMM:[sy,Tw("monthNamesShort")],MMMM:[sy,Tw("monthNames")],a:[sy,function(v,E,P){var G=E.toLowerCase();G===P.amPm[0]?v.isPm=!1:G===P.amPm[1]&&(v.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(v,E){var P=(E+"").match(/([\+\-]|\d\d)/gi),G;P&&(G=+(P[1]*60)+parseInt(P[2],10),v.timezoneOffset=P[0]==="+"?G:-G)}]};di.DD=di.DD,di.dddd=di.ddd,di.Do=di.dd=di.d,di.mm=di.m,di.hh=di.H=di.HH=di.h,di.MM=di.M,di.ss=di.s,di.A=di.a,al.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},al.format=function(v,E,P){var G=P||al.i18n;if(typeof v=="number"&&(v=new Date(v)),Object.prototype.toString.call(v)!=="[object Date]"||isNaN(v.getTime()))throw new Error("Invalid Date in fecha.format");return E=al.masks[E]||E||al.masks.default,E.replace(ay,function(H){return H in Aw?Aw[H](v,G):H.slice(1,H.length-1)})},al.parse=function(v,E,P){var G=P||al.i18n;if(typeof E!="string")throw new Error("Invalid format in fecha.parse");if(E=al.masks[E]||E,v.length>1e3)return!1;var H=!0,N={};if(E.replace(ay,function(Ce){if(di[Ce]){var pe=di[Ce],we=v.search(pe[0]);~we?v.replace(pe[0],function(We){return pe[1](N,We,G),v=v.substr(we+We.length),We}):H=!1}return di[Ce]?"":Ce.slice(1,Ce.length-1)}),!H)return!1;var ee=new Date;N.isPm===!0&&N.hour!=null&&+N.hour!=12?N.hour=+N.hour+12:N.isPm===!1&&+N.hour==12&&(N.hour=0);var le;return N.timezoneOffset!=null?(N.minute=+(N.minute||0)-+N.timezoneOffset,le=new Date(Date.UTC(N.year||ee.getFullYear(),N.month||0,N.day||1,N.hour||0,N.minute||0,N.second||0,N.millisecond||0))):le=new Date(N.year||ee.getFullYear(),N.month||0,N.day||1,N.hour||0,N.minute||0,N.second||0,N.millisecond||0),le};const zg=function(v){let E=new Date(v);return isNaN(E.getTime())&&typeof v=="string"&&(E=v.split("-").map(Number),E[1]+=1,E=new Date(...E)),isNaN(E.getTime())?null:E},sl=function(v){const E=new Date(v);return E.setHours(0,0,0,0),E.getTime()},v_=(v,E,P)=>{if(!E||!P)return!1;const[G,H]=[E,P].sort();return v>=G&&v<=H},Ug=function(v,E){return v=zg(v),v?al.format(v,E||"yyyy-MM-dd"):""},Fh=function(v,E){return al.parse(v,E||"yyyy-MM-dd")},Hg=function(v,E){return new Date(v,E+1,0).getDate()},Hf=function(v,E){const P=new Date(v),G=P.getMonth()+E,H=Hg(P.getFullYear(),G);return H<P.getDate()&&P.setDate(H),P.setMonth(G),P},du=function(){const v=new Date;return v.setHours(0),v.setMinutes(0),v.setSeconds(0),v},Vh=function(){const v={yyyy:P=>P.getFullYear(),m:P=>P.getMonth()+1,mm:P=>("0"+(P.getMonth()+1)).slice(-2),mmm:(P,G)=>P.toLocaleDateString(G,{month:"long"}).slice(0,3),Mmm:(P,G)=>{const H=P.toLocaleDateString(G,{month:"long"});return(H[0].toUpperCase()+H.slice(1).toLowerCase()).slice(0,3)},mmmm:(P,G)=>P.toLocaleDateString(G,{month:"long"}),Mmmm:(P,G)=>{const H=P.toLocaleDateString(G,{month:"long"});return H[0].toUpperCase()+H.slice(1).toLowerCase()}},E=new RegExp(["yyyy","Mmmm","mmmm","Mmm","mmm","mm","m"].join("|"),"g");return function(P,G,H){const N=/(\[[^\]]+\])([^\[\]]+)(\[[^\]]+\])/,ee=G.match(N).slice(1),le=ee[1],Ce=[ee[0],ee[2]].map(pe=>({label:pe.replace(/\[[^\]]+\]/,we=>we.slice(1,-1).replace(E,We=>v[We](H,P))),type:pe.indexOf("yy")!=-1?"year":"month"}));return{separator:le,labels:Ce}}}(),Gg={date:"yyyy-MM-dd",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"},Qp=function(v,E){return Ug(v,E)},Vo=function(v,E){return Fh(v,E)},y_=function(v,E,P){if(Array.isArray(v)&&v.length===2){const G=v[0],H=v[1];if(G&&H)return Ug(G,E)+P+Ug(H,E)}else if(!Array.isArray(v)&&v instanceof Date)return Ug(v,E);return""},Di=function(v,E,P){const G=Array.isArray(v)?v:v.split(P);if(G.length===2){const H=G[0],N=G[1];return[H instanceof Date?H:Fh(H,E),N instanceof Date?N:Fh(N,E)]}return[]},Gf={default:{formatter(v){return v?""+v:""},parser(v){return v===void 0||v===""?null:v}},date:{formatter:Qp,parser:Vo},datetime:{formatter:Qp,parser:Vo},daterange:{formatter:y_,parser:Di},datetimerange:{formatter:y_,parser:Di},timerange:{formatter:y_,parser:Di},time:{formatter:Qp,parser:Vo},month:{formatter:Qp,parser:Vo},year:{formatter:Qp,parser:Vo},multiple:{formatter:(v,E)=>v.filter(Boolean).map(P=>Ug(P,E)).join(","),parser:(v,E)=>(typeof v=="string"?v.split(","):v).map(P=>P instanceof Date?P:(typeof P=="string"?P=P.trim():typeof P!="number"&&!P&&(P=""),Fh(P,E)))},number:{formatter(v){return v?""+v:""},parser(v){let E=Number(v);return isNaN(v)?null:E}}},hi="ivu-date-picker",Mw="ivu-picker",ra=v=>v.reduce((E,P)=>E&&!P||typeof P=="string"&&P.trim()==="",!0),Vi={40:"up",39:"right",38:"down",37:"left"},Vs=(v,E,P)=>{if(v==="left")return E*-1;if(v==="right")return E*1;if(v==="up")return P*1;if(v==="down")return P*-1},bk=v=>{const E="ivu-date-picker-btn-pulse";v.classList.add(E),setTimeout(()=>v.classList.remove(E),200)},b_=v=>v?[v.getHours(),v.getMinutes(),v.getSeconds()]:[0,0,0],Wg={mixins:[Mo,zt],components:{iInput:Sl,Drop:Lr,Icon:oe},directives:{clickOutside:Li},emits:["on-clickoutside","on-clear","on-change","on-ok","on-open-change","update:modelValue"],provide(){return{PickerInstance:this}},props:{format:{type:String},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1},open:{type:Boolean,default:null},multiple:{type:Boolean,default:!1},timePickerOptions:{type:Object,default:()=>({})},splitPanels:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},placeholder:{type:String,default:""},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},steps:{type:Array,default:()=>[]},modelValue:{type:[Date,String,Array]},options:{type:Object,default:()=>({})},separator:{type:String,default:" - "},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){const v=this.type.includes("range"),E=v?[null,null]:[null],P=ra((v?this.modelValue:[this.modelValue])||[])?E:this.parseDate(this.modelValue),G=P.map(b_);return{prefixCls:hi,showClose:!1,visible:!1,internalValue:P,disableClickOutSide:!1,disableCloseUnderTransfer:!1,selectionMode:this.onSelectionModeChange(this.type),forceInputRerender:1,isFocused:!1,focusedDate:P[0]||this.startDate||new Date,focusedTime:{column:0,picker:0,time:G,active:!1},internalFocus:!1,isValueNull:!1,timeSpinnerList:[],panelTableList:[]}},computed:{wrapperClasses(){return[hi,{[hi+"-focused"]:this.isFocused}]},publicVModelValue(){if(this.multiple)return this.internalValue.slice();{const v=this.type.includes("range");let E=this.internalValue.map(P=>P instanceof Date?new Date(P):P||"");return this.type.match(/^time/)&&(E=E.map(this.formatDate)),v||this.multiple?E:E[0]}},publicStringValue(){const{formatDate:v,publicVModelValue:E,type:P}=this;return P.match(/^time/)?E:this.multiple?v(E):Array.isArray(E)?E.map(v):v(E)},opened(){return this.open===null?this.visible:this.open},transition(){return this.placement.match(/^bottom/)?"slide-up":"slide-down"},visualValue(){return this.formatDate(this.internalValue)},isConfirm(){return this.confirm||this.type==="datetime"||this.type==="datetimerange"||this.multiple},arrowType(){const v=this.globalConfig;let E="";if(this.type==="time"||this.type==="timerange")E="ios-time-outline",v&&(v.timePicker.customIcon?E="":v.timePicker.icon&&(E=v.timePicker.icon));else{const P=this.globalConfig;E="ios-calendar-outline",P&&(P.datePicker.customIcon?E="":P.datePicker.icon&&(E=P.datePicker.icon))}return this.showClose&&(E="ios-close-circle"),E},customArrowType(){const v=this.globalConfig;let E="";return this.showClose||(this.type==="time"||this.type==="timerange"?v&&v.timePicker.customIcon&&(E=v.timePicker.customIcon):v&&v.datePicker.customIcon&&(E=v.datePicker.customIcon)),E},arrowSize(){const v=this.globalConfig;let E="";return this.showClose||(this.type==="time"||this.type==="timerange"?v&&v.timePicker.iconSize&&(E=v.timePicker.iconSize):v&&v.datePicker.iconSize&&(E=v.datePicker.iconSize)),E},dropdownCls(){return{[hi+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{onSelectionModeChange(v){return v.match(/^date/)&&(v="date"),this.selectionMode=re(v,["year","month","date","time"])&&v,this.selectionMode},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(v){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(v&&v.type==="mousedown"&&this.visible){v.preventDefault(),v.stopPropagation();return}if(this.visible){const E=this.$refs.pickerPanel&&this.$refs.pickerPanel.$el;if(v&&E&&E.contains(v.target))return;this.visible=!1,v&&v.preventDefault(),v&&v.stopPropagation(),this.$emit("on-clickoutside",v);return}this.isFocused=!1,this.disableClickOutSide=!1},handleFocus(v){this.readonly||(this.isFocused=!0,!(v&&v.type==="focus")&&(this.itemDisabled||(this.visible=!0)))},handleBlur(v){if(this.internalFocus){this.internalFocus=!1;return}if(this.visible){v.preventDefault();return}this.isFocused=!1,this.onSelectionModeChange(this.type),this.internalValue=this.internalValue.slice(),this.reset(),this.$refs.pickerPanel.onToggleVisibility(!1)},handleKeydown(v){const E=v.keyCode;if(E===9)if(this.visible)if(v.stopPropagation(),v.preventDefault(),this.isConfirm){const G=`.${Mw}-confirm > *`,H=this.$refs.drop.$el.querySelectorAll(G);this.internalFocus=!0,[...H][v.shiftKey?"pop":"shift"]().focus()}else this.handleClose();else this.focused=!1;const P=[37,38,39,40];if(!this.visible&&P.includes(E)){this.visible=!0;return}if(E===27&&this.visible&&(v.stopPropagation(),this.handleClose()),E===13){const G=this.timeSpinnerList.map(H=>H.timeSpinner);if(G.length>0){const H=G[0].showSeconds?3:2,N=Math.floor(this.focusedTime.column/H),ee=this.focusedTime.time[N];G[N].chooseValue(ee);return}if(this.type.match(/range/))this.$refs.pickerPanel.handleRangePick(this.focusedDate,"date");else{const H=this.panelTableList.map(ee=>ee.panelTable),N=ee=>{const le=["year","month","date"].indexOf(this.type)+1;return[ee.getFullYear(),ee.getMonth(),ee.getDate()].slice(0,le).join("-")};H.find(({cells:ee})=>ee.find(({date:le,disabled:Ce})=>N(le)===N(this.focusedDate)&&!Ce))&&this.onPick(this.focusedDate,!1,"date")}}!P.includes(E)||(this.focusedTime.active&&v.preventDefault(),this.navigateDatePanel(Vi[E],v.shiftKey))},reset(){this.$refs.pickerPanel.reset&&this.$refs.pickerPanel.reset()},navigateTimePanel(v){this.focusedTime.active=!0;const E=v.match(/left|right/),P=v.match(/up|down/),G=this.timeSpinnerList.map(pe=>pe.timeSpinner),H=(G[0].showSeconds?3:2)*G.length,N=(pe=>(pe+(E?v==="left"?-1:1:0)+H)%H)(this.focusedTime.column),ee=H/G.length,le=Math.floor(N/ee),Ce=N%ee;if(E){const pe=this.internalValue.map(b_);this.focusedTime=x(S({},this.focusedTime),{column:N,time:pe}),G.forEach((we,We)=>{We===le?we.updateFocusedTime(Ce,pe[le]):we.updateFocusedTime(-1,we.focusedTime)})}if(P){const pe=v==="up"?1:-1,we=["hours","minutes","seconds"],We=G[le][`${we[Ce]}List`],ut=(We.findIndex(({text:Oe})=>this.focusedTime.time[le][Ce]===Oe)+pe+We.length)%We.length,ct=We[ut].text,ot=this.focusedTime.time.map((Oe,wt)=>(wt!==le||(Oe[Ce]=ct),Oe));this.focusedTime=x(S({},this.focusedTime),{time:ot}),G.forEach((Oe,wt)=>{wt===le?Oe.updateFocusedTime(Ce,ot[wt]):Oe.updateFocusedTime(-1,Oe.focusedTime)})}},navigateDatePanel(v,E){const P=this.timeSpinnerList.map(N=>N.timeSpinner);if(P.length>0){this.navigateTimePanel(v,E,P);return}if(E){this.type==="year"?this.focusedDate=new Date(this.focusedDate.getFullYear()+Vs(v,0,10),this.focusedDate.getMonth(),this.focusedDate.getDate()):this.focusedDate=new Date(this.focusedDate.getFullYear()+Vs(v,0,1),this.focusedDate.getMonth()+Vs(v,1,0),this.focusedDate.getDate());const N=v.match(/left|down/)?"prev":"next",ee=v.match(/up|down/)?"-double":"",le=this.$refs.drop.$el.querySelector(`.ivu-date-picker-${N}-btn-arrow${ee}`);le&&bk(le);return}const G=this.focusedDate||this.internalValue&&this.internalValue[0]||new Date,H=new Date(G);if(this.type.match(/^date/)){const N=Hg(G.getFullYear(),G.getMonth()),ee=G.getDate(),le=H.getDate()+Vs(v,1,7);le<1?v.match(/left|right/)?(H.setMonth(H.getMonth()+1),H.setDate(le)):H.setDate(ee+Math.floor((N-ee)/7)*7):le>N?v.match(/left|right/)?(H.setMonth(H.getMonth()-1),H.setDate(le)):H.setDate(ee%7):H.setDate(le)}this.type.match(/^month/)&&H.setMonth(H.getMonth()+Vs(v,1,3)),this.type.match(/^year/)&&H.setFullYear(H.getFullYear()+Vs(v,1,3)),this.focusedDate=H},handleInputChange(v){const E=this.type.includes("range")||this.multiple,P=this.visualValue,G=v.target.value,H=this.parseDate(G),N=this.options&&typeof this.options.disabledDate=="function"&&this.options.disabledDate,ee=E?H:H[0],le=N&&N(ee),Ce=H.reduce((pe,we)=>pe&&we instanceof Date,!0);G!==P&&!le&&Ce?(this.emitChange(this.type),this.internalValue=H):this.forceInputRerender++},handleInputMouseenter(){this.readonly||this.itemDisabled||this.visualValue&&this.clearable&&(this.showClose=!0)},handleInputMouseleave(){this.showClose=!1},handleIconClick(v){this.showClose?(v&&v.stopPropagation(),this.handleClear()):this.itemDisabled||this.handleFocus()},handleClear(){this.visible=!1,this.internalValue=this.internalValue.map(()=>null),this.$emit("on-clear"),this.handleFormItemChange("change",""),this.emitChange(this.type),this.reset(),setTimeout(()=>this.onSelectionModeChange(this.type),500)},emitChange(v){c.nextTick(()=>{this.$emit("on-change",this.publicStringValue,v),this.handleFormItemChange("change",this.publicStringValue)})},parseDate(v){const E=this.type.includes("range"),P=this.type,G=(Gf[P]||Gf.default).parser,H=this.format||Gg[P],N=Gf.multiple.parser;if(v&&P==="time"&&!(v instanceof Date))v=G(v,H,this.separator);else if(this.multiple&&v)v=N(v,H,this.separator);else if(E)if(!v)v=[null,null];else if(typeof v=="string")v=G(v,H,this.separator);else if(P==="timerange")v=G(v,H,this.separator).map(ee=>ee||"");else{const[ee,le]=v;ee instanceof Date&&le instanceof Date?v=v.map(Ce=>new Date(Ce)):typeof ee=="string"&&typeof le=="string"?v=G(v.join(this.separator),H,this.separator):(!ee||!le)&&(v=[null,null])}else typeof v=="string"&&P.indexOf("time")!==0&&(v=G(v,H)||null);return E||this.multiple?v||[]:[v]},formatDate(v){const E=Gg[this.type];if(this.multiple)return Gf.multiple.formatter(v,this.format||E,this.separator);{const{formatter:P}=Gf[this.type]||Gf.default;return P(v,this.format||E,this.separator)}},onPick(v,E=!1,P){if(this.multiple){const G=v.getTime(),H=this.internalValue.findIndex(ee=>ee&&ee.getTime()===G),N=[...this.internalValue,v].filter(Boolean).map(ee=>ee.getTime()).filter((ee,le,Ce)=>Ce.indexOf(ee)===le&&le!==H);this.internalValue=N.map(ee=>new Date(ee))}else v=this.parseDate(v),this.internalValue=Array.isArray(v)?v:[v];this.internalValue[0]&&(this.focusedDate=this.internalValue[0]),this.focusedTime=x(S({},this.focusedTime),{time:this.internalValue.map(b_)}),this.isConfirm||this.onSelectionModeChange(this.type),this.isConfirm||(this.visible=!!E),this.emitChange(P)},onPickSuccess(){this.visible=!1,this.$emit("on-ok"),this.focus(),this.reset()},focus(){this.$refs.input&&this.$refs.input.focus()},updatePopper(){this.$refs.drop.update()},handleOnFocusInput(){this.focus()},handleOnUpdatePopper(){this.updatePopper()}},watch:{visible(v){v===!1&&this.$refs.drop.destroy(),v&&this.$refs.drop.update(),this.$emit("on-open-change",v)},modelValue(v){v===null&&(this.isValueNull=!0),this.internalValue=this.parseDate(v)},open(v){this.visible=v===!0},type(v){this.onSelectionModeChange(v)},publicVModelValue(v,E){const P=JSON.stringify(v),G=JSON.stringify(E);(P!==G||typeof v!=typeof E)&&(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",v))}},mounted(){this.open!==null&&(this.visible=this.open)}};function uy(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("i-input"),Ce=c.resolveComponent("Drop"),pe=c.resolveDirective("click-outside");return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapperClasses)},[c.createElementVNode("div",{ref:"reference",class:c.normalizeClass([H.prefixCls+"-rel"])},[c.renderSlot(v.$slots,"default",{},()=>[(c.openBlock(),c.createBlock(le,{key:H.forceInputRerender,"element-id":P.elementId,class:c.normalizeClass([H.prefixCls+"-editor"]),readonly:!P.editable||P.readonly,disabled:v.itemDisabled,size:P.size,placeholder:P.placeholder,"model-value":N.visualValue,name:P.name,ref:"input",onOnInputChange:N.handleInputChange,onOnFocus:N.handleFocus,onOnBlur:N.handleBlur,onClick:N.handleFocus,onKeydown:N.handleKeydown,onMouseenter:N.handleInputMouseenter,onMouseleave:N.handleInputMouseleave},{suffix:c.withCtx(()=>[c.createVNode(ee,{onClick:N.handleIconClick,type:N.arrowType,custom:N.customArrowType,size:N.arrowSize},null,8,["onClick","type","custom","size"])]),_:1},8,["element-id","class","readonly","disabled","size","placeholder","model-value","name","onOnInputChange","onOnFocus","onOnBlur","onClick","onKeydown","onMouseenter","onMouseleave"]))])],2),c.createVNode(Ce,{ref:"drop",visible:N.opened,classes:N.dropdownCls,placement:P.placement,eventsEnabled:P.eventsEnabled,transfer:P.transfer,"transition-name":"transition-drop",onClick:N.handleTransferClick},{default:c.withCtx(()=>[c.createElementVNode("div",null,[(c.openBlock(),c.createBlock(c.resolveDynamicComponent(v.panel),c.mergeProps({ref:"pickerPanel",visible:H.visible,showTime:v.type==="datetime"||v.type==="datetimerange",confirm:N.isConfirm,selectionMode:H.selectionMode,steps:P.steps,format:P.format,"model-value":H.internalValue,"start-date":P.startDate,"split-panels":P.splitPanels,"show-week-numbers":P.showWeekNumbers,"picker-type":v.type,multiple:P.multiple,"focused-date":H.focusedDate,"time-picker-options":P.timePickerOptions},v.ownPickerProps,{onOnPick:N.onPick,onOnPickClear:N.handleClear,onOnPickSuccess:N.onPickSuccess,onOnPickClick:E[0]||(E[0]=we=>H.disableClickOutSide=!0),onOnSelectionModeChange:N.onSelectionModeChange}),null,16,["visible","showTime","confirm","selectionMode","steps","format","model-value","start-date","split-panels","show-week-numbers","picker-type","multiple","focused-date","time-picker-options","onOnPick","onOnPickClear","onOnPickSuccess","onOnSelectionModeChange"]))])]),_:1},8,["visible","classes","placement","eventsEnabled","transfer","onClick"])],2)),[[pe,N.handleClose,P.capture,{mousedown:!0}],[pe,N.handleClose,P.capture,{touchstart:!0}],[pe,N.handleClose,P.capture]])}var hu=$(Wg,[["render",uy]]),Wf=1e3*60*60*24;function _k(v,E){return new Date(v,E+1,0).getDate()}function kw(v,E,P){return E===0&&P>50?v-1:E===11&&P<10?v+1:v}function Dw(v,E,P,G){E>11&&(E=0,v++);var H=new Date(v,E,P);G&&H.setDate(H.getDate()+4-(H.getDay()||7));var N=G?H.getFullYear():v,ee=new Date(N,0,1),le=1+Math.round((H-ee)/Wf);G||(le+=ee.getDay());var Ce=Math.ceil(le/7);if(!G){var pe=new Date(v,E,P),we=new Date(v+1,0,1),We=we.getDay();pe.getTime()>=we.getTime()-Wf*We&&(Ce=1)}return Ce}function Sk(v,E,P){for(var G=this.lang||"en",H=this.onlyDays,N=typeof this.weekStart>"u"?1:this.weekStart,ee=N===1,le=[],Ce=new Date(v,E,1),pe=Ce.getDay()||(ee?7:0),we=N-pe,We=Dw(v,E,1,ee),ut=_k(v,E),ct=_k(v,E-1),ot,Oe,wt,Er=kw(v,E,We),ir={month:E,year:v,daysInMonth:ut},Wn=0;Wn<7;Wn++){wt=we;for(var jt=0;jt<8;jt++){Wn>0&&jt>0&&we++,we>ut||we<1?(Oe=we>ut?we-ut:ct+we,ot=we>ut?E+1:E-1):(Oe=we,ot=E);var It=function(){return jt===0?"weekLabel":Wn===0?"dayLabel":we<1?"prevMonth":we>ut?"nextMonth":"monthDay"}(),Cn=wt!==we&&Wn>0,Pt={desc:Cn?Oe:We,week:We,type:It,format:ee?"ISO 8601":"US",date:Cn?new Date(Date.UTC(v,ot,Oe)):!1,year:Er,index:le.length};P&&(typeof P=="function"?Pt=P.call(ir,Pt,G):P.forEach(function(Pr){Pt=Pr.call(ir,Pt,G)})),H&&Cn?le.push(Pt):H||le.push(Pt)}Wn>0&&(We=Dw(v,ot,Oe+1,ee)),Er=kw(v,E,We)}return ir.cells=le,ir}var aN=function(v){return Sk.bind(v)},sN={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"måndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lördag",7:"söndag"},pt:{0:"s",1:"segunda",2:"terça",3:"quarta",4:"quinta",5:"sexta",6:"sábado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}},Oa=sN;function zs(v){return v==null?!1:v.constructor===Array||v.constructor===Object}function Pw(v,E){for(var P in v)E[P]?zs(v[P])&&Pw(v[P],E[P]):E[P]=v[P]}function Rw(v,E){var P=[Oa.classes[v.type]];return v.class?v.class=(typeof v.class=="string"?[v.class]:v.class).concat(P):v.class=P,v.type.indexOf("Label")>0&&(v.index==0&&Oa.weekPlaceholder?v.desc=Oa.weekPlaceholder:v.index<8?v.desc=Oa.columnNames[E][v.index]:v.index%8==0&&(v.desc=v.week)),v.date&&(v.monthName=Oa.monthNames[E][v.date.getMonth()]),this.monthName||(this.monthName=Oa.monthNames[E][this.month]),this.labels||(this.labels={monthNames:Oa.monthNames[E],columnNames:Oa.columnNames[E],classes:Oa.classes}),v}Rw.setLabels=function(v){Pw(v,Oa)};var zh=Rw,dy={Generator:aN,addLabels:zh},Yg={name:"PanelTable",emits:["on-pick","on-pick-click","on-change-range"],inject:["PickerInstance"],props:{tableDate:{type:Date,required:!0},disabledDate:{type:Function},selectionMode:{type:String,required:!0},modelValue:{type:Array,required:!0},rangeState:{type:Object,default:()=>({from:null,to:null,selecting:!1})},focusedDate:{type:Date,required:!0}},data(){return{id:mt(6)}},computed:{dates(){const{selectionMode:v,modelValue:E,rangeState:P}=this;return v==="range"&&P.selecting?[P.from]:E}},methods:{handleClick(v,E){if(E.stopPropagation(),v.disabled||v.type==="weekLabel")return;const P=new Date(sl(v.date));this.$emit("on-pick",P),this.$emit("on-pick-click")},handleMouseMove(v){if(!this.rangeState.selecting||v.disabled)return;const E=v.date;this.$emit("on-change-range",E)},addPanelTable(){const v=this.PickerInstance;v.panelTableList||(v.panelTableList=[]),v.panelTableList.push({id:this.id,panelTable:this})},removePanelTable(){const v=this.PickerInstance;if(v.panelTableList&&v.panelTableList.length){const E=v.panelTableList.findIndex(P=>P.id===this.id);v.panelTableList.splice(E,1)}}},mounted(){this.addPanelTable()},beforeUnmount(){this.removePanelTable()}},Mi="ivu-date-picker-cells";const Yf={mixins:[vt,Yg],props:{showWeekNumbers:{type:Boolean,default:!1}},computed:{classes(){return[`${Mi}`,{[`${Mi}-show-week-numbers`]:this.showWeekNumbers}]},calendar(){const v=Number(this.t("i.datepicker.weekStartDay"));return new dy.Generator({onlyDays:!this.showWeekNumbers,weekStart:v})},headerDays(){const v=Number(this.t("i.datepicker.weekStartDay")),E=["sun","mon","tue","wed","thu","fri","sat"].map(G=>this.t("i.datepicker.weeks."+G)),P=E.splice(v,7-v).concat(E.splice(0,v));return this.showWeekNumbers?[""].concat(P):P},cells(){const v=this.tableDate.getFullYear(),E=this.tableDate.getMonth(),P=sl(new Date),G=this.dates.filter(Boolean).map(sl),[H,N]=this.dates.map(sl),ee=this.rangeState.from&&sl(this.rangeState.from),le=this.rangeState.to&&sl(this.rangeState.to),Ce=this.selectionMode==="range",pe=typeof this.disabledDate=="function"&&this.disabledDate;return this.calendar(v,E,we=>{we.date instanceof Date&&we.date.setTime(we.date.getTime()+we.date.getTimezoneOffset()*6e4+480*60*1e3);const We=we.date&&sl(we.date),ut=we.date&&E===we.date.getMonth();return x(S({},we),{type:We===P?"today":we.type,selected:ut&&G.includes(We),disabled:we.date&&pe&&pe(new Date(We)),range:ut&&Ce&&v_(We,ee,le),start:ut&&Ce&&We===H,end:ut&&Ce&&We===N})}).cells.slice(this.showWeekNumbers?8:0)}},methods:{getCellCls(v){return[`${Mi}-cell`,{[`${Mi}-cell-selected`]:v.selected||v.start||v.end,[`${Mi}-cell-disabled`]:v.disabled,[`${Mi}-cell-today`]:v.type==="today",[`${Mi}-cell-prev-month`]:v.type==="prevMonth",[`${Mi}-cell-next-month`]:v.type==="nextMonth",[`${Mi}-cell-week-label`]:v.type==="weekLabel",[`${Mi}-cell-range`]:v.range&&!v.start&&!v.end,[`${Mi}-focused`]:sl(v.date)===sl(this.focusedDate)}]}}},em={class:"ivu-date-picker-cells-header"},jg=["onClick","onMouseenter"];function Zg(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("div",em,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.headerDays,ee=>(c.openBlock(),c.createElementBlock("span",{key:ee},c.toDisplayString(ee),1))),128))]),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.cells,(ee,le)=>(c.openBlock(),c.createElementBlock("span",{key:String(ee.date)+le,class:c.normalizeClass(N.getCellCls(ee)),onClick:Ce=>v.handleClick(ee,Ce),onMouseenter:Ce=>v.handleMouseMove(ee)},[c.createElementVNode("em",null,c.toDisplayString(ee.desc),1)],42,jg))),128))],2)}var tm=$(Yf,[["render",Zg]]);const Iw={mixins:[Yg],props:{},computed:{classes(){return[`${Mi}`,`${Mi}-year`]},startYear(){return Math.floor(this.tableDate.getFullYear()/10)*10},cells(){let v=[];const E={text:"",selected:!1,disabled:!1},P=this.dates.filter(Boolean).map(H=>sl(new Date(H.getFullYear(),0,1))),G=sl(new Date(this.focusedDate.getFullYear(),0,1));for(let H=0;H<10;H++){const N=Te(E);N.date=new Date(this.startYear+H,0,1),N.disabled=typeof this.disabledDate=="function"&&this.disabledDate(N.date)&&this.selectionMode==="year";const ee=sl(N.date);N.selected=P.includes(ee),N.focused=ee===G,v.push(N)}return v}},methods:{getCellCls(v){return[`${Mi}-cell`,{[`${Mi}-cell-selected`]:v.selected,[`${Mi}-cell-disabled`]:v.disabled,[`${Mi}-cell-focused`]:v.focused,[`${Mi}-cell-range`]:v.range&&!v.start&&!v.end}]}}},Pi=["onClick","onMouseenter"];function $w(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.cells,ee=>(c.openBlock(),c.createElementBlock("span",{class:c.normalizeClass(N.getCellCls(ee)),key:ee.date,onClick:le=>v.handleClick(ee,le),onMouseenter:le=>v.handleMouseMove(ee)},[c.createElementVNode("em",null,c.toDisplayString(ee.date.getFullYear()),1)],42,Pi))),128))],2)}var __=$(Iw,[["render",$w]]);const Lw={mixins:[vt,Yg],props:{},computed:{classes(){return[`${Mi}`,`${Mi}-month`]},cells(){let v=[];const E={text:"",selected:!1,disabled:!1},P=this.tableDate.getFullYear(),G=this.dates.filter(Boolean).map(N=>sl(new Date(N.getFullYear(),N.getMonth(),1))),H=sl(new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1));for(let N=0;N<12;N++){const ee=Te(E);ee.date=new Date(P,N,1),ee.text=this.tCell(N+1);const le=sl(ee.date);ee.disabled=typeof this.disabledDate=="function"&&this.disabledDate(ee.date)&&this.selectionMode==="month",ee.selected=G.includes(le),ee.focused=le===H,v.push(ee)}return v}},methods:{getCellCls(v){return[`${Mi}-cell`,{[`${Mi}-cell-selected`]:v.selected,[`${Mi}-cell-disabled`]:v.disabled,[`${Mi}-cell-focused`]:v.focused,[`${Mi}-cell-range`]:v.range&&!v.start&&!v.end}]},tCell(v){return this.t(`i.datepicker.months.m${v}`)}}},hy=["onClick","onMouseenter"];function as(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.cells,ee=>(c.openBlock(),c.createElementBlock("span",{class:c.normalizeClass(N.getCellCls(ee)),key:ee.text,onClick:le=>v.handleClick(ee,le),onMouseenter:le=>v.handleMouseMove(ee)},[c.createElementVNode("em",null,c.toDisplayString(ee.text),1)],42,hy))),128))],2)}var Pl=$(Lw,[["render",as]]),qg={props:{disabledHours:{type:Array,default(){return[]}},disabledMinutes:{type:Array,default(){return[]}},disabledSeconds:{type:Array,default(){return[]}},hideDisabledOptions:{type:Boolean,default:!1}}};const Gd="ivu-time-picker-cells",Uh=["hours","minutes","seconds"],xk={name:"TimeSpinner",mixins:[qg],emits:["on-change","on-pick-click"],inject:["PickerInstance"],props:{hours:{type:[Number,String],default:NaN},minutes:{type:[Number,String],default:NaN},seconds:{type:[Number,String],default:NaN},showSeconds:{type:Boolean,default:!0},steps:{type:Array,default:()=>[]}},data(){return{spinerSteps:[1,1,1].map((v,E)=>Math.abs(this.steps[E])||v),prefixCls:Gd,compiled:!1,focusedColumn:-1,focusedTime:[0,0,0],id:mt(6)}},computed:{classes(){return[`${Gd}`,{[`${Gd}-with-seconds`]:this.showSeconds}]},hoursList(){let v=[];const E=this.spinerSteps[0],P=this.focusedColumn===0&&this.focusedTime[0],G={text:0,selected:!1,disabled:!1,hide:!1};for(let H=0;H<24;H+=E){const N=Te(G);N.text=H,N.focused=H===P,this.disabledHours.length&&this.disabledHours.indexOf(H)>-1&&(N.disabled=!0,this.hideDisabledOptions&&(N.hide=!0)),this.hours===H&&(N.selected=!0),v.push(N)}return v},minutesList(){let v=[];const E=this.spinerSteps[1],P=this.focusedColumn===1&&this.focusedTime[1],G={text:0,selected:!1,disabled:!1,hide:!1};for(let H=0;H<60;H+=E){const N=Te(G);N.text=H,N.focused=H===P,this.disabledMinutes.length&&this.disabledMinutes.indexOf(H)>-1&&(N.disabled=!0,this.hideDisabledOptions&&(N.hide=!0)),this.minutes===H&&(N.selected=!0),v.push(N)}return v},secondsList(){let v=[];const E=this.spinerSteps[2],P=this.focusedColumn===2&&this.focusedTime[2],G={text:0,selected:!1,disabled:!1,hide:!1};for(let H=0;H<60;H+=E){const N=Te(G);N.text=H,N.focused=H===P,this.disabledSeconds.length&&this.disabledSeconds.indexOf(H)>-1&&(N.disabled=!0,this.hideDisabledOptions&&(N.hide=!0)),this.seconds===H&&(N.selected=!0),v.push(N)}return v}},methods:{getCellCls(v){return[`${Gd}-cell`,{[`${Gd}-cell-selected`]:v.selected,[`${Gd}-cell-focused`]:v.focused,[`${Gd}-cell-disabled`]:v.disabled}]},chooseValue(v){const E=Uh.reduce((P,G,H)=>{const N=v[H];return this[G]===N?P:x(S({},P),{[G]:N})},{});Object.keys(E).length>0&&this.emitChange(E)},handleClick(v,E){if(E.disabled)return;const P={[v]:E.text};this.emitChange(P)},emitChange(v){this.$emit("on-change",v),this.$emit("on-pick-click")},scroll(v,E){const P=this.$refs[v].scrollTop,G=24*this.getScrollIndex(v,E);Ke(this.$refs[v],P,G,500)},getScrollIndex(v,E){const P=Ge(v),G=this[`disabled${P}`];if(G.length&&this.hideDisabledOptions){let H=0;G.forEach(N=>N<=E?H++:""),E-=H}return E},updateScroll(){c.nextTick(()=>{Uh.forEach(v=>{this.$refs[v].scrollTop=24*this[`${v}List`].findIndex(E=>E.text==this[v])})})},formatTime(v){return v<10?"0"+v:v},updateFocusedTime(v,E){this.focusedColumn=v,this.focusedTime=E.slice()},addTimeSpinner(){const v=this.PickerInstance;v.timeSpinnerList||(v.timeSpinnerList=[]),v.timeSpinnerList.push({id:this.id,timeSpinner:this})},removeTimeSpinner(){const v=this.PickerInstance;if(v.timeSpinnerList&&v.timeSpinnerList.length){const E=v.timeSpinnerList.findIndex(P=>P.id===this.id);v.timeSpinnerList.splice(E,1)}}},watch:{hours(v){!this.compiled||this.scroll("hours",this.hoursList.findIndex(E=>E.text==v))},minutes(v){!this.compiled||this.scroll("minutes",this.minutesList.findIndex(E=>E.text==v))},seconds(v){!this.compiled||this.scroll("seconds",this.secondsList.findIndex(E=>E.text==v))},focusedTime(v,E){Uh.forEach((P,G)=>{if(v[G]===E[G]||typeof v[G]>"u")return;const H=this[`${P}List`].findIndex(N=>N.text===v[G]);this.scroll(P,H)})}},mounted(){this.addTimeSpinner(),c.nextTick(()=>this.compiled=!0)},beforeUnmount(){this.removeTimeSpinner()}},Ck=["onClick"],S_=["onClick"],Rl=["onClick"];function fy(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-list"]),ref:"hours"},[c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-ul"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.hoursList,ee=>c.withDirectives((c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.getCellCls(ee)),key:ee.text,onClick:le=>N.handleClick("hours",ee)},c.toDisplayString(N.formatTime(ee.text)),11,Ck)),[[c.vShow,!ee.hide]])),128))],2)],2),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-list"]),ref:"minutes"},[c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-ul"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.minutesList,ee=>c.withDirectives((c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.getCellCls(ee)),key:ee.text,onClick:le=>N.handleClick("minutes",ee)},c.toDisplayString(N.formatTime(ee.text)),11,S_)),[[c.vShow,!ee.hide]])),128))],2)],2),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-list"]),ref:"seconds"},[c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-ul"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.secondsList,ee=>c.withDirectives((c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.getCellCls(ee)),key:ee.text,onClick:le=>N.handleClick("seconds",ee)},c.toDisplayString(N.formatTime(ee.text)),11,Rl)),[[c.vShow,!ee.hide]])),128))],2)],2),[[c.vShow,P.showSeconds]])],2)}var Ri=$(xk,[["render",fy]]);const Ec="ivu-picker",nm={mixins:[vt],components:{iButton:Oi},emits:["on-pick-clear","on-pick-success","on-pick-toggle-time"],inject:["PickerInstance"],props:{showTime:{type:Boolean,default:!1},isTime:{type:Boolean,default:!1},timeDisabled:{type:Boolean,default:!1}},data(){return{prefixCls:Ec}},computed:{timeClasses(){return`${Ec}-confirm-time`},labels(){const v=["time","clear","ok"],E=[this.isTime?"selectDate":"selectTime","clear","ok"];return v.reduce((P,G,H)=>(P[G]=this.t("i.datepicker."+E[H]),P),{})}},methods:{handleClear(){this.$emit("on-pick-clear")},handleSuccess(){this.$emit("on-pick-success")},handleToggleTime(){this.timeDisabled||(this.$emit("on-pick-toggle-time"),this.PickerInstance.handleOnFocusInput(),this.PickerInstance.handleOnUpdatePopper())},handleTab(v){const E=[...this.$el.children][v.shiftKey?"shift":"pop"]();A&&document.activeElement===E&&(v.preventDefault(),v.stopPropagation(),this.PickerInstance.handleOnFocusInput())}}};function jf(v,E,P,G,H,N){const ee=c.resolveComponent("i-button");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls+"-confirm"]),onKeydownCapture:E[0]||(E[0]=c.withKeys((...le)=>N.handleTab&&N.handleTab(...le),["tab"]))},[P.showTime?(c.openBlock(),c.createBlock(ee,{key:0,class:c.normalizeClass(N.timeClasses),size:"small",type:"text",disabled:P.timeDisabled,onClick:N.handleToggleTime},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.labels.time),1)]),_:1},8,["class","disabled","onClick"])):c.createCommentVNode("",!0),c.createVNode(ee,{size:"small",class:"ivu-picker-confirm-btn-cancel",onClick:N.handleClear,onKeydown:c.withKeys(N.handleClear,["enter"])},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.labels.clear),1)]),_:1},8,["onClick","onKeydown"]),c.createVNode(ee,{size:"small",type:"primary",onClick:N.handleSuccess,onKeydown:c.withKeys(N.handleSuccess,["enter"])},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.labels.ok),1)]),_:1},8,["onClick","onKeydown"])],34)}var ed=$(nm,[["render",jf]]);const Zf="ivu-picker-panel",Wd="ivu-date-picker";var Kg={emits:["on-pick-clear","on-pick-success","on-pick-click","on-pick"],props:{confirm:{type:Boolean,default:!1}},methods:{iconBtnCls(v,E=""){return[`${Zf}-icon-btn`,`${Wd}-${v}-btn`,`${Wd}-${v}-btn-arrow${E}`]},handleShortcutClick(v){v.value&&this.$emit("on-pick",v.value()),v.onClick&&v.onClick(this)},handlePickClear(){this.resetView(),this.$emit("on-pick-clear")},handlePickSuccess(){this.resetView(),this.$emit("on-pick-success")},handlePickClick(){this.$emit("on-pick-click")},resetView(){setTimeout(()=>this.currentView=this.selectionMode,500)},handleClear(){this.dates=this.dates.map(()=>null),this.rangeState={},this.$emit("on-pick",this.dates),this.handleConfirm()},handleConfirm(v,E){this.$emit("on-pick",this.dates,v,E||this.type)},onToggleVisibility(v){const{timeSpinner:E,timeSpinnerEnd:P}=this.$refs;v&&E&&E.updateScroll(),v&&P&&P.updateScroll()}}};const qf="ivu-picker-panel",Kf="ivu-time-picker",Xg=v=>v[0].toUpperCase()+v.slice(1),wk=(v,E,P,G)=>{const H=new Date(v.getTime());return H.setHours(E),H.setMinutes(P),H.setSeconds(G),H},Ek=(v,E,P)=>P.indexOf(v)===E,x_=()=>!1,Tk={name:"TimePickerPanel",mixins:[Kg,vt,qg],components:{TimeSpinner:Ri,Confirm:ed},emits:["on-pick"],props:{disabledDate:{type:Function,default:x_},steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){return{prefixCls:qf,timePrefixCls:Kf,date:this.modelValue[0]||du(),showDate:!1}},computed:{showSeconds(){return!!(this.format||"").match(/ss/)},visibleDate(){const v=this.date,E=v.getMonth()+1,P=this.t("i.datepicker.year"),G=this.t(`i.datepicker.month${E}`);return`${v.getFullYear()}${P} ${G}`},timeSlots(){return this.modelValue[0]?["getHours","getMinutes","getSeconds"].map(v=>this.date[v]()):[]},disabledHMS(){const v=["disabledHours","disabledMinutes","disabledSeconds"];if(this.disabledDate===x_||!this.modelValue[0])return v.reduce((E,P)=>(E[P]=this[P],E),{});{const E=[24,60,60],P=["Hours","Minutes","Seconds"].map(G=>this[`disabled${G}`]).map((G,H)=>{const N=E[H],ee=G;for(let le=0;le<N;le+=this.steps[H]||1){const Ce=this.timeSlots.map((we,We)=>We===H?le:we),pe=wk(this.date,...Ce);this.disabledDate(pe,!0)&&ee.push(le)}return ee.filter(Ek)});return v.reduce((G,H,N)=>(G[H]=P[N],G),{})}}},watch:{modelValue(v){let E=v[0]||du();E=new Date(E),this.date=E}},methods:{handleChange(v,E=!0){const P=new Date(this.date);Object.keys(v).forEach(G=>P[`set${Xg(G)}`](v[G])),E&&this.$emit("on-pick",P,"time")}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function C_(v,E,P,G,H,N){const ee=c.resolveComponent("time-spinner"),le=c.resolveComponent("Confirm");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls+"-body-wrapper"]),onMousedown:E[0]||(E[0]=c.withModifiers(()=>{},["prevent"]))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"])},[H.showDate?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.timePrefixCls+"-header"])},c.toDisplayString(N.visibleDate),3)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"])},[c.createVNode(ee,{ref:"timeSpinner","show-seconds":N.showSeconds,steps:P.steps,hours:N.timeSlots[0],minutes:N.timeSlots[1],seconds:N.timeSlots[2],"disabled-hours":N.disabledHMS.disabledHours,"disabled-minutes":N.disabledHMS.disabledMinutes,"disabled-seconds":N.disabledHMS.disabledSeconds,"hide-disabled-options":v.hideDisabledOptions,onOnChange:N.handleChange,onOnPickClick:v.handlePickClick},null,8,["show-seconds","steps","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),v.confirm?(c.openBlock(),c.createBlock(le,{key:1,onOnPickClear:v.handlePickClear,onOnPickSuccess:v.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):c.createCommentVNode("",!0)],2)],34)}var Jg=$(Tk,[["render",C_]]);const Yd={props:{datePanelLabel:Object,currentView:String,datePrefixCls:String}};function w_(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",null,[P.datePanelLabel?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass([P.datePrefixCls+"-header-label"]),onClick:E[0]||(E[0]=(...ee)=>P.datePanelLabel.labels[0].handler&&P.datePanelLabel.labels[0].handler(...ee))},c.toDisplayString(P.datePanelLabel.labels[0].label),3)),[[c.vShow,P.datePanelLabel.labels[0].type==="year"||P.currentView==="date"]]):c.createCommentVNode("",!0),P.datePanelLabel&&P.currentView==="date"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode(c.toDisplayString(P.datePanelLabel.separator),1)],64)):c.createCommentVNode("",!0),P.datePanelLabel?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass([P.datePrefixCls+"-header-label"]),onClick:E[1]||(E[1]=(...ee)=>P.datePanelLabel.labels[1].handler&&P.datePanelLabel.labels[1].handler(...ee))},c.toDisplayString(P.datePanelLabel.labels[1].label),3)),[[c.vShow,P.datePanelLabel.labels[1].type==="year"||P.currentView==="date"]]):c.createCommentVNode("",!0)])}var Nw=$(Yd,[["render",w_]]),E_={props:{showTime:{type:Boolean,default:!1},format:{type:String,default:"yyyy-MM-dd"},selectionMode:{type:String,validator(v){return re(v,["year","month","date","time"])},default:"date"},shortcuts:{type:Array,default:()=>[]},disabledDate:{type:Function,default:()=>!1},modelValue:{type:Array,default:()=>[du(),du()]},timePickerOptions:{default:()=>({}),type:Object},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},pickerType:{type:String,require:!0},focusedDate:{type:Date,required:!0}},computed:{isTime(){return this.currentView==="time"}},methods:{handleToggleTime(){this.currentView=this.currentView==="time"?"date":"time"}}};const T_="ivu-picker-panel",py="ivu-date-picker",Hh={name:"DatePickerPanel",mixins:[Kg,vt,E_],components:{Icon:oe,DateTable:tm,YearTable:__,MonthTable:Pl,TimePicker:Jg,Confirm:ed,datePanelLabel:Nw},emits:["on-selection-mode-change","on-pick"],props:{multiple:{type:Boolean,default:!1}},data(){const{selectionMode:v,modelValue:E}=this,P=E.slice().sort();return{prefixCls:T_,datePrefixCls:py,currentView:v||"date",pickerTable:this.getTableType(v),dates:P,panelDate:this.startDate||P[0]||new Date}},computed:{classes(){return[`${T_}-body-wrapper`,{[`${T_}-with-sidebar`]:this.shortcuts.length}]},panelPickerHandlers(){return this.pickerTable===`${this.currentView}-table`?this.handlePick:this.handlePreSelection},datePanelLabel(){const v=this.t("i.locale"),E=this.t("i.datepicker.datePanelLabel"),P=this.panelDate,{labels:G,separator:H}=Vh(v,E,P),N=ee=>()=>this.pickerTable=this.getTableType(ee);return{separator:H,labels:G.map(ee=>(ee.handler=N(ee.type),ee))}},timeDisabled(){return!this.dates[0]}},watch:{modelValue(v){this.dates=v;const E=this.multiple?this.dates[this.dates.length-1]:this.startDate||this.dates[0];this.panelDate=E||new Date},currentView(v){this.$emit("on-selection-mode-change",v),this.currentView==="time"&&c.nextTick(()=>{this.$refs.timePicker.$refs.timeSpinner.updateScroll()})},selectionMode(v){this.currentView=v,this.pickerTable=this.getTableType(v)},focusedDate(v){const E=v.getFullYear()!==this.panelDate.getFullYear(),P=E||v.getMonth()!==this.panelDate.getMonth();(E||P)&&(this.multiple||(this.panelDate=v))}},methods:{reset(){this.currentView=this.selectionMode,this.pickerTable=this.getTableType(this.currentView)},changeYear(v){this.selectionMode==="year"||this.pickerTable==="year-table"?this.panelDate=new Date(this.panelDate.getFullYear()+v*10,0,1):this.panelDate=Hf(this.panelDate,v*12)},getTableType(v){return v.match(/^time/)?"time-picker":`${v}-table`},changeMonth(v){this.panelDate=Hf(this.panelDate,v)},handlePreSelection(v){this.panelDate=v,this.pickerTable==="year-table"?this.pickerTable="month-table":this.pickerTable=this.getTableType(this.currentView)},handlePick(v,E){const{selectionMode:P,panelDate:G}=this;P==="year"?v=new Date(v.getFullYear(),0,1):P==="month"?v=new Date(G.getFullYear(),v.getMonth(),1):v=new Date(v),this.dates=[v],this.$emit("on-pick",v,!1,E||P)}}},my=["onClick"];function so(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("date-panel-label"),Ce=c.resolveComponent("time-picker"),pe=c.resolveComponent("Confirm");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),onMousedown:E[4]||(E[4]=c.withModifiers(()=>{},["prevent"]))},[v.shortcuts.length?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-sidebar"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(v.shortcuts,we=>(c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls+"-shortcut"]),key:we.text,onClick:We=>v.handleShortcutClick(we)},c.toDisplayString(we.text),11,my))),128))],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"])},[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.datePrefixCls+"-header"])},[c.createElementVNode("span",{class:c.normalizeClass(v.iconBtnCls("prev","-double")),onClick:E[0]||(E[0]=we=>N.changeYear(-1))},[c.createVNode(ee,{type:"ios-arrow-back"})],2),H.pickerTable==="date-table"?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(v.iconBtnCls("prev")),onClick:E[1]||(E[1]=we=>N.changeMonth(-1))},[c.createVNode(ee,{type:"ios-arrow-back"})],2)),[[c.vShow,H.currentView==="date"]]):c.createCommentVNode("",!0),c.createVNode(le,{"date-panel-label":N.datePanelLabel,"current-view":H.pickerTable.split("-").shift(),"date-prefix-cls":H.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),c.createElementVNode("span",{class:c.normalizeClass(v.iconBtnCls("next","-double")),onClick:E[2]||(E[2]=we=>N.changeYear(1))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2),H.pickerTable==="date-table"?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:1,class:c.normalizeClass(v.iconBtnCls("next")),onClick:E[3]||(E[3]=we=>N.changeMonth(1))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2)),[[c.vShow,H.currentView==="date"]]):c.createCommentVNode("",!0)],2),[[c.vShow,H.currentView!=="time"]]),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"])},[H.currentView!=="time"?(c.openBlock(),c.createBlock(c.resolveDynamicComponent(H.pickerTable),{key:0,ref:"pickerTable","table-date":H.panelDate,"show-week-numbers":v.showWeekNumbers,"model-value":H.dates,"selection-mode":v.selectionMode,"disabled-date":v.disabledDate,"focused-date":v.focusedDate,onOnPick:N.panelPickerHandlers,onOnPickClick:v.handlePickClick},null,40,["table-date","show-week-numbers","model-value","selection-mode","disabled-date","focused-date","onOnPick","onOnPickClick"])):c.createCommentVNode("",!0)],2),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"])},[H.currentView==="time"?(c.openBlock(),c.createBlock(Ce,c.mergeProps({key:0,ref:"timePicker","model-value":H.dates,format:v.format,"time-disabled":N.timeDisabled,"disabled-date":v.disabledDate,"focused-date":v.focusedDate},v.timePickerOptions,{onOnPick:N.handlePick,onOnPickClick:v.handlePickClick,onOnPickClear:v.handlePickClear,onOnPickSuccess:v.handlePickSuccess,onOnPickToggleTime:v.handleToggleTime}),null,16,["model-value","format","time-disabled","disabled-date","focused-date","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):c.createCommentVNode("",!0)],2),[[c.vShow,v.isTime]]),v.confirm?(c.openBlock(),c.createBlock(pe,{key:0,"show-time":v.showTime,"is-time":v.isTime,onOnPickToggleTime:v.handleToggleTime,onOnPickClear:v.handlePickClear,onOnPickSuccess:v.handlePickSuccess},null,8,["show-time","is-time","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):c.createCommentVNode("",!0)],2)],34)}var ll=$(Hh,[["render",so]]);const Tc="ivu-picker-panel",Qg="ivu-time-picker",Go=v=>v[0].toUpperCase()+v.slice(1),gy={name:"RangeTimePickerPanel",mixins:[Kg,vt,qg],components:{TimeSpinner:Ri,Confirm:ed},emits:["on-pick"],props:{steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){const[v,E]=this.modelValue.slice();return{prefixCls:Tc,timePrefixCls:Qg,showDate:!1,dateStart:v||du(),dateEnd:E||du()}},computed:{classes(){return[`${Tc}-body-wrapper`,`${Qg}-with-range`,{[`${Qg}-with-seconds`]:this.showSeconds}]},showSeconds(){return!!(this.format||"").match(/ss/)},leftDatePanelLabel(){return this.panelLabelConfig(this.date)},rightDatePanelLabel(){return this.panelLabelConfig(this.dateEnd)}},watch:{modelValue(v){const[E,P]=v.slice();this.dateStart=E||du(),this.dateEnd=P||du()}},methods:{panelLabelConfig(v){const E=this.t("i.locale"),P=this.t("i.datepicker.datePanelLabel"),{labels:G,separator:H}=Vh(E,P,v||du());return[G[0].label,H,G[1].label].join("")},handleChange(v,E,P=!0){const G=new Date(this.dateStart);let H=new Date(this.dateEnd);Object.keys(v).forEach(N=>{G[`set${Go(N)}`](v[N])}),Object.keys(E).forEach(N=>{H[`set${Go(N)}`](E[N])}),H<G&&(H=G),P&&this.$emit("on-pick",[G,H],"time")},handleStartChange(v){this.handleChange(v,{})},handleEndChange(v){this.handleChange({},v)},updateScroll(){this.$refs.timeSpinner.updateScroll(),this.$refs.timeSpinnerEnd.updateScroll()}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function A_(v,E,P,G,H,N){const ee=c.resolveComponent("time-spinner"),le=c.resolveComponent("Confirm");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),onMousedown:E[0]||(E[0]=c.withModifiers(()=>{},["prevent"]))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content",H.prefixCls+"-content-left"])},[c.createElementVNode("div",{class:c.normalizeClass([H.timePrefixCls+"-header"])},[H.showDate?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(N.leftDatePanelLabel),1)],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode(c.toDisplayString(v.t("i.datepicker.startTime")),1)],64))],2),c.createVNode(ee,{ref:"timeSpinner",steps:P.steps,"show-seconds":N.showSeconds,hours:P.modelValue[0]&&H.dateStart.getHours(),minutes:P.modelValue[0]&&H.dateStart.getMinutes(),seconds:P.modelValue[0]&&H.dateStart.getSeconds(),"disabled-hours":v.disabledHours,"disabled-minutes":v.disabledMinutes,"disabled-seconds":v.disabledSeconds,"hide-disabled-options":v.hideDisabledOptions,onOnChange:N.handleStartChange,onOnPickClick:v.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content",H.prefixCls+"-content-right"])},[c.createElementVNode("div",{class:c.normalizeClass([H.timePrefixCls+"-header"])},[H.showDate?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(N.rightDatePanelLabel),1)],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode(c.toDisplayString(v.t("i.datepicker.endTime")),1)],64))],2),c.createVNode(ee,{ref:"timeSpinnerEnd",steps:P.steps,"show-seconds":N.showSeconds,hours:P.modelValue[1]&&H.dateEnd.getHours(),minutes:P.modelValue[1]&&H.dateEnd.getMinutes(),seconds:P.modelValue[1]&&H.dateEnd.getSeconds(),"disabled-hours":v.disabledHours,"disabled-minutes":v.disabledMinutes,"disabled-seconds":v.disabledSeconds,"hide-disabled-options":v.hideDisabledOptions,onOnChange:N.handleEndChange,onOnPickClick:v.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),v.confirm?(c.openBlock(),c.createBlock(le,{key:0,onOnPickClear:v.handlePickClear,onOnPickSuccess:v.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):c.createCommentVNode("",!0)],2)],34)}var oa=$(gy,[["render",A_]]);const cl="ivu-picker-panel",ev="ivu-date-picker",M_=(v,E)=>!v||!E?0:v.getTime()-E.getTime(),k_={name:"RangeDatePickerPanel",mixins:[Kg,vt,E_],components:{Icon:oe,DateTable:tm,YearTable:__,MonthTable:Pl,TimePicker:oa,Confirm:ed,datePanelLabel:Nw},props:{splitPanels:{type:Boolean,default:!1}},data(){const[v,E]=this.modelValue.map(G=>G||du()),P=this.startDate?this.startDate:v;return{prefixCls:cl,datePrefixCls:ev,dates:this.modelValue,rangeState:{from:this.modelValue[0],to:this.modelValue[1],selecting:v&&!E},currentView:this.selectionMode||"range",leftPickerTable:`${this.selectionMode}-table`,rightPickerTable:`${this.selectionMode}-table`,leftPanelDate:P,rightPanelDate:new Date(P.getFullYear(),P.getMonth()+1,1)}},computed:{classes(){return[`${cl}-body-wrapper`,`${ev}-with-range`,{[`${cl}-with-sidebar`]:this.shortcuts.length,[`${ev}-with-week-numbers`]:this.showWeekNumbers}]},panelBodyClasses(){return[cl+"-body",{[cl+"-body-time"]:this.showTime,[cl+"-body-date"]:!this.showTime}]},leftDatePanelLabel(){return this.panelLabelConfig("left")},rightDatePanelLabel(){return this.panelLabelConfig("right")},leftDatePanelView(){return this.leftPickerTable.split("-").shift()},rightDatePanelView(){return this.rightPickerTable.split("-").shift()},timeDisabled(){return!(this.dates[0]&&this.dates[1])},preSelecting(){const v=`${this.currentView}-table`;return{left:this.leftPickerTable!==v,right:this.rightPickerTable!==v}},panelPickerHandlers(){return{left:this.preSelecting.left?this.handlePreSelection.bind(this,"left"):this.handleRangePick,right:this.preSelecting.right?this.handlePreSelection.bind(this,"right"):this.handleRangePick}}},watch:{modelValue(v){const E=v[0]?zg(v[0]):null,P=v[1]?zg(v[1]):null;this.dates=[E,P].sort(M_),this.rangeState={from:this.dates[0],to:this.dates[1],selecting:!1},this.setPanelDates(this.startDate||this.dates[0]||new Date)},currentView(v){const E=this.leftPanelDate.getMonth(),P=this.rightPanelDate.getMonth(),G=this.leftPanelDate.getFullYear()===this.rightPanelDate.getFullYear();v==="date"&&G&&E===P&&this.changePanelDate("right","Month",1),v==="month"&&G&&this.changePanelDate("right","FullYear",1),v==="year"&&G&&this.changePanelDate("right","FullYear",10)},selectionMode(v){this.currentView=v||"range"},focusedDate(v){this.setPanelDates(v||new Date)}},methods:{reset(){this.currentView=this.selectionMode,this.leftPickerTable=`${this.currentView}-table`,this.rightPickerTable=`${this.currentView}-table`},setPanelDates(v){this.leftPanelDate=v;const E=new Date(v.getFullYear(),v.getMonth()+1,1),P=this.dates[1]?this.dates[1].getTime():this.dates[1];this.rightPanelDate=this.splitPanels?new Date(Math.max(P,E.getTime())):E},panelLabelConfig(v){const E=this.t("i.locale"),P=this.t("i.datepicker.datePanelLabel"),G=le=>{const Ce=le=="month"?this.showMonthPicker:this.showYearPicker;return()=>Ce(v)},H=this[`${v}PanelDate`],{labels:N,separator:ee}=Vh(E,P,H);return{separator:ee,labels:N.map(le=>(le.handler=G(le.type),le))}},prevYear(v){const E=this.currentView==="year"?-10:-1;this.changePanelDate(v,"FullYear",E)},nextYear(v){const E=this.currentView==="year"?10:1;this.changePanelDate(v,"FullYear",E)},prevMonth(v){this.changePanelDate(v,"Month",-1)},nextMonth(v){this.changePanelDate(v,"Month",1)},changePanelDate(v,E,P,G=!0){const H=new Date(this[`${v}PanelDate`]);if(E==="FullYear"?H[`set${E}`](H[`get${E}`]()+P):H[`set${E}`](H[`get${E}`]()+P,1),this[`${v}PanelDate`]=H,!!G)if(this.splitPanels){const N=v==="left"?"right":"left";v==="left"&&this.leftPanelDate>=this.rightPanelDate&&this.changePanelDate(N,E,1),v==="right"&&this.rightPanelDate<=this.leftPanelDate&&this.changePanelDate(N,E,-1)}else{const N=v==="left"?"right":"left",ee=this[`${N}PanelDate`],le=new Date(ee);if(E==="Month"){const Ce=new Date(le.getFullYear(),le.getMonth()+P+1,0).getDate();le.setDate(Math.min(Ce,le.getDate()))}le[`set${E}`](le[`get${E}`]()+P),this[`${N}PanelDate`]=le}},showYearPicker(v){this[`${v}PickerTable`]="year-table"},showMonthPicker(v){this[`${v}PickerTable`]="month-table"},handlePreSelection(v,E){if(this[`${v}PanelDate`]=E,this[`${v}PickerTable`]==="year-table"?this[`${v}PickerTable`]="month-table":this[`${v}PickerTable`]=`${this.currentView}-table`,!this.splitPanels){const P=v==="left"?"right":"left";this[`${P}PanelDate`]=E;const G=P==="left"?-1:1;this.changePanelDate(P,"Month",G,!1)}},handleRangePick(v,E){if(this.rangeState.selecting||this.currentView==="time"){if(this.currentView==="time")this.dates=v;else{const[P,G]=[this.rangeState.from,v].sort(M_);this.dates=[P,G],this.rangeState={from:P,to:G,selecting:!1}}this.handleConfirm(!1,E||"date")}else this.rangeState={from:v,to:null,selecting:!0}},handleChangeRange(v){this.rangeState.to=v}}},vy=["onClick"];function D_(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("date-panel-label"),Ce=c.resolveComponent("time-picker"),pe=c.resolveComponent("Confirm");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),onMousedown:E[8]||(E[8]=c.withModifiers(()=>{},["prevent"]))},[v.shortcuts.length?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-sidebar"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(v.shortcuts,we=>(c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls+"-shortcut"]),key:we.text,onClick:We=>v.handleShortcutClick(we)},c.toDisplayString(we.text),11,vy))),128))],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass(N.panelBodyClasses)},[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content",H.prefixCls+"-content-left"])},[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.datePrefixCls+"-header"])},[c.createElementVNode("span",{class:c.normalizeClass(v.iconBtnCls("prev","-double")),onClick:E[0]||(E[0]=we=>N.prevYear("left"))},[c.createVNode(ee,{type:"ios-arrow-back"})],2),H.leftPickerTable==="date-table"?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(v.iconBtnCls("prev")),onClick:E[1]||(E[1]=we=>N.prevMonth("left"))},[c.createVNode(ee,{type:"ios-arrow-back"})],2)),[[c.vShow,H.currentView==="date"]]):c.createCommentVNode("",!0),c.createVNode(le,{"date-panel-label":N.leftDatePanelLabel,"current-view":N.leftDatePanelView,"date-prefix-cls":H.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),P.splitPanels||H.leftPickerTable!=="date-table"?(c.openBlock(),c.createElementBlock("span",{key:1,class:c.normalizeClass(v.iconBtnCls("next","-double")),onClick:E[2]||(E[2]=we=>N.nextYear("left"))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2)):c.createCommentVNode("",!0),P.splitPanels&&H.leftPickerTable==="date-table"?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass(v.iconBtnCls("next")),onClick:E[3]||(E[3]=we=>N.nextMonth("left"))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2)),[[c.vShow,H.currentView==="date"]]):c.createCommentVNode("",!0)],2),[[c.vShow,H.currentView!=="time"]]),H.currentView!=="time"?(c.openBlock(),c.createBlock(c.resolveDynamicComponent(H.leftPickerTable),{key:0,ref:"leftYearTable","table-date":H.leftPanelDate,"selection-mode":"range","disabled-date":v.disabledDate,"range-state":H.rangeState,"show-week-numbers":v.showWeekNumbers,"model-value":N.preSelecting.left?[H.dates[0]]:H.dates,"focused-date":v.focusedDate,onOnChangeRange:N.handleChangeRange,onOnPick:N.panelPickerHandlers.left,onOnPickClick:v.handlePickClick},null,40,["table-date","disabled-date","range-state","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):c.createCommentVNode("",!0)],2),[[c.vShow,!v.isTime]]),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content",H.prefixCls+"-content-right"])},[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.datePrefixCls+"-header"])},[P.splitPanels||H.rightPickerTable!=="date-table"?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(v.iconBtnCls("prev","-double")),onClick:E[4]||(E[4]=we=>N.prevYear("right"))},[c.createVNode(ee,{type:"ios-arrow-back"})],2)):c.createCommentVNode("",!0),P.splitPanels&&H.rightPickerTable==="date-table"?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:1,class:c.normalizeClass(v.iconBtnCls("prev")),onClick:E[5]||(E[5]=we=>N.prevMonth("right"))},[c.createVNode(ee,{type:"ios-arrow-back"})],2)),[[c.vShow,H.currentView==="date"]]):c.createCommentVNode("",!0),c.createVNode(le,{"date-panel-label":N.rightDatePanelLabel,"current-view":N.rightDatePanelView,"date-prefix-cls":H.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),c.createElementVNode("span",{class:c.normalizeClass(v.iconBtnCls("next","-double")),onClick:E[6]||(E[6]=we=>N.nextYear("right"))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2),H.rightPickerTable==="date-table"?c.withDirectives((c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass(v.iconBtnCls("next")),onClick:E[7]||(E[7]=we=>N.nextMonth("right"))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2)),[[c.vShow,H.currentView==="date"]]):c.createCommentVNode("",!0)],2),[[c.vShow,H.currentView!=="time"]]),H.currentView!=="time"?(c.openBlock(),c.createBlock(c.resolveDynamicComponent(H.rightPickerTable),{key:0,ref:"rightYearTable","table-date":H.rightPanelDate,"selection-mode":"range","range-state":H.rangeState,"disabled-date":v.disabledDate,"show-week-numbers":v.showWeekNumbers,"model-value":N.preSelecting.right?[H.dates[H.dates.length-1]]:H.dates,"focused-date":v.focusedDate,onOnChangeRange:N.handleChangeRange,onOnPick:N.panelPickerHandlers.right,onOnPickClick:v.handlePickClick},null,40,["table-date","range-state","disabled-date","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):c.createCommentVNode("",!0)],2),[[c.vShow,!v.isTime]]),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"])},[H.currentView==="time"?(c.openBlock(),c.createBlock(Ce,c.mergeProps({key:0,ref:"timePicker","model-value":H.dates,format:v.format,"time-disabled":N.timeDisabled},v.timePickerOptions,{onOnPick:N.handleRangePick,onOnPickClick:v.handlePickClick,onOnPickClear:v.handlePickClear,onOnPickSuccess:v.handlePickSuccess,onOnPickToggleTime:v.handleToggleTime}),null,16,["model-value","format","time-disabled","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):c.createCommentVNode("",!0)],2),[[c.vShow,v.isTime]]),v.confirm?(c.openBlock(),c.createBlock(pe,{key:0,"show-time":v.showTime,"is-time":v.isTime,"time-disabled":N.timeDisabled,onOnPickToggleTime:v.handleToggleTime,onOnPickClear:v.handlePickClear,onOnPickSuccess:v.handlePickSuccess},null,8,["show-time","is-time","time-disabled","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):c.createCommentVNode("",!0)],2)],34)}var yy=$(k_,[["render",D_]]),fu={name:"CalendarPicker",mixins:[hu],props:{type:{validator(v){return re(v,["year","month","date","daterange","datetime","datetimerange"])},default:"date"}},components:{DatePickerPanel:ll,RangeDatePickerPanel:yy},computed:{panel(){return this.type==="daterange"||this.type==="datetimerange"?"RangeDatePickerPanel":"DatePickerPanel"},ownPickerProps(){return this.options}}},Gh={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};const P_={name:"Description",inject:["DescriptionListInstance"],props:{term:{type:String}},computed:{styles(){let v={};return this.DescriptionListInstance.gutter!==0&&(v={paddingLeft:this.DescriptionListInstance.gutter/2+"px",paddingRight:this.DescriptionListInstance.gutter/2+"px"}),v}},render(){let v;(this.term||this.$slots.term)&&(this.$slots.term?v=c.h("div",{class:"ivu-description-term"},this.$slots.term()):v=c.h("div",{class:"ivu-description-term"},this.term));const E=c.h("div",{class:"ivu-description-detail"},this.$slots.default()),P=v?[v,E]:[E];return c.h(Sa,x(S({},Gh[this.DescriptionListInstance.col]),{style:this.styles}),()=>P)}},kt={name:"DescriptionList",components:{Row:pc},provide(){return{DescriptionListInstance:this}},props:{layout:{validator(v){return re(v,["horizontal","vertical"])},default:"horizontal"},title:{type:String},gutter:{type:Number,default:32},col:{validator(v){return re(v,[1,2,3,4])},default:3}}},tv={key:0,class:"ivu-description-list-title"};function rm(v,E,P,G,H,N){const ee=c.resolveComponent("Row");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-description-list",{"ivu-description-list-vertical":P.layout==="vertical"}])},[P.title||v.$slots.title?(c.openBlock(),c.createElementBlock("div",tv,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])])):c.createCommentVNode("",!0),c.createVNode(ee,{gutter:P.gutter},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),_:3},8,["gutter"])],2)}var ul=$(kt,[["render",rm]]);const td="ivu-divider",xi={name:"Divider",props:{type:{type:String,default:"horizontal",validator(v){return re(v,["horizontal","vertical"])}},orientation:{type:String,default:"center",validator(v){return re(v,["left","right","center"])}},dashed:{type:Boolean,default:!1},size:{validator(v){return re(v,["small","default"])},default:"default"},plain:{type:Boolean,default:!1}},computed:{hasSlot(){return!!this.$slots.default},classes(){return[`${td}`,`${td}-${this.type}`,`${td}-${this.size}`,{[`${td}-with-text`]:this.hasSlot&&this.orientation==="center",[`${td}-with-text-${this.orientation}`]:this.hasSlot,[`${td}-dashed`]:!!this.dashed,[`${td}-plain`]:this.plain}]},slotClasses(){return[`${td}-inner-text`]}}};function Ow(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[N.hasSlot?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(N.slotClasses)},[c.renderSlot(v.$slots,"default")],2)):c.createCommentVNode("",!0)],2)}var Ac=$(xi,[["render",Ow]]),nv={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!A)return;let v=window.innerWidth;if(!v){const E=document.documentElement.getBoundingClientRect();v=E.right-Math.abs(E.left)}this.bodyIsOverflowing=document.body.clientWidth<v,this.bodyIsOverflowing&&(this.scrollBarWidth=_e())},checkMaskInVisible(){let v=A?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(v).every(E=>E.style.display==="none"||E.classList.contains("fade-leave-to"))},setScrollBar(){A&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){A&&(document.body.style.paddingRight="")},addScrollEffect(){!this.lockScroll||(this.checkScrollBar(),this.setScrollBar(),A&&(document.body.style.overflow="hidden"))},removeScrollEffect(){!this.lockScroll||A&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};const bs="ivu-drawer",Bw={name:"Drawer",mixins:[nv],components:{Icon:oe},emits:["on-close","on-resize-width","on-visible-change","update:modelValue","on-drag"],provide(){return{DrawerInstance:this}},props:{modelValue:{type:Boolean,default:!1},title:{type:String},width:{type:[Number,String],default:256},height:{type:[Number,String],default:256},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskStyle:{type:Object},styles:{type:Object},scrollable:{type:Boolean,default:!1},placement:{validator(v){return re(v,["left","right","top","bottom"])},default:"right"},zIndex:{type:Number,default:1e3},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!0:v.$VIEWUI.transfer}},className:{type:String},inner:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},beforeClose:Function},data(){return{prefixCls:bs,visible:this.modelValue,wrapShow:!1,showHead:!0,canMove:!1,dragWidth:this.width,dragHeight:this.height,wrapperWidth:this.width,wrapperHeight:this.height,wrapperLeft:0,minWidth:256,minHeight:256,id:mt(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${bs}-wrap`,{[`${bs}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${bs}-no-mask`]:!this.mask,[`${bs}-wrap-inner`]:this.inner,[`${bs}-wrap-dragging`]:this.canMove}]},mainStyles(){let v={};if(this.placement==="left"||this.placement==="right"){const E=parseInt(this.dragWidth),P={width:E<=100?`${E}%`:`${E}px`};Object.assign(v,P)}else{const E=parseInt(this.dragHeight),P={height:E<=100?`${E}%`:`${E}px`};Object.assign(v,P)}return v},contentClasses(){return[`${bs}-content`,{[`${bs}-content-no-mask`]:!this.mask}]},classes(){return[`${bs}`,`${bs}-${this.placement}`,{[`${bs}-no-header`]:!this.showHead,[`${bs}-inner`]:this.inner}]},maskClasses(){return[`${bs}-mask`,{[`${bs}-mask-inner`]:this.inner}]},transitionName(){return this.placement==="left"||this.placement==="right"?`move-${this.placement}`:this.placement==="top"?"move-up":"move-down"}},methods:{close(){if(!this.beforeClose)return this.handleClose();const v=this.beforeClose();v&&v.then?v.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-close")},handleMask(){this.maskClosable&&this.mask&&this.close()},handleWrapClick(v){const E=v.target.getAttribute("class");E&&E.indexOf(`${bs}-wrap`)>-1&&this.handleMask()},handleMousemove(v){if(!this.canMove||!this.draggable)return;this.handleSetWrapperWidth();const E=v.pageX-this.wrapperLeft;let P=this.placement==="right"?this.wrapperWidth-E:E;P=Math.max(P,parseFloat(this.minWidth)),v.atMin=P===parseFloat(this.minWidth),P<=100&&(P=P/this.wrapperWidth*100),this.dragWidth=P,this.$emit("on-resize-width",parseInt(this.dragWidth)),this.$emit("on-drag","dragging",parseInt(this.dragWidth))},handleSetWrapperWidth(){const{width:v,left:E}=this.$refs.drawer.getBoundingClientRect();this.wrapperWidth=v,this.wrapperLeft=E},handleMouseup(){!this.draggable||(this.canMove=!1,this.$emit("on-drag","end"))},handleTriggerMousedown(){this.canMove=!0,window.getSelection().removeAllRanges(),this.$emit("on-drag","start")},addDrawer(){const v=this.$root;v.drawerList||(v.drawerList=[]),v.drawerList.push({id:this.id,drawer:this})},removeDrawer(){const v=this.$root;if(!v.drawerList)return;const E=v.drawerList.findIndex(P=>P.id===this.id);v.drawerList.splice(E,1)}},mounted(){this.visible&&(this.wrapShow=!0);let v=!0;this.$slots.header===void 0&&!this.title&&(v=!1),this.showHead=v,this.addDrawer(),R(document,"mousemove",this.handleMousemove),R(document,"mouseup",this.handleMouseup),this.handleSetWrapperWidth()},beforeUnmount(){this.removeDrawer(),L(document,"mousemove",this.handleMousemove),L(document,"mouseup",this.handleMouseup),this.removeScrollEffect()},watch:{modelValue(v){this.visible=v},visible(v){v===!1?this.timer=setTimeout(()=>{this.wrapShow=!1,this.$root.drawerList.map(E=>E.drawer).filter(E=>E.id!==this.id).some(E=>E.visible&&!E.scrollable)||this.removeScrollEffect()},300):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(E=>{E.table.handleOnVisibleChange(v)}),this.sliderList.forEach(E=>{E.slider.handleOnVisibleChange(v)}),this.$emit("on-visible-change",v)},scrollable(v){v?this.removeScrollEffect():this.addScrollEffect()},title(v){this.$slots.header===void 0&&(this.showHead=!!v)},width(v){this.dragWidth=v},height(v){this.dragHeight=v}}},by={ref:"drawer"},R_=c.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger"},[c.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger-point"},[c.createElementVNode("i"),c.createElementVNode("i"),c.createElementVNode("i"),c.createElementVNode("i"),c.createElementVNode("i")])],-1);function I_(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createBlock(c.Teleport,{to:"body",disabled:!P.transfer},[c.createElementVNode("div",by,[c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[P.mask?c.withDirectives((c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.maskClasses),style:c.normalizeStyle(P.maskStyle),onClick:E[0]||(E[0]=(...le)=>N.handleMask&&N.handleMask(...le))},null,6)),[[c.vShow,H.visible]]):c.createCommentVNode("",!0)]),_:1}),c.createElementVNode("div",{class:c.normalizeClass(N.wrapClasses),onClick:E[3]||(E[3]=(...le)=>N.handleWrapClick&&N.handleWrapClick(...le))},[c.createVNode(c.Transition,{name:N.transitionName},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.mainStyles)},[c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses),ref:"content"},[P.closable?(c.openBlock(),c.createElementBlock("a",{key:0,class:"ivu-drawer-close",onClick:E[1]||(E[1]=(...le)=>N.close&&N.close(...le))},[c.renderSlot(v.$slots,"close",{},()=>[c.createVNode(ee,{type:"ios-close"})])])):c.createCommentVNode("",!0),H.showHead?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass([H.prefixCls+"-header"])},[c.renderSlot(v.$slots,"header",{},()=>[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-header-inner"])},c.toDisplayString(P.title),3)])],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"]),style:c.normalizeStyle(P.styles)},[c.renderSlot(v.$slots,"default")],6)],2),P.draggable&&(P.placement==="left"||P.placement==="right")?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(["ivu-drawer-drag","ivu-drawer-drag-"+P.placement]),onMousedown:E[2]||(E[2]=(...le)=>N.handleTriggerMousedown&&N.handleTriggerMousedown(...le))},[c.renderSlot(v.$slots,"trigger",{},()=>[R_])],34)):c.createCommentVNode("",!0)],6),[[c.vShow,H.visible]])]),_:3},8,["name"])],2)],512)],8,["disabled"])}var Fw=$(Bw,[["render",I_]]);const rv="ivu-dropdown-item",Ka={name:"DropdownItem",props:{name:{type:[String,Number]},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},divided:{type:Boolean,default:!1}},computed:{classes(){return[`${rv}`,{[`${rv}-disabled`]:this.disabled,[`${rv}-selected`]:this.selected,[`${rv}-divided`]:this.divided}]}},methods:{handleClick(){if(this.disabled)return;const v=Tt(this,"Dropdown");this.$parent&&this.$parent.$options.name==="Dropdown"?this.$parent.handleHaschildClick():v&&v.$options.name==="Dropdown"&&v.handleHoverClick(),v.handleItemClick(this.name)}}};function Xa(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.classes),onClick:E[0]||(E[0]=(...ee)=>N.handleClick&&N.handleClick(...ee))},[c.renderSlot(v.$slots,"default")],2)}var _s=$(Ka,[["render",Xa]]);const ss=(v="")=>v.split("").reduce((E,P)=>{const G=P.charCodeAt(0);return G>=0&&G<=128?E+1:E+2},0),Ss=(v="",E)=>{let P=0;return v.split("").reduce((G,H)=>{const N=H.charCodeAt(0);return N>=0&&N<=128?P+=1:P+=2,P<=E?G+H:G},"")},ma={name:"Ellipsis",components:{Tooltip:bn},emits:["on-show","on-hide"],props:{text:{type:String},height:{type:Number},lines:{type:Number},length:{type:Number},fullWidthRecognition:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},theme:{validator(v){return re(v,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"}},data(){return{oversize:!1,computedReady:!1,computedText:""}},watch:{disabled(){this.init()},text(){this.init()},height(){this.init()}},mounted(){this.init()},methods:{init(){this.disabled||(this.computeText(),this.limitShow())},computeText(){this.oversize=!1,this.computedReady=!1,c.nextTick(()=>{let v=this.$refs.text,E=this.$el,P=this.$refs.more,G=1e3,H=this.text,N=this.height;if(!N&&this.lines&&(N=parseInt(Ee(E,"lineHeight"),10)*this.lines),v){if(this.length)(this.fullWidthRecognition?ss(H):H.length)>this.length&&(this.oversize=!0,P.style.display="inline-block",H=this.fullWidthRecognition?Ss(H,this.length):H.slice(0,this.length));else if(E.offsetHeight>N)for(this.oversize=!0,P.style.display="inline-block";E.offsetHeight>N&&G>0;)E.offsetHeight>N*3?v.innerText=H=H.substring(0,Math.floor(H.length/2)):v.innerText=H=H.substring(0,H.length-1),G--}this.computedText=H})},limitShow(){this.computedReady=!0,c.nextTick(()=>{let v=this.$refs.text,E=this.$el;v&&(v.innerText=this.computedText,E.offsetHeight>this.height?this.$emit("on-hide"):this.$emit("on-show"))})}}},$_={class:"ivu-ellipsis"},ov={class:"ivu-ellipsis-more",ref:"more"},L_={class:"ivu-ellipsis-more",ref:"more"},N_={key:1,class:"ivu-ellipsis-hidden"},O_={class:"ivu-ellipsis-more",ref:"more"};function Vw(v,E,P,G,H,N){const ee=c.resolveComponent("Tooltip");return c.openBlock(),c.createElementBlock("div",$_,[c.renderSlot(v.$slots,"prefix",{class:"ivu-ellipsis-prefix"}),H.computedReady?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[P.tooltip?(c.openBlock(),c.createBlock(ee,{key:0,content:P.text,theme:P.theme,"max-width":P.maxWidth,placement:P.placement,transfer:P.transfer},{default:c.withCtx(()=>[c.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},c.toDisplayString(P.text),513),c.withDirectives(c.createElementVNode("span",ov,[c.renderSlot(v.$slots,"more",{},()=>[c.createTextVNode("...")])],512),[[c.vShow,H.oversize]]),c.renderSlot(v.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]),_:3},8,["content","theme","max-width","placement","transfer"])):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},c.toDisplayString(P.text),513),c.withDirectives(c.createElementVNode("span",L_,[c.renderSlot(v.$slots,"more",{},()=>[c.createTextVNode("...")])],512),[[c.vShow,H.oversize]]),c.renderSlot(v.$slots,"suffix",{class:"ivu-ellipsis-suffix"})],64))],64)):(c.openBlock(),c.createElementBlock("div",N_,[c.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},c.toDisplayString(P.text),513),c.withDirectives(c.createElementVNode("span",O_,[c.renderSlot(v.$slots,"more",{},()=>[c.createTextVNode("...")])],512),[[c.vShow,H.oversize]]),c.renderSlot(v.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]))])}var iv=$(ma,[["render",Vw]]);const Sy={name:"Email",mixins:[Sg],data(){return{className:"ivu-login-mail",prefix:"ios-mail-outline",placeholder:"请输入邮箱",type:"email"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:ou.Email,trigger:"change"},{type:"email",message:"输入的邮箱格式不正确！",trigger:"change"}]}}}};var xy={403:{img:"https://file.iviewui.com/iview-pro/icon-403.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-403-color.svg",title:"403",desc:"抱歉，你无权访问该页面"},404:{img:"https://file.iviewui.com/iview-pro/icon-404.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-404-color.svg",title:"404",desc:"抱歉，你访问的页面不存在"},500:{img:"https://file.iviewui.com/iview-pro/icon-500.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-500-color.svg",title:"500",desc:"抱歉，服务器出错了"}};const Ak={name:"Exception",components:{Button:Oi},props:{type:{validator(v){return re(v,["403","404","500",403,404,500])},default:"404"},title:{type:String},desc:{type:String},img:{type:String},imgColor:{type:Boolean,default:!1},backText:{type:String,default:"返回首页"},redirect:{type:String,default:"/"}},computed:{imgPath(){return this.img?this.img:this.imgColor?xy[this.type].imgColor:xy[this.type].img},titleText(){return this.title?this.title:xy[this.type].title},descText(){return this.desc?this.desc:xy[this.type].desc}}},zw={class:"ivu-exception"},Mk={class:"ivu-exception-img"},B_={class:"ivu-exception-content"},Cy={class:"ivu-exception-content-desc"},Uw={class:"ivu-exception-content-actions"};function lN(v,E,P,G,H,N){const ee=c.resolveComponent("Button");return c.openBlock(),c.createElementBlock("div",zw,[c.createElementVNode("div",Mk,[c.createElementVNode("div",{class:"ivu-exception-img-element",style:c.normalizeStyle({"background-image":"url("+N.imgPath+")"})},null,4)]),c.createElementVNode("div",B_,[c.createElementVNode("h1",null,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(N.titleText),1)])]),c.createElementVNode("div",Cy,[c.renderSlot(v.$slots,"desc",{},()=>[c.createTextVNode(c.toDisplayString(N.descText),1)])]),c.createElementVNode("div",Uw,[c.renderSlot(v.$slots,"actions",{},()=>[c.createVNode(ee,{to:P.redirect,type:"primary",size:"large"},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(P.backText),1)]),_:1},8,["to"])])])])])}var Us=$(Ak,[["render",lN]]);const cN="ivu-layout",pu={name:"Footer",computed:{wrapClasses(){return`${cN}-footer`}}};function sn(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[c.renderSlot(v.$slots,"default")],2)}var F_=$(pu,[["render",sn]]);const Ba={name:"FooterToolbar",props:{extra:{type:String}}},kk={class:"ivu-footer-toolbar"},V_={key:0,class:"ivu-footer-toolbar-left"},Hw={class:"ivu-footer-toolbar-right"};function dl(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",kk,[P.extra||v.$slots.extra?(c.openBlock(),c.createElementBlock("div",V_,[c.renderSlot(v.$slots,"extra",{},()=>[c.createTextVNode(c.toDisplayString(P.extra),1)])])):c.createCommentVNode("",!0),c.createElementVNode("div",Hw,[c.renderSlot(v.$slots,"default")])])}var Gw=$(Ba,[["render",dl]]);const wy="ivu-form",Il={name:"iForm",emits:["on-validate"],provide(){return{FormInstance:this}},props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator(v){return re(v,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},autocomplete:{validator(v){return re(v,["on","off"])},default:"off"},hideRequiredMark:{type:Boolean,default:!1},labelColon:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1}},data(){return{fields:[]}},computed:{classes(){return[`${wy}`,`${wy}-label-${this.labelPosition}`,{[`${wy}-inline`]:this.inline,[`${wy}-hide-required-mark`]:this.hideRequiredMark}]},colon(){let v="";return this.labelColon&&(v=typeof this.labelColon=="boolean"?":":this.labelColon),v}},methods:{resetFields(){this.fields.forEach(v=>{v.resetField()})},validate(v){return new Promise(E=>{let P=!0,G=0;this.fields.length===0&&(E(P),typeof v=="function"&&v(P)),this.fields.forEach(H=>{H.validate("",N=>{N&&(P=!1),++G===this.fields.length&&(E(P),typeof v=="function"&&v(P))})})})},validateField(v,E){const P=this.fields.filter(G=>G.prop===v)[0];if(!P)throw new Error("[View UI warn]: must call validateField with valid prop string!");P.validate("",E)},addField(v){v&&this.fields.push(v)},removeField(v){v.prop&&this.fields.splice(this.fields.indexOf(v),1)}},watch:{rules(){this.validate()}}},z_=["autocomplete"];function av(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("form",{class:c.normalizeClass(N.classes),autocomplete:P.autocomplete},[c.renderSlot(v.$slots,"default")],10,z_)}var ec=$(Il,[["render",av]]);const Mc={name:"GlobalFooter",components:{Icon:oe},props:{links:{type:Array,default(){return[]}},copyright:{type:String}}},wn={class:"ivu-global-footer"},$l={key:0,class:"ivu-global-footer-links"},Ww=["href","target","title"],Yw={key:1,class:"ivu-global-footer-copyright"};function U_(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("footer",wn,[P.links.length||v.$slots.links?(c.openBlock(),c.createElementBlock("div",$l,[c.renderSlot(v.$slots,"links",{},()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.links,le=>(c.openBlock(),c.createElementBlock("a",{href:le.href,target:le.blankTarget?"_blank":"_self",key:le.key,title:le.title},[le.icon?(c.openBlock(),c.createBlock(ee,{key:0,type:le.icon},null,8,["type"])):le.customIcon?(c.openBlock(),c.createBlock(ee,{key:1,custom:le.customIcon},null,8,["custom"])):c.createCommentVNode("",!0),c.createTextVNode(" "+c.toDisplayString(le.title),1)],8,Ww))),128))])])):c.createCommentVNode("",!0),P.copyright||v.$slots.copyright?(c.openBlock(),c.createElementBlock("div",Yw,[c.renderSlot(v.$slots,"copyright",{},()=>[c.createTextVNode(c.toDisplayString(P.copyright),1)])])):c.createCommentVNode("",!0)])}var H_=$(Mc,[["render",U_]]),sv={exports:{}},G_=sv.exports={};G_.forEach=function(v,E){for(var P=0;P<v.length;P++){var G=E(v[P]);if(G)return G}};var Dk=function(v){var E=v.stateHandler.getState;function P(ee){var le=E(ee);return le&&!!le.isDetectable}function G(ee){E(ee).isDetectable=!0}function H(ee){return!!E(ee).busy}function N(ee,le){E(ee).busy=!!le}return{isDetectable:P,markAsDetectable:G,isBusy:H,markBusy:N}},W_=function(v){var E={};function P(ee){var le=v.get(ee);return le===void 0?[]:E[le]||[]}function G(ee,le){var Ce=v.get(ee);E[Ce]||(E[Ce]=[]),E[Ce].push(le)}function H(ee,le){for(var Ce=P(ee),pe=0,we=Ce.length;pe<we;++pe)if(Ce[pe]===le){Ce.splice(pe,1);break}}function N(ee){var le=P(ee);!le||(le.length=0)}return{get:P,add:G,removeListener:H,removeAllListeners:N}},Pk=function(){var v=1;function E(){return v++}return{generate:E}},xs=function(v){var E=v.idGenerator,P=v.stateHandler.getState;function G(N){var ee=P(N);return ee&&ee.id!==void 0?ee.id:null}function H(N){var ee=P(N);if(!ee)throw new Error("setId required the element to have a resize detection state.");var le=E.generate();return ee.id=le,le}return{get:G,set:H}},lv=function(v){function E(){}var P={log:E,warn:E,error:E};if(!v&&window.console){var G=function(H,N){H[N]=function(){var ee=console[N];if(ee.apply)ee.apply(console,arguments);else for(var le=0;le<arguments.length;le++)ee(arguments[le])}};G(P,"log"),G(P,"warn"),G(P,"error")}return P},Y_={exports:{}},jw=Y_.exports={};jw.isIE=function(v){function E(){var G=navigator.userAgent.toLowerCase();return G.indexOf("msie")!==-1||G.indexOf("trident")!==-1||G.indexOf(" edge/")!==-1}if(!E())return!1;if(!v)return!0;var P=function(){var G,H=3,N=document.createElement("div"),ee=N.getElementsByTagName("i");do N.innerHTML="<!--[if gt IE "+ ++H+"]><i></i><![endif]-->";while(ee[0]);return H>4?H:G}();return v===P},jw.isLegacyOpera=function(){return!!window.opera};var Ey={exports:{}},Rk=Ey.exports={};Rk.getOption=Zw;function Zw(v,E,P){var G=v[E];return G==null&&P!==void 0?P:G}var j_=Ey.exports,cv=function(v){v=v||{};var E=v.reporter,P=j_.getOption(v,"async",!0),G=j_.getOption(v,"auto",!0);G&&!P&&(E&&E.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),P=!0);var H=qw(),N,ee=!1;function le(ct,ot){!ee&&G&&P&&H.size()===0&&we(),H.add(ct,ot)}function Ce(){for(ee=!0;H.size();){var ct=H;H=qw(),ct.process()}ee=!1}function pe(ct){ee||(ct===void 0&&(ct=P),N&&(We(N),N=null),ct?we():Ce())}function we(){N=ut(Ce)}function We(ct){var ot=clearTimeout;return ot(ct)}function ut(ct){var ot=function(Oe){return setTimeout(Oe,0)};return ot(ct)}return{add:le,force:pe}};function qw(){var v={},E=0,P=0,G=0;function H(le,Ce){Ce||(Ce=le,le=0),le>P?P=le:le<G&&(G=le),v[le]||(v[le]=[]),v[le].push(Ce),E++}function N(){for(var le=G;le<=P;le++)for(var Ce=v[le],pe=0;pe<Ce.length;pe++){var we=Ce[pe];we()}}function ee(){return E}return{add:H,process:N,size:ee}}var Ty="_erd";function Ik(v){return v[Ty]={},Kw(v)}function Kw(v){return v[Ty]}function $k(v){delete v[Ty]}var Z_={initState:Ik,getState:Kw,cleanState:$k},uv=Y_.exports,om=function(v){v=v||{};var E=v.reporter,P=v.batchProcessor,G=v.stateHandler.getState;if(!E)throw new Error("Missing required dependency: reporter.");function H(pe,we){function We(){we(pe)}if(uv.isIE(8))G(pe).object={proxy:We},pe.attachEvent("onresize",We);else{var ut=le(pe);if(!ut)throw new Error("Element is not detectable by this strategy.");ut.contentDocument.defaultView.addEventListener("resize",We)}}function N(pe){var we=v.important?" !important; ":"; ";return(pe.join(we)+we).trim()}function ee(pe,we,We){We||(We=we,we=pe,pe=null),pe=pe||{},pe.debug;function ut(ct,ot){var Oe=N(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),wt=!1,Er=window.getComputedStyle(ct),ir=ct.offsetWidth,Wn=ct.offsetHeight;G(ct).startSize={width:ir,height:Wn};function jt(){function It(){if(Er.position==="static"){ct.style.setProperty("position","relative",pe.important?"important":"");var Pr=function(cr,ar,uo,Tr){function Ln(nr){return nr.replace(/[^-\d\.]/g,"")}var Yn=uo[Tr];Yn!=="auto"&&Ln(Yn)!=="0"&&(cr.warn("An element that is positioned static has style."+Tr+"="+Yn+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Tr+" will be set to 0. Element: ",ar),ar.style.setProperty(Tr,"0",pe.important?"important":""))};Pr(E,ct,Er,"top"),Pr(E,ct,Er,"right"),Pr(E,ct,Er,"bottom"),Pr(E,ct,Er,"left")}}function Cn(){wt||It();function Pr(ar,uo){if(!ar.contentDocument){var Tr=G(ar);Tr.checkForObjectDocumentTimeoutId&&window.clearTimeout(Tr.checkForObjectDocumentTimeoutId),Tr.checkForObjectDocumentTimeoutId=setTimeout(function(){Tr.checkForObjectDocumentTimeoutId=0,Pr(ar,uo)},100);return}uo(ar.contentDocument)}var cr=this;Pr(cr,function(ar){ot(ct)})}Er.position!==""&&(It(),wt=!0);var Pt=document.createElement("object");Pt.style.cssText=Oe,Pt.tabIndex=-1,Pt.type="text/html",Pt.setAttribute("aria-hidden","true"),Pt.onload=Cn,uv.isIE()||(Pt.data="about:blank"),G(ct)&&(ct.appendChild(Pt),G(ct).object=Pt,uv.isIE()&&(Pt.data="about:blank"))}P?P.add(jt):jt()}uv.isIE(8)?We(we):ut(we,We)}function le(pe){return G(pe).object}function Ce(pe){if(G(pe)){var we=le(pe);!we||(uv.isIE(8)?pe.detachEvent("onresize",we.proxy):pe.removeChild(we),G(pe).checkForObjectDocumentTimeoutId&&window.clearTimeout(G(pe).checkForObjectDocumentTimeoutId),delete G(pe).object)}}return{makeDetectable:ee,addListener:H,uninstall:Ce}},ai=sv.exports.forEach,q_=function(v){v=v||{};var E=v.reporter,P=v.batchProcessor,G=v.stateHandler.getState;v.stateHandler.hasState;var H=v.idHandler;if(!P)throw new Error("Missing required dependency: batchProcessor");if(!E)throw new Error("Missing required dependency: reporter.");var N=we(),ee="erd_scroll_detection_scrollbar_style",le="erd_scroll_detection_container";function Ce(jt){We(jt,ee,le)}Ce(window.document);function pe(jt){var It=v.important?" !important; ":"; ";return(jt.join(It)+It).trim()}function we(){var jt=500,It=500,Cn=document.createElement("div");Cn.style.cssText=pe(["position: absolute","width: "+jt*2+"px","height: "+It*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Pt=document.createElement("div");Pt.style.cssText=pe(["position: absolute","width: "+jt+"px","height: "+It+"px","overflow: scroll","visibility: none","top: "+-jt*3+"px","left: "+-It*3+"px","visibility: hidden","margin: 0","padding: 0"]),Pt.appendChild(Cn),document.body.insertBefore(Pt,document.body.firstChild);var Pr=jt-Pt.clientWidth,cr=It-Pt.clientHeight;return document.body.removeChild(Pt),{width:Pr,height:cr}}function We(jt,It,Cn){function Pt(uo,Tr){Tr=Tr||function(Yn){jt.head.appendChild(Yn)};var Ln=jt.createElement("style");return Ln.innerHTML=uo,Ln.id=It,Tr(Ln),Ln}if(!jt.getElementById(It)){var Pr=Cn+"_animation",cr=Cn+"_animation_active",ar=`/* Created by the element-resize-detector library. */
`;ar+="."+Cn+" > div::-webkit-scrollbar { "+pe(["display: none"])+` }

`,ar+="."+cr+" { "+pe(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+Pr,"animation-name: "+Pr])+` }
`,ar+="@-webkit-keyframes "+Pr+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,ar+="@keyframes "+Pr+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Pt(ar)}}function ut(jt){jt.className+=" "+le+"_animation_active"}function ct(jt,It,Cn){if(jt.addEventListener)jt.addEventListener(It,Cn);else if(jt.attachEvent)jt.attachEvent("on"+It,Cn);else return E.error("[scroll] Don't know how to add event listeners.")}function ot(jt,It,Cn){if(jt.removeEventListener)jt.removeEventListener(It,Cn);else if(jt.detachEvent)jt.detachEvent("on"+It,Cn);else return E.error("[scroll] Don't know how to remove event listeners.")}function Oe(jt){return G(jt).container.childNodes[0].childNodes[0].childNodes[0]}function wt(jt){return G(jt).container.childNodes[0].childNodes[0].childNodes[1]}function Er(jt,It){var Cn=G(jt).listeners;if(!Cn.push)throw new Error("Cannot add listener to an element that is not detectable.");G(jt).listeners.push(It)}function ir(jt,It,Cn){Cn||(Cn=It,It=jt,jt=null),jt=jt||{};function Pt(){if(jt.debug){var zn=Array.prototype.slice.call(arguments);if(zn.unshift(H.get(It),"Scroll: "),E.log.apply)E.log.apply(null,zn);else for(var Zr=0;Zr<zn.length;Zr++)E.log(zn[Zr])}}function Pr(zn){function Zr(pi){var va=pi.getRootNode&&pi.getRootNode().contains(pi);return pi===pi.ownerDocument.body||pi.ownerDocument.body.contains(pi)||va}return!Zr(zn)||window.getComputedStyle(zn)===null}function cr(zn){var Zr=G(zn).container.childNodes[0],pi=window.getComputedStyle(Zr);return!pi.width||pi.width.indexOf("px")===-1}function ar(){var zn=window.getComputedStyle(It),Zr={};return Zr.position=zn.position,Zr.width=It.offsetWidth,Zr.height=It.offsetHeight,Zr.top=zn.top,Zr.right=zn.right,Zr.bottom=zn.bottom,Zr.left=zn.left,Zr.widthCSS=zn.width,Zr.heightCSS=zn.height,Zr}function uo(){var zn=ar();G(It).startSize={width:zn.width,height:zn.height},Pt("Element start size",G(It).startSize)}function Tr(){G(It).listeners=[]}function Ln(){if(Pt("storeStyle invoked."),!G(It)){Pt("Aborting because element has been uninstalled");return}var zn=ar();G(It).style=zn}function Yn(zn,Zr,pi){G(zn).lastWidth=Zr,G(zn).lastHeight=pi}function nr(zn){return Oe(zn).childNodes[0]}function Hr(){return 2*N.width+1}function rr(){return 2*N.height+1}function ao(zn){return zn+10+Hr()}function Xr(zn){return zn+10+rr()}function Ir(zn){return zn*2+Hr()}function Ci(zn){return zn*2+rr()}function Io(zn,Zr,pi){var va=Oe(zn),je=wt(zn),xt=ao(Zr),Qe=Xr(pi),hn=Ir(Zr),Pn=Ci(pi);va.scrollLeft=xt,va.scrollTop=Qe,je.scrollLeft=hn,je.scrollTop=Pn}function Ji(){var zn=G(It).container;if(!zn){zn=document.createElement("div"),zn.className=le,zn.style.cssText=pe(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),G(It).container=zn,ut(zn),It.appendChild(zn);var Zr=function(){G(It).onRendered&&G(It).onRendered()};ct(zn,"animationstart",Zr),G(It).onAnimationStart=Zr}return zn}function Gs(){function zn(){var Qa=G(It).style;if(Qa.position==="static"){It.style.setProperty("position","relative",jt.important?"important":"");var Bc=function(nf,sc,$m,Ol){function A1(Ws){return Ws.replace(/[^-\d\.]/g,"")}var fd=$m[Ol];fd!=="auto"&&A1(fd)!=="0"&&(nf.warn("An element that is positioned static has style."+Ol+"="+fd+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Ol+" will be set to 0. Element: ",sc),sc.style[Ol]=0)};Bc(E,It,Qa,"top"),Bc(E,It,Qa,"right"),Bc(E,It,Qa,"bottom"),Bc(E,It,Qa,"left")}}function Zr(Qa,Bc,nf,sc){return Qa=Qa?Qa+"px":"0",Bc=Bc?Bc+"px":"0",nf=nf?nf+"px":"0",sc=sc?sc+"px":"0",["left: "+Qa,"top: "+Bc,"right: "+sc,"bottom: "+nf]}if(Pt("Injecting elements"),!G(It)){Pt("Aborting because element has been uninstalled");return}zn();var pi=G(It).container;pi||(pi=Ji());var va=N.width,je=N.height,xt=pe(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),Qe=pe(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Zr(-(1+va),-(1+je),-je,-va))),hn=pe(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Pn=pe(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Jn=pe(["position: absolute","left: 0","top: 0"]),Ao=pe(["position: absolute","width: 200%","height: 200%"]),Lo=document.createElement("div"),si=document.createElement("div"),Ua=document.createElement("div"),Oc=document.createElement("div"),ks=document.createElement("div"),bp=document.createElement("div");Lo.dir="ltr",Lo.style.cssText=xt,Lo.className=le,si.className=le,si.style.cssText=Qe,Ua.style.cssText=hn,Oc.style.cssText=Jn,ks.style.cssText=Pn,bp.style.cssText=Ao,Ua.appendChild(Oc),ks.appendChild(bp),si.appendChild(Ua),si.appendChild(ks),Lo.appendChild(si),pi.appendChild(Lo);function qv(){var Qa=G(It);Qa&&Qa.onExpand?Qa.onExpand():Pt("Aborting expand scroll handler: element has been uninstalled")}function Js(){var Qa=G(It);Qa&&Qa.onShrink?Qa.onShrink():Pt("Aborting shrink scroll handler: element has been uninstalled")}ct(Ua,"scroll",qv),ct(ks,"scroll",Js),G(It).onExpandScroll=qv,G(It).onShrinkScroll=Js}function Ii(){function zn(hn,Pn,Jn){var Ao=nr(hn),Lo=ao(Pn),si=Xr(Jn);Ao.style.setProperty("width",Lo+"px",jt.important?"important":""),Ao.style.setProperty("height",si+"px",jt.important?"important":"")}function Zr(hn){var Pn=It.offsetWidth,Jn=It.offsetHeight,Ao=Pn!==G(It).lastWidth||Jn!==G(It).lastHeight;Pt("Storing current size",Pn,Jn),Yn(It,Pn,Jn),P.add(0,function(){if(Ao){if(!G(It)){Pt("Aborting because element has been uninstalled");return}if(!pi()){Pt("Aborting because element container has not been initialized");return}if(jt.debug){var Lo=It.offsetWidth,si=It.offsetHeight;(Lo!==Pn||si!==Jn)&&E.warn(H.get(It),"Scroll: Size changed before updating detector elements.")}zn(It,Pn,Jn)}}),P.add(1,function(){if(!G(It)){Pt("Aborting because element has been uninstalled");return}if(!pi()){Pt("Aborting because element container has not been initialized");return}Io(It,Pn,Jn)}),Ao&&hn&&P.add(2,function(){if(!G(It)){Pt("Aborting because element has been uninstalled");return}if(!pi()){Pt("Aborting because element container has not been initialized");return}hn()})}function pi(){return!!G(It).container}function va(){function hn(){return G(It).lastNotifiedWidth===void 0}Pt("notifyListenersIfNeeded invoked");var Pn=G(It);if(hn()&&Pn.lastWidth===Pn.startSize.width&&Pn.lastHeight===Pn.startSize.height)return Pt("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Pn.lastWidth===Pn.lastNotifiedWidth&&Pn.lastHeight===Pn.lastNotifiedHeight)return Pt("Not notifying: Size already notified");Pt("Current size not notified, notifying..."),Pn.lastNotifiedWidth=Pn.lastWidth,Pn.lastNotifiedHeight=Pn.lastHeight,ai(G(It).listeners,function(Jn){Jn(It)})}function je(){if(Pt("startanimation triggered."),cr(It)){Pt("Ignoring since element is still unrendered...");return}Pt("Element rendered.");var hn=Oe(It),Pn=wt(It);(hn.scrollLeft===0||hn.scrollTop===0||Pn.scrollLeft===0||Pn.scrollTop===0)&&(Pt("Scrollbars out of sync. Updating detector elements..."),Zr(va))}function xt(){if(Pt("Scroll detected."),cr(It)){Pt("Scroll event fired while unrendered. Ignoring...");return}Zr(va)}if(Pt("registerListenersAndPositionElements invoked."),!G(It)){Pt("Aborting because element has been uninstalled");return}G(It).onRendered=je,G(It).onExpand=xt,G(It).onShrink=xt;var Qe=G(It).style;zn(It,Qe.width,Qe.height)}function za(){if(Pt("finalizeDomMutation invoked."),!G(It)){Pt("Aborting because element has been uninstalled");return}var zn=G(It).style;Yn(It,zn.width,zn.height),Io(It,zn.width,zn.height)}function Nc(){Cn(It)}function yl(){Pt("Installing..."),Tr(),uo(),P.add(0,Ln),P.add(1,Gs),P.add(2,Ii),P.add(3,za),P.add(4,Nc)}Pt("Making detectable..."),Pr(It)?(Pt("Element is detached"),Ji(),Pt("Waiting until element is attached..."),G(It).onRendered=function(){Pt("Element is now attached"),yl()}):yl()}function Wn(jt){var It=G(jt);!It||(It.onExpandScroll&&ot(Oe(jt),"scroll",It.onExpandScroll),It.onShrinkScroll&&ot(wt(jt),"scroll",It.onShrinkScroll),It.onAnimationStart&&ot(It.container,"animationstart",It.onAnimationStart),It.container&&jt.removeChild(It.container))}return{makeDetectable:ir,addListener:Er,uninstall:Wn,initDocument:Ce}},Fa=sv.exports.forEach,Ay=Dk,Xw=W_,Jw=Pk,My=xs,Qw=lv,eE=Y_.exports,Lk=cv,jd=Z_,Nk=om,Ok=q_;function K_(v){return Array.isArray(v)||v.length!==void 0}function tE(v){if(Array.isArray(v))return v;var E=[];return Fa(v,function(P){E.push(P)}),E}function Xf(v){return v&&v.nodeType===1}var im=function(v){v=v||{};var E;if(v.idHandler)E={get:function(ir){return v.idHandler.get(ir,!0)},set:v.idHandler.set};else{var P=Jw(),G=My({idGenerator:P,stateHandler:jd});E=G}var H=v.reporter;if(!H){var N=H===!1;H=Qw(N)}var ee=nd(v,"batchProcessor",Lk({reporter:H})),le={};le.callOnAdd=!!nd(v,"callOnAdd",!0),le.debug=!!nd(v,"debug",!1);var Ce=Xw(E),pe=Ay({stateHandler:jd}),we,We=nd(v,"strategy","object"),ut=nd(v,"important",!1),ct={reporter:H,batchProcessor:ee,stateHandler:jd,idHandler:E,important:ut};if(We==="scroll"&&(eE.isLegacyOpera()?(H.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),We="object"):eE.isIE(9)&&(H.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),We="object")),We==="scroll")we=Ok(ct);else if(We==="object")we=Nk(ct);else throw new Error("Invalid strategy name: "+We);var ot={};function Oe(ir,Wn,jt){function It(uo){var Tr=Ce.get(uo);Fa(Tr,function(Ln){Ln(uo)})}function Cn(uo,Tr,Ln){Ce.add(Tr,Ln),uo&&Ln(Tr)}if(jt||(jt=Wn,Wn=ir,ir={}),!Wn)throw new Error("At least one element required.");if(!jt)throw new Error("Listener required.");if(Xf(Wn))Wn=[Wn];else if(K_(Wn))Wn=tE(Wn);else return H.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Pt=0,Pr=nd(ir,"callOnAdd",le.callOnAdd),cr=nd(ir,"onReady",function(){}),ar=nd(ir,"debug",le.debug);Fa(Wn,function(uo){jd.getState(uo)||(jd.initState(uo),E.set(uo));var Tr=E.get(uo);if(ar&&H.log("Attaching listener to element",Tr,uo),!pe.isDetectable(uo)){if(ar&&H.log(Tr,"Not detectable."),pe.isBusy(uo)){ar&&H.log(Tr,"System busy making it detectable"),Cn(Pr,uo,jt),ot[Tr]=ot[Tr]||[],ot[Tr].push(function(){Pt++,Pt===Wn.length&&cr()});return}return ar&&H.log(Tr,"Making detectable..."),pe.markBusy(uo,!0),we.makeDetectable({debug:ar,important:ut},uo,function(Ln){if(ar&&H.log(Tr,"onElementDetectable"),jd.getState(Ln)){pe.markAsDetectable(Ln),pe.markBusy(Ln,!1),we.addListener(Ln,It),Cn(Pr,Ln,jt);var Yn=jd.getState(Ln);if(Yn&&Yn.startSize){var nr=Ln.offsetWidth,Hr=Ln.offsetHeight;(Yn.startSize.width!==nr||Yn.startSize.height!==Hr)&&It(Ln)}ot[Tr]&&Fa(ot[Tr],function(rr){rr()})}else ar&&H.log(Tr,"Element uninstalled before being detectable.");delete ot[Tr],Pt++,Pt===Wn.length&&cr()})}ar&&H.log(Tr,"Already detecable, adding listener."),Cn(Pr,uo,jt),Pt++}),Pt===Wn.length&&cr()}function wt(ir){if(!ir)return H.error("At least one element is required.");if(Xf(ir))ir=[ir];else if(K_(ir))ir=tE(ir);else return H.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");Fa(ir,function(Wn){Ce.removeAllListeners(Wn),we.uninstall(Wn),jd.cleanState(Wn)})}function Er(ir){we.initDocument&&we.initDocument(ir)}return{listenTo:Oe,removeListener:Ce.removeListener,removeAllListeners:Ce.removeAllListeners,uninstall:wt,initDocument:Er}};function nd(v,E,P){var G=v[E];return G==null&&P!==void 0?P:G}var nE="Expected a function",am=0/0,Bk="[object Symbol]",rE=/^\s+|\s+$/g,oE=/^[-+]0x[0-9a-f]+$/i,sm=/^0b[01]+$/i,iE=/^0o[0-7]+$/i,X_=parseInt,Fk=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,Vk=typeof self=="object"&&self&&self.Object===Object&&self,Zd=Fk||Vk||Function("return this")(),ky=Object.prototype,Dy=ky.toString,J_=Math.max,aE=Math.min,mu=function(){return Zd.Date.now()};function Py(v,E,P){var G,H,N,ee,le,Ce,pe=0,we=!1,We=!1,ut=!0;if(typeof v!="function")throw new TypeError(nE);E=sE(E)||0,gu(P)&&(we=!!P.leading,We="maxWait"in P,N=We?J_(sE(P.maxWait)||0,E):N,ut="trailing"in P?!!P.trailing:ut);function ct(Cn){var Pt=G,Pr=H;return G=H=void 0,pe=Cn,ee=v.apply(Pr,Pt),ee}function ot(Cn){return pe=Cn,le=setTimeout(Er,E),we?ct(Cn):ee}function Oe(Cn){var Pt=Cn-Ce,Pr=Cn-pe,cr=E-Pt;return We?aE(cr,N-Pr):cr}function wt(Cn){var Pt=Cn-Ce,Pr=Cn-pe;return Ce===void 0||Pt>=E||Pt<0||We&&Pr>=N}function Er(){var Cn=mu();if(wt(Cn))return ir(Cn);le=setTimeout(Er,Oe(Cn))}function ir(Cn){return le=void 0,ut&&G?ct(Cn):(G=H=void 0,ee)}function Wn(){le!==void 0&&clearTimeout(le),pe=0,G=Ce=H=le=void 0}function jt(){return le===void 0?ee:ir(mu())}function It(){var Cn=mu(),Pt=wt(Cn);if(G=arguments,H=this,Ce=Cn,Pt){if(le===void 0)return ot(Ce);if(We)return le=setTimeout(Er,E),ct(Ce)}return le===void 0&&(le=setTimeout(Er,E)),ee}return It.cancel=Wn,It.flush=jt,It}function Ry(v,E,P){var G=!0,H=!0;if(typeof v!="function")throw new TypeError(nE);return gu(P)&&(G="leading"in P?!!P.leading:G,H="trailing"in P?!!P.trailing:H),Py(v,E,{leading:G,maxWait:E,trailing:H})}function gu(v){var E=typeof v;return!!v&&(E=="object"||E=="function")}function Iy(v){return!!v&&typeof v=="object"}function zk(v){return typeof v=="symbol"||Iy(v)&&Dy.call(v)==Bk}function sE(v){if(typeof v=="number")return v;if(zk(v))return am;if(gu(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=gu(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=v.replace(rE,"");var P=sm.test(v);return P||iE.test(v)?X_(v.slice(2),P?2:8):oE.test(v)?am:+v}var dv=Ry;const Uk={name:"Grid",provide(){return{GridInstance:this}},props:{col:{type:Number,default:3},square:{type:Boolean,default:!1},padding:{type:String,default:"24px"},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},hover:{type:Boolean,default:!1}},data(){return{resizeCount:0,handleResize:()=>{}}},computed:{classes(){return{"ivu-grid-center":this.center,"ivu-grid-border":this.border,"ivu-grid-hover":this.hover}}},methods:{onResize(){this.resizeCount++}},mounted(){this.handleResize=dv(this.onResize,150,{leading:!1}),this.observer=im(),this.observer.listenTo(this.$refs.grid,this.handleResize)},beforeUnmount(){this.observer.removeListener(this.$refs.grid,this.handleResize)}};function lE(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-grid",N.classes]),ref:"grid"},[c.renderSlot(v.$slots,"default")],2)}var cE=$(Uk,[["render",lE]]);const Hk={name:"GridItem",inject:["GridInstance"],data(){return{height:0}},computed:{col(){return this.GridInstance.col},square(){return this.GridInstance.square},styles(){const v={width:`${100/this.col}%`};return this.height&&this.square&&(v.height=`${this.height}px`),v},mainStyles(){return{padding:this.GridInstance.padding}}},watch:{col(){c.nextTick(()=>{this.handleChangeHeight()})},square(){this.handleChangeHeight()},"GridInstance.resizeCount"(){this.handleChangeHeight()}},methods:{handleChangeHeight(){if(this.square){const v=this.$refs.col;this.height=parseFloat(Ee(v,"width"))}}},mounted(){this.handleChangeHeight()}};function uE(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:"ivu-grid-item",style:c.normalizeStyle(N.styles),ref:"col"},[c.createElementVNode("div",{class:"ivu-grid-item-main",style:c.normalizeStyle(N.mainStyles)},[c.renderSlot(v.$slots,"default")],4)],4)}var dE=$(Hk,[["render",uE]]);const hE="ivu-layout",Gk={name:"Header",computed:{wrapClasses(){return`${hE}-header`}}};function $y(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[c.renderSlot(v.$slots,"default")],2)}var Q_=$(Gk,[["render",$y]]);const Fr={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent(v){const{keyCode:E}=v;if(v.altKey&&!v.ctrlKey||v.metaKey||E>=Fr.F1&&E<=Fr.F12)return!1;switch(E){case Fr.ALT:case Fr.CAPS_LOCK:case Fr.CONTEXT_MENU:case Fr.CTRL:case Fr.DOWN:case Fr.END:case Fr.ESC:case Fr.HOME:case Fr.INSERT:case Fr.LEFT:case Fr.MAC_FF_META:case Fr.META:case Fr.NUMLOCK:case Fr.NUM_CENTER:case Fr.PAGE_DOWN:case Fr.PAGE_UP:case Fr.PAUSE:case Fr.PRINT_SCREEN:case Fr.RIGHT:case Fr.SHIFT:case Fr.UP:case Fr.WIN_KEY:case Fr.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey(v){if(v>=Fr.ZERO&&v<=Fr.NINE||v>=Fr.NUM_ZERO&&v<=Fr.NUM_MULTIPLY||v>=Fr.A&&v<=Fr.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&v===0)return!0;switch(v){case Fr.SPACE:case Fr.QUESTION_MARK:case Fr.NUM_PLUS:case Fr.NUM_MINUS:case Fr.NUM_PERIOD:case Fr.NUM_DIVISION:case Fr.SEMICOLON:case Fr.DASH:case Fr.EQUALS:case Fr.COMMA:case Fr.PERIOD:case Fr.SLASH:case Fr.APOSTROPHE:case Fr.SINGLE_QUOTE:case Fr.OPEN_SQUARE_BRACKET:case Fr.BACKSLASH:case Fr.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},rd="ivu-spin",fE={name:"Spin",mixins:[nv],props:{size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${rd}`,{[`${rd}-${this.size}`]:!!this.size,[`${rd}-fix`]:this.fix,[`${rd}-show-text`]:this.showText,[`${rd}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${rd}-main`},dotClasses(){return`${rd}-dot`},textClasses(){return`${rd}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(v){v?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(v=>v.children&&v.children.length)}};function Wk(v,E,P,G,H,N){return c.openBlock(),c.createBlock(c.Transition,{name:"fade"},{default:c.withCtx(()=>[N.fullscreenVisible&&P.show?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.classes)},[c.createElementVNode("div",{class:c.normalizeClass(N.mainClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.dotClasses)},null,2),c.createElementVNode("div",{class:c.normalizeClass(N.textClasses)},[c.renderSlot(v.$slots,"default")],2)],2)],2)):c.createCommentVNode("",!0)]),_:3})}var tc=$(fE,[["render",Wk]]);const Yk={name:"ImagePreview",mixins:[vt],components:{Icon:oe,Spin:tc,Row:pc,Col:Sa},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||!v.$VIEWUI.image||v.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:v.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let v=this.translate.x/this.scale,E=this.translate.y/this.scale;const P=this.degree%360;return[90,-270].includes(P)&&([v,E]=[E,-v]),[180,-180].includes(P)&&([v,E]=[-v,-E]),[270,-90].includes(P)&&([v,E]=[-E,v]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${v}px, ${E}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:v,infinite:E,previewList:P}=this,G=P.length;return E?!1:v>=G-1},hasLeftSwitchEnd(){const{currentIndex:v,infinite:E}=this;return E?!1:v===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){!this.maskClosable||this.handleClose()},handleSwitch(v){v?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(v){v==="zoomIn"&&this.scale<6&&(this.scale+=.25),v==="zoomOut"&&this.scale>.25&&(this.scale-=.25),v==="rotateLeft"&&(this.degree-=90),v==="rotateRight"&&(this.degree+=90),v==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),v==="download"&&(this.downloading=!0,Se(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(v){if(!this.modelValue)return;const{keyCode:E}=v;E===Fr.LEFT&&this.handleSwitch(!1),E===Fr.RIGHT&&this.handleSwitch(!0),E===Fr.UP&&this.handleOperation("zoomIn"),E===Fr.DOWN&&this.handleOperation("zoomOut"),E===Fr.SPACE&&(v.preventDefault(),this.original=!this.original)},handleKeyup(v){if(!this.modelValue)return;const{keyCode:E}=v;E===Fr.ESC&&this.handleClose()},handleWheel(v){if(!this.modelValue)return;const{deltaY:E}=v;this.handleOperation(E<0?"zoomIn":"zoomOut")},handleMousedown(v){const{pageX:E,pageY:P,which:G}=v;G===1&&(this.startX=E,this.startY=P,this.transition=!1,R(document,"mousemove",this.handleMousemove),R(document,"mouseup",this.handleMouseup))},handleMousemove:dv(function(v){v.stopPropagation();const{pageX:E,pageY:P}=v;this.translate.x+=E-this.startX,this.translate.y+=P-this.startY,this.startX=E,this.startY=P}),handleMouseup(){this.transition=!0,L(document,"mousemove",this.handleMousemove),L(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return A?document.body.style.overflow:""},setBodyOverflow(v){!A||(document.body.style.overflow=v)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return gn(),Zn}},watch:{modelValue(v){v?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){R(document,"keydown",this.handleKeydown),R(document,"keyup",this.handleKeyup),R(document,"wheel",this.handleWheel)},beforeUnmount(){L(document,"keydown",this.handleKeydown),L(document,"keyup",this.handleKeyup),L(document,"wheel",this.handleWheel)}},jk={key:1,class:"ivu-image-preview-fail"},uN=["src"],eS=[c.createElementVNode("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),c.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)],tS=[c.createElementVNode("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),c.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)],Zk=[c.createElementVNode("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)],pE=[c.createElementVNode("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),c.createElementVNode("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),c.createElementVNode("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),c.createElementVNode("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)],qk=[c.createElementVNode("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)],Kk=[c.createElementVNode("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)],Xk=[c.createElementVNode("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),c.createElementVNode("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)],Jk={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"},lm=[c.createElementVNode("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)];function Qk(v,E,P,G,H,N){const ee=c.resolveComponent("Spin"),le=c.resolveComponent("Col"),Ce=c.resolveComponent("Row"),pe=c.resolveComponent("Icon");return c.openBlock(),c.createBlock(c.Teleport,{to:"body",disabled:!P.transfer},[c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[P.modelValue?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-image-preview-mask",style:c.normalizeStyle(N.maskStyle)},null,4)):c.createCommentVNode("",!0)]),_:1}),c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[P.modelValue?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-image-preview-wrap",style:c.normalizeStyle(N.maskStyle)},[c.createElementVNode("div",c.mergeProps({class:"ivu-image-preview"},v.$attrs,{onClick:E[14]||(E[14]=c.withModifiers((...we)=>N.handleClickMask&&N.handleClickMask(...we),["stop"]))}),[H.status==="loading"?(c.openBlock(),c.createBlock(ee,{key:0,size:"large",class:"ivu-image-preview-loading"})):H.status==="failed"?(c.openBlock(),c.createElementBlock("div",jk,[c.createElementVNode("span",null,c.toDisplayString(N.failLang),1)])):c.createCommentVNode("",!0),(c.openBlock(),c.createElementBlock("img",{class:c.normalizeClass(N.imgClasses),style:c.normalizeStyle(N.imageStyle),src:N.currentSrc,key:H.currentIndex.toString(),onClick:E[0]||(E[0]=c.withModifiers(()=>{},["stop"])),onMousedown:E[1]||(E[1]=c.withModifiers((...we)=>N.handleMousedown&&N.handleMousedown(...we),["stop","prevent"])),onLoad:E[2]||(E[2]=(...we)=>N.handleImageLoad&&N.handleImageLoad(...we)),onError:E[3]||(E[3]=(...we)=>N.handleImageError&&N.handleImageError(...we))},null,46,uN)),P.toolbar&&P.toolbar.length>0?(c.openBlock(),c.createBlock(Ce,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:E[11]||(E[11]=c.withModifiers(()=>{},["stop"]))},{default:c.withCtx(()=>[P.toolbar.indexOf("zoomIn")>-1?(c.openBlock(),c.createBlock(le,{key:0,flex:"1",order:P.toolbar.indexOf("zoomIn")+1},{default:c.withCtx(()=>[(c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[4]||(E[4]=c.withModifiers(we=>N.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},eS))]),_:1},8,["order"])):c.createCommentVNode("",!0),P.toolbar.indexOf("zoomOut")>-1?(c.openBlock(),c.createBlock(le,{key:1,flex:"1",order:P.toolbar.indexOf("zoomOut")+1},{default:c.withCtx(()=>[(c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[5]||(E[5]=c.withModifiers(we=>N.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},tS))]),_:1},8,["order"])):c.createCommentVNode("",!0),P.toolbar.indexOf("original")>-1?(c.openBlock(),c.createBlock(le,{key:2,flex:"1",order:P.toolbar.indexOf("original")+1},{default:c.withCtx(()=>[c.withDirectives((c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[6]||(E[6]=c.withModifiers(we=>N.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},Zk,512)),[[c.vShow,!this.original]]),c.withDirectives((c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[7]||(E[7]=c.withModifiers(we=>N.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},pE,512)),[[c.vShow,this.original]])]),_:1},8,["order"])):c.createCommentVNode("",!0),P.toolbar.indexOf("rotateLeft")>-1?(c.openBlock(),c.createBlock(le,{key:3,flex:"1",order:P.toolbar.indexOf("rotateLeft")+1},{default:c.withCtx(()=>[(c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[8]||(E[8]=c.withModifiers(we=>N.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},qk))]),_:1},8,["order"])):c.createCommentVNode("",!0),P.toolbar.indexOf("rotateRight")>-1?(c.openBlock(),c.createBlock(le,{key:4,flex:"1",order:P.toolbar.indexOf("rotateRight")+1},{default:c.withCtx(()=>[(c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[9]||(E[9]=c.withModifiers(we=>N.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},Kk))]),_:1},8,["order"])):c.createCommentVNode("",!0),P.toolbar.indexOf("download")>-1?(c.openBlock(),c.createBlock(le,{key:5,flex:"1",order:P.toolbar.indexOf("download")+1},{default:c.withCtx(()=>[c.withDirectives((c.openBlock(),c.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:E[10]||(E[10]=c.withModifiers(we=>N.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},Xk,512)),[[c.vShow,!H.downloading]]),c.withDirectives((c.openBlock(),c.createElementBlock("svg",Jk,lm,512)),[[c.vShow,H.downloading]])]),_:1},8,["order"])):c.createCommentVNode("",!0)]),_:1})):c.createCommentVNode("",!0),P.previewList.length>1?(c.openBlock(),c.createBlock(pe,{key:3,class:c.normalizeClass(N.leftClasses),type:"ios-arrow-back",onClick:E[12]||(E[12]=c.withModifiers(we=>N.handleSwitch(!1),["stop"]))},null,8,["class"])):c.createCommentVNode("",!0),P.previewList.length>1?(c.openBlock(),c.createBlock(pe,{key:4,class:c.normalizeClass(N.rightClasses),type:"ios-arrow-forward",onClick:E[13]||(E[13]=c.withModifiers(we=>N.handleSwitch(!0),["stop"]))},null,8,["class"])):c.createCommentVNode("",!0),c.createVNode(pe,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:c.withModifiers(N.handleClose,["stop"])},null,8,["onClick"])],16)],4)):c.createCommentVNode("",!0)]),_:1})],8,["disabled"])}var Wh=$(Yk,[["render",Qk]]);const eD=v=>typeof HTMLElement=="object"&&v instanceof HTMLElement,tD={name:"Image",mixins:[vt],components:{ImagePreview:Wh},emits:["on-load","on-error","on-switch","on-close","on-click"],props:{src:{type:String,default:""},alt:{type:String,default:""},preview:{type:Boolean,default:!1},referrerPolicy:{type:String,default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String],default:""},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array},infinite:{type:Boolean,default:!0},initialIndex:{type:Number,default:0},previewTip:{type:Boolean,default:!0},toolbar:{type:Array,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||!v.$VIEWUI.image||v.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:v.$VIEWUI.image.toolbar}}},data(){return{loadingImage:!1,loading:!1,imageError:!1,scrollElement:null,observer:null,imagePreviewModal:!1}},watch:{src(){this.loadImage()}},computed:{innerClasses(){return["ivu-image-inner",{"ivu-image-cursor":this.preview}]},imgClasses(){return["ivu-image-img",{"ivu-image-img-hidden":this.loading||this.imageError}]},fitStyle(){const v=["fill","contain","cover","none","scale-down"],{fit:E}=this;return v.includes(E)?`object-fit:${E};`:""},imageStyles(){return{width:typeof this.width=="number"?`${this.width}px`:this.width,height:typeof this.height=="number"?`${this.height}px`:this.height}},loadingLang(){return this.t("i.select.loading")},failLang(){return this.t("i.image.fail")},previewLang(){return this.t("i.image.preview")},loadingType(){return this.lazy?"lazy":"eager"}},mounted(){A&&this.handleImageEvent()},methods:{handleLazy(){const v=this.$refs.image;(this.observer=new IntersectionObserver(this.handlerObserveImage,{root:this.scrollElement,rootMargin:"0px",threshold:0})).observe(v)},handlerObserveImage(v){for(let E of v)E.isIntersecting&&(this.offObserver(),this.loadImage())},addLazyImageListener(){const{scrollContainer:v}=this;this.scrollElement=null,eD(v)?this.scrollElement=v:v&&typeof v=="string"&&(this.scrollElement=document.querySelector(v)),this.handleLazy()},handleImageLoad(){this.loading=!1,this.imageError=!1,this.$emit("on-load")},handleImageError(){this.loading=!1,this.imageError=!0,this.loadingImage=!1,this.$emit("on-error")},loadImage(){this.loading=!0,this.imageError=!1,this.loadingImage=!0},handleImageEvent(){const{lazy:v}=this;v?this.addLazyImageListener():this.loadImage()},offObserver(){const{observer:v}=this;v&&v.disconnect()},handlePreview(){const{preview:v,initialIndex:E}=this;v&&(this.imagePreviewModal=!0,this.$emit("on-click",{initialIndex:E}))},handleClose(){this.$emit("on-close")},handleSwitch(v){this.$emit("on-switch",v)}},beforeUnmount(){this.offObserver()}},nD={key:0,class:"ivu-image-placeholder"},mE={key:1,class:"ivu-image-error"},rD=["alt","src","loading","referrerPolicy"],hv={class:"ivu-image-mark"};function oD(v,E,P,G,H,N){const ee=c.resolveComponent("ImagePreview");return c.openBlock(),c.createElementBlock("div",{class:"ivu-image",ref:"image",style:c.normalizeStyle(N.imageStyles)},[H.loading?(c.openBlock(),c.createElementBlock("div",nD,[c.renderSlot(v.$slots,"placeholder",{},()=>[c.createElementVNode("span",null,c.toDisplayString(N.loadingLang),1)])])):H.imageError?(c.openBlock(),c.createElementBlock("div",mE,[c.renderSlot(v.$slots,"error",{},()=>[c.createElementVNode("span",null,c.toDisplayString(N.failLang),1)])])):c.createCommentVNode("",!0),H.loadingImage?(c.openBlock(),c.createElementBlock("div",{key:2,class:c.normalizeClass(N.innerClasses),onClick:E[2]||(E[2]=(...le)=>N.handlePreview&&N.handlePreview(...le))},[c.createElementVNode("img",{class:c.normalizeClass(N.imgClasses),style:c.normalizeStyle([N.fitStyle]),alt:P.alt,src:P.src,loading:N.loadingType,referrerPolicy:P.referrerPolicy,onLoad:E[0]||(E[0]=(...le)=>N.handleImageLoad&&N.handleImageLoad(...le)),onError:E[1]||(E[1]=(...le)=>N.handleImageError&&N.handleImageError(...le))},null,46,rD),P.preview&&P.previewTip?c.renderSlot(v.$slots,"preview",{key:0},()=>[c.createElementVNode("div",hv,[c.createElementVNode("span",null,c.toDisplayString(N.previewLang),1)])]):c.createCommentVNode("",!0)],2)):c.createCommentVNode("",!0),P.preview?(c.openBlock(),c.createBlock(ee,{key:3,modelValue:H.imagePreviewModal,"onUpdate:modelValue":E[3]||(E[3]=le=>H.imagePreviewModal=le),"preview-list":P.previewList,"initial-index":P.initialIndex,infinite:P.infinite,"mask-closable":P.maskClosable,transfer:P.transfer,toolbar:P.toolbar,onOnClose:N.handleClose,onOnSwitch:N.handleSwitch},null,8,["modelValue","preview-list","initial-index","infinite","mask-closable","transfer","toolbar","onOnClose","onOnSwitch"])):c.createCommentVNode("",!0)],4)}var gE=$(tD,[["render",oD]]);Wh.newInstance=v=>{if(!A)return;const E=v||{};let P=null;const G=c.createApp({data(){return Object.assign({},E,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return c.h(Wh,Object.assign({},E,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){G.unmount(),document.body.removeChild(H)},onRemove(){}},created(){P=c.getCurrentInstance()}}),H=document.createElement("div");document.body.appendChild(H),G.mount(H);const N=P.refs.imagePreview;return{show(ee){Object.keys(ee).forEach(le=>{N.$parent[le]=ee[le]}),N.$parent.visible=!0},component:N}};let Jf;function vE(){return Jf=Jf||Wh.newInstance(),Jf}Wh.show=function(v={}){const E=vE();v.onRemove=function(){Jf=null},E.show(v)};const Cs="ivu-input-number",fv="ivu-icon";function pv(v,E){let P,G,H;try{P=v.toString().split(".")[1].length}catch{P=0}try{G=E.toString().split(".")[1].length}catch{G=0}return H=Math.pow(10,Math.max(P,G)),(Math.round(v*H)+Math.round(E*H))/H}const cm={name:"InputNumber",mixins:[Mo],emits:["on-change","on-focus","on-blur","update:modelValue"],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},modelValue:{type:Number,default:1},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""},controlsOutside:{type:Boolean,default:!1}},data(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.modelValue}},computed:{wrapClasses(){return[`${Cs}`,{[`${Cs}-${this.size}`]:!!this.size,[`${Cs}-disabled`]:this.itemDisabled,[`${Cs}-focused`]:this.focused,[`${Cs}-controls-outside`]:this.controlsOutside}]},handlerClasses(){return`${Cs}-handler-wrap`},upClasses(){return[`${Cs}-handler`,`${Cs}-handler-up`,{[`${Cs}-handler-up-disabled`]:this.upDisabled}]},innerUpClasses(){return`${Cs}-handler-up-inner ${fv} ${fv}-ios-arrow-up`},downClasses(){return[`${Cs}-handler`,`${Cs}-handler-down`,{[`${Cs}-handler-down-disabled`]:this.downDisabled}]},innerDownClasses(){return`${Cs}-handler-down-inner ${fv} ${fv}-ios-arrow-down`},inputWrapClasses(){return`${Cs}-input-wrap`},inputClasses(){return`${Cs}-input`},precisionValue(){return this.currentValue?this.precision?this.currentValue.toFixed(this.precision):this.currentValue:this.currentValue},formatterValue(){return this.formatter&&this.precisionValue!==null?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault(v){v.preventDefault()},up(v){const E=Number(v.target.value);if(this.upDisabled&&isNaN(E))return!1;this.changeStep("up",v)},down(v){const E=Number(v.target.value);if(this.downDisabled&&isNaN(E))return!1;this.changeStep("down",v)},changeStep(v,E){if(this.itemDisabled||this.readonly)return!1;const P=Number(E.target.value);let G=Number(this.currentValue);const H=Number(this.step);if(isNaN(G))return!1;if(!isNaN(P)){if(v==="up")if(pv(P,H)<=this.max)G=P;else return!1;else if(v==="down")if(pv(P,-H)>=this.min)G=P;else return!1}v==="up"?G=pv(G,H):v==="down"&&(G=pv(G,-H)),this.setValue(G)},setValue(v){v&&!isNaN(this.precision)&&(v=Number(Number(v).toFixed(this.precision)));const{min:E,max:P}=this;v!==null&&(v>P?v=P:v<E&&(v=E)),c.nextTick(()=>{this.currentValue=v,this.$emit("update:modelValue",v),this.$emit("on-change",v),this.handleFormItemChange("change",v)})},focus(v){this.focused=!0,this.$emit("on-focus",v)},blur(){this.focused=!1,this.$emit("on-blur"),Tt(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},keyDown(v){v.keyCode===38?(v.preventDefault(),this.up(v)):v.keyCode===40&&(v.preventDefault(),this.down(v))},change(v){if(v.type==="change"&&this.activeChange||v.type==="input"&&!this.activeChange)return;let E=v.target.value.trim();if(this.parser&&(E=this.parser(E)),E.length===0){this.setValue(null);return}v.type==="input"&&E.match(/^\-?\.?$|\.$/)||(E=Number(E),isNaN(E)?v.target.value=this.currentValue:(this.currentValue=E,this.setValue(E)))},changeVal(v){if(v=Number(v),isNaN(v))this.upDisabled=!0,this.downDisabled=!0;else{const E=this.step;this.upDisabled=v+E>this.max,this.downDisabled=v-E<this.min}}},mounted(){this.changeVal(this.currentValue)},watch:{modelValue(v){this.currentValue=v},currentValue(v){this.changeVal(v)},min(){this.changeVal(this.currentValue)},max(){this.changeVal(this.currentValue)}}},nS=[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-remove"},null,-1)],iD=[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-add"},null,-1)],aD=["id","disabled","autofocus","readonly","name","value","placeholder"];function sD(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[P.controlsOutside?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.handlerClasses)},[c.createElementVNode("a",{onClick:E[1]||(E[1]=(...ee)=>N.up&&N.up(...ee)),class:c.normalizeClass(N.upClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.innerUpClasses),onClick:E[0]||(E[0]=(...ee)=>N.preventDefault&&N.preventDefault(...ee))},null,2)],2),c.createElementVNode("a",{onClick:E[3]||(E[3]=(...ee)=>N.down&&N.down(...ee)),class:c.normalizeClass(N.downClasses)},[c.createElementVNode("span",{class:c.normalizeClass(N.innerDownClasses),onClick:E[2]||(E[2]=(...ee)=>N.preventDefault&&N.preventDefault(...ee))},null,2)],2)],2)),P.controlsOutside?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-down",{"ivu-input-number-controls-outside-btn-disabled":H.downDisabled}]),onClick:E[4]||(E[4]=(...ee)=>N.down&&N.down(...ee))},nS,2)):c.createCommentVNode("",!0),P.controlsOutside?(c.openBlock(),c.createElementBlock("div",{key:2,class:c.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-up",{"ivu-input-number-controls-outside-btn-disabled":H.upDisabled}]),onClick:E[5]||(E[5]=(...ee)=>N.up&&N.up(...ee))},iD,2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass(N.inputWrapClasses)},[c.createElementVNode("input",{id:P.elementId,class:c.normalizeClass(N.inputClasses),disabled:v.itemDisabled,autocomplete:"off",spellcheck:"false",autofocus:P.autofocus,onFocus:E[6]||(E[6]=(...ee)=>N.focus&&N.focus(...ee)),onBlur:E[7]||(E[7]=(...ee)=>N.blur&&N.blur(...ee)),onKeydown:E[8]||(E[8]=c.withModifiers((...ee)=>N.keyDown&&N.keyDown(...ee),["stop"])),onInput:E[9]||(E[9]=(...ee)=>N.change&&N.change(...ee)),onMouseup:E[10]||(E[10]=(...ee)=>N.preventDefault&&N.preventDefault(...ee)),onChange:E[11]||(E[11]=(...ee)=>N.change&&N.change(...ee)),readonly:P.readonly||!P.editable,name:P.name,value:N.formatterValue,placeholder:P.placeholder},null,42,aD)],2)],2)}var Ly=$(cm,[["render",sD]]);const rS="ivu-layout",ga={name:"Layout",data(){return{hasSider:!1}},computed:{wrapClasses(){return[`${rS}`,{[`${rS}-has-sider`]:this.hasSider}]}},methods:{findSider(){return this.$slots.default().some(v=>v.type.name==="Sider")}},mounted(){this.hasSider=this.findSider()}};function lD(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[c.renderSlot(v.$slots,"default")],2)}var yE=$(ga,[["render",lD]]);const bE={tooltips:["复制","复制成功"],showTip:!1,successTip:"复制成功",errorTip:"复制失败"},oS={tooltip:"编辑",editing:!1,maxlength:"",autosize:!0,triggerType:"icon"},iS={rows:1,tooltip:!1,suffix:!1,expandable:!1,symbol:"展开"};var mv={emits:["update:modelValue"],mixins:[ht],props:{type:{validator(v){return re(v,["secondary","success","warning","danger",""])},default:""},copyable:{type:Boolean,default:!1},copyText:{type:String,default:""},copyConfig:{type:Object,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.typography.copyConfig===""?bE:v.$VIEWUI.typography.copyConfig}},editable:{type:Boolean,default:!1},editConfig:{type:Object,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.typography.editConfig===""?oS:v.$VIEWUI.typography.editConfig}},ellipsis:{type:Boolean,default:!1},ellipsisConfig:{type:Object,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.typography.ellipsisConfig===""?iS:v.$VIEWUI.typography.ellipsisConfig}},disabled:{type:Boolean,default:!1},code:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},italic:{type:Boolean,default:!1},modelValue:{type:String,default:""},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},theme:{validator(v){return re(v,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{isHrefPattern(){const{to:v}=this;return!!v},linkProps(){if(this.isHrefPattern){const{linkUrl:v,target:E}=this;return{href:v,target:E}}else return{}},mergedCopyConfig(){return Object.assign({},bE,this.copyConfig)},mergedEditConfig(){return Object.assign({},oS,this.editConfig)},mergedEllipsisConfig(){return Object.assign({},iS,this.ellipsisConfig)}},methods:{commonSlots(){const v={};return this.$slots.default&&(v.default=()=>this.$slots.default()),this.$slots.copyIcon&&(v.copyIcon=E=>this.$slots.copyIcon(E)),this.$slots.editIcon&&(v.editIcon=E=>this.$slots.editIcon(E)),this.$slots.enterIcon&&(v.enterIcon=E=>this.$slots.enterIcon(E)),v},commonEvents(){return{"onUpdate:modelValue":this.handleOnUpdateModelValue}},handleOnUpdateModelValue(v){this.$emit("update:modelValue",v)}}};const gv={name:"TypographyBase",mixins:[mv],emits:["on-copy-success","on-copy-error","on-edit-start","on-edit-end","on-edit-change","on-edit-cancel"],props:{component:{type:String,default:"div"},level:{type:Number,default:0}},data(){return{currentContent:this.modelValue,copied:!1,copyTimeout:null,editing:!1,editContent:"",lastKeyCode:"",isEditESC:!1,ellipsisText:"",ellipsisContent:"",isEllipsis:!1,ellipsisExpanded:!1,observer:null}},created(){this.editing=this.mergedEditConfig.editing||!1,this.editing&&(this.editContent=this.currentContent?this.currentContent:this.handleGetContent())},watch:{modelValue(v){this.currentContent=v},editing(v){v||c.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},isEllipsis(){c.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},ellipsis:{handler(v){v?c.nextTick(()=>{this.handleUpdateEllipsisStatus(),this.handleCreateObserver()}):this.handleRemoveObserver()},immediate:!0}},computed:{classes(){return["ivu-typography",{[`ivu-typography-${this.type}`]:this.type,"ivu-typography-disabled":this.disabled,"ivu-typography-ellipsis-line-clamp":this.ellipsis&&!this.ellipsisExpanded,"ivu-typography-ellipsis-single-line":this.ellipsis&&!this.ellipsisExpanded&&this.mergedEllipsisConfig.rows===1}]}},methods:{wrapperDecorations(){let v=this.currentContent?this.currentContent:this.$slots.default?this.$slots.default():"";function E(P,G){!P||(v=c.h(G,v))}return E(this.strong,"strong"),E(this.underline,"u"),E(this.delete,"del"),E(this.code,"code"),E(this.mark,"mark"),E(this.keyboard,"kbd"),E(this.italic,"i"),v},handleClickContent(v){if(!this.isHrefPattern&&this.component!=="a"){const E=this.mergedEditConfig.triggerType;this.editable&&(E==="text"||E==="both")&&this.handleEdit()}else{const E=v.ctrlKey||v.metaKey;this.handleCheckClick(v,E)}},handleGetContent(){const v=document.createElement("div");document.body.appendChild(v);let E=null,P=null,G="";const H=this.wrapperDecorations();return E=c.createApp({render(){return c.h("div",{ref:"text",style:{display:"none"}},H)},created(){P=c.getCurrentInstance()}}),E.mount(v),G=P.refs.text.innerText,E.unmount(),document.body.removeChild(v),G},handleCopy(){let v="";this.copyText?v=this.copyText:this.currentContent?v=this.currentContent:this.$slots.default&&(v=this.handleGetContent()),Cc({text:this.copyText?this.copyText:v,showTip:this.mergedCopyConfig.showTip,successTip:this.mergedCopyConfig.successTip,errorTip:this.mergedCopyConfig.errorTip,success:()=>{this.$emit("on-copy-success"),this.copied=!0,this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.copied=!1},3e3)},error:()=>{this.$emit("on-copy-error")}})},handleEdit(){this.editContent=this.currentContent?this.currentContent:this.handleGetContent(),c.nextTick(()=>{this.editing=!0,this.$emit("on-edit-start"),c.nextTick(()=>{this.$refs.edit.focus({cursor:"end"})})})},handleEditBlur(){if(this.isEditESC){this.isEditESC=!1;return}this.handleEditSave(),this.$emit("on-edit-end",this.editContent)},handleEditChange(v){const E=v.target.value;this.editContent=E,this.$emit("on-edit-change",E)},handleEditSave(){this.$emit("update:modelValue",this.editContent),this.editing=!1},handleEditKeydown(v){const{keyCode:E}=v;E===Fr.ENTER&&v.preventDefault(),this.lastKeyCode=E},handleEditKeyup(v){const{keyCode:E,ctrlKey:P,altKey:G,metaKey:H,shiftKey:N}=v;this.lastKeyCode===E&&!P&&!G&&!H&&!N&&(E===Fr.ENTER?(this.handleEditSave(),this.$emit("on-edit-end",this.editContent)):E===Fr.ESC&&(this.isEditESC=!0,this.$emit("on-edit-cancel"),this.editing=!1))},handleUpdateEllipsisStatus(){if(this.ellipsis&&!this.ellipsisExpanded){const v=this.$refs.typography;this.isEllipsis=v.scrollHeight>v.clientHeight}else this.isEllipsis=!1},handleCreateObserver(){this.ellipsis&&!this.ellipsisExpanded&&(this.observer=im(),this.observer.listenTo(this.$refs.typography,this.handleUpdateEllipsisStatus))},handleRemoveObserver(){this.observer&&(this.observer.removeListener(this.$refs.typography,this.handleUpdateEllipsisStatus),this.observer=null)}},render(){let v=[];const E=this.wrapperDecorations();if(v.push(E),this.editable){const P=this.mergedEditConfig.triggerType;if(P==="icon"||P==="both"){const G=this.$slots.editIcon?this.$slots.editIcon():c.h(oe,{type:"md-create"}),H=c.h("div",{class:"ivu-typography-edit",onClick:this.handleEdit},G);if(this.mergedEditConfig.tooltip){const N=c.h(bn,{content:this.mergedEditConfig.tooltip,placement:"top"},()=>H);v.push(N)}else v.push(H)}}if(this.copyable){const P=this.$slots.copyIcon?this.$slots.copyIcon({copied:this.copied}):c.h(oe,{type:this.copied?"md-checkmark":"md-copy"}),G=c.h("div",{class:["ivu-typography-copy",{"ivu-typography-copy-success":this.copied}],onClick:this.handleCopy},P);if(this.mergedCopyConfig.tooltips instanceof Array&&this.mergedCopyConfig.tooltips.length===2){const H=c.h(bn,{content:this.copied?this.mergedCopyConfig.tooltips[1]:this.mergedCopyConfig.tooltips[0],placement:"top"},()=>G);v.push(H)}else v.push(G)}if(this.editing){const P=c.h(Sl,{ref:"edit",modelValue:this.editContent,type:"textarea",autosize:this.mergedEditConfig.autosize,maxlength:this.mergedEditConfig.maxlength,"onOn-blur":this.handleEditBlur,"onOn-keydown":this.handleEditKeydown,"onOn-keyup":this.handleEditKeyup,"onOn-change":this.handleEditChange}),G=this.$slots.enterIcon?this.$slots.enterIcon():c.h(oe,{type:"md-return-left"}),H=c.h("span",{class:"ivu-typography-edit-content-confirm"},G);return c.h("div",{class:["ivu-typography","ivu-typography-edit-content",{[`ivu-typography-h${this.level}`]:this.level,"ivu-typography-div":!this.level}]},[P,H])}else{const P={};this.ellipsis&&!this.ellipsisExpanded&&(P["-webkit-line-clamp"]=this.mergedEllipsisConfig.rows);let G=null;const H=c.h(this.component,x(S({ref:"typography",class:this.classes},this.linkProps),{style:P,onClick:this.handleClickContent}),[v,G]);return this.ellipsis&&!this.ellipsisExpanded&&this.isEllipsis&&this.mergedEllipsisConfig.tooltip?c.h(bn,{content:this.mergedEllipsisConfig.tooltip===!0?this.handleGetContent():this.mergedEllipsisConfig.tooltip,placement:this.placement,transfer:this.transfer,theme:this.theme,maxWidth:this.maxWidth},()=>H):H}},beforeUnmount(){this.handleRemoveObserver()}},aS={name:"Link",mixins:[mv],render(){return c.h(gv,S(x(S({},this.$props),{component:"a"}),this.commonEvents()),this.commonSlots())}};function vv(){return gn(),Zn}let um=vv();tc.newInstance=v=>{if(!A)return;const E=v||{};let P=null;const G=c.createApp({data(){return Object.assign({},E,{})},render(){let ee="";return this.render?ee=c.h(tc,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(c.h)]):ee=c.h(tc,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),c.h("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+um}},[ee])},created(){P=c.getCurrentInstance()}}),H=document.createElement("div");document.body.appendChild(H),G.mount(H);const N=P.refs.spin;return{show(){c.nextTick(()=>{P.refs.spin.visible=!0,um=vv()})},remove(ee){N.visible=!1,setTimeout(function(){G.unmount(),document.body.removeChild(H),ee()},500)},component:N}};let yv;function Qf(v=void 0){return yv=yv||tc.newInstance({render:v}),yv}function cD(v){const E="render"in v?v.render:void 0;Qf(E).show(v)}tc.show=function(v={}){return cD(v)},tc.hide=function(){if(!yv)return!1;Qf().remove(()=>{yv=null})};const ep="ivu-list",Ny={name:"List",provide(){return{ListInstance:this}},components:{Spin:tc},props:{border:{type:Boolean,default:!1},itemLayout:{validator(v){return re(v,["horizontal","vertical"])},default:"horizontal"},header:{type:String,default:""},footer:{type:String,default:""},loading:{type:Boolean,default:!1},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},split:{type:Boolean,default:!0}},data(){return{}},computed:{classes(){return[`${ep}`,`${ep}-${this.size}`,`${ep}-${this.itemLayout}`,{[`${ep}-bordered`]:this.border,[`${ep}-split`]:this.split}]}},methods:{}},sS={key:0,class:"ivu-list-header"},uD={class:"ivu-list-container"},dD={class:"ivu-list-items"},Oy={key:2,class:"ivu-list-footer"};function tp(v,E,P,G,H,N){const ee=c.resolveComponent("Spin");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[P.header||v.$slots.header?(c.openBlock(),c.createElementBlock("div",sS,[c.renderSlot(v.$slots,"header",{},()=>[c.createTextVNode(c.toDisplayString(P.header),1)])])):c.createCommentVNode("",!0),c.createElementVNode("div",uD,[c.createElementVNode("ul",dD,[c.renderSlot(v.$slots,"default")])]),P.loading?(c.openBlock(),c.createBlock(ee,{key:1,fix:"",size:"large"},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"spin")]),_:3})):c.createCommentVNode("",!0),P.footer||v.$slots.footer?(c.openBlock(),c.createElementBlock("div",Oy,[c.renderSlot(v.$slots,"footer",{},()=>[c.createTextVNode(c.toDisplayString(P.footer),1)])])):c.createCommentVNode("",!0)],2)}var qd=$(Ny,[["render",tp]]);const bv={name:"ListItem",inject:["ListInstance"],props:{},computed:{itemLayout(){return this.ListInstance.itemLayout},isItemContainsTextNode(){let v;return this.$slots.default().forEach(E=>{typeof E=="string"&&(v=!0)}),v},isFlexMode(){const v=this.$slots.extra;return this.itemLayout==="vertical"?!!v:!this.isItemContainsTextNode},classes(){return[{"ivu-list-item-no-flex":!this.isFlexMode}]}}},dm={class:"ivu-list-item-main"},_E={key:0,class:"ivu-list-item-action"},Kd={class:"ivu-list-item-extra"},vu={key:0,class:"ivu-list-item-action"},By={class:"ivu-list-item-extra"};function lS(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(["ivu-list-item",N.classes])},[N.itemLayout==="vertical"&&v.$slots.extra?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createElementVNode("div",dm,[c.renderSlot(v.$slots,"default"),v.$slots.action?(c.openBlock(),c.createElementBlock("ul",_E,[c.renderSlot(v.$slots,"action")])):c.createCommentVNode("",!0)]),c.createElementVNode("div",Kd,[c.renderSlot(v.$slots,"extra")])],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.renderSlot(v.$slots,"default"),v.$slots.action?(c.openBlock(),c.createElementBlock("ul",vu,[c.renderSlot(v.$slots,"action")])):c.createCommentVNode("",!0),c.createElementVNode("div",By,[c.renderSlot(v.$slots,"extra")])],64))],2)}var cS=$(bv,[["render",lS]]);const SE={name:"ListItemMeta",components:{Avatar:Ef},props:{avatar:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""}}},_v={class:"ivu-list-item-meta"},Sv={key:0,class:"ivu-list-item-meta-avatar"},uS={class:"ivu-list-item-meta-content"},xE={key:0,class:"ivu-list-item-meta-title"},xv={key:1,class:"ivu-list-item-meta-description"};function Fy(v,E,P,G,H,N){const ee=c.resolveComponent("Avatar");return c.openBlock(),c.createElementBlock("div",_v,[P.avatar||v.$slots.avatar?(c.openBlock(),c.createElementBlock("div",Sv,[c.renderSlot(v.$slots,"avatar",{},()=>[c.createVNode(ee,{src:P.avatar},null,8,["src"])])])):c.createCommentVNode("",!0),c.createElementVNode("div",uS,[P.title||v.$slots.title?(c.openBlock(),c.createElementBlock("div",xE,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])])):c.createCommentVNode("",!0),P.description||v.$slots.description?(c.openBlock(),c.createElementBlock("div",xv,[c.renderSlot(v.$slots,"description",{},()=>[c.createTextVNode(c.toDisplayString(P.description),1)])])):c.createCommentVNode("",!0)])])}var CE=$(SE,[["render",Fy]]);const hm="ivu-loading-bar",Vy={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${hm}`},innerClasses(){return[`${hm}-inner`,{[`${hm}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${hm}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let v={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(v.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(v.backgroundColor=this.failedColor),v}}};function wa(v,E,P,G,H,N){return c.openBlock(),c.createBlock(c.Transition,{name:"fade"},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.outerStyles)},[c.createElementVNode("div",{class:c.normalizeClass(N.innerClasses),style:c.normalizeStyle(N.styles)},null,6)],6),[[c.vShow,H.show]])]),_:1})}var wE=$(Vy,[["render",wa]]);wE.newInstance=v=>{if(!A)return;const E=v||{};let P=null;const G=c.createApp({data(){return E},render(){return c.h(wE,Object.assign({ref:"loadingBar"},E))},created(){P=c.getCurrentInstance()}}),H=document.createElement("div");document.body.appendChild(H),G.mount(H);const N=P.refs.loadingBar;return{update(ee){"percent"in ee&&(N.percent=ee.percent),ee.status&&(N.status=ee.status),"show"in ee&&(N.show=ee.show)},component:N,destroy(){G.unmount(),document.body.removeChild(H)}}};let kc,dS="primary",hS=800,np="error",Ja=2,od;function fm(){return kc=kc||wE.newInstance({color:dS,failedColor:np,height:Ja}),kc}function Dc(v){fm().update(v)}function zy(){setTimeout(()=>{Dc({show:!1}),setTimeout(()=>{Dc({percent:0})},200)},hS)}function rp(){od&&(clearInterval(od),od=null)}var pm={start(){if(od)return;let v=0;Dc({percent:v,status:"success",show:!0}),od=setInterval(()=>{v+=Math.floor(Math.random()*3+1),v>95&&rp(),Dc({percent:v,status:"success",show:!0})},200)},update(v){rp(),Dc({percent:v,status:"success",show:!0})},finish(){rp(),Dc({percent:100,status:"success",show:!0}),zy()},error(){rp(),Dc({percent:100,status:"error",show:!0}),zy()},config(v){v.color&&(dS=v.color),v.duration&&(hS=v.duration),v.failedColor&&(np=v.failedColor),v.height&&(Ja=v.height)},destroy(){rp();let v=fm();kc=null,v.destroy()}};const id={name:"Login",components:{Form:ec},emits:["on-submit"],provide(){return{LoginInstance:this}},props:{},data(){return{formValidate:{}}},methods:{handleSubmit(){this.$refs.form.validate(v=>{this.$emit("on-submit",v,JSON.parse(JSON.stringify(this.formValidate)))})},handleValidate(v,E){let P=!0;v.forEach(G=>{this.$refs.form.validateField(G,H=>{H&&(P=!1)})}),E(P)}}},hD={class:"ivu-login"};function fD(v,E,P,G,H,N){const ee=c.resolveComponent("Form");return c.openBlock(),c.createElementBlock("div",hD,[c.createVNode(ee,{ref:"form",model:H.formValidate,onSubmit:E[0]||(E[0]=c.withModifiers(()=>{},["prevent"]))},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),_:3},8,["model"])])}var Xd=$(id,[["render",fD]]);const Cv="ivu-menu",fS={name:"Menu",emits:["on-select","on-open-change"],provide(){return{MenuInstance:this}},props:{mode:{validator(v){return re(v,["horizontal","vertical"])},default:"vertical"},theme:{validator(v){return re(v,["light","dark","primary"])},default:"light"},activeName:{type:[String,Number]},openNames:{type:Array,default(){return[]}},accordion:{type:Boolean,default:!1},width:{type:String,default:"240px"}},data(){return{currentActiveName:this.activeName,openedNames:[],submenuList:[],menuItemList:[],ready:!1}},computed:{classes(){let v=this.theme;return this.mode==="vertical"&&this.theme==="primary"&&(v="light"),[`${Cv}`,`${Cv}-${v}`,{[`${Cv}-${this.mode}`]:this.mode}]},styles(){let v={};return this.mode==="vertical"&&(v.width=this.width),v}},methods:{updateActiveName(){this.currentActiveName===void 0&&(this.currentActiveName=-1),this.submenuList.map(v=>v.submenu).forEach(v=>{v.handleUpdateActiveName(!1)}),this.menuItemList.map(v=>v.menuitem).forEach(v=>{v.handleUpdateActiveName(this.currentActiveName)})},updateOpenKeys(v){const E=[...this.openedNames].indexOf(v),P=this.submenuList.map(H=>H.submenu);if(this.accordion&&P.forEach(H=>{H.opened=!1}),E>=0){let H=null;P.forEach(N=>{N.name===v&&(H=N,N.opened=!1)}),Lt(H,"Submenu").forEach(N=>{N.opened=!0}),H.childSubmenuList.map(N=>N.submenu).forEach(N=>{N.opened=!1})}else if(this.accordion){let H=null;P.forEach(N=>{N.name===v&&(H=N,N.opened=!0)}),Lt(H,"Submenu").forEach(N=>{N.opened=!0})}else this.submenuList.map(H=>H.submenu).forEach(H=>{H.name===v&&(H.opened=!0)});let G=P.filter(H=>H.opened).map(H=>H.name);this.openedNames=[...G],this.$emit("on-open-change",G)},updateOpened(){const v=(this.submenuList||[]).map(E=>E.submenu);v.length&&v.forEach(E=>{this.openedNames.indexOf(E.name)>-1?E.opened=!0:E.opened=!1})},handleEmitSelectEvent(v){this.$emit("on-select",v)},handleMenuItemSelect(v){this.currentActiveName=v,this.$emit("on-select",v)}},mounted(){this.openedNames=[...this.openNames],this.updateOpened(),c.nextTick(()=>{this.updateActiveName(),this.ready=!0})},watch:{openNames(v){this.openedNames=v},activeName(v){this.currentActiveName=v},currentActiveName(){this.updateActiveName()}}};function Jd(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("ul",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles)},[c.renderSlot(v.$slots,"default")],6)}var Uy=$(fS,[["render",Jd]]),Hs={inject:{MenuInstance:{default:null},SubmenuInstance:{default:null}},data(){return{menu:this.MenuInstance}},computed:{hasParentSubmenu(){return!!this.SubmenuInstance},parentSubmenuNum(){return Lt(this,"Submenu").length},mode(){return this.MenuInstance.mode}}};const Qd="ivu-menu",pS={name:"MenuGroup",mixins:[Hs],props:{title:{type:String,default:""}},data(){return{prefixCls:Qd}},computed:{groupStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*28+"px"}:{}}}};function mm(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass([H.prefixCls+"-item-group"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-item-group-title"]),style:c.normalizeStyle(N.groupStyle)},c.toDisplayString(P.title),7),c.createElementVNode("ul",null,[c.renderSlot(v.$slots,"default")])],2)}var Es=$(pS,[["render",mm]]);const ls="ivu-menu",Ts={name:"MenuItem",mixins:[Hs,ht],props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{active:!1,id:mt(6)}},computed:{classes(){return[`${ls}-item`,{[`${ls}-item-active`]:this.active,[`${ls}-item-selected`]:this.active,[`${ls}-item-disabled`]:this.disabled}]},itemStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}}},methods:{handleClickItem(v,E=!1){if(!this.disabled)if(E||this.target==="_blank"){this.handleCheckClick(v,E);let P=Tt(this,"Menu");P&&P.handleEmitSelectEvent(this.name)}else Tt(this,"Submenu")?this.SubmenuInstance.handleMenuItemSelect(this.name):this.MenuInstance.handleMenuItemSelect(this.name),this.handleCheckClick(v,E)},handleUpdateActiveName(v){this.name===v?(this.active=!0,this.SubmenuInstance&&this.SubmenuInstance.handleUpdateActiveName(v)):this.active=!1},addMenuItem(){const v=this.MenuInstance;v.menuItemList||(v.menuItemList=[]),v.menuItemList.push({id:this.id,menuitem:this})},removeMenuItem(){const v=this.MenuInstance;if(v.menuItemList&&v.menuItemList.length){const E=v.menuItemList.findIndex(P=>P.id===this.id);v.menuItemList.splice(E,1)}}},mounted(){this.addMenuItem()},beforeUnmount(){this.removeMenuItem()}},Pc=["href","target"];function Hy(v,E,P,G,H,N){return v.to?(c.openBlock(),c.createElementBlock("a",{key:0,href:v.linkUrl,target:v.target,class:c.normalizeClass(N.classes),onClick:[E[0]||(E[0]=c.withModifiers(ee=>N.handleClickItem(ee,!1),["exact"])),E[1]||(E[1]=c.withModifiers(ee=>N.handleClickItem(ee,!0),["ctrl"])),E[2]||(E[2]=c.withModifiers(ee=>N.handleClickItem(ee,!0),["meta"]))],style:c.normalizeStyle(N.itemStyle)},[c.renderSlot(v.$slots,"default")],14,Pc)):(c.openBlock(),c.createElementBlock("li",{key:1,class:c.normalizeClass(N.classes),onClick:E[3]||(E[3]=c.withModifiers((...ee)=>N.handleClickItem&&N.handleClickItem(...ee),["stop"])),style:c.normalizeStyle(N.itemStyle)},[c.renderSlot(v.$slots,"default")],6))}var hl=$(Ts,[["render",Hy]]);const Yh={name:"Mobile",mixins:[Sg],data(){return{className:"ivu-login-mobile",prefix:"ios-phone-portrait",placeholder:"请输入手机号码",type:"text"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:ou.Mobile,trigger:"change"},{pattern:/^1\d{10}$/,message:"输入的手机号码格式不正确！",trigger:"change"}]}}}},Ll="ivu-modal",EE={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},pD={inheritAttrs:!1,name:"Modal",mixins:[vt,nv],components:{Icon:oe,iButton:Oi},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.modal.maskClosable===""?!0:v.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!0:v.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:Ll,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:Te(EE),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:mt(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${Ll}-wrap`,{[`${Ll}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${Ll}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${Ll}-mask`},classes(){return[`${Ll}`,{[`${Ll}-fullscreen`]:this.fullscreen,[`${Ll}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${Ll}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${Ll}-content`,{[`${Ll}-content-no-mask`]:!this.showMask,[`${Ll}-content-drag`]:this.draggable&&!this.fullscreen,[`${Ll}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let v={};const E=parseInt(this.width),P=this.dragData.x!==null?{top:0}:{width:E<=100?`${E}%`:`${E}px`},G=this.styles?this.styles:{};return Object.assign(v,P,G),v},contentStyles(){let v={};if(this.draggable&&!this.fullscreen){const E=this.styles.top?parseFloat(this.styles.top):0,P=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(v.left=`${this.dragData.x-P}px`),this.dragData.y!==null&&(v.top=`${this.dragData.y}px`),this.dragData.y!==null&&(v.top=`${this.dragData.y-E}px`);const G=parseInt(this.width),H={width:G<=100?`${G}%`:`${G}px`};Object.assign(v,H)}return v},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const v=this.beforeClose();v&&v.then?v.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(v){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const E=v.target.getAttribute("class");E&&E.indexOf(`${Ll}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(v){if(this.visible&&this.closable&&v.keyCode===27){const E=this.$root.modalList.map(P=>P.modal).filter(P=>P.$data.visible&&P.$props.closable).sort((P,G)=>P.$data.modalIndex<G.$data.modalIndex?1:-1)[0];setTimeout(()=>{E.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(v){if(!this.draggable||this.fullscreen)return!1;const E=this.$refs.content.getBoundingClientRect();this.dragData.rect=E,this.dragData.x=E.x||E.left,this.dragData.y=E.y||E.top;const P={x:v.clientX,y:v.clientY};this.dragData.dragX=P.x,this.dragData.dragY=P.y,this.dragData.dragging=!0,R(window,"mousemove",this.handleMoveMove),R(window,"mouseup",this.handleMoveEnd)},handleMoveMove(v){if(!this.dragData.dragging||this.fullscreen)return!1;const E={x:v.clientX,y:v.clientY},P={x:E.x-this.dragData.dragX,y:E.y-this.dragData.dragY};if(A&&this.sticky){const G=document.documentElement.clientWidth,H=document.documentElement.clientHeight;this.dragData.x+P.x<=this.stickyDistance&&P.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-G>-this.stickyDistance&&P.x>0?this.dragData.x=G-this.dragData.rect.width:this.dragData.x+=P.x,this.dragData.y+P.y<=this.stickyDistance&&P.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-H>-this.stickyDistance&&P.y>0?this.dragData.y=H-this.dragData.rect.height:this.dragData.y+=P.y}else this.dragData.x+=P.x,this.dragData.y+=P.y;this.dragData.dragX=E.x,this.dragData.dragY=E.y},handleMoveEnd(){this.dragData.dragging=!1,L(window,"mousemove",this.handleMoveMove),L(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return gn(),Zn},handleClickModal(){if(this.draggable){if(yo!==this.lastVisibleIndex){this.lastVisibleIndex=yo;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const v=this.$root;v.modalList||(v.modalList=[]),v.modalList.push({id:this.id,modal:this})},removeModal(){const v=this.$root;if(!v.modalList)return;const E=v.modalList.findIndex(P=>P.id===this.id);v.modalList.splice(E,1)}},watch:{modelValue(v){this.visible=v},visible(v){v===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==v&&(this.modalIndex=this.handleGetModalIndex(),oo()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(E=>{E.table.handleOnVisibleChange(v)}),this.sliderList.forEach(E=>{E.slider.handleOnVisibleChange(v)}),this.$emit("on-visible-change",v),this.lastVisible=v,this.lastVisibleIndex=yo,v&&this.resetDragPosition&&(this.dragData=Te(EE))},loading(v){v||(this.buttonLoading=!1)},scrollable(v){v?this.removeScrollEffect():this.addScrollEffect()},title(v){this.$slots.header===void 0&&(this.showHead=!!v)}},mounted(){this.visible&&(this.wrapShow=!0);let v=!0;this.$slots.header===void 0&&!this.title&&(v=!1),this.showHead=v,this.addModal(),A&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),A&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function mS(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("i-button");return c.openBlock(),c.createBlock(c.Teleport,{to:"body",disabled:!P.transfer},[c.createVNode(c.Transition,{name:P.transitionNames[1]},{default:c.withCtx(()=>[N.showMask?c.withDirectives((c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.maskClasses),style:c.normalizeStyle(N.wrapStyles),onClick:E[0]||(E[0]=(...Ce)=>N.handleMask&&N.handleMask(...Ce))},null,6)),[[c.vShow,H.visible]]):c.createCommentVNode("",!0)]),_:1},8,["name"]),c.createElementVNode("div",{class:c.normalizeClass(N.wrapClasses),style:c.normalizeStyle(N.wrapStyles),onClick:E[5]||(E[5]=(...Ce)=>N.handleWrapClick&&N.handleWrapClick(...Ce))},[c.createVNode(c.Transition,{name:P.transitionNames[0],onAfterLeave:N.animationFinish},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",c.mergeProps(v.$attrs,{class:N.classes,style:N.mainStyles,onMousedown:E[4]||(E[4]=(...Ce)=>N.handleMousedown&&N.handleMousedown(...Ce))}),[c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses),ref:"content",style:c.normalizeStyle(N.contentStyles),onClick:E[3]||(E[3]=(...Ce)=>N.handleClickModal&&N.handleClickModal(...Ce))},[P.closable?(c.openBlock(),c.createElementBlock("a",{key:0,class:c.normalizeClass([H.prefixCls+"-close"]),onClick:E[1]||(E[1]=(...Ce)=>N.close&&N.close(...Ce))},[c.renderSlot(v.$slots,"close",{},()=>[c.createVNode(ee,{type:"ios-close"})])],2)):c.createCommentVNode("",!0),H.showHead?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass([H.prefixCls+"-header"]),onMousedown:E[2]||(E[2]=(...Ce)=>N.handleMoveStart&&N.handleMoveStart(...Ce))},[c.renderSlot(v.$slots,"header",{},()=>[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-header-inner"])},c.toDisplayString(P.title),3)])],34)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"])},[c.renderSlot(v.$slots,"default")],2),P.footerHide?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",{key:2,class:c.normalizeClass([H.prefixCls+"-footer"])},[c.renderSlot(v.$slots,"footer",{},()=>[c.createVNode(le,{type:"text",onClick:N.cancel},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.localeCancelText),1)]),_:1},8,["onClick"]),c.createVNode(le,{type:"primary",loading:H.buttonLoading,onClick:N.ok},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[c.vShow,H.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}var nc=$(pD,[["render",mS]]);const rc="ivu-modal-confirm";nc.newInstance=v=>{if(!A)return;const E=v||{},P=document.createElement("div");document.body.appendChild(P);let G=null;const H=c.createApp({mixins:[vt],data(){return Object.assign({},E,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let ee=[];this.showCancel&&ee.push(c.h(Oi,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),ee.push(c.h(Oi,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let le;this.render?le=c.h("div",{class:`${rc}-body ${rc}-body-render`},[this.render(c.h)]):le=c.h("div",{class:`${rc}-body`},[c.h("div",{innerHTML:this.body})]);let Ce;return this.title&&(Ce=c.h("div",{class:`${rc}-head`},[c.h("div",{class:this.iconTypeCls},[c.h("i",{class:this.iconNameCls})]),c.h("div",{class:`${rc}-head-title`,innerHTML:this.title})])),c.h(nc,Object.assign({},E,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":pe=>this.visible=pe,"onOn-cancel":this.cancel}),()=>c.h("div",{class:rc},[Ce,le,c.h("div",{class:`${rc}-footer`},ee)]))},computed:{iconTypeCls(){return[`${rc}-head-icon`,`${rc}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){H.unmount(),document.body.removeChild(P),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){G=c.getCurrentInstance()}});H.mount(P);const N=G.refs.modal;return{show(ee){switch(N.$parent.showCancel=ee.showCancel,N.$parent.iconType=ee.icon,ee.icon){case"info":N.$parent.iconName="ios-information-circle";break;case"success":N.$parent.iconName="ios-checkmark-circle";break;case"warning":N.$parent.iconName="ios-alert";break;case"error":N.$parent.iconName="ios-close-circle";break;case"confirm":N.$parent.iconName="ios-help-circle";break}"width"in ee&&(N.$parent.width=ee.width),"closable"in ee&&(N.$parent.closable=ee.closable),"title"in ee&&(N.$parent.title=ee.title),"content"in ee&&(N.$parent.body=ee.content),"okText"in ee&&(N.$parent.okText=ee.okText),"cancelText"in ee&&(N.$parent.cancelText=ee.cancelText),"onCancel"in ee&&(N.$parent.onCancel=ee.onCancel),"onOk"in ee&&(N.$parent.onOk=ee.onOk),"loading"in ee&&(N.$parent.loading=ee.loading),"scrollable"in ee&&(N.$parent.scrollable=ee.scrollable),N.$parent.onRemove=ee.onRemove,N.visible=!0},remove(){N.visible=!1,N.$parent.buttonLoading=!1,N.$parent.remove()},component:N}};let gm;function mD(v=void 0,E=!0){return gm=gm||nc.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:v,lockScroll:E}),gm}function wv(v){const E="render"in v?v.render:void 0,P="lockScroll"in v?v.lockScroll:!0;let G=mD(E,P);v.onRemove=function(){gm=null},G.show(v)}nc.info=function(v={}){return v.icon="info",v.showCancel=!1,wv(v)},nc.success=function(v={}){return v.icon="success",v.showCancel=!1,wv(v)},nc.warning=function(v={}){return v.icon="warning",v.showCancel=!1,wv(v)},nc.error=function(v={}){return v.icon="error",v.showCancel=!1,wv(v)},nc.confirm=function(v={}){return v.icon="confirm",v.showCancel=!0,wv(v)},nc.remove=function(){if(!gm)return!1;mD().remove()};const oc="ivu-notice",gD="ivu-icon",TE="ivu_notice_key_";let io=24,yu=4.5,Rc,Gy=1;const vD={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle"},Wy="move-notice";function AE(){return Rc=Rc||ty.newInstance({prefixCls:oc,styles:{top:`${io}px`,right:0},transitionName:Wy}),Rc}function op(v,E){const P=E.title||"",G=E.desc||"",H=E.name||`${TE}${Gy}`,N=E.onClose||function(){},ee=E.render,le=E.duration===0?0:E.duration||yu;Gy++;let Ce=AE(),pe,we;const We=E.render&&!P?"":G||E.render?` ${oc}-with-desc`:"";if(v==="normal")we=!1,pe=`
            <div class="${oc}-custom-content ${oc}-with-normal ${We}">
                <div class="${oc}-title">${P}</div>
                <div class="${oc}-desc">${G}</div>
            </div>
        `;else{const ut=vD[v],ct=We===""?"":"-outline";we=!0,pe=`
            <div class="${oc}-custom-content ${oc}-with-icon ${oc}-with-${v} ${We}">
                <span class="${oc}-icon ${oc}-icon-${v}">
                    <i class="${gD} ${gD}-${ut}${ct}"></i>
                </span>
                <div class="${oc}-title">${P}</div>
                <div class="${oc}-desc">${G}</div>
            </div>
        `}Ce.notice({name:H.toString(),duration:le,styles:{},transitionName:Wy,content:pe,withIcon:we,render:ee,hasTitle:!!P,onClose:N,closable:!0,type:"notice"})}var Ev={open(v){return op("normal",v)},info(v){return op("info",v)},success(v){return op("success",v)},warning(v){return op("warning",v)},error(v){return op("error",v)},config(v){v.top&&(io=v.top),(v.duration||v.duration===0)&&(yu=v.duration)},close(v){if(v)v=v.toString(),Rc&&Rc.remove(v);else return!1},destroy(){let v=AE();Rc=null,v.destroy("ivu-notice")}};const bi="ivu-tabs",yD=300,Yy=(v,E,P,G)=>{const H=(v.findIndex(ee=>ee.name===E)+P+v.length)%v.length,N=v[H];return N.disabled?Yy(v,N.name,P):N},vm=(v,E)=>{try{v.focus()}catch{}if(A&&document.activeElement==v&&v!==E)return!0;const P=v.children;for(let G of P)if(vm(G,E))return!0;return!1},gS={name:"Tabs",mixins:[zt],emits:["on-click","on-dblclick","on-contextmenu","on-tab-remove","on-drag-drop","update:modelValue"],components:{Icon:oe,Render:zf,Dropdown:Wi,DropdownMenu:Ph},provide(){return{TabsInstance:this}},props:{modelValue:{type:[String,Number]},type:{validator(v){return re(v,["line","card"])},default:"line"},size:{validator(v){return re(v,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:bi,navList:[],barWidth:0,barOffset:0,activeKey:this.modelValue,focusedKey:this.modelValue,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},paneList:[],tableList:[]}},computed:{classes(){return[`${bi}`,{[`${bi}-card`]:this.type==="card",[`${bi}-mini`]:this.size==="small"&&this.type==="line",[`${bi}-no-animation`]:!this.animated}]},contentClasses(){return[`${bi}-content`,{[`${bi}-content-animated`]:this.animated}]},barClasses(){return[`${bi}-ink-bar`,{[`${bi}-ink-bar-animated`]:this.animated}]},contentStyle(){const v=this.getTabIndex(this.activeKey),E=v===0?"0%":`-${v}00%`;let P={};return v>-1&&(P={transform:`translateX(${E}) translateZ(0px)`}),P},barStyle(){let v={visibility:"hidden",width:`${this.barWidth}px`};return this.type==="line"&&(v.visibility="visible"),this.animated?v.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:v.left=`${this.barOffset}px`,v},arrowType(){const v=this.globalConfig;let E="ios-close";return v&&(v.tabs.customCloseIcon?E="":v.tabs.closeIcon&&(E=v.tabs.closeIcon)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.tabs.customCloseIcon&&(E=v.tabs.customCloseIcon),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.tabs.closeIconSize&&(E=v.tabs.closeIconSize),E}},methods:{getTabs(){const v=this.paneList.map(P=>P.pane),E=[];return v.forEach(P=>{P.tab&&this.name?P.tab===this.name&&E.push(P):E.push(P)}),E.sort((P,G)=>{if(P.index&&G.index)return P.index>G.index?1:-1}),E},updateNav(){this.navList=[],this.getTabs().forEach((v,E)=>{this.navList.push({labelType:typeof v.label,label:v.label,icon:v.icon||"",name:v.currentName||E,disabled:v.disabled,closable:v.closable,contextMenu:v.contextMenu}),v.currentName||(v.currentName=E),E===0&&(this.activeKey||(this.activeKey=v.currentName||E))}),this.updateStatus(),this.updateBar()},updateBar(){c.nextTick(()=>{const v=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const E=this.$refs.nav.querySelectorAll(`.${bi}-tab`),P=E[v];if(this.barWidth=P?parseFloat(P.offsetWidth):0,v>0){let G=0;const H=this.size==="small"?0:16;for(let N=0;N<v;N++)G+=parseFloat(E[N].offsetWidth)+H;this.barOffset=G}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){this.getTabs().forEach(v=>v.show=v.currentName===this.activeKey||this.animated)},tabCls(v){return[`${bi}-tab`,{[`${bi}-tab-disabled`]:v.disabled,[`${bi}-tab-active`]:v.name===this.activeKey,[`${bi}-tab-focused`]:v.name===this.focusedKey}]},handleChange(v){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,yD);const E=this.navList[v];!E||E.disabled||(this.activeKey=E.name,this.$emit("update:modelValue",E.name),this.$emit("on-click",E.name))},handleDblclick(v){const E=this.navList[v];!E||E.disabled||this.$emit("on-dblclick",E.name)},handleContextmenu(v,E){this.contextMenuVisible&&this.handleClickContextMenuOutside(),c.nextTick(()=>{const P=this.navList[v];if(!P||P.disabled||!P.contextMenu)return;E.preventDefault();const G=this.$refs.tabsWrap.getBoundingClientRect(),H={left:`${E.clientX-G.left}px`,top:`${E.clientY-G.top}px`};this.contextMenuStyles=H,this.contextMenuVisible=!0,this.$emit("on-contextmenu",P,E,H)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(v,E){const P=this.navList[v];!P||P.disabled||!P.contextMenu||E.preventDefault()},handleTabKeyNavigation(v){if(v.keyCode!==37&&v.keyCode!==39)return;const E=v.keyCode===39?1:-1,P=Yy(this.navList,this.focusedKey,E);this.focusedKey=P.name},handleTabKeyboardSelect(v=!1){if(v)return;const E=this.focusedKey||0,P=this.getTabIndex(E);this.handleChange(P)},handleRemove(v){if(!this.beforeRemove)return this.handleRemoveTab(v);const E=this.beforeRemove(v);E&&E.then?E.then(()=>{this.handleRemoveTab(v)}):this.handleRemoveTab(v)},handleRemoveTab(v){const E=this.getTabs(),P=E[v];if(P.currentName===this.activeKey){const G=this.getTabs();let H=-1;if(G.length){const N=E.filter((le,Ce)=>!le.disabled&&Ce<v),ee=E.filter((le,Ce)=>!le.disabled&&Ce>v);ee.length?H=ee[0].currentName:N.length?H=N[N.length-1].currentName:H=G[0].currentName}this.activeKey=H,this.$emit("update:modelValue",H)}this.$emit("on-tab-remove",P.currentName),this.updateNav()},showClose(v){return this.type==="card"?v.closable!==null?v.closable:this.closable:!1},scrollPrev(){const v=this.$refs.navScroll.offsetWidth,E=this.getCurrentScrollOffset();if(!E)return;let P=E>v?E-v:0;this.setOffset(P)},scrollNext(){const v=this.$refs.nav.offsetWidth,E=this.$refs.navScroll.offsetWidth,P=this.getCurrentScrollOffset();if(v-P<=E)return;let G=v-P>E*2?P+E:v-E;this.setOffset(G)},getCurrentScrollOffset(){const{navStyle:v}=this;return v.transform?Number(v.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(v){return this.navList.findIndex(E=>E.name===v)},setOffset(v){this.navStyle.transform=`translateX(-${v}px)`},scrollToActiveTab(){if(!this.scrollable)return;const v=this.$refs.nav,E=this.$el.querySelector(`.${bi}-tab-active`);if(!E)return;const P=this.$refs.navScroll,G=E.getBoundingClientRect(),H=P.getBoundingClientRect(),N=v.getBoundingClientRect(),ee=this.getCurrentScrollOffset();let le=ee;N.right<H.right&&(le=v.offsetWidth-H.width),G.left<H.left?le=ee-(H.left-G.left):G.right>H.right&&(le=ee+G.right-H.right),ee!==le&&this.setOffset(Math.max(le,0))},updateNavScroll(){const v=this.$refs.nav.offsetWidth,E=this.$refs.navScroll.offsetWidth,P=this.getCurrentScrollOffset();E<v?(this.scrollable=!0,v-P<E&&this.setOffset(v-E)):(this.scrollable=!1,P>0&&this.setOffset(0))},handleScroll(v){v.preventDefault(),v.stopPropagation();const E=v.type;let P=0;(E==="DOMMouseScroll"||E==="mousewheel")&&(P=v.wheelDelta?v.wheelDelta:-(v.detail||0)*40),P>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){if(!A)return;let v=this.$el.parentNode;for(;v&&v!==document.body;){if(v.style&&v.style.display==="none")return v;v=v.parentNode}return!1},updateVisibility(v){[...this.$refs.panes.querySelectorAll(`.${bi}-tabpane`)].forEach((E,P)=>{v===P?([...E.children].filter(G=>G.classList.contains(`${bi}-tabpane`)).forEach(G=>G.style.visibility="visible"),this.captureFocus&&setTimeout(()=>vm(E,E),yD)):setTimeout(()=>{[...E.children].filter(G=>G.classList.contains(`${bi}-tabpane`)).forEach(G=>G.style.visibility="hidden")},yD)})},handleDrag(v,E){const P=this.navList[v];P&&E.dataTransfer.setData("tab-name",P.name)},handleDrop(v,E){const P=this.navList[v];if(P){const G=E.dataTransfer.getData("tab-name");E.preventDefault();let H=this.navList.map(le=>le.name);const N=parseInt(H.findIndex(le=>le===G)),ee=parseInt(H.findIndex(le=>le===P.name));H.splice(ee,1,...H.splice(N,1,H[ee])),this.$emit("on-drag-drop",G,P.name,N,ee,H)}},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},watch:{modelValue(v){this.activeKey=v,this.focusedKey=v},activeKey(v){this.focusedKey=v,this.updateBar(),this.updateStatus(),this.tableList.forEach(P=>{P.table.handleOnVisibleChange(!0)}),c.nextTick(()=>{this.scrollToActiveTab()});const E=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(E)}},mounted(){this.showSlot=this.$slots.extra!==void 0,this.observer=im(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const v=this.isInsideHiddenElement();v&&(this.mutationObserver=new me(()=>{v.style.display!=="none"&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(v,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeUnmount(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},ME=["onClick","onDblclick","onContextmenu","onSelectstart","draggable","onDragstart","onDrop"];function bD(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Render"),Ce=c.resolveComponent("DropdownMenu"),pe=c.resolveComponent("Dropdown");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),ref:"tabsWrap"},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-bar"])},[H.showSlot?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-nav-right"])},[c.renderSlot(v.$slots,"extra")],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-nav-container"]),tabindex:"0",ref:"navContainer",onKeydown:[E[5]||(E[5]=(...we)=>N.handleTabKeyNavigation&&N.handleTabKeyNavigation(...we)),E[6]||(E[6]=c.withKeys(c.withModifiers(we=>N.handleTabKeyboardSelect(!1),["prevent"]),["space"]))]},[c.createElementVNode("div",{ref:"navWrap",class:c.normalizeClass([H.prefixCls+"-nav-wrap",H.scrollable?H.prefixCls+"-nav-scrollable":""])},[c.createElementVNode("span",{class:c.normalizeClass([H.prefixCls+"-nav-prev",H.scrollable?"":H.prefixCls+"-nav-scroll-disabled"]),onClick:E[0]||(E[0]=(...we)=>N.scrollPrev&&N.scrollPrev(...we))},[c.createVNode(ee,{type:"ios-arrow-back"})],2),c.createElementVNode("span",{class:c.normalizeClass([H.prefixCls+"-nav-next",H.scrollable?"":H.prefixCls+"-nav-scroll-disabled"]),onClick:E[1]||(E[1]=(...we)=>N.scrollNext&&N.scrollNext(...we))},[c.createVNode(ee,{type:"ios-arrow-forward"})],2),c.createElementVNode("div",{ref:"navScroll",class:c.normalizeClass([H.prefixCls+"-nav-scroll"]),"on:DOMMouseScroll":E[3]||(E[3]=(...we)=>N.handleScroll&&N.handleScroll(...we)),onMousewheel:E[4]||(E[4]=(...we)=>N.handleScroll&&N.handleScroll(...we))},[c.createElementVNode("div",{ref:"nav",class:c.normalizeClass([H.prefixCls+"-nav"]),style:c.normalizeStyle(H.navStyle)},[c.createElementVNode("div",{class:c.normalizeClass(N.barClasses),style:c.normalizeStyle(N.barStyle)},null,6),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.navList,(we,We)=>(c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.tabCls(we)),key:We,onClick:ut=>N.handleChange(We),onDblclick:ut=>N.handleDblclick(We),onContextmenu:c.withModifiers(ut=>N.handleContextmenu(We,ut),["stop"]),onSelectstart:c.withModifiers(ut=>N.handlePreventSelect(We,ut),["stop"]),draggable:P.draggable,onDragstart:ut=>N.handleDrag(We,ut),onDrop:ut=>N.handleDrop(We,ut),onDragover:E[2]||(E[2]=c.withModifiers(()=>{},["prevent"]))},[we.icon!==""?(c.openBlock(),c.createBlock(ee,{key:0,type:we.icon},null,8,["type"])):c.createCommentVNode("",!0),we.labelType==="function"?(c.openBlock(),c.createBlock(le,{key:1,render:we.label},null,8,["render"])):(c.openBlock(),c.createElementBlock(c.Fragment,{key:2},[c.createTextVNode(c.toDisplayString(we.label),1)],64)),N.showClose(we)?(c.openBlock(),c.createBlock(ee,{key:3,class:c.normalizeClass([H.prefixCls+"-close"]),type:N.arrowType,custom:N.customArrowType,size:N.arrowSize,onClick:c.withModifiers(ut=>N.handleRemove(We),["stop"])},null,8,["class","type","custom","size","onClick"])):c.createCommentVNode("",!0)],42,ME))),128))],6)],34)],2)],34)],2),c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses),style:c.normalizeStyle(N.contentStyle),ref:"panes"},[c.renderSlot(v.$slots,"default")],6),c.createElementVNode("div",{class:"ivu-tabs-context-menu",style:c.normalizeStyle(H.contextMenuStyles)},[c.createVNode(pe,{trigger:"custom",visible:H.contextMenuVisible,transfer:"",onOnClick:N.handleClickDropdownItem,onOnClickoutside:N.handleClickContextMenuOutside},{list:c.withCtx(()=>[c.createVNode(Ce,null,{default:c.withCtx(()=>[c.renderSlot(v.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var Tv=$(gS,[["render",bD]]);const _D={name:"Notification",components:{Dropdown:Wi,DropdownMenu:Ph,Badge:fg,Tabs:Tv},emits:["on-visible-change","on-item-click","on-clear","on-load-more","on-tab-change"],provide(){return{NotificationInstance:this}},props:{count:{type:Number},autoCount:{type:Boolean,default:!1},countType:{validator(v){return re(v,["text","badge"])},default:"text"},icon:{type:String,default:"md-notifications-outline"},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},badgeProps:{type:Object,default(){return{}}},clearClose:{type:Boolean,default:!1},locale:{type:Object,default(){return{loadedAll:"加载完毕",loading:"加载中...",loadMore:"加载更多",clear:"清空"}}},tab:{type:String},wide:{type:Boolean,default:!1},transferClassName:{type:String}},data(){return{visible:!1,countAll:0,tabList:[]}},computed:{finalCount(){return this.autoCount?this.countAll:this.count},transferClasses(){let v="ivu-notifications-transfer";return this.transferClassName&&(v+=` ${this.transferClassName}`),v}},watch:{visible(v){this.$emit("on-visible-change",v)}},methods:{handleVisibleChange(v){this.visible=v},handleClickOutside(v){this.$refs.notice.contains(v.target)||(this.visible=!1)},handleToggleOpen(){this.visible=!this.visible},handleGetCountAll(){if(this.autoCount){const v=this.tabList.map(P=>P.tab);let E=0;v.forEach(P=>{P.count&&(E+=P.count)}),this.countAll=E}},handleItemClick(v,E){this.$emit("on-item-click",v,E)},handleClear(v){this.$emit("on-clear",v),this.clearClose&&this.handleClose()},handleLoadMore(v){this.$emit("on-load-more",v)},handleClose(){this.visible=!1},handleTabChange(v){const E=this.tabList.map(G=>G.tab);let P={};E.forEach(G=>{G.$refs.tab.currentName===v&&(P=G.handleGetTabBaseInfo())}),this.$emit("on-tab-change",P)}}},kE={class:"ivu-notifications",ref:"notice"},SD={class:"ivu-notifications-tabs"},ym={key:0,class:"ivu-notifications-extra"};function bm(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Badge"),Ce=c.resolveComponent("Tabs"),pe=c.resolveComponent("DropdownMenu"),we=c.resolveComponent("Dropdown");return c.openBlock(),c.createElementBlock("div",kE,[c.createVNode(we,{trigger:"custom",visible:H.visible,transfer:P.transfer,placement:P.placement,"transfer-class-name":N.transferClasses,onOnVisibleChange:N.handleVisibleChange,onOnClickoutside:N.handleClickOutside},{list:c.withCtx(()=>[v.$slots.default?(c.openBlock(),c.createBlock(pe,{key:0,onClick:E[1]||(E[1]=c.withModifiers(()=>{},["stop"]))},{default:c.withCtx(()=>[c.createElementVNode("div",{class:c.normalizeClass(["ivu-notifications-list",{"ivu-notifications-list-wide":P.wide}])},[c.createElementVNode("div",SD,[c.createVNode(Ce,{animated:!1,"model-value":P.tab,onOnClick:N.handleTabChange},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),_:3},8,["model-value","onOnClick"])])],2),v.$slots.extra?(c.openBlock(),c.createElementBlock("div",ym,[c.renderSlot(v.$slots,"extra")])):c.createCommentVNode("",!0)]),_:3})):c.createCommentVNode("",!0)]),default:c.withCtx(()=>[c.createElementVNode("div",{class:"ivu-notifications-rel",onClick:E[0]||(E[0]=c.withModifiers((...We)=>N.handleToggleOpen&&N.handleToggleOpen(...We),["prevent","stop"]))},[c.createVNode(le,c.mergeProps({count:N.finalCount},P.badgeProps),{default:c.withCtx(()=>[c.renderSlot(v.$slots,"icon",{},()=>[c.createVNode(ee,{type:P.icon,size:"24"},null,8,["type"])])]),_:3},16,["count"])])]),_:3},8,["visible","transfer","placement","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],512)}var DE=$(_D,[["render",bm]]);const xD=(v,E)=>v<=E,_m=v=>v<10?"0"+v:v,jy=(v,E)=>{const P=new Date(v),G=P.getFullYear(),H=_m(P.getMonth()+1),N=_m(P.getDate()),ee=_m(P.getHours()),le=_m(P.getMinutes()),Ce=_m(P.getSeconds());let pe="";return E==="year"?pe=G+"-"+H+"-"+N+" "+ee+":"+le+":"+Ce:pe=H+"-"+N+" "+ee+":"+le,pe},vS=(v,E)=>{const P=new Date().getTime(),G=xD(v,P);let H=P-v;G||(H=-H);let N="",ee=G?E("i.time.before")||"前":E("i.time.after")||"后";return H<1e3?N=E("i.time.just")||"刚刚":H<6e4?N=parseInt(H/1e3)+(E("i.time.seconds")||"秒")+ee:H>=6e4&&H<36e5?N=Math.floor(H/6e4)+(E("i.time.minutes")||"分钟")+ee:H>=36e5&&H<864e5?N=Math.floor(H/36e5)+(E("i.time.hours")||"小时")+ee:H>=864e5&&H<262386e4?N=Math.floor(H/864e5)+(E("i.time.days")||"天")+ee:H>=262386e4&&H<=3156786e4&&G?N=jy(v):N=jy(v,"year"),N};function yS(v,E){return vS(v,E)}const Av="ivu-time",bS={name:"Time",mixins:[vt],props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(v){return re(v,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},computed:{classes(){return[`${Av}`,{[`${Av}-with-hash`]:this.hash}]}},watch:{time(){this.setTime()}},methods:{handleClick(){A&&this.hash!==""&&(window.location.hash=this.hash)},setTime(){const v=typeof this.time;let E;if(v==="number"){const P=this.time.toString().length>10?this.time:this.time*1e3;E=new Date(P).getTime()}else v==="object"?E=this.time.getTime():v==="string"&&(E=Os(this.time).valueOf());if(this.type==="relative")this.date=yS(E,this.t);else{const P=new Date(this.time),G=P.getFullYear(),H=P.getMonth()+1<10?"0"+(P.getMonth()+1):P.getMonth()+1,N=P.getDate()<10?"0"+P.getDate():P.getDate(),ee=P.getHours()<10?"0"+P.getHours():P.getHours(),le=P.getMinutes()<10?"0"+P.getMinutes():P.getMinutes(),Ce=P.getSeconds()<10?"0"+P.getSeconds():P.getSeconds();this.type==="datetime"?this.date=`${G}-${H}-${N} ${ee}:${le}:${Ce}`:this.type==="date"&&(this.date=`${G}-${H}-${N}`)}}},mounted(){this.setTime(),this.interval!==0&&(this.timer=setInterval(()=>{this.setTime()},1e3*this.interval))},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function PE(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",{class:c.normalizeClass(N.classes),onClick:E[0]||(E[0]=(...ee)=>N.handleClick&&N.handleClick(...ee))},c.toDisplayString(H.date),3)}var jh=$(bS,[["render",PE]]);const _S={name:"NotificationItem",inject:["NotificationTabInstance","NotificationInstance"],components:{Row:pc,Col:Sa,Avatar:Ef,Tag:Ml,Time:jh},emits:["on-item-click"],props:{rowProps:{type:Object,default(){return{type:"flex",justify:"center",align:"middle"}}},read:{type:[Boolean,Number],default:!1},icon:{type:String},customIcon:{type:String},iconColor:{type:String},iconSize:{validator(v){return re(v,["small","default","large"])},default:"default"},avatar:{type:String},avatarShape:{validator(v){return re(v,["circle","square"])},default:"circle"},title:{type:String},content:{type:String},time:{type:[Number,Date,String]},timeProps:{type:Object,default(){return{}}},tag:{type:String},tagProps:{type:Object,default(){return{}}},clickClose:{type:Boolean,default:!1}},data(){return{id:mt(6)}},computed:{classes(){return{"ivu-notifications-item-unread":this.read===!1||this.read===0}},contentSpan(){return this.icon||this.customIcon||this.avatar||this.$slots.avatar?20:24},iconStyle(){let v={};return this.iconColor&&(v={"background-color":this.iconColor}),v}},methods:{handleClick(){this.$emit("on-item-click",this.$attrs),this.NotificationTabInstance.handleItemClick(this.$attrs),this.clickClose&&this.NotificationInstance.handleClose()},addItem(){this.NotificationTabInstance.itemList.push({id:this.id,item:this})},removeItem(){const v=this.NotificationTabInstance,E=v.itemList.findIndex(P=>P.id===this.id);v.itemList.splice(E,1)}},mounted(){this.addItem(),this.NotificationTabInstance.handleGetItems()},unmounted(){this.NotificationTabInstance.handleGetItems()},beforeUnmount(){this.removeItem()}},CD={class:"ivu-notifications-item-title"},RE={key:0},wD={key:0,class:"ivu-notifications-item-tag"},Sn={key:0,class:"ivu-notifications-item-desc"},ia={key:1,class:"ivu-notifications-item-time"};function eh(v,E,P,G,H,N){const ee=c.resolveComponent("Avatar"),le=c.resolveComponent("Col"),Ce=c.resolveComponent("Tag"),pe=c.resolveComponent("Time"),we=c.resolveComponent("Row");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-notifications-item",N.classes]),onClick:E[0]||(E[0]=(...We)=>N.handleClick&&N.handleClick(...We))},[c.renderSlot(v.$slots,"default",{},()=>[c.createVNode(we,c.normalizeProps(c.guardReactiveProps(P.rowProps)),{default:c.withCtx(()=>[P.icon||P.customIcon||P.avatar||v.$slots.avatar?(c.openBlock(),c.createBlock(le,{key:0,span:"4",class:"ivu-notifications-item-icon"},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"avatar",{},()=>[P.icon?(c.openBlock(),c.createBlock(ee,{key:0,icon:P.icon,shape:P.avatarShape,size:P.iconSize,style:c.normalizeStyle(N.iconStyle)},null,8,["icon","shape","size","style"])):P.customIcon?(c.openBlock(),c.createBlock(ee,{key:1,"custom-icon":P.customIcon,shape:P.avatarShape,size:P.iconSize,style:c.normalizeStyle(N.iconStyle)},null,8,["custom-icon","shape","size","style"])):P.avatar?(c.openBlock(),c.createBlock(ee,{key:2,src:P.avatar,shape:P.avatarShape,size:P.iconSize,style:c.normalizeStyle(N.iconStyle)},null,8,["src","shape","size","style"])):c.createCommentVNode("",!0)])]),_:3})):c.createCommentVNode("",!0),c.createVNode(le,{span:N.contentSpan,class:"ivu-notifications-item-content"},{default:c.withCtx(()=>[c.createElementVNode("div",CD,[P.title||v.$slots.title?(c.openBlock(),c.createElementBlock("h4",RE,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)]),P.tag?(c.openBlock(),c.createElementBlock("div",wD,[c.createVNode(Ce,c.normalizeProps(c.guardReactiveProps(P.tagProps)),{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(P.tag),1)]),_:1},16)])):c.createCommentVNode("",!0)])):c.createCommentVNode("",!0)]),P.content||v.$slots.content?(c.openBlock(),c.createElementBlock("div",Sn,[c.renderSlot(v.$slots,"content",{},()=>[c.createTextVNode(c.toDisplayString(P.content),1)])])):c.createCommentVNode("",!0),P.time||v.$slots.time?(c.openBlock(),c.createElementBlock("div",ia,[c.renderSlot(v.$slots,"time",{},()=>[c.createVNode(pe,c.mergeProps({time:P.time},P.timeProps),null,16,["time"])])])):c.createCommentVNode("",!0)]),_:3},8,["span"])]),_:3},16)])],2)}var aa=$(_S,[["render",eh]]);const Ic="ivu-tabs-tabpane",IE={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:Ic,show:!0,currentName:this.name,id:mt(6)}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()},addPane(){const v=this.TabsInstance;v.paneList||(v.paneList=[]),v.paneList.push({id:this.id,pane:this})},removePane(){const v=this.TabsInstance;if(v.paneList&&v.paneList.length){const E=v.paneList.findIndex(P=>P.id===this.id);v.paneList.splice(E,1)}}},watch:{name(v){this.currentName=v,this.updateNav()},label(v){typeof v!="function"&&this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.addPane(),this.updateNav()},beforeUnmount(){this.removePane(),this.updateNav()}};function Mv(v,E,P,G,H,N){return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(H.prefixCls),style:c.normalizeStyle(N.contentStyle)},[c.renderSlot(v.$slots,"default")],6)),[[c.vShow,H.show]])}var ic=$(IE,[["render",Mv]]);const SS={name:"NotificationTab",inject:["NotificationInstance"],components:{TabPane:ic,Icon:oe},provide(){return{NotificationTabInstance:this}},props:{count:{type:Number},title:{type:String,required:!0},name:{type:String},emptyText:{type:String,default:"目前没有通知"},emptyImage:{type:String,default:"https://file.iviewui.com/iview-pro/icon-no-message.svg"},loadedAll:{type:Boolean,default:!0},showLoadedAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},scrollToLoad:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearIcon:{type:Boolean,default:!0}},data(){return{customLabel:v=>v("div",[v("span",this.title),v(fg,{count:this.count})]),itemCount:0,itemList:[],id:mt(6)}},computed:{currentTitle(){const v=this.NotificationInstance.countType;if(v==="text"){const E=this.count?`(${this.count})`:"";return`${this.title} ${E}`}else if(v==="badge")return this.customLabel}},watch:{count:{handler(){this.NotificationInstance.handleGetCountAll()},immediate:!0}},methods:{handleGetTabBaseInfo(){return{name:this.name,title:this.title}},handleGetItems(){const v=this.itemList.map(E=>E.item);this.itemCount=v.length},handleItemClick(v){this.NotificationInstance.handleItemClick(this.handleGetTabBaseInfo(),v)},handleClear(){this.NotificationInstance.handleClear(this.handleGetTabBaseInfo())},handleLoadMore(){this.NotificationInstance.handleLoadMore(this.handleGetTabBaseInfo())},handleScroll(){if(!this.scrollToLoad)return;const v=this.$refs.scroll,E=v.scrollHeight-v.clientHeight-v.scrollTop;!this.loading&&E===0&&this.handleLoadMore()},addTab(){this.NotificationInstance.tabList.push({id:this.id,tab:this})},removeTab(){const v=this.NotificationInstance,E=v.tabList.findIndex(P=>P.id===this.id);v.tabList.splice(E,1)}},mounted(){this.addTab()},beforeUnmount(){this.removeTab()}},xS={class:"ivu-notifications-container-list"},kv={key:0,class:"ivu-notifications-tab-empty"},$E=["src"],Zy={class:"ivu-notifications-tab-empty-text"},CS={class:"ivu-notifications-tab-loading"},LE={key:0,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-show"},ED={key:2,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-all"};function bu(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("TabPane");return c.openBlock(),c.createBlock(le,{label:N.currentTitle,name:P.name,ref:"tab",class:"ivu-notifications-tab"},{default:c.withCtx(()=>[c.createElementVNode("div",{class:"ivu-notifications-container",onScroll:E[1]||(E[1]=(...Ce)=>N.handleScroll&&N.handleScroll(...Ce)),ref:"scroll"},[c.renderSlot(v.$slots,"top"),c.createElementVNode("div",xS,[c.renderSlot(v.$slots,"default")]),!P.loading&&H.itemCount===0?(c.openBlock(),c.createElementBlock("div",kv,[c.renderSlot(v.$slots,"empty",{},()=>[P.emptyImage?(c.openBlock(),c.createElementBlock("img",{key:0,class:"ivu-notifications-tab-empty-img",src:P.emptyImage},null,8,$E)):c.createCommentVNode("",!0),c.createElementVNode("div",Zy,c.toDisplayString(P.emptyText),1)])])):c.createCommentVNode("",!0),c.createElementVNode("div",CS,[P.loading?(c.openBlock(),c.createElementBlock("div",LE,[c.renderSlot(v.$slots,"loading",{},()=>[c.createVNode(ee,{type:"ios-loading",class:"ivu-load-loop"}),c.createTextVNode(" "+c.toDisplayString(N.NotificationInstance.locale.loading),1)])])):P.loadedAll?P.showLoadedAll&&P.loadedAll?(c.openBlock(),c.createElementBlock("div",ED,[c.renderSlot(v.$slots,"loaded-all",{},()=>[c.createTextVNode(c.toDisplayString(N.NotificationInstance.locale.loadedAll),1)])])):c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",{key:1,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-more",onClick:E[0]||(E[0]=(...Ce)=>N.handleLoadMore&&N.handleLoadMore(...Ce))},[c.renderSlot(v.$slots,"load-more",{},()=>[c.createTextVNode(c.toDisplayString(N.NotificationInstance.locale.loadMore),1)])]))])],544),P.showClear&&H.itemCount!==0?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-notifications-tab-clear",onClick:E[2]||(E[2]=(...Ce)=>N.handleClear&&N.handleClear(...Ce))},[c.renderSlot(v.$slots,"clear",{},()=>[P.showClearIcon?(c.openBlock(),c.createBlock(ee,{key:0,type:"md-done-all"})):c.createCommentVNode("",!0),c.createElementVNode("span",null,c.toDisplayString(N.NotificationInstance.locale.clear)+c.toDisplayString(P.title),1)])])):c.createCommentVNode("",!0)]),_:3},8,["label","name"])}var Dv=$(SS,[["render",bu]]);const qy={name:"Trend",components:{Icon:oe},props:{flag:{validator(v){return re(v,["up","down"])}},colorful:{type:Boolean,default:!0},reverseColor:{type:Boolean,default:!1},textColor:{type:Boolean,default:!1},showTitle:{type:[Boolean,String],default:!1}},computed:{classes(){return[{"ivu-trend-up":this.flag==="up","ivu-trend-down":this.flag==="down","ivu-trend-reverse-color":this.reverseColor,"ivu-trend-colorful":this.colorful,"ivu-trend-text-color":this.textColor}]},flagType(){return this.flag==="up"?"md-arrow-dropup":this.flag==="down"?"md-arrow-dropdown":""}}},fl={class:"ivu-trend-text"};function Xi(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-trend",N.classes])},[c.createElementVNode("span",fl,[c.renderSlot(v.$slots,"default")]),c.createVNode(ee,{type:N.flagType,class:"ivu-trend-flag"},null,8,["type"])],2)}var Pv=$(qy,[["render",Xi]]);const wS={name:"NumberInfo",components:{Trend:Pv},props:{title:{type:String},subTitle:{type:String},total:{type:[String,Number]},subTotal:{type:[String,Number]},status:{validator(v){return re(v,["up","down"])}},gap:{type:[String,Number],default:8}},computed:{valueStyle(){return{"margin-top":this.gap+"px"}}}},Ky={class:"ivu-number-info"},Rv={key:0,class:"ivu-number-info-title"},ES={key:1,class:"ivu-number-info-subTitle"},Sm={class:"ivu-number-info-total"},NE={key:0,class:"ivu-number-info-subTotal"};function OE(v,E,P,G,H,N){const ee=c.resolveComponent("Trend");return c.openBlock(),c.createElementBlock("div",Ky,[P.title||v.$slots.title?(c.openBlock(),c.createElementBlock("div",Rv,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])])):c.createCommentVNode("",!0),P.subTitle||v.$slots.subTitle?(c.openBlock(),c.createElementBlock("div",ES,[c.renderSlot(v.$slots,"subTitle",{},()=>[c.createTextVNode(c.toDisplayString(P.subTitle),1)])])):c.createCommentVNode("",!0),c.createElementVNode("div",{class:"ivu-number-info-value",style:c.normalizeStyle(N.valueStyle)},[c.createElementVNode("span",Sm,[c.renderSlot(v.$slots,"total",{},()=>[c.createTextVNode(c.toDisplayString(P.total),1)])]),P.subTotal||v.$slots.subTotal?(c.openBlock(),c.createElementBlock("span",NE,[c.renderSlot(v.$slots,"subTotal",{},()=>[c.createVNode(ee,{flag:P.status},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(P.subTotal),1)]),_:1},8,["flag"])])])):c.createCommentVNode("",!0)],4)])}var TS=$(wS,[["render",OE]]),AS={exports:{}};/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(v){(function(E,P){v.exports?v.exports=P():E.numeral=P()})(Wt,function(){var E,P,G="2.0.6",H={},N={},ee={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},le={currentLocale:ee.currentLocale,zeroFormat:ee.zeroFormat,nullFormat:ee.nullFormat,defaultFormat:ee.defaultFormat,scalePercentBy100:ee.scalePercentBy100};function Ce(pe,we){this._input=pe,this._value=we}return E=function(pe){var we,We,ut,ct;if(E.isNumeral(pe))we=pe.value();else if(pe===0||typeof pe>"u")we=0;else if(pe===null||P.isNaN(pe))we=null;else if(typeof pe=="string")if(le.zeroFormat&&pe===le.zeroFormat)we=0;else if(le.nullFormat&&pe===le.nullFormat||!pe.replace(/[^0-9]+/g,"").length)we=null;else{for(We in H)if(ct=typeof H[We].regexps.unformat=="function"?H[We].regexps.unformat():H[We].regexps.unformat,ct&&pe.match(ct)){ut=H[We].unformat;break}ut=ut||E._.stringToNumber,we=ut(pe)}else we=Number(pe)||null;return new Ce(pe,we)},E.version=G,E.isNumeral=function(pe){return pe instanceof Ce},E._=P={numberToFormat:function(pe,we,We){var ut=N[E.options.currentLocale],ct=!1,ot=!1,Oe=0,wt="",Er=1e12,ir=1e9,Wn=1e6,jt=1e3,It="",Cn=!1,Pt,Pr,cr,ar,uo,Tr,Ln;if(pe=pe||0,Pr=Math.abs(pe),E._.includes(we,"(")?(ct=!0,we=we.replace(/[\(|\)]/g,"")):(E._.includes(we,"+")||E._.includes(we,"-"))&&(uo=E._.includes(we,"+")?we.indexOf("+"):pe<0?we.indexOf("-"):-1,we=we.replace(/[\+|\-]/g,"")),E._.includes(we,"a")&&(Pt=we.match(/a(k|m|b|t)?/),Pt=Pt?Pt[1]:!1,E._.includes(we," a")&&(wt=" "),we=we.replace(new RegExp(wt+"a[kmbt]?"),""),Pr>=Er&&!Pt||Pt==="t"?(wt+=ut.abbreviations.trillion,pe=pe/Er):Pr<Er&&Pr>=ir&&!Pt||Pt==="b"?(wt+=ut.abbreviations.billion,pe=pe/ir):Pr<ir&&Pr>=Wn&&!Pt||Pt==="m"?(wt+=ut.abbreviations.million,pe=pe/Wn):(Pr<Wn&&Pr>=jt&&!Pt||Pt==="k")&&(wt+=ut.abbreviations.thousand,pe=pe/jt)),E._.includes(we,"[.]")&&(ot=!0,we=we.replace("[.]",".")),cr=pe.toString().split(".")[0],ar=we.split(".")[1],Tr=we.indexOf(","),Oe=(we.split(".")[0].split(",")[0].match(/0/g)||[]).length,ar?(E._.includes(ar,"[")?(ar=ar.replace("]",""),ar=ar.split("["),It=E._.toFixed(pe,ar[0].length+ar[1].length,We,ar[1].length)):It=E._.toFixed(pe,ar.length,We),cr=It.split(".")[0],E._.includes(It,".")?It=ut.delimiters.decimal+It.split(".")[1]:It="",ot&&Number(It.slice(1))===0&&(It="")):cr=E._.toFixed(pe,0,We),wt&&!Pt&&Number(cr)>=1e3&&wt!==ut.abbreviations.trillion)switch(cr=String(Number(cr)/1e3),wt){case ut.abbreviations.thousand:wt=ut.abbreviations.million;break;case ut.abbreviations.million:wt=ut.abbreviations.billion;break;case ut.abbreviations.billion:wt=ut.abbreviations.trillion;break}if(E._.includes(cr,"-")&&(cr=cr.slice(1),Cn=!0),cr.length<Oe)for(var Yn=Oe-cr.length;Yn>0;Yn--)cr="0"+cr;return Tr>-1&&(cr=cr.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+ut.delimiters.thousands)),we.indexOf(".")===0&&(cr=""),Ln=cr+It+(wt||""),ct?Ln=(ct&&Cn?"(":"")+Ln+(ct&&Cn?")":""):uo>=0?Ln=uo===0?(Cn?"-":"+")+Ln:Ln+(Cn?"-":"+"):Cn&&(Ln="-"+Ln),Ln},stringToNumber:function(pe){var we=N[le.currentLocale],We=pe,ut={thousand:3,million:6,billion:9,trillion:12},ct,ot,Oe;if(le.zeroFormat&&pe===le.zeroFormat)ot=0;else if(le.nullFormat&&pe===le.nullFormat||!pe.replace(/[^0-9]+/g,"").length)ot=null;else{ot=1,we.delimiters.decimal!=="."&&(pe=pe.replace(/\./g,"").replace(we.delimiters.decimal,"."));for(ct in ut)if(Oe=new RegExp("[^a-zA-Z]"+we.abbreviations[ct]+"(?:\\)|(\\"+we.currency.symbol+")?(?:\\))?)?$"),We.match(Oe)){ot*=Math.pow(10,ut[ct]);break}ot*=(pe.split("-").length+Math.min(pe.split("(").length-1,pe.split(")").length-1))%2?1:-1,pe=pe.replace(/[^0-9\.]+/g,""),ot*=Number(pe)}return ot},isNaN:function(pe){return typeof pe=="number"&&isNaN(pe)},includes:function(pe,we){return pe.indexOf(we)!==-1},insert:function(pe,we,We){return pe.slice(0,We)+we+pe.slice(We)},reduce:function(pe,we){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof we!="function")throw new TypeError(we+" is not a function");var We=Object(pe),ut=We.length>>>0,ct=0,ot;if(arguments.length===3)ot=arguments[2];else{for(;ct<ut&&!(ct in We);)ct++;if(ct>=ut)throw new TypeError("Reduce of empty array with no initial value");ot=We[ct++]}for(;ct<ut;ct++)ct in We&&(ot=we(ot,We[ct],ct,We));return ot},multiplier:function(pe){var we=pe.toString().split(".");return we.length<2?1:Math.pow(10,we[1].length)},correctionFactor:function(){var pe=Array.prototype.slice.call(arguments);return pe.reduce(function(we,We){var ut=P.multiplier(We);return we>ut?we:ut},1)},toFixed:function(pe,we,We,ut){var ct=pe.toString().split("."),ot=we-(ut||0),Oe,wt,Er,ir;return ct.length===2?Oe=Math.min(Math.max(ct[1].length,ot),we):Oe=ot,Er=Math.pow(10,Oe),ir=(We(pe+"e+"+Oe)/Er).toFixed(Oe),ut>we-Oe&&(wt=new RegExp("\\.?0{1,"+(ut-(we-Oe))+"}$"),ir=ir.replace(wt,"")),ir}},E.options=le,E.formats=H,E.locales=N,E.locale=function(pe){return pe&&(le.currentLocale=pe.toLowerCase()),le.currentLocale},E.localeData=function(pe){if(!pe)return N[le.currentLocale];if(pe=pe.toLowerCase(),!N[pe])throw new Error("Unknown locale : "+pe);return N[pe]},E.reset=function(){for(var pe in ee)le[pe]=ee[pe]},E.zeroFormat=function(pe){le.zeroFormat=typeof pe=="string"?pe:null},E.nullFormat=function(pe){le.nullFormat=typeof pe=="string"?pe:null},E.defaultFormat=function(pe){le.defaultFormat=typeof pe=="string"?pe:"0.0"},E.register=function(pe,we,We){if(we=we.toLowerCase(),this[pe+"s"][we])throw new TypeError(we+" "+pe+" already registered.");return this[pe+"s"][we]=We,We},E.validate=function(pe,we){var We,ut,ct,ot,Oe,wt,Er,ir;if(typeof pe!="string"&&(pe+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",pe)),pe=pe.trim(),pe.match(/^\d+$/))return!0;if(pe==="")return!1;try{Er=E.localeData(we)}catch{Er=E.localeData(E.locale())}return ct=Er.currency.symbol,Oe=Er.abbreviations,We=Er.delimiters.decimal,Er.delimiters.thousands==="."?ut="\\.":ut=Er.delimiters.thousands,ir=pe.match(/^[^\d]+/),ir!==null&&(pe=pe.substr(1),ir[0]!==ct)||(ir=pe.match(/[^\d]+$/),ir!==null&&(pe=pe.slice(0,-1),ir[0]!==Oe.thousand&&ir[0]!==Oe.million&&ir[0]!==Oe.billion&&ir[0]!==Oe.trillion))?!1:(wt=new RegExp(ut+"{2}"),pe.match(/[^\d.,]/g)?!1:(ot=pe.split(We),ot.length>2?!1:ot.length<2?!!ot[0].match(/^\d+.*\d$/)&&!ot[0].match(wt):ot[0].length===1?!!ot[0].match(/^\d+$/)&&!ot[0].match(wt)&&!!ot[1].match(/^\d+$/):!!ot[0].match(/^\d+.*\d$/)&&!ot[0].match(wt)&&!!ot[1].match(/^\d+$/)))},E.fn=Ce.prototype={clone:function(){return E(this)},format:function(pe,we){var We=this._value,ut=pe||le.defaultFormat,ct,ot,Oe;if(we=we||Math.round,We===0&&le.zeroFormat!==null)ot=le.zeroFormat;else if(We===null&&le.nullFormat!==null)ot=le.nullFormat;else{for(ct in H)if(ut.match(H[ct].regexps.format)){Oe=H[ct].format;break}Oe=Oe||E._.numberToFormat,ot=Oe(We,ut,we)}return ot},value:function(){return this._value},input:function(){return this._input},set:function(pe){return this._value=Number(pe),this},add:function(pe){var we=P.correctionFactor.call(null,this._value,pe);function We(ut,ct,ot,Oe){return ut+Math.round(we*ct)}return this._value=P.reduce([this._value,pe],We,0)/we,this},subtract:function(pe){var we=P.correctionFactor.call(null,this._value,pe);function We(ut,ct,ot,Oe){return ut-Math.round(we*ct)}return this._value=P.reduce([pe],We,Math.round(this._value*we))/we,this},multiply:function(pe){function we(We,ut,ct,ot){var Oe=P.correctionFactor(We,ut);return Math.round(We*Oe)*Math.round(ut*Oe)/Math.round(Oe*Oe)}return this._value=P.reduce([this._value,pe],we,1),this},divide:function(pe){function we(We,ut,ct,ot){var Oe=P.correctionFactor(We,ut);return Math.round(We*Oe)/Math.round(ut*Oe)}return this._value=P.reduce([this._value,pe],we),this},difference:function(pe){return Math.abs(E(this._value).subtract(pe).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(pe){var we=pe%10;return~~(pe%100/10)===1?"th":we===1?"st":we===2?"nd":we===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(pe,we,We){var ut=E._.includes(we," BPS")?" ":"",ct;return pe=pe*1e4,we=we.replace(/\s?BPS/,""),ct=E._.numberToFormat(pe,we,We),E._.includes(ct,")")?(ct=ct.split(""),ct.splice(-1,0,ut+"BPS"),ct=ct.join("")):ct=ct+ut+"BPS",ct},unformat:function(pe){return+(E._.stringToNumber(pe)*1e-4).toFixed(15)}})}(),function(){var pe={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},we={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},We=pe.suffixes.concat(we.suffixes.filter(function(ct){return pe.suffixes.indexOf(ct)<0})),ut=We.join("|");ut="("+ut.replace("B","B(?!PS)")+")",E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(ut)},format:function(ct,ot,Oe){var wt,Er=E._.includes(ot,"ib")?we:pe,ir=E._.includes(ot," b")||E._.includes(ot," ib")?" ":"",Wn,jt,It;for(ot=ot.replace(/\s?i?b/,""),Wn=0;Wn<=Er.suffixes.length;Wn++)if(jt=Math.pow(Er.base,Wn),It=Math.pow(Er.base,Wn+1),ct===null||ct===0||ct>=jt&&ct<It){ir+=Er.suffixes[Wn],jt>0&&(ct=ct/jt);break}return wt=E._.numberToFormat(ct,ot,Oe),wt+ir},unformat:function(ct){var ot=E._.stringToNumber(ct),Oe,wt;if(ot){for(Oe=pe.suffixes.length-1;Oe>=0;Oe--){if(E._.includes(ct,pe.suffixes[Oe])){wt=Math.pow(pe.base,Oe);break}if(E._.includes(ct,we.suffixes[Oe])){wt=Math.pow(we.base,Oe);break}}ot*=wt||1}return ot}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(pe,we,We){var ut=E.locales[E.options.currentLocale],ct={before:we.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:we.match(/([\+|\-|\)|\s|\$]*)$/)[0]},ot,Oe,wt;for(we=we.replace(/\s?\$\s?/,""),ot=E._.numberToFormat(pe,we,We),pe>=0?(ct.before=ct.before.replace(/[\-\(]/,""),ct.after=ct.after.replace(/[\-\)]/,"")):pe<0&&!E._.includes(ct.before,"-")&&!E._.includes(ct.before,"(")&&(ct.before="-"+ct.before),wt=0;wt<ct.before.length;wt++)switch(Oe=ct.before[wt],Oe){case"$":ot=E._.insert(ot,ut.currency.symbol,wt);break;case" ":ot=E._.insert(ot," ",wt+ut.currency.symbol.length-1);break}for(wt=ct.after.length-1;wt>=0;wt--)switch(Oe=ct.after[wt],Oe){case"$":ot=wt===ct.after.length-1?ot+ut.currency.symbol:E._.insert(ot,ut.currency.symbol,-(ct.after.length-(1+wt)));break;case" ":ot=wt===ct.after.length-1?ot+" ":E._.insert(ot," ",-(ct.after.length-(1+wt)+ut.currency.symbol.length-1));break}return ot}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(pe,we,We){var ut,ct=typeof pe=="number"&&!E._.isNaN(pe)?pe.toExponential():"0e+0",ot=ct.split("e");return we=we.replace(/e[\+|\-]{1}0/,""),ut=E._.numberToFormat(Number(ot[0]),we,We),ut+"e"+ot[1]},unformat:function(pe){var we=E._.includes(pe,"e+")?pe.split("e+"):pe.split("e-"),We=Number(we[0]),ut=Number(we[1]);ut=E._.includes(pe,"e-")?ut*=-1:ut;function ct(ot,Oe,wt,Er){var ir=E._.correctionFactor(ot,Oe),Wn=ot*ir*(Oe*ir)/(ir*ir);return Wn}return E._.reduce([We,Math.pow(10,ut)],ct,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(pe,we,We){var ut=E.locales[E.options.currentLocale],ct,ot=E._.includes(we," o")?" ":"";return we=we.replace(/\s?o/,""),ot+=ut.ordinal(pe),ct=E._.numberToFormat(pe,we,We),ct+ot}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(pe,we,We){var ut=E._.includes(we," %")?" ":"",ct;return E.options.scalePercentBy100&&(pe=pe*100),we=we.replace(/\s?\%/,""),ct=E._.numberToFormat(pe,we,We),E._.includes(ct,")")?(ct=ct.split(""),ct.splice(-1,0,ut+"%"),ct=ct.join("")):ct=ct+ut+"%",ct},unformat:function(pe){var we=E._.stringToNumber(pe);return E.options.scalePercentBy100?we*.01:we}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(pe,we,We){var ut=Math.floor(pe/60/60),ct=Math.floor((pe-ut*60*60)/60),ot=Math.round(pe-ut*60*60-ct*60);return ut+":"+(ct<10?"0"+ct:ct)+":"+(ot<10?"0"+ot:ot)},unformat:function(pe){var we=pe.split(":"),We=0;return we.length===3?(We=We+Number(we[0])*60*60,We=We+Number(we[1])*60,We=We+Number(we[2])):we.length===2&&(We=We+Number(we[0])*60,We=We+Number(we[1])),Number(We)}})}(),E})})(AS);var BE=AS.exports;const Iv={name:"Numeral",emits:["on-change"],props:{value:{type:[String,Number]},format:{type:String},prefix:{type:[String,Number]},suffix:{type:[String,Number]}},data(){return{currentValue:""}},watch:{value(){this.init()},format(){this.init()}},methods:{init(){if(this.value!==void 0){const v=BE(this.value);this.format?this.currentValue=v.format(this.format):this.currentValue=v.value(),this.$emit("on-change",this.currentValue)}},getValue(){return this.currentValue}},mounted(){this.init()}},cs={class:"ivu-numeral"};function $c(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",cs,[c.renderSlot(v.$slots,"prefix",{},()=>[c.createTextVNode(c.toDisplayString(P.prefix),1)]),c.createTextVNode(c.toDisplayString(H.currentValue),1),c.renderSlot(v.$slots,"suffix",{},()=>[c.createTextVNode(c.toDisplayString(P.suffix),1)])])}var pl=$(Iv,[["render",$c]]);const $v="ivu-select-group",Xy={name:"OptionGroup",props:{label:{type:String,default:""}},provide(){return{OptionGroupInstance:this}},inject:["SelectInstance"],data(){return{prefixCls:$v,hidden:!1,id:mt(6),optionList:[]}},computed:{show(){return this.optionList.find(v=>v.proxy&&v.proxy.isShow)}}};function FE(v,E,P,G,H,N){return c.withDirectives((c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass([H.prefixCls+"-wrap"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-title"])},c.toDisplayString(P.label),3),c.createElementVNode("ul",null,[c.createElementVNode("li",{class:c.normalizeClass([H.prefixCls]),ref:"options"},[c.renderSlot(v.$slots,"default")],2)])],2)),[[c.vShow,N.show]])}var ip=$(Xy,[["render",FE]]);const Jy="ivu-page";function th(v){return/^[1-9][0-9]*$/.test(v+"")}const Lv={name:"PageOption",mixins:[vt],components:{iSelect:ea,iOption:Pp},emits:["on-size","on-page"],props:{pageSizeOpts:Array,showSizer:Boolean,showElevator:Boolean,current:Number,_current:Number,pageSize:Number,allPages:Number,isSmall:Boolean,placement:String,transfer:Boolean,disabled:Boolean,eventsEnabled:Boolean},data(){return{currentPageSize:this.pageSize}},watch:{pageSize(v){this.currentPageSize=v}},computed:{size(){return this.isSmall?"small":"default"},optsClasses(){return[`${Jy}-options`]},sizerClasses(){return[`${Jy}-options-sizer`]},ElevatorClasses(){return[`${Jy}-options-elevator`]}},methods:{changeSize(){this.$emit("on-size",this.currentPageSize)},changePage(v){let E=v.target.value.trim(),P=0;if(th(E)){if(E=Number(E),E!=this.current){const G=this.allPages;E>G?P=G:P=E}}else P=1;P&&(this.$emit("on-page",P),v.target.value=P)}}},MS=["value","disabled"];function VE(v,E,P,G,H,N){const ee=c.resolveComponent("i-option"),le=c.resolveComponent("i-select");return P.showSizer||P.showElevator?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.optsClasses)},[P.showSizer?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.sizerClasses)},[c.createVNode(le,{modelValue:H.currentPageSize,"onUpdate:modelValue":E[0]||(E[0]=Ce=>H.currentPageSize=Ce),size:N.size,placement:P.placement,transfer:P.transfer,disabled:P.disabled,eventsEnabled:P.eventsEnabled,onOnChange:N.changeSize},{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.pageSizeOpts,Ce=>(c.openBlock(),c.createBlock(ee,{key:Ce,value:Ce,style:{"text-align":"center"}},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(Ce)+" "+c.toDisplayString(v.t("i.page.page")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","size","placement","transfer","disabled","eventsEnabled","onOnChange"])],2)):c.createCommentVNode("",!0),P.showElevator?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass(N.ElevatorClasses)},[c.createTextVNode(c.toDisplayString(v.t("i.page.goto"))+" ",1),c.createElementVNode("input",{type:"text",value:P._current,autocomplete:"off",spellcheck:"false",disabled:P.disabled,onKeyup:E[1]||(E[1]=c.withKeys((...Ce)=>N.changePage&&N.changePage(...Ce),["enter"]))},null,40,MS),c.createTextVNode(" "+c.toDisplayString(v.t("i.page.p")),1)],2)):c.createCommentVNode("",!0)],2)):c.createCommentVNode("",!0)}var zE=$(Lv,[["render",VE]]);const As="ivu-page",Qy={name:"Page",mixins:[vt],components:{Options:zE},emits:["update:modelValue","on-change","on-prev","on-next","on-page-size-change"],props:{modelValue:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageSizeOpts:{type:Array,default(){return[10,20,30,40]}},placement:{validator(v){return re(v,["top","bottom"])},default:"bottom"},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},size:{validator(v){return re(v,["small","default"])}},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showSizer:{type:Boolean,default:!1},className:{type:String},styles:{type:Object},prevText:{type:String,default:""},nextText:{type:String,default:""},disabled:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:As,currentPage:this.modelValue,currentPageSize:this.pageSize}},watch:{total(v){let E=Math.ceil(v/this.currentPageSize);E<this.currentPage&&(this.currentPage=E===0?1:E)},modelValue(v){this.currentPage=v},pageSize(v){this.currentPageSize=v}},computed:{isSmall(){return this.size==="small"},allPages(){const v=Math.ceil(this.total/this.currentPageSize);return v===0?1:v},simpleWrapClasses(){return[`${As}`,`${As}-simple`,{[`${this.className}`]:!!this.className}]},simplePagerClasses(){return`${As}-simple-pager`},wrapClasses(){return[`${As}`,{[`${this.className}`]:!!this.className,[`${As}-with-disabled`]:this.disabled,mini:this.size==="small"}]},prevClasses(){return[`${As}-prev`,{[`${As}-disabled`]:this.currentPage===1||this.disabled,[`${As}-custom-text`]:this.prevText!==""}]},nextClasses(){return[`${As}-next`,{[`${As}-disabled`]:this.currentPage===this.allPages||this.disabled,[`${As}-custom-text`]:this.nextText!==""}]},firstPageClasses(){return[`${As}-item`,{[`${As}-item-active`]:this.currentPage===1}]},lastPageClasses(){return[`${As}-item`,{[`${As}-item-active`]:this.currentPage===this.allPages}]}},methods:{changePage(v){this.disabled||this.currentPage!=v&&(this.currentPage=v,this.$emit("update:modelValue",v),this.$emit("on-change",v))},prev(){if(this.disabled)return;const v=this.currentPage;if(v<=1)return!1;this.changePage(v-1),this.$emit("on-prev",v-1)},next(){if(this.disabled)return;const v=this.currentPage;if(v>=this.allPages)return!1;this.changePage(v+1),this.$emit("on-next",v+1)},fastPrev(){if(this.disabled)return;const v=this.currentPage-5;v>0?this.changePage(v):this.changePage(1)},fastNext(){if(this.disabled)return;const v=this.currentPage+5;v>this.allPages?this.changePage(this.allPages):this.changePage(v)},onSize(v){this.disabled||(this.currentPageSize=v,this.$emit("on-page-size-change",v),this.changePage(1))},onPage(v){this.disabled||this.changePage(v)},keyDown(v){const E=v.keyCode;E>=48&&E<=57||E>=96&&E<=105||E===8||E===37||E===39||v.preventDefault()},keyUp(v){const E=v.keyCode,P=parseInt(v.target.value);if(E===38)this.prev();else if(E===40)this.next();else if(E===13){let G=1;P>this.allPages?G=this.allPages:P<=0||!P?G=1:G=P,v.target.value=G,this.changePage(G)}}}},Xo=["title"],nh=[c.createElementVNode("a",null,[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"})],-1)],UE=["title"],HE=["value","disabled"],kS=c.createElementVNode("span",null,"/",-1),ap=["title"],DS=[c.createElementVNode("a",null,[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"})],-1)],PS=["title"],TD={key:1,class:"ivu-icon ivu-icon-ios-arrow-back"},AD=[c.createElementVNode("a",null,"1",-1)],GE=["title"],MD=[c.createElementVNode("a",null,[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"}),c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],RS=["title"],kD=["title"],WE=["title"],DD=["title"],PD=["title"],RD=["title"],ml=["title"],us=["title"],sp=[c.createElementVNode("a",null,[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"}),c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],dN=["title"],YE=["title"],ID={key:1,class:"ivu-icon ivu-icon-ios-arrow-forward"};function eo(v,E,P,G,H,N){const ee=c.resolveComponent("Options");return P.simple?(c.openBlock(),c.createElementBlock("ul",{key:0,class:c.normalizeClass(N.simpleWrapClasses),style:c.normalizeStyle(P.styles)},[c.createElementVNode("li",{title:v.t("i.page.prev"),class:c.normalizeClass(N.prevClasses),onClick:E[0]||(E[0]=(...le)=>N.prev&&N.prev(...le))},nh,10,Xo),c.createElementVNode("div",{class:c.normalizeClass(N.simplePagerClasses),title:H.currentPage+"/"+N.allPages},[c.createElementVNode("input",{type:"text",value:H.currentPage,autocomplete:"off",spellcheck:"false",disabled:P.disabled,onKeydown:E[1]||(E[1]=(...le)=>N.keyDown&&N.keyDown(...le)),onKeyup:E[2]||(E[2]=(...le)=>N.keyUp&&N.keyUp(...le)),onChange:E[3]||(E[3]=(...le)=>N.keyUp&&N.keyUp(...le))},null,40,HE),kS,c.createTextVNode(" "+c.toDisplayString(N.allPages),1)],10,UE),c.createElementVNode("li",{title:v.t("i.page.next"),class:c.normalizeClass(N.nextClasses),onClick:E[4]||(E[4]=(...le)=>N.next&&N.next(...le))},DS,10,ap)],6)):(c.openBlock(),c.createElementBlock("ul",{key:1,class:c.normalizeClass(N.wrapClasses),style:c.normalizeStyle(P.styles)},[P.showTotal?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass([H.prefixCls+"-total"])},[c.renderSlot(v.$slots,"default",{},()=>[c.createTextVNode(c.toDisplayString(v.t("i.page.total"))+" "+c.toDisplayString(P.total)+" ",1),P.total<=1?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(v.t("i.page.item")),1)],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createTextVNode(c.toDisplayString(v.t("i.page.items")),1)],64))])],2)):c.createCommentVNode("",!0),c.createElementVNode("li",{title:v.t("i.page.prev"),class:c.normalizeClass(N.prevClasses),onClick:E[5]||(E[5]=(...le)=>N.prev&&N.prev(...le))},[c.createElementVNode("a",null,[P.prevText!==""?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(P.prevText),1)],64)):(c.openBlock(),c.createElementBlock("i",TD))])],10,PS),c.createElementVNode("li",{title:"1",class:c.normalizeClass(N.firstPageClasses),onClick:E[6]||(E[6]=le=>N.changePage(1))},AD,2),H.currentPage>5?(c.openBlock(),c.createElementBlock("li",{key:1,title:v.t("i.page.prev5"),class:c.normalizeClass([H.prefixCls+"-item-jump-prev"]),onClick:E[7]||(E[7]=(...le)=>N.fastPrev&&N.fastPrev(...le))},MD,10,GE)):c.createCommentVNode("",!0),H.currentPage===5?(c.openBlock(),c.createElementBlock("li",{key:2,title:H.currentPage-3,class:c.normalizeClass([H.prefixCls+"-item"]),onClick:E[8]||(E[8]=le=>N.changePage(H.currentPage-3))},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage-3),1)],10,RS)):c.createCommentVNode("",!0),H.currentPage-2>1?(c.openBlock(),c.createElementBlock("li",{key:3,title:H.currentPage-2,class:c.normalizeClass([H.prefixCls+"-item"]),onClick:E[9]||(E[9]=le=>N.changePage(H.currentPage-2))},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage-2),1)],10,kD)):c.createCommentVNode("",!0),H.currentPage-1>1?(c.openBlock(),c.createElementBlock("li",{key:4,title:H.currentPage-1,class:c.normalizeClass([H.prefixCls+"-item"]),onClick:E[10]||(E[10]=le=>N.changePage(H.currentPage-1))},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage-1),1)],10,WE)):c.createCommentVNode("",!0),H.currentPage!=1&&H.currentPage!=N.allPages?(c.openBlock(),c.createElementBlock("li",{key:5,title:H.currentPage,class:c.normalizeClass([H.prefixCls+"-item",H.prefixCls+"-item-active"])},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage),1)],10,DD)):c.createCommentVNode("",!0),H.currentPage+1<N.allPages?(c.openBlock(),c.createElementBlock("li",{key:6,title:H.currentPage+1,class:c.normalizeClass([H.prefixCls+"-item"]),onClick:E[11]||(E[11]=le=>N.changePage(H.currentPage+1))},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage+1),1)],10,PD)):c.createCommentVNode("",!0),H.currentPage+2<N.allPages?(c.openBlock(),c.createElementBlock("li",{key:7,title:H.currentPage+2,class:c.normalizeClass([H.prefixCls+"-item"]),onClick:E[12]||(E[12]=le=>N.changePage(H.currentPage+2))},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage+2),1)],10,RD)):c.createCommentVNode("",!0),N.allPages-H.currentPage===4?(c.openBlock(),c.createElementBlock("li",{key:8,title:H.currentPage+3,class:c.normalizeClass([H.prefixCls+"-item"]),onClick:E[13]||(E[13]=le=>N.changePage(H.currentPage+3))},[c.createElementVNode("a",null,c.toDisplayString(H.currentPage+3),1)],10,ml)):c.createCommentVNode("",!0),N.allPages-H.currentPage>=5?(c.openBlock(),c.createElementBlock("li",{key:9,title:v.t("i.page.next5"),class:c.normalizeClass([H.prefixCls+"-item-jump-next"]),onClick:E[14]||(E[14]=(...le)=>N.fastNext&&N.fastNext(...le))},sp,10,us)):c.createCommentVNode("",!0),N.allPages>1?(c.openBlock(),c.createElementBlock("li",{key:10,title:N.allPages,class:c.normalizeClass(N.lastPageClasses),onClick:E[15]||(E[15]=le=>N.changePage(N.allPages))},[c.createElementVNode("a",null,c.toDisplayString(N.allPages),1)],10,dN)):c.createCommentVNode("",!0),c.createElementVNode("li",{title:v.t("i.page.next"),class:c.normalizeClass(N.nextClasses),onClick:E[16]||(E[16]=(...le)=>N.next&&N.next(...le))},[c.createElementVNode("a",null,[P.nextText!==""?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(P.nextText),1)],64)):(c.openBlock(),c.createElementBlock("i",ID))])],10,YE),c.createVNode(ee,{"show-sizer":P.showSizer,"page-size":H.currentPageSize,"page-size-opts":P.pageSizeOpts,placement:P.placement,transfer:P.transfer,"show-elevator":P.showElevator,_current:H.currentPage,current:H.currentPage,disabled:P.disabled,"all-pages":N.allPages,"is-small":N.isSmall,eventsEnabled:P.eventsEnabled,onOnSize:N.onSize,onOnPage:N.onPage},null,8,["show-sizer","page-size","page-size-opts","placement","transfer","show-elevator","_current","current","disabled","all-pages","is-small","eventsEnabled","onOnSize","onOnPage"])],6))}var jE=$(Qy,[["render",eo]]);const ZE={name:"PageHeader",components:{Breadcrumb:Rp,BreadcrumbItem:R0,Divider:Ac,Icon:oe,Tabs:Tv,TabPane:ic},emits:["on-tab-change","on-back"],props:{title:{type:String},back:{type:Boolean,default:!1},logo:{type:String},action:{type:String},content:{type:String},extra:{type:String},breadcrumbList:{type:Array},hiddenBreadcrumb:{type:Boolean,default:!1},tabList:{type:Array},tabActiveKey:{type:String},wide:{type:Boolean,default:!1}},computed:{classes(){return{"ivu-page-header-wide":this.wide}}},methods:{handleTabChange(v){const E=this.tabList.find(P=>P.name===v);this.$emit("on-tab-change",JSON.parse(JSON.stringify(E)))},handleBack(){this.$emit("on-back")}}},IS={key:0,class:"ivu-page-header-breadcrumb"},$D={class:"ivu-page-header-detail"},LD={key:1,class:"ivu-page-header-logo"},qE=["src"],ND={class:"ivu-page-header-main"},Tn={class:"ivu-page-header-row"},lp={key:1,class:"ivu-page-header-title"},$S={key:2,class:"ivu-page-header-action"},e1={class:"ivu-page-header-row"},Nv={key:0,class:"ivu-page-header-content"},KE={key:1,class:"ivu-page-header-extra"},OD={key:1,class:"ivu-page-header-tabs"};function BD(v,E,P,G,H,N){const ee=c.resolveComponent("BreadcrumbItem"),le=c.resolveComponent("Breadcrumb"),Ce=c.resolveComponent("Icon"),pe=c.resolveComponent("Divider"),we=c.resolveComponent("TabPane"),We=c.resolveComponent("Tabs");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-page-header",N.classes])},[v.$slots.breadcrumb||!P.hiddenBreadcrumb?(c.openBlock(),c.createElementBlock("div",IS,[c.renderSlot(v.$slots,"breadcrumb",{},()=>[c.createVNode(le,null,{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.breadcrumbList,(ut,ct)=>(c.openBlock(),c.createBlock(ee,{key:ct,to:ut.to,replace:ut.replace,target:ut.target},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(ut.title),1)]),_:2},1032,["to","replace","target"]))),128))]),_:1})])])):c.createCommentVNode("",!0),c.createElementVNode("div",$D,[P.back||v.$slots.back?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:E[0]||(E[0]=(...ut)=>N.handleBack&&N.handleBack(...ut))},[c.renderSlot(v.$slots,"back",{},()=>[c.createVNode(Ce,{type:"md-arrow-back"})]),c.createVNode(pe,{type:"vertical"})])):c.createCommentVNode("",!0),P.logo||v.$slots.logo?(c.openBlock(),c.createElementBlock("div",LD,[c.renderSlot(v.$slots,"logo",{},()=>[c.createElementVNode("img",{src:P.logo},null,8,qE)])])):c.createCommentVNode("",!0),c.createElementVNode("div",ND,[c.createElementVNode("div",Tn,[P.back||v.$slots.back?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:E[1]||(E[1]=(...ut)=>N.handleBack&&N.handleBack(...ut))},[c.renderSlot(v.$slots,"back",{},()=>[c.createVNode(Ce,{type:"md-arrow-back"})]),c.createVNode(pe,{type:"vertical"})])):c.createCommentVNode("",!0),P.title||v.$slots.title?(c.openBlock(),c.createElementBlock("div",lp,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])])):c.createCommentVNode("",!0),P.action||v.$slots.action?(c.openBlock(),c.createElementBlock("div",$S,[c.renderSlot(v.$slots,"action",{},()=>[c.createTextVNode(c.toDisplayString(P.action),1)])])):c.createCommentVNode("",!0)]),c.createElementVNode("div",e1,[P.content||v.$slots.content?(c.openBlock(),c.createElementBlock("div",Nv,[c.renderSlot(v.$slots,"content",{},()=>[c.createTextVNode(c.toDisplayString(P.content),1)])])):c.createCommentVNode("",!0),P.extra||v.$slots.extra?(c.openBlock(),c.createElementBlock("div",KE,[c.renderSlot(v.$slots,"extra",{},()=>[c.createTextVNode(c.toDisplayString(P.extra),1)])])):c.createCommentVNode("",!0)])])]),P.tabList&&P.tabList.length?(c.openBlock(),c.createElementBlock("div",OD,[c.createVNode(We,{animated:!1,"model-value":P.tabActiveKey,onOnClick:N.handleTabChange},{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.tabList,(ut,ct)=>(c.openBlock(),c.createBlock(we,{key:ct,label:ut.label,name:ut.name},null,8,["label","name"]))),128))]),_:1},8,["model-value","onOnClick"])])):c.createCommentVNode("",!0)],2)}var FD=$(ZE,[["render",BD]]);const VD=c.defineComponent({name:"CollapseTransition",props:{ready:{type:Boolean,default:!0}},setup(v){return{on:{beforeEnter(E){!v.ready||(Be(E,"collapse-transition"),E.dataset||(E.dataset={}),E.dataset.oldPaddingTop=E.style.paddingTop,E.dataset.oldPaddingBottom=E.style.paddingBottom,E.style.height="0",E.style.paddingTop=0,E.style.paddingBottom=0)},enter(E){!v.ready||(E.dataset.oldOverflow=E.style.overflow,E.scrollHeight!==0?(E.style.height=E.scrollHeight+"px",E.style.paddingTop=E.dataset.oldPaddingTop,E.style.paddingBottom=E.dataset.oldPaddingBottom):(E.style.height="",E.style.paddingTop=E.dataset.oldPaddingTop,E.style.paddingBottom=E.dataset.oldPaddingBottom),E.style.overflow="hidden")},afterEnter(E){!v.ready||(ue(E,"collapse-transition"),E.style.height="",E.style.overflow=E.dataset.oldOverflow)},beforeLeave(E){!v.ready||(E.dataset||(E.dataset={}),E.dataset.oldPaddingTop=E.style.paddingTop,E.dataset.oldPaddingBottom=E.style.paddingBottom,E.dataset.oldOverflow=E.style.overflow,E.style.height=E.scrollHeight+"px",E.style.overflow="hidden")},leave(E){!v.ready||E.scrollHeight!==0&&(Be(E,"collapse-transition"),E.style.height=0,E.style.paddingTop=0,E.style.paddingBottom=0)},afterLeave(E){!v.ready||(ue(E,"collapse-transition"),E.style.height="",E.style.overflow=E.dataset.oldOverflow,E.style.paddingTop=E.dataset.oldPaddingTop,E.style.paddingBottom=E.dataset.oldPaddingBottom)}}}}});function XE(v,E,P,G,H,N){return c.openBlock(),c.createBlock(c.Transition,c.toHandlers(v.on),{default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),_:3},16)}var or=$(VD,[["render",XE]]);const ad="ivu-collapse",JE={name:"Panel",components:{Icon:oe,CollapseTransition:or},inject:["CollapseInstance"],props:{name:{type:String},hideArrow:{type:Boolean,default:!1}},data(){return{index:0,mounted:!1}},computed:{itemClasses(){return[`${ad}-item`,{[`${ad}-item-active`]:this.isActive}]},headerClasses(){return`${ad}-header`},contentClasses(){return`${ad}-content`},boxClasses(){return`${ad}-content-box`},isActive(){const v=this.CollapseInstance.getActiveKey(),E=this.name||this.index.toString();return v.indexOf(E)>-1}},methods:{setIndex(){this.index=this.CollapseInstance.panelCount+1,this.CollapseInstance.panelCount=this.index},toggle(){this.CollapseInstance.toggle({name:this.name||this.index,isActive:this.isActive})}},mounted(){this.setIndex(),this.mounted=!0}};function zD(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("collapse-transition");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.itemClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.headerClasses),onClick:E[0]||(E[0]=(...Ce)=>N.toggle&&N.toggle(...Ce))},[P.hideArrow?c.createCommentVNode("",!0):(c.openBlock(),c.createBlock(ee,{key:0,type:"ios-arrow-forward"})),c.renderSlot(v.$slots,"default")],2),H.mounted?(c.openBlock(),c.createBlock(le,{key:0},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.boxClasses)},[c.renderSlot(v.$slots,"content")],2)],2),[[c.vShow,N.isActive]])]),_:3})):c.createCommentVNode("",!0)],2)}var xm=$(JE,[["render",zD]]);const QE={name:"Paragraph",mixins:[mv],render(){return c.h(gv,S(x(S({},this.$props),{component:"div"}),this.commonEvents()),this.commonSlots())}},UD={name:"Password",mixins:[Sg],data(){return{className:"ivu-login-password",prefix:"ios-lock-outline",placeholder:"请输入密码",type:"password"}}},rh="ivu-poptip",HD={name:"Poptip",mixins:[ba,vt],emits:["on-ok","on-cancel"],directives:{clickOutside:Ft},components:{iButton:Oi},props:{trigger:{validator(v){return re(v,["click","focus","hover"])},default:"click"},placement:{validator(v){return re(v,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},title:{type:[String,Number]},content:{type:[String,Number],default:""},width:{type:[String,Number]},confirm:{type:Boolean,default:!1},okText:{type:String},cancelText:{type:String},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}},popperClass:{type:String},wordWrap:{type:Boolean,default:!1},padding:{type:String},disabled:{type:Boolean,default:!1},capture:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return v.$VIEWUI?v.$VIEWUI.capture:!1}},transferClassName:{type:String}},data(){return{prefixCls:rh,showTitle:!0,isInput:!1,disableCloseUnderTransfer:!1,tIndex:this.handleGetIndex()}},computed:{classes(){return[`${rh}`,{[`${rh}-confirm`]:this.confirm}]},popperClasses(){return[`${rh}-popper`,{[`${rh}-confirm`]:this.transfer&&this.confirm,[`${this.popperClass}`]:!!this.popperClass,[rh+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]},styles(){let v={};return this.width&&(v.width=`${this.width}px`),this.transfer&&(v["z-index"]=1060+this.tIndex),v},localeOkText(){return this.okText===void 0?this.t("i.poptip.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.poptip.cancelText"):this.cancelText},contentClasses(){return[`${rh}-body-content`,{[`${rh}-body-content-word-wrap`]:this.wordWrap}]},contentPaddingStyle(){const v={};return this.padding!==""&&(v.padding=this.padding),v}},methods:{handleClick(){if(!this.disabled){if(this.confirm)return this.visible=!this.visible,!0;if(this.trigger!=="click")return!1;this.visible=!this.visible}},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(this.confirm)return this.visible=!1,!0;if(this.trigger!=="click")return!1;this.visible=!1},handleFocus(v=!0){if(!this.disabled){if(this.trigger!=="focus"||this.confirm||this.isInput&&!v)return!1;this.visible=!0}},handleBlur(v=!0){if(this.trigger!=="focus"||this.confirm||this.isInput&&!v)return!1;this.visible=!1},handleMouseenter(){if(!this.disabled){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!0},100)}},handleMouseleave(){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!1},100))},cancel(){this.visible=!1,this.$emit("on-cancel")},ok(){this.visible=!1,this.$emit("on-ok")},getInputChildren(){const v=this.$refs.reference.querySelectorAll("input"),E=this.$refs.reference.querySelectorAll("textarea");let P=null;return v.length?P=v[0]:E.length&&(P=E[0]),P},handleGetIndex(){return gn(),Zn},handleIndexIncrease(){this.tIndex=this.handleGetIndex()}},mounted(){this.confirm||(this.showTitle=this.$slots.title!==void 0||this.title),this.trigger==="focus"&&c.nextTick(()=>{const v=this.getInputChildren();v&&(this.isInput=!0,v.addEventListener("focus",this.handleFocus,!1),v.addEventListener("blur",this.handleBlur,!1))})},beforeUnmount(){const v=this.getInputChildren();v&&(v.removeEventListener("focus",this.handleFocus,!1),v.removeEventListener("blur",this.handleBlur,!1))}},LS=c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-help-circle"},null,-1);function GD(v,E,P,G,H,N){const ee=c.resolveComponent("i-button"),le=c.resolveDirective("click-outside");return c.withDirectives((c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),onMouseenter:E[6]||(E[6]=(...Ce)=>N.handleMouseenter&&N.handleMouseenter(...Ce)),onMouseleave:E[7]||(E[7]=(...Ce)=>N.handleMouseleave&&N.handleMouseleave(...Ce))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-rel"]),ref:"reference",onClick:E[0]||(E[0]=(...Ce)=>N.handleClick&&N.handleClick(...Ce)),onMousedown:E[1]||(E[1]=Ce=>N.handleFocus(!1)),onMouseup:E[2]||(E[2]=Ce=>N.handleBlur(!1))},[c.renderSlot(v.$slots,"default")],34),(c.openBlock(),c.createBlock(c.Teleport,{to:"body",disabled:!P.transfer},[c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass(N.popperClasses),style:c.normalizeStyle(N.styles),ref:"popper",onClick:E[3]||(E[3]=(...Ce)=>N.handleTransferClick&&N.handleTransferClick(...Ce)),onMouseenter:E[4]||(E[4]=(...Ce)=>N.handleMouseenter&&N.handleMouseenter(...Ce)),onMouseleave:E[5]||(E[5]=(...Ce)=>N.handleMouseleave&&N.handleMouseleave(...Ce))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-content"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-arrow"])},null,2),P.confirm?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-inner"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"])},[LS,c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body-message"])},[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])],2)],2),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-footer"])},[c.createVNode(ee,{type:"text",size:"small",onClick:N.cancel},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.localeCancelText),1)]),_:1},8,["onClick"]),c.createVNode(ee,{type:"primary",size:"small",onClick:N.ok},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(N.localeOkText),1)]),_:1},8,["onClick"])],2)],2)):c.createCommentVNode("",!0),P.confirm?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass([H.prefixCls+"-inner"])},[H.showTitle?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-title"]),style:c.normalizeStyle(N.contentPaddingStyle),ref:"title"},[c.renderSlot(v.$slots,"title",{},()=>[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-title-inner"])},c.toDisplayString(P.title),3)])],6)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"]),style:c.normalizeStyle(N.contentPaddingStyle)},[c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses)},[c.renderSlot(v.$slots,"content",{},()=>[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body-content-inner"])},c.toDisplayString(P.content),3)])],2)],6)],2))],2)],38),[[c.vShow,v.visible]])]),_:3})],8,["disabled"]))],34)),[[le,N.handleClose]])}var NS=$(HD,[["render",GD]]);const ac="ivu-progress",eT={name:"Progress",components:{Icon:oe},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator(v){return re(v,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data(){return{currentStatus:this.status}},computed:{isStatus(){return this.currentStatus==="wrong"||this.currentStatus==="success"},statusIcon(){let v="";switch(this.currentStatus){case"wrong":v="ios-close-circle";break;case"success":v="ios-checkmark-circle";break}return v},bgStyle(){const v=this.vertical?{height:`${this.percent}%`,width:`${this.strokeWidth}px`}:{width:`${this.percent}%`,height:`${this.strokeWidth}px`};return this.strokeColor&&(typeof this.strokeColor=="string"?v["background-color"]=this.strokeColor:v["background-image"]=`linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`),v},successBgStyle(){return this.vertical?{height:`${this.successPercent}%`,width:`${this.strokeWidth}px`}:{width:`${this.successPercent}%`,height:`${this.strokeWidth}px`}},wrapClasses(){return[`${ac}`,`${ac}-${this.currentStatus}`,{[`${ac}-show-info`]:!this.hideInfo&&!this.textInside,[`${ac}-vertical`]:this.vertical}]},textClasses(){return`${ac}-text`},textInnerClasses(){return`${ac}-text-inner`},outerClasses(){return`${ac}-outer`},innerClasses(){return`${ac}-inner`},bgClasses(){return`${ac}-bg`},successBgClasses(){return`${ac}-success-bg`}},created(){this.handleStatus()},methods:{handleStatus(v){v?(this.currentStatus="normal",this.$emit("on-status-change","normal")):parseInt(this.percent,10)===100&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent(v,E){v<E?this.handleStatus(!0):this.handleStatus()},status(v){this.currentStatus=v}}},tT={key:0,class:"ivu-progress-inner-text"};function WD(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.outerClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.innerClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.bgClasses),style:c.normalizeStyle(N.bgStyle)},[P.textInside?(c.openBlock(),c.createElementBlock("div",tT,c.toDisplayString(P.percent)+"%",1)):c.createCommentVNode("",!0)],6),c.createElementVNode("div",{class:c.normalizeClass(N.successBgClasses),style:c.normalizeStyle(N.successBgStyle)},null,6)],2)],2),!P.hideInfo&&!P.textInside?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(N.textClasses)},[c.renderSlot(v.$slots,"default",{},()=>[N.isStatus?(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass(N.textInnerClasses)},[c.createVNode(ee,{type:N.statusIcon},null,8,["type"])],2)):(c.openBlock(),c.createElementBlock("span",{key:1,class:c.normalizeClass(N.textInnerClasses)},c.toDisplayString(P.percent)+"% ",3))])],2)):c.createCommentVNode("",!0)],2)}var t1=$(eT,[["render",WD]]);const oh="ivu-rate",ih={name:"Rate",mixins:[vt,Mo],emits:["update:modelValue","on-change"],props:{count:{type:Number,default:5},modelValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data(){const v=this.modelValue||0;return{prefixCls:oh,hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&v.toString().indexOf(".")>=0,currentValue:v}},computed:{classes(){return[`${oh}`,{[`${oh}-disabled`]:this.itemDisabled}]},iconClasses(){return["ivu-icon",{[`ivu-icon-${this.icon}`]:this.icon!=="",[`${this.customIcon}`]:this.customIcon!==""}]},showCharacter(){return this.character!==""||this.icon!==""||this.customIcon!==""}},watch:{modelValue(v){this.currentValue=v||0},currentValue(v){this.setHalf(v)}},methods:{starCls(v){const E=this.hoverIndex,P=this.isHover?E:this.currentValue;let G=!1,H=!1;return P>=v&&(G=!0),this.isHover?H=P===v:H=Math.ceil(this.currentValue)===v,[{[`${oh}-star`]:!this.showCharacter,[`${oh}-star-chart`]:this.showCharacter,[`${oh}-star-full`]:!H&&G||H&&!this.isHalf,[`${oh}-star-half`]:H&&this.isHalf,[`${oh}-star-zero`]:!G}]},handleMousemove(v,E){if(!this.itemDisabled){if(this.isHover=!0,this.allowHalf){const P=E.target.getAttribute("type")||!1;this.isHalf=P==="half"}else this.isHalf=!1;this.hoverIndex=v}},handleMouseleave(){this.itemDisabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf(v){this.isHalf=this.allowHalf&&v.toString().indexOf(".")>=0},handleClick(v){this.itemDisabled||(this.isHalf&&(v-=.5),this.clearable&&Math.abs(v-this.currentValue)<.01&&(v=0),this.currentValue=v,this.$emit("update:modelValue",v),this.$emit("on-change",v),this.handleFormItemChange("change",v))}}},n1=["name","value"],To=["onMousemove","onClick"],YD={key:0},ah={key:1};function sd(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),onMouseleave:E[0]||(E[0]=(...ee)=>N.handleMouseleave&&N.handleMouseleave(...ee))},[c.createElementVNode("input",{type:"hidden",name:P.name,value:H.currentValue},null,8,n1),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.count,ee=>(c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.starCls(ee)),onMousemove:le=>N.handleMousemove(ee,le),key:ee,onClick:le=>N.handleClick(ee)},[N.showCharacter?(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createElementVNode("span",{class:c.normalizeClass([H.prefixCls+"-star-first"]),type:"half"},[P.character!==""?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(P.character),1)],64)):(c.openBlock(),c.createElementBlock("i",{key:1,class:c.normalizeClass(N.iconClasses),type:"half"},null,2))],2),c.createElementVNode("span",{class:c.normalizeClass([H.prefixCls+"-star-second"])},[P.character!==""?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createTextVNode(c.toDisplayString(P.character),1)],64)):(c.openBlock(),c.createElementBlock("i",{key:1,class:c.normalizeClass(N.iconClasses)},null,2))],2)],64)):(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass([H.prefixCls+"-star-content"]),type:"half"},null,2))],42,To))),128)),P.showText?c.withDirectives((c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-text"])},[c.renderSlot(v.$slots,"default",{},()=>[c.createElementVNode("span",null,c.toDisplayString(H.currentValue),1),c.createTextVNode(),H.currentValue<=1?(c.openBlock(),c.createElementBlock("span",YD,c.toDisplayString(v.t("i.rate.star")),1)):(c.openBlock(),c.createElementBlock("span",ah,c.toDisplayString(v.t("i.rate.stars")),1))])],2)),[[c.vShow,H.currentValue>0]]):c.createCommentVNode("",!0)],34)}var Ov=$(ih,[["render",sd]]);const gl={name:"Result",components:{Icon:oe},props:{type:{validator(v){return re(v,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses(){return{"ivu-result-icon-success":this.type==="success","ivu-result-icon-error":this.type==="error","ivu-result-icon-warning":this.type==="warning"}}}},r1={class:"ivu-result"},ld={key:0,class:"ivu-result-title"},cp={key:1,class:"ivu-result-desc"},Cm={key:2,class:"ivu-result-extra"},nT={key:3,class:"ivu-result-actions"};function jD(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",r1,[c.createElementVNode("div",{class:c.normalizeClass(["ivu-result-icon",N.iconClasses])},[P.type==="success"?(c.openBlock(),c.createBlock(ee,{key:0,type:"ios-checkmark"})):c.createCommentVNode("",!0),P.type==="error"?(c.openBlock(),c.createBlock(ee,{key:1,type:"ios-close"})):c.createCommentVNode("",!0),P.type==="warning"?(c.openBlock(),c.createBlock(ee,{key:2,type:"ios-information"})):c.createCommentVNode("",!0)],2),P.title||v.$slots.title?(c.openBlock(),c.createElementBlock("div",ld,[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])])):c.createCommentVNode("",!0),P.desc||v.$slots.desc?(c.openBlock(),c.createElementBlock("div",cp,[c.renderSlot(v.$slots,"desc",{},()=>[c.createTextVNode(c.toDisplayString(P.desc),1)])])):c.createCommentVNode("",!0),P.extra||v.$slots.extra?(c.openBlock(),c.createElementBlock("div",Cm,[c.renderSlot(v.$slots,"extra",{},()=>[c.createTextVNode(c.toDisplayString(P.extra),1)])])):c.createCommentVNode("",!0),v.$slots.actions?(c.openBlock(),c.createElementBlock("div",nT,[c.renderSlot(v.$slots,"actions")])):c.createCommentVNode("",!0)])}var o1=$(gl,[["render",jD]]);const Bv="ivu-scroll",lo={props:["text","active","spinnerHeight"],components:{Spin:tc,Icon:oe},computed:{wrapperClasses(){return[`${Bv}-loader-wrapper`,{[`${Bv}-loader-wrapper-active`]:this.active}]},spinnerClasses(){return`${Bv}-spinner`},iconClasses(){return`${Bv}-spinner-icon`},textClasses(){return`${Bv}-loader-text`}}};function Lc(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Spin");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapperClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.spinnerClasses)},[c.createVNode(le,{fix:""},{default:c.withCtx(()=>[c.createVNode(ee,{type:"ios-loading",size:"18",class:c.normalizeClass(N.iconClasses)},null,8,["class"]),P.text?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.textClasses)},c.toDisplayString(P.text),3)):c.createCommentVNode("",!0)]),_:1})],2)],2)}var Zh=$(lo,[["render",Lc]]);const wm="ivu-scroll",up={sensitivity:10,minimumStartDragOffset:5},co=()=>Promise.resolve(),ZD={name:"Scroll",mixins:[vt],components:{loader:Zh},props:{height:{type:[Number,String],default:300},onReachTop:{type:Function},onReachBottom:{type:Function},onReachEdge:{type:Function},loadingText:{type:String},distanceToEdge:[Number,Array],stopSlide:{type:Boolean,default:!1}},data(){const v=this.calculateProximityThreshold();return{showTopLoader:!1,showBottomLoader:!1,showBodyLoader:!1,lastScroll:0,reachedTopScrollLimit:!0,reachedBottomScrollLimit:!1,topRubberPadding:0,bottomRubberPadding:0,rubberRollBackTimeout:!1,isLoading:!1,pointerTouchDown:null,touchScroll:!1,handleScroll:()=>{},pointerUpHandler:()=>{},pointerMoveHandler:()=>{},topProximityThreshold:v[0],bottomProximityThreshold:v[1]}},computed:{wrapClasses(){return`${wm}-wrapper`},scrollContainerClasses(){return[`${wm}-container`,{[`${wm}-container-loading`]:this.showBodyLoader&&this.stopSlide}]},slotContainerClasses(){return[`${wm}-content`,{[`${wm}-content-loading`]:this.showBodyLoader}]},loaderClasses(){return`${wm}-loader`},wrapperPadding(){return{paddingTop:this.topRubberPadding+"px",paddingBottom:this.bottomRubberPadding+"px"}},localeLoadingText(){return this.loadingText===void 0?this.t("i.select.loading"):this.loadingText}},methods:{waitOneSecond(){return new Promise(v=>{setTimeout(v,1e3)})},calculateProximityThreshold(){const v=this.distanceToEdge;return typeof v>"u"?[20,20]:Array.isArray(v)?v:[v,v]},onCallback(v){if(this.isLoading=!0,this.showBodyLoader=!0,v>0)this.showTopLoader=!0,this.topRubberPadding=20;else{this.showBottomLoader=!0,this.bottomRubberPadding=20;let G=0;const H=this.$refs.scrollContainer,N=H.scrollTop;for(let ee=0;ee<20;ee++)setTimeout(()=>{G=Math.max(G,this.$refs.bottomLoader.getBoundingClientRect().height),H.scrollTop=N+G},ee*50)}const E=[this.waitOneSecond(),this.onReachEdge?this.onReachEdge(v):co()];E.push(v>0?this.onReachTop?this.onReachTop():co():this.onReachBottom?this.onReachBottom():co());let P=setTimeout(()=>{this.reset()},5e3);Promise.all(E).then(()=>{clearTimeout(P),this.reset()})},reset(){["showTopLoader","showBottomLoader","showBodyLoader","isLoading","reachedTopScrollLimit","reachedBottomScrollLimit"].forEach(v=>this[v]=!1),this.lastScroll=0,this.topRubberPadding=0,this.bottomRubberPadding=0,clearInterval(this.rubberRollBackTimeout),this.touchScroll&&setTimeout(()=>{L(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.removeEventListener("touchmove",this.pointerMoveHandler),this.touchScroll=!1},500)},onWheel(v){if(this.isLoading)return;const E=v.wheelDelta?v.wheelDelta:-(v.detail||v.deltaY);this.stretchEdge(E)},stretchEdge(v){if(clearTimeout(this.rubberRollBackTimeout),!this.onReachEdge){if(v>0){if(!this.onReachTop)return}else if(!this.onReachBottom)return}this.rubberRollBackTimeout=setTimeout(()=>{this.isLoading||this.reset()},250),v>0&&this.reachedTopScrollLimit?(this.topRubberPadding+=5-this.topRubberPadding/5,this.topRubberPadding>this.topProximityThreshold&&this.onCallback(1)):v<0&&this.reachedBottomScrollLimit?(this.bottomRubberPadding+=6-this.bottomRubberPadding/4,this.bottomRubberPadding>this.bottomProximityThreshold&&this.onCallback(-1)):this.onScroll()},onScroll(){const v=this.$refs.scrollContainer;if(this.isLoading||!v)return;const E=Math.sign(this.lastScroll-v.scrollTop),P=v.scrollHeight-v.clientHeight-v.scrollTop,G=this.topProximityThreshold<0?this.topProximityThreshold:0,H=this.bottomProximityThreshold<0?this.bottomProximityThreshold:0;E==-1&&P+H<=up.sensitivity?this.reachedBottomScrollLimit=!0:E>=0&&v.scrollTop+G<=0?this.reachedTopScrollLimit=!0:(this.reachedTopScrollLimit=!1,this.reachedBottomScrollLimit=!1,this.lastScroll=v.scrollTop)},getTouchCoordinates(v){return{x:v.touches[0].pageX,y:v.touches[0].pageY}},onPointerDown(v){if(!this.isLoading){if(v.type=="touchstart"){const E=this.$refs.scrollContainer;this.reachedTopScrollLimit?E.scrollTop=5:this.reachedBottomScrollLimit&&(E.scrollTop-=5)}v.type=="touchstart"&&this.$refs.scrollContainer.scrollTop==0&&(this.$refs.scrollContainer.scrollTop=5),this.pointerTouchDown=this.getTouchCoordinates(v),R(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.parentElement.addEventListener("touchmove",E=>{E.stopPropagation(),this.pointerMoveHandler(E)},{passive:!1,useCapture:!0})}},onPointerMove(v){if(!this.pointerTouchDown||this.isLoading)return;const E=this.getTouchCoordinates(v).y-this.pointerTouchDown.y;this.stretchEdge(E),this.touchScroll||Math.abs(E)>up.minimumStartDragOffset&&(this.touchScroll=!0)},onPointerUp(){this.pointerTouchDown=null}},created(){this.handleScroll=dv(this.onScroll,150,{leading:!1}),this.pointerUpHandler=this.onPointerUp.bind(this),this.pointerMoveHandler=dv(this.onPointerMove,50,{leading:!1})}};function OS(v,E,P,G,H,N){const ee=c.resolveComponent("loader");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses),style:{"touch-action":"none"}},[c.createElementVNode("div",{class:c.normalizeClass(N.scrollContainerClasses),style:c.normalizeStyle({height:P.height+"px"}),onScroll:E[0]||(E[0]=(...le)=>H.handleScroll&&H.handleScroll(...le)),onWheel:E[1]||(E[1]=(...le)=>N.onWheel&&N.onWheel(...le)),onTouchstart:E[2]||(E[2]=(...le)=>N.onPointerDown&&N.onPointerDown(...le)),ref:"scrollContainer"},[c.createElementVNode("div",{class:c.normalizeClass(N.loaderClasses),style:c.normalizeStyle({paddingTop:N.wrapperPadding.paddingTop}),ref:"toploader"},[c.createVNode(ee,{text:N.localeLoadingText,active:H.showTopLoader},null,8,["text","active"])],6),c.createElementVNode("div",{class:c.normalizeClass(N.slotContainerClasses),ref:"scrollContent"},[c.renderSlot(v.$slots,"default")],2),c.createElementVNode("div",{class:c.normalizeClass(N.loaderClasses),style:c.normalizeStyle({paddingBottom:N.wrapperPadding.paddingBottom}),ref:"bottomLoader"},[c.createVNode(ee,{text:N.localeLoadingText,active:H.showBottomLoader},null,8,["text","active"])],6)],38)],2)}var i1=$(ZD,[["render",OS]]);const qD="COMPLETE",sh="CANCELED";function qh(v){if(A&&"requestAnimationFrame"in window)return window.requestAnimationFrame(v);setTimeout(v,16)}function Em(v,E,P){v===window?v.scrollTo(E,P):(v.scrollLeft=E,v.scrollTop=P)}function a1(v,E,P){if(!A)return;let G=v.getBoundingClientRect(),H=null,N=null,ee=null,le=null,Ce=null,pe=null,we=null,We=P&&P.left!=null?P.left:.5,ut=P&&P.top!=null?P.top:.5,ct=P&&P.leftOffset!=null?P.leftOffset:0,ot=P&&P.topOffset!=null?P.topOffset:0,Oe=We,wt=ut;if(E===window)pe=Math.min(G.width,window.innerWidth),we=Math.min(G.height,window.innerHeight),N=G.left+window.pageXOffset-window.innerWidth*Oe+pe*Oe,ee=G.top+window.pageYOffset-window.innerHeight*wt+we*wt,N-=ct,ee-=ot,le=N-window.pageXOffset,Ce=ee-window.pageYOffset;else{pe=G.width,we=G.height,H=E.getBoundingClientRect();let Er=G.left-(H.left-E.scrollLeft),ir=G.top-(H.top-E.scrollTop);N=Er+pe*Oe-E.clientWidth*Oe,ee=ir+we*wt-E.clientHeight*wt,N=Math.max(Math.min(N,E.scrollWidth-E.clientWidth),0),ee=Math.max(Math.min(ee,E.scrollHeight-E.clientHeight),0),N-=ct,ee-=ot,le=N-E.scrollLeft,Ce=ee-E.scrollTop}return{x:N,y:ee,differenceX:le,differenceY:Ce}}function Fv(v){qh(function(){let E=v.scrollOption;if(!E)return;let P=a1(E.target,v,E.align),G=Date.now()-E.startTime,H=Math.min(1/E.time*G,1);if(G>E.time+20)return Em(v,P.x,P.y),v.scrollOption=null,E.end(qD);let N=1-E.ease(H);Em(v,P.x-P.differenceX*N,P.y-P.differenceY*N),Fv(v)})}function dp(v,E,P,G){let H=!E.scrollOption,N=E.scrollOption,ee=Date.now(),le;N&&N.end(sh);function Ce(pe){E.scrollOption=null,E.parentElement&&E.parentElement.scrollOption&&E.parentElement.scrollOption.end(pe),G(pe),E.removeEventListener("touchstart",le)}E.scrollOption={startTime:N?N.startTime:Date.now(),target:v,time:P.time+(N?ee-N.startTime:0),ease:P.ease,align:P.align,end:Ce},le=Ce.bind(null,sh),E.addEventListener("touchstart",le),H&&Fv(E)}function Vv(v){if(A)return v===window||(v.scrollHeight!==v.clientHeight||v.scrollWidth!==v.clientWidth)&&getComputedStyle(v).overflow!=="hidden"}function Tm(){return!0}function BS(v,E,P){if(!v)return;typeof E=="function"&&(P=E,E=null),E||(E={}),E.time=isNaN(E.time)?1e3:E.time,E.ease=E.ease||function(Ce){return 1-Math.pow(1-Ce,Ce/2)};let G=v.parentElement,H=0;function N(Ce){H-=1,!H&&P&&P(Ce)}let ee=E.validTarget||Tm,le=E.isScrollable;for(;G;){if(ee(G,H)&&(le?le(G,Vv):Vv(G))&&(H+=1,dp(v,G,E,N)),G=G.parentElement,!G)return;G.tagName==="BODY"&&(G=window)}}function FS(v){if(A&&"requestAnimationFrame"in window)return window.requestAnimationFrame(v);setTimeout(v,16)}function s1(v,E,P){if(!v)return;typeof E=="function"&&(P=E,E=null),E||(E={}),E.time=isNaN(E.time)?500:E.time;const G=v.scrollTop,H=E.to||0,N=Math.abs(G-H),ee=Math.ceil(N/E.time*50);function le(Ce,pe,we){if(Ce===pe){P&&P();return}let We=Ce+we>pe?pe:Ce+we;Ce>pe&&(We=Ce-we<pe?pe:Ce-we),v.scrollTop=We,FS(()=>le(We,pe,we))}le(G,H,ee)}const lh="ivu-layout-sider";Rt();const hN={name:"Sider",emits:["on-collapse","update:modelValue"],props:{modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:200},collapsedWidth:{type:[Number,String],default:64},hideTrigger:{type:Boolean,default:!1},breakpoint:{type:String,validator(v){return re(v,["xs","sm","md","lg","xl","xxl"])}},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},reverseArrow:{type:Boolean,default:!1}},data(){return{prefixCls:lh,mediaMatched:!1}},computed:{wrapClasses(){return[`${lh}`,this.siderWidth?"":`${lh}-zero-width`,this.modelValue?`${lh}-collapsed`:""]},wrapStyles(){return{width:`${this.siderWidth}px`,minWidth:`${this.siderWidth}px`,maxWidth:`${this.siderWidth}px`,flex:`0 0 ${this.siderWidth}px`}},triggerClasses(){return[`${lh}-trigger`,this.modelValue?`${lh}-trigger-collapsed`:""]},childClasses(){return`${this.prefixCls}-children`},zeroWidthTriggerClasses(){return[`${lh}-zero-width-trigger`,this.reverseArrow?`${lh}-zero-width-trigger-left`:""]},triggerIconClasses(){return["ivu-icon",`ivu-icon-ios-arrow-${this.reverseArrow?"forward":"back"}`,`${lh}-trigger-icon`]},siderWidth(){return this.collapsible?this.modelValue?this.mediaMatched?0:parseInt(this.collapsedWidth):parseInt(this.width):this.width},showZeroTrigger(){return this.collapsible?this.mediaMatched&&!this.hideTrigger||parseInt(this.collapsedWidth)===0&&this.modelValue&&!this.hideTrigger:!1},showBottomTrigger(){return this.collapsible?!this.mediaMatched&&!this.hideTrigger:!1}},methods:{toggleCollapse(){let v=this.collapsible?!this.modelValue:!1;this.$emit("update:modelValue",v)},matchMedia(){if(!A)return;let v;window.matchMedia&&(v=window.matchMedia);let E=this.mediaMatched;this.mediaMatched=v(`(max-width: ${Dt[this.breakpoint]})`).matches,this.mediaMatched!==E&&this.$emit("update:modelValue",this.mediaMatched)},onWindowResize(){this.matchMedia()}},watch:{modelValue(v){this.$emit("on-collapse",v)}},mounted(){this.defaultCollapsed&&this.$emit("update:modelValue",this.defaultCollapsed),this.breakpoint!==void 0&&(R(window,"resize",this.onWindowResize),this.matchMedia())},beforeUnmount(){this.breakpoint!==void 0&&L(window,"resize",this.onWindowResize)}},KD=[c.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-menu"},null,-1)];function fN(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses),style:c.normalizeStyle(N.wrapStyles)},[c.withDirectives(c.createElementVNode("span",{onClick:E[0]||(E[0]=(...ee)=>N.toggleCollapse&&N.toggleCollapse(...ee)),class:c.normalizeClass(N.zeroWidthTriggerClasses)},KD,2),[[c.vShow,N.showZeroTrigger]]),c.createElementVNode("div",{class:c.normalizeClass(N.childClasses)},[c.renderSlot(v.$slots,"default")],2),c.renderSlot(v.$slots,"trigger",{},()=>[c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass(N.triggerClasses),onClick:E[1]||(E[1]=(...ee)=>N.toggleCollapse&&N.toggleCollapse(...ee)),style:c.normalizeStyle({width:N.siderWidth+"px"})},[c.createElementVNode("i",{class:c.normalizeClass(N.triggerIconClasses)},null,2)],6),[[c.vShow,N.showBottomTrigger]])])],6)}var rT=$(hN,[["render",fN]]);const _u="ivu-skeleton-item",VS={name:"SkeletonItem",components:{Icon:oe},inject:{SkeletonInstance:{default:null}},props:{animated:{type:Boolean,default:!1},type:{validator(v){return re(v,["circle","square","rect","image"])},default:"rect"},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},width:{type:[String,Number]},height:{type:[String,Number]},block:{type:Boolean,default:!1},imgSrc:{type:String}},data(){return{prefixCls:_u}},computed:{classes(){return[_u,_u+"-"+this.type,_u+"-"+this.type+"-"+this.size,{[_u+"-animated"]:this.animated||!!this.SkeletonInstance&&this.SkeletonInstance.animated,[_u+"-inline"]:!this.block,[_u+"-with-image"]:this.showImage,[_u+"-round"]:!!this.SkeletonInstance&&this.SkeletonInstance.round}]},styles(){const v={};return["rect","image"].includes(this.type)&&(this.width&&(v.width=typeof this.width=="number"?`${this.width}px`:this.width),this.height&&(v.height=typeof this.height=="number"?`${this.height}px`:this.height),this.showImage&&(v.background=`no-repeat url(${this.imgSrc}) center center`,v.backgroundSize="contain")),v},showIcon(){return this.type==="image"&&!this.imgSrc},showImage(){return this.type==="image"&&!!this.imgSrc},iconSize(){let v=16;return this.size==="large"&&(v=32),this.size==="small"&&(v=10),v}}};function zS(v,E,P,G,H,N){const ee=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(N.styles)},[N.showIcon?(c.openBlock(),c.createBlock(ee,{key:0,class:c.normalizeClass(H.prefixCls+"-image-icon"),type:"ios-image",size:N.iconSize},null,8,["class","size"])):c.createCommentVNode("",!0)],6)}var zv=$(VS,[["render",zS]]);const ch="ivu-skeleton",oT={name:"Skeleton",components:{SkeletonItem:zv,Row:pc,Col:Sa},provide(){return{SkeletonInstance:this}},props:{animated:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},paragraph:{validator(v){return typeof v=="number"?v>=1:typeof v.rows=="number"&&v.rows>=1},type:[Number,Object],default:3},title:{validator(v){return typeof v=="object"&&v.width?["number","string"].includes(typeof v.width):!0},type:[Boolean,Object],default:!0},avatar:{validator(v){if(typeof v=="object"){if(v.type)return re(v.type,["circle","square"]);if(v.size)return re(v.size,["small","large","default"])}return!0},type:[Boolean,Object],default:!1}},data(){return{prefixCls:ch}},computed:{classes(){return[ch,{[ch+"-with-title"]:this.showTitle,[ch+"-with-avatar"]:this.showAvatar}]},rows(){return typeof this.paragraph=="number"?this.paragraph:this.paragraph.rows},rowsCount(){return this.rows+Number(this.showTitle)},showTitle(){return!!this.title},titleWidth(){return typeof this.title=="object"&&this.title.width?typeof this.title.width=="string"?this.title.width:`${this.title.width}px`:""},showAvatar(){return!!this.avatar},avatarType(){return typeof this.avatar=="object"&&this.avatar.type?this.avatar.type:"circle"},avatarSize(){return typeof this.avatar=="object"&&this.avatar.size?this.avatar.size:!this.$VIEWUI||this.$VIEWUI.size===""?"default":this.$VIEWUI.size}},methods:{rowClasses(v){return[ch+"-item-inner",{[ch+"-item-round"]:this.round,[ch+"-item-title"]:this.showTitle&&v===1}]},rowWidth(v){if(this.showTitle&&v===1)return this.titleWidth||"38%";if(typeof this.paragraph=="object"){if(typeof this.paragraph.width=="string")return this.paragraph.width;if(typeof this.paragraph.width=="number")return`${this.paragraph.width}px`;const E=v-1-Number(this.showTitle);if(Array.isArray(this.paragraph.width)&&this.paragraph.width[E])return typeof this.paragraph.width[E]=="number"?`${this.paragraph.width[E]}px`:this.paragraph.width[E]}return v===this.rowsCount?"62%":"100%"}}};function iT(v,E,P,G,H,N){const ee=c.resolveComponent("SkeletonItem"),le=c.resolveComponent("Col"),Ce=c.resolveComponent("Row");return P.loading?(c.openBlock(),c.createElementBlock("div",c.mergeProps({key:0},v.$attrs,{class:N.classes}),[P.loading?c.renderSlot(v.$slots,"template",{key:0},()=>[c.createVNode(Ce,null,{default:c.withCtx(()=>[N.showAvatar?(c.openBlock(),c.createBlock(le,{key:0,flex:"0"},{default:c.withCtx(()=>[c.createVNode(ee,{type:N.avatarType,size:N.avatarSize,animated:P.animated,class:c.normalizeClass(H.prefixCls+"-item-avatar")},null,8,["type","size","animated","class"])]),_:1})):c.createCommentVNode("",!0),c.createVNode(le,{flex:"1"},{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.rowsCount,pe=>(c.openBlock(),c.createBlock(ee,{key:pe,class:c.normalizeClass(N.rowClasses(pe)),animated:P.animated,width:N.rowWidth(pe),block:""},null,8,["class","animated","width"]))),128))]),_:1})]),_:1})]):c.createCommentVNode("",!0)],16)):c.renderSlot(v.$slots,"default",c.normalizeProps(c.mergeProps({key:1},v.$attrs)))}var Am=$(oT,[["render",iT]]),aT={name:"SliderMarker",props:{mark:{type:[String,Object]}},render(){let v=typeof this.mark=="string"?this.mark:[this.mark.label];return c.h("div",{class:"ivu-slider-marks-item",style:this.mark.style||{}},v)}};const cd="ivu-slider",sT={name:"Slider",mixins:[Mo],emits:["update:modelValue","on-input","on-change"],components:{InputNumber:Ly,Tooltip:bn,SliderMarker:aT},inject:{ModalInstance:{default:null},DrawerInstance:{default:null}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},inputSize:{type:String,default:"default",validator(v){return re(v,["small","large","default"])}},showStops:{type:Boolean,default:!1},tipFormat:{type:Function,default(v){return v}},showTip:{type:String,default:"hover",validator(v){return re(v,["hover","always","never"])}},name:{type:String},activeChange:{type:Boolean,default:!0},marks:{type:Object}},data(){let v=this.checkLimits(Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]);return this.range&&this.modelValue===null&&(v=[0,0]),{prefixCls:cd,currentValue:v,dragging:!1,pointerDown:"",startX:0,currentX:0,startPos:0,oldValue:[...v],valueIndex:{min:0,max:1},sliderWidth:0,isValueNull:!1,id:mt(6)}},watch:{modelValue(v){v===null&&(this.isValueNull=!0),v=this.checkLimits(Array.isArray(v)?v:[v]),!this.dragging&&(v[0]!==this.currentValue[0]||v[1]!==this.currentValue[1])&&(this.isValueNull&&this.range?this.currentValue=[0,0]:this.currentValue=v)},exportValue(v){c.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()});const E=this.range?v:v[0];this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",E),this.$emit("on-input",E)}},computed:{classes(){return[`${cd}`,{[`${cd}-input`]:this.showInput&&!this.range,[`${cd}-range`]:this.range,[`${cd}-disabled`]:this.itemDisabled}]},minButtonClasses(){return[`${cd}-button`,{[`${cd}-button-dragging`]:this.pointerDown==="min"}]},maxButtonClasses(){return[`${cd}-button`,{[`${cd}-button-dragging`]:this.pointerDown==="max"}]},exportValue(){const v=(String(this.step).split(".")[1]||"").length;return this.currentValue.map(E=>Number(E.toFixed(v)))},minPosition(){return(this.currentValue[0]-this.min)/this.valueRange*100},maxPosition:function(){return(this.currentValue[1]-this.min)/this.valueRange*100},barStyle(){const v={width:(this.currentValue[0]-this.min)/this.valueRange*100+"%"};return this.range&&(v.left=(this.currentValue[0]-this.min)/this.valueRange*100+"%",v.width=(this.currentValue[1]-this.currentValue[0])/this.valueRange*100+"%"),v},stops(){let v=this.valueRange/this.step,E=[],P=100*this.step/this.valueRange;for(let G=1;G<v;G++)E.push(G*P);return E},markList(){return this.marks?Object.keys(this.marks).map(parseFloat).sort((v,E)=>v-E).filter(v=>v<=this.max&&v>=this.min).map(v=>({point:v,position:(v-this.min)*100/(this.max-this.min),mark:this.marks[v]})):[]},tipDisabled(){return this.tipFormat(this.currentValue[0])===null||this.showTip==="never"},valueRange(){return this.max-this.min},firstPosition(){return this.currentValue[0]},secondPosition(){return this.currentValue[1]}},methods:{getPointerX(v){return v.type.indexOf("touch")!==-1?v.touches[0].clientX:v.clientX},checkLimits([v,E]){return v=Math.max(this.min,v),v=Math.min(this.max,v),E=Math.max(this.min,v,E),E=Math.min(this.max,E),[v,E]},getCurrentValue(v,E){if(this.itemDisabled)return;const P=this.valueIndex[E];if(typeof P<"u")return this.currentValue[P]},onKeyLeft(v,E){const P=this.getCurrentValue(v,E);Number.isFinite(P)&&this.changeButtonPosition(P-this.step,E)},onKeyRight(v,E){const P=this.getCurrentValue(v,E);Number.isFinite(P)&&this.changeButtonPosition(P+this.step,E)},onPointerDown(v,E){this.itemDisabled||(v.preventDefault(),this.pointerDown=E,this.onPointerDragStart(v),R(window,"mousemove",this.onPointerDrag),R(window,"touchmove",this.onPointerDrag),R(window,"mouseup",this.onPointerDragEnd),R(window,"touchend",this.onPointerDragEnd))},onPointerDragStart(v){this.dragging=!1,this.startX=this.getPointerX(v),this.startPos=this[`${this.pointerDown}Position`]*this.valueRange/100+this.min},onPointerDrag(v){this.dragging=!0,this.$refs[`${this.pointerDown}Tooltip`].visible=!0,this.currentX=this.getPointerX(v);const E=(this.currentX-this.startX)/this.sliderWidth*this.valueRange;this.changeButtonPosition(this.startPos+E)},onPointerDragEnd(){this.dragging&&(this.dragging=!1,this.$refs[`${this.pointerDown}Tooltip`].visible=!1,this.emitChange()),this.pointerDown="",L(window,"mousemove",this.onPointerDrag),L(window,"touchmove",this.onPointerDrag),L(window,"mouseup",this.onPointerDragEnd),L(window,"touchend",this.onPointerDragEnd)},changeButtonPosition(v,E){const P=E||this.pointerDown,G=P==="min"?0:1;P==="min"?v=this.checkLimits([v,this.max])[0]:v=this.checkLimits([this.min,v])[1];const H=this.handleDecimal(v,this.step),N=this.currentValue;N[G]=v-H,this.range&&(P==="min"&&N[0]>N[1]&&(N[1]=N[0]),P==="max"&&N[0]>N[1]&&(N[0]=N[1])),this.currentValue=[...N],this.dragging||this.currentValue[G]!==this.oldValue[G]&&(this.emitChange(),this.oldValue[G]=this.currentValue[G])},handleDecimal(v,E){if(E<1){let P=E.toString(),G=1,H;try{H=P.split(".")[1].length}catch{H=0}return G=Math.pow(10,H),v*G%(E*G)/G}else return v%E},emitChange(){const v=this.range?this.exportValue:this.exportValue[0];this.$emit("on-change",v),this.handleFormItemChange("change",v)},sliderClick(v){if(this.itemDisabled)return;const E=this.getPointerX(v),P=this.$refs.slider.getBoundingClientRect().left;let G=(E-P)/this.sliderWidth*this.valueRange+this.min,H=G/this.valueRange*100;!this.range||H<=this.minPosition?this.changeButtonPosition(G,"min"):H>=this.maxPosition?this.changeButtonPosition(G,"max"):this.changeButtonPosition(G,G-this.firstPosition<=this.secondPosition-G?"min":"max")},handleInputChange(v){this.currentValue=[v===0?0:v||this.min,this.currentValue[1]],this.emitChange()},handleFocus(v){this.$refs[`${v}Tooltip`].handleShowPopper()},handleBlur(v){this.$refs[`${v}Tooltip`].handleClosePopper()},handleSetSliderWidth(){this.sliderWidth=parseInt(Ee(this.$refs.slider,"width"),10)},handleOnVisibleChange(v){v&&this.showTip==="always"&&(this.$refs.minTooltip.doDestroy(),this.range&&this.$refs.maxTooltip.doDestroy(),c.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()}))},addSlider(v){const E=this[v];!E||(E.sliderList||(E.sliderList=[]),E.sliderList.push({id:this.id,slider:this}))},removeSlider(v){const E=this[v];if(!E||!E.sliderList)return;const P=E.sliderList.findIndex(G=>G.id===this.id);E.sliderList.splice(P,1)}},mounted(){this.addSlider("ModalInstance"),this.addSlider("DrawerInstance"),this.observer=im(),this.observer.listenTo(this.$refs.slider,this.handleSetSliderWidth)},beforeUnmount(){this.removeSlider("ModalInstance"),this.removeSlider("DrawerInstance"),this.observer.removeListener(this.$refs.slider,this.handleSetSliderWidth)}},lT=["name","value"],l1={class:"ivu-slider-marks"};function US(v,E,P,G,H,N){const ee=c.resolveComponent("Input-number"),le=c.resolveComponent("SliderMarker"),Ce=c.resolveComponent("Tooltip");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[!P.range&&P.showInput?(c.openBlock(),c.createBlock(ee,{key:0,min:P.min,size:P.inputSize,max:P.max,step:P.step,modelValue:N.exportValue[0],disabled:v.itemDisabled,"active-change":P.activeChange,onOnChange:N.handleInputChange},null,8,["min","size","max","step","modelValue","disabled","active-change","onOnChange"])):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-wrap"]),ref:"slider",onClick:E[19]||(E[19]=c.withModifiers((...pe)=>N.sliderClick&&N.sliderClick(...pe),["self"]))},[c.createElementVNode("input",{type:"hidden",name:P.name,value:N.exportValue},null,8,lT),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-bar"]),style:c.normalizeStyle(N.barStyle),onClick:E[0]||(E[0]=c.withModifiers((...pe)=>N.sliderClick&&N.sliderClick(...pe),["self"]))},null,6),P.showStops?(c.openBlock(!0),c.createElementBlock(c.Fragment,{key:0},c.renderList(N.stops,pe=>(c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls+"-stop"]),key:pe,style:c.normalizeStyle({left:pe+"%"}),onClick:E[1]||(E[1]=c.withModifiers((...we)=>N.sliderClick&&N.sliderClick(...we),["self"]))},null,6))),128)):c.createCommentVNode("",!0),N.markList.length>0?(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.markList,(pe,we)=>(c.openBlock(),c.createElementBlock("div",{key:we,class:c.normalizeClass([H.prefixCls+"-stop"]),style:c.normalizeStyle({left:pe.position+"%"}),onClick:E[2]||(E[2]=c.withModifiers((...We)=>N.sliderClick&&N.sliderClick(...We),["self"]))},null,6))),128)),c.createElementVNode("div",l1,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.markList,(pe,we)=>(c.openBlock(),c.createBlock(le,{key:we,mark:pe.mark,style:c.normalizeStyle({left:pe.position+"%"}),onClick:N.sliderClick},null,8,["mark","style","onClick"]))),128))])],64)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-button-wrap"]),style:c.normalizeStyle({left:N.minPosition+"%"}),onTouchstart:E[9]||(E[9]=pe=>N.onPointerDown(pe,"min")),onMousedown:E[10]||(E[10]=pe=>N.onPointerDown(pe,"min"))},[c.createVNode(Ce,{controlled:H.pointerDown==="min",placement:"top",content:P.tipFormat(N.exportValue[0]),disabled:N.tipDisabled,always:P.showTip==="always",ref:"minTooltip"},{default:c.withCtx(()=>[c.createElementVNode("div",{class:c.normalizeClass(N.minButtonClasses),tabindex:"0",onFocus:E[3]||(E[3]=pe=>N.handleFocus("min")),onBlur:E[4]||(E[4]=pe=>N.handleBlur("min")),onKeydown:[E[5]||(E[5]=c.withKeys(pe=>N.onKeyLeft(pe,"min"),["left"])),E[6]||(E[6]=c.withKeys(pe=>N.onKeyLeft(pe,"min"),["down"])),E[7]||(E[7]=c.withKeys(pe=>N.onKeyRight(pe,"min"),["right"])),E[8]||(E[8]=c.withKeys(pe=>N.onKeyRight(pe,"min"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38),P.range?(c.openBlock(),c.createElementBlock("div",{key:2,class:c.normalizeClass([H.prefixCls+"-button-wrap"]),style:c.normalizeStyle({left:N.maxPosition+"%"}),onTouchstart:E[17]||(E[17]=pe=>N.onPointerDown(pe,"max")),onMousedown:E[18]||(E[18]=pe=>N.onPointerDown(pe,"max"))},[c.createVNode(Ce,{controlled:H.pointerDown==="max",placement:"top",content:P.tipFormat(N.exportValue[1]),disabled:N.tipDisabled,always:P.showTip==="always",ref:"maxTooltip"},{default:c.withCtx(()=>[c.createElementVNode("div",{class:c.normalizeClass(N.maxButtonClasses),tabindex:"0",onFocus:E[11]||(E[11]=pe=>N.handleFocus("max")),onBlur:E[12]||(E[12]=pe=>N.handleBlur("max")),onKeydown:[E[13]||(E[13]=c.withKeys(pe=>N.onKeyLeft(pe,"max"),["left"])),E[14]||(E[14]=c.withKeys(pe=>N.onKeyLeft(pe,"max"),["down"])),E[15]||(E[15]=c.withKeys(pe=>N.onKeyRight(pe,"max"),["right"])),E[16]||(E[16]=c.withKeys(pe=>N.onKeyRight(pe,"max"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38)):c.createCommentVNode("",!0)],2)],2)}var c1=$(sT,[["render",US]]);const HS={small:8,default:16,large:24},cT={name:"Space",props:{size:{type:[String,Number,Array],validator(v){const E=["small","large","default"];return typeof v=="string"?re(v,E):Array.isArray(v)?v.length>0&&v.every(P=>typeof P=="number"||re(P,E)):!0},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||!v.$VIEWUI.space||v.$VIEWUI.space.size===""?"small":v.$VIEWUI.space.size}},direction:{type:String,validator(v){return re(v,["horizontal","vertical"])},default:"horizontal"},align:{type:String,validator(v){return re(v,["start","end","center","baseline","stretch"])}},wrap:{type:Boolean,default:!1},split:{type:Boolean,default:!1},type:{type:String,validator(v){return re(v,["inline-flex","flex"])},default:"inline-flex"}},computed:{mergedAlign(){if(!this.align){if(this.direction==="horizontal")return"center";if(this.type==="flex")return"stretch"}return this.align},classes(){return["ivu-space",`ivu-space-${this.direction}`,{"ivu-space-flex":this.type==="flex","ivu-space-wrap":this.wrap,[`ivu-space-${this.mergedAlign}`]:this.mergedAlign}]},styles(){const v={};return["number","string"].includes(typeof this.size)&&(v.gap=this.getSize(this.size)),Array.isArray(this.size)&&(this.size.length===1?v.columnGap=this.getSize(this.size[0]):this.size.length>1&&(v.columnGap=this.getSize(this.size[0]),v.rowGap=this.getSize(this.size[1]))),v}},methods:{getSize(v){return`${typeof v=="string"?HS[v]:v||0}px`},filterEmpty(v=[]){const E=[];return v.forEach(P=>{Array.isArray(P)?E.push(...P):P.type===c.Fragment?E.push(...P.children):E.push(P)}),E.filter(P=>!this.isEmptyElement(P))},isEmptyElement(v){return v&&(v.type===c.Comment||v.type===c.Fragment&&v.children.length===0||v.type===c.Text&&v.children.trim()==="")}},render(){const v=this.filterEmpty(this.$slots.default?this.$slots.default():[]),E=v.length;if(E===0)return null;let P=null;return this.split&&!this.$slots.split?P=c.h(Ac,{type:"vertical"}):this.$slots.split&&(P=this.$slots.split()),c.h("div",{class:this.classes,style:this.styles},v.map((G,H)=>{const N=c.h("div",{class:"ivu-space-item"},[G]);return P&&H+1<E?[N,c.h("div",{class:"ivu-space-split"},[P])]:N}))}},XD={name:"Trigger",props:{mode:String},data(){return{prefix:"ivu-split-trigger",initOffset:0}},computed:{isVertical(){return this.mode==="vertical"},classes(){return[this.prefix,this.isVertical?`${this.prefix}-vertical`:`${this.prefix}-horizontal`]},barConClasses(){return[`${this.prefix}-bar-con`,this.isVertical?"vertical":"horizontal"]}}};function JD(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.createElementVNode("div",{class:c.normalizeClass(N.barConClasses)},[E[0]||(c.setBlockTracking(-1),E[0]=(c.openBlock(),c.createElementBlock(c.Fragment,null,c.renderList(8,ee=>c.createElementVNode("i",{class:c.normalizeClass(`${H.prefix}-bar`),key:`trigger-${ee}`},null,2)),64)),c.setBlockTracking(1),E[0])],2)],2)}var QD=$(XD,[["render",JD]]);const eP={name:"Split",components:{Trigger:QD},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],props:{modelValue:{type:[Number,String],default:.5},mode:{validator(v){return re(v,["horizontal","vertical"])},default:"horizontal"},min:{type:[Number,String],default:"40px"},max:{type:[Number,String],default:"40px"}},data(){return{prefix:"ivu-split",offset:0,oldOffset:0,isMoving:!1,computedMin:0,computedMax:0,currentValue:.5}},computed:{wrapperClasses(){return[`${this.prefix}-wrapper`,this.isMoving?"no-select":""]},paneClasses(){return[`${this.prefix}-pane`,{[`${this.prefix}-pane-moving`]:this.isMoving}]},isHorizontal(){return this.mode==="horizontal"},anotherOffset(){return 100-this.offset},valueIsPx(){return typeof this.modelValue=="string"},offsetSize(){return this.isHorizontal?"offsetWidth":"offsetHeight"}},methods:{px2percent(v,E){return parseFloat(v)/parseFloat(E)},getComputedThresholdValue(v){let E=this.$refs.outerWrapper[this.offsetSize];return this.valueIsPx?typeof this[v]=="string"?this[v]:E*this[v]:typeof this[v]=="string"?this.px2percent(this[v],E):this[v]},getMin(v,E){return this.valueIsPx?`${Math.min(parseFloat(v),parseFloat(E))}px`:Math.min(v,E)},getMax(v,E){return this.valueIsPx?`${Math.max(parseFloat(v),parseFloat(E))}px`:Math.max(v,E)},getAnotherOffset(v){let E=0;return this.valueIsPx?E=`${this.$refs.outerWrapper[this.offsetSize]-parseFloat(v)}px`:E=1-v,E},handleMove(v){let E=(this.isHorizontal?v.pageX:v.pageY)-this.initOffset,P=this.$refs.outerWrapper[this.offsetSize],G=this.valueIsPx?`${parseFloat(this.oldOffset)+E}px`:this.px2percent(P*this.oldOffset+E,P),H=this.getAnotherOffset(G);parseFloat(G)<=parseFloat(this.computedMin)&&(G=this.getMax(G,this.computedMin)),parseFloat(H)<=parseFloat(this.computedMax)&&(G=this.getAnotherOffset(this.getMax(H,this.computedMax))),v.atMin=this.modelValue===this.computedMin,v.atMax=this.valueIsPx?this.getAnotherOffset(this.modelValue)===this.computedMax:this.getAnotherOffset(this.modelValue).toFixed(5)===this.computedMax.toFixed(5),this.$emit("update:modelValue",G),this.$emit("on-moving",v)},handleUp(){this.isMoving=!1,L(document,"mousemove",this.handleMove),L(document,"mouseup",this.handleUp),this.$emit("on-move-end")},handleMousedown(v){this.initOffset=this.isHorizontal?v.pageX:v.pageY,this.oldOffset=this.modelValue,this.isMoving=!0,R(document,"mousemove",this.handleMove),R(document,"mouseup",this.handleUp),this.$emit("on-move-start")},computeOffset(){c.nextTick(()=>{this.computedMin=this.getComputedThresholdValue("min"),this.computedMax=this.getComputedThresholdValue("max"),this.offset=(this.valueIsPx?this.px2percent(this.modelValue,this.$refs.outerWrapper[this.offsetSize]):this.modelValue)*1e4/100})}},watch:{modelValue(v){v!==this.currentValue&&(this.currentValue=v,this.computeOffset())}},mounted(){c.nextTick(()=>{this.computeOffset()}),R(window,"resize",this.computeOffset)},beforeUnmount(){L(window,"resize",this.computeOffset)}};function Uv(v,E,P,G,H,N){const ee=c.resolveComponent("trigger");return c.openBlock(),c.createElementBlock("div",{ref:"outerWrapper",class:c.normalizeClass(N.wrapperClasses)},[N.isHorizontal?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(`${H.prefix}-horizontal`)},[c.createElementVNode("div",{style:c.normalizeStyle({right:`${N.anotherOffset}%`}),class:c.normalizeClass(["left-pane",N.paneClasses])},[c.renderSlot(v.$slots,"left")],6),c.createElementVNode("div",{class:c.normalizeClass(`${H.prefix}-trigger-con`),style:c.normalizeStyle({left:`${H.offset}%`}),onMousedown:E[0]||(E[0]=(...le)=>N.handleMousedown&&N.handleMousedown(...le))},[c.renderSlot(v.$slots,"trigger",{},()=>[c.createVNode(ee,{mode:"vertical"})])],38),c.createElementVNode("div",{style:c.normalizeStyle({left:`${H.offset}%`}),class:c.normalizeClass(["right-pane",N.paneClasses])},[c.renderSlot(v.$slots,"right")],6)],2)):(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass(`${H.prefix}-vertical`)},[c.createElementVNode("div",{style:c.normalizeStyle({bottom:`${N.anotherOffset}%`}),class:c.normalizeClass(["top-pane",N.paneClasses])},[c.renderSlot(v.$slots,"top")],6),c.createElementVNode("div",{class:c.normalizeClass(`${H.prefix}-trigger-con`),style:c.normalizeStyle({top:`${H.offset}%`}),onMousedown:E[1]||(E[1]=(...le)=>N.handleMousedown&&N.handleMousedown(...le))},[c.renderSlot(v.$slots,"trigger",{},()=>[c.createVNode(ee,{mode:"horizontal"})])],38),c.createElementVNode("div",{style:c.normalizeStyle({top:`${H.offset}%`}),class:c.normalizeClass(["bottom-pane",N.paneClasses])},[c.renderSlot(v.$slots,"bottom")],6)],2))],2)}var GS=$(eP,[["render",Uv]]);const hp="ivu-steps",fp="ivu-icon",uT={name:"Step",inject:["StepsInstance"],props:{status:{validator(v){return re(v,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:hp,id:mt(6)}},computed:{wrapClasses(){return[`${hp}-item`,`${hp}-status-${this.currentStatus}`,{[`${hp}-custom`]:!!this.icon||!!this.$slots.icon,[`${hp}-next-error`]:this.nextError}]},iconClasses(){let v="";return this.icon?v=this.icon:this.currentStatus==="finish"?v="ios-checkmark":this.currentStatus==="error"&&(v="ios-close"),[`${hp}-icon`,`${fp}`,{[`${fp}-${v}`]:v!==""}]},stepNumber(){return this.StepsInstance.steps.findIndex(v=>v.id===this.id)+1},total(){return this.StepsInstance.direction==="horizontal"?this.StepsInstance.steps.length:1},currentStatus(){let v="";if(this.status)v=this.status;else{const E=this.StepsInstance,P=E.current,G=E.steps.findIndex(H=>H.id===this.id);G===P?E.status!=="error"?v="process":v="error":G<P?v="finish":v="wait"}return v},nextError(){let v=!1;const E=this.StepsInstance,P=E.steps.findIndex(G=>G.id===this.id);return P+1<E.steps.length&&E.steps[P+1].currentStatus==="error"&&(v=!0),v}},beforeMount(){this.StepsInstance.addStep(this.id,this)},beforeUnmount(){this.StepsInstance.removeStep(this.id)}},dT=[c.createElementVNode("i",null,null,-1)],hT={key:0},WS={key:1,class:"ivu-steps-icon"};function fT(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses)},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-tail"])},dT,2),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-head"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-head-inner"])},[!P.icon&&!v.$slots.icon&&N.currentStatus!=="finish"&&N.currentStatus!=="error"?(c.openBlock(),c.createElementBlock("span",hT,c.toDisplayString(N.stepNumber),1)):v.$slots.icon?(c.openBlock(),c.createElementBlock("span",WS,[c.renderSlot(v.$slots,"icon")])):(c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass(N.iconClasses)},null,2))],2)],2),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-main"])},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-title"])},[c.renderSlot(v.$slots,"title",{},()=>[c.createTextVNode(c.toDisplayString(P.title),1)])],2),P.content||v.$slots.content?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-content"])},[c.renderSlot(v.$slots,"content",{},()=>[c.createTextVNode(c.toDisplayString(P.content),1)])],2)):c.createCommentVNode("",!0)],2)],2)}var pT=$(uT,[["render",fT]]);const YS="ivu-steps",tP={name:"Steps",provide(){return{StepsInstance:this}},props:{current:{type:Number,default:0},status:{validator(v){return re(v,["wait","process","finish","error"])},default:"process"},size:{validator(v){return re(v,["small"])}},direction:{validator(v){return re(v,["horizontal","vertical"])},default:"horizontal"}},data(){return{steps:[]}},computed:{classes(){return[`${YS}`,`${YS}-${this.direction}`,{[`${YS}-${this.size}`]:!!this.size}]},children(){return this.steps.map(v=>v.step)}},methods:{addStep(v,E){this.steps.push({id:v,step:E})},removeStep(v){const E=this.steps.findIndex(P=>P.id===v);this.steps.splice(E,1)}}};function nP(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes)},[c.renderSlot(v.$slots,"default")],2)}var jS=$(tP,[["render",nP]]);const Kh="ivu-menu",Mm={name:"Submenu",mixins:[Hs,zt],components:{Icon:oe,Drop:Lr,CollapseTransition:or},provide(){return{SubmenuInstance:this}},props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{prefixCls:Kh,active:!1,opened:!1,dropWidth:parseFloat(Ee(this.$el,"width")),id:mt(6),childSubmenuList:[]}},computed:{classes(){return[`${Kh}-submenu`,{[`${Kh}-item-active`]:this.active&&!this.hasParentSubmenu,[`${Kh}-opened`]:this.opened,[`${Kh}-submenu-disabled`]:this.disabled,[`${Kh}-submenu-has-parent-submenu`]:this.hasParentSubmenu,[`${Kh}-child-item-active`]:this.active}]},accordion(){return this.menu.accordion},dropStyle(){let v={};return this.dropWidth&&(v.minWidth=`${this.dropWidth}px`),v},titleStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}},arrowType(){const v=this.globalConfig;let E="ios-arrow-down";return v&&(v.menu.customArrow?E="":v.menu.arrow&&(E=v.menu.arrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.menu.customArrow&&(E=v.menu.customArrow),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.menu.arrowSize&&(E=v.menu.arrowSize),E}},methods:{handleMouseenter(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!0},250))},handleMouseleave(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!1},150))},handleClick(){if(this.disabled||this.mode==="horizontal")return;const v=this.opened;this.opened=!v,this.menu.updateOpenKeys(this.name)},addSubmenu(){const v=this.MenuInstance;v.submenuList||(v.submenuList=[]),v.submenuList.push({id:this.id,submenu:this});const E=Tt(this,"Submenu");E&&(E.childSubmenuList||(E.childSubmenuList=[]),E.childSubmenuList.push({id:this.id,submenu:this}))},removeSubmenu(){const v=this.MenuInstance;if(v.submenuList&&v.submenuList.length){const P=v.submenuList.findIndex(G=>G.id===this.id);v.submenuList.splice(P,1)}const E=Tt(this,"Submenu");if(E&&E.childSubmenuList&&E.childSubmenuList.length){const P=E.childSubmenuList.findIndex(G=>G.id===this.id);E.childSubmenuList.splice(P,1)}},handleMenuItemSelect(v){this.mode==="horizontal"&&(this.opened=!1),this.MenuInstance.handleMenuItemSelect(v)},handleUpdateActiveName(v){Tt(this,"Submenu")&&this.SubmenuInstance.handleUpdateActiveName(v),this.childSubmenuList&&this.childSubmenuList.length&&this.childSubmenuList.map(E=>E.submenu).forEach(E=>{E.active=!1}),this.active=v}},watch:{mode(v){v==="horizontal"&&this.$refs.drop.update()},opened(v){this.mode!=="vertical"&&(v?(this.dropWidth=parseFloat(Ee(this.$el,"width")),this.$refs.drop.update()):this.$refs.drop.destroy())}},mounted(){this.addSubmenu()},beforeUnmount(){this.removeSubmenu()}};function ZS(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("collapse-transition"),Ce=c.resolveComponent("Drop");return c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.classes),onMouseenter:E[1]||(E[1]=(...pe)=>N.handleMouseenter&&N.handleMouseenter(...pe)),onMouseleave:E[2]||(E[2]=(...pe)=>N.handleMouseleave&&N.handleMouseleave(...pe))},[c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-submenu-title"]),ref:"reference",onClick:E[0]||(E[0]=c.withModifiers((...pe)=>N.handleClick&&N.handleClick(...pe),["stop"])),style:c.normalizeStyle(N.titleStyle)},[c.renderSlot(v.$slots,"title"),c.createVNode(ee,{type:N.arrowType,custom:N.customArrowType,size:N.arrowSize,class:c.normalizeClass([H.prefixCls+"-submenu-title-icon"])},null,8,["type","custom","size","class"])],6),v.mode==="vertical"?(c.openBlock(),c.createBlock(le,{key:0,ready:v.menu.ready},{default:c.withCtx(()=>[c.withDirectives(c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls])},[c.renderSlot(v.$slots,"default")],2),[[c.vShow,H.opened]])]),_:3},8,["ready"])):c.createCommentVNode("",!0),v.mode==="horizontal"?(c.openBlock(),c.createBlock(Ce,{key:1,ref:"drop",visible:H.opened,placement:"bottom","transition-name":"slide-up",styles:N.dropStyle},{default:c.withCtx(()=>[c.createElementVNode("ul",{class:c.normalizeClass([H.prefixCls+"-drop-list"])},[c.renderSlot(v.$slots,"default")],2)]),_:3},8,["visible","styles"])):c.createCommentVNode("",!0)],34)}var mT=$(Mm,[["render",ZS]]);const qS={name:"Submit",inject:["LoginInstance"],props:{},methods:{handleSubmit(){this.LoginInstance.handleSubmit()}},render(){const v=Object.assign({size:"large",type:"primary",long:!0},this.$attrs),E=c.h(Oi,x(S({},v),{onClick:this.handleSubmit}),this.$slots.default||(()=>"登录"));return c.h("div",{class:"ivu-login-submit"},[E])}},pp="ivu-switch",gT={name:"iSwitch",mixins:[Mo],emits:["update:modelValue","on-change"],props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator(v){return re(v,["large","small","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data(){return{currentValue:this.modelValue}},computed:{wrapClasses(){return[`${pp}`,{[`${pp}-checked`]:this.currentValue===this.trueValue,[`${pp}-disabled`]:this.itemDisabled,[`${pp}-${this.size}`]:!!this.size,[`${pp}-loading`]:this.loading}]},wrapStyles(){let v={};return this.trueColor&&this.currentValue===this.trueValue?(v["border-color"]=this.trueColor,v["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(v["border-color"]=this.falseColor,v["background-color"]=this.falseColor),v},innerClasses(){return`${pp}-inner`}},methods:{handleToggle(){const v=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=v,this.$emit("update:modelValue",v),this.$emit("on-change",v),this.handleFormItemChange("change",v)},toggle(v){if(v.preventDefault(),this.itemDisabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();const E=this.beforeChange();E&&E.then?E.then(()=>{this.handleToggle()}):this.handleToggle()}},watch:{modelValue(v){if(v!==this.trueValue&&v!==this.falseValue&&v!==null)throw"Value should be trueValue or falseValue.";this.currentValue=v}}},vT=["name","value"];function Nl(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("span",{tabindex:"0",class:c.normalizeClass(N.wrapClasses),style:c.normalizeStyle(N.wrapStyles),onClick:E[0]||(E[0]=(...ee)=>N.toggle&&N.toggle(...ee)),onKeydown:E[1]||(E[1]=c.withKeys((...ee)=>N.toggle&&N.toggle(...ee),["space"]))},[c.createElementVNode("input",{type:"hidden",name:P.name,value:H.currentValue},null,8,vT),c.createElementVNode("span",{class:c.normalizeClass(N.innerClasses)},[H.currentValue===P.trueValue?c.renderSlot(v.$slots,"open",{key:0}):c.createCommentVNode("",!0),H.currentValue===P.falseValue?c.renderSlot(v.$slots,"close",{key:1}):c.createCommentVNode("",!0)],2)],38)}var KS=$(gT,[["render",Nl]]),rP={name:"TableRenderHeader",props:{render:Function,column:Object,index:Number},render(){const v={column:this.column,index:this.index};return this.render(c.h,v)}},XS={methods:{alignCls(v,E={}){let P="";return E.cellClassName&&v.key&&E.cellClassName[v.key]&&(P=E.cellClassName[v.key]),[`${this.prefixCls}-column-${v.__id}`,{[`${P}`]:P,[`${v.className}`]:v.className,[`${this.prefixCls}-column-${v.align}`]:v.align,[`${this.prefixCls}-hidden`]:this.fixed==="left"&&v.fixed!=="left"||this.fixed==="right"&&v.fixed!=="right"||!this.fixed&&v.fixed&&(v.fixed==="left"||v.fixed==="right")}]},isPopperShow(v){return v.filters&&(!this.fixed&&!v.fixed||this.fixed==="left"&&v.fixed==="left"||this.fixed==="right"&&v.fixed==="right")},setCellWidth(v){let E="";return v.width?E=v.width:this.columnsWidth[v._index]&&(E=this.columnsWidth[v._index].width),E==="0"&&(E=""),E}}};const oP={name:"TableHead",mixins:[XS,vt],components:{CheckboxGroup:qs,Checkbox:Up,Poptip:NS,iButton:Oi,renderHeader:rP},props:{prefixCls:String,styleObject:Object,columns:Array,objData:Object,data:Array,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},columnRows:Array,fixedColumnRows:Array},data(){return{draggingColumn:null,dragging:!1,dragState:{}}},computed:{styles(){const v=Object.assign({},this.styleObject),E=parseInt(this.styleObject.width);return v.width=`${E}px`,v},isSelectAll(){let v=!0;this.data.length||(v=!1);let E=!0;for(let P in this.objData){const G=this.objData[P];if(!G._isChecked&&!G._isDisabled){v=!1;break}else G.children&&G.children.length&&(v=this.isChildrenSelected(G,v));G._isDisabled&&!G._isChecked?G.children&&G.children.length&&(E=this.isChildrenAllDisabledAndUnSelected(G,E)):E=!1}return E&&(v=!1),v},headRows(){return this.columnRows.length>1?this.fixed?this.fixedColumnRows:this.columnRows:[this.columns]},isSelectDisabled(){let v=!0;if(this.data.length)for(let E in this.objData){const P=this.objData[E];P._isDisabled?P.children&&P.children.length&&(v=this.isChildrenDisabled(P,v)):v=!1}return v}},methods:{cellClasses(v){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&v.fixed&&(v.fixed==="left"||v.fixed==="right"),[`${this.prefixCls}-cell-with-selection`]:v.type==="selection"}]},scrollBarCellClass(){let v=!1;for(let E in this.headRows)for(let P in this.headRows[E]){if(this.headRows[E][P].fixed==="right"){v=!0;break}if(v)break}return[{[`${this.prefixCls}-hidden`]:v}]},itemClasses(v,E){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:v._filterChecked[0]===E.value}]},itemAllClasses(v){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:!v._filterChecked.length}]},selectAll(){const v=!this.isSelectAll;this.$parent.selectAll(v)},handleSort(v,E){const P=this.columns.find(H=>H._index===v),G=P._index;P._sortType===E&&(E="normal"),this.$parent.handleSort(G,E)},handleSortByHead(v){const E=this.columns.find(P=>P._index===v);if(E.sortable){const P=E._sortType;P==="normal"?this.handleSort(v,"asc"):P==="asc"?this.handleSort(v,"desc"):this.handleSort(v,"normal")}},handleFilter(v){this.$parent.handleFilter(v)},handleSelect(v,E){this.$parent.handleFilterSelect(v,E)},handleReset(v){this.$parent.handleFilterReset(v)},handleFilterHide(v){this.$parent.handleFilterHide(v)},getColumn(v,E){if(this.columnRows.length>1){const P=this.headRows[v][E].__id;return this.columns.filter(G=>G.__id===P)[0]}else return this.headRows[v][E]},handleMouseDown(v,E){if(!this.$isServer&&A&&this.draggingColumn){this.dragging=!0;const P=this.$parent,G=P.$el.getBoundingClientRect().left,H=this.$el.querySelector(`th.ivu-table-column-${v.__id}`).getBoundingClientRect(),N=H.left-G+30;P.showResizeLine=!0,this.dragState={startMouseLeft:E.clientX,startLeft:H.right-G,startColumnLeft:H.left-G,tableLeft:G};const ee=P.$refs.resizeLine;ee.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const le=pe=>{const we=pe.clientX-this.dragState.startMouseLeft,We=this.dragState.startLeft+we;ee.style.left=Math.max(N,We)+"px"},Ce=()=>{if(this.dragging){const{startColumnLeft:pe,startLeft:we}=this.dragState,We=parseInt(ee.style.left,10)-pe,ut=P.allColumns.find(ct=>ct.__id===v.__id);ut&&(ut.width=We,v.width=We,P.handleResize()),P.$emit("on-column-width-resize",ut.width,we-pe,v,E),A&&(document.body.style.cursor=""),this.dragging=!1,this.draggingColumn=null,this.dragState={},P.showResizeLine=!1}!A||(document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",Ce),document.onselectstart=null,document.ondragstart=null)};if(!A)return;document.addEventListener("mousemove",le),document.addEventListener("mouseup",Ce)}},handleMouseMove(v,E){let P=E.target;for(;P&&P.tagName!=="TH";)P=P.parentNode;if(!(!v||!v.resizable)&&A&&!this.dragging){let G=P.getBoundingClientRect();const H=document.body.style;G.width>12&&G.right-E.pageX<8?(H.cursor="col-resize",this.draggingColumn=v):this.dragging||(H.cursor="",this.draggingColumn=null)}},handleMouseOut(){this.$isServer||A&&(document.body.style.cursor="")},isChildrenSelected(v,E){let P=E;return v.children&&v.children.length&&v.children.forEach(G=>{!G._isChecked&&!G._isDisabled?P=!1:G.children&&G.children.length&&(P=this.isChildrenSelected(G,P))}),P},isChildrenAllDisabledAndUnSelected(v,E){let P=E;return v.children&&v.children.length&&v.children.forEach(G=>{G._isDisabled&&!G._isChecked?G.children&&G.children.length&&(P=this.isChildrenAllDisabledAndUnSelected(G,P)):P=!1}),P},isChildrenDisabled(v,E){let P=E;return v.children&&v.children.length&&v.children.forEach(G=>{G._isDisabled?G.children&&G.children.length&&(P=this.isChildrenDisabled(G,P)):P=!1}),P}}},u1=["width"],mp=["width"],d1=["colspan","rowspan"],yT={key:0},h1=["onClick"],f1=["onClick"],JS=["onClick"],iP=["onMousedown","onMousemove"],aP=["rowspan"];function sP(v,E,P,G,H,N){const ee=c.resolveComponent("render-header"),le=c.resolveComponent("Checkbox"),Ce=c.resolveComponent("checkbox"),pe=c.resolveComponent("checkbox-group"),we=c.resolveComponent("i-button"),We=c.resolveComponent("Poptip");return c.openBlock(),c.createElementBlock("table",{cellspacing:"0",cellpadding:"0",border:"0",style:c.normalizeStyle(N.styles)},[c.createElementVNode("colgroup",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.columns,(ut,ct)=>(c.openBlock(),c.createElementBlock("col",{key:ct,width:v.setCellWidth(ut)},null,8,u1))),128)),v.$parent.showVerticalScrollBar?(c.openBlock(),c.createElementBlock("col",{key:0,width:v.$parent.scrollBarWidth},null,8,mp)):c.createCommentVNode("",!0)]),c.createElementVNode("thead",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.headRows,(ut,ct)=>(c.openBlock(),c.createElementBlock("tr",{key:ct},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ut,(ot,Oe)=>(c.openBlock(),c.createElementBlock("th",{key:Oe,colspan:ot.colSpan,rowspan:ot.rowSpan,class:c.normalizeClass(v.alignCls(ot))},[c.createElementVNode("div",{class:c.normalizeClass(N.cellClasses(ot))},[ot.type==="expand"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[ot.renderHeader?(c.openBlock(),c.createBlock(ee,{key:1,render:ot.renderHeader,column:ot,index:Oe},null,8,["render","column","index"])):(c.openBlock(),c.createElementBlock("span",yT,c.toDisplayString(ot.title||""),1))],64)):ot.type==="selection"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[ot.hideSelectAll?c.createCommentVNode("",!0):(c.openBlock(),c.createBlock(le,{key:0,"model-value":N.isSelectAll,disabled:N.isSelectDisabled,onOnChange:N.selectAll},null,8,["model-value","disabled","onOnChange"]))],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:2},[ot.renderHeader?(c.openBlock(),c.createBlock(ee,{key:1,render:ot.renderHeader,column:ot,index:Oe},null,8,["render","column","index"])):(c.openBlock(),c.createElementBlock("span",{key:0,class:c.normalizeClass({[P.prefixCls+"-cell-sort"]:ot.sortable}),onClick:wt=>ot.sortable&&N.handleSortByHead(N.getColumn(ct,Oe)._index)},c.toDisplayString(ot.title||"#"),11,h1)),ot.sortable?(c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass([P.prefixCls+"-sort"])},[c.createElementVNode("i",{class:c.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropup",{on:N.getColumn(ct,Oe)._sortType==="asc"}]),onClick:wt=>N.handleSort(N.getColumn(ct,Oe)._index,"asc")},null,10,f1),c.createElementVNode("i",{class:c.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropdown",{on:N.getColumn(ct,Oe)._sortType==="desc"}]),onClick:wt=>N.handleSort(N.getColumn(ct,Oe)._index,"desc")},null,10,JS)],2)):c.createCommentVNode("",!0),v.isPopperShow(ot)?(c.openBlock(),c.createBlock(We,{key:3,modelValue:N.getColumn(ct,Oe)._filterVisible,"onUpdate:modelValue":wt=>N.getColumn(ct,Oe)._filterVisible=wt,placement:"bottom","popper-class":"ivu-table-popper",transfer:"",capture:!1,onOnPopperHide:wt=>N.handleFilterHide(N.getColumn(ct,Oe)._index)},c.createSlots({default:c.withCtx(()=>[c.createElementVNode("span",{class:c.normalizeClass([P.prefixCls+"-filter"])},[c.createElementVNode("i",{class:c.normalizeClass(["ivu-icon ivu-icon-ios-funnel",{on:N.getColumn(ct,Oe)._isFiltered}])},null,2)],2)]),_:2},[N.getColumn(ct,Oe)._filterMultiple?{name:"content",fn:c.withCtx(()=>[c.createElementVNode("div",{class:c.normalizeClass([P.prefixCls+"-filter-list"])},[c.createElementVNode("div",{class:c.normalizeClass([P.prefixCls+"-filter-list-item"])},[c.createVNode(pe,{modelValue:N.getColumn(ct,Oe)._filterChecked,"onUpdate:modelValue":wt=>N.getColumn(ct,Oe)._filterChecked=wt},{default:c.withCtx(()=>[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ot.filters,(wt,Er)=>(c.openBlock(),c.createBlock(Ce,{key:Er,label:wt.value},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(wt.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2),c.createElementVNode("div",{class:c.normalizeClass([P.prefixCls+"-filter-footer"])},[c.createVNode(we,{type:"text",size:"small",disabled:!N.getColumn(ct,Oe)._filterChecked.length,onClick:wt=>N.handleFilter(N.getColumn(ct,Oe)._index)},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(v.t("i.table.confirmFilter")),1)]),_:2},1032,["disabled","onClick"]),c.createVNode(we,{type:"text",size:"small",onClick:wt=>N.handleReset(N.getColumn(ct,Oe)._index)},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(v.t("i.table.resetFilter")),1)]),_:2},1032,["onClick"])],2)],2)]),key:"0"}:{name:"content",fn:c.withCtx(()=>[c.createElementVNode("div",{class:c.normalizeClass([P.prefixCls+"-filter-list"])},[c.createElementVNode("ul",{class:c.normalizeClass([P.prefixCls+"-filter-list-single"])},[c.createElementVNode("li",{class:c.normalizeClass(N.itemAllClasses(N.getColumn(ct,Oe))),onClick:wt=>N.handleReset(N.getColumn(ct,Oe)._index)},c.toDisplayString(v.t("i.table.clearFilter")),11,["onClick"]),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(ot.filters,wt=>(c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.itemClasses(N.getColumn(ct,Oe),wt)),key:wt.value,onClick:Er=>N.handleSelect(N.getColumn(ct,Oe)._index,wt.value)},c.toDisplayString(wt.label),11,["onClick"]))),128))],2)],2)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","onOnPopperHide"])):c.createCommentVNode("",!0)],64))],2),ot.resizable?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-table-header-resizable",onMousedown:wt=>N.handleMouseDown(ot,wt),onMousemove:wt=>N.handleMouseMove(ot,wt),onMouseout:E[0]||(E[0]=(...wt)=>N.handleMouseOut&&N.handleMouseOut(...wt))},null,40,iP)):c.createCommentVNode("",!0)],10,d1))),128)),v.$parent.showVerticalScrollBar&&ct===0?(c.openBlock(),c.createElementBlock("th",{key:0,class:c.normalizeClass(N.scrollBarCellClass()),rowspan:N.headRows.length},null,10,aP)):c.createCommentVNode("",!0)]))),128))])],4)}var lP=$(oP,[["render",sP]]);const cP={props:{row:Object,prefixCls:String,draggable:Boolean,isChildren:Boolean},computed:{objData(){return this.$parent.objData}},methods:{onDrag(v,E){v.dataTransfer.setData("index",E)},onDrop(v,E){const P=v.dataTransfer.getData("index");this.$parent.$parent.dragAndDrop(P,E),v.preventDefault()},allowDrop(v){v.preventDefault()},rowClasses(v){const E=this.isChildren?this.$parent.$parent.getDataByRowKey(this.row._rowKey):this.objData[v];return[`${this.prefixCls}-row`,this.rowClsName(v),{[`${this.prefixCls}-row-highlight`]:E&&E._isHighlight,[`${this.prefixCls}-row-hover`]:E&&E._isHover}]},rowClsName(v){return this.$parent.$parent.rowClassName(this.objData[v],v)}}},uP=["draggable"];function bT(v,E,P,G,H,N){return P.draggable?(c.openBlock(),c.createElementBlock("tr",{key:0,class:c.normalizeClass(N.rowClasses(P.row._index)),draggable:P.draggable,onDragstart:E[0]||(E[0]=ee=>N.onDrag(ee,P.row._index)),onDrop:E[1]||(E[1]=ee=>N.onDrop(ee,P.row._index)),onDragover:E[2]||(E[2]=ee=>N.allowDrop(ee))},[c.renderSlot(v.$slots,"default")],42,uP)):(c.openBlock(),c.createElementBlock("tr",{key:1,class:c.normalizeClass(N.rowClasses(P.row._index)),draggable:!1},[c.renderSlot(v.$slots,"default")],2))}var Hv=$(cP,[["render",bT]]),QS={name:"TableExpand",props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render(){const v={row:this.row,index:this.index};return this.column&&(v.column=this.column),this.render(c.h,v)}},dP={name:"TableSlot",inject:["TableInstance"],props:{row:Object,index:Number,column:{type:Object,default:null},display:{type:String,default:"block"}},render(){return c.h("div",{class:{"ivu-table-cell-slot":!0,"ivu-table-cell-slot-inline":this.display==="inline","ivu-table-cell-slot-inline-block":this.display==="inline-block"}},this.TableInstance.$slots[this.column.slot]({row:this.row,column:this.column,index:this.index}))}};const p1={name:"TableCell",components:{Icon:oe,Checkbox:Up,TableExpand:QS,TableSlot:dP,Tooltip:bn},inject:["TableInstance"],props:{prefixCls:String,row:Object,column:Object,naturalIndex:Number,index:Number,checked:Boolean,disabled:Boolean,expanded:Boolean,fixed:{type:[Boolean,String],default:!1},treeNode:Boolean,treeLevel:{type:Number,default:0}},data(){return{renderType:"",uid:-1,context:this.$parent.$parent.$parent.currentContext,showTooltip:!1}},computed:{classes(){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&this.column.fixed&&(this.column.fixed==="left"||this.column.fixed==="right"),[`${this.prefixCls}-cell-ellipsis`]:this.column.ellipsis||!1,[`${this.prefixCls}-cell-with-expand`]:this.renderType==="expand",[`${this.prefixCls}-cell-with-selection`]:this.renderType==="selection"}]},expandCls(){return[`${this.prefixCls}-cell-expand`,{[`${this.prefixCls}-cell-expand-expanded`]:this.expanded}]},showChildren(){let v=!1;if(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot"){const E=this.row;(E.children&&E.children.length||"_loading"in E)&&this.column.tree&&(v=!0)}return v},showTreeNode(){let v=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(v=!0),v},showLevel(){let v=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(v=!0),v},treeLevelStyle(){return{"padding-left":this.treeLevel*this.TableInstance.indentSize+"px"}},childrenExpand(){return this.TableInstance.getDataByRowKey(this.row._rowKey)._isShowChildren},childrenLoading(){const v=this.TableInstance.getDataByRowKey(this.row._rowKey);return"_loading"in v&&v._loading}},methods:{toggleSelect(){this.treeNode?this.$parent.$parent.$parent.toggleSelect(this.index,this.row._rowKey):this.$parent.$parent.$parent.toggleSelect(this.index)},toggleExpand(){this.$parent.$parent.$parent.toggleExpand(this.index)},handleClick(){},handleTooltipIn(){if(!A)return;const v=this.$refs.content;let E=document.createRange();E.setStart(v,0),E.setEnd(v,v.childNodes.length);const P=E.getBoundingClientRect().width;this.showTooltip=P>v.offsetWidth,E=null},handleToggleTree(){this.$parent.$parent.$parent.toggleTree(this.row._rowKey)}},created(){this.column.type==="index"?this.renderType="index":this.column.type==="selection"?this.renderType="selection":this.column.type==="html"?this.renderType="html":this.column.type==="expand"?this.renderType="expand":this.column.render?this.renderType="render":this.column.slot?this.renderType="slot":this.renderType="normal"}},_T={key:0},Xh={key:4,class:"ivu-table-cell-tree ivu-table-cell-tree-empty"},ST=["innerHTML"],hP={key:1};function ex(v,E,P,G,H,N){const ee=c.resolveComponent("Checkbox"),le=c.resolveComponent("Icon"),Ce=c.resolveComponent("Tooltip"),pe=c.resolveComponent("table-expand"),we=c.resolveComponent("table-slot");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),ref:"cell"},[H.renderType==="index"?(c.openBlock(),c.createElementBlock("span",_T,c.toDisplayString(P.column.indexMethod?P.column.indexMethod(P.row,P.naturalIndex):P.naturalIndex+1),1)):c.createCommentVNode("",!0),H.renderType==="selection"?(c.openBlock(),c.createBlock(ee,{key:1,"model-value":P.checked,onClick:c.withModifiers(N.handleClick,["stop"]),onOnChange:N.toggleSelect,disabled:P.disabled},null,8,["model-value","onClick","onOnChange","disabled"])):c.createCommentVNode("",!0),N.showLevel?(c.openBlock(),c.createElementBlock("div",{key:2,class:"ivu-table-cell-tree-level",style:c.normalizeStyle(N.treeLevelStyle)},null,4)):c.createCommentVNode("",!0),N.showChildren?(c.openBlock(),c.createElementBlock("div",{key:3,class:c.normalizeClass(["ivu-table-cell-tree",{"ivu-table-cell-tree-loading":N.childrenLoading}]),onClick:E[0]||(E[0]=c.withModifiers((...We)=>N.handleToggleTree&&N.handleToggleTree(...We),["prevent","stop"]))},[N.childrenLoading?(c.openBlock(),c.createBlock(le,{key:0,type:"ios-loading",class:"ivu-load-loop"})):N.childrenExpand?(c.openBlock(),c.createBlock(le,{key:2,type:"ios-remove"})):(c.openBlock(),c.createBlock(le,{key:1,type:"ios-add"}))],2)):N.showTreeNode?(c.openBlock(),c.createElementBlock("div",Xh)):c.createCommentVNode("",!0),H.renderType==="html"?(c.openBlock(),c.createElementBlock("span",{key:5,innerHTML:P.row[P.column.key]},null,8,ST)):c.createCommentVNode("",!0),H.renderType==="normal"?(c.openBlock(),c.createElementBlock(c.Fragment,{key:6},[P.column.tooltip?(c.openBlock(),c.createBlock(Ce,{key:0,transfer:"",content:P.row[P.column.key],theme:P.column.tooltipTheme?P.column.tooltipTheme:N.TableInstance.tooltipTheme,disabled:!H.showTooltip,"max-width":P.column.tooltipMaxWidth?P.column.tooltipMaxWidth:N.TableInstance.tooltipMaxWidth,class:"ivu-table-cell-tooltip"},{default:c.withCtx(()=>[c.createElementVNode("span",{ref:"content",onMouseenter:E[1]||(E[1]=(...We)=>N.handleTooltipIn&&N.handleTooltipIn(...We)),class:"ivu-table-cell-tooltip-content"},c.toDisplayString(P.row[P.column.key]),545)]),_:1},8,["content","theme","disabled","max-width"])):(c.openBlock(),c.createElementBlock("span",hP,c.toDisplayString(P.row[P.column.key]),1))],64)):c.createCommentVNode("",!0),H.renderType==="expand"&&!P.row._disableExpand?(c.openBlock(),c.createElementBlock("div",{key:7,class:c.normalizeClass(N.expandCls),onClick:E[2]||(E[2]=(...We)=>N.toggleExpand&&N.toggleExpand(...We))},[c.createVNode(le,{type:"ios-arrow-forward"})],2)):c.createCommentVNode("",!0),H.renderType==="render"?(c.openBlock(),c.createBlock(pe,{key:8,row:P.row,column:P.column,index:P.index,render:P.column.render},null,8,["row","column","index","render"])):c.createCommentVNode("",!0),H.renderType==="slot"?(c.openBlock(),c.createBlock(we,{key:9,row:P.row,column:P.column,display:P.column.display||"block",index:P.index},null,8,["row","column","display","index"])):c.createCommentVNode("",!0)],2)}var tx=$(p1,[["render",ex]]);const xT={name:"TableBody",mixins:[XS],components:{TableCell:tx,Expand:QS,TableTr:Hv},props:{prefixCls:String,styleObject:Object,columns:Array,data:Array,objData:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1},rowKey:{type:[Boolean,String],default:!1}},computed:{expandRender(){let v=function(){return""};for(let E=0;E<this.columns.length;E++){const P=this.columns[E];P.type&&P.type==="expand"&&P.render&&(v=P.render)}return v}},methods:{rowChecked(v){return this.objData[v]&&this.objData[v]._isChecked},rowDisabled(v){return this.objData[v]&&this.objData[v]._isDisabled},rowExpanded(v){return this.objData[v]&&this.objData[v]._isExpanded},rowStatusByRowKey(v,E){return this.$parent.getDataByRowKey(E)[v]},handleMouseIn(v,E,P){E.stopPropagation(),this.$parent.handleMouseIn(v,P)},handleMouseOut(v,E,P){E.stopPropagation(),this.$parent.handleMouseOut(v,P)},clickCurrentRow(v,E,P){this.$parent.clickCurrentRow(v,P)},dblclickCurrentRow(v,E,P){E.stopPropagation(),this.$parent.dblclickCurrentRow(v,P)},clickCell(v,E,P,G){this.$parent.$emit("on-cell-click",v,E,v[P],G)},contextmenuCurrentRow(v,E,P){E.stopPropagation(),this.$parent.contextMenu&&E.preventDefault(),this.$parent.contextmenuCurrentRow(v,P,E)},selectStartCurrentRow(){this.$parent.contextMenu},getSpan(v,E,P,G){const H=this.$parent.spanMethod;if(typeof H=="function"){const N=H({row:v,column:E,rowIndex:P,columnIndex:G});let ee=1,le=1;return Array.isArray(N)?(ee=N[0],le=N[1]):typeof N=="object"&&(ee=N.rowspan,le=N.colspan),{rowspan:ee,colspan:le}}else return{}},showWithSpan(v,E,P,G){const H=this.getSpan(v,E,P,G);return!("rowspan"in H&&H.rowspan===0||"colspan"in H&&H.colspan===0)},isTrShow(v){let E=!0,P;for(let G in this.objData){const H=this.objData[G],N=H._isShowChildren;if(H._rowKey===v){E=E&&N;break}else if(H.children&&H.children.length&&(P=this.getTrStatus(v,H,E&&N),P[0]&&P[0]._rowKey===v))return P[1]}return E},getTrStatus(v,E,P){let G=P,H;if(E.children&&E.children.length)for(let N=0;N<E.children.length;N++){const ee=E.children[N],le=ee._isShowChildren;if(ee._rowKey===v){H=ee,G=G&&le;break}else if(ee.children&&ee.children.length){const Ce=this.getTrStatus(v,ee,G&&le);if(Ce[0]&&Ce[0]._rowKey===v)return Ce}}return[H,G]},getLevel(v){let E,P;for(let G=0;G<this.data.length;G++){const H=this.data[G];if(H[this.rowKey]===v){E=0;break}else if(H.children&&H.children.length&&(P=this.getChildLevel(H,v,1),P[0]&&P[0][this.rowKey]===v))return P[1]}return E},getChildLevel(v,E,P){let G,H;if(v.children&&v.children.length)for(let N=0;N<v.children.length;N++){const ee=v.children[N];if(ee[this.rowKey]===E){H=ee,G=P;break}else if(ee.children&&ee.children.length){const le=this.getChildLevel(ee,E,P+1);if(le[0]&&le[0][this.rowKey]===E)return le}}return[H,G]},getChildNode(v,E,P){return E.children&&E.children.length&&E.children.forEach((G,H)=>{let N=[];this.columns.forEach((Ce,pe)=>{if(this.showWithSpan(G,Ce,H,pe)){const we=v(tx,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:G,column:Ce,"natural-index":H,index:G._index,checked:this.rowStatusByRowKey("_isChecked",G._rowKey),disabled:this.rowStatusByRowKey("_isDisabled",G._rowKey),expanded:this.rowStatusByRowKey("_isExpanded",G._rowKey),treeNode:!0,treeLevel:this.getLevel(G._rowKey),key:Ce._columnKey}),We=v("td",x(S({class:this.alignCls(Ce,G)},this.getSpan(G,Ce,H,pe)),{onClick:ut=>this.clickCell(G,Ce,Ce.key,ut)}),[we]);N.push(We)}});const ee={};this.isTrShow(E._rowKey)||(ee.display="none");const le=v(Hv,{draggable:!1,row:G,"prefix-cls":this.prefixCls,isChildren:!0,style:ee,key:this.rowKey?G._rowKey:H,onMouseenter:Ce=>this.handleMouseIn(G._index,Ce,G._rowKey),onMouseleave:Ce=>this.handleMouseOut(G._index,Ce,G._rowKey),onClick:Ce=>this.clickCurrentRow(G._index,Ce,G._rowKey),onDblclick:Ce=>this.dblclickCurrentRow(G._index,Ce,G._rowKey),onContextmenu:Ce=>this.contextmenuCurrentRow(G._index,Ce,G._rowKey),onSelectstart:Ce=>this.selectStartCurrentRow(G._index,Ce,G._rowKey)},()=>N);P.push(le),G.children&&G.children.length&&this.getChildNode(v,G,P)}),P}},render(){let v=[];this.columns.forEach(H=>{const N=c.h("col",{width:this.setCellWidth(H)});v.push(N)});const E=c.h("colgroup",{},v);let P=[];this.data.forEach((H,N)=>{let ee=[];this.columns.forEach((Ce,pe)=>{if(this.showWithSpan(H,Ce,N,pe)){const we=c.h(tx,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:H,column:Ce,"natural-index":N,index:H._index,checked:this.rowChecked(H._index),disabled:this.rowDisabled(H._index),expanded:this.rowExpanded(H._index),key:Ce._columnKey}),We=c.h("td",x(S({class:this.alignCls(Ce,H)},this.getSpan(H,Ce,N,pe)),{onClick:ut=>this.clickCell(H,Ce,Ce.key,ut)}),[we]);ee.push(We)}});const le=c.h(Hv,{draggable:this.draggable,row:H,"prefix-cls":this.prefixCls,key:this.rowKey?H._rowKey:N,onMouseenter:Ce=>this.handleMouseIn(H._index,Ce),onMouseleave:Ce=>this.handleMouseOut(H._index,Ce),onClick:Ce=>this.clickCurrentRow(H._index,Ce),onDblclick:Ce=>this.dblclickCurrentRow(H._index,Ce),onContextmenu:Ce=>this.contextmenuCurrentRow(H._index,Ce),onSelectstart:Ce=>this.selectStartCurrentRow(H._index,Ce)},()=>ee);if(P.push(le),this.rowExpanded(H._index)){const Ce=c.h(QS,{row:H,render:this.expandRender,index:H._index,key:this.rowKey?H._rowKey:N}),pe=c.h("td",{colspan:this.columns.length,class:this.prefixCls+"-expanded-cell"},[Ce]),we=c.h("tr",{class:{[this.prefixCls+"-expanded-hidden"]:this.fixed}},[pe]);P.push(we)}H.children&&H.children.length&&this.getChildNode(c.h,H,[]).forEach(Ce=>{P.push(Ce)})});const G=c.h("tbody",{class:this.prefixCls+"-tbody"},[P]);return c.h("table",{cellspacing:"0",cellpadding:"0",border:"0",style:this.styleObject},[E,G])}},CT={name:"TableSummary",mixins:[XS],props:{prefixCls:String,styleObject:Object,columns:Array,data:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1}},methods:{cellCls(v){return[{"ivu-table-hidden":this.fixed==="left"&&v.fixed!=="left"||this.fixed==="right"&&v.fixed!=="right"||!this.fixed&&v.fixed&&(v.fixed==="left"||v.fixed==="right")}]}}},nx={style:{overflow:"hidden"}},wT=["width"],rx={class:"ivu-table-row"};function ET(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("div",nx,[c.createElementVNode("table",{class:"ivu-table-summary",cellspacing:"0",cellpadding:"0",border:"0",style:c.normalizeStyle(P.styleObject)},[c.createElementVNode("colgroup",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.columns,(ee,le)=>(c.openBlock(),c.createElementBlock("col",{key:le,width:v.setCellWidth(ee)},null,8,wT))),128))]),c.createElementVNode("tbody",{class:c.normalizeClass([P.prefixCls+"-tbody"])},[c.createElementVNode("tr",rx,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.columns,(ee,le)=>(c.openBlock(),c.createElementBlock("td",{key:le,class:c.normalizeClass(v.alignCls(ee))},[c.createElementVNode("div",{class:c.normalizeClass(["ivu-table-cell",N.cellCls(ee)])},[c.createElementVNode("span",null,c.toDisplayString(P.data[ee.key].value),1)],2)],2))),128))])],2)],4)])}var fP=$(CT,[["render",ET]]);const pP=`\r
`,Gv=(v,E,{separator:P,quoted:G})=>{const H=E.map(N=>G?(N=typeof N=="string"?N.replace(/"/g,'"'):N,`"${N}"`):N);v.push(H.join(P))},mP={separator:",",quoted:!1};function gP(v,E,P,G=!1){P=Object.assign({},mP,P);let H;const N=[],ee=[];return v?(H=v.map(le=>typeof le=="string"?le:(G||ee.push(typeof le.title<"u"?le.title:le.key),le.key)),ee.length>0&&Gv(N,ee,P)):(H=[],E.forEach(le=>{Array.isArray(le)||(H=H.concat(Object.keys(le)))}),H.length>0&&(H=H.filter((le,Ce,pe)=>pe.indexOf(le)===Ce),G||Gv(N,H,P))),Array.isArray(E)&&E.forEach(le=>{Array.isArray(le)||(le=H.map(Ce=>typeof le[Ce]<"u"?le[Ce]:"")),Gv(N,le,P)}),N.join(pP)}function ox(v){const E=navigator.userAgent;return v==="ie"?E.indexOf("compatible")>-1&&E.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(E),parseFloat(RegExp.$1)):!1:E.indexOf(v)>-1}const vP={_isIE11(){let v=0;const E=/MSIE (\d+\.\d+);/.test(navigator.userAgent),P=!!navigator.userAgent.match(/Trident\/7.0/),G=navigator.userAgent.indexOf("rv:11.0");return E&&(v=Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!==-1&&(v=10),P&&G!==-1&&(v=11),v===11},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(v){const E="\uFEFF";if(A&&window.Blob&&window.URL&&window.URL.createObjectURL){const P=new Blob([E+v],{type:"text/csv"});return URL.createObjectURL(P)}else return"data:attachment/csv;charset=utf-8,"+E+encodeURIComponent(v)},download(v,E){if(A)if(ox("ie")&&ox("ie")<10){const P=window.top.open("about:blank","_blank");P.document.charset="utf-8",P.document.write(E),P.document.close(),P.document.execCommand("SaveAs",v),P.close()}else if(ox("ie")===10||this._isIE11()||this._isEdge()){const P="\uFEFF",G=new Blob([P+E],{type:"text/csv"});navigator.msSaveBlob(G,v)}else{const P=document.createElement("a");P.download=v,P.href=this._getDownloadUrl(E),document.body.appendChild(P),P.click(),document.body.removeChild(P)}}},Wv=(v,E)=>{let P=[],G=[];return v.forEach(H=>{H.fixed&&H.fixed===E?P.push(H):G.push(H)}),P.concat(G)},Yv=(v,E=!1)=>{const P=Te(v),G=[];return P.forEach(H=>{H.children?(E&&G.push(H),G.push.apply(G,Yv(H.children,E))):G.push(H)}),G},yP=(v,E=!1)=>{const P=Te(E?E==="left"?Wv(v,"left"):Wv(v,"right"):v);let G=1;const H=(ee,le)=>{if(le&&(ee.level=le.level+1,G<ee.level&&(G=ee.level)),ee.children){let Ce=0;ee.children.forEach(pe=>{H(pe,ee),Ce+=pe.colSpan}),ee.colSpan=Ce}else ee.colSpan=1};P.forEach(ee=>{ee.level=1,H(ee)});const N=[];for(let ee=0;ee<G;ee++)N.push([]);return Yv(P,!0).forEach(ee=>{ee.children?ee.rowSpan=1:ee.rowSpan=G-ee.level+1,N[ee.level-1].push(ee)}),N},bP=function(v=32){const E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",P=E.length;let G="";for(let H=0;H<v;H++)G+=E.charAt(Math.floor(Math.random()*P));return G},ds="ivu-table";let TT=1,_P=1;const AT={name:"Table",mixins:[vt],components:{tableHead:lP,tableBody:xT,tableSummary:fP,Spin:tc,Dropdown:Wi,DropdownMenu:Ph},emits:["on-current-change","on-row-click","on-row-dblclick","on-contextmenu","on-select","on-select-cancel","on-selection-change","on-expand","on-expand-tree","on-select-all","on-select-all-cancel","on-sort-change","on-filter-change","on-drag-drop","on-cell-click","on-column-width-resize"],provide(){return{TableInstance:this}},inject:{TabsInstance:{default:null},ModalInstance:{default:null},DrawerInstance:{default:null}},props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},size:{validator(v){return re(v,["small","large","default"])},default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.size===""?"default":v.$VIEWUI.size}},width:{type:[Number,String]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tooltipTheme:{validator(v){return re(v,["dark","light"])},default:"dark"},tooltipMaxWidth:{type:Number,default:300},rowKey:{type:[Boolean,String],default:!1},spanMethod:{type:Function},showSummary:{type:Boolean,default:!1},summaryMethod:{type:Function},sumText:{type:String},indentSize:{type:Number,default:16},loadData:{type:Function},updateShowChildren:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},showContextMenu:{type:Boolean,default:!1},fixedShadow:{validator(v){return re(v,["auto","show","hide"])},default:"show"},autoCloseContextmenu:{type:Boolean,default:!0}},data(){const v=this.makeColumnsId(this.columns);return{ready:!1,tableWidth:0,columnsWidth:{},prefixCls:ds,compiledUids:[],objData:this.makeObjData(),rebuildData:[],cloneColumns:this.makeColumns(v),columnRows:this.makeColumnRows(!1,v),leftFixedColumnRows:this.makeColumnRows("left",v),rightFixedColumnRows:this.makeColumnRows("right",v),allColumns:Yv(v),showSlotHeader:!0,showSlotFooter:!0,bodyHeight:0,scrollBarWidth:_e(),currentContext:this.context,cloneData:Te(this.data),showVerticalScrollBar:!1,showHorizontalScrollBar:!1,headerWidth:0,headerHeight:0,showResizeLine:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},scrollOnTheLeft:!1,scrollOnTheRight:!1,id:mt(6)}},computed:{localeNoDataText(){return this.noDataText===void 0?this.t("i.table.noDataText"):this.noDataText},localeNoFilteredDataText(){return this.noFilteredDataText===void 0?this.t("i.table.noFilteredDataText"):this.noFilteredDataText},localeSumText(){return this.sumText===void 0?this.t("i.table.sumText"):this.sumText},wrapClasses(){return[`${ds}-wrapper`,{[`${ds}-hide`]:!this.ready,[`${ds}-with-header`]:this.showSlotHeader,[`${ds}-with-footer`]:this.showSlotFooter,[`${ds}-with-summary`]:this.showSummary,[`${ds}-wrapper-with-border`]:this.border}]},classes(){return[`${ds}`,{[`${ds}-${this.size}`]:!!this.size,[`${ds}-border`]:this.border,[`${ds}-stripe`]:this.stripe,[`${ds}-with-fixed-top`]:!!this.height}]},fixedTableClasses(){return[`${ds}-fixed`,{[`${ds}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheLeft}]},fixedRightTableClasses(){return[`${ds}-fixed-right`,{[`${ds}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheRight}]},fixedHeaderClasses(){return[`${ds}-fixed-header`,{[`${ds}-fixed-header-with-empty`]:!this.rebuildData.length}]},styles(){let v={},E=0;if(this.showSummary&&(this.size==="small"?E=40:this.size==="large"?E=60:E=48),this.height){let P=parseInt(this.height)+E;v.height=`${P}px`}if(this.maxHeight){const P=parseInt(this.maxHeight)+E;v.maxHeight=`${P}px`}return this.width&&(v.width=`${this.width}px`),v},tableStyle(){let v={};if(this.tableWidth!==0){let E="";this.bodyHeight===0?E=this.tableWidth:E=this.tableWidth-(this.showVerticalScrollBar?this.scrollBarWidth:0),v.width=`${E}px`}return v},tableHeaderStyle(){let v={};if(this.tableWidth!==0){let E="";E=this.tableWidth,v.width=`${E}px`}return v},fixedTableStyle(){let v={},E=0;return this.leftFixedColumns.forEach(P=>{P.fixed&&P.fixed==="left"&&(E+=P._width)}),v.width=`${E}px`,v},fixedRightTableStyle(){let v={},E=0;return this.rightFixedColumns.forEach(P=>{P.fixed&&P.fixed==="right"&&(E+=P._width)}),v.width=`${E}px`,v.right=`${this.showVerticalScrollBar?this.scrollBarWidth:0}px`,v},fixedRightHeaderStyle(){let v={},E=0,P=this.headerHeight+1;return this.showVerticalScrollBar&&(E=this.scrollBarWidth),v.width=`${E}px`,v.height=`${P}px`,v},bodyStyle(){let v={};if(this.bodyHeight!==0){const E=this.bodyHeight;this.height?v.height=`${E}px`:this.maxHeight&&(v.maxHeight=`${E}px`)}return v},fixedBodyStyle(){let v={};if(this.bodyHeight!==0){let E=this.bodyHeight-(this.showHorizontalScrollBar?this.scrollBarWidth:0);const P=this.showHorizontalScrollBar?`${E}px`:`${E-1}px`;this.height?v.height=P:this.maxHeight&&(v.maxHeight=P)}return v},leftFixedColumns(){return Wv(this.cloneColumns,"left")},rightFixedColumns(){return Wv(this.cloneColumns,"right")},isLeftFixed(){return this.columns.some(v=>v.fixed&&v.fixed==="left")},isRightFixed(){return this.columns.some(v=>v.fixed&&v.fixed==="right")},summaryData(){if(!this.showSummary)return{};let v={};return this.summaryMethod?v=this.summaryMethod({columns:this.cloneColumns,data:this.rebuildData}):this.cloneColumns.forEach((E,P)=>{const G=E.key;if(P===0){v[G]={key:E.key,value:this.localeSumText};return}const H=this.rebuildData.map(Ce=>Number(Ce[E.key])),N=[];let ee=!0;H.forEach(Ce=>{if(!isNaN(Ce)){ee=!1;let pe=(""+Ce).split(".")[1];N.push(pe?pe.length:0)}});const le=Math.max.apply(null,N);if(ee)v[G]={key:E.key,value:""};else{const Ce=H.reduce((pe,we)=>{const We=Number(we);return isNaN(We)?pe:parseFloat((pe+we).toFixed(Math.min(le,20)))},0);v[G]={key:E.key,value:Ce}}}),v}},methods:{rowClsName(v){return this.rowClassName(this.data[v],v)},handleResize(){let v=this.$el.offsetWidth-1,E={},P=0,G=[],H=[],N=[];this.cloneColumns.forEach(we=>{we.width?G.push(we):(H.push(we),we.minWidth&&(P+=we.minWidth),we.maxWidth||N.push(we)),we._width=null});let ee=G.map(we=>we.width).reduce((we,We)=>we+We,0),le=v-ee-P-(this.showVerticalScrollBar?this.scrollBarWidth:0)-1,Ce=H.length,pe=0;le>0&&Ce>0&&(pe=parseInt(le/Ce));for(let we=0;we<this.cloneColumns.length;we++){const We=this.cloneColumns[we];let ut=pe+(We.minWidth?We.minWidth:0);We.width?ut=We.width:We._width?ut=We._width:(We.minWidth>ut?ut=We.minWidth:We.maxWidth<ut&&(ut=We.maxWidth),le>0?(le-=ut-(We.minWidth?We.minWidth:0),Ce--,Ce>0?pe=parseInt(le/Ce):pe=0):pe=0),We._width=ut,E[We._index]={width:ut}}if(le>0){Ce=N.length,pe=parseInt(le/Ce);for(let we=0;we<N.length;we++){const We=N[we];let ut=We._width+pe;Ce>1?(Ce--,le-=pe,pe=parseInt(le/Ce)):pe=0,We._width=ut,E[We._index]={width:ut}}}this.tableWidth=this.cloneColumns.map(we=>we._width).reduce((we,We)=>we+We,0)+(this.showVerticalScrollBar?this.scrollBarWidth:0)+1,this.columnsWidth=E,this.fixedHeader(),this.fixedShadow==="auto"&&c.nextTick(()=>{const we=this.$refs.body;this.scrollOnTheLeft=we.scrollLeft===0,this.scrollOnTheRight=we.scrollWidth===we.scrollLeft+we.clientWidth})},handleMouseIn(v,E){if(this.disabledHover)return;const P=E?this.getDataByRowKey(E):this.objData[v];P._isHover||(P._isHover=!0)},handleMouseOut(v,E){if(this.disabledHover)return;const P=E?this.getDataByRowKey(E):this.objData[v];P._isHover=!1},handleCurrentRow(v,E,P){const G=P?this.getDataByRowKey(P):this.objData[E];let H=null,N=-1;for(let le in this.objData)if(this.objData[le]._isHighlight){N=parseInt(le),this.objData[le]._isHighlight=!1;break}else if(this.objData[le].children&&this.objData[le].children.length){const Ce=this.handleResetChildrenRow(this.objData[le]);Ce&&(H=JSON.parse(JSON.stringify(Ce)))}v==="highlight"&&(G._isHighlight=!0),N>=0&&(H=JSON.parse(JSON.stringify(this.cloneData[N])));const ee=v==="highlight"?JSON.parse(JSON.stringify(P?this.getBaseDataByRowKey(P):this.cloneData[E])):null;this.$emit("on-current-change",ee,H)},handleResetChildrenRow(v){let E=null;if(v.children&&v.children.length)for(let P=0;P<v.children.length;P++){const G=v.children[P];if(G._isHighlight){G._isHighlight=!1,E=G;break}else G.children&&G.children.length&&(E=this.handleResetChildrenRow(G))}return E},highlightCurrentRow(v,E){const P=E?this.getDataByRowKey(E):this.objData[v];!this.highlightRow||P._isHighlight||this.handleCurrentRow("highlight",v,E)},clearCurrentRow(){!this.highlightRow||this.handleCurrentRow("clear")},clickCurrentRow(v,E){this.highlightCurrentRow(v,E),E?this.$emit("on-row-click",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(E)))):this.$emit("on-row-click",JSON.parse(JSON.stringify(this.cloneData[v])),v)},dblclickCurrentRow(v,E){this.highlightCurrentRow(v,E),E?this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(E)))):this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.cloneData[v])),v)},contextmenuCurrentRow(v,E,P){this.contextMenuVisible&&this.handleClickContextMenuOutside(),c.nextTick(()=>{const G=this.$refs.tableWrap.getBoundingClientRect(),H={left:`${P.clientX-G.left}px`,top:`${P.clientY-G.top}px`};this.contextMenuStyles=H,this.contextMenuVisible=!0,E?this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(E))),P,H):this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.cloneData[v])),P,H)})},getSelection(){let v=[],E=[];for(let G in this.objData){const H=this.objData[G];H._isChecked&&v.push(parseInt(G)),H.children&&H.children.length&&(E=E.concat(this.getSelectionChildrenRowKeys(H,E)))}E=[...new Set(E)];let P=[];return this.data.forEach((G,H)=>{v.indexOf(H)>-1&&(P=P.concat(G)),G.children&&G.children.length&&E.length&&(P=P.concat(this.getSelectionChildren(G,P,E)))}),P=[...new Set(P)],JSON.parse(JSON.stringify(P))},getSelectionChildrenRowKeys(v,E){return v.children&&v.children.length&&v.children.forEach(P=>{P._isChecked&&E.push(P._rowKey),P.children&&P.children.length&&(E=E.concat(this.getSelectionChildrenRowKeys(P,E)))}),E},getSelectionChildren(v,E,P){return v.children&&v.children.length&&v.children.forEach(G=>{P.indexOf(G[this.rowKey])>-1&&(E=E.concat(G)),G.children&&G.children.length&&(E=E.concat(this.getSelectionChildren(G,E,P)))}),E},toggleSelect(v,E){let P={};if(E)P=this.getDataByRowKey(E);else for(let ee in this.objData)if(parseInt(ee)===v){P=this.objData[ee];break}const G=!P._isChecked;P._isChecked=G;const H=this.getSelection(),N=E?this.getBaseDataByRowKey(E,this.data):this.data[v];this.$emit(G?"on-select":"on-select-cancel",H,JSON.parse(JSON.stringify(N))),this.$emit("on-selection-change",H)},toggleExpand(v){let E={};for(let G in this.objData)if(parseInt(G)===v){E=this.objData[G];break}const P=!E._isExpanded;this.objData[v]._isExpanded=P,this.$emit("on-expand",JSON.parse(JSON.stringify(this.cloneData[v])),P),(this.height||this.maxHeight)&&c.nextTick(()=>this.fixedBody())},toggleTree(v){const E=this.getDataByRowKey(v);if(!("_loading"in E&&E._loading)){if("_loading"in E&&!E._loading&&E.children.length===0){const P=this.getBaseDataByRowKey(v,this.data);P._loading=!0,this.loadData(P,G=>{P._loading=!1,G.length&&(P.children=G,c.nextTick(()=>{const H=this.getDataByRowKey(v);H._isShowChildren=!H._isShowChildren,this.updateDataStatus(v,"_showChildren",H._isShowChildren)}))});return}E._isShowChildren=!E._isShowChildren,this.updateShowChildren&&this.updateDataStatus(v,"_showChildren",E._isShowChildren),this.$emit("on-expand-tree",v,E._isShowChildren)}},updateDataStatus(v,E,P){const G=this.getBaseDataByRowKey(v,this.data);G[E]=P},getDataByRowKey(v,E=this.objData){let P=null;for(let G in E){const H=E[G];if(H._rowKey===v){P=H;break}else if(H.children&&H.children.length&&(P=this.getChildrenByRowKey(v,H),P))break}return P},getChildrenByRowKey(v,E){let P=null;if(E.children&&E.children.length)for(let G=0;G<E.children.length;G++){const H=E.children[G];if(H._rowKey===v){P=H;break}else if(H.children&&H.children.length&&(P=this.getChildrenByRowKey(v,H),P))break}return P},getBaseDataByRowKey(v,E=this.cloneData){let P=null;for(let G=0;G<E.length;G++){const H=E[G];if(H[this.rowKey]===v){P=H;break}else if(H.children&&H.children.length&&(P=this.getChildrenDataByRowKey(v,H),P&&P[this.rowKey]===v))return P}return P},getChildrenDataByRowKey(v,E){let P=null;if(E.children&&E.children.length)for(let G=0;G<E.children.length;G++){const H=E.children[G];if(H[this.rowKey]===v){P=H;break}else if(H.children&&H.children.length&&(P=this.getChildrenDataByRowKey(v,H),P))break}return P},selectAll(v){for(const P of this.rebuildData){const G=this.objData[P._index];G._isDisabled||(G._isChecked=v),P.children&&P.children.length&&this.selectAllChildren(G,v)}const E=this.getSelection();v?this.$emit("on-select-all",E):this.$emit("on-select-all-cancel",E),this.$emit("on-selection-change",E)},selectAllChildren(v,E){v.children&&v.children.length&&v.children.map(P=>{P._isDisabled||(P._isChecked=E),P.children&&P.children.length&&this.selectAllChildren(P,E)})},fixedHeader(){this.height||this.maxHeight?c.nextTick(()=>{const v=parseInt(Ee(this.$refs.title,"height"))||0,E=parseInt(Ee(this.$refs.header,"height"))||0,P=parseInt(Ee(this.$refs.footer,"height"))||0;this.height?this.bodyHeight=this.height-v-E-P:this.maxHeight&&(this.bodyHeight=this.maxHeight-v-E-P),c.nextTick(()=>this.fixedBody())}):(this.bodyHeight=0,c.nextTick(()=>this.fixedBody()))},fixedBody(){if(this.$refs.header&&(this.headerWidth=this.$refs.header.children[0].offsetWidth,this.headerHeight=this.$refs.header.children[0].offsetHeight),!this.$refs.tbody||!this.data||this.data.length===0)this.showVerticalScrollBar=!1;else{let v=this.$refs.tbody.$el,E=v.parentElement,P=v.offsetHeight,G=E.offsetHeight;this.showHorizontalScrollBar=E.offsetWidth<v.offsetWidth+(this.showVerticalScrollBar?this.scrollBarWidth:0),this.showVerticalScrollBar=this.bodyHeight?G-(this.showHorizontalScrollBar?this.scrollBarWidth:0)<P:!1,this.showVerticalScrollBar?E.classList.add(this.prefixCls+"-overflowY"):E.classList.remove(this.prefixCls+"-overflowY"),this.showHorizontalScrollBar?E.classList.add(this.prefixCls+"-overflowX"):E.classList.remove(this.prefixCls+"-overflowX")}},hideColumnFilter(){this.cloneColumns.forEach(v=>v._filterVisible=!1)},handleBodyScroll(v){this.scrollOnTheLeft=v.target.scrollLeft===0,this.scrollOnTheRight=v.target.scrollWidth===v.target.scrollLeft+v.target.clientWidth,this.showHeader&&(this.$refs.header.scrollLeft=v.target.scrollLeft),this.isLeftFixed&&(this.$refs.fixedBody.scrollTop=v.target.scrollTop),this.isRightFixed&&(this.$refs.fixedRightBody.scrollTop=v.target.scrollTop),this.showSummary&&this.$refs.summary&&(this.$refs.summary.$el.scrollLeft=v.target.scrollLeft),this.hideColumnFilter()},handleFixedMousewheel(v){let E=v.deltaY;if(!E&&v.detail&&(E=v.detail*40),!E&&v.wheelDeltaY&&(E=-v.wheelDeltaY),!E&&v.wheelDelta&&(E=-v.wheelDelta),!E)return;const P=this.$refs.body,G=P.scrollTop;E<0&&G!==0&&v.preventDefault(),E>0&&P.scrollHeight-P.clientHeight>G&&v.preventDefault();let H=0,N=setInterval(()=>{H+=5,E>0?P.scrollTop+=2:P.scrollTop-=2,H>=Math.abs(E)&&clearInterval(N)},5)},handleMouseWheel(v){const E=v.deltaX,P=this.$refs.body;E>0?P.scrollLeft=P.scrollLeft+10:P.scrollLeft=P.scrollLeft-10},sortData(v,E,P){const G=this.cloneColumns[P].key;v.sort((H,N)=>{if(this.cloneColumns[P].sortMethod)return this.cloneColumns[P].sortMethod(H[G],N[G],E);if(E==="asc")return H[G]>N[G]?1:-1;if(E==="desc")return H[G]<N[G]?1:-1});for(let H=0;H<v.length;H++)v[H].children&&v[H].children.length&&(v[H].children=this.sortData(v[H].children,E,P));return v},handleSort(v,E){const P=this.GetOriginalIndex(v);this.cloneColumns.forEach(H=>H._sortType="normal");const G=this.cloneColumns[P].key;this.cloneColumns[P].sortable!=="custom"&&(E==="normal"?this.rebuildData=this.makeDataWithFilter():this.rebuildData=this.sortData(this.rebuildData,E,P)),this.cloneColumns[P]._sortType=E,this.$emit("on-sort-change",{column:JSON.parse(JSON.stringify(this.allColumns[this.cloneColumns[P]._index])),key:G,order:E})},handleFilterHide(v){this.cloneColumns[v]._isFiltered||(this.cloneColumns[v]._filterChecked=[])},filterData(v,E){return v.filter(P=>{if(typeof E.filterRemote=="function")return!0;let G=!E._filterChecked.length;for(let H=0;H<E._filterChecked.length&&(G=E.filterMethod(E._filterChecked[H],P),!G);H++);return G})},filterOtherData(v,E){let P=this.cloneColumns[E];return typeof P.filterRemote=="function"&&P.filterRemote.call(this.$parent,P._filterChecked,P.key,P),this.cloneColumns.forEach((G,H)=>{H!==E&&(v=this.filterData(v,G))}),v},handleFilter(v){const E=this.cloneColumns[v];let P=this.makeDataWithSort();P=this.filterOtherData(P,v),this.rebuildData=this.filterData(P,E),this.cloneColumns[v]._isFiltered=!0,this.cloneColumns[v]._filterVisible=!1,this.$emit("on-filter-change",E)},GetOriginalIndex(v){return this.cloneColumns.findIndex(E=>E._index===v)},handleFilterSelect(v,E){const P=this.GetOriginalIndex(v);this.cloneColumns[P]._filterChecked=[E],this.handleFilter(P)},handleFilterReset(v){const E=this.GetOriginalIndex(v);this.cloneColumns[E]._isFiltered=!1,this.cloneColumns[E]._filterVisible=!1,this.cloneColumns[E]._filterChecked=[];let P=this.makeDataWithSort();P=this.filterOtherData(P,E),this.rebuildData=P,this.$emit("on-filter-change",this.cloneColumns[E])},makeData(){let v=Te(this.data);return v.forEach((E,P)=>{E._index=P,E._rowKey=typeof this.rowKey=="string"?E[this.rowKey]:TT++,E.children&&E.children.length&&(E.children=this.makeChildrenData(E))}),v},makeChildrenData(v){return v.children&&v.children.length?v.children.map((E,P)=>{const G=Te(E);return G._index=P,G._rowKey=typeof this.rowKey=="string"?G[this.rowKey]:TT++,G.children&&G.children.length&&(G.children=this.makeChildrenData(G)),G}):v},makeDataWithSort(){let v=this.makeData(),E="normal",P=-1,G=!1;for(let H=0;H<this.cloneColumns.length;H++)if(this.cloneColumns[H]._sortType!=="normal"){E=this.cloneColumns[H]._sortType,P=H,G=this.cloneColumns[H].sortable==="custom";break}return E!=="normal"&&!G&&(v=this.sortData(v,E,P)),v},makeDataWithFilter(){let v=this.makeData();return this.cloneColumns.forEach(E=>v=this.filterData(v,E)),v},makeDataWithSortAndFilter(){let v=this.makeDataWithSort();return this.cloneColumns.forEach(E=>v=this.filterData(v,E)),v},makeObjBaseData(v){const E=Te(v);return typeof this.rowKey=="string"&&(E._rowKey=E[this.rowKey]),E._isHover=!1,E._disabled?E._isDisabled=E._disabled:E._isDisabled=!1,E._checked?E._isChecked=E._checked:E._isChecked=!1,E._expanded?E._isExpanded=E._expanded:E._isExpanded=!1,E._highlight?E._isHighlight=E._highlight:E._isHighlight=!1,E},makeObjData(){let v={};return this.data.forEach((E,P)=>{const G=this.makeObjBaseData(E);G.children&&G.children.length&&(G._showChildren?G._isShowChildren=G._showChildren:G._isShowChildren=!1,G.children=this.makeChildrenObjData(G)),v[P]=G}),v},makeChildrenObjData(v){return v.children&&v.children.length?v.children.map(E=>{const P=this.makeObjBaseData(E);return P._showChildren?P._isShowChildren=P._showChildren:P._isShowChildren=!1,P.children&&P.children.length&&(P.children=this.makeChildrenObjData(P)),P}):v},makeColumnsId(v){return Te(v).map(E=>("children"in E&&this.makeColumnsId(E.children),E.__id=bP(6),E))},makeColumns(v){let E=Te(Yv(v)),P=[],G=[],H=[];return E.forEach((N,ee)=>{N._index=ee,N._columnKey=_P++,N.width=parseInt(N.width),N._width=N.width?N.width:"",N._sortType="normal",N._filterVisible=!1,N._isFiltered=!1,N._filterChecked=[],"filterMultiple"in N?N._filterMultiple=N.filterMultiple:N._filterMultiple=!0,"filteredValue"in N&&(N._filterChecked=N.filteredValue,N._isFiltered=!0),"sortType"in N&&(N._sortType=N.sortType),N.fixed&&N.fixed==="left"?P.push(N):N.fixed&&N.fixed==="right"?G.push(N):H.push(N)}),P.concat(H).concat(G)},makeColumnRows(v,E){return yP(E,v)},exportCsv(v){v.filename?v.filename.indexOf(".csv")===-1&&(v.filename+=".csv"):v.filename="table.csv";let E=[],P=[];v.columns&&v.data?(E=v.columns,P=v.data):(E=this.allColumns,"original"in v||(v.original=!0),P=v.original?this.data:this.rebuildData);let G=!1;"noHeader"in v&&(G=v.noHeader);const H=gP(E,P,v,G);v.callback?v.callback(H):vP.download(v.filename,H)},dragAndDrop(v,E){this.$emit("on-drag-drop",v,E)},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnVisibleChange(v){v&&c.nextTick(()=>{this.handleResize()})},addTable(v){const E=this[v];!E||(E.tableList||(E.tableList=[]),E.tableList.push({id:this.id,table:this}))},removeTable(v){const E=this[v];if(!E||!E.tableList)return;const P=E.tableList.findIndex(G=>G.id===this.id);E.tableList.splice(P,1)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.context||(this.currentContext=this.$parent),this.showSlotHeader=this.$slots.header!==void 0,this.showSlotFooter=this.$slots.footer!==void 0,this.rebuildData=this.makeDataWithSortAndFilter()},mounted(){this.addTable("TabsInstance"),this.addTable("ModalInstance"),this.addTable("DrawerInstance"),this.handleResize(),c.nextTick(()=>this.ready=!0),R(window,"resize",this.handleResize),this.observer=im(),this.observer.listenTo(this.$el,this.handleResize)},beforeUnmount(){this.removeTable("TabsInstance"),this.removeTable("ModalInstance"),this.removeTable("DrawerInstance"),L(window,"resize",this.handleResize),this.observer.removeAllListeners(this.$el),this.observer.uninstall(this.$el),this.observer=null},watch:{data:{handler(){const v=this.rebuildData.length;this.objData=this.makeObjData(),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize(),v||this.fixedHeader(),setTimeout(()=>{this.cloneData=Te(this.data)},0)},deep:!0},columns:{handler(){const v=this.makeColumnsId(this.columns);this.allColumns=Yv(v),this.cloneColumns=this.makeColumns(v),this.columnRows=this.makeColumnRows(!1,v),this.leftFixedColumnRows=this.makeColumnRows("left",v),this.rightFixedColumnRows=this.makeColumnRows("right",v),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize()},deep:!0},height(){this.handleResize()},maxHeight(){this.handleResize()},showHorizontalScrollBar(){this.handleResize()},showVerticalScrollBar(){this.handleResize()}}},SP={cellspacing:"0",cellpadding:"0",border:"0"},xP=["innerHTML"],m1=["innerHTML"],CP={class:"ivu-table-resize-line",ref:"resizeLine"};function Xn(v,E,P,G,H,N){const ee=c.resolveComponent("table-head"),le=c.resolveComponent("table-body"),Ce=c.resolveComponent("table-summary"),pe=c.resolveComponent("DropdownMenu"),we=c.resolveComponent("Dropdown"),We=c.resolveComponent("Spin");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.wrapClasses),style:c.normalizeStyle(N.styles),ref:"tableWrap"},[c.createElementVNode("div",{class:c.normalizeClass(N.classes)},[H.showSlotHeader?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-title"]),ref:"title"},[c.renderSlot(v.$slots,"header")],2)):c.createCommentVNode("",!0),P.showHeader?(c.openBlock(),c.createElementBlock("div",{key:1,class:c.normalizeClass([H.prefixCls+"-header"]),ref:"header",onMousewheel:E[0]||(E[0]=(...ut)=>N.handleMouseWheel&&N.handleMouseWheel(...ut))},[c.createVNode(ee,{"prefix-cls":H.prefixCls,styleObject:N.tableHeaderStyle,columns:H.cloneColumns,"column-rows":H.columnRows,"obj-data":H.objData,"columns-width":H.columnsWidth,data:H.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","obj-data","columns-width","data"])],34)):c.createCommentVNode("",!0),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-body"]),style:c.normalizeStyle(N.bodyStyle),ref:"body",onScroll:E[1]||(E[1]=(...ut)=>N.handleBodyScroll&&N.handleBodyScroll(...ut))},[c.createVNode(le,{ref:"tbody",draggable:P.draggable,"prefix-cls":H.prefixCls,styleObject:N.tableStyle,columns:H.cloneColumns,data:H.rebuildData,"row-key":P.rowKey,"columns-width":H.columnsWidth,"obj-data":H.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),[[c.vShow,!(N.localeNoDataText&&(!P.data||P.data.length===0)||N.localeNoFilteredDataText&&(!H.rebuildData||H.rebuildData.length===0))]]),P.showSummary&&P.data&&P.data.length?(c.openBlock(),c.createBlock(Ce,{key:2,ref:"summary","prefix-cls":H.prefixCls,styleObject:N.tableStyle,columns:H.cloneColumns,data:N.summaryData,"columns-width":H.columnsWidth},null,8,["prefix-cls","styleObject","columns","data","columns-width"])):c.createCommentVNode("",!0),c.withDirectives(c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-tip"]),style:c.normalizeStyle(N.bodyStyle),onScroll:E[2]||(E[2]=(...ut)=>N.handleBodyScroll&&N.handleBodyScroll(...ut))},[c.createElementVNode("table",SP,[c.createElementVNode("tbody",null,[c.createElementVNode("tr",null,[c.createElementVNode("td",{style:c.normalizeStyle({height:N.bodyStyle.height,width:`${H.headerWidth}px`})},[!P.data||P.data.length===0?(c.openBlock(),c.createElementBlock("span",{key:0,innerHTML:N.localeNoDataText},null,8,xP)):(c.openBlock(),c.createElementBlock("span",{key:1,innerHTML:N.localeNoFilteredDataText},null,8,m1))],4)])])])],38),[[c.vShow,!!N.localeNoDataText&&(!P.data||P.data.length===0)||!!N.localeNoFilteredDataText&&(!H.rebuildData||H.rebuildData.length===0)]]),N.isLeftFixed?(c.openBlock(),c.createElementBlock("div",{key:3,class:c.normalizeClass(N.fixedTableClasses),style:c.normalizeStyle(N.fixedTableStyle)},[P.showHeader?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.fixedHeaderClasses)},[c.createVNode(ee,{fixed:"left","prefix-cls":H.prefixCls,styleObject:N.fixedTableStyle,columns:N.leftFixedColumns,"column-rows":H.columnRows,"fixed-column-rows":H.leftFixedColumnRows,"obj-data":H.objData,"columns-width":H.columnsWidth,data:H.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-fixed-body"]),style:c.normalizeStyle(N.fixedBodyStyle),ref:"fixedBody",onMousewheel:E[3]||(E[3]=(...ut)=>N.handleFixedMousewheel&&N.handleFixedMousewheel(...ut)),"on:DOMMouseScroll":E[4]||(E[4]=(...ut)=>N.handleFixedMousewheel&&N.handleFixedMousewheel(...ut))},[c.createVNode(le,{fixed:"left",draggable:P.draggable,"prefix-cls":H.prefixCls,styleObject:N.fixedTableStyle,columns:N.leftFixedColumns,data:H.rebuildData,"row-key":P.rowKey,"columns-width":H.columnsWidth,"obj-data":H.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),P.showSummary&&P.data&&P.data.length?(c.openBlock(),c.createBlock(Ce,{key:1,fixed:"left","prefix-cls":H.prefixCls,styleObject:N.fixedTableStyle,columns:N.leftFixedColumns,data:N.summaryData,"columns-width":H.columnsWidth,style:c.normalizeStyle({"margin-top":H.showHorizontalScrollBar?H.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):c.createCommentVNode("",!0)],6)):c.createCommentVNode("",!0),N.isRightFixed?(c.openBlock(),c.createElementBlock("div",{key:4,class:c.normalizeClass(N.fixedRightTableClasses),style:c.normalizeStyle(N.fixedRightTableStyle)},[P.showHeader?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(N.fixedHeaderClasses)},[c.createVNode(ee,{fixed:"right","prefix-cls":H.prefixCls,styleObject:N.fixedRightTableStyle,columns:N.rightFixedColumns,"column-rows":H.columnRows,"fixed-column-rows":H.rightFixedColumnRows,"obj-data":H.objData,"columns-width":H.columnsWidth,data:H.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):c.createCommentVNode("",!0),c.createElementVNode("div",{class:c.normalizeClass([H.prefixCls+"-fixed-body"]),style:c.normalizeStyle(N.fixedBodyStyle),ref:"fixedRightBody",onMousewheel:E[5]||(E[5]=(...ut)=>N.handleFixedMousewheel&&N.handleFixedMousewheel(...ut)),"on:DOMMouseScroll":E[6]||(E[6]=(...ut)=>N.handleFixedMousewheel&&N.handleFixedMousewheel(...ut))},[c.createVNode(le,{fixed:"right",draggable:P.draggable,"prefix-cls":H.prefixCls,styleObject:N.fixedRightTableStyle,columns:N.rightFixedColumns,data:H.rebuildData,"row-key":P.rowKey,"columns-width":H.columnsWidth,"obj-data":H.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),P.showSummary&&P.data&&P.data.length?(c.openBlock(),c.createBlock(Ce,{key:1,fixed:"right","prefix-cls":H.prefixCls,styleObject:N.fixedRightTableStyle,columns:N.rightFixedColumns,data:N.summaryData,"columns-width":H.columnsWidth,style:c.normalizeStyle({"margin-top":H.showHorizontalScrollBar?H.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):c.createCommentVNode("",!0)],6)):c.createCommentVNode("",!0),N.isRightFixed?(c.openBlock(),c.createElementBlock("div",{key:5,class:c.normalizeClass([H.prefixCls+"-fixed-right-header"]),style:c.normalizeStyle(N.fixedRightHeaderStyle)},null,6)):c.createCommentVNode("",!0),H.showSlotFooter?(c.openBlock(),c.createElementBlock("div",{key:6,class:c.normalizeClass([H.prefixCls+"-footer"]),ref:"footer"},[c.renderSlot(v.$slots,"footer")],2)):c.createCommentVNode("",!0)],2),c.withDirectives(c.createElementVNode("div",CP,null,512),[[c.vShow,H.showResizeLine]]),P.showContextMenu?(c.openBlock(),c.createElementBlock("div",{key:0,class:"ivu-table-context-menu",style:c.normalizeStyle(H.contextMenuStyles)},[c.createVNode(we,{trigger:"custom",visible:H.contextMenuVisible,transfer:"",onOnClick:N.handleClickDropdownItem,onOnClickoutside:N.handleClickContextMenuOutside},{list:c.withCtx(()=>[c.createVNode(pe,null,{default:c.withCtx(()=>[c.renderSlot(v.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)):c.createCommentVNode("",!0),c.createVNode(We,{fix:"",size:"large",show:P.loading},{default:c.withCtx(()=>[c.renderSlot(v.$slots,"loading")]),_:3},8,["show"])],6)}var Va=$(AT,[["render",Xn]]);const MT={name:"TablePaste",components:{Row:pc,Col:Sa,Input:Sl,Table:Va},emits:["on-change","on-error","on-success"],props:{value:{type:String},inputProps:{type:Object,default(){return{}}},tableProps:{type:Object,default(){return{}}},hideTable:{type:Boolean,default:!1}},data(){return{content:"",tableColumns:[],tableData:[]}},watch:{value:{handler(v){this.handleResolveContent(v)},immediate:!0}},methods:{handleContentChange(v){const E=v.target.value.trim();this.$emit("on-change",E),this.handleResolveContent(E)},handleResolveContent(v){let E=[];v!==""&&v!==void 0&&(E=v.split(/[\n\u0085\u2028\u2029]|\r\n?/g).map(H=>H.split("	")));const P=this.handleGetErrorIndex(E),G=this.contentToTable(E);this.tableColumns=G.columns,this.tableData=G.data,P.length?this.$emit("on-error",G,P):this.$emit("on-success",G)},handleGetErrorIndex(v){const E=Te(v),P=[];if(E.length){const G=E[0].length;E.forEach((H,N)=>{H.length!==G&&P.push(N)})}return P},contentToTable(v){const E=Te(v);let P=[],G=[];return E.length>1&&(P=E.shift().map((H,N)=>({title:H,key:`key${N}`})),G=E.map(H=>{const N={};return H.forEach((ee,le)=>{N[`key${le}`]=ee}),N})),{columns:P,data:G}}}},kT={class:"ivu-table-paste"},g1={key:0,class:"ivu-table-paste-input"},wP={key:0,class:"ivu-table-paste-input"};function DT(v,E,P,G,H,N){const ee=c.resolveComponent("Input"),le=c.resolveComponent("Col"),Ce=c.resolveComponent("Table"),pe=c.resolveComponent("Row");return c.openBlock(),c.createElementBlock("div",kT,[P.hideTable?(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[P.value!==void 0||!v.$slots.default?(c.openBlock(),c.createElementBlock("div",wP,[c.renderSlot(v.$slots,"default",{},()=>[c.createVNode(ee,c.mergeProps({modelValue:H.content,"onUpdate:modelValue":E[1]||(E[1]=we=>H.content=we),type:"textarea"},P.inputProps,{onOnChange:N.handleContentChange}),null,16,["modelValue","onOnChange"])])])):c.createCommentVNode("",!0)],64)):(c.openBlock(),c.createBlock(pe,{key:0,gutter:32},{default:c.withCtx(()=>[c.createVNode(le,{span:"12"},{default:c.withCtx(()=>[P.value!==void 0||!v.$slots.default?(c.openBlock(),c.createElementBlock("div",g1,[c.renderSlot(v.$slots,"default",{},()=>[c.createVNode(ee,c.mergeProps({modelValue:H.content,"onUpdate:modelValue":E[0]||(E[0]=we=>H.content=we),type:"textarea"},P.inputProps,{onOnChange:N.handleContentChange}),null,16,["modelValue","onOnChange"])])])):c.createCommentVNode("",!0)]),_:3}),c.createVNode(le,{span:"12"},{default:c.withCtx(()=>[c.createVNode(Ce,c.mergeProps({columns:H.tableColumns,data:H.tableData},P.tableProps),null,16,["columns","data"])]),_:1})]),_:3}))])}var ix=$(MT,[["render",DT]]);const EP={name:"TagSelect",mixins:[Mo],components:{Tag:Ml,Icon:oe},emits:["on-change","on-checked-all","update:modelValue"],provide(){return{TagSelectInstance:this}},props:{modelValue:{type:Array,default(){return[]}},expandable:{type:Boolean,default:!1},hideCheckAll:{type:Boolean,default:!1},locale:{type:Object,default(){return{collapseText:"收起",expandText:"展开"}}}},data(){return{currentValue:this.modelValue,checkedAll:!1,expand:!1,tagSelectOptionList:[]}},computed:{classes(){return{"ivu-tag-select-with-expanded":this.expandable,"ivu-tag-select-expanded":this.expand}}},watch:{modelValue(v){this.currentValue=v,this.handleUpdateTags()}},methods:{handleUpdateTags(){let v=!0;this.tagSelectOptionList.map(E=>E.option).forEach(E=>{this.currentValue.indexOf(E.name)>=0?E.checked=!0:(E.checked=!1,v=!1)}),this.checkedAll=v},handleChangeTag(v){const E=[];let P=!0;this.tagSelectOptionList.map(G=>G.option).forEach(G=>{G.checked?E.push(G.name):P=!1}),this.currentValue=E,this.$emit("update:modelValue",E),this.$emit("on-change",[...E],v),this.handleFormItemChange("change",v),v&&(this.checkedAll=P)},handleCheckAll(v){this.checkedAll=v,this.tagSelectOptionList.map(E=>E.option).forEach(E=>{E.checked=v}),this.handleChangeTag(),this.$emit("on-checked-all",v)},handleToggleExpand(){this.expand=!this.expand}},mounted(){this.handleUpdateTags()}},TP={key:0,class:"ivu-tag-select-option"},y1={key:0},PT={key:1};function AP(v,E,P,G,H,N){const ee=c.resolveComponent("Tag"),le=c.resolveComponent("Icon");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["ivu-tag-select",N.classes])},[P.hideCheckAll?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",TP,[c.createVNode(ee,{checkable:"",checked:H.checkedAll,onOnChange:N.handleCheckAll,color:"primary"},{default:c.withCtx(()=>[c.createTextVNode("全部")]),_:1},8,["checked","onOnChange"])])),c.renderSlot(v.$slots,"default"),P.expandable?(c.openBlock(),c.createElementBlock("a",{key:1,class:"ivu-tag-select-expand-btn",onClick:E[0]||(E[0]=(...Ce)=>N.handleToggleExpand&&N.handleToggleExpand(...Ce))},[H.expand?(c.openBlock(),c.createElementBlock("span",y1,c.toDisplayString(P.locale.collapseText),1)):(c.openBlock(),c.createElementBlock("span",PT,c.toDisplayString(P.locale.expandText),1)),H.expand?(c.openBlock(),c.createBlock(le,{key:2,type:"ios-arrow-up"})):(c.openBlock(),c.createBlock(le,{key:3,type:"ios-arrow-down"}))])):c.createCommentVNode("",!0)],2)}var RT=$(EP,[["render",AP]]);const wr={name:"TagSelectOption",components:{Tag:Ml},inject:["TagSelectInstance"],props:{name:{type:[String,Number],required:!0},tagProps:{type:Object,default(){return{}}},color:{type:String,default:"primary"}},data(){return{checked:!1,id:mt(6)}},methods:{handleChange(v){this.checked=v,this.TagSelectInstance.handleChangeTag(this.name)},addOption(){this.TagSelectInstance.tagSelectOptionList.push({id:this.id,option:this})},removeOption(){const v=this.TagSelectInstance,E=v.tagSelectOptionList.findIndex(P=>P.id===this.id);v.tagSelectOptionList.splice(E,1)}},mounted(){this.addOption()},beforeUnmount(){this.removeOption()}},IT={class:"ivu-tag-select-option"};function Dr(v,E,P,G,H,N){const ee=c.resolveComponent("Tag");return c.openBlock(),c.createElementBlock("div",IT,[c.createVNode(ee,c.mergeProps({checkable:"",checked:H.checked,onOnChange:N.handleChange,color:P.color},P.tagProps),{default:c.withCtx(()=>[c.renderSlot(v.$slots,"default")]),_:3},16,["checked","onOnChange","color"])])}var b1=$(wr,[["render",Dr]]);const MP={name:"Text",mixins:[mv],render(){return c.h(gv,S(x(S({},this.$props),{component:"span"}),this.commonEvents()),this.commonSlots())}},kP="ivu-timeline",DP={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes(){return[`${kP}`,{[`${kP}-pending`]:this.pending}]}}};function pN(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("ul",{class:c.normalizeClass(N.classes)},[c.renderSlot(v.$slots,"default")],2)}var $T=$(DP,[["render",pN]]);const gp="ivu-timeline",Jh={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data(){return{dot:!1}},mounted(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses(){return`${gp}-item`},tailClasses(){return`${gp}-item-tail`},headClasses(){return[`${gp}-item-head`,{[`${gp}-item-head-custom`]:this.dot,[`${gp}-item-head-${this.color}`]:this.headColorShow}]},headColorShow(){return this.color==="blue"||this.color==="red"||this.color==="green"},customColor(){let v={};return this.color&&(this.headColorShow||(v={color:this.color,"border-color":this.color})),v},contentClasses(){return`${gp}-item-content`}}};function dr(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("li",{class:c.normalizeClass(N.itemClasses)},[c.createElementVNode("div",{class:c.normalizeClass(N.tailClasses)},null,2),c.createElementVNode("div",{class:c.normalizeClass(N.headClasses),style:c.normalizeStyle(N.customColor),ref:"dot"},[c.renderSlot(v.$slots,"dot")],6),c.createElementVNode("div",{class:c.normalizeClass(N.contentClasses)},[c.renderSlot(v.$slots,"default")],2)],2)}var ax=$(Jh,[["render",dr]]),_1={mixins:[hu,qg],components:{TimePickerPanel:Jg,RangeTimePickerPanel:oa},props:{type:{validator(v){return re(v,["time","timerange"])},default:"time"}},computed:{panel(){return this.type==="timerange"?"RangeTimePickerPanel":"TimePickerPanel"},ownPickerProps(){return{disabledHours:this.disabledHours,disabledMinutes:this.disabledMinutes,disabledSeconds:this.disabledSeconds,hideDisabledOptions:this.hideDisabledOptions}}},watch:{visible(v){v&&c.nextTick(()=>{this.timeSpinnerList.map(E=>E.timeSpinner).forEach(E=>E.updateScroll())})}}};const LT={name:"Title",mixins:[mv],props:{level:{type:Number,validator(v){return re(v,[1,2,3,4,5,6])},default:1}},render(){return c.h(gv,S(x(S({},this.$props),{component:`h${this.level}`}),this.commonEvents()),this.commonSlots())}},jv={name:"Search",components:{Input:Sl},emits:["on-query-change","on-query-clear"],props:{prefixCls:String,placeholder:String,query:String},data(){return{currentQuery:this.query}},watch:{query(v){this.currentQuery=v},currentQuery(v){this.$emit("on-query-change",v)}},computed:{icon(){return this.query===""?"ios-search":"ios-close-circle"}},methods:{handleClick(){this.currentQuery!==""&&(this.currentQuery="",this.$emit("on-query-clear"))}}};function NT(v,E,P,G,H,N){const ee=c.resolveComponent("Input");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(P.prefixCls)},[c.createVNode(ee,{modelValue:H.currentQuery,"onUpdate:modelValue":E[0]||(E[0]=le=>H.currentQuery=le),size:"small",icon:N.icon,placeholder:P.placeholder,onOnClick:N.handleClick},null,8,["modelValue","icon","placeholder","onOnClick"])],2)}var PP=$(jv,[["render",NT]]);const OT={name:"TransferList",components:{Search:PP,Checkbox:Up},inject:["TransferInstance"],emits:["on-checked-keys-change"],props:{prefixCls:String,data:Array,renderFormat:Function,checkedKeys:Array,listStyle:Object,title:[String,Number],filterable:Boolean,filterPlaceholder:String,filterMethod:Function,notFoundText:String,validKeysCount:Number},data(){return{showItems:[],query:"",showFooter:!0}},watch:{data(){this.updateFilteredData()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-with-footer`]:this.showFooter}]},bodyClasses(){return[`${this.prefixCls}-body`,{[`${this.prefixCls}-body-with-search`]:this.filterable,[`${this.prefixCls}-body-with-footer`]:this.showFooter}]},count(){const v=this.validKeysCount;return(v>0?`${v}/`:"")+`${this.data.length}`},checkedAll(){return this.filterData.filter(v=>!v.disabled).length===this.validKeysCount&&this.validKeysCount!==0},checkedAllDisabled(){return this.filterData.filter(v=>!v.disabled).length<=0},filterData(){return this.showItems.filter(v=>this.filterMethod(v,this.query))}},methods:{itemClasses(v){return[`${this.prefixCls}-content-item`,{[`${this.prefixCls}-content-item-disabled`]:v.disabled}]},showLabel(v){return this.renderFormat(v)},isCheck(v){return this.checkedKeys.some(E=>E===v.key)},select(v){if(v.disabled)return;const E=this.checkedKeys.indexOf(v.key);E>-1?this.checkedKeys.splice(E,1):this.checkedKeys.push(v.key),this.TransferInstance.handleCheckedKeys()},updateFilteredData(){this.showItems=this.data},toggleSelectAll(v){const E=v?this.filterData.filter(P=>!P.disabled||this.checkedKeys.indexOf(P.key)>-1).map(P=>P.key):this.filterData.filter(P=>P.disabled&&this.checkedKeys.indexOf(P.key)>-1).map(P=>P.key);this.$emit("on-checked-keys-change",E)},handleQueryClear(){this.query=""},handleQueryChange(v){this.query=v}},created(){this.updateFilteredData()},mounted(){this.showFooter=this.$slots.default!==void 0}},sx=["onClick"],S1=["innerHTML"];function RP(v,E,P,G,H,N){const ee=c.resolveComponent("Checkbox"),le=c.resolveComponent("Search");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(N.classes),style:c.normalizeStyle(P.listStyle)},[c.createElementVNode("div",{class:c.normalizeClass(P.prefixCls+"-header")},[c.createVNode(ee,{modelValue:N.checkedAll,disabled:N.checkedAllDisabled,"onUpdate:modelValue":N.toggleSelectAll},null,8,["modelValue","disabled","onUpdate:modelValue"]),c.createElementVNode("span",{class:c.normalizeClass(P.prefixCls+"-header-title"),onClick:E[0]||(E[0]=Ce=>N.toggleSelectAll(!N.checkedAll))},c.toDisplayString(P.title),3),c.createElementVNode("span",{class:c.normalizeClass(P.prefixCls+"-header-count")},c.toDisplayString(N.count),3)],2),c.createElementVNode("div",{class:c.normalizeClass(N.bodyClasses)},[P.filterable?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(P.prefixCls+"-body-search-wrapper")},[c.createVNode(le,{"prefix-cls":P.prefixCls+"-search",query:H.query,onOnQueryClear:N.handleQueryClear,onOnQueryChange:N.handleQueryChange,placeholder:P.filterPlaceholder},null,8,["prefix-cls","query","onOnQueryClear","onOnQueryChange","placeholder"])],2)):c.createCommentVNode("",!0),c.createElementVNode("ul",{class:c.normalizeClass(P.prefixCls+"-content")},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.filterData,(Ce,pe)=>(c.openBlock(),c.createElementBlock("li",{key:pe,class:c.normalizeClass(N.itemClasses(Ce)),onClick:c.withModifiers(we=>N.select(Ce),["prevent"])},[c.createVNode(ee,{modelValue:N.isCheck(Ce),disabled:Ce.disabled},null,8,["modelValue","disabled"]),c.createElementVNode("span",{innerHTML:N.showLabel(Ce)},null,8,S1)],10,sx))),128)),c.createElementVNode("li",{class:c.normalizeClass(P.prefixCls+"-content-not-found")},c.toDisplayString(P.notFoundText),3)],2)],2),H.showFooter?(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass(P.prefixCls+"-footer")},[c.renderSlot(v.$slots,"default")],2)):c.createCommentVNode("",!0)],6)}var Qh=$(OT,[["render",RP]]);const IP={name:"Operation",components:{Button:Oi,Icon:oe},inject:["TransferInstance"],props:{prefixCls:String,operations:Array,leftActive:Boolean,rightActive:Boolean,reverseOperation:Boolean},methods:{moveToLeft(){this.TransferInstance.moveTo("left")},moveToRight(){this.TransferInstance.moveTo("right")}}},BT={key:0},$P={key:0},LP={key:0},Zv={key:0};function km(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Button");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(P.prefixCls+"-operation")},[P.reverseOperation?(c.openBlock(),c.createElementBlock(c.Fragment,{key:0},[c.createVNode(le,{type:"primary",size:"small",disabled:!P.leftActive,onClick:N.moveToRight},{default:c.withCtx(()=>[P.operations[1]?(c.openBlock(),c.createElementBlock("span",BT,c.toDisplayString(P.operations[1]),1)):c.createCommentVNode("",!0),c.createVNode(ee,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"]),c.createVNode(le,{type:"primary",size:"small",disabled:!P.rightActive,onClick:N.moveToLeft},{default:c.withCtx(()=>[c.createVNode(ee,{type:"ios-arrow-back"}),P.operations[0]?(c.openBlock(),c.createElementBlock("span",$P,c.toDisplayString(P.operations[0]),1)):c.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"])],64)):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[c.createVNode(le,{type:"primary",size:"small",disabled:!P.rightActive,onClick:N.moveToLeft},{default:c.withCtx(()=>[c.createVNode(ee,{type:"ios-arrow-back"}),P.operations[0]?(c.openBlock(),c.createElementBlock("span",LP,c.toDisplayString(P.operations[0]),1)):c.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"]),c.createVNode(le,{type:"primary",size:"small",disabled:!P.leftActive,onClick:N.moveToRight},{default:c.withCtx(()=>[P.operations[1]?(c.openBlock(),c.createElementBlock("span",Zv,c.toDisplayString(P.operations[1]),1)):c.createCommentVNode("",!0),c.createVNode(ee,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"])],64))],2)}var FT=$(IP,[["render",km]]);const Rr="ivu-transfer",ud={name:"Transfer",mixins:[vt,Mo],emits:["on-change","on-selected-change"],provide(){return{TransferInstance:this}},render(){const v=this.$slots.default?this.$slots.default():"";return c.h("div",{class:this.classes},[c.h(Qh,{ref:"left",prefixCls:this.prefixCls+"-list",data:this.leftData,renderFormat:this.renderFormat,checkedKeys:this.leftCheckedKeys,validKeysCount:this.leftValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[0],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleLeftCheckedKeysChange},()=>v),c.h(FT,{prefixCls:this.prefixCls,operations:this.operations,leftActive:this.leftValidKeysCount>0,rightActive:this.rightValidKeysCount>0,reverseOperation:this.reverseOperation}),c.h(Qh,{ref:"right",prefixCls:this.prefixCls+"-list",data:this.rightData,renderFormat:this.renderFormat,checkedKeys:this.rightCheckedKeys,validKeysCount:this.rightValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[1],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleRightCheckedKeysChange},()=>v)])},props:{data:{type:Array,default(){return[]}},renderFormat:{type:Function,default(v){return v.label||v.key}},targetKeys:{type:Array,default(){return[]}},selectedKeys:{type:Array,default(){return[]}},listStyle:{type:Object,default(){return{}}},titles:{type:Array},operations:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!1},filterPlaceholder:{type:String},filterMethod:{type:Function,default(v,E){const P="label"in v?"label":"key";return v[P].indexOf(E)>-1}},notFoundText:{type:String},reverseOperation:{type:Boolean,default:!1}},data(){return{prefixCls:Rr,leftData:[],rightData:[],leftCheckedKeys:[],rightCheckedKeys:[]}},computed:{classes(){return[`${Rr}`]},leftValidKeysCount(){return this.getValidKeys("left").length},rightValidKeysCount(){return this.getValidKeys("right").length},localeFilterPlaceholder(){return this.filterPlaceholder===void 0?this.t("i.transfer.filterPlaceholder"):this.filterPlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.transfer.notFoundText"):this.notFoundText},localeTitles(){return this.titles===void 0?[this.t("i.transfer.titles.source"),this.t("i.transfer.titles.target")]:this.titles}},methods:{getValidKeys(v){return this[`${v}Data`].filter(E=>!E.disabled&&this[`${v}CheckedKeys`].indexOf(E.key)>-1).map(E=>E.key)},splitData(v=!1){this.leftData=[...this.data],this.rightData=[],this.targetKeys.length>0&&this.targetKeys.forEach(E=>{const P=this.leftData.filter((G,H)=>G.key===E?(this.leftData.splice(H,1),!0):!1);P&&P.length>0&&this.rightData.push(P[0])}),v&&this.splitSelectedKey()},splitSelectedKey(){const v=this.selectedKeys;v.length>0&&(this.leftCheckedKeys=this.leftData.filter(E=>v.indexOf(E.key)>-1).map(E=>E.key),this.rightCheckedKeys=this.rightData.filter(E=>v.indexOf(E.key)>-1).map(E=>E.key))},moveTo(v){const E=this.targetKeys,P=v==="left"?"right":"left",G=this.getValidKeys(P),H=v==="right"?G.concat(E):E.filter(N=>!G.some(ee=>N===ee));this.$refs[P].toggleSelectAll(!1),this.$emit("on-change",H,v,G),this.handleFormItemChange("change",{tarketKeys:H,direction:v,moveKeys:G})},handleLeftCheckedKeysChange(v){this.leftCheckedKeys=v},handleRightCheckedKeysChange(v){this.rightCheckedKeys=v},handleCheckedKeys(){const v=this.getValidKeys("left"),E=this.getValidKeys("right");this.$emit("on-selected-change",v,E)}},watch:{targetKeys(){this.splitData(!1)},data(){this.splitData(!1)}},mounted(){this.splitData(!0)}};var Su={name:"RenderCell",props:{render:Function,data:Object,node:Array},render(){const v={root:this.node[0],node:this.node[1],data:this.data};return this.render(c.h,v)}};const uh="ivu-tree",VT={name:"TreeNode",inject:["TreeInstance"],components:{Checkbox:Up,Icon:oe,CollapseTransition:or,Render:Su},props:{data:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1},appear:{type:Boolean,default:!1}},data(){return{prefixCls:uh,appearByClickArrow:!1,globalConfig:{}}},computed:{classes(){return[`${uh}-children`]},selectedCls(){return[{[`${uh}-node-selected`]:this.data.selected}]},arrowClasses(){return[`${uh}-arrow`,{[`${uh}-arrow-disabled`]:this.data.disabled,[`${uh}-arrow-open`]:this.data.expand}]},titleClasses(){return[`${uh}-title`,{[`${uh}-title-selected`]:this.data.selected}]},showArrow(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},isParentRender(){const v=Tt(this,"Tree");return v&&v.render},parentRender(){const v=Tt(this,"Tree");return v&&v.render?v.render:null},node(){const v=Tt(this,"Tree");return v?[v.flatState,v.flatState.find(E=>E.nodeKey===this.data.nodeKey)]:[]},children(){return this.data[this.childrenKey]},arrowType(){const v=this.globalConfig;let E="ios-arrow-forward";return v&&(v.tree.customArrow?E="":v.tree.arrow&&(E=v.tree.arrow)),E},customArrowType(){const v=this.globalConfig;let E="";return v&&v.tree.customArrow&&(E=v.tree.customArrow),E},arrowSize(){const v=this.globalConfig;let E="";return v&&v.tree.arrowSize&&(E=v.tree.arrowSize),E}},methods:{handleExpand(){const v=this.data;if(this.appearByClickArrow=!0,v[this.childrenKey].length===0){const E=Tt(this,"Tree");if(E&&E.loadData){this.data.loading=!0,E.loadData(v,P=>{this.data.loading=!1,P.length&&(this.data[this.childrenKey]=P,c.nextTick(()=>this.handleExpand()))});return}}v[this.childrenKey]&&v[this.childrenKey].length&&(this.data.expand=!this.data.expand,this.TreeInstance.handleToggleExpand(this.data))},handleClickNode(){this.TreeInstance.expandNode?this.showArrow&&this.handleExpand():this.TreeInstance.selectNode&&this.handleSelect()},handleSelect(){this.data.disabled||(this.TreeInstance.showCheckbox&&this.TreeInstance.checkDirectly?this.handleCheck():this.TreeInstance.handleOnSelected(this.data.nodeKey))},handleCheck(){if(this.data.disabled)return;const v={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.TreeInstance.handleOnCheck(v)},handleContextmenu(v,E){v.contextmenu&&(E.preventDefault(),this.TreeInstance.handleOnContextmenu({data:v,event:E}))},handlePreventSelect(v,E){v.contextmenu&&E.preventDefault()}},created(){const v=c.getCurrentInstance();this.globalConfig=v.appContext.config.globalProperties.$VIEWUI}},lx={key:0,class:"ivu-tree-expand"};function dd(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("Checkbox"),Ce=c.resolveComponent("Render"),pe=c.resolveComponent("TreeNode"),we=c.resolveComponent("collapse-transition");return c.openBlock(),c.createElementBlock("ul",{class:c.normalizeClass(N.classes)},[c.createElementVNode("li",{onContextmenu:E[2]||(E[2]=c.withModifiers(We=>N.handleContextmenu(P.data,We),["stop"])),onSelectstart:E[3]||(E[3]=c.withModifiers(We=>N.handlePreventSelect(P.data,We),["stop"]))},[c.createElementVNode("span",{class:c.normalizeClass(N.arrowClasses),onClick:E[0]||(E[0]=(...We)=>N.handleExpand&&N.handleExpand(...We))},[N.showArrow?(c.openBlock(),c.createBlock(ee,{key:0,type:N.arrowType,custom:N.customArrowType,size:N.arrowSize},null,8,["type","custom","size"])):c.createCommentVNode("",!0),N.showLoading?(c.openBlock(),c.createBlock(ee,{key:1,type:"ios-loading",class:"ivu-load-loop"})):c.createCommentVNode("",!0)],2),P.showCheckbox?(c.openBlock(),c.createBlock(le,{key:0,"model-value":P.data.checked,indeterminate:P.data.indeterminate,disabled:P.data.disabled||P.data.disableCheckbox,onClick:c.withModifiers(N.handleCheck,["prevent"])},null,8,["model-value","indeterminate","disabled","onClick"])):c.createCommentVNode("",!0),c.createElementVNode("span",{class:c.normalizeClass(N.titleClasses),onClick:E[1]||(E[1]=(...We)=>N.handleClickNode&&N.handleClickNode(...We))},[P.data.render?(c.openBlock(),c.createBlock(Ce,{key:0,render:P.data.render,data:P.data,node:N.node},null,8,["render","data","node"])):N.isParentRender?(c.openBlock(),c.createBlock(Ce,{key:1,render:N.parentRender,data:P.data,node:N.node},null,8,["render","data","node"])):(c.openBlock(),c.createElementBlock(c.Fragment,{key:2},[c.createTextVNode(c.toDisplayString(P.data.title),1)],64))],2),c.createVNode(we,{appear:P.appear},{default:c.withCtx(()=>[P.data.expand?(c.openBlock(),c.createElementBlock("div",lx,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(N.children,(We,ut)=>(c.openBlock(),c.createBlock(pe,{appear:H.appearByClickArrow,key:ut,data:We,multiple:P.multiple,"show-checkbox":P.showCheckbox,"children-key":P.childrenKey},null,8,["appear","data","multiple","show-checkbox","children-key"]))),128))])):c.createCommentVNode("",!0)]),_:1},8,["appear"])],32)],2)}var x1=$(VT,[["render",dd]]);const NP="ivu-tree",cx={name:"Tree",mixins:[vt],components:{TreeNode:x1,Dropdown:Wi,DropdownMenu:Ph},emits:["on-select-change","on-check-change","on-contextmenu","on-toggle-expand"],provide(){return{TreeInstance:this}},props:{data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function},selectNode:{type:Boolean,default:!0},expandNode:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:NP,stateTree:this.data,flatState:[],contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},watch:{data:{deep:!0,handler(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText(){return typeof this.emptyText>"u"?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState(){let v=0,E=this.childrenKey;const P=[];function G(H,N){H.nodeKey=v++,P[H.nodeKey]={node:H,nodeKey:H.nodeKey},typeof N<"u"&&(P[H.nodeKey].parent=N.nodeKey,P[N.nodeKey][E].push(H.nodeKey)),H[E]&&(P[H.nodeKey][E]=[],H[E].forEach(ee=>G(ee,H)))}return this.stateTree.forEach(H=>{G(H)}),P},updateTreeUp(v){const E=this.flatState[v].parent;if(typeof E>"u"||this.checkStrictly)return;const P=this.flatState[v].node,G=this.flatState[E].node;P.checked==G.checked&&P.indeterminate==G.indeterminate||(P.checked==!0?(G.checked=G[this.childrenKey].every(H=>H.checked),G.indeterminate=!G.checked):(G.checked=!1,G.indeterminate=G[this.childrenKey].some(H=>H.checked||H.indeterminate)),this.updateTreeUp(E))},rebuildTree(){this.getCheckedNodes().forEach(v=>{this.updateTreeDown(v,{checked:!0});const E=this.flatState[v.nodeKey].parent;if(!E&&E!==0)return;const P=this.flatState[E].node;typeof v.checked<"u"&&v.checked&&P.checked!=v.checked&&this.updateTreeUp(v.nodeKey)})},getSelectedNodes(){return this.flatState.filter(v=>v.node.selected).map(v=>v.node)},getCheckedNodes(){return this.flatState.filter(v=>v.node.checked).map(v=>v.node)},getCheckedAndIndeterminateNodes(){return this.flatState.filter(v=>v.node.checked||v.node.indeterminate).map(v=>v.node)},updateTreeDown(v,E={}){if(!this.checkStrictly){for(let P in E)v[P]=E[P];v[this.childrenKey]&&v[this.childrenKey].forEach(P=>{this.updateTreeDown(P,E)})}},handleSelect(v){if(!this.flatState[v])return;const E=this.flatState[v].node;if(!this.multiple){const P=this.flatState.findIndex(G=>G.node.selected);P>=0&&P!==v&&(this.flatState[P].node.selected=!1)}E.selected=!E.selected,this.$emit("on-select-change",this.getSelectedNodes(),E)},handleCheck({checked:v,nodeKey:E}){if(!this.flatState[E])return;const P=this.flatState[E].node;P.checked=v,P.indeterminate=!1,this.updateTreeUp(E),this.updateTreeDown(P,{checked:v,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes(),P)},handleContextmenu({data:v,event:E}){this.contextMenuVisible&&this.handleClickContextMenuOutside(),c.nextTick(()=>{const P=this.$refs.treeWrap.getBoundingClientRect(),G={left:`${E.clientX-P.left}px`,top:`${E.clientY-P.top}px`};this.contextMenuStyles=G,this.contextMenuVisible=!0,this.$emit("on-contextmenu",v,E,G)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnCheck(v){this.handleCheck(v)},handleOnSelected(v){this.handleSelect(v)},handleToggleExpand(v){this.$emit("on-toggle-expand",v)},handleOnContextmenu(v){this.handleContextmenu(v)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.flatState=this.compileFlatState(),this.rebuildTree()}};function zT(v,E,P,G,H,N){const ee=c.resolveComponent("TreeNode"),le=c.resolveComponent("DropdownMenu"),Ce=c.resolveComponent("Dropdown");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(H.prefixCls),ref:"treeWrap"},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(H.stateTree,(pe,we)=>(c.openBlock(),c.createBlock(ee,{key:we,data:pe,visible:"",multiple:P.multiple,"show-checkbox":P.showCheckbox,"children-key":P.childrenKey},null,8,["data","multiple","show-checkbox","children-key"]))),128)),H.stateTree.length?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock("div",{key:0,class:c.normalizeClass([H.prefixCls+"-empty"])},c.toDisplayString(N.localeEmptyText),3)),c.createElementVNode("div",{class:"ivu-tree-context-menu",style:c.normalizeStyle(H.contextMenuStyles)},[c.createVNode(Ce,{trigger:"custom",visible:H.contextMenuVisible,transfer:"",onOnClick:N.handleClickDropdownItem,onOnClickoutside:N.handleClickContextMenuOutside},{list:c.withCtx(()=>[c.createVNode(le,null,{default:c.withCtx(()=>[c.renderSlot(v.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var C1=$(cx,[["render",zT]]);const ux={name:"TreeSelect",components:{Select:ea,Tree:C1},emits:["on-change","update:modelValue","on-open-change"],mixins:[Mo],props:{modelValue:{type:[String,Number,Array]},data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default(){const v=c.getCurrentInstance().appContext.config.globalProperties;return!v.$VIEWUI||v.$VIEWUI.transfer===""?!1:v.$VIEWUI.transfer}}},data(){let v=this.modelValue;return v===null&&(this.multiple?v=[]:v=""),{currentValue:v,isChangeValueInTree:!1,isValueChangeByTree:!1,isValueNull:!1}},watch:{modelValue(v){if(this.isChangeValueInTree)this.isChangeValueInTree=!1;else{let E=v;E===null&&(this.isValueNull=!0,this.multiple?E=[]:E=""),this.currentValue=E,this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0)}},data(){this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0))}},computed:{valueToArray(){return typeof this.currentValue=="object"?this.currentValue:[this.currentValue]},isCheckboxUsable(){return this.multiple&&this.showCheckbox},transferClassName(){return this.transfer?"ivu-tree-select-transfer":""},classes(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode(v,E){if(this.multiple)v.length?(this.currentValue=v.map(P=>P.value),this.handleUpdateSelectValue(E.value,E.title)):(this.currentValue=[],this.handleUpdateSelectValue("",""));else if(v.length){const P=v[0];this.currentValue=P.value,this.handleUpdateSelectValue(P.value,P.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("update:modelValue",this.currentValue),this.$emit("on-change",this.currentValue),this.handleFormItemChange("change",this.currentValue)},handleUpdateTreeNodes(v,E=!1){v.forEach(P=>{this.valueToArray.indexOf(P.value)>=0?(this.isCheckboxUsable?P.checked=!0:P.selected=!0,this.handleUpdateSelectValue(P.value,P.title)):this.isCheckboxUsable?P.checked=!1:P.selected=!1,P.children&&P.children.length&&this.handleUpdateTreeNodes(P.children)}),E&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue(v,E){v===""?this.$refs.select.reset():(this.isValueChangeByTree=!0,this.$refs.select.onOptionClick({value:v,label:E}))},handleChange(v){this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=v,this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",v),this.$emit("on-change",v),this.handleFormItemChange("change",v),this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0),c.nextTick(()=>{this.isValueChangeByTree=!1}))},handleOpenChange(v){this.$emit("on-open-change",v)}},mounted(){this.handleUpdateTreeNodes(this.data,!0)}};function UT(v,E,P,G,H,N){const ee=c.resolveComponent("Tree"),le=c.resolveComponent("Select");return c.openBlock(),c.createBlock(le,c.mergeProps({ref:"select"},v.$attrs,{multiple:P.multiple,class:["ivu-tree-select",N.classes],"transfer-class-name":N.transferClassName,onOnChange:N.handleChange,onOnOpenChange:N.handleOpenChange,hideNotFound:"",transfer:P.transfer}),{default:c.withCtx(()=>[c.createVNode(ee,{data:P.data,multiple:P.multiple,onOnSelectChange:N.handleSelectNode,onOnCheckChange:N.handleSelectNode,"check-strictly":"","show-checkbox":P.multiple&&P.showCheckbox,"check-directly":"","load-data":P.loadData},null,8,["data","multiple","onOnSelectChange","onOnCheckChange","show-checkbox","load-data"])]),_:1},16,["multiple","class","transfer-class-name","onOnChange","onOnOpenChange","transfer"])}var HT=$(ux,[["render",UT]]);const OP={name:"Typography"},BP={class:"ivu-typography"};function w1(v,E,P,G,H,N){return c.openBlock(),c.createElementBlock("article",BP,[c.renderSlot(v.$slots,"default")])}var Dm=$(OP,[["render",w1]]);const vp="ivu-upload",FP={name:"UploadList",components:{Icon:oe,iProgress:t1},emits:["on-file-click","on-file-preview","on-file-remove"],props:{files:{type:Array,default(){return[]}}},data(){return{prefixCls:vp}},methods:{fileCls(v){return[`${vp}-list-file`,{[`${vp}-list-file-finish`]:v.status==="finished"}]},handleClick(v){this.$emit("on-file-click",v)},handlePreview(v){this.$emit("on-file-preview",v)},handleRemove(v){this.$emit("on-file-remove",v)},format(v){const E=v.name.split(".").pop().toLocaleLowerCase()||"";let P="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(E)>-1&&(P="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(E)>-1&&(P="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(E)>-1&&(P="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(E)>-1&&(P="md-document"),["numbers","csv","xls","xlsx"].indexOf(E)>-1&&(P="ios-stats"),["keynote","ppt","pptx"].indexOf(E)>-1&&(P="ios-videocam"),P},parsePercentage(v){return parseInt(v,10)}}},VP=["onClick"],GT=["onClick"];function WT(v,E,P,G,H,N){const ee=c.resolveComponent("Icon"),le=c.resolveComponent("i-progress");return c.openBlock(),c.createElementBlock("ul",{class:c.normalizeClass([H.prefixCls+"-list"])},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(P.files,(Ce,pe)=>(c.openBlock(),c.createElementBlock("li",{key:pe,class:c.normalizeClass(N.fileCls(Ce)),onClick:we=>N.handleClick(Ce)},[c.createElementVNode("span",{onClick:we=>N.handlePreview(Ce)},[c.createVNode(ee,{type:N.format(Ce)},null,8,["type"]),c.createTextVNode(" "+c.toDisplayString(Ce.name),1)],8,GT),c.withDirectives(c.createVNode(ee,{type:"ios-close",class:c.normalizeClass([H.prefixCls+"-list-remove"]),onClick:we=>N.handleRemove(Ce)},null,8,["class","onClick"]),[[c.vShow,Ce.status==="finished"]]),c.createVNode(c.Transition,{name:"fade"},{default:c.withCtx(()=>[Ce.showProgress?(c.openBlock(),c.createBlock(le,{key:0,"stroke-width":2,percent:N.parsePercentage(Ce.percentage),status:Ce.status==="finished"&&Ce.showProgress?"success":"normal"},null,8,["percent","status"])):c.createCommentVNode("",!0)]),_:2},1024)],10,VP))),128))],2)}var YT=$(FP,[["render",WT]]);function jT(v,E,P){const G=`fail to post ${v} ${P.status}'`,H=new Error(G);return H.status=P.status,H.method="post",H.url=v,H}function ZT(v){const E=v.responseText||v.response;if(!E)return E;try{return JSON.parse(E)}catch{return E}}function dx(v){if(typeof XMLHttpRequest>"u")return;const E=new XMLHttpRequest,P=v.action;E.upload&&(E.upload.onprogress=function(N){N.total>0&&(N.percent=N.loaded/N.total*100),v.onProgress(N)});const G=new FormData;v.data&&Object.keys(v.data).map(N=>{G.append(N,v.data[N])}),G.append(v.filename,v.file),E.onerror=function(N){v.onError(N)},E.onload=function(){if(E.status<200||E.status>=300)return v.onError(jT(P,v,E),ZT(E));v.onSuccess(ZT(E))},E.open("post",P,!0),v.withCredentials&&"withCredentials"in E&&(E.withCredentials=!0);const H=v.headers||{};for(let N in H)H.hasOwnProperty(N)&&H[N]!==null&&E.setRequestHeader(N,H[N]);E.send(G)}const Pm="ivu-upload",zP={name:"Upload",mixins:[Mo],components:{UploadList:YT},props:{action:{type:String,required:!0},headers:{type:Object,default(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator(v){return re(v,["select","drag"])},default:"select"},format:{type:Array,default(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default(){return{}}},onSuccess:{type:Function,default(){return{}}},onError:{type:Function,default(){return{}}},onRemove:{type:Function,default(){return{}}},onPreview:{type:Function,default(){return{}}},onExceededSize:{type:Function,default(){return{}}},onFormatError:{type:Function,default(){return{}}},defaultFileList:{type:Array,default(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},webkitdirectory:{type:Boolean,default:!1}},data(){return{prefixCls:Pm,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes(){return[`${Pm}`,{[`${Pm}-select`]:this.type==="select",[`${Pm}-drag`]:this.type==="drag",[`${Pm}-dragOver`]:this.type==="drag"&&this.dragOver}]}},methods:{handleClick(){this.itemDisabled||this.$refs.input.click()},handleChange(v){const E=v.target.files;!E||(this.uploadFiles(E),this.$refs.input.value=null)},onDrop(v){this.dragOver=!1,!this.itemDisabled&&this.uploadFiles(v.dataTransfer.files)},handlePaste(v){this.itemDisabled||this.paste&&this.uploadFiles(v.clipboardData.files)},uploadFiles(v){let E=Array.prototype.slice.call(v);this.multiple||(E=E.slice(0,1)),E.length!==0&&E.forEach(P=>{this.upload(P)})},upload(v){if(!this.beforeUpload)return this.post(v);const E=this.beforeUpload(v);E&&E.then?E.then(P=>{Object.prototype.toString.call(P)==="[object File]"?this.post(P):this.post(v)},()=>{}):E!==!1&&this.post(v)},post(v){if(this.format.length){const E=v.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(P=>P.toLocaleLowerCase()===E))return this.onFormatError(v,this.fileList),!1}if(this.maxSize&&v.size>this.maxSize*1024)return this.onExceededSize(v,this.fileList),!1;this.handleStart(v),new FormData().append(this.name,v),dx({headers:this.headers,withCredentials:this.withCredentials,file:v,data:this.data,filename:this.name,action:this.action,onProgress:E=>{this.handleProgress(E,v)},onSuccess:E=>{this.handleSuccess(E,v)},onError:(E,P)=>{this.handleError(E,P,v)}})},handleStart(v){v.uid=Date.now()+this.tempIndex++;const E={status:"uploading",name:v.name,size:v.size,percentage:0,uid:v.uid,showProgress:!0};this.fileList.push(E)},getFile(v){const E=this.fileList;let P;return E.every(G=>(P=v.uid===G.uid?G:null,!P)),P},handleProgress(v,E){const P=this.getFile(E);this.onProgress(v,P,this.fileList),P.percentage=v.percent||0},handleSuccess(v,E){const P=this.getFile(E);P&&(P.status="finished",P.response=v,this.onSuccess(v,P,this.fileList),this.handleFormItemChange("change",P),setTimeout(()=>{P.showProgress=!1},1e3))},handleError(v,E,P){const G=this.getFile(P),H=this.fileList;G.status="fail",H.splice(H.indexOf(G),1),this.onError(v,E,P)},handleRemove(v){const E=this.fileList;E.splice(E.indexOf(v),1),this.onRemove(v,E)},handlePreview(v){v.status==="finished"&&this.onPreview(v)},clearFiles(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler(v){this.fileList=v.map(E=>(E.status="finished",E.percentage=100,E.uid=Date.now()+this.tempIndex++,E))}}}},UP=["multiple","webkitdirectory","accept"];function yp(v,E,P,G,H,N){const ee=c.resolveComponent("upload-list");return c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass([H.prefixCls])},[c.createElementVNode("div",{class:c.normalizeClass(N.classes),onClick:E[1]||(E[1]=(...le)=>N.handleClick&&N.handleClick(...le)),onDrop:E[2]||(E[2]=c.withModifiers((...le)=>N.onDrop&&N.onDrop(...le),["prevent"])),onPaste:E[3]||(E[3]=(...le)=>N.handlePaste&&N.handlePaste(...le)),onDragover:E[4]||(E[4]=c.withModifiers(le=>H.dragOver=!0,["prevent"])),onDragleave:E[5]||(E[5]=c.withModifiers(le=>H.dragOver=!1,["prevent"]))},[c.createElementVNode("input",{ref:"input",type:"file",class:c.normalizeClass([H.prefixCls+"-input"]),onChange:E[0]||(E[0]=(...le)=>N.handleChange&&N.handleChange(...le)),multiple:P.multiple,webkitdirectory:P.webkitdirectory,accept:P.accept},null,42,UP),c.renderSlot(v.$slots,"default")],34),c.renderSlot(v.$slots,"tip"),P.showUploadList?(c.openBlock(),c.createBlock(ee,{key:0,files:H.fileList,onOnFileRemove:N.handleRemove,onOnFilePreview:N.handlePreview},null,8,["files","onOnFileRemove","onOnFilePreview"])):c.createCommentVNode("",!0)],2)}var hx=$(zP,[["render",yp]]);const fx={name:"UserName",mixins:[Sg],data(){return{className:"ivu-login-username",prefix:"ios-contact-outline",placeholder:"请输入用户名",type:"text",validateMessage:"请输入用户名！"}}},HP={name:"WordCount",components:{Circle:kg},props:{value:{type:[String,Number],default:""},total:{type:Number,default:0},hideTotal:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},size:{type:[String,Number],default:14}},computed:{isOverflow(){return this.value.length>this.total},percent(){let v=this.value.length/this.total*100;return v>100&&(v=100),v},strokeColor(){return this.isOverflow?"#ed4014":"#2d8cf0"}}},qT={class:"ivu-word-count"},Rm={key:0,class:"ivu-word-count-prefix"},KT={key:1,class:"ivu-word-count-prefix ivu-word-count-overflow"},Im={key:3,class:"ivu-word-count-overflow"},E1={key:5,class:"ivu-word-count-suffix"},Ms={key:6,class:"ivu-word-count-suffix ivu-word-count-overflow"};function XT(v,E,P,G,H,N){const ee=c.resolveComponent("Circle");return c.openBlock(),c.createElementBlock("div",qT,[P.circle?(c.openBlock(),c.createBlock(ee,{key:0,percent:N.percent,size:P.size,"stroke-color":N.strokeColor},null,8,["percent","size","stroke-color"])):(c.openBlock(),c.createElementBlock(c.Fragment,{key:1},[N.isOverflow?(c.openBlock(),c.createElementBlock("span",KT,[c.renderSlot(v.$slots,"prefix-overflow")])):(c.openBlock(),c.createElementBlock("span",Rm,[c.renderSlot(v.$slots,"prefix")])),!N.isOverflow||!P.overflow?(c.openBlock(),c.createElementBlock("span",{key:2,class:c.normalizeClass({"ivu-word-count-overflow":N.isOverflow})},[c.renderSlot(v.$slots,"length",{length:P.value.length},()=>[c.createTextVNode(c.toDisplayString(P.value.length),1)])],2)):(c.openBlock(),c.createElementBlock("span",Im,c.toDisplayString(P.value.length-P.total),1)),P.hideTotal?c.createCommentVNode("",!0):(c.openBlock(),c.createElementBlock(c.Fragment,{key:4},[c.renderSlot(v.$slots,"separator",{},()=>[c.createTextVNode(" / ")]),c.renderSlot(v.$slots,"total",{total:P.total},()=>[c.createTextVNode(c.toDisplayString(P.total),1)])],64)),N.isOverflow?(c.openBlock(),c.createElementBlock("span",Ms,[c.renderSlot(v.$slots,"suffix-overflow")])):(c.openBlock(),c.createElementBlock("span",E1,[c.renderSlot(v.$slots,"suffix")]))],64))])}var JT=$(HP,[["render",XT]]),QT=Object.freeze(Object.defineProperty({__proto__:null,Affix:Z,Alert:et,Anchor:Gt,AnchorLink:Ae,Auth:Kt,AutoComplete:$s,Avatar:Ef,AvatarList:Ni,BackTop:Af,Badge:fg,Breadcrumb:Rp,BreadcrumbItem:R0,Button:Oi,ButtonGroup:os,Calendar:yg,Captcha:Mh,Card:Y0,Carousel:dw,CarouselItem:yi,Cascader:j0,Cell:Yu,CellGroup:fw,Checkbox:Up,CheckboxGroup:qs,Circle:kg,City:Ig,Col:Sa,Collapse:Sc,ColorPicker:qu,Content:uu,Copy:Cc,CountDown:wc,CountUp:Ql,DatePicker:fu,Description:P_,DescriptionList:ul,Divider:Ac,Drawer:Fw,Dropdown:Wi,DropdownItem:_s,DropdownMenu:Ph,Ellipsis:iv,Email:Sy,Exception:Us,Footer:F_,FooterToolbar:Gw,Form:ec,FormItem:Rn,GlobalFooter:H_,Grid:cE,GridItem:dE,Header:Q_,Icon:oe,Image:gE,ImagePreview:Wh,Input:Sl,InputNumber:Ly,Layout:yE,Link:aS,List:qd,ListItem:cS,ListItemMeta:CE,LoadingBar:pm,Login:Xd,Menu:Uy,MenuGroup:Es,MenuItem:hl,Message:Bh,Mobile:Yh,Modal:nc,Notice:Ev,Notification:DE,NotificationItem:aa,NotificationTab:Dv,NumberInfo:TS,Numeral:pl,Option:Pp,OptionGroup:ip,Page:jE,PageHeader:FD,Panel:xm,Paragraph:QE,Password:UD,Poptip:NS,Progress:t1,Radio:ms,RadioGroup:I0,Rate:Ov,Result:o1,Row:pc,Scroll:i1,ScrollIntoView:BS,ScrollTop:s1,Select:ea,Sider:rT,Skeleton:Am,SkeletonItem:zv,Slider:c1,Space:cT,Spin:tc,Split:GS,Step:pT,Steps:jS,Submenu:mT,Submit:qS,Switch:KS,Table:Va,TablePaste:ix,TabPane:ic,Tabs:Tv,Tag:Ml,TagSelect:RT,TagSelectOption:b1,Text:MP,Time:jh,Timeline:$T,TimelineItem:ax,TimePicker:_1,Title:LT,Tooltip:bn,Transfer:ud,Tree:C1,TreeSelect:HT,Trend:Pv,Typography:Dm,Upload:hx,UserName:fx,WordCount:JT},Symbol.toStringTag,{value:"Module"})),eA={mounted(v,E){E.value&&(Be(v,"ivu-line-clamp"),v.style["-webkit-line-clamp"]=E.value)},updated(v,E){E.value&&(v.style["-webkit-line-clamp"]=E.value)},unmounted(v){ue(v,"ivu-line-clamp"),v.style["-webkit-line-clamp"]=null}},GP={mounted(v,E){function P(G){E.value(G)}v.__resizeHandler__=P,v.__observer__=im(),v.__observer__.listenTo(v,P)},updated(){},unmounted(v,E){v.__observer__.removeListener(v,v.__resizeHandler__),delete v.__resizeHandler__,delete v.__observer__}};function vl(v){return String(v).endsWith("%")?"":"px"}var ef={display:{mounted(v,E){E.value&&(v.style.display=E.value)},updated(v,E){E.value&&(v.style.display=E.value)},unmounted(v){v.style.display=null}},width:{mounted(v,E){E.value&&(v.style.width=E.value+vl(E.value))},updated(v,E){E.value&&(v.style.width=E.value+vl(E.value))},unmounted(v){v.style.width=null}},height:{mounted(v,E){E.value&&(v.style.height=E.value+vl(E.value))},updated(v,E){E.value&&(v.style.height=E.value+vl(E.value))},unmounted(v){v.style.height=null}},margin:{mounted(v,E){E.value&&(v.style.margin=E.value+vl(E.value))},updated(v,E){E.value&&(v.style.margin=E.value+vl(E.value))},unmounted(v){v.style.margin=null}},padding:{mounted(v,E){E.value&&(v.style.padding=E.value+vl(E.value))},updated(v,E){E.value&&(v.style.padding=E.value+vl(E.value))},unmounted(v){v.style.padding=null}},font:{mounted(v,E){E&&E.value&&(v.style.fontSize=`${E.value}px`)},updated(v,E){E&&E.value&&(v.style.fontSize=`${E.value}px`)},unmounted(v){v.style.fontSize=null}},color:{mounted(v,E){E.value&&(v.style.color=E.value)},updated(v,E){E.value&&(v.style.color=E.value)},unmounted(v){v.style.color=null}},bgColor:{mounted(v,E){E.value&&(v.style.backgroundColor=E.value)},updated(v,E){E.value&&(v.style.backgroundColor=E.value)},unmounted(v){v.style.backgroundColor=null}}},WP={name:"view-ui-plus",version:"1.3.14",title:"ViewUIPlus",description:"A high quality UI components Library with Vue.js 3",homepage:"http://www.iviewui.com",keywords:["iview","vue","viewui","viewuiplus","vue.js","component","components","ui","framework"],main:"dist/viewuiplus.min.js",typings:"types/index.d.ts",files:["dist","src","types"],scripts:{dev:"vue-cli-service serve",build:"npm run build:prod && npm run build:style && npm run build:lang","build:style":"gulp --gulpfile build/build-style.js","build:prod":"vite build","build:lang":"vite build --config build/vite.lang.config.js",lint:"vue-cli-service lint --fix"},repository:{type:"git",url:"https://github.com/view-design/ViewUIPlus"},author:"Aresn",license:"MIT",bugs:{url:"https://github.com/view-design/ViewUIPlus/issues"},dependencies:{"async-validator":"^3.3.0","countup.js":"^1.9.3",dayjs:"^1.11.0",deepmerge:"^2.2.1","element-resize-detector":"^1.2.0","js-calendar":"^1.2.3","lodash.chunk":"^4.2.0","lodash.throttle":"^4.1.1",numeral:"^2.0.6","popper.js":"^1.14.6",select:"^1.1.2",tinycolor2:"^1.4.1","v-click-outside-x":"^3.7.1"},devDependencies:{"@vitejs/plugin-vue":"^1.9.3","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-service":"~4.5.0","@vue/compiler-sfc":"^3.0.0","babel-eslint":"^10.1.0","babel-plugin-import":"^1.13.3",chai:"^4.2.0","copy-webpack-plugin":"^6.4.1","cross-env":"^5.2.0",eslint:"^6.7.2","eslint-plugin-vue":"^7.0.0-0",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-clean-css":"^4.3.0","gulp-less":"^4.0.1","gulp-rename":"^2.0.0",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sinon-chai":"^1.3.3","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"^0.0.32","karma-webpack":"^2.0.13",less:"^2.7.3","less-loader":"^4.1.0","lint-staged":"^10.5.4",lolex:"^2.7.5",mocha:"^5.0.4",sinon:"^4.4.2","sinon-chai":"^3.3.0","style-loader":"^0.20.2",tslint:"^5.14.0",typescript:"^3.3.4000","uglifyjs-webpack-plugin":"^1.3.0","url-loader":"^1.1.2",vite:"^2.6.4",vue:"^3.2.47","vue-hot-reload-api":"^2.3.4","vue-html-loader":"^1.2.4","vue-loader":"^17.0.0","vue-router":"^4.0.14","vue-style-loader":"^4.1.3","vue-template-compiler":"^2.6.14"}};const fi={display:ef.display,width:ef.width,height:ef.height,margin:ef.margin,padding:ef.padding,font:ef.font,color:ef.color,"bg-color":ef.bgColor,resize:GP,"line-clamp":eA},tf=x(S({},QT),{iButton:Oi,iCircle:kg,iCol:Sa,iContent:uu,iForm:ec,iFooter:F_,iHeader:Q_,iInput:Sl,iMenu:Uy,iOption:Pp,iProgress:t1,iSelect:ea,iSwitch:KS,iTable:Va,iTime:jh}),T1=function(v,E={}){T1.installed||(E.locale&&ze.use(E.locale),E.i18n&&ze.i18n(E.i18n),Object.keys(tf).forEach(P=>{v.component(P,tf[P])}),Object.keys(fi).forEach(P=>{v.directive(P,fi[P])}),v.config.globalProperties.$VIEWUI={size:E.size||"",capture:"capture"in E?E.capture:!0,transfer:"transfer"in E?E.transfer:"",cell:{arrow:E.cell&&E.cell.arrow?E.cell.arrow:"",customArrow:E.cell&&E.cell.customArrow?E.cell.customArrow:"",arrowSize:E.cell&&E.cell.arrowSize?E.cell.arrowSize:""},menu:{arrow:E.menu&&E.menu.arrow?E.menu.arrow:"",customArrow:E.menu&&E.menu.customArrow?E.menu.customArrow:"",arrowSize:E.menu&&E.menu.arrowSize?E.menu.arrowSize:""},modal:{maskClosable:E.modal&&"maskClosable"in E.modal?E.modal.maskClosable:""},tabs:{closeIcon:E.tabs&&E.tabs.closeIcon?E.tabs.closeIcon:"",customCloseIcon:E.tabs&&E.tabs.customCloseIcon?E.tabs.customCloseIcon:"",closeIconSize:E.tabs&&E.tabs.closeIconSize?E.tabs.closeIconSize:""},select:{arrow:E.select&&E.select.arrow?E.select.arrow:"",customArrow:E.select&&E.select.customArrow?E.select.customArrow:"",arrowSize:E.select&&E.select.arrowSize?E.select.arrowSize:""},colorPicker:{arrow:E.colorPicker&&E.colorPicker.arrow?E.colorPicker.arrow:"",customArrow:E.colorPicker&&E.colorPicker.customArrow?E.colorPicker.customArrow:"",arrowSize:E.colorPicker&&E.colorPicker.arrowSize?E.colorPicker.arrowSize:""},cascader:{arrow:E.cascader&&E.cascader.arrow?E.cascader.arrow:"",customArrow:E.cascader&&E.cascader.customArrow?E.cascader.customArrow:"",arrowSize:E.cascader&&E.cascader.arrowSize?E.cascader.arrowSize:"",itemArrow:E.cascader&&E.cascader.itemArrow?E.cascader.itemArrow:"",customItemArrow:E.cascader&&E.cascader.customItemArrow?E.cascader.customItemArrow:"",itemArrowSize:E.cascader&&E.cascader.itemArrowSize?E.cascader.itemArrowSize:""},tree:{arrow:E.tree&&E.tree.arrow?E.tree.arrow:"",customArrow:E.tree&&E.tree.customArrow?E.tree.customArrow:"",arrowSize:E.tree&&E.tree.arrowSize?E.tree.arrowSize:""},datePicker:{icon:E.datePicker&&E.datePicker.icon?E.datePicker.icon:"",customIcon:E.datePicker&&E.datePicker.customIcon?E.datePicker.customIcon:"",iconSize:E.datePicker&&E.datePicker.iconSize?E.datePicker.iconSize:""},timePicker:{icon:E.timePicker&&E.timePicker.icon?E.timePicker.icon:"",customIcon:E.timePicker&&E.timePicker.customIcon?E.timePicker.customIcon:"",iconSize:E.timePicker&&E.timePicker.iconSize?E.timePicker.iconSize:""},typography:{copyConfig:E.typography&&E.typography.copyConfig?E.typography.copyConfig:"",editConfig:E.typography&&E.typography.editConfig?E.typography.editConfig:"",ellipsisConfig:E.typography&&E.typography.ellipsisConfig?E.typography.ellipsisConfig:""},space:{size:E.space&&E.space.size?E.space.size:""},image:{toolbar:E.image&&E.image.toolbar?E.image.toolbar:""}},v.config.globalProperties.$Spin=tc,v.config.globalProperties.$Loading=pm,v.config.globalProperties.$Message=Bh,v.config.globalProperties.$Notice=Ev,v.config.globalProperties.$Modal=nc,v.config.globalProperties.$ImagePreview=Wh,v.config.globalProperties.$Copy=Cc,v.config.globalProperties.$ScrollIntoView=BS,v.config.globalProperties.$ScrollTop=s1,v.config.globalProperties.$Date=Os)},sa=WP.version,tA=ze.use,nA=ze.i18n,hd=v=>{const E=window["viewuiplus/locale"].default;v===E.i.locale?ze.use(E):console.log(`The ${v} language pack is not loaded.`)},Po=S({version:sa,locale:tA,i18n:nA,install:T1,lang:hd},QT);w.Affix=Z,w.Alert=et,w.Anchor=Gt,w.AnchorLink=Ae,w.Auth=Kt,w.AutoComplete=$s,w.Avatar=Ef,w.AvatarList=Ni,w.BackTop=Af,w.Badge=fg,w.Breadcrumb=Rp,w.BreadcrumbItem=R0,w.Button=Oi,w.ButtonGroup=os,w.Calendar=yg,w.Captcha=Mh,w.Card=Y0,w.Carousel=dw,w.CarouselItem=yi,w.Cascader=j0,w.Cell=Yu,w.CellGroup=fw,w.Checkbox=Up,w.CheckboxGroup=qs,w.Circle=kg,w.City=Ig,w.Col=Sa,w.Collapse=Sc,w.ColorPicker=qu,w.Content=uu,w.Copy=Cc,w.CountDown=wc,w.CountUp=Ql,w.DatePicker=fu,w.Description=P_,w.DescriptionList=ul,w.Divider=Ac,w.Drawer=Fw,w.Dropdown=Wi,w.DropdownItem=_s,w.DropdownMenu=Ph,w.Ellipsis=iv,w.Email=Sy,w.Exception=Us,w.Footer=F_,w.FooterToolbar=Gw,w.Form=ec,w.FormItem=Rn,w.GlobalFooter=H_,w.Grid=cE,w.GridItem=dE,w.Header=Q_,w.Icon=oe,w.Image=gE,w.ImagePreview=Wh,w.Input=Sl,w.InputNumber=Ly,w.Layout=yE,w.Link=aS,w.List=qd,w.ListItem=cS,w.ListItemMeta=CE,w.LoadingBar=pm,w.Login=Xd,w.Menu=Uy,w.MenuGroup=Es,w.MenuItem=hl,w.Message=Bh,w.Mobile=Yh,w.Modal=nc,w.Notice=Ev,w.Notification=DE,w.NotificationItem=aa,w.NotificationTab=Dv,w.NumberInfo=TS,w.Numeral=pl,w.Option=Pp,w.OptionGroup=ip,w.Page=jE,w.PageHeader=FD,w.Panel=xm,w.Paragraph=QE,w.Password=UD,w.Poptip=NS,w.Progress=t1,w.Radio=ms,w.RadioGroup=I0,w.Rate=Ov,w.Result=o1,w.Row=pc,w.Scroll=i1,w.ScrollIntoView=BS,w.ScrollTop=s1,w.Select=ea,w.Sider=rT,w.Skeleton=Am,w.SkeletonItem=zv,w.Slider=c1,w.Space=cT,w.Spin=tc,w.Split=GS,w.Step=pT,w.Steps=jS,w.Submenu=mT,w.Submit=qS,w.Switch=KS,w.TabPane=ic,w.Table=Va,w.TablePaste=ix,w.Tabs=Tv,w.Tag=Ml,w.TagSelect=RT,w.TagSelectOption=b1,w.Text=MP,w.Time=jh,w.TimePicker=_1,w.Timeline=$T,w.TimelineItem=ax,w.Title=LT,w.Tooltip=bn,w.Transfer=ud,w.Tree=C1,w.TreeSelect=HT,w.Trend=Pv,w.Typography=Dm,w.Upload=hx,w.UserName=fx,w.WordCount=JT,w.default=Po,w.i18n=nA,w.install=T1,w.lang=hd,w.locale=tA,w.version=sa,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(viewuiplus_min,viewuiplus_min.exports);var viewuiplus_minExports=viewuiplus_min.exports;const ViewUIPlus=getDefaultExportFromCjs(viewuiplus_minExports),useScoketStore=defineStore("socket",()=>{const r=ref([]),t=o=>{r.value={isOwn:!1,...o}},n=()=>r.value;return computed(o=>o.value),{Infomation:r,getinformation:t,info:n}},{persist:{storage:sessionStorage}});var ws=null,sockets={};const pinia$1=createPinia();useScoketStore(pinia$1);function ws_create(r){try{"WebSocket"in window&&(ws=new WebSocket(r),sockets.ws=ws,ws_event(ws,r))}catch(t){ws_recontent(r),console.log(t)}}function ws_event(r,t){r.onopen=function(){ws_heartCheck.reset().start()},r.onclose=function(){ws_recontent(t)},r.onerror=function(n){ws_recontent(t),console.log("WebSocket-error:",n)},r.onopen=function(){ws_heartCheck.reset().start()}}let lockReconnet=!1;function ws_recontent(r){lockReconnet||(lockReconnet=!0,setTimeout(()=>{ws_create(r),lockReconnet=!1},3e4))}var ws_heartCheck={timeOut:3e4,timeOutObj:null,serverTimeoutObj:null,reset:function(){return clearTimeout(this.timeOutObj),clearTimeout(this.serverTimeoutObj),this},start:function(){var r=this;this.timeOutObj=setTimeout(()=>{ws.send("check"),console.log("ping"),r.serverTimeoutObj=setTimeout(function(){ws.close()},r.timeOut)},this.timeOut)}};window.onbeforeunload=()=>{ws.close()};sockets.creatSocket=ws_create;const socket=sockets,MailDetail_vue_vue_type_style_index_0_scoped_16df2675_lang="",_withScopeId$3=r=>(pushScopeId("data-v-16df2675"),r=r(),popScopeId(),r),_hoisted_1$7={class:"body"},_hoisted_2$7={class:"container"},_hoisted_3$3=_withScopeId$3(()=>createBaseVNode("div",{class:"item item-center"},[createBaseVNode("span",null,"昨天 12:35")],-1)),_hoisted_4$3={class:"avatar"},_hoisted_5$3={key:0,class:"bubble"},_hoisted_6$3={key:1},_hoisted_7$3={style:{width:"124px"}},_hoisted_8$1=["href"],_hoisted_9=["src"],_hoisted_10={key:3},_hoisted_11=_withScopeId$3(()=>createBaseVNode("iframe",{src:"i.url",frameborder:"0"},null,-1)),_hoisted_12=[_hoisted_11],_hoisted_13={class:"input-area"},_hoisted_14={style:{"margin-left":"10px","margin-top":"10px",display:"inline-block",float:"left"}},_hoisted_15={style:{"margin-left":"10px","margin-top":"10px",display:"inline-block",float:"left"}},_hoisted_16={class:"button-area"},_sfc_main$a={__name:"MailDetail",setup(r){const{proxy:t}=getCurrentInstance(),n=useRoute(),o=ref(""),a=ref(null),l=useScoketStore(),d=userinfoStore().userInfo.username,g=n.params.id;let y=[],S=ref([]),x=null,w=null,c=0,A=ref(!1);S.value=[{isOwn:!0,msg:"您好,我在武汉，你可以直接送过来吗，我有时间的话，可以自己过去拿",type:"message"},{isOwn:!1,msg:"你好呀",type:"message"}],onMounted(()=>{socket.creatSocket(`ws://localhost:3002/ws/${d}_${g}`),x=socket.ws.addEventListener("message",K=>{let Z=K.data;console.log(K.data),Z!=="check"&&Z!=="connect to express server"&&(Z=JSON.parse(Z),console.log(Z),Z.from===d?S.value.push({isOwn:!0,...Z}):S.value.push({isOwn:!1,...Z}),l.getinformation(Z),V())}),w=document.documentElement.addEventListener("keydown",K=>{K.stopPropagation(),K.key==="Enter"&&L()}),$()}),onUnmounted(()=>{removeEventListener("message",x),removeEventListener("keydown",w)}),watch(()=>l.Infomation,(K,Z)=>{console.log(K,Z)}),onUpdated(()=>{$()});const R=K=>{const Z=K.target;Z.style.height="inherit",Z.style.height=`${Z.scrollHeight}px`,Z.style.resize="none"},L=()=>{let K=t.$Date().format("YYYY-MM-DD HH:mm:ss");o.value.trim()?(y={isOwn:!0,msg:o.value,from:d,to:g,type:"message",time:K},S.value.push(y),V(),sendMail(g,y).then(Z=>{console.log(Z)}),o.value=""):t.$Message.error("输入内容不能为空")},$=()=>{a.value.scrollTop=a.value.scrollHeight},O=(K,Z)=>{S.value.push({type:"file",filename:Z.name,isOwn:!0})},z=(K,Z)=>{S.value.push({type:"photo",filename:Z.name,isOwn:!0}),console.log(S)},V=()=>{let K=new Date;K-c>=60*60*1e3*5&&t.$nextTick(()=>{let Z=document.createElement("div"),q=document.createElement("span");q.innerText=t.$Date().format("HH:mm"),Z.appendChild(q),Z.style.display="flex",Z.style.width="100%",Z.style.marginTop="15px",Z.style.justifyContent="center",a.value.insertBefore(Z,a.value.lastElementChild)}),c=K},j=()=>{A.value=!0};return(K,Z)=>{const q=resolveComponent("Icon"),ie=resolveComponent("Ellipsis"),te=resolveComponent("Card"),oe=resolveComponent("Upload"),re=resolveComponent("Button");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",{class:"content",ref_key:"content",ref:a},[_hoisted_3$3,(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(S),(he,_e)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["item",he.isOwn?"item-right":"item-left"]),key:_e},[createBaseVNode("div",_hoisted_4$3,[createVNode$1(unref(viewuiplus_minExports.Avatar),{icon:"ios-person",class:"Img"})]),he.type==="message"?(openBlock(),createElementBlock("div",_hoisted_5$3,toDisplayString(he.msg),1)):createCommentVNode("",!0),he.type==="file"?(openBlock(),createElementBlock("div",_hoisted_6$3,[createBaseVNode("div",_hoisted_7$3,[createBaseVNode("a",{href:he.url},[createVNode$1(te,{class:"file"},{default:withCtx(()=>[createVNode$1(q,{type:"md-document",size:"20",style:{float:"left","margin-right":"3px"}}),createVNode$1(ie,{length:4,text:he.filename},null,8,["text"])]),_:2},1024)],8,_hoisted_8$1)])])):createCommentVNode("",!0),he.type==="photo"?(openBlock(),createElementBlock("div",{key:2,class:"photo",onClick:j},[createBaseVNode("img",{src:he.url,alt:"",style:{width:"50px",height:"50px",display:"inline-block"}},null,8,_hoisted_9)])):createCommentVNode("",!0),unref(A)==!0?(openBlock(),createElementBlock("div",_hoisted_10,_hoisted_12)):createCommentVNode("",!0)],2))),128))],512),createBaseVNode("div",_hoisted_13,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_14,[createVNode$1(oe,{action:"http://localhost:3002/users/upload","max-size":10240,"show-upload-list":!1,data:{from:unref(d),to:unref(g),time:unref(t).$Date().format("YYYY-MM-DD HH:mm:ss")},"on-success":O},{default:withCtx(()=>[createVNode$1(q,{type:"ios-folder-open-outline",size:"20",style:{cursor:"pointer"}})]),_:1},8,["data"])]),createBaseVNode("span",_hoisted_15,[createVNode$1(oe,{action:"http://localhost:3002/users/pirture","max-size":10240,"show-upload-list":!1,data:{from:unref(d),to:unref(g),time:unref(t).$Date().format("YYYY-MM-DD HH:mm:ss")},name:"photo","on-success":z},{default:withCtx(()=>[createVNode$1(q,{type:"ios-images",size:"20",style:{cursor:"pointer"}})]),_:1},8,["data"])])]),withDirectives(createBaseVNode("textarea",{name:"text",class:"textarea",cols:"30",rows:"10","onUpdate:modelValue":Z[0]||(Z[0]=he=>o.value=he),maxlength:"100",style:{resize:"none"},onInput:Z[1]||(Z[1]=he=>R(he))},`\r
                `,544),[[vModelText,o.value]]),createBaseVNode("div",_hoisted_16,[createVNode$1(re,{id:"send-btn",onClick:L},{default:withCtx(()=>[createTextVNode("发送")]),_:1})])])])])}}},MailDetail=_export_sfc(_sfc_main$a,[["__scopeId","data-v-16df2675"]]),Admin_vue_vue_type_style_index_0_scoped_296cf454_lang="",_withScopeId$2=r=>(pushScopeId("data-v-296cf454"),r=r(),popScopeId(),r),_hoisted_1$6={class:"layout"},_hoisted_2$6=_withScopeId$2(()=>createBaseVNode("span",null,"文章编写",-1)),_hoisted_3$2=_withScopeId$2(()=>createBaseVNode("span",null,"类型管理",-1)),_hoisted_4$2=_withScopeId$2(()=>createBaseVNode("span",null,"文章管理",-1)),_hoisted_5$2=_withScopeId$2(()=>createBaseVNode("span",null,"主页管理",-1)),_hoisted_6$2=_withScopeId$2(()=>createBaseVNode("span",null,"用户管理",-1)),_hoisted_7$2={style:{"margin-top":"10px","margin-left":"15px"}},_sfc_main$9={__name:"Admin",setup(r){let t=ref(!1);const n=useRouter(),o=ref(""),a=ref("1-1");let l=ref("");const d=computed(()=>["menu-item",t.value?"collapsed-menu":""]),g=computed(()=>["menu-icon",t.value?"rotate-icon":""]),y=()=>{t.value=!t.value,o.value.toggleCollapse()},S=w=>{l.value=w,n.push({path:"/admin/"+w})},x=w=>{a.value=w};return(w,c)=>{const A=resolveComponent("Icon"),R=resolveComponent("MenuItem"),L=resolveComponent("Menu"),$=resolveComponent("Sider"),O=resolveComponent("Header"),z=resolveComponent("BreadcrumbItem"),V=resolveComponent("Breadcrumb"),j=resolveComponent("RouterView"),K=resolveComponent("Content"),Z=resolveComponent("Layout");return openBlock(),createElementBlock("div",_hoisted_1$6,[createVNode$1(Z,null,{default:withCtx(()=>[createVNode$1($,{ref_key:"side1",ref:o,"hide-trigger":"",collapsible:"","collapsed-width":78,modelValue:unref(t),"onUpdate:modelValue":c[5]||(c[5]=q=>isRef(t)?t.value=q:t=q)},{default:withCtx(()=>[createVNode$1(L,{"active-name":a.value,theme:"dark",width:"auto",class:normalizeClass(d.value),onOnSelect:x},{default:withCtx(()=>[createVNode$1(R,{name:"1-1",onClick:c[0]||(c[0]=q=>S("editArticle"))},{default:withCtx(()=>[createVNode$1(A,{type:"ios-navigate"}),_hoisted_2$6]),_:1}),createVNode$1(R,{name:"1-2",onClick:c[1]||(c[1]=q=>S("type"))},{default:withCtx(()=>[createVNode$1(A,{type:"ios-search"}),_hoisted_3$2]),_:1}),createVNode$1(R,{name:"1-3",onClick:c[2]||(c[2]=q=>S("articleStatus"))},{default:withCtx(()=>[createVNode$1(A,{type:"ios-settings"}),_hoisted_4$2]),_:1}),createVNode$1(R,{name:"1-4",onClick:c[3]||(c[3]=q=>S("indexChange"))},{default:withCtx(()=>[createVNode$1(A,{type:"ios-settings"}),_hoisted_5$2]),_:1}),createVNode$1(R,{name:"1-5",onClick:c[4]||(c[4]=q=>S("user"))},{default:withCtx(()=>[createVNode$1(A,{type:"ios-settings"}),_hoisted_6$2]),_:1})]),_:1},8,["active-name","class"])]),_:1},8,["modelValue"]),createVNode$1(Z,null,{default:withCtx(()=>[createVNode$1(O,{style:{padding:0},class:"layout-header-bar"},{default:withCtx(()=>[createVNode$1(A,{onClick:y,class:normalizeClass(g.value),style:{margin:"0 20px",cursor:"pointer"},type:"md-menu",size:"24"},null,8,["class"])]),_:1}),createBaseVNode("div",_hoisted_7$2,[createVNode$1(V,null,{default:withCtx(()=>[createVNode$1(z,{to:"/"},{default:withCtx(()=>[createTextVNode("Home")]),_:1}),createVNode$1(z,{to:"/admin"},{default:withCtx(()=>[createTextVNode("admin")]),_:1}),createVNode$1(z,{to:`/admin/${unref(l)}`},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(l)),1)]),_:1},8,["to"])]),_:1})]),createVNode$1(K,{style:{"{ margin":"20px",background:"#fff","overflow-y":"scroll"}},{default:withCtx(()=>[createVNode$1(j)]),_:1})]),_:1})]),_:1})])}}},Admin=_export_sfc(_sfc_main$9,[["__scopeId","data-v-296cf454"]]);var tinymce$2={exports:{}};(function(r){(function(){var t=function(s){if(s===null)return"null";if(s===void 0)return"undefined";var f=typeof s;return f==="object"&&(Array.prototype.isPrototypeOf(s)||s.constructor&&s.constructor.name==="Array")?"array":f==="object"&&(String.prototype.isPrototypeOf(s)||s.constructor&&s.constructor.name==="String")?"string":f},n=function(s){return["undefined","boolean","number","string","function","xml","null"].indexOf(s)!==-1},o=function(s,f){var b=Array.prototype.slice.call(s);return b.sort(f)},a=function(s,f){return l(function(b,C){return s.eq(f(b),f(C))})},l=function(s){return{eq:s}},d=l(function(s,f){return s===f}),g=d,y=function(s){return l(function(f,b){if(f.length!==b.length)return!1;for(var C=f.length,M=0;M<C;M++)if(!s.eq(f[M],b[M]))return!1;return!0})},S=function(s,f){return a(y(s),function(b){return o(b,f)})},x=function(s){return l(function(f,b){var C=Object.keys(f),M=Object.keys(b);if(!S(g).eq(C,M))return!1;for(var I=C.length,F=0;F<I;F++){var Y=C[F];if(!s.eq(f[Y],b[Y]))return!1}return!0})},w=l(function(s,f){if(s===f)return!0;var b=t(s),C=t(f);return b!==C?!1:n(b)?s===f:b==="array"?y(w).eq(s,f):b==="object"?x(w).eq(s,f):!1});const c=Object.getPrototypeOf,A=(s,f,b)=>{var C;return b(s,f.prototype)?!0:((C=s.constructor)===null||C===void 0?void 0:C.name)===f.name},R=s=>{const f=typeof s;return s===null?"null":f==="object"&&Array.isArray(s)?"array":f==="object"&&A(s,String,(b,C)=>C.isPrototypeOf(b))?"string":f},L=s=>f=>R(f)===s,$=s=>f=>typeof f===s,O=s=>f=>s===f,z=(s,f)=>j(s)&&A(s,f,(b,C)=>c(b)===C),V=L("string"),j=L("object"),K=s=>z(s,Object),Z=L("array"),q=O(null),ie=$("boolean"),te=O(void 0),oe=s=>s==null,re=s=>!oe(s),he=$("function"),_e=$("number"),me=(s,f)=>{if(Z(s)){for(let b=0,C=s.length;b<C;++b)if(!f(s[b]))return!1;return!0}return!1},be=()=>{},Q=(s,f)=>(...b)=>s(f.apply(null,b)),Ne=(s,f)=>b=>s(f(b)),Ee=s=>()=>s,Ge=s=>s,it=(s,f)=>s===f;function Te(s,...f){return(...b)=>{const C=f.concat(b);return s.apply(null,C)}}const Ke=s=>f=>!s(f),Tt=s=>()=>{throw new Error(s)},Lt=s=>s(),Qt=s=>{s()},Xe=Ee(!1),Be=Ee(!0);class ue{constructor(f,b){this.tag=f,this.value=b}static some(f){return new ue(!0,f)}static none(){return ue.singletonNone}fold(f,b){return this.tag?b(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?ue.some(f(this.value)):ue.none()}bind(f){return this.tag?f(this.value):ue.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:ue.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return re(f)?ue.some(f):ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ue.singletonNone=new ue(!1);const Dt=Array.prototype.slice,Rt=Array.prototype.indexOf,Bt=Array.prototype.push,Se=(s,f)=>Rt.call(s,f),Ye=(s,f)=>{const b=Se(s,f);return b===-1?ue.none():ue.some(b)},$e=(s,f)=>Se(s,f)>-1,st=(s,f)=>{for(let b=0,C=s.length;b<C;b++){const M=s[b];if(f(M,b))return!0}return!1},et=(s,f)=>{const b=s.length,C=new Array(b);for(let M=0;M<b;M++){const I=s[M];C[M]=f(I,M)}return C},Fe=(s,f)=>{for(let b=0,C=s.length;b<C;b++){const M=s[b];f(M,b)}},tn=(s,f)=>{for(let b=s.length-1;b>=0;b--){const C=s[b];f(C,b)}},Gt=(s,f)=>{const b=[],C=[];for(let M=0,I=s.length;M<I;M++){const F=s[M];(f(F,M)?b:C).push(F)}return{pass:b,fail:C}},mt=(s,f)=>{const b=[];for(let C=0,M=s.length;C<M;C++){const I=s[C];f(I,C)&&b.push(I)}return b},en=(s,f,b)=>(tn(s,(C,M)=>{b=f(b,C,M)}),b),Bn=(s,f,b)=>(Fe(s,(C,M)=>{b=f(b,C,M)}),b),Le=(s,f,b)=>{for(let C=0,M=s.length;C<M;C++){const I=s[C];if(f(I,C))return ue.some(I);if(b(I,C))break}return ue.none()},Ae=(s,f)=>Le(s,f,Xe),ht=(s,f)=>{for(let b=0,C=s.length;b<C;b++){const M=s[b];if(f(M,b))return ue.some(b)}return ue.none()},rn=s=>{const f=[];for(let b=0,C=s.length;b<C;++b){if(!Z(s[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+s);Bt.apply(f,s[b])}return f},Kt=(s,f)=>rn(et(s,f)),Wt=(s,f)=>{for(let b=0,C=s.length;b<C;++b){const M=s[b];if(f(M,b)!==!0)return!1}return!0},xn=s=>{const f=Dt.call(s,0);return f.reverse(),f},Mn=(s,f)=>mt(s,b=>!$e(f,b)),kn=(s,f)=>{const b={};for(let C=0,M=s.length;C<M;C++){const I=s[C];b[String(I)]=f(I,C)}return b},Zn=(s,f)=>{const b=Dt.call(s,0);return b.sort(f),b},yo=(s,f)=>f>=0&&f<s.length?ue.some(s[f]):ue.none(),gn=s=>yo(s,0),oo=s=>yo(s,s.length-1),Cr=he(Array.from)?Array.from:s=>Dt.call(s),Wr=(s,f)=>{for(let b=0;b<s.length;b++){const C=f(s[b],b);if(C.isSome())return C}return ue.none()},Lr=(s,f)=>{const b=[],C=he(f)?M=>st(b,I=>f(I,M)):M=>$e(b,M);for(let M=0,I=s.length;M<I;M++){const F=s[M];C(F)||b.push(F)}return b},qn=Object.keys,Oo=Object.hasOwnProperty,Ue=(s,f)=>{const b=qn(s);for(let C=0,M=b.length;C<M;C++){const I=b[C],F=s[I];f(F,I)}},yn=(s,f)=>Dn(s,(b,C)=>({k:C,v:f(b,C)})),Dn=(s,f)=>{const b={};return Ue(s,(C,M)=>{const I=f(C,M);b[I.k]=I.v}),b},Xt=s=>(f,b)=>{s[b]=f},Kn=(s,f,b,C)=>{Ue(s,(M,I)=>{(f(M,I)?b:C)(M,I)})},Yr=(s,f)=>{const b={},C={};return Kn(s,f,Xt(b),Xt(C)),{t:b,f:C}},qo=(s,f)=>{const b={};return Kn(s,f,Xt(b),be),b},vi=(s,f)=>{const b=[];return Ue(s,(C,M)=>{b.push(f(C,M))}),b},js=s=>vi(s,Ge),Nr=(s,f)=>Vn(s,f)?ue.from(s[f]):ue.none(),Vn=(s,f)=>Oo.call(s,f),Is=(s,f)=>Vn(s,f)&&s[f]!==void 0&&s[f]!==null,M0=(s,f,b=w)=>x(b).eq(s,f),sg=s=>{const f={};return Fe(s,b=>{f[b]={}}),qn(f)},xh=s=>s.length!==void 0,Md=Array.isArray,Da=s=>{if(Md(s))return s;{const f=[];for(let b=0,C=s.length;b<C;b++)f[b]=s[b];return f}},Ch=(s,f,b)=>{if(!s)return!1;if(b=b||s,xh(s)){for(let C=0,M=s.length;C<M;C++)if(f.call(b,s[C],C,s)===!1)return!1}else for(const C in s)if(Vn(s,C)&&f.call(b,s[C],C,s)===!1)return!1;return!0},Lu=(s,f)=>{const b=[];return Ch(s,(C,M)=>{b.push(f(C,M,s))}),b},Pa=(s,f)=>{const b=[];return Ch(s,(C,M)=>{(!f||f(C,M,s))&&b.push(C)}),b},lg=(s,f)=>{if(s){for(let b=0,C=s.length;b<C;b++)if(s[b]===f)return b}return-1},Nu=(s,f,b,C)=>{let M=te(b)?s[0]:b;for(let I=0;I<s.length;I++)M=f.call(C,M,s[I],I);return M},ze=(s,f,b)=>{for(let C=0,M=s.length;C<M;C++)if(f.call(b,s[C],C,s))return C;return-1},vt=s=>s[s.length-1],zt=s=>{let f=!1,b;return(...C)=>(f||(f=!0,b=s.apply(null,C)),b)},Yt=(s,f,b,C)=>{const M=s.isiOS()&&/ipad/i.test(b)===!0,I=s.isiOS()&&!M,F=s.isiOS()||s.isAndroid(),Y=F||C("(pointer:coarse)"),X=M||!I&&F&&C("(min-device-width:768px)"),ae=I||F&&!X,de=f.isSafari()&&s.isiOS()&&/safari/i.test(b)===!1,fe=!ae&&!X&&!de;return{isiPad:Ee(M),isiPhone:Ee(I),isTablet:Ee(X),isPhone:Ee(ae),isTouch:Ee(Y),isAndroid:s.isAndroid,isiOS:s.isiOS,isWebView:Ee(de),isDesktop:Ee(fe)}},qt=(s,f)=>{for(let b=0;b<s.length;b++){const C=s[b];if(C.test(f))return C}},fr=(s,f)=>{const b=qt(s,f);if(!b)return{major:0,minor:0};const C=M=>Number(f.replace(b,"$"+M));return po(C(1),C(2))},jr=(s,f)=>{const b=String(f).toLowerCase();return s.length===0?Nt():fr(s,b)},Nt=()=>po(0,0),po=(s,f)=>({major:s,minor:f}),So={nu:po,detect:jr,unknown:Nt},xo=(s,f)=>Wr(f.brands,b=>{const C=b.brand.toLowerCase();return Ae(s,M=>{var I;return C===((I=M.brand)===null||I===void 0?void 0:I.toLowerCase())}).map(M=>({current:M.name,version:So.nu(parseInt(b.version,10),0)}))}),go=(s,f)=>{const b=String(f).toLowerCase();return Ae(s,C=>C.search(b))},Ui=(s,f)=>go(s,f).map(b=>{const C=So.detect(b.versionRegexes,f);return{current:b.name,version:C}}),tl=(s,f)=>go(s,f).map(b=>{const C=So.detect(b.versionRegexes,f);return{current:b.name,version:C}}),Ra=(s,f)=>s.substring(f),jl=(s,f,b)=>f===""||s.length>=f.length&&s.substr(b,b+f.length)===f,$i=(s,f)=>Li(s,f)?Ra(s,f.length):s,Ur=(s,f,b=0,C)=>{const M=s.indexOf(f,b);return M!==-1?te(C)?!0:M+f.length<=C:!1},Li=(s,f)=>jl(s,f,0),Mo=(s,f)=>jl(s,f,s.length-f.length),Ei=s=>f=>f.replace(s,""),kd=Ei(/^\s+|\s+$/g),Zc=Ei(/^\s+/g),Cf=Ei(/\s+$/g),Fo=s=>s.length>0,ts=s=>!Fo(s),cg=(s,f)=>f<=0?"":new Array(f+1).join(s),ea=(s,f=10)=>{const b=parseInt(s,f);return isNaN(b)?ue.none():ue.some(b)},qc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zl=s=>f=>Ur(f,s),ug=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:s=>Ur(s,"edge/")&&Ur(s,"chrome")&&Ur(s,"safari")&&Ur(s,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qc],search:s=>Ur(s,"chrome")&&!Ur(s,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:s=>Ur(s,"msie")||Ur(s,"trident")},{name:"Opera",versionRegexes:[qc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zl("firefox")},{name:"Safari",versionRegexes:[qc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:s=>(Ur(s,"safari")||Ur(s,"mobile/"))&&Ur(s,"applewebkit")}],Pp=[{name:"Windows",search:Zl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:s=>Ur(s,"iphone")||Ur(s,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zl("linux"),versionRegexes:[]},{name:"Solaris",search:Zl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],OC={browsers:Ee(ug),oses:Ee(Pp)},ni="Edge",wf="Chromium",Ia="IE",dg="Opera",k0="Firefox",qi="Safari",Kc=()=>BC({current:void 0,version:So.unknown()}),BC=s=>{const f=s.current,b=s.version,C=M=>()=>f===M;return{current:f,version:b,isEdge:C(ni),isChromium:C(wf),isIE:C(Ia),isOpera:C(dg),isFirefox:C(k0),isSafari:C(qi)}},Ou={unknown:Kc,nu:BC,edge:Ee(ni),chromium:Ee(wf),ie:Ee(Ia),opera:Ee(dg),firefox:Ee(k0),safari:Ee(qi)},FC="Windows",Mb="iOS",VC="Android",Xc="Linux",wh="macOS",D0="Solaris",kb="FreeBSD",Db="ChromeOS",Sl=()=>Pb({current:void 0,version:So.unknown()}),Pb=s=>{const f=s.current,b=s.version,C=M=>()=>f===M;return{current:f,version:b,isWindows:C(FC),isiOS:C(Mb),isAndroid:C(VC),isMacOS:C(wh),isLinux:C(Xc),isSolaris:C(D0),isFreeBSD:C(kb),isChromeOS:C(Db)}},zC={unknown:Sl,nu:Pb,windows:Ee(FC),ios:Ee(Mb),android:Ee(VC),linux:Ee(Xc),macos:Ee(wh),solaris:Ee(D0),freebsd:Ee(kb),chromeos:Ee(Db)},Jc={detect:(s,f,b)=>{const C=OC.browsers(),M=OC.oses(),I=f.bind(X=>xo(C,X)).orThunk(()=>Ui(C,s)).fold(Ou.unknown,Ou.nu),F=tl(M,s).fold(zC.unknown,zC.nu),Y=Yt(F,I,s,b);return{browser:I,os:F,deviceType:Y}}},UC=s=>window.matchMedia(s).matches;let Rb=zt(()=>Jc.detect(navigator.userAgent,ue.from(navigator.userAgentData),UC));const Qc=()=>Rb(),OM=navigator.userAgent,Ef=Qc(),ba=Ef.browser,ta=Ef.os,Tf=Ef.deviceType,HC=OM.indexOf("Windows Phone")!==-1,bn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ba.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ba.isIE(),windowsPhone:HC,browser:{current:ba.current,version:ba.version,isChromium:ba.isChromium,isEdge:ba.isEdge,isFirefox:ba.isFirefox,isIE:ba.isIE,isOpera:ba.isOpera,isSafari:ba.isSafari},os:{current:ta.current,version:ta.version,isAndroid:ta.isAndroid,isChromeOS:ta.isChromeOS,isFreeBSD:ta.isFreeBSD,isiOS:ta.isiOS,isLinux:ta.isLinux,isMacOS:ta.isMacOS,isSolaris:ta.isSolaris,isWindows:ta.isWindows},deviceType:{isDesktop:Tf.isDesktop,isiPad:Tf.isiPad,isiPhone:Tf.isiPhone,isPhone:Tf.isPhone,isTablet:Tf.isTablet,isTouch:Tf.isTouch,isWebView:Tf.isWebView}},hg=/^\s*|\s*$/g,ns=s=>oe(s)?"":(""+s).replace(hg,""),Ls=(s,f)=>f?f==="array"&&Md(s)?!0:typeof s===f:s!==void 0,GC=(s,f,b={})=>{const C=V(s)?s.split(f||","):s||[];let M=C.length;for(;M--;)b[C[M]]={};return b},Ni=Vn,Ib=(s,...f)=>{for(let b=0;b<f.length;b++){const C=f[b];for(const M in C)if(Vn(C,M)){const I=C[M];I!==void 0&&(s[M]=I)}}return s},P0=function(s,f,b,C){C=C||this,s&&(b&&(s=s[b]),Ch(s,(M,I)=>f.call(C,M,I,b)===!1?!1:(P0(M,f,b,C),!0)))},on={trim:ns,isArray:Md,is:Ls,toArray:Da,makeMap:GC,each:Ch,map:Lu,grep:Pa,inArray:lg,hasOwn:Ni,extend:Ib,walk:P0,resolve:(s,f=window)=>{const b=s.split(".");for(let C=0,M=b.length;C<M&&(f=f[b[C]],!!f);C++);return f},explode:(s,f)=>Z(s)?s:s===""?[]:Lu(s.split(f||","),ns),_addCacheSuffix:s=>{const f=bn.cacheSuffix;return f&&(s+=(s.indexOf("?")===-1?"?":"&")+f),s}},mi=(s,f,b=it)=>s.exists(C=>b(C,f)),$b=(s,f,b=it)=>rs(s,f,b).getOr(s.isNone()&&f.isNone()),Wa=s=>{const f=[],b=C=>{f.push(C)};for(let C=0;C<s.length;C++)s[C].each(b);return f},rs=(s,f,b)=>s.isSome()&&f.isSome()?ue.some(b(s.getOrDie(),f.getOrDie())):ue.none(),fg=(s,f,b,C)=>s.isSome()&&f.isSome()&&b.isSome()?ue.some(C(s.getOrDie(),f.getOrDie(),b.getOrDie())):ue.none(),Do=(s,f)=>s?ue.some(f):ue.none(),pg=typeof window<"u"?window:Function("return this;")(),WC=(s,f)=>{let b=f??pg;for(let C=0;C<s.length&&b!==void 0&&b!==null;++C)b=b[s[C]];return b},Rp=(s,f)=>{const b=s.split(".");return WC(b,f)},ua=(s,f)=>Rp(s,f),Eh=(s,f)=>{const b=ua(s,f);if(b==null)throw new Error(s+" not available on this browser");return b},FM=Object.getPrototypeOf,YC=s=>Eh("HTMLElement",s),Ti=s=>{const f=Rp("ownerDocument.defaultView",s);return j(s)&&(YC(f).prototype.isPrototypeOf(s)||/^HTML\w*Element$/.test(FM(s).constructor.name))},R0=8,hc=9,Oi=11,Bu=1,mg=3,Co=s=>s.dom.nodeName.toLowerCase(),os=s=>s.dom.nodeType,xl=s=>f=>os(f)===s,VM=s=>os(s)===R0||Co(s)==="#comment",eu=s=>Cl(s)&&Ti(s.dom),Cl=xl(Bu),ql=xl(mg),zM=xl(hc),I0=xl(Oi),Ns=s=>f=>Cl(f)&&Co(f)===s,$0=(s,f,b)=>{if(V(b)||ie(b)||_e(b))s.setAttribute(f,b+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",b,":: Element ",s),new Error("Attribute value was not simple")},na=(s,f,b)=>{$0(s.dom,f,b)},Dd=(s,f)=>{const b=s.dom;Ue(f,(C,M)=>{$0(b,M,C)})},ms=(s,f)=>{const b=s.dom.getAttribute(f);return b===null?void 0:b},Fu=(s,f)=>ue.from(ms(s,f)),Os=(s,f)=>{const b=s.dom;return b&&b.hasAttribute?b.hasAttribute(f):!1},da=(s,f)=>{s.dom.removeAttribute(f)},Vu=s=>{const f=s.dom.attributes;return f==null||f.length===0},jC=s=>Bn(s.dom.attributes,(f,b)=>(f[b.name]=b.value,f),{}),L0=(s,f)=>{const b=ms(s,f);return b===void 0||b===""?[]:b.split(" ")},ZC=(s,f,b)=>{const M=L0(s,f).concat([b]);return na(s,f,M.join(" ")),!0},qC=(s,f,b)=>{const C=mt(L0(s,f),M=>M!==b);return C.length>0?na(s,f,C.join(" ")):da(s,f),!1},Ip=s=>s.dom.classList!==void 0,Lb=s=>L0(s,"class"),Nb=(s,f)=>ZC(s,"class",f),Ob=(s,f)=>qC(s,"class",f),KC=(s,f)=>$e(Lb(s),f)?Ob(s,f):Nb(s,f),$p=(s,f)=>{Ip(s)?s.dom.classList.add(f):Nb(s,f)},Bb=s=>{(Ip(s)?s.dom.classList:Lb(s)).length===0&&da(s,"class")},Lp=(s,f)=>{Ip(s)?s.dom.classList.remove(f):Ob(s,f),Bb(s)},Fb=(s,f)=>{const b=Ip(s)?s.dom.classList.toggle(f):KC(s,f);return Bb(s),b},N0=(s,f)=>Ip(s)&&s.dom.classList.contains(f),XC=(s,f)=>{const C=(f||document).createElement("div");if(C.innerHTML=s,!C.hasChildNodes()||C.childNodes.length>1){const M="HTML does not have a single root node";throw console.error(M,s),new Error(M)}return Np(C.childNodes[0])},JC=(s,f)=>{const C=(f||document).createElement(s);return Np(C)},QC=(s,f)=>{const C=(f||document).createTextNode(s);return Np(C)},Np=s=>{if(s==null)throw new Error("Node cannot be null or undefined");return{dom:s}},Ve={fromHtml:XC,fromTag:JC,fromText:QC,fromDom:Np,fromPoint:(s,f,b)=>ue.from(s.dom.elementFromPoint(f,b)).map(Np)},ew=(s,f)=>{const b=[],C=I=>(b.push(I),f(I));let M=f(s);do M=M.bind(C);while(M.isSome());return b},fc=(s,f)=>{const b=s.dom;if(b.nodeType!==Bu)return!1;{const C=b;if(C.matches!==void 0)return C.matches(f);if(C.msMatchesSelector!==void 0)return C.msMatchesSelector(f);if(C.webkitMatchesSelector!==void 0)return C.webkitMatchesSelector(f);if(C.mozMatchesSelector!==void 0)return C.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},Vb=s=>s.nodeType!==Bu&&s.nodeType!==hc&&s.nodeType!==Oi||s.childElementCount===0,zb=(s,f)=>{const b=f===void 0?document:f.dom;return Vb(b)?[]:et(b.querySelectorAll(s),Ve.fromDom)},HM=(s,f)=>{const b=f===void 0?document:f.dom;return Vb(b)?ue.none():ue.from(b.querySelector(s)).map(Ve.fromDom)},Bo=(s,f)=>s.dom===f.dom,Pd=(s,f)=>{const b=s.dom,C=f.dom;return b===C?!1:b.contains(C)},zu=s=>Ve.fromDom(s.dom.ownerDocument),Rd=s=>zM(s)?s:zu(s),Ub=s=>Ve.fromDom(Rd(s).dom.documentElement),Op=s=>Ve.fromDom(Rd(s).dom.defaultView),Kl=s=>ue.from(s.dom.parentNode).map(Ve.fromDom),O0=s=>ue.from(s.dom.parentElement).map(Ve.fromDom),tw=(s,f)=>{const b=he(f)?f:Xe;let C=s.dom;const M=[];for(;C.parentNode!==null&&C.parentNode!==void 0;){const I=C.parentNode,F=Ve.fromDom(I);if(M.push(F),b(F)===!0)break;C=I}return M},GM=s=>{const f=b=>mt(b,C=>!Bo(s,C));return Kl(s).map(Ya).map(f).getOr([])},tu=s=>ue.from(s.dom.previousSibling).map(Ve.fromDom),gg=s=>ue.from(s.dom.nextSibling).map(Ve.fromDom),nw=s=>xn(ew(s,tu)),Xl=s=>ew(s,gg),Ya=s=>et(s.dom.childNodes,Ve.fromDom),Mf=(s,f)=>{const b=s.dom.childNodes;return ue.from(b[f]).map(Ve.fromDom)},vg=s=>Mf(s,0),nu=s=>Mf(s,s.dom.childNodes.length-1),wl=s=>s.dom.childNodes.length,rw=s=>s.dom.hasChildNodes(),WM=s=>{const f=s.dom.head;if(f==null)throw new Error("Head is not available yet");return Ve.fromDom(f)},B0=s=>I0(s)&&re(s.dom.host),Hb=he(Element.prototype.attachShadow)&&he(Node.prototype.getRootNode),Gb=Ee(Hb),Id=Hb?s=>Ve.fromDom(s.dom.getRootNode()):Rd,Wb=s=>B0(s)?s:WM(Rd(s)),QL=s=>B0(s)?s:Ve.fromDom(Rd(s).dom.body),eN=s=>{const f=Id(s);return B0(f)?ue.some(f):ue.none()},YM=s=>Ve.fromDom(s.dom.host),yg=s=>{if(Gb()&&re(s.target)){const f=Ve.fromDom(s.target);if(Cl(f)&&$d(f)&&s.composed&&s.composedPath){const b=s.composedPath();if(b)return gn(b)}}return ue.from(s.target)},$d=s=>re(s.dom.shadowRoot),Bp=s=>{const f=ql(s)?s.dom.parentNode:s.dom;if(f==null||f.ownerDocument===null)return!1;const b=f.ownerDocument;return eN(Ve.fromDom(f)).fold(()=>b.body.contains(f),Ne(Bp,YM))};var ha=(s,f,b,C,M)=>s(b,C)?ue.some(b):he(M)&&M(b)?ue.none():f(b,C,M);const Bi=(s,f,b)=>{let C=s.dom;const M=he(b)?b:Xe;for(;C.parentNode;){C=C.parentNode;const I=Ve.fromDom(C);if(f(I))return ue.some(I);if(M(I))break}return ue.none()},Sa=(s,f,b)=>ha((M,I)=>I(M),Bi,s,f,b),Ld=(s,f)=>{const b=s.dom;return b.parentNode?jM(Ve.fromDom(b.parentNode),C=>!Bo(s,C)&&f(C)):ue.none()},jM=(s,f)=>{const b=M=>f(Ve.fromDom(M));return Ae(s.dom.childNodes,b).map(Ve.fromDom)},gs=(s,f)=>{const b=C=>{for(let M=0;M<C.childNodes.length;M++){const I=Ve.fromDom(C.childNodes[M]);if(f(I))return ue.some(I);const F=b(C.childNodes[M]);if(F.isSome())return F}return ue.none()};return b(s.dom)},pc=(s,f,b)=>Bi(s,C=>fc(C,f),b),mc=(s,f)=>HM(f,s),Th=(s,f,b)=>ha((M,I)=>fc(M,I),pc,s,f,b),ow=s=>Th(s,"[contenteditable]"),kr=(s,f=!1)=>Bp(s)?s.dom.isContentEditable:ow(s).fold(Ee(f),b=>Jl(b)==="true"),Jl=s=>s.dom.contentEditable,Uu=s=>s.style!==void 0&&he(s.style.getPropertyValue),iw=(s,f,b)=>{if(!V(b))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",b,":: Element ",s),new Error("CSS value must be a string: "+b);Uu(s)&&s.style.setProperty(f,b)},Yb=(s,f)=>{Uu(s)&&s.style.removeProperty(f)},aw=(s,f,b)=>{const C=s.dom;iw(C,f,b)},F0=(s,f)=>{const b=s.dom;Ue(f,(C,M)=>{iw(b,M,C)})},gc=(s,f)=>{const b=s.dom,M=window.getComputedStyle(b).getPropertyValue(f);return M===""&&!Bp(s)?nl(b,f):M},nl=(s,f)=>Uu(s)?s.style.getPropertyValue(f):"",bg=(s,f)=>{const b=s.dom,C=nl(b,f);return ue.from(C).filter(M=>M.length>0)},ja=s=>{const f={},b=s.dom;if(Uu(b))for(let C=0;C<b.style.length;C++){const M=b.style.item(C);f[M]=b.style[M]}return f},ZM=(s,f)=>{const b=s.dom;Yb(b,f),mi(Fu(s,"style").map(kd),"")&&da(s,"style")},Hi=s=>s.dom.offsetWidth,Zs=(s,f)=>{Kl(s).each(C=>{C.dom.insertBefore(f.dom,s.dom)})},Hu=(s,f)=>{gg(s).fold(()=>{Kl(s).each(M=>{Ki(M,f)})},C=>{Zs(C,f)})},_g=(s,f)=>{vg(s).fold(()=>{Ki(s,f)},C=>{s.dom.insertBefore(f.dom,C.dom)})},Ki=(s,f)=>{s.dom.appendChild(f.dom)},jb=(s,f)=>{Zs(s,f),Ki(f,s)},Zb=(s,f)=>{Fe(f,(b,C)=>{const M=C===0?s:f[C-1];Hu(M,b)})},ci=(s,f)=>{Fe(f,b=>{Ki(s,b)})},Nd=s=>{s.dom.textContent="",Fe(Ya(s),f=>{wo(f)})},wo=s=>{const f=s.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},vc=s=>{const f=Ya(s);f.length>0&&Zb(s,f),wo(s)},V0=(s,f)=>{const C=(f||document).createElement("div");return C.innerHTML=s,Ya(Ve.fromDom(C))},Gu=s=>et(s,Ve.fromDom),z0=s=>s.dom.innerHTML,U0=(s,f)=>{const C=zu(s).dom,M=Ve.fromDom(C.createDocumentFragment()),I=V0(f,C);ci(M,I),Nd(s),Ki(s,M)},ti=s=>{const f=Ve.fromTag("div"),b=Ve.fromDom(s.dom.cloneNode(!0));return Ki(f,b),z0(f)},sw=(s,f,b,C,M,I,F)=>({target:s,x:f,y:b,stop:C,prevent:M,kill:I,raw:F}),tN=s=>{const f=Ve.fromDom(yg(s).getOr(s.target)),b=()=>s.stopPropagation(),C=()=>s.preventDefault(),M=Q(C,b);return sw(f,s.clientX,s.clientY,b,C,M,s)},nN=(s,f)=>b=>{s(b)&&f(tN(b))},lw=(s,f,b,C,M)=>{const I=nN(b,C);return s.dom.addEventListener(f,I,M),{unbind:Te(qM,s,f,I,M)}},qb=(s,f,b,C)=>lw(s,f,b,C,!1),qM=(s,f,b,C)=>{s.dom.removeEventListener(f,b,C)},Fp=(s,f)=>({left:s,top:f,translate:(C,M)=>Fp(s+C,f+M)}),Vp=Fp,KM=s=>{const f=s.getBoundingClientRect();return Vp(f.left,f.top)},H0=(s,f)=>s!==void 0?s:f!==void 0?f:0,XM=s=>{const f=s.dom.ownerDocument,b=f.body,C=f.defaultView,M=f.documentElement;if(b===s.dom)return Vp(b.offsetLeft,b.offsetTop);const I=H0(C==null?void 0:C.pageYOffset,M.scrollTop),F=H0(C==null?void 0:C.pageXOffset,M.scrollLeft),Y=H0(M.clientTop,b.clientTop),X=H0(M.clientLeft,b.clientLeft);return Kb(s).translate(F-X,I-Y)},Kb=s=>{const f=s.dom,C=f.ownerDocument.body;return C===f?Vp(C.offsetLeft,C.offsetTop):Bp(s)?KM(f):Vp(0,0)},Ah=s=>{const f=s!==void 0?s.dom:document,b=f.body.scrollLeft||f.documentElement.scrollLeft,C=f.body.scrollTop||f.documentElement.scrollTop;return Vp(b,C)},Xb=(s,f,b)=>{const M=(b!==void 0?b.dom:document).defaultView;M&&M.scrollTo(s,f)},G0=(s,f)=>{Qc().browser.isSafari()&&he(s.dom.scrollIntoViewIfNeeded)?s.dom.scrollIntoViewIfNeeded(!1):s.dom.scrollIntoView(f)},cw=s=>{const f=s===void 0?window:s;return Qc().browser.isFirefox()?ue.none():ue.from(f.visualViewport)},zp=(s,f,b,C)=>({x:s,y:f,width:b,height:C,right:s+b,bottom:f+C}),W0=s=>{const f=s===void 0?window:s,b=f.document,C=Ah(Ve.fromDom(b));return cw(f).fold(()=>{const M=f.document.documentElement,I=M.clientWidth,F=M.clientHeight;return zp(C.left,C.top,I,F)},M=>zp(Math.max(M.pageLeft,C.left),Math.max(M.pageTop,C.top),M.width,M.height))},Jb=(s,f)=>mt(Ya(s),f),Od=(s,f)=>{let b=[];return Fe(Ya(s),C=>{f(C)&&(b=b.concat([C])),b=b.concat(Od(C,f))}),b},fa=(s,f)=>zb(f,s),Qb=(s,f,b)=>pc(s,f,b).isSome();class ri{constructor(f,b){this.node=f,this.rootNode=b,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(f){return this.node=this.findSibling(this.node,"firstChild","nextSibling",f),this.node}prev(f){return this.node=this.findSibling(this.node,"lastChild","previousSibling",f),this.node}prev2(f){return this.node=this.findPreviousNode(this.node,f),this.node}findSibling(f,b,C,M){if(f){if(!M&&f[b])return f[b];if(f!==this.rootNode){let I=f[C];if(I)return I;for(let F=f.parentNode;F&&F!==this.rootNode;F=F.parentNode)if(I=F[C],I)return I}}}findPreviousNode(f,b){if(f){const C=f.previousSibling;if(this.rootNode&&C===this.rootNode)return;if(C){if(!b){for(let I=C.lastChild;I;I=I.lastChild)if(!I.lastChild)return I}return C}const M=f.parentNode;if(M&&M!==this.rootNode)return M}}}const er=s=>f=>!!f&&f.nodeType===s,ru=s=>!!s&&!Object.getPrototypeOf(s),Rn=er(1),ou=s=>Rn(s)&&eu(Ve.fromDom(s)),Sg=s=>Rn(s)&&s.namespaceURI==="http://www.w3.org/2000/svg",Mh=s=>{const f=s.toLowerCase();return b=>re(b)&&b.nodeName.toLowerCase()===f},Fi=s=>{const f=s.map(b=>b.toLowerCase());return b=>{if(b&&b.nodeName){const C=b.nodeName.toLowerCase();return $e(f,C)}return!1}},kh=(s,f)=>{const b=f.toLowerCase().split(" ");return C=>{if(Rn(C)){const M=C.ownerDocument.defaultView;if(M)for(let I=0;I<b.length;I++){const F=M.getComputedStyle(C,null);if((F?F.getPropertyValue(s):null)===b[I])return!0}}return!1}},xg=s=>f=>Rn(f)&&f.hasAttribute(s),$a=(s,f)=>b=>Rn(b)&&b.getAttribute(s)===f,iu=s=>Rn(s)&&s.hasAttribute("data-mce-bogus"),Y0=s=>Rn(s)&&s.getAttribute("data-mce-bogus")==="all",rl=s=>Rn(s)&&s.tagName==="TABLE",uw=s=>f=>!!(ou(f)&&(f.contentEditable===s||f.getAttribute("data-mce-contenteditable")===s)),e_=Fi(["textarea","input"]),Zt=er(3),dw=er(4),Cg=er(7),Bd=er(8),wg=er(9),yi=er(11),Ko=Mh("br"),Bs=Mh("img"),Fs=uw("true"),Eo=uw("false"),Eg=Fi(["td","th"]),Za=Fi(["td","th","caption"]),Gi=Fi(["video","audio","object","embed"]),t_=Mh("li"),Ft=Mh("details"),La=Mh("summary"),Tg="\uFEFF",ko=" ",au=s=>s===Tg,JM=s=>s.replace(/\uFEFF/g,""),j0=((s,f)=>{const b=I=>{if(!s(I))throw new Error("Can only get "+f+" value of a "+f+" node");return C(I).getOr("")},C=I=>s(I)?ue.from(I.dom.nodeValue):ue.none();return{get:b,getOption:C,set:(I,F)=>{if(!s(I))throw new Error("Can only set raw "+f+" value of a "+f+" node");I.dom.nodeValue=F}}})(ql,"text"),lu=s=>j0.get(s),n_=s=>j0.getOption(s),El=(s,f)=>j0.set(s,f),Ro=["td","th"],Wu=["thead","tbody","tfoot"],Ag=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],vs=["li","dd","dt"],hw=["ul","ol","dl"],kf=["pre","script","textarea","style"],Df=s=>{let f;return b=>(f=f||kn(s,Be),Vn(f,Co(b)))},ys=s=>Co(s)==="table",Pf=s=>Cl(s)&&Co(s)==="br",ft=Df(Ag),ol=Df(hw),Rf=Df(vs),Yu=Df(Wu),Tl=Df(Ro),xa=Df(kf),Ca=s=>{const f=[];let b=s.dom;for(;b;)f.push(Ve.fromDom(b)),b=b.lastChild;return f},fw=s=>{const f=fa(s,"br"),b=mt(Ca(s).slice(-1),Pf);f.length===b.length&&Fe(b,wo)},pa=()=>{const s=Ve.fromTag("br");return na(s,"data-mce-bogus","1"),s},ju=s=>{Nd(s),Ki(s,pa())},sr=(s,f)=>{nu(s).each(b=>{tu(b).each(C=>{f.isBlock(Co(s))&&Pf(b)&&f.isBlock(Co(C))&&wo(b)})})},Na=Tg,il=au,Al=JM,Up=s=>s.insertContent(Na,{preserve_zwsp:!0}),QM=Rn,Hp=Zt,Gp=s=>(Hp(s)&&(s=s.parentNode),QM(s)&&s.hasAttribute("data-mce-caret")),qs=s=>Hp(s)&&il(s.data),is=s=>Gp(s)||qs(s),pw=s=>s.firstChild!==s.lastChild||!Ko(s.firstChild),ek=(s,f)=>{var b;const M=((b=s.ownerDocument)!==null&&b!==void 0?b:document).createTextNode(Na),I=s.parentNode;if(f){const F=s.previousSibling;if(Hp(F)){if(is(F))return F;if(Mg(F))return F.splitText(F.data.length-1)}I==null||I.insertBefore(M,s)}else{const F=s.nextSibling;if(Hp(F)){if(is(F))return F;if(If(F))return F.splitText(1),F}s.nextSibling?I==null||I.insertBefore(M,s.nextSibling):I==null||I.appendChild(M)}return M},r_=s=>{const f=s.container();return Zt(f)?f.data.charAt(s.offset())===Na||s.isAtStart()&&qs(f.previousSibling):!1},Z0=s=>{const f=s.container();return Zt(f)?f.data.charAt(s.offset()-1)===Na||s.isAtEnd()&&qs(f.nextSibling):!1},mw=(s,f,b)=>{var C;const I=((C=f.ownerDocument)!==null&&C!==void 0?C:document).createElement(s);I.setAttribute("data-mce-caret",b?"before":"after"),I.setAttribute("data-mce-bogus","all"),I.appendChild(pa().dom);const F=f.parentNode;return b?F==null||F.insertBefore(I,f):f.nextSibling?F==null||F.insertBefore(I,f.nextSibling):F==null||F.appendChild(I),I},If=s=>Hp(s)&&s.data[0]===Na,Mg=s=>Hp(s)&&s.data[s.data.length-1]===Na,tk=s=>{var f;const b=s.getElementsByTagName("br"),C=b[b.length-1];iu(C)&&((f=C.parentNode)===null||f===void 0||f.removeChild(C))},Dh=s=>s&&s.hasAttribute("data-mce-caret")?(tk(s),s.removeAttribute("data-mce-caret"),s.removeAttribute("data-mce-bogus"),s.removeAttribute("style"),s.removeAttribute("data-mce-style"),s.removeAttribute("_moz_abspos"),s):null,kg=s=>Gp(s.startContainer),Dg=Fs,nk=Eo,rk=Ko,Wi=Zt,Fd=Fi(["script","style","textarea"]),Wp=Fi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$f=Fi(["table"]),Ph=is,oi=s=>Ph(s)?!1:Wi(s)?!Fd(s.parentNode):Wp(s)||rk(s)||$f(s)||Pg(s),yc=s=>Rn(s)&&s.getAttribute("unselectable")==="true",Pg=s=>!yc(s)&&nk(s),o_=(s,f)=>{for(let b=s.parentNode;b&&b!==f;b=b.parentNode){if(Pg(b))return!1;if(Dg(b))return!0}return!0},Vd=s=>Pg(s)?!Bn(Cr(s.getElementsByTagName("*")),(f,b)=>f||Dg(b),!1):!1,Ml=s=>Wp(s)||Vd(s),q0=(s,f)=>oi(s)&&o_(s,f),Ks=/^[ \t\r\n]*$/,bc=s=>Ks.test(s),Lf=s=>{for(const f of s)if(!au(f))return!1;return!0},Nf=s=>" \f	\v".indexOf(s)!==-1,Rh=s=>s===`
`||s==="\r",ok=(s,f)=>f<s.length&&f>=0?Rh(s[f]):!1,Yp=(s,f=4,b=!0,C=!0)=>{const M=cg(" ",f),I=s.replace(/\t/g,M);return Bn(I,(Y,X)=>Nf(X)||X===ko?Y.pcIsSpace||Y.str===""&&b||Y.str.length===I.length-1&&C||ok(I,Y.str.length+1)?{pcIsSpace:!1,str:Y.str+ko}:{pcIsSpace:!0,str:Y.str+" "}:{pcIsSpace:Rh(X),str:Y.str+X},{pcIsSpace:!1,str:""}).str},ik=(s,f)=>{const b=Ve.fromDom(f),C=Ve.fromDom(s);return Qb(C,"pre,code",Te(Bo,b))},ak=(s,f)=>Zt(s)&&bc(s.data)&&!ik(s,f),Yi=s=>Rn(s)&&s.nodeName==="A"&&!s.hasAttribute("href")&&(s.hasAttribute("name")||s.hasAttribute("id")),K0=(s,f)=>oi(s)&&!ak(s,f)||Yi(s)||Ih(s),Ih=xg("data-mce-bookmark"),i_=xg("data-mce-bogus"),a_=$a("data-mce-bogus","all"),Of=s=>O0(Ve.fromDom(s)).exists(f=>!kr(f)),kl=(s,f)=>{let b=0;if(K0(s,s))return!1;{let C=s.firstChild;if(!C)return!0;const M=new ri(C,s);do{if(f){if(a_(C)){C=M.next(!0);continue}if(i_(C)){C=M.next();continue}}if(Fs(C)&&Of(C))return!1;if(Ko(C)){b++,C=M.next();continue}if(K0(C,s))return!1;C=M.next()}while(C);return b<=1}},Ai=(s,f=!0)=>kl(s.dom,f),cu=s=>s.toLowerCase()==="svg",s_=s=>cu(s.nodeName),Rg=s=>(s==null?void 0:s.nodeName)==="svg"?"svg":"html",l_=["svg"],X0=()=>{let s=[];const f=()=>s[s.length-1];return{track:I=>{s_(I)&&s.push(I);let F=f();return F&&!F.contains(I)&&(s.pop(),F=f()),Rg(F)},current:()=>Rg(f()),reset:()=>{s=[]}}},Ig="data-mce-block",gw=s=>mt(qn(s),f=>!/[A-Z]/.test(f)),$g=s=>et(gw(s),f=>`${f}:`+et(l_,b=>`not(${b} ${f})`).join(":")).join(","),Lg=(s,f)=>re(f.querySelector(s))?(f.setAttribute(Ig,"true"),f.getAttribute("data-mce-selected")==="inline-boundary"&&f.removeAttribute("data-mce-selected"),!0):(f.removeAttribute(Ig),!1),Sc=(s,f)=>{const b=$g(s.getTransparentElements()),C=$g(s.getBlockElements());return mt(f.querySelectorAll(b),M=>Lg(C,M))},$h=(s,f)=>{var b;const C=f?"lastChild":"firstChild";for(let M=s[C];M;M=M[C])if(Ai(Ve.fromDom(M))){(b=M.parentNode)===null||b===void 0||b.removeChild(M);return}},Zu=(s,f)=>{const b=document.createRange(),C=s.parentNode;if(C){b.setStartBefore(s),b.setEndBefore(f);const M=b.extractContents();$h(M,!0),b.setStartAfter(f),b.setEndAfter(s);const I=b.extractContents();$h(I,!1),Ai(Ve.fromDom(M))||C.insertBefore(M,s),Ai(Ve.fromDom(f))||C.insertBefore(f,s),Ai(Ve.fromDom(I))||C.insertBefore(I,s),C.removeChild(s)}},c_=(s,f,b)=>{const C=s.getBlockElements(),M=Ve.fromDom(f),I=Y=>Co(Y)in C,F=Y=>Bo(Y,M);Fe(Gu(b),Y=>{Bi(Y,I,F).each(X=>{const ae=Jb(Y,de=>I(de)&&!s.isValidChild(Co(X),Co(de)));if(ae.length>0){const de=O0(X);Fe(ae,fe=>{Bi(fe,I,F).each(ve=>{Zu(ve.dom,fe.dom)})}),de.each(fe=>Sc(s,fe.dom))}})})},Lh=(s,f,b)=>{Fe([...b,...Kr(s,f)?[f]:[]],C=>Fe(fa(Ve.fromDom(C),C.nodeName.toLowerCase()),M=>{tr(s,M.dom)&&vc(M)}))},Bf=(s,f)=>{const b=Sc(s,f);c_(s,f,b),Lh(s,f,b)},vw=(s,f)=>{if(qp(s,f)){const b=$g(s.getBlockElements());Lg(b,f)}},jp=(s,f,b)=>{const C=I=>Bo(I,Ve.fromDom(f)),M=tw(Ve.fromDom(b),C);yo(M,M.length-2).filter(Cl).fold(()=>Bf(s,f),I=>Bf(s,I.dom))},Dl=s=>s.hasAttribute(Ig),Zp=(s,f)=>Vn(s.getTransparentElements(),f),qp=(s,f)=>Rn(f)&&Zp(s,f.nodeName),Kr=(s,f)=>qp(s,f)&&Dl(f),tr=(s,f)=>qp(s,f)&&!Dl(f),zd=(s,f)=>f.type===1&&Zp(s,f.name)&&V(f.attr(Ig)),u_=Qc().browser,J0=s=>Ae(s,Cl),sk=s=>u_.isFirefox()&&Co(s)==="table"?J0(Ya(s)).filter(f=>Co(f)==="caption").bind(f=>J0(Xl(f)).map(b=>{const C=b.dom.offsetTop,M=f.dom.offsetTop,I=f.dom.offsetHeight;return C<=M?-I:0})).getOr(0):0,Ff=(s,f)=>s.children&&$e(s.children,f),ui=(s,f,b)=>{let C=0,M=0;const I=s.ownerDocument;if(b=b||s,f){if(b===s&&f.getBoundingClientRect&&gc(Ve.fromDom(s),"position")==="static"){const Y=f.getBoundingClientRect();return C=Y.left+(I.documentElement.scrollLeft||s.scrollLeft)-I.documentElement.clientLeft,M=Y.top+(I.documentElement.scrollTop||s.scrollTop)-I.documentElement.clientTop,{x:C,y:M}}let F=f;for(;F&&F!==b&&F.nodeType&&!Ff(F,b);){const Y=F;C+=Y.offsetLeft||0,M+=Y.offsetTop||0,F=Y.offsetParent}for(F=f.parentNode;F&&F!==b&&F.nodeType&&!Ff(F,b);)C-=F.scrollLeft||0,M-=F.scrollTop||0,F=F.parentNode;M+=sk(Ve.fromDom(f))}return{x:C,y:M}},d_=(s,f={})=>{let b=0;const C={},M=Ve.fromDom(s),I=Rd(M),F=qe=>{f.referrerPolicy=qe},Y=qe=>{f.contentCssCors=qe},X=qe=>{Ki(Wb(M),qe)},ae=qe=>{const nt=Wb(M);mc(nt,"#"+qe).each(wo)},de=qe=>Nr(C,qe).getOrThunk(()=>({id:"mce-u"+b++,passed:[],failed:[],count:0})),fe=qe=>new Promise((nt,tt)=>{let gt;const Ht=on._addCacheSuffix(qe),an=de(Ht);C[Ht]=an,an.count++;const _n=($n,Qn)=>{Fe($n,Qt),an.status=Qn,an.passed=[],an.failed=[],gt&&(gt.onload=null,gt.onerror=null,gt=null)},At=()=>_n(an.passed,2),St=()=>_n(an.failed,3);if(nt&&an.passed.push(nt),tt&&an.failed.push(tt),an.status===1)return;if(an.status===2){At();return}if(an.status===3){St();return}an.status=1;const Ut=Ve.fromTag("link",I.dom);Dd(Ut,{rel:"stylesheet",type:"text/css",id:an.id}),f.contentCssCors&&na(Ut,"crossOrigin","anonymous"),f.referrerPolicy&&na(Ut,"referrerpolicy",f.referrerPolicy),gt=Ut.dom,gt.onload=At,gt.onerror=St,X(Ut),na(Ut,"href",Ht)}),ve=(qe,nt)=>{const tt=de(qe);C[qe]=tt,tt.count++;const gt=Ve.fromTag("style",I.dom);Dd(gt,{rel:"stylesheet",type:"text/css",id:tt.id}),gt.dom.innerHTML=nt,X(gt)},De=qe=>Promise.allSettled(et(qe,tt=>fe(tt).then(Ee(tt)))).then(tt=>{const gt=Gt(tt,Ht=>Ht.status==="fulfilled");return gt.fail.length>0?Promise.reject(et(gt.fail,Ht=>Ht.reason)):et(gt.pass,Ht=>Ht.value)}),Ie=qe=>{const nt=on._addCacheSuffix(qe);Nr(C,nt).each(tt=>{--tt.count===0&&(delete C[nt],ae(tt.id))})};return{load:fe,loadRawCss:ve,loadAll:De,unload:Ie,unloadRawCss:qe=>{Nr(C,qe).each(nt=>{--nt.count===0&&(delete C[qe],ae(nt.id))})},unloadAll:qe=>{Fe(qe,nt=>{Ie(nt)})},_setReferrerPolicy:F,_setContentCssCors:Y}},h_=(()=>{const s=new WeakMap;return{forElement:(b,C)=>{const I=Id(b).dom;return ue.from(s.get(I)).getOrThunk(()=>{const F=d_(I,C);return s.set(I,F),F})}}})(),Vt=s=>s.nodeName.toLowerCase()==="span",Q0=(s,f,b)=>re(s)&&(K0(s,f)||b.isInline(s.nodeName.toLowerCase())),lk=(s,f,b)=>{const C=new ri(s,f).prev(!1),M=new ri(s,f).next(!1),I=te(C)||Q0(C,f,b),F=te(M)||Q0(M,f,b);return I&&F},Ng=s=>Vt(s)&&s.getAttribute("data-mce-type")==="bookmark",ck=(s,f,b)=>Zt(s)&&s.data.length>0&&lk(s,f,b),Kp=s=>Rn(s)?s.childNodes.length>0:!1,f_=s=>yi(s)||wg(s),Ud=(s,f,b,C)=>{var M;const I=C||f;if(Rn(f)&&Ng(f))return f;const F=f.childNodes;for(let Y=F.length-1;Y>=0;Y--)Ud(s,F[Y],b,I);if(Rn(f)){const Y=f.childNodes;Y.length===1&&Ng(Y[0])&&((M=f.parentNode)===null||M===void 0||M.insertBefore(Y[0],f))}return!f_(f)&&!K0(f,I)&&!Kp(f)&&!ck(f,I,b)&&s.remove(f),f},uk=on.makeMap,qu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ii=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ku=/[<>&\"\']/g,dk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,uu={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Vf={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},p_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},zf=s=>{const f=Ve.fromTag("div").dom;return f.innerHTML=s,f.textContent||f.innerText||s},yw=(s,f)=>{const b={};if(s){const C=s.split(",");f=f||10;for(let M=0;M<C.length;M+=2){const I=String.fromCharCode(parseInt(C[M],f));if(!Vf[I]){const F="&"+C[M+1]+";";b[I]=F,b[F]=I}}return b}else return},ey=yw("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),bw=(s,f)=>s.replace(f?qu:ii,b=>Vf[b]||b),hk=s=>(""+s).replace(Ku,f=>Vf[f]||f),_w=(s,f)=>s.replace(f?qu:ii,b=>b.length>1?"&#"+((b.charCodeAt(0)-55296)*1024+(b.charCodeAt(1)-56320)+65536)+";":Vf[b]||"&#"+b.charCodeAt(0)+";"),Xu=(s,f,b)=>{const C=b||ey;return s.replace(f?qu:ii,M=>Vf[M]||C[M]||M)},Nh={encodeRaw:bw,encodeAllRaw:hk,encodeNumeric:_w,encodeNamed:Xu,getEncodeFunc:(s,f)=>{const b=yw(f)||ey,C=(F,Y)=>F.replace(Y?qu:ii,X=>Vf[X]!==void 0?Vf[X]:b[X]!==void 0?b[X]:X.length>1?"&#"+((X.charCodeAt(0)-55296)*1024+(X.charCodeAt(1)-56320)+65536)+";":"&#"+X.charCodeAt(0)+";"),M=(F,Y)=>Xu(F,Y,b),I=uk(s.replace(/\+/g,","));return I.named&&I.numeric?C:I.named?f?M:Xu:I.numeric?_w:bw},decode:s=>s.replace(dk,(f,b)=>b?(b.charAt(0).toLowerCase()==="x"?b=parseInt(b.substr(1),16):b=parseInt(b,10),b>65535?(b-=65536,String.fromCharCode(55296+(b>>10),56320+(b&1023))):uu[b]||String.fromCharCode(b)):p_[f]||ey[f]||zf(f))},qa=(s,f)=>(s=on.trim(s),s?s.split(f||" "):[]),In=s=>new RegExp("^"+s.replace(/([?+*])/g,".$1")+"$"),fk=s=>{const f=/^(~)?(.+)$/;return Kt(qa(s,","),b=>{const C=f.exec(b);if(C){const M=C[1]==="~",I=M?"span":"div",F=C[2];return[{inline:M,cloneName:I,name:F}]}else return[]})},pk=s=>{let f,b,C;if(f="id accesskey class dir lang style tabindex title role",b="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",C="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",s!=="html4"){const I="a ins del canvas map";f+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",b+=" article aside details dialog figure main header footer hgroup section nav "+I,C+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}s!=="html5-strict"&&(f+=" xml:lang",C=[C,"acronym applet basefont big font strike tt"].join(" "),b=[b,"center dir isindex noframes"].join(" "));const M=[b,C].join(" ");return{globalAttributes:f,blockContent:b,phrasingContent:C,flowContent:M}},ty=s=>{const{globalAttributes:f,phrasingContent:b,flowContent:C}=pk(s),M={},I=(X,ae,de)=>{M[X]={attributes:kn(ae,Ee({})),attributesOrder:ae,children:kn(de,Ee({}))}},F=(X,ae="",de="")=>{const fe=qa(de),ve=qa(X);let De=ve.length;const Ie=qa([f,ae].join(" "));for(;De--;)I(ve[De],Ie.slice(),fe)},Y=(X,ae)=>{const de=qa(X),fe=qa(ae);let ve=de.length;for(;ve--;){const De=M[de[ve]];for(let Ie=0,Me=fe.length;Ie<Me;Ie++)De.attributes[fe[Ie]]={},De.attributesOrder.push(fe[Ie])}};return s!=="html5-strict"&&(Fe(qa("acronym applet basefont big font strike tt"),de=>{F(de,"",b)}),Fe(qa("center dir isindex noframes"),de=>{F(de,"",C)})),F("html","manifest","head body"),F("head","","base command link meta noscript script style title"),F("title hr noscript br"),F("base","href target"),F("link","href rel media hreflang type sizes hreflang"),F("meta","name http-equiv content charset"),F("style","media type scoped"),F("script","src async defer type charset"),F("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",C),F("dd div","",C),F("address dt caption","",s==="html4"?b:C),F("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",b),F("blockquote","cite",C),F("ol","reversed start type","li"),F("ul","","li"),F("li","value",C),F("dl","","dt dd"),F("a","href target rel media hreflang type",s==="html4"?b:C),F("q","cite",b),F("ins del","cite datetime",C),F("img","src sizes srcset alt usemap ismap width height"),F("iframe","src name width height",C),F("embed","src type width height"),F("object","data type typemustmatch name usemap form width height",[C,"param"].join(" ")),F("param","name value"),F("map","name",[C,"area"].join(" ")),F("area","alt coords shape href target rel media hreflang type"),F("table","border","caption colgroup thead tfoot tbody tr"+(s==="html4"?" col":"")),F("colgroup","span","col"),F("col","span"),F("tbody thead tfoot","","tr"),F("tr","","td th"),F("td","colspan rowspan headers",C),F("th","colspan rowspan headers scope abbr",C),F("form","accept-charset action autocomplete enctype method name novalidate target",C),F("fieldset","disabled form name",[C,"legend"].join(" ")),F("label","form for",b),F("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),F("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",s==="html4"?C:b),F("select","disabled form multiple name required size","option optgroup"),F("optgroup","disabled label","option"),F("option","disabled label selected value"),F("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),F("menu","type label",[C,"li"].join(" ")),F("noscript","",C),s!=="html4"&&(F("wbr"),F("ruby","",[b,"rt rp"].join(" ")),F("figcaption","",C),F("mark rt rp bdi","",b),F("summary","",[b,"h1 h2 h3 h4 h5 h6"].join(" ")),F("canvas","width height",C),F("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[C,"track source"].join(" ")),F("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[C,"track source"].join(" ")),F("picture","","img source"),F("source","src srcset type media sizes"),F("track","kind src srclang label default"),F("datalist","",[b,"option"].join(" ")),F("article section nav aside main header footer","",C),F("hgroup","","h1 h2 h3 h4 h5 h6"),F("figure","",[C,"figcaption"].join(" ")),F("time","datetime",b),F("dialog","open",C),F("command","type label icon disabled checked radiogroup command"),F("output","for form name",b),F("progress","value max",b),F("meter","value min max low high optimum",b),F("details","open",[C,"summary"].join(" ")),F("keygen","autofocus challenge disabled form keytype name"),I("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),s!=="html5-strict"&&(Y("script","language xml:space"),Y("style","xml:space"),Y("object","declare classid code codebase codetype archive standby align border hspace vspace"),Y("embed","align name hspace vspace"),Y("param","valuetype type"),Y("a","charset name rev shape coords"),Y("br","clear"),Y("applet","codebase archive code object alt name width height align hspace vspace"),Y("img","name longdesc align border hspace vspace"),Y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Y("font basefont","size color face"),Y("input","usemap align"),Y("select"),Y("textarea"),Y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Y("ul","type compact"),Y("li","type"),Y("ol dl menu dir","compact"),Y("pre","width xml:space"),Y("hr","align noshade size width"),Y("isindex","prompt"),Y("table","summary width frame rules cellspacing cellpadding align bgcolor"),Y("col","width align char charoff valign"),Y("colgroup","width align char charoff valign"),Y("thead","align char charoff valign"),Y("tr","align char charoff valign bgcolor"),Y("th","axis align char charoff valign nowrap bgcolor width height"),Y("form","accept"),Y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Y("tfoot","align char charoff valign"),Y("tbody","align char charoff valign"),Y("area","nohref"),Y("body","background bgcolor text link vlink alink")),s!=="html4"&&(Y("input button select textarea","autofocus"),Y("input textarea","placeholder"),Y("a","download"),Y("link script img","crossorigin"),Y("img","loading"),Y("iframe","sandbox seamless allow allowfullscreen loading")),s!=="html4"&&Fe([M.video,M.audio],X=>{delete X.children.audio,delete X.children.video}),Fe(qa("a form meter progress dfn"),X=>{M[X]&&delete M[X].children[X]}),delete M.caption.children.table,delete M.script,M},ny=s=>s==="-"?"remove":"add",Sw=s=>{const f=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Kt(qa(s,","),b=>{const C=f.exec(b);if(C){const M=C[1],I=M?ny(M):"replace",F=C[2],Y=qa(C[3],"|");return[{operation:I,name:F,validChildren:Y}]}else return[]})},ry=(s,f)=>{const b=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,C=/[*?+]/,{attributes:M,attributesOrder:I}=f;return Fe(qa(s,"|"),F=>{const Y=b.exec(F);if(Y){const X={},ae=Y[1],de=Y[2].replace(/[\\:]:/g,":"),fe=Y[3],ve=Y[4];if(ae==="!"&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(de),X.required=!0),ae==="-"){delete M[de],I.splice(on.inArray(I,de),1);return}if(fe&&(fe==="="?(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:de,value:ve}),X.defaultValue=ve):fe==="~"?(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:de,value:ve}),X.forcedValue=ve):fe==="<"&&(X.validValues=on.makeMap(ve,"?"))),C.test(de)){const De=X;f.attributePatterns=f.attributePatterns||[],De.pattern=In(de),f.attributePatterns.push(De)}else M[de]||I.push(de),M[de]=X}})},Ju=(s,f)=>{Ue(s.attributes,(b,C)=>{f.attributes[C]=b}),f.attributesOrder.push(...s.attributesOrder)},Hd=(s,f)=>{const b=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Kt(qa(f,","),C=>{const M=b.exec(C);if(M){const I=M[1],F=M[2],Y=M[3],X=M[4],ae=M[5],de={attributes:{},attributesOrder:[]};if(s.each(fe=>Ju(fe,de)),I==="#"?de.paddEmpty=!0:I==="-"&&(de.removeEmpty=!0),X==="!"&&(de.removeEmptyAttrs=!0),ae&&ry(ae,de),Y&&(de.outputName=F),F==="@")if(s.isNone())s=ue.some(de);else return[];return[Y?{name:F,element:de,aliasName:Y}:{name:F,element:de}]}else return[]})},Og={},Oh=on.makeMap,xc=on.each,oy=on.extend,iy=on.explode,Bh=(s,f={})=>{const b=Oh(s," ",Oh(s.toUpperCase()," "));return oy(b,f)},xw=s=>Bh("td th li dt dd figcaption caption details summary",s.getTextBlockElements()),Xp=(s,f)=>{if(s){const b={};return V(s)&&(s={"*":s}),xc(s,(C,M)=>{b[M]=b[M.toUpperCase()]=f==="map"?Oh(C,/[, ]/):iy(C,/[, ]/)}),b}else return},Cc=(s={})=>{var f;const b={},C={};let M=[];const I={},F={},Y=(Ar,_o,Qo)=>{const wi=s[Ar];if(wi)return Oh(wi,/[, ]/,Oh(wi.toUpperCase(),/[, ]/));{let gi=Og[Ar];return gi||(gi=Bh(_o,Qo),Og[Ar]=gi),gi}},X=(f=s.schema)!==null&&f!==void 0?f:"html5",ae=ty(X);s.verify_html===!1&&(s.valid_elements="*[*]");const de=Xp(s.valid_styles),fe=Xp(s.invalid_styles,"map"),ve=Xp(s.valid_classes,"map"),De=Y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Ie=Y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Me=Y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Re=Y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),qe="td th iframe video audio object script code",nt=Y("non_empty_elements",qe+" pre svg",Me),tt=Y("move_caret_before_on_enter_elements",qe+" table",Me),gt="h1 h2 h3 h4 h5 h6",Ht=Y("text_block_elements",gt+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),an=Y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ht),_n=Y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),At=Y("transparent_elements","a ins del canvas map"),St=Y("wrap_block_elements","pre "+gt);xc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ar=>{F[Ar]=new RegExp("</"+Ar+"[^>]*>","gi")});const Ut=Ar=>{const _o=ue.from(b["@"]),Qo=/[*?+]/;Fe(Hd(_o,Ar??""),({name:wi,element:gi,aliasName:Ul})=>{if(Ul&&(b[Ul]=gi),Qo.test(wi)){const wd=gi;wd.pattern=In(wi),M.push(wd)}else b[wi]=gi})},$n=Ar=>{M=[],Fe(qn(b),_o=>{delete b[_o]}),Ut(Ar)},Qn=Ar=>{delete Og.text_block_elements,delete Og.block_elements,Fe(fk(Ar??""),({inline:_o,name:Qo,cloneName:wi})=>{if(C[Qo]=C[wi],I[Qo]=wi,nt[Qo.toUpperCase()]={},nt[Qo]={},_o||(an[Qo.toUpperCase()]={},an[Qo]={}),!b[Qo]){let gi=b[wi];gi=oy({},gi),delete gi.removeEmptyAttrs,delete gi.removeEmpty,b[Qo]=gi}Ue(C,(gi,Ul)=>{gi[wi]&&(C[Ul]=gi=oy({},C[Ul]),gi[Qo]=gi[wi])})})},zr=Ar=>{Fe(Sw(Ar??""),({operation:_o,name:Qo,validChildren:wi})=>{const gi=_o==="replace"?{"#comment":{}}:C[Qo];Fe(wi,Ul=>{_o==="remove"?delete gi[Ul]:gi[Ul]={}}),C[Qo]=gi})},Jr=Ar=>{const _o=b[Ar];if(_o)return _o;let Qo=M.length;for(;Qo--;){const wi=M[Qo];if(wi.pattern.test(Ar))return wi}};s.valid_elements?($n(s.valid_elements),xc(ae,(Ar,_o)=>{C[_o]=Ar.children})):(xc(ae,(Ar,_o)=>{b[_o]={attributes:Ar.attributes,attributesOrder:Ar.attributesOrder},C[_o]=Ar.children}),xc(qa("strong/b em/i"),Ar=>{const _o=qa(Ar,"/");b[_o[1]].outputName=_o[0]}),xc(_n,(Ar,_o)=>{b[_o]&&(s.padd_empty_block_inline_children&&(b[_o].paddInEmptyBlock=!0),b[_o].removeEmpty=!0)}),xc(qa("ol ul blockquote a table tbody"),Ar=>{b[Ar]&&(b[Ar].removeEmpty=!0)}),xc(qa("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ar=>{b[Ar]&&(b[Ar].paddEmpty=!0)}),xc(qa("span"),Ar=>{b[Ar].removeEmptyAttrs=!0})),delete b.svg,Qn(s.custom_elements),zr(s.valid_children),Ut(s.extended_valid_elements),zr("+ol[ul|ol],+ul[ul|ol]"),xc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ar,_o)=>{b[_o]&&(b[_o].parentsRequired=qa(Ar))}),s.invalid_elements&&xc(iy(s.invalid_elements),Ar=>{b[Ar]&&delete b[Ar]}),Jr("span")||Ut("span[!data-mce-type|*]");const Uo=Ee(de),ho=Ee(fe),ki=Ee(ve),hs=Ee(Re),Ho=Ee(an),dn=Ee(Ht),Hn=Ee(_n),bo=Ee(Object.seal(Me)),no=Ee(Ie),Nn=Ee(nt),vr=Ee(tt),ln=Ee(De),_r=Ee(At),fo=Ee(St),Jo=Ee(Object.seal(F)),Zo=(Ar,_o)=>{const Qo=C[Ar.toLowerCase()];return!!(Qo&&Qo[_o.toLowerCase()])},Ha=(Ar,_o)=>{const Qo=Jr(Ar);if(Qo)if(_o){if(Qo.attributes[_o])return!0;const wi=Qo.attributePatterns;if(wi){let gi=wi.length;for(;gi--;)if(wi[gi].pattern.test(_o))return!0}}else return!0;return!1},Cd=Ar=>Vn(Ho(),Ar),dc=Ar=>Ha(Ar)&&!Cd(Ar),_l=Ar=>Vn(fo(),Ar)||dc(Ar),Ru=Ee(I);return{type:X,children:C,elements:b,getValidStyles:Uo,getValidClasses:ki,getBlockElements:Ho,getInvalidStyles:ho,getVoidElements:bo,getTextBlockElements:dn,getTextInlineElements:Hn,getBoolAttrs:hs,getElementRule:Jr,getSelfClosingElements:no,getNonEmptyElements:Nn,getMoveCaretBeforeOnEnterElements:vr,getWhitespaceElements:ln,getTransparentElements:_r,getSpecialElements:Jo,isValidChild:Zo,isValid:Ha,isBlock:Cd,isInline:dc,isWrapper:_l,getCustomElements:Ru,addValidElements:Ut,setValidElements:$n,addCustomElements:Qn,addValidChildren:zr}},m_=s=>({value:Cw(s)}),Cw=s=>$i(s,"#").toUpperCase(),Jp=s=>{const f=s.toString(16);return(f.length===1?"0"+f:f).toUpperCase()},wc=s=>{const f=Jp(s.red)+Jp(s.green)+Jp(s.blue);return m_(f)},Xs=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,mk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ww=(s,f,b,C)=>({red:s,green:f,blue:b,alpha:C}),Ew=(s,f,b,C)=>{const M=parseInt(s,10),I=parseInt(f,10),F=parseInt(b,10),Y=parseFloat(C);return ww(M,I,F,Y)},g_=s=>{if(s==="transparent")return ue.some(ww(0,0,0,0));const f=Xs.exec(s);if(f!==null)return ue.some(Ew(f[1],f[2],f[3],"1"));const b=mk.exec(s);return b!==null?ue.some(Ew(b[1],b[2],b[3],b[4])):ue.none()},Ql=s=>`rgba(${s.red},${s.green},${s.blue},${s.alpha})`,al=s=>g_(s).map(wc).map(f=>"#"+f.value).getOr(s),ay=(s={},f)=>{const b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,C=/\s*([^:]+):\s*([^;]+);?/g,M=/\s+$/,I={};let F,Y;const X=Tg;f&&(F=f.getValidStyles(),Y=f.getInvalidStyles());const ae=(`\\" \\' \\; \\: ; : `+X).split(" ");for(let fe=0;fe<ae.length;fe++)I[ae[fe]]=X+fe,I[X+fe]=ae[fe];const de={parse:fe=>{const ve={};let De=!1;const Ie=s.url_converter,Me=s.url_converter_scope||de,Re=(At,St,Ut)=>{const $n=ve[At+"-top"+St];if(!$n)return;const Qn=ve[At+"-right"+St];if(!Qn)return;const zr=ve[At+"-bottom"+St];if(!zr)return;const Jr=ve[At+"-left"+St];if(!Jr)return;const Uo=[$n,Qn,zr,Jr];let ho=Uo.length-1;for(;ho--&&Uo[ho]===Uo[ho+1];);ho>-1&&Ut||(ve[At+St]=ho===-1?Uo[0]:Uo.join(" "),delete ve[At+"-top"+St],delete ve[At+"-right"+St],delete ve[At+"-bottom"+St],delete ve[At+"-left"+St])},qe=At=>{const St=ve[At];if(!St)return;const Ut=St.indexOf(",")>-1?[St]:St.split(" ");let $n=Ut.length;for(;$n--;)if(Ut[$n]!==Ut[0])return!1;return ve[At]=Ut[0],!0},nt=(At,St,Ut,$n)=>{qe(St)&&qe(Ut)&&qe($n)&&(ve[At]=ve[St]+" "+ve[Ut]+" "+ve[$n],delete ve[St],delete ve[Ut],delete ve[$n])},tt=At=>(De=!0,I[At]),gt=(At,St)=>(De&&(At=At.replace(/\uFEFF[0-9]/g,Ut=>I[Ut])),St||(At=At.replace(/\\([\'\";:])/g,"$1")),At),Ht=At=>String.fromCharCode(parseInt(At.slice(1),16)),an=At=>At.replace(/\\[0-9a-f]+/gi,Ht),_n=(At,St,Ut,$n,Qn,zr)=>{if(Qn=Qn||zr,Qn)return Qn=gt(Qn),"'"+Qn.replace(/\'/g,"\\'")+"'";if(St=gt(St||Ut||$n||""),!s.allow_script_urls){const Jr=St.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Jr)||!s.allow_svg_data_urls&&/^data:image\/svg/i.test(Jr))return""}return Ie&&(St=Ie.call(Me,St,"style")),"url('"+St.replace(/\'/g,"\\'")+"')"};if(fe){fe=fe.replace(/[\u0000-\u001F]/g,""),fe=fe.replace(/\\[\"\';:\uFEFF]/g,tt).replace(/\"[^\"]+\"|\'[^\']+\'/g,St=>St.replace(/[;:]/g,tt));let At;for(;At=C.exec(fe);){C.lastIndex=At.index+At[0].length;let St=At[1].replace(M,"").toLowerCase(),Ut=At[2].replace(M,"");if(St&&Ut){if(St=an(St),Ut=an(Ut),St.indexOf(X)!==-1||St.indexOf('"')!==-1||!s.allow_script_urls&&(St==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ut)))continue;St==="font-weight"&&Ut==="700"?Ut="bold":(St==="color"||St==="background-color")&&(Ut=Ut.toLowerCase()),V(s.force_hex_color)&&s.force_hex_color!=="off"&&g_(Ut).each($n=>{(s.force_hex_color==="always"||$n.alpha===1)&&(Ut=al(Ql($n)))}),Ut=Ut.replace(b,_n),ve[St]=De?gt(Ut,!0):Ut}}Re("border","",!0),Re("border","-width"),Re("border","-color"),Re("border","-style"),Re("padding",""),Re("margin",""),nt("border","border-width","border-style","border-color"),ve.border==="medium none"&&delete ve.border,ve["border-image"]==="none"&&delete ve["border-image"]}return ve},serialize:(fe,ve)=>{let De="";const Ie=(Re,qe)=>{const nt=qe[Re];if(nt)for(let tt=0,gt=nt.length;tt<gt;tt++){const Ht=nt[tt],an=fe[Ht];an&&(De+=(De.length>0?" ":"")+Ht+": "+an+";")}},Me=(Re,qe)=>{if(!Y||!qe)return!0;let nt=Y["*"];return nt&&nt[Re]?!1:(nt=Y[qe],!(nt&&nt[Re]))};return ve&&F?(Ie("*",F),Ie(ve,F)):Ue(fe,(Re,qe)=>{Re&&Me(qe,ve)&&(De+=(De.length>0?" ":"")+qe+": "+Re+";")}),De}};return de},Uf={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gk=s=>s instanceof Event||he(s.initEvent),vk=s=>s.isDefaultPrevented===Be||s.isDefaultPrevented===Xe,sy=s=>oe(s.preventDefault)||gk(s),Bg=(s,f)=>{const b=f??{};for(const C in s)Vn(Uf,C)||(b[C]=s[C]);return re(s.composedPath)&&(b.composedPath=()=>s.composedPath()),re(s.getModifierState)&&(b.getModifierState=C=>s.getModifierState(C)),re(s.getTargetRanges)&&(b.getTargetRanges=()=>s.getTargetRanges()),b},ly=(s,f,b,C)=>{var M;const I=Bg(f,C);return I.type=s,oe(I.target)&&(I.target=(M=I.srcElement)!==null&&M!==void 0?M:b),sy(f)&&(I.preventDefault=()=>{I.defaultPrevented=!0,I.isDefaultPrevented=Be,he(f.preventDefault)&&f.preventDefault()},I.stopPropagation=()=>{I.cancelBubble=!0,I.isPropagationStopped=Be,he(f.stopPropagation)&&f.stopPropagation()},I.stopImmediatePropagation=()=>{I.isImmediatePropagationStopped=Be,I.stopPropagation()},vk(I)||(I.isDefaultPrevented=I.defaultPrevented===!0?Be:Xe,I.isPropagationStopped=I.cancelBubble===!0?Be:Xe,I.isImmediatePropagationStopped=Xe)),I},Tw="mce-data-",Qu=/^(?:mouse|contextmenu)|click/,cy=(s,f,b,C)=>{s.addEventListener(f,b,C||!1)},Fg=(s,f,b,C)=>{s.removeEventListener(f,b,C||!1)},yk=s=>re(s)&&Qu.test(s.type),Vg=(s,f)=>{const b=ly(s.type,s,document,f);if(yk(s)&&te(s.pageX)&&!te(s.clientX)){const C=b.target.ownerDocument||document,M=C.documentElement,I=C.body,F=b;F.pageX=s.clientX+(M&&M.scrollLeft||I&&I.scrollLeft||0)-(M&&M.clientLeft||I&&I.clientLeft||0),F.pageY=s.clientY+(M&&M.scrollTop||I&&I.scrollTop||0)-(M&&M.clientTop||I&&I.clientTop||0)}return b},Aw=(s,f,b)=>{const C=s.document,M={type:"ready"};if(b.domLoaded){f(M);return}const I=()=>C.readyState==="complete"||C.readyState==="interactive"&&C.body,F=()=>{Fg(s,"DOMContentLoaded",F),Fg(s,"load",F),b.domLoaded||(b.domLoaded=!0,f(M)),s=null};I()?F():cy(s,"DOMContentLoaded",F),b.domLoaded||cy(s,"load",F)};class di{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Tw+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(f,b,C,M){const I=this;let F;const Y=window,X=ve=>{I.executeHandlers(Vg(ve||Y.event),ae)};if(!f||Zt(f)||Bd(f))return C;let ae;f[I.expando]?ae=f[I.expando]:(ae=I.count++,f[I.expando]=ae,I.events[ae]={}),M=M||f;const de=b.split(" ");let fe=de.length;for(;fe--;){let ve=de[fe],De=X,Ie=!1,Me=!1;if(ve==="DOMContentLoaded"&&(ve="ready"),I.domLoaded&&ve==="ready"&&f.readyState==="complete"){C.call(M,Vg({type:ve}));continue}!I.hasFocusIn&&(ve==="focusin"||ve==="focusout")&&(Ie=!0,Me=ve==="focusin"?"focus":"blur",De=Re=>{const qe=Vg(Re||Y.event);qe.type=qe.type==="focus"?"focusin":"focusout",I.executeHandlers(qe,ae)}),F=I.events[ae][ve],F?ve==="ready"&&I.domLoaded?C(Vg({type:ve})):F.push({func:C,scope:M}):(I.events[ae][ve]=F=[{func:C,scope:M}],F.fakeName=Me,F.capture=Ie,F.nativeHandler=De,ve==="ready"?Aw(f,De,I):cy(f,Me||ve,De,Ie))}return f=F=null,C}unbind(f,b,C){if(!f||Zt(f)||Bd(f))return this;const M=f[this.expando];if(M){let I=this.events[M];if(b){const F=b.split(" ");let Y=F.length;for(;Y--;){const X=F[Y],ae=I[X];if(ae){if(C){let de=ae.length;for(;de--;)if(ae[de].func===C){const fe=ae.nativeHandler,ve=ae.fakeName,De=ae.capture,Ie=ae.slice(0,de).concat(ae.slice(de+1));Ie.nativeHandler=fe,Ie.fakeName=ve,Ie.capture=De,I[X]=Ie}}(!C||ae.length===0)&&(delete I[X],Fg(f,ae.fakeName||X,ae.nativeHandler,ae.capture))}}}else Ue(I,(F,Y)=>{Fg(f,F.fakeName||Y,F.nativeHandler,F.capture)}),I={};for(const F in I)if(Vn(I,F))return this;delete this.events[M];try{delete f[this.expando]}catch{f[this.expando]=null}}return this}fire(f,b,C){return this.dispatch(f,b,C)}dispatch(f,b,C){if(!f||Zt(f)||Bd(f))return this;const M=Vg({type:b,target:f},C);do{const I=f[this.expando];I&&this.executeHandlers(M,I),f=f.parentNode||f.ownerDocument||f.defaultView||f.parentWindow}while(f&&!M.isPropagationStopped());return this}clean(f){if(!f||Zt(f)||Bd(f))return this;if(f[this.expando]&&this.unbind(f),f.getElementsByTagName||(f=f.document),f&&f.getElementsByTagName){this.unbind(f);const b=f.getElementsByTagName("*");let C=b.length;for(;C--;)f=b[C],f[this.expando]&&this.unbind(f)}return this}destroy(){this.events={}}cancel(f){return f&&(f.preventDefault(),f.stopImmediatePropagation()),!1}executeHandlers(f,b){const C=this.events[b],M=C&&C[f.type];if(M)for(let I=0,F=M.length;I<F;I++){const Y=M[I];if(Y&&Y.func.call(Y.scope,f)===!1&&f.preventDefault(),f.isImmediatePropagationStopped())return}}}di.Event=new di;const zg=on.each,sl=on.grep,v_="data-mce-style",Ug=on.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Fh=(s,f,b)=>{oe(b)||b===""?da(s,f):na(s,f,b)},Hg=s=>s.replace(/[A-Z]/g,f=>"-"+f.toLowerCase()),Hf=(s,f)=>{let b=0;if(s)for(let C=s.nodeType,M=s.previousSibling;M;M=M.previousSibling){const I=M.nodeType;f&&Zt(M)&&(I===C||!M.data.length)||(b++,C=I)}return b},du=(s,f)=>{const b=ms(f,"style"),C=s.serialize(s.parse(b),Co(f));Fh(f,v_,C)},Vh=(s,f)=>_e(s)?Vn(Ug,f)?s+"":s+"px":s,Gg=(s,f,b)=>{const C=Hg(f);oe(b)||b===""?ZM(s,C):aw(s,C,Vh(b,C))},Qp=(s,f,b)=>{const C=f.keep_values,M={set:(F,Y,X)=>{const ae=Ve.fromDom(F);he(f.url_converter)&&re(Y)&&(Y=f.url_converter.call(f.url_converter_scope||b(),String(Y),X,F));const de="data-mce-"+X;Fh(ae,de,Y),Fh(ae,X,Y)},get:(F,Y)=>{const X=Ve.fromDom(F);return ms(X,"data-mce-"+Y)||ms(X,Y)}},I={style:{set:(F,Y)=>{const X=Ve.fromDom(F);C&&Fh(X,v_,Y),da(X,"style"),V(Y)&&F0(X,s.parse(Y))},get:F=>{const Y=Ve.fromDom(F),X=ms(Y,v_)||ms(Y,"style");return s.serialize(s.parse(X),Co(Y))}}};return C&&(I.href=I.src=M),I},Vo=(s,f={})=>{const b={},C=window,M={};let I=0;const F=!0,Y=!0,X=h_.forElement(Ve.fromDom(s),{contentCssCors:f.contentCssCors,referrerPolicy:f.referrerPolicy}),ae=[],de=f.schema?f.schema:Cc({}),fe=ay({url_converter:f.url_converter,url_converter_scope:f.url_converter_scope,force_hex_color:f.force_hex_color},f.schema),ve=f.ownEvents?new di:di.Event,De=de.getBlockElements(),Ie=yt=>V(yt)?Vn(De,yt):Rn(yt)&&(Vn(De,yt.nodeName)||Kr(de,yt)),Me=yt=>yt&&s&&V(yt)?s.getElementById(yt):yt,Re=yt=>{const bt=Me(yt);return re(bt)?Ve.fromDom(bt):null},qe=(yt,bt,cn="")=>{let Jt;const jn=Re(yt);if(re(jn)&&Cl(jn)){const Qr=Tb[bt];Qr&&Qr.get?Jt=Qr.get(jn.dom,bt):Jt=ms(jn,bt)}return re(Jt)?Jt:cn},nt=yt=>{const bt=Me(yt);return oe(bt)?[]:bt.attributes},tt=(yt,bt,cn)=>{Hn(yt,Jt=>{if(Rn(Jt)){const jn=Ve.fromDom(Jt),Qr=cn===""?null:cn,Si=ms(jn,bt),Hl=Tb[bt];Hl&&Hl.set?Hl.set(jn.dom,Qr,bt):Fh(jn,bt,Qr),Si!==Qr&&f.onSetAttrib&&f.onSetAttrib({attrElm:jn.dom,attrName:bt,attrValue:Qr})}})},gt=(yt,bt)=>yt.cloneNode(bt),Ht=()=>f.root_element||s.body,an=yt=>{const bt=W0(yt);return{x:bt.x,y:bt.y,w:bt.width,h:bt.height}},_n=(yt,bt)=>ui(s.body,Me(yt),bt),At=(yt,bt,cn)=>{Hn(yt,Jt=>{const jn=Ve.fromDom(Jt);Gg(jn,bt,cn),f.update_styles&&du(fe,jn)})},St=(yt,bt)=>{Hn(yt,cn=>{const Jt=Ve.fromDom(cn);Ue(bt,(jn,Qr)=>{Gg(Jt,Qr,jn)}),f.update_styles&&du(fe,Jt)})},Ut=(yt,bt,cn)=>{const Jt=Me(yt);if(!(oe(Jt)||!ou(Jt)&&!Sg(Jt)))return cn?gc(Ve.fromDom(Jt),Hg(bt)):(bt=bt.replace(/-(\D)/g,(jn,Qr)=>Qr.toUpperCase()),bt==="float"&&(bt="cssFloat"),Jt.style?Jt.style[bt]:void 0)},$n=yt=>{const bt=Me(yt);if(!bt)return{w:0,h:0};let cn=Ut(bt,"width"),Jt=Ut(bt,"height");return(!cn||cn.indexOf("px")===-1)&&(cn="0"),(!Jt||Jt.indexOf("px")===-1)&&(Jt="0"),{w:parseInt(cn,10)||bt.offsetWidth||bt.clientWidth,h:parseInt(Jt,10)||bt.offsetHeight||bt.clientHeight}},Qn=yt=>{const bt=Me(yt),cn=_n(bt),Jt=$n(bt);return{x:cn.x,y:cn.y,w:Jt.w,h:Jt.h}},zr=(yt,bt)=>{if(!yt)return!1;const cn=Z(yt)?yt:[yt];return st(cn,Jt=>fc(Ve.fromDom(Jt),bt))},Jr=(yt,bt,cn,Jt)=>{const jn=[];let Qr=Me(yt);Jt=Jt===void 0;const Si=cn||(Ht().nodeName!=="BODY"?Ht().parentNode:null);if(V(bt))if(bt==="*")bt=Rn;else{const Hl=bt;bt=fs=>zr(fs,Hl)}for(;Qr&&!(Qr===Si||oe(Qr.nodeType)||wg(Qr)||yi(Qr));){if(!bt||bt(Qr))if(Jt)jn.push(Qr);else return[Qr];Qr=Qr.parentNode}return Jt?jn:null},Uo=(yt,bt,cn)=>{const Jt=Jr(yt,bt,cn,!1);return Jt&&Jt.length>0?Jt[0]:null},ho=(yt,bt,cn)=>{let Jt=bt;if(yt){V(bt)&&(Jt=jn=>zr(jn,bt));for(let jn=yt[cn];jn;jn=jn[cn])if(he(Jt)&&Jt(jn))return jn}return null},ki=(yt,bt)=>ho(yt,bt,"nextSibling"),hs=(yt,bt)=>ho(yt,bt,"previousSibling"),Ho=yt=>he(yt.querySelectorAll),dn=(yt,bt)=>{var cn,Jt;const jn=(Jt=(cn=Me(bt))!==null&&cn!==void 0?cn:f.root_element)!==null&&Jt!==void 0?Jt:s;return Ho(jn)?Cr(jn.querySelectorAll(yt)):[]},Hn=function(yt,bt,cn){const Jt=cn??this;if(Z(yt)){const jn=[];return zg(yt,(Qr,Si)=>{const Hl=Me(Qr);Hl&&jn.push(bt.call(Jt,Hl,Si))}),jn}else{const jn=Me(yt);return jn?bt.call(Jt,jn):!1}},bo=(yt,bt)=>{Hn(yt,cn=>{Ue(bt,(Jt,jn)=>{tt(cn,jn,Jt)})})},no=(yt,bt)=>{Hn(yt,cn=>{const Jt=Ve.fromDom(cn);U0(Jt,bt)})},Nn=(yt,bt,cn,Jt,jn)=>Hn(yt,Qr=>{const Si=V(bt)?s.createElement(bt):bt;return re(cn)&&bo(Si,cn),Jt&&(!V(Jt)&&Jt.nodeType?Si.appendChild(Jt):V(Jt)&&no(Si,Jt)),jn?Si:Qr.appendChild(Si)}),vr=(yt,bt,cn)=>Nn(s.createElement(yt),yt,bt,cn,!0),ln=Nh.decode,_r=Nh.encodeAllRaw,fo=(yt,bt,cn="")=>{let Jt="<"+yt;for(const jn in bt)Is(bt,jn)&&(Jt+=" "+jn+'="'+_r(bt[jn])+'"');return ts(cn)&&Vn(de.getVoidElements(),yt)?Jt+" />":Jt+">"+cn+"</"+yt+">"},Jo=yt=>{const bt=s.createElement("div"),cn=s.createDocumentFragment();cn.appendChild(bt),yt&&(bt.innerHTML=yt);let Jt;for(;Jt=bt.firstChild;)cn.appendChild(Jt);return cn.removeChild(bt),cn},Zo=(yt,bt)=>Hn(yt,cn=>{const Jt=Ve.fromDom(cn);return bt&&Fe(Ya(Jt),jn=>{ql(jn)&&jn.dom.length===0?wo(jn):Zs(Jt,jn)}),wo(Jt),Jt.dom}),Ha=yt=>Hn(yt,bt=>{const cn=bt.attributes;for(let Jt=cn.length-1;Jt>=0;Jt--)bt.removeAttributeNode(cn.item(Jt))}),Cd=yt=>fe.parse(yt),dc=(yt,bt)=>fe.serialize(yt,bt),_l=yt=>{if(_f!==Vo.DOM&&s===document){if(b[yt])return;b[yt]=!0}let bt=s.getElementById("mceDefaultStyles");if(!bt){bt=s.createElement("style"),bt.id="mceDefaultStyles",bt.type="text/css";const cn=s.head;cn.firstChild?cn.insertBefore(bt,cn.firstChild):cn.appendChild(bt)}bt.styleSheet?bt.styleSheet.cssText+=yt:bt.appendChild(s.createTextNode(yt))},Ru=yt=>{yt||(yt=""),Fe(yt.split(","),bt=>{M[bt]=!0,X.load(bt).catch(be)})},Ar=(yt,bt,cn)=>{Hn(yt,Jt=>{if(Rn(Jt)){const jn=Ve.fromDom(Jt),Qr=bt.split(" ");Fe(Qr,Si=>{re(cn)?(cn?$p:Lp)(jn,Si):Fb(jn,Si)})}})},_o=(yt,bt)=>{Ar(yt,bt,!0)},Qo=(yt,bt)=>{Ar(yt,bt,!1)},wi=(yt,bt)=>{const cn=Re(yt),Jt=bt.split(" ");return re(cn)&&Wt(Jt,jn=>N0(cn,jn))},gi=yt=>{Hn(yt,bt=>ZM(Ve.fromDom(bt),"display"))},Ul=yt=>{Hn(yt,bt=>aw(Ve.fromDom(bt),"display","none"))},wd=yt=>{const bt=Re(yt);return re(bt)&&mi(bg(bt,"display"),"none")},kp=yt=>(yt||"mce_")+I++,TM=yt=>{const bt=Re(yt);return re(bt)?Rn(bt.dom)?bt.dom.outerHTML:ti(bt):""},kC=(yt,bt)=>{Hn(yt,cn=>{Rn(cn)&&(cn.outerHTML=bt)})},AM=(yt,bt)=>{const cn=Me(bt);return Hn(yt,Jt=>{const jn=cn==null?void 0:cn.parentNode,Qr=cn==null?void 0:cn.nextSibling;return jn&&(Qr?jn.insertBefore(Jt,Qr):jn.appendChild(Jt)),Jt})},Cb=(yt,bt,cn)=>Hn(bt,Jt=>{var jn;const Qr=Z(bt)?yt.cloneNode(!0):yt;return cn&&zg(sl(Jt.childNodes),Si=>{Qr.appendChild(Si)}),(jn=Jt.parentNode)===null||jn===void 0||jn.replaceChild(Qr,Jt),Jt}),MM=(yt,bt)=>{if(yt.nodeName!==bt.toUpperCase()){const cn=vr(bt);return zg(nt(yt),Jt=>{tt(cn,Jt.nodeName,qe(yt,Jt.nodeName))}),Cb(cn,yt,!0),cn}else return yt},wb=(yt,bt)=>{let cn=yt;for(;cn;){let Jt=bt;for(;Jt&&cn!==Jt;)Jt=Jt.parentNode;if(cn===Jt)break;cn=cn.parentNode}return!cn&&yt.ownerDocument?yt.ownerDocument.documentElement:cn},ig=yt=>{if(Rn(yt)){const bt=yt.nodeName.toLowerCase()==="a"&&!qe(yt,"href")&&qe(yt,"id");if(qe(yt,"name")||qe(yt,"data-mce-bookmark")||bt)return!0}return!1},Ed=(yt,bt,cn)=>{let Jt=0;if(ig(yt))return!1;const jn=yt.firstChild;if(jn){const Qr=new ri(jn,yt),Si=de?de.getWhitespaceElements():{},Hl=bt||(de?de.getNonEmptyElements():null);let fs=jn;do{if(Rn(fs)){const w0=fs.getAttribute("data-mce-bogus");if(w0){fs=Qr.next(w0==="all");continue}const Iu=fs.nodeName.toLowerCase();if(Hl&&Hl[Iu]){if(Iu==="br"){Jt++,fs=Qr.next();continue}return!1}if(ig(fs))return!1}if(Bd(fs)||Zt(fs)&&!bc(fs.data)&&(!(cn!=null&&cn.includeZwsp)||!Lf(fs.data))||Zt(fs)&&fs.parentNode&&Si[fs.parentNode.nodeName]&&bc(fs.data))return!1;fs=Qr.next()}while(fs)}return Jt<=1},bh=()=>s.createRange(),Eb=(yt,bt,cn)=>{let Jt=bh(),jn,Qr;if(yt&&bt&&yt.parentNode&&bt.parentNode){const Si=yt.parentNode;return Jt.setStart(Si,Hf(yt)),Jt.setEnd(bt.parentNode,Hf(bt)),jn=Jt.extractContents(),Jt=bh(),Jt.setStart(bt.parentNode,Hf(bt)+1),Jt.setEnd(Si,Hf(yt)+1),Qr=Jt.extractContents(),Si.insertBefore(Ud(_f,jn,de),yt),cn?Si.insertBefore(cn,yt):Si.insertBefore(bt,yt),Si.insertBefore(Ud(_f,Qr,de),yt),Zo(yt),cn||bt}else return},x0=(yt,bt,cn,Jt)=>{if(Z(yt)){let jn=yt.length;const Qr=[];for(;jn--;)Qr[jn]=x0(yt[jn],bt,cn,Jt);return Qr}else return f.collect&&(yt===s||yt===C)&&ae.push([yt,bt,cn,Jt]),ve.bind(yt,bt,cn,Jt||_f)},DC=(yt,bt,cn)=>{if(Z(yt)){let Jt=yt.length;const jn=[];for(;Jt--;)jn[Jt]=DC(yt[Jt],bt,cn);return jn}else{if(ae.length>0&&(yt===s||yt===C)){let Jt=ae.length;for(;Jt--;){const[jn,Qr,Si]=ae[Jt];yt===jn&&(!bt||bt===Qr)&&(!cn||cn===Si)&&ve.unbind(jn,Qr,Si)}}return ve.unbind(yt,bt,cn)}},_h=(yt,bt,cn)=>ve.dispatch(yt,bt,cn),kM=(yt,bt,cn)=>ve.dispatch(yt,bt,cn),PC=yt=>{if(yt&&ou(yt)){const bt=yt.getAttribute("data-mce-contenteditable");return bt&&bt!=="inherit"?bt:yt.contentEditable!=="inherit"?yt.contentEditable:null}else return null},_f={doc:s,settings:f,win:C,files:M,stdMode:F,boxModel:Y,styleSheetLoader:X,boundEvents:ae,styles:fe,schema:de,events:ve,isBlock:Ie,root:null,clone:gt,getRoot:Ht,getViewPort:an,getRect:Qn,getSize:$n,getParent:Uo,getParents:Jr,get:Me,getNext:ki,getPrev:hs,select:dn,is:zr,add:Nn,create:vr,createHTML:fo,createFragment:Jo,remove:Zo,setStyle:At,getStyle:Ut,setStyles:St,removeAllAttribs:Ha,setAttrib:tt,setAttribs:bo,getAttrib:qe,getPos:_n,parseStyle:Cd,serializeStyle:dc,addStyle:_l,loadCSS:Ru,addClass:_o,removeClass:Qo,hasClass:wi,toggleClass:Ar,show:gi,hide:Ul,isHidden:wd,uniqueId:kp,setHTML:no,getOuterHTML:TM,setOuterHTML:kC,decode:ln,encode:_r,insertAfter:AM,replace:Cb,rename:MM,findCommonAncestor:wb,run:Hn,getAttribs:nt,isEmpty:Ed,createRng:bh,nodeIndex:Hf,split:Eb,bind:x0,unbind:DC,fire:kM,dispatch:_h,getContentEditable:PC,getContentEditableParent:yt=>{const bt=Ht();let cn=null;for(let Jt=yt;Jt&&Jt!==bt&&(cn=PC(Jt),cn===null);Jt=Jt.parentNode);return cn},isEditable:yt=>{if(re(yt)){const bt=Rn(yt)?yt:yt.parentElement;return re(bt)&&ou(bt)&&kr(Ve.fromDom(bt))}else return!1},destroy:()=>{if(ae.length>0){let yt=ae.length;for(;yt--;){const[bt,cn,Jt]=ae[yt];ve.unbind(bt,cn,Jt)}}Ue(M,(yt,bt)=>{X.unload(bt),delete M[bt]})},isChildOf:(yt,bt)=>yt===bt||bt.contains(yt),dumpRng:yt=>"startContainer: "+yt.startContainer.nodeName+", startOffset: "+yt.startOffset+", endContainer: "+yt.endContainer.nodeName+", endOffset: "+yt.endOffset},Tb=Qp(fe,f,Ee(_f));return _f};Vo.DOM=Vo(document),Vo.nodeIndex=Hf;const y_=Vo.DOM,Di=0,Gf=1,hi=2,Mw=3;class ra{constructor(f={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=f}_setReferrerPolicy(f){this.settings.referrerPolicy=f}loadScript(f){return new Promise((b,C)=>{const M=y_;let I;const F=()=>{M.remove(ae),I&&(I.onerror=I.onload=I=null)},Y=()=>{F(),b()},X=()=>{F(),C("Failed to load script: "+f)},ae=M.uniqueId();I=document.createElement("script"),I.id=ae,I.type="text/javascript",I.src=on._addCacheSuffix(f),this.settings.referrerPolicy&&M.setAttrib(I,"referrerpolicy",this.settings.referrerPolicy),I.onload=Y,I.onerror=X,(document.getElementsByTagName("head")[0]||document.body).appendChild(I)})}isDone(f){return this.states[f]===hi}markDone(f){this.states[f]=hi}add(f){const b=this;return b.queue.push(f),b.states[f]===void 0&&(b.states[f]=Di),new Promise((M,I)=>{b.scriptLoadedCallbacks[f]||(b.scriptLoadedCallbacks[f]=[]),b.scriptLoadedCallbacks[f].push({resolve:M,reject:I})})}load(f){return this.add(f)}remove(f){delete this.states[f],delete this.scriptLoadedCallbacks[f]}loadQueue(){const f=this.queue;return this.queue=[],this.loadScripts(f)}loadScripts(f){const b=this,C=(X,ae)=>{Nr(b.scriptLoadedCallbacks,ae).each(de=>{Fe(de,fe=>fe[X](ae))}),delete b.scriptLoadedCallbacks[ae]},M=X=>{const ae=mt(X,de=>de.status==="rejected");return ae.length>0?Promise.reject(Kt(ae,({reason:de})=>Z(de)?de:[de])):Promise.resolve()},I=X=>Promise.allSettled(et(X,ae=>b.states[ae]===hi?(C("resolve",ae),Promise.resolve()):b.states[ae]===Mw?(C("reject",ae),Promise.reject(ae)):(b.states[ae]=Gf,b.loadScript(ae).then(()=>{b.states[ae]=hi,C("resolve",ae);const de=b.queue;return de.length>0?(b.queue=[],I(de).then(M)):Promise.resolve()},()=>(b.states[ae]=Mw,C("reject",ae),Promise.reject(ae)))))),F=X=>(b.loading=!0,I(X).then(ae=>{b.loading=!1;const de=b.queueLoadedCallbacks.shift();return ue.from(de).each(Qt),M(ae)})),Y=sg(f);return b.loading?new Promise((X,ae)=>{b.queueLoadedCallbacks.push(()=>{F(Y).then(X,ae)})}):F(Y)}}ra.ScriptLoader=new ra;const Vi=s=>{let f=s;return{get:()=>f,set:M=>{f=M}}},Vs=(s,f)=>{const b=s.indexOf(f);return b!==-1&&s.indexOf(f,b+1)>b},bk=s=>j(s)&&Vn(s,"raw"),b_=s=>Z(s)&&s.length>1,Wg={},uy=Vi("en"),hu=()=>Nr(Wg,uy.get()),Oa={getData:()=>yn(Wg,s=>({...s})),setCode:s=>{s&&uy.set(s)},getCode:()=>uy.get(),add:(s,f)=>{let b=Wg[s];b||(Wg[s]=b={});const C=et(qn(f),M=>M.toLowerCase());Ue(f,(M,I)=>{const F=I.toLowerCase();F!==I&&Vs(C,F)?(Vn(f,F)||(b[F]=M),b[I]=M):b[F]=M})},translate:s=>{const f=hu().getOr({}),b=F=>he(F)?Object.prototype.toString.call(F):C(F)?"":""+F,C=F=>F===""||F===null||F===void 0,M=F=>{const Y=b(F);return Vn(f,Y)?b(f[Y]):Nr(f,Y.toLowerCase()).map(b).getOr(Y)},I=F=>F.replace(/{context:\w+}$/,"");if(C(s))return"";if(bk(s))return b(s.raw);if(b_(s)){const F=s.slice(1),Y=M(s[0]).replace(/\{([0-9]+)\}/g,(X,ae)=>Vn(F,ae)?b(F[ae]):X);return I(Y)}return I(M(s))},isRtl:()=>hu().bind(s=>Nr(s,"_dir")).exists(s=>s==="rtl"),hasCode:s=>Vn(Wg,s)},zs=()=>{const s=[],f={},b={},C=[],M=(Me,Re)=>{const qe=mt(C,nt=>nt.name===Me&&nt.state===Re);Fe(qe,nt=>nt.resolve())},I=Me=>Vn(f,Me),F=Me=>Vn(b,Me),Y=Me=>{if(b[Me])return b[Me].instance},X=(Me,Re)=>{const qe=Oa.getCode(),nt=","+(Re||"")+",";!qe||Re&&nt.indexOf(","+qe+",")===-1||ra.ScriptLoader.add(f[Me]+"/langs/"+qe+".js")},ae=(Me,Re)=>{zs.languageLoad!==!1&&(I(Me)?X(Me,Re):Ie(Me,"loaded").then(()=>X(Me,Re)))},de=(Me,Re)=>(s.push(Re),b[Me]={instance:Re},M(Me,"added"),Re),fe=Me=>{delete f[Me],delete b[Me]},ve=(Me,Re)=>V(Re)?V(Me)?{prefix:"",resource:Re,suffix:""}:{prefix:Me.prefix,resource:Re,suffix:Me.suffix}:Re,De=(Me,Re)=>{if(f[Me])return Promise.resolve();let qe=V(Re)?Re:Re.prefix+Re.resource+Re.suffix;qe.indexOf("/")!==0&&qe.indexOf("://")===-1&&(qe=zs.baseURL+"/"+qe),f[Me]=qe.substring(0,qe.lastIndexOf("/"));const nt=()=>(M(Me,"loaded"),Promise.resolve());return b[Me]?nt():ra.ScriptLoader.add(qe).then(nt)},Ie=(Me,Re="added")=>Re==="added"&&F(Me)||Re==="loaded"&&I(Me)?Promise.resolve():new Promise(qe=>{C.push({name:Me,state:Re,resolve:qe})});return{items:s,urls:f,lookup:b,get:Y,requireLangPack:ae,add:de,remove:fe,createUrl:ve,load:De,waitFor:Ie}};zs.languageLoad=!0,zs.baseURL="",zs.PluginManager=zs(),zs.ThemeManager=zs(),zs.ModelManager=zs();const Pw=s=>{const f=Vi(ue.none()),b=()=>f.get().each(s);return{clear:()=>{b(),f.set(ue.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:Y=>{b(),f.set(ue.some(Y))}}},Rw=s=>{const f=Vi(ue.none()),b=()=>f.get().each(Y=>clearInterval(Y));return{clear:()=>{b(),f.set(ue.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:Y=>{b(),f.set(ue.some(setInterval(Y,s)))}}},zh=()=>{const s=Pw(be);return{...s,on:b=>s.get().each(b)}},dy=(s,f)=>{let b=null;return{cancel:()=>{q(b)||(clearTimeout(b),b=null)},throttle:(...I)=>{q(b)&&(b=setTimeout(()=>{b=null,s.apply(null,I)},f))}}},Yg=(s,f)=>{let b=null;const C=()=>{q(b)||(clearTimeout(b),b=null)};return{cancel:C,throttle:(...I)=>{C(),b=setTimeout(()=>{b=null,s.apply(null,I)},f)}}},Mi=Ee("mce-annotation"),Yf=Ee("data-mce-annotation"),em=Ee("data-mce-annotation-uid"),jg=Ee("data-mce-annotation-active"),Zg=Ee("data-mce-annotation-classes"),tm=Ee("data-mce-annotation-attrs"),Iw=s=>f=>Bo(f,s),Pi=(s,f)=>{const b=s.selection.getRng(),C=Ve.fromDom(b.startContainer),M=Ve.fromDom(s.getBody()),I=f.fold(()=>"."+Mi(),X=>`[${Yf()}="${X}"]`),F=Mf(C,b.startOffset).getOr(C);return Th(F,I,Iw(M)).bind(X=>Fu(X,`${em()}`).bind(ae=>Fu(X,`${Yf()}`).map(de=>{const fe=Lw(s,ae);return{uid:ae,name:de,elements:fe}})))},$w=s=>Cl(s)&&N0(s,Mi()),__=(s,f)=>Os(s,"data-mce-bogus")||Qb(s,'[data-mce-bogus="all"]',Iw(f)),Lw=(s,f)=>{const b=Ve.fromDom(s.getBody()),C=fa(b,`[${em()}="${f}"]`);return mt(C,M=>!__(M,b))},hy=(s,f)=>{const b=Ve.fromDom(s.getBody()),C=fa(b,`[${Yf()}="${f}"]`),M={};return Fe(C,I=>{if(!__(I,b)){const F=ms(I,em()),Y=Nr(M,F).getOr([]);M[F]=Y.concat([I])}}),M},as=(s,f)=>{const b=Vi({}),C=()=>({listeners:[],previous:zh()}),M=(fe,ve)=>{I(fe,De=>(ve(De),De))},I=(fe,ve)=>{const De=b.get(),Ie=Nr(De,fe).getOrThunk(C),Me=ve(Ie);De[fe]=Me,b.set(De)},F=(fe,ve,De)=>{M(fe,Ie=>{Fe(Ie.listeners,Me=>Me(!0,fe,{uid:ve,nodes:et(De,Re=>Re.dom)}))})},Y=fe=>{M(fe,ve=>{Fe(ve.listeners,De=>De(!1,fe))})},X=(fe,ve)=>{Fe(Lw(s,fe),De=>{ve?na(De,jg(),"true"):da(De,jg())})},ae=Yg(()=>{const fe=Zn(f.getNames());Fe(fe,ve=>{I(ve,De=>{const Ie=De.previous.get();return Pi(s,ue.some(ve)).fold(()=>{Ie.each(Me=>{Y(ve),De.previous.clear(),X(Me,!1)})},({uid:Me,name:Re,elements:qe})=>{mi(Ie,Me)||(Ie.each(nt=>X(nt,!1)),F(Re,Me,qe),De.previous.set(Me),X(Me,!0))}),{previous:De.previous,listeners:De.listeners}})})},30);return s.on("remove",()=>{ae.cancel()}),s.on("NodeChange",()=>{ae.throttle()}),{addListener:(fe,ve)=>{I(fe,De=>({previous:De.previous,listeners:De.listeners.concat([ve])}))}}},Pl=(s,f)=>{const b=Yf(),C=I=>ue.from(I.attr(b)).bind(f.lookup),M=I=>{var F,Y;I.attr(em(),null),I.attr(Yf(),null),I.attr(jg(),null);const X=ue.from(I.attr(tm())).map(ve=>ve.split(",")).getOr([]),ae=ue.from(I.attr(Zg())).map(ve=>ve.split(",")).getOr([]);Fe(X,ve=>I.attr(ve,null));const de=(Y=(F=I.attr("class"))===null||F===void 0?void 0:F.split(" "))!==null&&Y!==void 0?Y:[],fe=Mn(de,[Mi()].concat(ae));I.attr("class",fe.length>0?fe.join(" "):null),I.attr(Zg(),null),I.attr(tm(),null)};s.serializer.addTempAttr(jg()),s.serializer.addAttributeFilter(b,I=>{for(const F of I)C(F).each(Y=>{Y.persistent===!1&&(F.name==="span"?F.unwrap():M(F))})})},qg=()=>{const s={};return{register:(M,I)=>{s[M]={name:M,settings:I}},lookup:M=>Nr(s,M).map(I=>I.settings),getNames:()=>qn(s)}};let Gd=0;const Uh=s=>{const b=new Date().getTime(),C=Math.floor(Math.random()*1e9);return Gd++,s+"_"+C+Gd+String(b)},xk=(s,f)=>{Fe(f,b=>{$p(s,b)})},Ck=(s,f)=>{Fe(f,b=>{Lp(s,b)})},S_=(s,f)=>Ve.fromDom(s.dom.cloneNode(f)),Rl=s=>S_(s,!1),fy=s=>S_(s,!0),Ri=(s,f)=>{const b=Ve.fromTag(f),C=jC(s);return Dd(b,C),b},Ec=(s,f)=>{const b=Ri(s,f);Hu(s,b);const C=Ya(s);return ci(b,C),wo(s),b},nm=(s,f,b=Xe)=>{const C=new ri(s,f),M=I=>{let F;do F=C[I]();while(F&&!Zt(F)&&!b(F));return ue.from(F).filter(Zt)};return{current:()=>ue.from(C.current()).filter(Zt),next:()=>M("next"),prev:()=>M("prev"),prev2:()=>M("prev2")}},jf=(s,f)=>{const b=f||(F=>s.isBlock(F)||Ko(F)||Eo(F)),C=(F,Y,X,ae)=>{if(Zt(F)){const de=ae(F,Y,F.data);if(de!==-1)return ue.some({container:F,offset:de})}return X().bind(de=>C(de.container,de.offset,X,ae))};return{backwards:(F,Y,X,ae)=>{const de=nm(F,ae??s.getRoot(),b);return C(F,Y,()=>de.prev().map(fe=>({container:fe,offset:fe.length})),X).getOrNull()},forwards:(F,Y,X,ae)=>{const de=nm(F,ae??s.getRoot(),b);return C(F,Y,()=>de.next().map(fe=>({container:fe,offset:0})),X).getOrNull()}}},ed=Math.round,Zf=s=>s?{left:ed(s.left),top:ed(s.top),bottom:ed(s.bottom),right:ed(s.right),width:ed(s.width),height:ed(s.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Wd=(s,f)=>(s=Zf(s),f||(s.left=s.left+s.width),s.right=s.left,s.width=0,s),Kg=(s,f)=>s.left===f.left&&s.top===f.top&&s.bottom===f.bottom&&s.right===f.right,qf=(s,f,b)=>s>=0&&s<=Math.min(f.height,b.height)/2,Kf=(s,f)=>{const b=Math.min(f.height/2,s.height/2);return s.bottom-b<f.top?!0:s.top>f.bottom?!1:qf(f.top-s.bottom,s,f)},Xg=(s,f)=>s.top>f.bottom?!0:s.bottom<f.top?!1:qf(f.bottom-s.top,s,f),wk=(s,f,b)=>f>=s.left&&f<=s.right&&b>=s.top&&b<=s.bottom,Ek=s=>Bn(s,(f,b)=>f.fold(()=>ue.some(b),C=>{const M=Math.min(b.left,C.left),I=Math.min(b.top,C.top),F=Math.max(b.right,C.right),Y=Math.max(b.bottom,C.bottom);return ue.some({top:I,right:F,bottom:Y,left:M,width:F-M,height:Y-I})}),ue.none()),x_=(s,f,b)=>{const C=Math.max(Math.min(f,s.left+s.width),s.left),M=Math.max(Math.min(b,s.top+s.height),s.top);return Math.sqrt((f-C)*(f-C)+(b-M)*(b-M))},Tk=(s,f)=>Math.max(0,Math.min(s.bottom,f.bottom)-Math.max(s.top,f.top)),C_=(s,f,b)=>Math.min(Math.max(s,f),b),Jg=s=>{const f=s.startContainer,b=s.startOffset;return f===s.endContainer&&f.hasChildNodes()&&s.endOffset===b+1?f.childNodes[b]:null},Yd=(s,f)=>{if(Rn(s)&&s.hasChildNodes()){const b=s.childNodes,C=C_(f,0,b.length-1);return b[C]}else return s},w_=(s,f)=>{if(!(f<0&&Rn(s)&&s.hasChildNodes()))return Yd(s,f)},Nw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),E_=s=>V(s)&&s.charCodeAt(0)>=768&&Nw.test(s),T_=(...s)=>f=>{for(let b=0;b<s.length;b++)if(s[b](f))return!0;return!1},py=(...s)=>f=>{for(let b=0;b<s.length;b++)if(!s[b](f))return!1;return!0},Hh=Rn,my=oi,so=kh("display","block table"),ll=kh("float","left right"),Tc=py(Hh,my,Ke(ll)),Qg=Ke(kh("white-space","pre pre-line pre-wrap")),Go=Zt,gy=Ko,A_=Vo.nodeIndex,oa=w_,cl=s=>s?s.createRange():Vo.DOM.createRng(),ev=s=>V(s)&&/[\r\n\t ]/.test(s),M_=s=>!!s.setStart&&!!s.setEnd,k_=s=>{const f=s.startContainer,b=s.startOffset;if(ev(s.toString())&&Qg(f.parentNode)&&Zt(f)){const C=f.data;if(ev(C[b-1])||ev(C[b+1]))return!0}return!1},vy=s=>{const f=s.ownerDocument,b=cl(f),C=f.createTextNode(ko),M=s.parentNode;M.insertBefore(C,s),b.setStart(C,0),b.setEnd(C,1);const I=Zf(b.getBoundingClientRect());return M.removeChild(C),I},D_=s=>{const f=s.startContainer,b=s.endContainer,C=s.startOffset,M=s.endOffset;if(f===b&&Zt(b)&&C===0&&M===1){const I=s.cloneRange();return I.setEndAfter(b),fu(I)}else return null},yy=s=>s.left===0&&s.right===0&&s.top===0&&s.bottom===0,fu=s=>{var f;let b;const C=s.getClientRects();return C.length>0?b=Zf(C[0]):b=Zf(s.getBoundingClientRect()),!M_(s)&&gy(s)&&yy(b)?vy(s):yy(b)&&M_(s)&&(f=D_(s))!==null&&f!==void 0?f:b},Gh=(s,f)=>{const b=Wd(s,f);return b.width=1,b.right=b.left+1,b},P_=s=>{const f=[],b=F=>{F.height!==0&&(f.length>0&&Kg(F,f[f.length-1])||f.push(F))},C=(F,Y)=>{const X=cl(F.ownerDocument);if(Y<F.data.length){if(E_(F.data[Y]))return;if(E_(F.data[Y-1])&&(X.setStart(F,Y),X.setEnd(F,Y+1),!k_(X))){b(Gh(fu(X),!1));return}}Y>0&&(X.setStart(F,Y-1),X.setEnd(F,Y),k_(X)||b(Gh(fu(X),!1))),Y<F.data.length&&(X.setStart(F,Y),X.setEnd(F,Y+1),k_(X)||b(Gh(fu(X),!0)))},M=s.container(),I=s.offset();if(Go(M))return C(M,I),f;if(Hh(M))if(s.isAtEnd()){const F=oa(M,I);Go(F)&&C(F,F.data.length),Tc(F)&&!gy(F)&&b(Gh(fu(F),!1))}else{const F=oa(M,I);if(Go(F)&&C(F,0),Tc(F)&&s.isAtEnd())return b(Gh(fu(F),!1)),f;const Y=oa(s.container(),s.offset()-1);Tc(Y)&&!gy(Y)&&(so(Y)||so(F)||!Tc(F))&&b(Gh(fu(Y),!1)),Tc(F)&&b(Gh(fu(F),!0))}return f},kt=(s,f,b)=>{const C=()=>(Go(s),f===0),M=()=>Go(s)?f>=s.data.length:f>=s.childNodes.length,I=()=>{const de=cl(s.ownerDocument);return de.setStart(s,f),de.setEnd(s,f),de},F=()=>(b||(b=P_(kt(s,f))),b),Y=()=>F().length>0,X=de=>de&&s===de.container()&&f===de.offset(),ae=de=>oa(s,de?f-1:f);return{container:Ee(s),offset:Ee(f),toRange:I,getClientRects:F,isVisible:Y,isAtStart:C,isAtEnd:M,isEqual:X,getNode:ae}};kt.fromRangeStart=s=>kt(s.startContainer,s.startOffset),kt.fromRangeEnd=s=>kt(s.endContainer,s.endOffset),kt.after=s=>kt(s.parentNode,A_(s)+1),kt.before=s=>kt(s.parentNode,A_(s)),kt.isAbove=(s,f)=>rs(gn(f.getClientRects()),oo(s.getClientRects()),Kf).getOr(!1),kt.isBelow=(s,f)=>rs(oo(f.getClientRects()),gn(s.getClientRects()),Xg).getOr(!1),kt.isAtStart=s=>s?s.isAtStart():!1,kt.isAtEnd=s=>s?s.isAtEnd():!1,kt.isTextPosition=s=>s?Zt(s.container()):!1,kt.isElementPosition=s=>!kt.isTextPosition(s);const tv=(s,f)=>{Zt(f)&&f.data.length===0&&s.remove(f)},rm=(s,f,b)=>{f.insertNode(b),tv(s,b.previousSibling),tv(s,b.nextSibling)},ul=(s,f,b)=>{const C=ue.from(b.firstChild),M=ue.from(b.lastChild);f.insertNode(b),C.each(I=>tv(s,I.previousSibling)),M.each(I=>tv(s,I.nextSibling))},td=(s,f,b)=>{yi(b)?ul(s,f,b):rm(s,f,b)},xi=Zt,Ow=iu,Ac=Vo.nodeIndex,nv=s=>{const f=s.parentNode;return Ow(f)?nv(f):f},bs=s=>s?Nu(s.childNodes,(f,b)=>(Ow(b)&&b.nodeName!=="BR"?f=f.concat(bs(b)):f.push(b),f),[]):[],Bw=(s,f)=>{let b=s;for(;(b=b.previousSibling)&&xi(b);)f+=b.data.length;return f},by=s=>f=>s===f,R_=s=>{let f,b;f=bs(nv(s)),b=ze(f,by(s),s),f=f.slice(0,b+1);const C=Nu(f,(M,I,F)=>(xi(I)&&xi(f[F-1])&&M++,M),0);return f=Pa(f,Fi([s.nodeName])),b=ze(f,by(s),s),b-C},I_=s=>(xi(s)?"text()":s.nodeName.toLowerCase())+"["+R_(s)+"]",Fw=(s,f,b)=>{const C=[];for(let M=f.parentNode;M&&M!==s&&!(b&&b(M));M=M.parentNode)C.push(M);return C},rv=(s,f)=>{let b=[],C=f.container(),M=f.offset(),I;if(xi(C))I=Bw(C,M);else{const Y=C.childNodes;M>=Y.length?(I="after",M=Y.length-1):I="before",C=Y[M]}b.push(I_(C));let F=Fw(s,C);return F=Pa(F,Ke(iu)),b=b.concat(Lu(F,Y=>I_(Y))),b.reverse().join("/")+","+I},Ka=(s,f,b)=>{let C=bs(s);return C=Pa(C,(M,I)=>!xi(M)||!xi(C[I-1])),C=Pa(C,Fi([f])),C[b]},Xa=(s,f)=>{let b=s,C=0;for(;xi(b);){const M=b.data.length;if(f>=C&&f<=C+M){s=b,f=f-C;break}if(!xi(b.nextSibling)){s=b,f=M;break}C+=M,b=b.nextSibling}return xi(s)&&f>s.data.length&&(f=s.data.length),kt(s,f)},_s=(s,f)=>{if(!f)return null;const b=f.split(","),C=b[0].split("/"),M=b.length>1?b[1]:"before",I=Nu(C,(F,Y)=>{const X=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(Y);return X?(X[1]==="text()"&&(X[1]="#text"),Ka(F,X[1],parseInt(X[2],10))):null},s);if(!I)return null;if(!xi(I)&&I.parentNode){let F;return M==="after"?F=Ac(I)+1:F=Ac(I),kt(I.parentNode,F)}return Xa(I,parseInt(M,10))},ss=Eo,Ss=(s,f,b)=>{let C=s(f.data.slice(0,b)).length;for(let M=f.previousSibling;M&&Zt(M);M=M.previousSibling)C+=s(M.data).length;return C},ma=(s,f,b,C,M)=>{const I=M?C.startContainer:C.endContainer;let F=M?C.startOffset:C.endOffset;const Y=[],X=s.getRoot();if(Zt(I))Y.push(b?Ss(f,I,F):F);else{let ae=0;const de=I.childNodes;F>=de.length&&de.length&&(ae=1,F=Math.max(0,de.length-1)),Y.push(s.nodeIndex(de[F],b)+ae)}for(let ae=I;ae&&ae!==X;ae=ae.parentNode)Y.push(s.nodeIndex(ae,b));return Y},$_=(s,f,b,C)=>{const M=f.dom,I=ma(M,s,b,C,!0),F=f.isForward(),Y=kg(C)?{isFakeCaret:!0}:{};if(f.isCollapsed())return{start:I,forward:F,...Y};{const X=ma(M,s,b,C,!1);return{start:I,end:X,forward:F,...Y}}},ov=(s,f,b)=>{let C=0;return on.each(s.select(f),M=>{if(M.getAttribute("data-mce-bogus")!=="all"){if(M===b)return!1;C++;return}}),C},L_=(s,f)=>{let b=f?s.startContainer:s.endContainer,C=f?s.startOffset:s.endOffset;if(Rn(b)&&b.nodeName==="TR"){const M=b.childNodes;b=M[Math.min(f?C:C-1,M.length-1)],b&&(C=f?0:b.childNodes.length,f?s.setStart(b,C):s.setEnd(b,C))}},N_=s=>(L_(s,!0),L_(s,!1),s),O_=(s,f)=>{if(Rn(s)&&(s=Yd(s,f),ss(s)))return s;if(is(s)){Zt(s)&&Gp(s)&&(s=s.parentNode);let b=s.previousSibling;if(ss(b)||(b=s.nextSibling,ss(b)))return b}},Vw=s=>O_(s.startContainer,s.startOffset)||O_(s.endContainer,s.endOffset),iv=(s,f,b)=>{const C=b.getNode(),M=b.getRng();if(C.nodeName==="IMG"||ss(C)){const F=C.nodeName;return{name:F,index:ov(b.dom,F,C)}}const I=Vw(M);if(I){const F=I.tagName;return{name:F,index:ov(b.dom,F,I)}}return $_(s,b,f,M)},Sy=s=>{const f=s.getRng();return{start:rv(s.dom.getRoot(),kt.fromRangeStart(f)),end:rv(s.dom.getRoot(),kt.fromRangeEnd(f)),forward:s.isForward()}},xy=s=>({rng:s.getRng(),forward:s.isForward()}),Ak=(s,f,b)=>{const C={"data-mce-type":"bookmark",id:f,style:"overflow:hidden;line-height:0px"};return b?s.create("span",C,"&#xFEFF;"):s.create("span",C)},zw=(s,f)=>{const b=s.dom;let C=s.getRng();const M=b.uniqueId(),I=s.isCollapsed(),F=s.getNode(),Y=F.nodeName,X=s.isForward();if(Y==="IMG")return{name:Y,index:ov(b,Y,F)};const ae=N_(C.cloneRange());if(!I){ae.collapse(!1);const fe=Ak(b,M+"_end",f);td(b,ae,fe)}C=N_(C),C.collapse(!0);const de=Ak(b,M+"_start",f);return td(b,C,de),s.moveToBookmark({id:M,keep:!0,forward:X}),{id:M,forward:X}},Mk=(s,f,b=!1)=>f===2?iv(Al,b,s):f===3?Sy(s):f?xy(s):zw(s,!1),B_=Te(iv,Ge,!0),Cy=s=>{const f=I=>I(s),b=Ee(s),C=()=>M,M={tag:!0,inner:s,fold:(I,F)=>F(s),isValue:Be,isError:Xe,map:I=>Us.value(I(s)),mapError:C,bind:f,exists:f,forall:f,getOr:b,or:C,getOrThunk:b,orThunk:C,getOrDie:b,each:I=>{I(s)},toOptional:()=>ue.some(s)};return M},Uw=s=>{const f=()=>b,b={tag:!1,inner:s,fold:(C,M)=>C(s),isValue:Xe,isError:Be,map:f,mapError:C=>Us.error(C(s)),bind:f,exists:Xe,forall:Be,getOr:Ge,or:Ge,getOrThunk:Lt,orThunk:Lt,getOrDie:Tt(String(s)),each:be,toOptional:ue.none};return b},Us={value:Cy,error:Uw,fromOption:(s,f)=>s.fold(()=>Uw(f),Cy)},pu={generate:s=>{if(!Z(s))throw new Error("cases must be an array");if(s.length===0)throw new Error("there must be at least one case");const f=[],b={};return Fe(s,(C,M)=>{const I=qn(C);if(I.length!==1)throw new Error("one and only one name per case");const F=I[0],Y=C[F];if(b[F]!==void 0)throw new Error("duplicate key detected:"+F);if(F==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Z(Y))throw new Error("case arguments must be an array");f.push(F),b[F]=(...X)=>{const ae=X.length;if(ae!==Y.length)throw new Error("Wrong number of arguments to case "+F+". Expected "+Y.length+" ("+Y+"), got "+ae);return{fold:(...fe)=>{if(fe.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+fe.length);return fe[M].apply(null,X)},match:fe=>{const ve=qn(fe);if(f.length!==ve.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+ve.join(","));if(!Wt(f,Ie=>$e(ve,Ie)))throw new Error("Not all branches were specified when using match. Specified: "+ve.join(", ")+`
Required: `+f.join(", "));return fe[F].apply(null,X)},log:fe=>{console.log(fe,{constructors:f,constructor:F,params:X})}}}}),b}};pu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sn=s=>{const f=[],b=[];return Fe(s,C=>{C.fold(M=>{f.push(M)},M=>{b.push(M)})}),{errors:f,values:b}},F_=s=>s.type==="inline-command"||s.type==="inline-format",Ba=s=>s.type==="block-command"||s.type==="block-format",kk=s=>{const f=C=>Us.error({message:C,pattern:s}),b=(C,M,I)=>{if(s.format!==void 0){let F;if(Z(s.format)){if(!Wt(s.format,V))return f(C+" pattern has non-string items in the `format` array");F=s.format}else if(V(s.format))F=[s.format];else return f(C+" pattern has non-string `format` parameter");return Us.value(M(F))}else return s.cmd!==void 0?V(s.cmd)?Us.value(I(s.cmd,s.value)):f(C+" pattern has non-string `cmd` parameter"):f(C+" pattern is missing both `format` and `cmd` parameters")};if(!j(s))return f("Raw pattern is not an object");if(!V(s.start))return f("Raw pattern is missing `start` parameter");if(s.end!==void 0){if(!V(s.end))return f("Inline pattern has non-string `end` parameter");if(s.start.length===0&&s.end.length===0)return f("Inline pattern has empty `start` and `end` parameters");let C=s.start,M=s.end;return M.length===0&&(M=C,C=""),b("Inline",I=>({type:"inline-format",start:C,end:M,format:I}),(I,F)=>({type:"inline-command",start:C,end:M,cmd:I,value:F}))}else return s.replacement!==void 0?V(s.replacement)?s.start.length===0?f("Replacement pattern has empty `start` parameter"):Us.value({type:"inline-command",start:"",end:s.start,cmd:"mceInsertContent",value:s.replacement}):f("Replacement pattern has non-string `replacement` parameter"):s.start.length===0?f("Block pattern has empty `start` parameter"):b("Block",C=>({type:"block-format",start:s.start,format:C[0]}),(C,M)=>({type:"block-command",start:s.start,cmd:C,value:M}))},V_=s=>mt(s,Ba),Hw=s=>mt(s,F_),dl=(s,f)=>({inlinePatterns:Hw(s),blockPatterns:V_(s),dynamicPatternsLookup:f}),Gw=s=>{const f=sn(et(s,kk));return Fe(f.errors,b=>console.error(b.message,b.pattern)),f.values},wy=s=>f=>{const b=s(f);return Gw(b)},Il=Qc().deviceType,z_=Il.isTouch(),av=Vo.DOM,ec=s=>{const f=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Bn(f,(b,C)=>{const M=C.split("="),I=M[0],F=M.length>1?M[1]:I;return b[kd(I)]=kd(F),b},{})},Mc=s=>z(s,RegExp),wn=s=>f=>f.options.get(s),$l=s=>V(s)||j(s),Ww=(s,f="")=>b=>{const C=V(b);if(C)if(b.indexOf("=")!==-1){const M=ec(b);return{value:Nr(M,s.id).getOr(f),valid:C}}else return{value:b,valid:C};else return{valid:!1,message:"Must be a string."}},Yw=s=>{const f=s.options.register;f("id",{processor:"string",default:s.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:s.documentBaseUrl}),f("body_id",{processor:Ww(s,"tinymce"),default:"tinymce"}),f("body_class",{processor:Ww(s),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:b=>{const C=V(b)&&Fo(b);return C?{value:b,valid:C}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:b=>{const C=$e(["block","linebreak","invert","default"],b);return C?{value:b,valid:C}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:b=>ie(b)?{valid:!0,value:b}:V(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:b=>{const C=b===!1||V(b)||me(b,V);return C?V(b)?{value:et(b.split(","),kd),valid:C}:Z(b)?{value:b,valid:C}:b===!1?{value:[],valid:C}:{value:b,valid:C}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:X_(s)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:b=>{const C=V(b)||me(b,V);return C?{value:Z(b)?b:et(b.split(","),kd),valid:C}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:b=>{const C=ie(b)||V(b);return C?b===!1||Il.isiPhone()||Il.isiPad()?{value:"",valid:C}:{value:b===!0?"table,img,figure.image,div,video,iframe":b,valid:C}:{valid:!1,message:"Must be boolean or a string"}},default:!z_}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:b=>b===!1||V(b)||he(b),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:b=>{const C=b===!1||V(b);return C?{value:b===!1?"":b,valid:C}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:s.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:s.convertURL}),f("url_converter_scope",{processor:"object",default:s}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:$l}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:$l}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:$l}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:b=>V(b)||b===!0}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:b=>me(b,j)||b===!1?{value:Gw(b===!1?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:b=>he(b)?{value:wy(b),valid:!0}:{valid:!1,message:"Must be a single function"},default:b=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:b=>me(b,Mc)?{value:b,valid:!0}:Mc(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:b=>{const C=$e(["inherited","collapsed","expanded"],b);return C?{value:b,valid:C}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:b=>{const C=$e(["inherited","collapsed","expanded"],b);return C?{value:b,valid:C}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),f("force_hex_color",{processor:b=>{const C=["always","rgb_only","off"],M=$e(C,b);return M?{value:b,valid:M}:{valid:!1,message:`Must be one of: ${C.join(", ")}.`}},default:"off"}),f("sandbox_iframes",{processor:"boolean",default:!1}),f("convert_unsafe_embeds",{processor:"boolean",default:!1}),s.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:Oa.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:av.getAttrib(s.getElement(),"placeholder")})})},U_=wn("iframe_attrs"),H_=wn("doctype"),sv=wn("document_base_url"),G_=wn("body_id"),Dk=wn("body_class"),W_=wn("content_security_policy"),Pk=wn("br_in_pre"),xs=wn("forced_root_block"),lv=wn("forced_root_block_attrs"),Y_=wn("newline_behavior"),jw=wn("br_newline_selector"),Ey=wn("no_newline_selector"),Rk=wn("keep_styles"),Zw=wn("end_container_on_empty_block"),j_=wn("automatic_uploads"),cv=wn("images_reuse_filename"),qw=wn("images_replace_blob_uris"),Ty=wn("icons"),Ik=wn("icons_url"),Kw=wn("images_upload_url"),$k=wn("images_upload_base_path"),Z_=wn("images_upload_credentials"),uv=wn("images_upload_handler"),om=wn("content_css_cors"),ai=wn("referrer_policy"),q_=wn("language"),Fa=wn("language_url"),Ay=wn("indent_use_margin"),Xw=wn("indentation"),Jw=wn("content_css"),My=wn("content_style"),Qw=wn("font_css"),eE=wn("directionality"),Lk=wn("inline_boundaries_selector"),jd=wn("object_resizing"),Nk=wn("resize_img_proportional"),Ok=wn("placeholder"),K_=wn("event_root"),tE=wn("service_message"),Xf=wn("theme"),im=wn("theme_url"),nd=wn("model"),nE=wn("model_url"),am=wn("inline_boundaries"),Bk=wn("formats"),rE=wn("preview_styles"),oE=wn("format_empty_lines"),sm=wn("format_noneditable_selector"),iE=wn("custom_ui_selector"),X_=wn("inline"),Fk=wn("hidden_input"),Vk=wn("submit_patch"),Zd=wn("add_form_submit_trigger"),ky=wn("add_unload_trigger"),Dy=wn("custom_undo_redo_levels"),J_=wn("disable_nodechange"),aE=wn("readonly"),mu=wn("editable_root"),Py=wn("content_css_cors"),Ry=wn("plugins"),gu=wn("external_plugins"),Iy=wn("block_unsupported_drop"),zk=wn("visual"),sE=wn("visual_table_class"),dv=wn("visual_anchor_class"),Uk=wn("iframe_aria_text"),lE=wn("setup"),cE=wn("init_instance_callback"),Hk=wn("urlconverter_callback"),uE=wn("auto_focus"),dE=wn("browser_spellcheck"),hE=wn("protect"),Gk=wn("paste_block_drop"),$y=wn("paste_data_images"),Q_=wn("paste_preprocess"),Fr=wn("paste_postprocess"),rd=wn("newdocument_content"),fE=wn("paste_webkit_styles"),Wk=wn("paste_remove_styles_if_webkit"),tc=wn("paste_merge_formats"),Yk=wn("smart_paste"),jk=wn("paste_as_text"),uN=wn("paste_tab_spaces"),eS=wn("allow_html_data_urls"),tS=wn("text_patterns"),Zk=wn("text_patterns_lookup"),pE=wn("noneditable_class"),qk=wn("editable_class"),Kk=wn("noneditable_regexp"),Xk=wn("preserve_cdata"),Jk=wn("highlight_on_focus"),lm=wn("xss_sanitization"),Qk=wn("init_content_sync"),Wh=s=>s.options.isSet("text_patterns_lookup"),eD=s=>on.explode(s.options.get("font_size_style_values")),tD=s=>on.explode(s.options.get("font_size_classes")),nD=s=>s.options.get("encoding")==="xml",mE=s=>on.explode(s.options.get("images_file_types")),rD=wn("table_tab_navigation"),hv=wn("details_initial_state"),oD=wn("details_serialized_state"),gE=wn("force_hex_color"),Jf=wn("sandbox_iframes"),vE=Rn,Cs=Zt,fv=s=>{const f=s.parentNode;f&&f.removeChild(s)},pv=s=>{const f=Al(s);return{count:s.length-f.length,text:f}},cm=s=>{let f;for(;(f=s.data.lastIndexOf(Na))!==-1;)s.deleteData(f,1)},nS=(s,f)=>(ga(s),f),iD=(s,f)=>{const b=pv(s.data.substr(0,f.offset())),C=pv(s.data.substr(f.offset()));return(b.text+C.text).length>0?(cm(s),kt(s,f.offset()-b.count)):f},aD=(s,f)=>{const b=f.container(),C=Ye(Cr(b.childNodes),s).map(M=>M<f.offset()?kt(b,f.offset()-1):f).getOr(f);return ga(s),C},sD=(s,f)=>Cs(s)&&f.container()===s?iD(s,f):nS(s,f),Ly=(s,f)=>f.container()===s.parentNode?aD(s,f):nS(s,f),rS=(s,f)=>kt.isTextPosition(f)?sD(s,f):Ly(s,f),ga=s=>{vE(s)&&is(s)&&(pw(s)?s.removeAttribute("data-mce-caret"):fv(s)),Cs(s)&&(cm(s),s.data.length===0&&fv(s))},lD=Eo,yE=Gi,bE=Eg,oS="*[contentEditable=false],video,audio,embed,object",iS=(s,f,b)=>{const C=Wd(f.getBoundingClientRect(),b);let M,I;if(s.tagName==="BODY"){const Y=s.ownerDocument.documentElement;M=s.scrollLeft||Y.scrollLeft,I=s.scrollTop||Y.scrollTop}else{const Y=s.getBoundingClientRect();M=s.scrollLeft-Y.left,I=s.scrollTop-Y.top}C.left+=M,C.right+=M,C.top+=I,C.bottom+=I,C.width=1;let F=f.offsetWidth-f.clientWidth;return F>0&&(b&&(F*=-1),C.left+=F,C.right+=F),C},mv=s=>{var f,b;const C=fa(Ve.fromDom(s),oS);for(let M=0;M<C.length;M++){const I=C[M].dom;let F=I.previousSibling;if(Mg(F)){const Y=F.data;Y.length===1?(f=F.parentNode)===null||f===void 0||f.removeChild(F):F.deleteData(Y.length-1,1)}F=I.nextSibling,If(F)&&(F.data.length===1?(b=F.parentNode)===null||b===void 0||b.removeChild(F):F.deleteData(0,1))}},gv=(s,f,b,C)=>{const M=zh();let I,F;const Y=xs(s),X=s.dom,ae=(Me,Re)=>{let qe;if(de(),bE(Re))return null;if(b(Re)){const nt=mw(Y,Re,Me),tt=iS(f,Re,Me);X.setStyle(nt,"top",tt.top),F=nt;const gt=X.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});X.setStyles(gt,{...tt}),X.add(f,gt),M.set({caret:gt,element:Re,before:Me}),Me&&X.addClass(gt,"mce-visual-caret-before"),fe(),qe=Re.ownerDocument.createRange(),qe.setStart(nt,0),qe.setEnd(nt,0)}else return F=ek(Re,Me),qe=Re.ownerDocument.createRange(),vv(F.nextSibling)?(qe.setStart(F,0),qe.setEnd(F,0)):(qe.setStart(F,1),qe.setEnd(F,1)),qe;return qe},de=()=>{mv(f),F&&(ga(F),F=null),M.on(Me=>{X.remove(Me.caret),M.clear()}),I&&(clearInterval(I),I=void 0)},fe=()=>{I=setInterval(()=>{M.on(Me=>{C()?X.toggleClass(Me.caret,"mce-visual-caret-hidden"):X.addClass(Me.caret,"mce-visual-caret-hidden")})},500)};return{show:ae,hide:de,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{M.on(Me=>{const Re=iS(f,Me.element,Me.before);X.setStyles(Me.caret,{...Re})})},destroy:()=>clearInterval(I)}},aS=()=>bn.browser.isFirefox(),vv=s=>lD(s)||yE(s),um=s=>(vv(s)||rl(s)&&aS())&&O0(Ve.fromDom(s)).exists(kr),yv=Fs,Qf=Eo,cD=Gi,ep=kh("display","block table table-cell table-caption list-item"),Ny=is,sS=Gp,uD=Rn,dD=Zt,Oy=oi,tp=s=>s>0,qd=s=>s<0,bv=(s,f)=>{let b;for(;b=s(f);)if(!sS(b))return b;return null},dm=(s,f,b,C,M)=>{const I=new ri(s,C),F=Qf(s)||sS(s);let Y;if(qd(f)){if(F&&(Y=bv(I.prev.bind(I),!0),b(Y)))return Y;for(;Y=bv(I.prev.bind(I),M);)if(b(Y))return Y}if(tp(f)){if(F&&(Y=bv(I.next.bind(I),!0),b(Y)))return Y;for(;Y=bv(I.next.bind(I),M);)if(b(Y))return Y}return null},_E=(s,f)=>{const b=M=>yv(M.dom),C=M=>M.dom===f;return Bi(Ve.fromDom(s),b,C).map(M=>M.dom).getOr(f)},Kd=(s,f)=>{for(;s&&s!==f;){if(ep(s))return s;s=s.parentNode}return null},vu=(s,f,b)=>Kd(s.container(),b)===Kd(f.container(),b),By=(s,f)=>{if(!f)return ue.none();const b=f.container(),C=f.offset();return uD(b)?ue.from(b.childNodes[C+s]):ue.none()},lS=(s,f)=>{var b;const M=((b=f.ownerDocument)!==null&&b!==void 0?b:document).createRange();return s?(M.setStartBefore(f),M.setEndBefore(f)):(M.setStartAfter(f),M.setEndAfter(f)),M},cS=(s,f,b)=>Kd(f,s)===Kd(b,s),SE=(s,f,b)=>{const C=s?"previousSibling":"nextSibling";let M=b;for(;M&&M!==f;){let I=M[C];if(I&&Ny(I)&&(I=I[C]),Qf(I)||cD(I)){if(cS(f,I,M))return I;break}if(Oy(I))break;M=M.parentNode}return null},_v=Te(lS,!0),Sv=Te(lS,!1),uS=(s,f,b)=>{let C;const M=Te(SE,!0,f),I=Te(SE,!1,f),F=b.startContainer,Y=b.startOffset;if(Gp(F)){const X=dD(F)?F.parentNode:F,ae=X.getAttribute("data-mce-caret");if(ae==="before"&&(C=X.nextSibling,um(C)))return _v(C);if(ae==="after"&&(C=X.previousSibling,um(C)))return Sv(C)}if(!b.collapsed)return b;if(Zt(F)){if(Ny(F)){if(s===1){if(C=I(F),C)return _v(C);if(C=M(F),C)return Sv(C)}if(s===-1){if(C=M(F),C)return Sv(C);if(C=I(F),C)return _v(C)}return b}if(Mg(F)&&Y>=F.data.length-1)return s===1&&(C=I(F),C)?_v(C):b;if(If(F)&&Y<=1)return s===-1&&(C=M(F),C)?Sv(C):b;if(Y===F.data.length)return C=I(F),C?_v(C):b;if(Y===0)return C=M(F),C?Sv(C):b}return b},xE=(s,f)=>By(s?0:-1,f).filter(Qf),xv=(s,f,b)=>{const C=uS(s,f,b);return s===-1?kt.fromRangeStart(C):kt.fromRangeEnd(C)},Fy=s=>ue.from(s.getNode()).map(Ve.fromDom),CE=s=>ue.from(s.getNode(!0)).map(Ve.fromDom),hm=(s,f)=>{let b=f;for(;b=s(b);)if(b.isVisible())return b;return b},Vy=(s,f)=>{const b=vu(s,f);return!b&&Ko(s.getNode())?!0:b};var wa;(function(s){s[s.Backwards=-1]="Backwards",s[s.Forwards=1]="Forwards"})(wa||(wa={}));const wE=Eo,kc=Zt,dS=Rn,hS=Ko,np=oi,Ja=Ml,od=q0,fm=(s,f)=>{const b=[];let C=s;for(;C&&C!==f;)b.push(C),C=C.parentNode;return b},Dc=(s,f)=>s.hasChildNodes()&&f<s.childNodes.length?s.childNodes[f]:null,zy=(s,f)=>{if(tp(s)){if(np(f.previousSibling)&&!kc(f.previousSibling))return kt.before(f);if(kc(f))return kt(f,0)}if(qd(s)){if(np(f.nextSibling)&&!kc(f.nextSibling))return kt.after(f);if(kc(f))return kt(f,f.data.length)}return qd(s)?hS(f)?kt.before(f):kt.after(f):kt.before(f)},rp=(s,f)=>{const b=f.nextSibling;return b&&np(b)?kc(b)?kt(b,0):kt.before(b):pm(wa.Forwards,kt.after(f),s)},pm=(s,f,b)=>{let C,M,I,F;if(!dS(b)||!f)return null;if(f.isEqual(kt.after(b))&&b.lastChild){if(F=kt.after(b.lastChild),qd(s)&&np(b.lastChild)&&dS(b.lastChild))return hS(b.lastChild)?kt.before(b.lastChild):F}else F=f;const Y=F.container();let X=F.offset();if(kc(Y)){if(qd(s)&&X>0)return kt(Y,--X);if(tp(s)&&X<Y.length)return kt(Y,++X);C=Y}else{if(qd(s)&&X>0&&(M=Dc(Y,X-1),np(M)))return!Ja(M)&&(I=dm(M,s,od,M),I)?kc(I)?kt(I,I.data.length):kt.after(I):kc(M)?kt(M,M.data.length):kt.before(M);if(tp(s)&&X<Y.childNodes.length&&(M=Dc(Y,X),np(M)))return hS(M)?rp(b,M):!Ja(M)&&(I=dm(M,s,od,M),I)?kc(I)?kt(I,0):kt.before(I):kc(M)?kt(M,0):kt.after(M);C=M||F.getNode()}if(C&&(tp(s)&&F.isAtEnd()||qd(s)&&F.isAtStart())&&(C=dm(C,s,Be,b,!0),od(C,b)))return zy(s,C);M=C&&dm(C,s,od,b);const ae=vt(mt(fm(Y,b),wE));return ae&&(!M||!ae.contains(M))?(tp(s)?F=kt.after(ae):F=kt.before(ae),F):M?zy(s,M):null},id=s=>({next:f=>pm(wa.Forwards,f,s),prev:f=>pm(wa.Backwards,f,s)}),hD=(s,f,b)=>{const C=s?kt.before(b):kt.after(b);return Hs(s,f,C)},fD=s=>Ko(s)?kt.before(s):kt.after(s),Xd=s=>kt.isTextPosition(s)?s.offset()===0:oi(s.getNode()),Cv=s=>{if(kt.isTextPosition(s)){const f=s.container();return s.offset()===f.data.length}else return oi(s.getNode(!0))},fS=(s,f)=>!kt.isTextPosition(s)&&!kt.isTextPosition(f)&&s.getNode()===f.getNode(!0),Jd=s=>!kt.isTextPosition(s)&&Ko(s.getNode()),Uy=(s,f,b)=>s?!fS(f,b)&&!Jd(f)&&Cv(f)&&Xd(b):!fS(b,f)&&Xd(f)&&Cv(b),Hs=(s,f,b)=>{const C=id(f);return ue.from(s?C.next(b):C.prev(b))},Qd=(s,f,b)=>Hs(s,f,b).bind(C=>vu(b,C,f)&&Uy(s,b,C)?Hs(s,f,C):ue.some(C)),pS=(s,f,b,C)=>Qd(s,f,b).bind(M=>C(M)?pS(s,f,M,C):ue.some(M)),mm=(s,f)=>{const b=s?f.firstChild:f.lastChild;return Zt(b)?ue.some(kt(b,s?0:b.data.length)):b?oi(b)?ue.some(s?kt.before(b):fD(b)):hD(s,f,b):ue.none()},Es=Te(Hs,!0),ls=Te(Hs,!1),Ts=Te(mm,!0),Pc=Te(mm,!1),Hy="_mce_caret",hl=s=>Rn(s)&&s.id===Hy,Yh=(s,f)=>{let b=f;for(;b&&b!==s;){if(hl(b))return b;b=b.parentNode}return null},Ll=s=>V(s.start),EE=s=>Vn(s,"rng"),pD=s=>Vn(s,"id"),mS=s=>Vn(s,"name"),nc=s=>on.isArray(s.start),rc=s=>!mS(s)&&ie(s.forward)?s.forward:!0,gm=(s,f)=>(Rn(f)&&s.isBlock(f)&&!f.innerHTML&&(f.innerHTML='<br data-mce-bogus="1" />'),f),mD=(s,f)=>{const b=ue.from(_s(s.getRoot(),f.start)),C=ue.from(_s(s.getRoot(),f.end));return rs(b,C,(M,I)=>{const F=s.createRng();return F.setStart(M.container(),M.offset()),F.setEnd(I.container(),I.offset()),{range:F,forward:rc(f)}})},wv=(s,f)=>{var b;const M=((b=s.ownerDocument)!==null&&b!==void 0?b:document).createTextNode(Na);s.appendChild(M),f.setStart(M,0),f.setEnd(M,0)},oc=s=>!s.hasChildNodes(),gD=(s,f)=>Pc(s).fold(Xe,b=>(f.setStart(b.container(),b.offset()),f.setEnd(b.container(),b.offset()),!0)),TE=(s,f,b)=>oc(f)&&Yh(s,f)?(wv(f,b),!0):!1,io=(s,f,b,C)=>{const M=b[f?"start":"end"],I=s.getRoot();if(M){let F=I,Y=M[0];for(let X=M.length-1;F&&X>=1;X--){const ae=F.childNodes;if(TE(I,F,C))return!0;if(M[X]>ae.length-1)return TE(I,F,C)?!0:gD(F,C);F=ae[M[X]]}Zt(F)&&(Y=Math.min(M[0],F.data.length)),Rn(F)&&(Y=Math.min(M[0],F.childNodes.length)),f?C.setStart(F,Y):C.setEnd(F,Y)}return!0},yu=s=>Zt(s)&&s.data.length>0,Rc=(s,f,b)=>{const C=s.get(b.id+"_"+f),M=C==null?void 0:C.parentNode,I=b.keep;if(C&&M){let F,Y;if(f==="start"?I?C.hasChildNodes()?(F=C.firstChild,Y=1):yu(C.nextSibling)?(F=C.nextSibling,Y=0):yu(C.previousSibling)?(F=C.previousSibling,Y=C.previousSibling.data.length):(F=M,Y=s.nodeIndex(C)+1):(F=M,Y=s.nodeIndex(C)):I?C.hasChildNodes()?(F=C.firstChild,Y=1):yu(C.previousSibling)?(F=C.previousSibling,Y=C.previousSibling.data.length):(F=M,Y=s.nodeIndex(C)):(F=M,Y=s.nodeIndex(C)),!I){const X=C.previousSibling,ae=C.nextSibling;on.each(on.grep(C.childNodes),fe=>{Zt(fe)&&(fe.data=fe.data.replace(/\uFEFF/g,""))});let de;for(;de=s.get(b.id+"_"+f);)s.remove(de,!0);if(Zt(ae)&&Zt(X)&&!bn.browser.isOpera()){const fe=X.data.length;X.appendData(ae.data),s.remove(ae),F=X,Y=fe}}return ue.some(kt(F,Y))}else return ue.none()},Gy=(s,f)=>{const b=s.createRng();return io(s,!0,f,b)&&io(s,!1,f,b)?ue.some({range:b,forward:rc(f)}):ue.none()},vD=(s,f)=>{const b=Rc(s,"start",f),C=Rc(s,"end",f);return rs(b,C.or(b),(M,I)=>{const F=s.createRng();return F.setStart(gm(s,M.container()),M.offset()),F.setEnd(gm(s,I.container()),I.offset()),{range:F,forward:rc(f)}})},Wy=(s,f)=>ue.from(s.select(f.name)[f.index]).map(b=>{const C=s.createRng();return C.selectNode(b),{range:C,forward:!0}}),AE=(s,f)=>{const b=s.dom;if(f){if(nc(f))return Gy(b,f);if(Ll(f))return mD(b,f);if(pD(f))return vD(b,f);if(mS(f))return Wy(b,f);if(EE(f))return ue.some({range:f.rng,forward:rc(f)})}return ue.none()},op=(s,f,b)=>Mk(s,f,b),Ev=(s,f)=>{AE(s,f).each(({range:b,forward:C})=>{s.setRng(b,C)})},bi=s=>Rn(s)&&s.tagName==="SPAN"&&s.getAttribute("data-mce-type")==="bookmark",Yy=(s=>f=>s===f)(ko),vm=s=>s!==""&&` \f
\r	\v`.indexOf(s)!==-1,gS=s=>!vm(s)&&!Yy(s)&&!au(s),ME=s=>{const f=[];if(s)for(let b=0;b<s.rangeCount;b++)f.push(s.getRangeAt(b));return f},bD=s=>Kt(s,f=>{const b=Jg(f);return b?[Ve.fromDom(b)]:[]}),Tv=s=>ME(s).length>1,_D=s=>mt(bD(s),Tl),kE=s=>fa(s,"td[data-mce-selected],th[data-mce-selected]"),SD=(s,f)=>{const b=kE(f);return b.length>0?b:_D(s)},ym=s=>SD(ME(s.selection.getSel()),Ve.fromDom(s.getBody())),bm=(s,f)=>pc(s,"table",f),DE=s=>{const f=s.startContainer,b=s.startOffset;return Zt(f)?b===0?ue.some(Ve.fromDom(f)):ue.none():ue.from(f.childNodes[b]).map(Ve.fromDom)},xD=s=>{const f=s.endContainer,b=s.endOffset;return Zt(f)?b===f.data.length?ue.some(Ve.fromDom(f)):ue.none():ue.from(f.childNodes[b-1]).map(Ve.fromDom)},_m=s=>vg(s).fold(Ee([s]),f=>[s].concat(_m(f))),jy=s=>nu(s).fold(Ee([s]),f=>Co(f)==="br"?tu(f).map(b=>[s].concat(jy(b))).getOr([]):[s].concat(jy(f))),vS=(s,f)=>rs(DE(f),xD(f),(b,C)=>{const M=Ae(_m(s),Te(Bo,b)),I=Ae(jy(s),Te(Bo,C));return M.isSome()&&I.isSome()}).getOr(!1),yS=(s,f,b,C)=>{const M=b,I=new ri(b,M),F=qo(s.schema.getMoveCaretBeforeOnEnterElements(),(X,ae)=>!$e(["td","th","table"],ae.toLowerCase()));let Y=b;do{if(Zt(Y)&&on.trim(Y.data).length!==0){C?f.setStart(Y,0):f.setEnd(Y,Y.data.length);return}if(F[Y.nodeName]){C?f.setStartBefore(Y):Y.nodeName==="BR"?f.setEndBefore(Y):f.setEndAfter(Y);return}}while(Y=C?I.next():I.prev());M.nodeName==="BODY"&&(C?f.setStart(M,0):f.setEnd(M,M.childNodes.length))},Av=s=>{const f=s.selection.getSel();return re(f)&&f.rangeCount>0},bS=(s,f)=>{const b=ym(s);b.length>0?Fe(b,C=>{const M=C.dom,I=s.dom.createRng();I.setStartBefore(M),I.setEndAfter(M),f(I,!0)}):f(s.selection.getRng(),!1)},PE=(s,f,b)=>{const C=zw(s,f);b(C),s.moveToBookmark(C)},jh=s=>_e(s==null?void 0:s.nodeType),_S=s=>Rn(s)&&!bi(s)&&!hl(s)&&!iu(s),CD=(s,f)=>{if(_S(f)&&!/^(TD|TH)$/.test(f.nodeName)){const b=s.getAttrib(f,"data-mce-selected"),C=parseInt(b,10);return!isNaN(C)&&C>0}else return!1},RE=(s,f,b)=>{const{selection:C,dom:M}=s,I=C.getNode(),F=Eo(I);PE(C,!0,()=>{f()}),F&&Eo(I)&&M.isChildOf(I,s.getBody())?s.selection.select(I):b(C.getStart())&&wD(M,C)},wD=(s,f)=>{var b,C;const M=f.getRng(),{startContainer:I,startOffset:F}=M,Y=f.getNode();if(!CD(s,Y)&&Rn(I)){const X=I.childNodes,ae=s.getRoot();let de;if(F<X.length){const fe=X[F];de=new ri(fe,(b=s.getParent(fe,s.isBlock))!==null&&b!==void 0?b:ae)}else{const fe=X[X.length-1];de=new ri(fe,(C=s.getParent(fe,s.isBlock))!==null&&C!==void 0?C:ae),de.next(!0)}for(let fe=de.current();fe;fe=de.next()){if(s.getContentEditable(fe)==="false")return;if(Zt(fe)&&!aa(fe)){M.setStart(fe,0),f.setRng(M);return}}}},Sn=(s,f,b)=>{if(s){const C=f?"nextSibling":"previousSibling";for(s=b?s:s[C];s;s=s[C])if(Rn(s)||!aa(s))return s}},ia=(s,f)=>!!s.getTextBlockElements()[f.nodeName.toLowerCase()]||Kr(s,f),eh=(s,f,b)=>s.schema.isValidChild(f,b),aa=(s,f=!1)=>{if(re(s)&&Zt(s)){const b=f?s.data.replace(/ /g," "):s.data;return bc(b)}else return!1},Ic=s=>re(s)&&Zt(s)&&s.length===0,IE=(s,f)=>{const b="[data-mce-cef-wrappable]",C=sm(s),M=ts(C)?b:`${b},${C}`;return fc(Ve.fromDom(f),M)},Mv=(s,f)=>{const b=s.dom;return _S(f)&&b.getContentEditable(f)==="false"&&IE(s,f)&&b.select('[contenteditable="true"]',f).length===0},ic=(s,f)=>he(s)?s(f):(re(f)&&(s=s.replace(/%(\w+)/g,(b,C)=>f[C]||b)),s),SS=(s,f)=>(s=s||"",f=f||"",s=""+(s.nodeName||s),f=""+(f.nodeName||f),s.toLowerCase()===f.toLowerCase()),xS=(s,f)=>{if(oe(s))return null;{let b=String(s);return(f==="color"||f==="backgroundColor")&&(b=al(b)),f==="fontWeight"&&s===700&&(b="bold"),f==="fontFamily"&&(b=b.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),b}},kv=(s,f,b)=>{const C=s.getStyle(f,b);return xS(C,b)},$E=(s,f)=>{let b;return s.getParent(f,C=>Rn(C)?(b=s.getStyle(C,"text-decoration"),!!b&&b!=="none"):!1),b},Zy=(s,f,b)=>s.getParents(f,b,s.getRoot()),CS=(s,f,b)=>{const C=s.formatter.get(f);return re(C)&&st(C,b)},LE=(s,f)=>CS(s,f,C=>{const M=I=>he(I)||I.length>1&&I.charAt(0)==="%";return st(["styles","attributes"],I=>Nr(C,I).exists(F=>{const Y=Z(F)?F:js(F);return st(Y,M)}))}),ED=(s,f,b)=>{const C=["inline","block","selector","attributes","styles","classes"],M=I=>qo(I,(F,Y)=>st(C,X=>X===Y));return CS(s,f,I=>{const F=M(I);return CS(s,b,Y=>{const X=M(Y);return M0(F,X)})})},bu=s=>Is(s,"block"),Dv=s=>bu(s)&&s.wrapper===!0,qy=s=>bu(s)&&s.wrapper!==!0,fl=s=>Is(s,"selector"),Xi=s=>Is(s,"inline"),Pv=s=>fl(s)&&Xi(s)&&mi(Nr(s,"mixed"),!0),wS=s=>fl(s)&&s.expand!==!1&&!Xi(s),Ky=s=>{const f=[];let b=s;for(;b;){if(Zt(b)&&b.data!==Na||b.childNodes.length>1)return[];Rn(b)&&f.push(b),b=b.firstChild}return f},Rv=s=>Ky(s).length>0,ES=s=>hl(s.dom)&&Rv(s.dom),Sm=bi,NE=Zy,OE=aa,TS=ia,AS=s=>Ko(s)&&s.getAttribute("data-mce-bogus")&&!s.nextSibling,BE=(s,f)=>{let b=f;for(;b;){if(Rn(b)&&s.getContentEditable(b))return s.getContentEditable(b)==="false"?b:f;b=b.parentNode}return f},Iv=(s,f,b,C)=>{const M=f.data;if(s){for(let I=b;I>0;I--)if(C(M.charAt(I-1)))return I}else for(let I=b;I<M.length;I++)if(C(M.charAt(I)))return I;return-1},cs=(s,f,b)=>Iv(s,f,b,C=>Yy(C)||vm(C)),$c=(s,f,b)=>Iv(s,f,b,gS),pl=(s,f,b,C,M,I)=>{let F;const Y=s.getParent(b,s.isBlock)||f,X=(de,fe,ve)=>{const De=jf(s),Ie=M?De.backwards:De.forwards;return ue.from(Ie(de,fe,(Me,Re)=>Sm(Me.parentNode)?-1:(F=Me,ve(M,Me,Re)),Y))};return X(b,C,cs).bind(de=>I?X(de.container,de.offset+(M?-1:0),$c):ue.some(de)).orThunk(()=>F?ue.some({container:F,offset:M?0:F.length}):ue.none())},$v=(s,f,b,C,M)=>{const I=C[M];Zt(C)&&ts(C.data)&&I&&(C=I);const F=NE(s,C);for(let Y=0;Y<F.length;Y++)for(let X=0;X<f.length;X++){const ae=f[X];if(!(re(ae.collapsed)&&ae.collapsed!==b.collapsed)&&fl(ae)&&s.is(F[Y],ae.selector))return F[Y]}return C},Xy=(s,f,b,C)=>{var M;let I=b;const F=s.getRoot(),Y=f[0];if(bu(Y)&&(I=Y.wrapper?null:s.getParent(b,Y.block,F)),!I){const X=(M=s.getParent(b,"LI,TD,TH,SUMMARY"))!==null&&M!==void 0?M:F;I=s.getParent(Zt(b)?b.parentNode:b,ae=>ae!==F&&TS(s.schema,ae),X)}if(I&&bu(Y)&&Y.wrapper&&(I=NE(s,I,"ul,ol").reverse()[0]||I),!I)for(I=b;I&&I[C]&&!s.isBlock(I[C])&&(I=I[C],!SS(I,"br")););return I||b},FE=(s,f,b,C)=>{const M=b.parentNode;return re(b[C])?!1:M===f||oe(M)||s.isBlock(M)?!0:FE(s,f,M,C)},ip=(s,f,b,C,M)=>{let I=b;const F=M?"previousSibling":"nextSibling",Y=s.getRoot();if(Zt(b)&&!OE(b)&&(M?C>0:C<b.data.length))return b;for(;I;){if(!f[0].block_expand&&s.isBlock(I))return I;for(let X=I[F];X;X=X[F]){const ae=Zt(X)&&!FE(s,Y,X,F);if(!Sm(X)&&!AS(X)&&!OE(X,ae))return I}if(I===Y||I.parentNode===Y){b=I;break}I=I.parentNode}return b},Jy=s=>Sm(s.parentNode)||Sm(s),th=(s,f,b,C=!1)=>{let{startContainer:M,startOffset:I,endContainer:F,endOffset:Y}=f;const X=b[0];return Rn(M)&&M.hasChildNodes()&&(M=Yd(M,I),Zt(M)&&(I=0)),Rn(F)&&F.hasChildNodes()&&(F=Yd(F,f.collapsed?Y:Y-1),Zt(F)&&(Y=F.data.length)),M=BE(s,M),F=BE(s,F),Jy(M)&&(M=Sm(M)?M:M.parentNode,f.collapsed?M=M.previousSibling||M:M=M.nextSibling||M,Zt(M)&&(I=f.collapsed?M.length:0)),Jy(F)&&(F=Sm(F)?F:F.parentNode,f.collapsed?F=F.nextSibling||F:F=F.previousSibling||F,Zt(F)&&(Y=f.collapsed?0:F.length)),f.collapsed&&(pl(s,s.getRoot(),M,I,!0,C).each(({container:fe,offset:ve})=>{M=fe,I=ve}),pl(s,s.getRoot(),F,Y,!1,C).each(({container:fe,offset:ve})=>{F=fe,Y=ve})),(Xi(X)||X.block_expand)&&((!Xi(X)||!Zt(M)||I===0)&&(M=ip(s,b,M,I,!0)),(!Xi(X)||!Zt(F)||Y===F.data.length)&&(F=ip(s,b,F,Y,!1))),wS(X)&&(M=$v(s,b,f,M,"previousSibling"),F=$v(s,b,f,F,"nextSibling")),(bu(X)||fl(X))&&(M=Xy(s,b,M,"previousSibling"),F=Xy(s,b,F,"nextSibling"),bu(X)&&(s.isBlock(M)||(M=ip(s,b,M,I,!0)),s.isBlock(F)||(F=ip(s,b,F,Y,!1)))),Rn(M)&&M.parentNode&&(I=s.nodeIndex(M),M=M.parentNode),Rn(F)&&F.parentNode&&(Y=s.nodeIndex(F)+1,F=F.parentNode),{startContainer:M,startOffset:I,endContainer:F,endOffset:Y}},Lv=(s,f,b)=>{var C;const M=f.startOffset,I=Yd(f.startContainer,M),F=f.endOffset,Y=Yd(f.endContainer,F-1),X=Re=>{const qe=Re[0];Zt(qe)&&qe===I&&M>=qe.data.length&&Re.splice(0,1);const nt=Re[Re.length-1];return F===0&&Re.length>0&&nt===Y&&Zt(nt)&&Re.splice(Re.length-1,1),Re},ae=(Re,qe,nt)=>{const tt=[];for(;Re&&Re!==nt;Re=Re[qe])tt.push(Re);return tt},de=(Re,qe)=>s.getParent(Re,nt=>nt.parentNode===qe,qe),fe=(Re,qe,nt)=>{const tt=nt?"nextSibling":"previousSibling";for(let gt=Re,Ht=gt.parentNode;gt&&gt!==qe;gt=Ht){Ht=gt.parentNode;const an=ae(gt===Re?gt:gt[tt],tt);an.length&&(nt||an.reverse(),b(X(an)))}};if(I===Y)return b(X([I]));const ve=(C=s.findCommonAncestor(I,Y))!==null&&C!==void 0?C:s.getRoot();if(s.isChildOf(I,Y))return fe(I,ve,!0);if(s.isChildOf(Y,I))return fe(Y,ve);const De=de(I,ve)||I,Ie=de(Y,ve)||Y;fe(I,De,!0);const Me=ae(De===I?De:De.nextSibling,"nextSibling",Ie===Y?Ie.nextSibling:Ie);Me.length&&b(X(Me)),fe(Y,Ie)},MS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],VE=s=>ql(s)&&lu(s)===Na,zE=(s,f,b,C)=>Kl(f).fold(()=>"skipping",M=>C==="br"||VE(f)?"valid":$w(f)?"existing":hl(f.dom)?"caret":st(MS,I=>fc(f,I))?"valid-block":!eh(s,b,C)||!eh(s,Co(M),b)?"invalid-child":"valid"),As=(s,f)=>{const b=th(s.dom,f,[{inline:"span"}]);f.setStart(b.startContainer,b.startOffset),f.setEnd(b.endContainer,b.endOffset),s.selection.setRng(f)},Qy=(s,f,b,C,M,I)=>{const{uid:F=f,...Y}=b;$p(s,Mi()),na(s,`${em()}`,F),na(s,`${Yf()}`,C);const{attributes:X={},classes:ae=[]}=M(F,Y);if(Dd(s,X),xk(s,ae),I){ae.length>0&&na(s,`${Zg()}`,ae.join(","));const de=qn(X);de.length>0&&na(s,`${tm()}`,de.join(","))}},Xo=s=>{Lp(s,Mi()),da(s,`${em()}`),da(s,`${Yf()}`),da(s,`${jg()}`);const f=Fu(s,`${tm()}`).map(C=>C.split(",")).getOr([]),b=Fu(s,`${Zg()}`).map(C=>C.split(",")).getOr([]);Fe(f,C=>da(s,C)),Ck(s,b),da(s,`${Zg()}`),da(s,`${tm()}`)},nh=(s,f,b,C,M)=>{const I=Ve.fromTag("span",s);return Qy(I,f,b,C,M,!1),I},UE=(s,f,b,C,M,I)=>{const F=[],Y=nh(s.getDoc(),b,I,C,M),X=zh(),ae=()=>{X.clear()},de=()=>X.get().getOrThunk(()=>{const Ie=Rl(Y);return F.push(Ie),X.set(Ie),Ie}),fe=Ie=>{Fe(Ie,ve)},ve=Ie=>{switch(zE(s,Ie,"span",Co(Ie))){case"invalid-child":{ae();const Re=Ya(Ie);fe(Re),ae();break}case"valid-block":{ae(),Qy(Ie,b,I,C,M,!0);break}case"valid":{const Re=de();jb(Ie,Re);break}}},De=Ie=>{const Me=et(Ie,Ve.fromDom);fe(Me)};return Lv(s.dom,f,Ie=>{ae(),De(Ie)}),F},HE=(s,f,b,C)=>{s.undoManager.transact(()=>{const M=s.selection,I=M.getRng(),F=ym(s).length>0,Y=Uh("mce-annotation");if(I.collapsed&&!F&&As(s,I),M.getRng().collapsed&&!F){const X=nh(s.getDoc(),Y,C,f,b.decorate);U0(X,ko),M.getRng().insertNode(X.dom),M.select(X.dom)}else PE(M,!1,()=>{bS(s,X=>{UE(s,X,Y,f,b.decorate,C)})})})},kS=s=>{const f=qg();Pl(s,f);const b=as(s,f),C=Ns("span"),M=I=>{Fe(I,F=>{C(F)?vc(F):Xo(F)})};return{register:(I,F)=>{f.register(I,F)},annotate:(I,F)=>{f.lookup(I).each(Y=>{HE(s,I,Y,F)})},annotationChanged:(I,F)=>{b.addListener(I,F)},remove:I=>{Pi(s,ue.some(I)).each(({elements:F})=>{const Y=s.selection.getBookmark();M(F),s.selection.moveToBookmark(Y)})},removeAll:I=>{const F=s.selection.getBookmark();Ue(hy(s,I),(Y,X)=>{M(Y)}),s.selection.moveToBookmark(F)},getAll:I=>{const F=hy(s,I);return yn(F,Y=>et(Y,X=>X.dom))}}},ap=s=>({getBookmark:Te(op,s),moveToBookmark:Te(Ev,s)});ap.isBookmarkNode=bi;const DS=(s,f,b)=>b.collapsed?!1:st(b.getClientRects(),C=>wk(C,s,f)),PS=(s,f)=>s.dispatch("PreProcess",f),TD=(s,f)=>s.dispatch("PostProcess",f),AD=s=>{s.dispatch("remove")},GE=s=>{s.dispatch("detach")},MD=(s,f)=>{s.dispatch("SwitchMode",{mode:f})},RS=(s,f,b,C,M)=>{s.dispatch("ObjectResizeStart",{target:f,width:b,height:C,origin:M})},kD=(s,f,b,C,M)=>{s.dispatch("ObjectResized",{target:f,width:b,height:C,origin:M})},WE=s=>{s.dispatch("PreInit")},DD=s=>{s.dispatch("PostRender")},PD=s=>{s.dispatch("Init")},RD=(s,f)=>{s.dispatch("PlaceholderToggle",{state:f})},ml=(s,f,b)=>{s.dispatch(f,b)},us=(s,f,b,C)=>{s.dispatch("FormatApply",{format:f,node:b,vars:C})},sp=(s,f,b,C)=>{s.dispatch("FormatRemove",{format:f,node:b,vars:C})},dN=(s,f)=>s.dispatch("BeforeSetContent",f),YE=(s,f)=>s.dispatch("SetContent",f),ID=(s,f)=>s.dispatch("BeforeGetContent",f),eo=(s,f)=>s.dispatch("GetContent",f),jE=(s,f)=>{s.dispatch("AutocompleterStart",f)},ZE=(s,f)=>{s.dispatch("AutocompleterUpdate",f)},IS=s=>{s.dispatch("AutocompleterEnd")},$D=(s,f,b)=>s.dispatch("PastePreProcess",{content:f,internal:b}),LD=(s,f,b)=>s.dispatch("PastePostProcess",{node:f,internal:b}),qE=(s,f)=>s.dispatch("PastePlainTextToggle",{state:f}),ND=(s,f)=>s.dispatch("EditableRootStateChange",{state:f}),Tn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:s=>s.shiftKey||s.ctrlKey||s.altKey||Tn.metaKeyPressed(s),metaKeyPressed:s=>bn.os.isMacOS()||bn.os.isiOS()?s.metaKey:s.ctrlKey&&!s.altKey},lp="data-mce-selected",$S="table,img,figure.image,hr,video,span.mce-preview-object,details",e1=Math.abs,Nv=Math.round,KE={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},OD=s=>s.type==="longpress"||s.type.indexOf("touch")===0,BD=(s,f)=>{const b=f.dom,C=f.getDoc(),M=document,I=f.getBody();let F,Y,X,ae,de,fe,ve,De,Ie,Me,Re,qe,nt,tt,gt,Ht,an;const _n=ln=>re(ln)&&(Bs(ln)||b.is(ln,"figure.image")),At=ln=>Gi(ln)||b.hasClass(ln,"mce-preview-object"),St=(ln,_r)=>{if(OD(ln)){const fo=ln.touches[0];return _n(ln.target)&&!DS(fo.clientX,fo.clientY,_r)}else return _n(ln.target)&&!DS(ln.clientX,ln.clientY,_r)},Ut=ln=>{const _r=ln.target;St(ln,f.selection.getRng())&&!ln.isDefaultPrevented()&&f.selection.select(_r)},$n=ln=>b.hasClass(ln,"mce-preview-object")&&re(ln.firstElementChild)?[ln,ln.firstElementChild]:b.is(ln,"figure.image")?[ln.querySelector("img")]:[ln],Qn=ln=>{const _r=jd(f);return!_r||ln.getAttribute("data-mce-resize")==="false"||ln===f.getBody()?!1:b.hasClass(ln,"mce-preview-object")&&re(ln.firstElementChild)?fc(Ve.fromDom(ln.firstElementChild),_r):fc(Ve.fromDom(ln),_r)},zr=ln=>At(ln)?b.create("img",{src:bn.transparentSrc}):ln.cloneNode(!0),Jr=(ln,_r,fo)=>{if(re(fo)){const Jo=$n(ln);Fe(Jo,Zo=>{Zo.style[_r]||!f.schema.isValid(Zo.nodeName.toLowerCase(),_r)?b.setStyle(Zo,_r,fo):b.setAttrib(Zo,_r,""+fo)})}},Uo=(ln,_r,fo)=>{Jr(ln,"width",_r),Jr(ln,"height",fo)},ho=ln=>{let _r,fo,Jo,Zo,Ha;_r=ln.screenX-fe,fo=ln.screenY-ve,tt=_r*ae[2]+Me,gt=fo*ae[3]+Re,tt=tt<5?5:tt,gt=gt<5?5:gt,(_n(F)||At(F))&&Nk(f)!==!1?Jo=!Tn.modifierPressed(ln):Jo=Tn.modifierPressed(ln),Jo&&(e1(_r)>e1(fo)?(gt=Nv(tt*qe),tt=Nv(gt/qe)):(tt=Nv(gt/qe),gt=Nv(tt*qe))),Uo(Y,tt,gt),Zo=ae.startPos.x+_r,Ha=ae.startPos.y+fo,Zo=Zo>0?Zo:0,Ha=Ha>0?Ha:0,b.setStyles(X,{left:Zo,top:Ha,display:"block"}),X.innerHTML=tt+" &times; "+gt,ae[2]<0&&Y.clientWidth<=tt&&b.setStyle(Y,"left",De+(Me-tt)),ae[3]<0&&Y.clientHeight<=gt&&b.setStyle(Y,"top",Ie+(Re-gt)),_r=I.scrollWidth-Ht,fo=I.scrollHeight-an,_r+fo!==0&&b.setStyles(X,{left:Zo-_r,top:Ha-fo}),nt||(RS(f,F,Me,Re,"corner-"+ae.name),nt=!0)},ki=()=>{const ln=nt;nt=!1,ln&&(Jr(F,"width",tt),Jr(F,"height",gt)),b.unbind(C,"mousemove",ho),b.unbind(C,"mouseup",ki),M!==C&&(b.unbind(M,"mousemove",ho),b.unbind(M,"mouseup",ki)),b.remove(Y),b.remove(X),b.remove(de),hs(F),ln&&(kD(f,F,tt,gt,"corner-"+ae.name),b.setAttrib(F,"style",b.getAttrib(F,"style"))),f.nodeChanged()},hs=ln=>{no();const _r=b.getPos(ln,I),fo=_r.x,Jo=_r.y,Zo=ln.getBoundingClientRect(),Ha=Zo.width||Zo.right-Zo.left,Cd=Zo.height||Zo.bottom-Zo.top;F!==ln&&(dn(),F=ln,tt=gt=0);const dc=f.dispatch("ObjectSelected",{target:ln});Qn(ln)&&!dc.isDefaultPrevented()?Ue(KE,(_l,Ru)=>{const Ar=Qo=>{const wi=$n(F)[0];fe=Qo.screenX,ve=Qo.screenY,Me=wi.clientWidth,Re=wi.clientHeight,qe=Re/Me,ae=_l,ae.name=Ru,ae.startPos={x:Ha*_l[0]+fo,y:Cd*_l[1]+Jo},Ht=I.scrollWidth,an=I.scrollHeight,de=b.add(I,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),b.setStyles(de,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),Y=zr(F),b.addClass(Y,"mce-clonedresizable"),b.setAttrib(Y,"data-mce-bogus","all"),Y.contentEditable="false",b.setStyles(Y,{left:fo,top:Jo,margin:0}),Uo(Y,Ha,Cd),Y.removeAttribute(lp),I.appendChild(Y),b.bind(C,"mousemove",ho),b.bind(C,"mouseup",ki),M!==C&&(b.bind(M,"mousemove",ho),b.bind(M,"mouseup",ki)),X=b.add(I,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Me+" &times; "+Re)};let _o=b.get("mceResizeHandle"+Ru);_o&&b.remove(_o),_o=b.add(I,"div",{id:"mceResizeHandle"+Ru,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ru+"-resize; margin:0; padding:0"}),b.bind(_o,"mousedown",Qo=>{Qo.stopImmediatePropagation(),Qo.preventDefault(),Ar(Qo)}),_l.elm=_o,b.setStyles(_o,{left:Ha*_l[0]+fo-_o.offsetWidth/2,top:Cd*_l[1]+Jo-_o.offsetHeight/2})}):dn(!1)},Ho=dy(hs,0),dn=(ln=!0)=>{Ho.cancel(),no(),F&&ln&&F.removeAttribute(lp),Ue(KE,(_r,fo)=>{const Jo=b.get("mceResizeHandle"+fo);Jo&&(b.unbind(Jo),b.remove(Jo))})},Hn=(ln,_r)=>b.isChildOf(ln,_r),bo=ln=>{if(nt||f.removed||f.composing)return;const _r=ln.type==="mousedown"?ln.target:s.getNode(),fo=Th(Ve.fromDom(_r),$S).map(Zo=>Zo.dom).filter(Zo=>b.isEditable(Zo.parentElement)||Zo.nodeName==="IMG"&&b.isEditable(Zo)).getOrUndefined(),Jo=re(fo)?b.getAttrib(fo,lp,"1"):"1";if(Fe(b.select(`img[${lp}],hr[${lp}]`),Zo=>{Zo.removeAttribute(lp)}),re(fo)&&Hn(fo,I)&&f.hasFocus()){Nn();const Zo=s.getStart(!0);if(Hn(Zo,fo)&&Hn(s.getEnd(!0),fo)){b.setAttrib(fo,lp,Jo),Ho.throttle(fo);return}}dn()},no=()=>{Ue(KE,ln=>{ln.elm&&(b.unbind(ln.elm),delete ln.elm)})},Nn=()=>{try{f.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return f.on("init",()=>{Nn(),f.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",bo),f.on("keyup compositionend",ln=>{F&&F.nodeName==="TABLE"&&bo(ln)}),f.on("hide blur",dn),f.on("contextmenu longpress",Ut,!0)}),f.on("remove",no),{isResizable:Qn,showResizeRect:hs,hideResizeRect:dn,updateResizeRect:bo,destroy:()=>{Ho.cancel(),F=Y=de=null}}},FD=(s,f)=>{f.fold(b=>{s.setStartBefore(b.dom)},(b,C)=>{s.setStart(b.dom,C)},b=>{s.setStartAfter(b.dom)})},VD=(s,f)=>{f.fold(b=>{s.setEndBefore(b.dom)},(b,C)=>{s.setEnd(b.dom,C)},b=>{s.setEndAfter(b.dom)})},XE=(s,f,b)=>{const C=s.document.createRange();return FD(C,f),VD(C,b),C},or=(s,f,b,C,M)=>{const I=s.document.createRange();return I.setStart(f.dom,b),I.setEnd(C.dom,M),I},ad=pu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),JE=(s,f,b)=>f(Ve.fromDom(b.startContainer),b.startOffset,Ve.fromDom(b.endContainer),b.endOffset),zD=(s,f)=>f.match({domRange:b=>({ltr:Ee(b),rtl:ue.none}),relative:(b,C)=>({ltr:zt(()=>XE(s,b,C)),rtl:zt(()=>ue.some(XE(s,C,b)))}),exact:(b,C,M,I)=>({ltr:zt(()=>or(s,b,C,M,I)),rtl:zt(()=>ue.some(or(s,M,I,b,C)))})}),xm=(s,f)=>{const b=f.ltr();return b.collapsed?f.rtl().filter(M=>M.collapsed===!1).map(M=>ad.rtl(Ve.fromDom(M.endContainer),M.endOffset,Ve.fromDom(M.startContainer),M.startOffset)).getOrThunk(()=>JE(s,ad.ltr,b)):JE(s,ad.ltr,b)},QE=(s,f)=>{const b=zD(s,f);return xm(s,b)};ad.ltr,ad.rtl;const rh={create:(s,f,b,C)=>({start:s,soffset:f,finish:b,foffset:C})},HD=(s,f,b)=>{var C,M;return ue.from((M=(C=s.dom).caretPositionFromPoint)===null||M===void 0?void 0:M.call(C,f,b)).bind(I=>{if(I.offsetNode===null)return ue.none();const F=s.dom.createRange();return F.setStart(I.offsetNode,I.offset),F.collapse(),ue.some(F)})},LS=(s,f,b)=>{var C,M;return ue.from((M=(C=s.dom).caretRangeFromPoint)===null||M===void 0?void 0:M.call(C,f,b))},GD=(()=>document.caretPositionFromPoint?HD:document.caretRangeFromPoint?LS:ue.none)(),NS=(s,f,b)=>{const C=Ve.fromDom(s.document);return GD(C,f,b).map(M=>rh.create(Ve.fromDom(M.startContainer),M.startOffset,Ve.fromDom(M.endContainer),M.endOffset))},ac=pu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),eT=(s,f,b,C)=>s.fold(f,b,C),tT=s=>s.fold(Ge,Ge,Ge),WD=ac.before,t1=ac.on,oh=ac.after,ih={before:WD,on:t1,after:oh,cata:eT,getStart:tT},n1=pu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),To=s=>n1.exact(s.start,s.soffset,s.finish,s.foffset),YD=s=>s.match({domRange:f=>Ve.fromDom(f.startContainer),relative:(f,b)=>ih.getStart(f),exact:(f,b,C,M)=>f}),ah=n1.domRange,sd=n1.relative,Ov=n1.exact,gl=s=>{const f=YD(s);return Op(f)},r1=rh.create,ld={domRange:ah,relative:sd,exact:Ov,exactFromRange:To,getWin:gl,range:r1},cp=(s,f)=>{const b=Co(s);return b==="input"?ih.after(s):$e(["br","img"],b)?f===0?ih.before(s):ih.after(s):ih.on(s,f)},Cm=(s,f)=>{const b=s.fold(ih.before,cp,ih.after),C=f.fold(ih.before,cp,ih.after);return ld.relative(b,C)},nT=(s,f,b,C)=>{const M=cp(s,f),I=cp(b,C);return ld.relative(M,I)},jD=s=>s.match({domRange:f=>{const b=Ve.fromDom(f.startContainer),C=Ve.fromDom(f.endContainer);return nT(b,f.startOffset,C,f.endOffset)},relative:Cm,exact:nT}),o1=(s,f)=>{const C=(f||document).createDocumentFragment();return Fe(s,M=>{C.appendChild(M.dom)}),Ve.fromDom(C)},Bv=s=>{const f=ld.getWin(s).dom,b=(M,I,F,Y)=>or(f,M,I,F,Y),C=jD(s);return QE(f,C).match({ltr:b,rtl:b})},lo=(s,f,b)=>NS(s,f,b),Lc=(s,f,b)=>{const C=Op(Ve.fromDom(b));return lo(C.dom,s,f).map(M=>{const I=b.createRange();return I.setStart(M.start.dom,M.soffset),I.setEnd(M.finish.dom,M.foffset),I}).getOrUndefined()},Zh=(s,f)=>re(s)&&re(f)&&s.startContainer===f.startContainer&&s.startOffset===f.startOffset&&s.endContainer===f.endContainer&&s.endOffset===f.endOffset,wm=(s,f,b)=>{let C=s;for(;C&&C!==f;){if(b(C))return C;C=C.parentNode}return null},up=(s,f,b)=>wm(s,f,b)!==null,co=(s,f,b)=>up(s,f,C=>C.nodeName===b),ZD=(s,f)=>is(s)&&!up(s,f,hl),OS=(s,f,b)=>{const C=f.parentNode;if(C){const M=new ri(f,s.getParent(C,s.isBlock)||s.getRoot());let I;for(;I=M[b?"prev":"next"]();)if(Ko(I))return!0}return!1},i1=(s,f)=>{var b;return((b=s.previousSibling)===null||b===void 0?void 0:b.nodeName)===f},qD=(s,f)=>{let b=f;for(;b&&b!==s;){if(Eo(b))return!0;b=b.parentNode}return!1},sh=(s,f,b,C,M)=>{const I=s.getRoot(),F=s.schema.getNonEmptyElements(),Y=M.parentNode;let X,ae;if(!Y)return ue.none();const de=s.getParent(Y,s.isBlock)||I;if(C&&Ko(M)&&f&&s.isEmpty(de))return ue.some(kt(Y,s.nodeIndex(M)));const fe=new ri(M,de);for(;ae=fe[C?"prev":"next"]();){if(s.getContentEditableParent(ae)==="false"||ZD(ae,I))return ue.none();if(Zt(ae)&&ae.data.length>0)return co(ae,I,"A")?ue.none():ue.some(kt(ae,C?ae.data.length:0));if(s.isBlock(ae)||F[ae.nodeName.toLowerCase()])return ue.none();X=ae}return Bd(X)?ue.none():b&&X?ue.some(kt(X,0)):ue.none()},qh=(s,f,b,C)=>{const M=s.getRoot();let I,F=!1,Y=b?C.startContainer:C.endContainer,X=b?C.startOffset:C.endOffset;const ae=Rn(Y)&&X===Y.childNodes.length,de=s.schema.getNonEmptyElements();let fe=b;if(is(Y))return ue.none();if(Rn(Y)&&X>Y.childNodes.length-1&&(fe=!1),wg(Y)&&(Y=M,X=0),Y===M){if(fe&&(I=Y.childNodes[X>0?X-1:0],I&&(is(I)||de[I.nodeName]||rl(I))))return ue.none();if(Y.hasChildNodes()){if(X=Math.min(!fe&&X>0?X-1:X,Y.childNodes.length-1),Y=Y.childNodes[X],X=Zt(Y)&&ae?Y.data.length:0,!f&&Y===M.lastChild&&rl(Y)||qD(M,Y)||is(Y)||Ft(Y))return ue.none();if(Y.hasChildNodes()&&!rl(Y)){I=Y;const ve=new ri(Y,M);do{if(Eo(I)||is(I)){F=!1;break}if(Zt(I)&&I.data.length>0){X=fe?0:I.data.length,Y=I,F=!0;break}if(de[I.nodeName.toLowerCase()]&&!Za(I)){X=s.nodeIndex(I),Y=I.parentNode,fe||X++,F=!0;break}}while(I=fe?ve.next():ve.prev())}}}return f&&(Zt(Y)&&X===0&&sh(s,ae,f,!0,Y).each(ve=>{Y=ve.container(),X=ve.offset(),F=!0}),Rn(Y)&&(I=Y.childNodes[X],I||(I=Y.childNodes[X-1]),I&&Ko(I)&&!i1(I,"A")&&!OS(s,I,!1)&&!OS(s,I,!0)&&sh(s,ae,f,!0,I).each(ve=>{Y=ve.container(),X=ve.offset(),F=!0}))),fe&&!f&&Zt(Y)&&X===Y.data.length&&sh(s,ae,f,!1,Y).each(ve=>{Y=ve.container(),X=ve.offset(),F=!0}),F&&Y?ue.some(kt(Y,X)):ue.none()},Em=(s,f)=>{const b=f.collapsed,C=f.cloneRange(),M=kt.fromRangeStart(f);return qh(s,b,!0,C).each(I=>{(!b||!kt.isAbove(M,I))&&C.setStart(I.container(),I.offset())}),b||qh(s,b,!1,C).each(I=>{C.setEnd(I.container(),I.offset())}),b&&C.collapse(!0),Zh(f,C)?ue.none():ue.some(C)},a1=(s,f)=>s.splitText(f),Fv=s=>{let f=s.startContainer,b=s.startOffset,C=s.endContainer,M=s.endOffset;if(f===C&&Zt(f)){if(b>0&&b<f.data.length)if(C=a1(f,b),f=C.previousSibling,M>b){M=M-b;const I=a1(C,M).previousSibling;f=C=I,M=I.data.length,b=0}else M=0}else if(Zt(f)&&b>0&&b<f.data.length&&(f=a1(f,b),b=0),Zt(C)&&M>0&&M<C.data.length){const I=a1(C,M).previousSibling;C=I,M=I.data.length}return{startContainer:f,startOffset:b,endContainer:C,endOffset:M}},dp=s=>({walk:(I,F)=>Lv(s,I,F),split:Fv,expand:(I,F={type:"word"})=>{if(F.type==="word"){const Y=th(s,I,[{inline:"span"}]),X=s.createRng();return X.setStart(Y.startContainer,Y.startOffset),X.setEnd(Y.endContainer,Y.endOffset),X}return I},normalize:I=>Em(s,I).fold(Xe,F=>(I.setStart(F.startContainer,F.startOffset),I.setEnd(F.endContainer,F.endOffset),!0))});dp.compareRanges=Zh,dp.getCaretRangeFromPoint=Lc,dp.getSelectedNode=Jg,dp.getNode=Yd;const Tm=((s,f)=>{const b=(Y,X)=>{if(!_e(X)&&!X.match(/^[0-9]+$/))throw new Error(s+".set accepts only positive integer values. Value was "+X);const ae=Y.dom;Uu(ae)&&(ae.style[s]=X+"px")},C=Y=>{const X=f(Y);if(X<=0||X===null){const ae=gc(Y,s);return parseFloat(ae)||0}return X},M=C,I=(Y,X)=>Bn(X,(ae,de)=>{const fe=gc(Y,de),ve=fe===void 0?0:parseInt(fe,10);return isNaN(ve)?ae:ae+ve},0);return{set:b,get:C,getOuter:M,aggregate:I,max:(Y,X,ae)=>{const de=I(Y,ae);return X>de?X-de:0}}})("height",s=>{const f=s.dom;return Bp(s)?f.getBoundingClientRect().height:f.offsetHeight}),BS=s=>Tm.get(s),FS=()=>Ve.fromDom(document),s1=(s,f)=>s.view(f).fold(Ee([]),C=>{const M=s.owner(C),I=s1(s,M);return[C].concat(I)}),lh=(s,f)=>{const b=f.owner(s);return s1(f,b)};var fN=Object.freeze({__proto__:null,view:s=>{var f;return(s.dom===document?ue.none():ue.from((f=s.dom.defaultView)===null||f===void 0?void 0:f.frameElement)).map(Ve.fromDom)},owner:s=>Rd(s)});const rT=s=>{const f=FS(),b=Ah(f),C=lh(s,fN),M=Kb(s),I=en(C,(F,Y)=>{const X=Kb(Y);return{left:F.left+X.left,top:F.top+X.top}},{left:0,top:0});return Vp(I.left+M.left+b.left,I.top+M.top+b.top)},_u=s=>Co(s)==="textarea",VS=(s,f)=>s.dispatch("ScrollIntoView",f).isDefaultPrevented(),zS=(s,f)=>{s.dispatch("AfterScrollIntoView",f)},zv=(s,f)=>{const b=Ya(s);if(b.length===0||_u(s))return{element:s,offset:f};if(f<b.length&&!_u(b[f]))return{element:b[f],offset:0};{const C=b[b.length-1];return _u(C)?{element:s,offset:f}:Co(C)==="img"?{element:C,offset:1}:ql(C)?{element:C,offset:lu(C).length}:{element:C,offset:Ya(C).length}}},ch=(s,f)=>{const b=XM(s),C=BS(s);return{element:s,bottom:b.top+C,height:C,pos:b,cleanup:f}},oT=(s,f)=>{const b=zv(s,f),C=Ve.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Na+"</span>");return Zs(b.element,C),ch(C,()=>wo(C))},iT=s=>ch(Ve.fromDom(s),be),Am=(s,f,b,C)=>{lT(s,(M,I)=>cd(s,f,b,C),b)},aT=(s,f,b,C,M)=>{const I={elm:C.element.dom,alignToTop:M};if(VS(s,I))return;const F=Ah(f).top;b(s,f,F,C,M),zS(s,I)},cd=(s,f,b,C)=>{const M=Ve.fromDom(s.getBody()),I=Ve.fromDom(s.getDoc());Hi(M);const F=oT(Ve.fromDom(b.startContainer),b.startOffset);aT(s,I,f,F,C),F.cleanup()},sT=(s,f,b,C)=>{const M=Ve.fromDom(s.getDoc());aT(s,M,b,iT(f),C)},lT=(s,f,b)=>{const C=b.startContainer,M=b.startOffset,I=b.endContainer,F=b.endOffset;f(Ve.fromDom(C),Ve.fromDom(I));const Y=s.dom.createRng();Y.setStart(C,M),Y.setEnd(I,F),s.selection.setRng(b)},l1=(s,f,b,C,M)=>{const I=f.pos;if(C)Xb(I.left,I.top,M);else{const F=I.top-b+f.height;Xb(-s.getBody().getBoundingClientRect().left,F,M)}},US=(s,f,b,C,M,I)=>{const F=C+b,Y=M.pos.top,X=M.bottom,ae=X-Y>=C;Y<b?l1(s,M,C,I!==!1,f):Y>F?l1(s,M,C,ae?I!==!1:I===!0,f):X>F&&!ae&&l1(s,M,C,I===!0,f)},c1=(s,f,b,C,M)=>{const I=Op(f).dom.innerHeight;US(s,f,b,I,C,M)},HS=(s,f,b,C,M)=>{const I=Op(f).dom.innerHeight;US(s,f,b,I,C,M);const F=rT(C.element),Y=W0(window);F.top<Y.y?G0(C.element,M!==!1):F.top>Y.bottom&&G0(C.element,M===!0)},cT=(s,f,b)=>Am(s,c1,f,b),XD=(s,f,b)=>sT(s,f,c1,b),JD=(s,f,b)=>Am(s,HS,f,b),QD=(s,f,b)=>sT(s,f,HS,b),eP=(s,f,b)=>{(s.inline?XD:QD)(s,f,b)},Uv=(s,f,b)=>{(s.inline?cT:JD)(s,f,b)},GS=(s,f=!1)=>s.dom.focus({preventScroll:f}),hp=s=>{const f=Id(s).dom;return s.dom===f.activeElement},fp=(s=FS())=>ue.from(s.dom.activeElement).map(Ve.fromDom),uT=s=>fp(Id(s)).filter(f=>s.dom.contains(f.dom)),dT=(s,f)=>{const b=ql(f)?lu(f).length:Ya(f).length+1;return s>b?b:s<0?0:s},hT=s=>ld.range(s.start,dT(s.soffset,s.start),s.finish,dT(s.foffset,s.finish)),WS=(s,f)=>!ru(f.dom)&&(Pd(s,f)||Bo(s,f)),fT=s=>f=>WS(s,f.start)&&WS(s,f.finish),pT=s=>s.inline||bn.browser.isFirefox(),YS=s=>ld.range(Ve.fromDom(s.startContainer),s.startOffset,Ve.fromDom(s.endContainer),s.endOffset),tP=s=>{const f=s.getSelection();return(!f||f.rangeCount===0?ue.none():ue.from(f.getRangeAt(0))).map(YS)},nP=s=>{const f=Op(s);return tP(f.dom).filter(fT(s))},jS=(s,f)=>ue.from(f).filter(fT(s)).map(hT),Kh=s=>{const f=document.createRange();try{return f.setStart(s.start.dom,s.soffset),f.setEnd(s.finish.dom,s.foffset),ue.some(f)}catch{return ue.none()}},Mm=s=>{const f=pT(s)?nP(Ve.fromDom(s.getBody())):ue.none();s.bookmark=f.isSome()?f:s.bookmark},ZS=s=>(s.bookmark?s.bookmark:ue.none()).bind(b=>jS(Ve.fromDom(s.getBody()),b)).bind(Kh),mT=s=>{ZS(s).each(f=>s.selection.setRng(f))},pp={isEditorUIElement:s=>{const f=s.className.toString();return f.indexOf("tox-")!==-1||f.indexOf("mce-")!==-1}},gT=(s,f)=>(_e(f)||(f=0),setTimeout(s,f)),vT=(s,f)=>(_e(f)||(f=0),setInterval(s,f)),Nl={setEditorTimeout:(s,f,b)=>gT(()=>{s.removed||f()},b),setEditorInterval:(s,f,b)=>{const C=vT(()=>{s.removed?clearInterval(C):f()},b);return C}},KS=s=>s.type==="nodechange"&&s.selectionChange,rP=(s,f)=>{const b=()=>{f.throttle()};Vo.DOM.bind(document,"mouseup",b),s.on("remove",()=>{Vo.DOM.unbind(document,"mouseup",b)})},XS=(s,f)=>{s.on("mouseup touchend",b=>{f.throttle()})},oP=(s,f)=>{XS(s,f),s.on("keyup NodeChange AfterSetSelectionRange",b=>{KS(b)||Mm(s)})},u1=s=>{const f=dy(()=>{Mm(s)},0);s.on("init",()=>{s.inline&&rP(s,f),oP(s,f)}),s.on("remove",()=>{f.cancel()})};let mp;const d1=Vo.DOM,yT=s=>Rn(s)&&pp.isEditorUIElement(s),h1=s=>{const f=s.classList;return f!==void 0?f.contains("tox-edit-area")||f.contains("tox-edit-area__iframe")||f.contains("mce-content-body"):!1},f1=(s,f)=>{const b=iE(s);return d1.getParent(f,M=>yT(M)||(b?s.dom.is(M,b):!1))!==null},JS=s=>{try{const f=Id(Ve.fromDom(s.getElement()));return fp(f).fold(()=>document.body,b=>b.dom)}catch{return document.body}},iP=(s,f)=>{const b=f.editor;u1(b);const C=(M,I)=>{if(Jk(M)&&M.inline!==!0){const F=Ve.fromDom(M.getContainer());I(F,"tox-edit-focus")}};b.on("focusin",()=>{const M=s.focusedEditor;h1(JS(b))&&C(b,$p),M!==b&&(M&&M.dispatch("blur",{focusedEditor:b}),s.setActive(b),s.focusedEditor=b,b.dispatch("focus",{blurredEditor:M}),b.focus(!0))}),b.on("focusout",()=>{Nl.setEditorTimeout(b,()=>{const M=s.focusedEditor;(!h1(JS(b))||M!==b)&&C(b,Lp),!f1(b,JS(b))&&M===b&&(b.dispatch("blur",{focusedEditor:null}),s.focusedEditor=null)})}),mp||(mp=M=>{const I=s.activeEditor;I&&yg(M).each(F=>{const Y=F;Y.ownerDocument===document&&Y!==document.body&&!f1(I,Y)&&s.focusedEditor===I&&(I.dispatch("blur",{focusedEditor:null}),s.focusedEditor=null)})},d1.bind(document,"focusin",mp))},aP=(s,f)=>{s.focusedEditor===f.editor&&(s.focusedEditor=null),!s.activeEditor&&mp&&(d1.unbind(document,"focusin",mp),mp=null)},sP=s=>{s.on("AddEditor",Te(iP,s)),s.on("RemoveEditor",Te(aP,s))},lP=(s,f)=>s.dom.getParent(f,b=>s.dom.getContentEditable(b)==="true"),cP=s=>s.collapsed?ue.from(Yd(s.startContainer,s.startOffset)).map(Ve.fromDom):ue.none(),uP=(s,f)=>cP(f).bind(b=>Yu(b)?ue.some(b):Pd(s,b)?ue.none():ue.some(s)),bT=(s,f)=>{uP(Ve.fromDom(s.getBody()),f).bind(b=>Ts(b.dom)).fold(()=>{s.selection.normalize()},b=>s.selection.setRng(b.toRange()))},Hv=s=>{if(s.setActive)try{s.setActive()}catch{s.focus()}else s.focus()},QS=s=>hp(s)||uT(s).isSome(),dP=s=>re(s.iframeElement)&&hp(Ve.fromDom(s.iframeElement)),p1=s=>{const f=s.getBody();return f&&QS(Ve.fromDom(f))},_T=s=>{const f=Id(Ve.fromDom(s.getElement()));return fp(f).filter(b=>!h1(b.dom)&&f1(s,b.dom)).isSome()},Xh=s=>s.inline?p1(s):dP(s),ST=s=>Xh(s)||_T(s),hP=s=>{const f=s.selection,b=s.getBody();let C=f.getRng();s.quirks.refreshContentEditable(),re(s.bookmark)&&!Xh(s)&&ZS(s).each(I=>{s.selection.setRng(I),C=I});const M=lP(s,f.getNode());if(M&&s.dom.isChildOf(M,b)){Hv(M),bT(s,C),ex(s);return}s.inline||(bn.browser.isOpera()||Hv(b),s.getWin().focus()),(bn.browser.isFirefox()||s.inline)&&(Hv(b),bT(s,C)),ex(s)},ex=s=>s.editorManager.setActive(s),tx=(s,f)=>{s.removed||(f?ex(s):hP(s))},xT=(s,f)=>f.collapsed?s.isEditable(f.startContainer):s.isEditable(f.startContainer)&&s.isEditable(f.endContainer),CT=(s,f,b,C,M)=>{const I=b?f.startContainer:f.endContainer,F=b?f.startOffset:f.endOffset;return ue.from(I).map(Ve.fromDom).map(Y=>!C||!f.collapsed?Mf(Y,M(Y,F)).getOr(Y):Y).bind(Y=>Cl(Y)?ue.some(Y):Kl(Y).filter(Cl)).map(Y=>Y.dom).getOr(s)},nx=(s,f,b=!1)=>CT(s,f,!0,b,(C,M)=>Math.min(wl(C),M)),wT=(s,f,b=!1)=>CT(s,f,!1,b,(C,M)=>M>0?M-1:M),rx=(s,f)=>{const b=s;for(;s&&Zt(s)&&s.length===0;)s=f?s.nextSibling:s.previousSibling;return s||b},ET=(s,f)=>{if(!f)return s;let b=f.startContainer,C=f.endContainer;const M=f.startOffset,I=f.endOffset;let F=f.commonAncestorContainer;f.collapsed||(b===C&&I-M<2&&b.hasChildNodes()&&(F=b.childNodes[M]),Zt(b)&&Zt(C)&&(b.length===M?b=rx(b.nextSibling,!0):b=b.parentNode,I===0?C=rx(C.previousSibling,!1):C=C.parentNode,b&&b===C&&(F=b)));const Y=Zt(F)?F.parentNode:F;return ou(Y)?Y:s},fP=(s,f,b,C)=>{const M=[],I=s.getRoot(),F=s.getParent(b||nx(I,f,f.collapsed),s.isBlock),Y=s.getParent(C||wT(I,f,f.collapsed),s.isBlock);if(F&&F!==I&&M.push(F),F&&Y&&F!==Y){let X;const ae=new ri(F,I);for(;(X=ae.next())&&X!==Y;)s.isBlock(X)&&M.push(X)}return Y&&F!==Y&&Y!==I&&M.push(Y),M},pP=(s,f,b)=>ue.from(f).bind(C=>ue.from(C.parentNode).map(M=>{const I=s.nodeIndex(C),F=s.createRng();return F.setStart(M,I),F.setEnd(M,I+1),b&&(yS(s,F,C,!0),yS(s,F,C,!1)),F})),Gv=(s,f)=>et(f,b=>{const C=s.dispatch("GetSelectionRange",{range:b});return C.range!==b?C.range:b}),mP=s=>Co(s)==="img"?1:n_(s).fold(()=>Ya(s).length,f=>f.length),gP=s=>n_(s).filter(f=>f.trim().length!==0||f.indexOf(ko)>-1).isSome(),ox=s=>eu(s)&&ms(s,"contenteditable")==="false",vP=["img","br"],Wv=s=>gP(s)||$e(vP,Co(s))||ox(s),Yv=s=>gs(s,Wv),yP=s=>bP(s,Wv),bP=(s,f)=>{const b=C=>{const M=Ya(C);for(let I=M.length-1;I>=0;I--){const F=M[I];if(f(F))return ue.some(F);const Y=b(F);if(Y.isSome())return Y}return ue.none()};return b(s)},ds="[data-mce-autocompleter]",TT=(s,f)=>{if(AT(Ve.fromDom(s.getBody())).isNone()){const b=Ve.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',s.getDoc());Ki(b,Ve.fromDom(f.extractContents())),f.insertNode(b.dom),Kl(b).each(C=>C.dom.normalize()),yP(b).map(C=>{s.selection.setCursorLocation(C.dom,mP(C))})}},_P=s=>Th(s,ds),AT=s=>mc(s,ds),SP=(s,f)=>AT(f).each(b=>{const C=s.selection.getBookmark();vc(b),s.selection.moveToBookmark(C)}),xP={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},m1=(s,f,b)=>{const C=b?"lastChild":"firstChild",M=b?"prev":"next";if(s[C])return s[C];if(s!==f){let I=s[M];if(I)return I;for(let F=s.parent;F&&F!==f;F=F.parent)if(I=F[M],I)return I}},CP=s=>{var f;const b=(f=s.value)!==null&&f!==void 0?f:"";if(!bc(b))return!1;const C=s.parent;return!(C&&(C.name!=="span"||C.attr("style"))&&/^[ ]+$/.test(b))},Xn=s=>{const f=s.name==="a"&&!s.attr("href")&&s.attr("id");return s.attr("name")||s.attr("id")&&!s.firstChild||s.attr("data-mce-bookmark")||f};class Va{static create(f,b){const C=new Va(f,xP[f]||1);return b&&Ue(b,(M,I)=>{C.attr(I,M)}),C}constructor(f,b){this.name=f,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}replace(f){const b=this;return f.parent&&f.remove(),b.insert(f,b),b.remove(),b}attr(f,b){const C=this;if(!V(f))return re(f)&&Ue(f,(I,F)=>{C.attr(F,I)}),C;const M=C.attributes;if(M){if(b!==void 0){if(b===null){if(f in M.map){delete M.map[f];let I=M.length;for(;I--;)if(M[I].name===f)return M.splice(I,1),C}return C}if(f in M.map){let I=M.length;for(;I--;)if(M[I].name===f){M[I].value=b;break}}else M.push({name:f,value:b});return M.map[f]=b,C}return M.map[f]}}clone(){const f=this,b=new Va(f.name,f.type),C=f.attributes;if(C){const M=[];M.map={};for(let I=0,F=C.length;I<F;I++){const Y=C[I];Y.name!=="id"&&(M[M.length]={name:Y.name,value:Y.value},M.map[Y.name]=Y.value)}b.attributes=M}return b.value=f.value,b}wrap(f){const b=this;return b.parent&&(b.parent.insert(f,b),f.append(b)),b}unwrap(){const f=this;for(let b=f.firstChild;b;){const C=b.next;f.insert(b,f,!0),b=C}f.remove()}remove(){const f=this,b=f.parent,C=f.next,M=f.prev;return b&&(b.firstChild===f?(b.firstChild=C,C&&(C.prev=null)):M&&(M.next=C),b.lastChild===f?(b.lastChild=M,M&&(M.next=null)):C&&(C.prev=M),f.parent=f.next=f.prev=null),f}append(f){const b=this;f.parent&&f.remove();const C=b.lastChild;return C?(C.next=f,f.prev=C,b.lastChild=f):b.lastChild=b.firstChild=f,f.parent=b,f}insert(f,b,C){f.parent&&f.remove();const M=b.parent||this;return C?(b===M.firstChild?M.firstChild=f:b.prev&&(b.prev.next=f),f.prev=b.prev,f.next=b,b.prev=f):(b===M.lastChild?M.lastChild=f:b.next&&(b.next.prev=f),f.next=b.next,f.prev=b,b.next=f),f.parent=M,f}getAll(f){const b=this,C=[];for(let M=b.firstChild;M;M=m1(M,b))M.name===f&&C.push(M);return C}children(){const f=this,b=[];for(let C=f.firstChild;C;C=C.next)b.push(C);return b}empty(){const f=this;if(f.firstChild){const b=[];for(let M=f.firstChild;M;M=m1(M,f))b.push(M);let C=b.length;for(;C--;){const M=b[C];M.parent=M.firstChild=M.lastChild=M.next=M.prev=null}}return f.firstChild=f.lastChild=null,f}isEmpty(f,b={},C){var M;const I=this;let F=I.firstChild;if(Xn(I))return!1;if(F)do{if(F.type===1){if(F.attr("data-mce-bogus"))continue;if(f[F.name]||Xn(F))return!1}if(F.type===8||F.type===3&&!CP(F)||F.type===3&&F.parent&&b[F.parent.name]&&bc((M=F.value)!==null&&M!==void 0?M:"")||C&&C(F))return!1}while(F=m1(F,I));return!0}walk(f){return m1(this,null,f)}}const MT=on.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),kT=s=>V(s.nodeValue)&&s.nodeValue.includes(Na),g1=s=>`${s.length===0?"":`${et(s,f=>`[${f}]`).join(",")},`}[data-mce-bogus="all"]`,wP=(s,f)=>f.querySelectorAll(g1(s)),DT=s=>document.createTreeWalker(s,NodeFilter.SHOW_COMMENT,f=>kT(f)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ix=s=>document.createTreeWalker(s,NodeFilter.SHOW_TEXT,f=>{if(kT(f)){const b=f.parentNode;return b&&Vn(MT,b.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),EP=s=>DT(s).nextNode()!==null,TP=s=>ix(s).nextNode()!==null,y1=(s,f)=>f.querySelector(g1(s))!==null,PT=(s,f)=>{Fe(wP(s,f),b=>{const C=Ve.fromDom(b);ms(C,"data-mce-bogus")==="all"?wo(C):Fe(s,M=>{Os(C,M)&&da(C,M)})})},AP=s=>{let f=s.nextNode();for(;f!==null;)f.nodeValue=null,f=s.nextNode()},RT=Q(AP,DT),wr=Q(AP,ix),IT=(s,f)=>{const b=[{condition:Te(y1,f),action:Te(PT,f)},{condition:EP,action:RT},{condition:TP,action:wr}];let C=s,M=!1;return Fe(b,({condition:I,action:F})=>{I(C)&&(M||(C=s.cloneNode(!0),M=!0),F(C))}),C},Dr=s=>{const f=fa(s,"[data-mce-bogus]");Fe(f,b=>{ms(b,"data-mce-bogus")==="all"?wo(b):Pf(b)?(Zs(b,Ve.fromText(Tg)),wo(b)):vc(b)})},b1=s=>{const f=fa(s,"input");Fe(f,b=>{da(b,"name")})},MP=(s,f)=>{const b=xs(s),C=new RegExp(`^(<${b}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${b}>[\r
]*|<br \\/>[\r
]*)$`);return f.replace(C,"")},kP=(s,f)=>{const b=s.getDoc(),C=Id(Ve.fromDom(s.getBody())),M=Ve.fromTag("div",b);na(M,"data-mce-bogus","all"),F0(M,{position:"fixed",left:"-9999999px",top:"0"}),U0(M,f.innerHTML),Dr(M),b1(M);const I=QL(C);Ki(I,M);const F=Al(M.dom.innerText);return wo(M),F},DP=(s,f,b)=>{let C;return f.format==="raw"?C=on.trim(Al(IT(b,s.serializer.getTempAttrs()).innerHTML)):f.format==="text"?C=kP(s,b):f.format==="tree"?C=s.serializer.serialize(b,f):C=MP(s,s.serializer.serialize(b,f)),f.format!=="text"&&!xa(Ve.fromDom(b))&&V(C)?on.trim(C):C},pN=(s,f)=>ue.from(s.getBody()).fold(Ee(f.format==="tree"?new Va("body",11):""),b=>DP(s,f,b)),$T=on.makeMap,gp=s=>{const f=[];s=s||{};const b=s.indent,C=$T(s.indent_before||""),M=$T(s.indent_after||""),I=Nh.getEncodeFunc(s.entity_encoding||"raw",s.entities),F=s.element_format!=="xhtml";return{start:(Y,X,ae)=>{if(b&&C[Y]&&f.length>0){const de=f[f.length-1];de.length>0&&de!==`
`&&f.push(`
`)}if(f.push("<",Y),X)for(let de=0,fe=X.length;de<fe;de++){const ve=X[de];f.push(" ",ve.name,'="',I(ve.value,!0),'"')}if(!ae||F?f[f.length]=">":f[f.length]=" />",ae&&b&&M[Y]&&f.length>0){const de=f[f.length-1];de.length>0&&de!==`
`&&f.push(`
`)}},end:Y=>{let X;f.push("</",Y,">"),b&&M[Y]&&f.length>0&&(X=f[f.length-1],X.length>0&&X!==`
`&&f.push(`
`))},text:(Y,X)=>{Y.length>0&&(f[f.length]=X?Y:I(Y))},cdata:Y=>{f.push("<![CDATA[",Y,"]]>")},comment:Y=>{f.push("<!--",Y,"-->")},pi:(Y,X)=>{X?f.push("<?",Y," ",I(X),"?>"):f.push("<?",Y,"?>"),b&&f.push(`
`)},doctype:Y=>{f.push("<!DOCTYPE",Y,">",b?`
`:"")},reset:()=>{f.length=0},getContent:()=>f.join("").replace(/\n$/,"")}},Jh=(s={},f=Cc())=>{const b=gp(s);return s.validate="validate"in s?s.validate:!0,{serialize:M=>{const I=s.validate,F={3:X=>{var ae;b.text((ae=X.value)!==null&&ae!==void 0?ae:"",X.raw)},8:X=>{var ae;b.comment((ae=X.value)!==null&&ae!==void 0?ae:"")},7:X=>{b.pi(X.name,X.value)},10:X=>{var ae;b.doctype((ae=X.value)!==null&&ae!==void 0?ae:"")},4:X=>{var ae;b.cdata((ae=X.value)!==null&&ae!==void 0?ae:"")},11:X=>{let ae=X;if(ae=ae.firstChild)do Y(ae);while(ae=ae.next)}};b.reset();const Y=X=>{var ae;const de=F[X.type];if(de)de(X);else{const fe=X.name,ve=fe in f.getVoidElements();let De=X.attributes;if(I&&De&&De.length>1){const Ie=[];Ie.map={};const Me=f.getElementRule(X.name);if(Me){for(let Re=0,qe=Me.attributesOrder.length;Re<qe;Re++){const nt=Me.attributesOrder[Re];if(nt in De.map){const tt=De.map[nt];Ie.map[nt]=tt,Ie.push({name:nt,value:tt})}}for(let Re=0,qe=De.length;Re<qe;Re++){const nt=De[Re].name;if(!(nt in Ie.map)){const tt=De.map[nt];Ie.map[nt]=tt,Ie.push({name:nt,value:tt})}}De=Ie}}if(b.start(fe,De,ve),cu(fe))V(X.value)&&b.text(X.value,!0),b.end(fe);else if(!ve){let Ie=X.firstChild;if(Ie){(fe==="pre"||fe==="textarea")&&Ie.type===3&&((ae=Ie.value)===null||ae===void 0?void 0:ae[0])===`
`&&b.text(`
`,!0);do Y(Ie);while(Ie=Ie.next)}b.end(fe)}}};return M.type===1&&!s.inner?Y(M):M.type===3?F[3](M):F[11](M),b.getContent()}}},dr=new Set;Fe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],f=>{dr.add(f)});const ax=["font","text-decoration","text-emphasis"],_1=(s,f)=>qn(s.parseStyle(s.getAttrib(f,"style"))),LT=s=>dr.has(s),jv=(s,f)=>Wt(_1(s,f),b=>!LT(b)),NT=s=>mt(s,f=>st(ax,b=>Li(f,b))),PP=(s,f,b)=>{const C=_1(s,f),M=_1(s,b),I=F=>{var Y,X;const ae=(Y=s.getStyle(f,F))!==null&&Y!==void 0?Y:"",de=(X=s.getStyle(b,F))!==null&&X!==void 0?X:"";return Fo(ae)&&Fo(de)&&ae!==de};return st(C,F=>{const Y=X=>st(X,ae=>ae===F);if(!Y(M)&&Y(ax)){const X=NT(M);return st(X,I)}else return I(F)})},OT=(s,f,b)=>ue.from(b.container()).filter(Zt).exists(C=>{const M=s?0:-1;return f(C.data.charAt(b.offset()+M))}),sx=Te(OT,!0,vm),S1=Te(OT,!1,vm),RP=s=>{const f=s.container();return Zt(f)&&(f.data.length===0||il(f.data)&&ap.isBookmarkNode(f.parentNode))},Qh=(s,f)=>b=>By(s?0:-1,b).filter(f).isSome(),IP=s=>Bs(s)&&gc(Ve.fromDom(s),"display")==="block",BT=s=>Eo(s)&&!Y0(s),$P=Qh(!0,IP),LP=Qh(!1,IP),Zv=Qh(!0,Gi),km=Qh(!1,Gi),FT=Qh(!0,rl),Rr=Qh(!1,rl),ud=Qh(!0,BT),Su=Qh(!1,BT),uh=s=>s.slice(0,-1),VT=(s,f,b)=>Pd(f,s)?uh(tw(s,C=>b(C)||Bo(C,f))):[],lx=(s,f)=>VT(s,f,Xe),dd=(s,f)=>[s].concat(lx(s,f)),x1=(s,f,b)=>pS(s,f,b,RP),NP=s=>f=>s.isBlock(Co(f)),cx=(s,f,b)=>Ae(dd(Ve.fromDom(f.container()),s),NP(b)),zT=(s,f,b,C)=>x1(s,f.dom,b).forall(M=>cx(f,b,C).fold(()=>!vu(M,b,f.dom),I=>!vu(M,b,f.dom)&&Pd(I,Ve.fromDom(M.container())))),C1=(s,f,b,C)=>cx(f,b,C).fold(()=>x1(s,f.dom,b).forall(M=>!vu(M,b,f.dom)),M=>x1(s,M.dom,b).isNone()),ux=Te(C1,!1),UT=Te(C1,!0),HT=Te(zT,!1),OP=Te(zT,!0),BP=s=>Fy(s).exists(Pf),w1=(s,f,b,C)=>{const M=mt(dd(Ve.fromDom(b.container()),f),F=>C.isBlock(Co(F))),I=gn(M).getOr(f);return Hs(s,I.dom,b).filter(BP)},Dm=(s,f,b)=>Fy(f).exists(Pf)||w1(!0,s,f,b).isSome(),vp=(s,f,b)=>CE(f).exists(Pf)||w1(!1,s,f,b).isSome(),FP=Te(w1,!1),VP=Te(w1,!0),GT=s=>kt.isTextPosition(s)&&!s.isAtStart()&&!s.isAtEnd(),WT=(s,f,b)=>{const C=mt(dd(Ve.fromDom(f.container()),s),M=>b.isBlock(Co(M)));return gn(C).getOr(s)},YT=(s,f,b)=>GT(f)?S1(f):S1(f)||ls(WT(s,f,b).dom,f).exists(S1),jT=(s,f,b)=>GT(f)?sx(f):sx(f)||Es(WT(s,f,b).dom,f).exists(sx),ZT=s=>$e(["pre","pre-wrap"],s),dx=s=>Fy(s).bind(f=>Sa(f,Cl)).exists(f=>ZT(gc(f,"white-space"))),Pm=(s,f)=>ls(s.dom,f).isNone(),zP=(s,f)=>Es(s.dom,f).isNone(),UP=(s,f,b)=>Pm(s,f)||zP(s,f)||ux(s,f,b)||UT(s,f,b)||vp(s,f,b)||Dm(s,f,b),yp=s=>re(s)&&Eo(s)&&ep(s),hx=(s,f)=>b=>yp(new ri(b,s)[f]()),fx=(s,f)=>{const b=Es(s.dom,f).getOr(f),C=hx(s.dom,"next");return f.isAtEnd()&&(C(f.container())||C(b.container()))},HP=(s,f)=>{const b=ls(s.dom,f).getOr(f),C=hx(s.dom,"prev");return f.isAtStart()&&(C(f.container())||C(b.container()))},qT=(s,f,b)=>dx(f)?!1:UP(s,f,b)||YT(s,f,b)||jT(s,f,b),Rm=(s,f,b)=>dx(f)?!1:ux(s,f,b)||HT(s,f,b)||vp(s,f,b)||YT(s,f,b)||HP(s,f),KT=s=>{const f=s.container(),b=s.offset();return Zt(f)&&b<f.data.length?kt(f,b+1):s},Im=(s,f,b)=>dx(f)?!1:UT(s,f,b)||OP(s,f,b)||Dm(s,f,b)||jT(s,f,b)||fx(s,f),E1=(s,f,b)=>Rm(s,f,b)||Im(s,KT(f),b),Ms=(s,f)=>Yy(s.charAt(f)),XT=(s,f)=>vm(s.charAt(f)),JT=s=>{const f=s.container();return Zt(f)&&Ur(f.data,ko)},QT=s=>{const f=s.split("");return et(f,(b,C)=>Yy(b)&&C>0&&C<f.length-1&&gS(f[C-1])&&gS(f[C+1])?" ":b).join("")},eA=(s,f,b,C)=>{const M=f.data,I=kt(f,0);return!b&&Ms(M,0)&&!E1(s,I,C)?(f.data=" "+M.slice(1),!0):b&&XT(M,0)&&Rm(s,I,C)?(f.data=ko+M.slice(1),!0):!1},GP=s=>{const f=s.data,b=QT(f);return b!==f?(s.data=b,!0):!1},vl=(s,f,b,C)=>{const M=f.data,I=kt(f,M.length-1);return!b&&Ms(M,M.length-1)&&!E1(s,I,C)?(f.data=M.slice(0,-1)+" ",!0):b&&XT(M,M.length-1)&&Im(s,I,C)?(f.data=M.slice(0,-1)+ko,!0):!1},ef=(s,f,b)=>{const C=f.container();if(!Zt(C))return ue.none();if(JT(f)){const M=eA(s,C,!1,b)||GP(C)||vl(s,C,!1,b);return Do(M,f)}else if(E1(s,f,b)){const M=eA(s,C,!0,b)||vl(s,C,!0,b);return Do(M,f)}else return ue.none()},WP=s=>{const f=Ve.fromDom(s.getBody());s.selection.isCollapsed()&&ef(f,kt.fromRangeStart(s.selection.getRng()),s.schema).each(b=>{s.selection.setRng(b.toRange())})},fi=(s,f,b,C)=>{if(b===0)return;const M=Ve.fromDom(s),I=Bi(M,ae=>C.isBlock(Co(ae))).getOr(M),F=s.data.slice(f,f+b),Y=f+b>=s.data.length&&Im(I,kt(s,s.data.length),C),X=f===0&&Rm(I,kt(s,0),C);s.replaceData(f,b,Yp(F,4,X,Y))},tf=(s,f,b)=>{const C=s.data.slice(f),M=C.length-Zc(C).length;fi(s,f,M,b)},T1=(s,f,b)=>{const C=s.data.slice(0,f),M=C.length-Cf(C).length;fi(s,f-M,M,b)},sa=(s,f,b,C,M=!0)=>{const I=Cf(s.data).length,F=M?s:f,Y=M?f:s;return M?F.appendData(Y.data):F.insertData(0,Y.data),wo(Ve.fromDom(Y)),C&&tf(F,I,b),F},tA=(s,f)=>{const b=s.container(),C=s.offset();return!kt.isTextPosition(s)&&b===f.parentNode&&C>kt.before(f).offset()},nA=(s,f)=>tA(f,s)?kt(f.container(),f.offset()-1):f,hd=s=>Zt(s)?kt(s,0):kt.before(s),Po=s=>Zt(s)?kt(s,s.data.length):kt.after(s),v=s=>oi(s.previousSibling)?ue.some(Po(s.previousSibling)):s.previousSibling?Pc(s.previousSibling):ue.none(),E=s=>oi(s.nextSibling)?ue.some(hd(s.nextSibling)):s.nextSibling?Ts(s.nextSibling):ue.none(),P=(s,f)=>ue.from(f.previousSibling?f.previousSibling:f.parentNode).bind(b=>ls(s,kt.before(b))).orThunk(()=>Es(s,kt.after(f))),G=(s,f)=>Es(s,kt.after(f)).orThunk(()=>ls(s,kt.before(f))),H=(s,f)=>v(f).orThunk(()=>E(f)).orThunk(()=>P(s,f)),N=(s,f)=>E(f).orThunk(()=>v(f)).orThunk(()=>G(s,f)),ee=(s,f,b)=>s?N(f,b):H(f,b),le=(s,f,b)=>ee(s,f,b).map(Te(nA,b)),Ce=(s,f,b)=>{b.fold(()=>{s.focus()},C=>{s.selection.setRng(C.toRange(),f)})},pe=s=>f=>f.dom===s,we=(s,f)=>f&&Vn(s.schema.getBlockElements(),Co(f)),We=(s,f)=>{if(Ai(s)){const b=Ve.fromHtml('<br data-mce-bogus="1">');return f?Fe(Ya(s),C=>{ES(C)||wo(C)}):Nd(s),Ki(s,b),ue.some(kt.before(b.dom))}else return ue.none()},ut=(s,f,b,C)=>{const M=tu(s).filter(ql),I=gg(s).filter(ql);return wo(s),fg(M,I,f,(F,Y,X)=>{const ae=F.dom,de=Y.dom,fe=ae.data.length;return sa(ae,de,b,C),X.container()===de?kt(ae,fe):X}).orThunk(()=>(C&&(M.each(F=>T1(F.dom,F.dom.length,b)),I.each(F=>tf(F.dom,0,b))),f))},ct=(s,f)=>Vn(s.schema.getTextInlineElements(),Co(f)),ot=(s,f,b,C=!0,M=!1)=>{const I=le(f,s.getBody(),b.dom),F=Bi(b,Te(we,s),pe(s.getBody())),Y=ut(b,I,s.schema,ct(s,b));s.dom.isEmpty(s.getBody())?(s.setContent(""),s.selection.setCursorLocation()):F.bind(X=>We(X,M)).fold(()=>{C&&Ce(s,f,Y)},X=>{C&&Ce(s,f,ue.some(X))})},Oe=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,wt=s=>Oe.test(s),Er=(s,f)=>fc(Ve.fromDom(f),Lk(s))&&!Kr(s.schema,f)&&s.dom.isEditable(f),ir=s=>{var f;return Vo.DOM.getStyle(s,"direction",!0)==="rtl"||wt((f=s.textContent)!==null&&f!==void 0?f:"")},Wn=(s,f,b)=>mt(Vo.DOM.getParents(b.container(),"*",f),s),jt=(s,f,b)=>{const C=Wn(s,f,b);return ue.from(C[C.length-1])},It=(s,f,b)=>{const C=Kd(f,s),M=Kd(b,s);return re(C)&&C===M},Cn=s=>r_(s)||Z0(s),Pt=(s,f)=>{const b=f.container(),C=f.offset();return s?qs(b)?Zt(b.nextSibling)?kt(b.nextSibling,0):kt.after(b):r_(f)?kt(b,C+1):f:qs(b)?Zt(b.previousSibling)?kt(b.previousSibling,b.previousSibling.data.length):kt.before(b):Z0(f)?kt(b,C-1):f},Pr=Te(Pt,!0),cr=Te(Pt,!1),ar=(s,f)=>{const b=C=>C.stopImmediatePropagation();s.on("beforeinput input",b,!0),s.getDoc().execCommand(f),s.off("beforeinput input",b)},uo=s=>{s.execCommand("delete")},Tr=s=>ar(s,"Delete"),Ln=s=>ar(s,"ForwardDelete"),Yn=s=>f=>mi(Kl(f),s,Bo),nr=s=>ft(s)||Rf(s),Hr=(s,f)=>Pd(s,f)?Sa(f,nr,Yn(s)):ue.none(),rr=(s,f=!0)=>{s.dom.isEmpty(s.getBody())&&s.setContent("",{no_selection:!f})},ao=(s,f,b)=>rs(Ts(b),Pc(b),(C,M)=>{const I=Pt(!0,C),F=Pt(!1,M),Y=Pt(!1,f);return s?Es(b,Y).exists(X=>X.isEqual(F)&&f.isEqual(I)):ls(b,Y).exists(X=>X.isEqual(I)&&f.isEqual(F))}).getOr(!0),Xr=s=>(VM(s)?tu(s):nu(s)).bind(Xr).orThunk(()=>ue.some(s)),Ir=(s,f,b,C=!0)=>{var M;f.deleteContents();const I=Xr(b).getOr(b),F=Ve.fromDom((M=s.dom.getParent(I.dom,s.dom.isBlock))!==null&&M!==void 0?M:b.dom);if(F.dom===s.getBody()?rr(s,C):Ai(F)&&(ju(F),C&&s.selection.setCursorLocation(F.dom,0)),!Bo(b,F)){const Y=mi(Kl(F),b)?[]:GM(F);Fe(Y.concat(Ya(b)),X=>{!Bo(X,F)&&!Pd(X,F)&&Ai(X)&&wo(X)})}},Ci=(s,f,b)=>Bi(s,f,b).isSome(),Io=(s,f)=>Ld(s,f).isSome(),Ji=(s,f)=>gs(s,f).isSome(),Gs=s=>f=>Bo(s,f),Ii=s=>fa(s,"td,th"),za=(s,f)=>bm(Ve.fromDom(s),f),Nc=s=>rs(s.startTable,s.endTable,(f,b)=>{const C=Ji(f,I=>Bo(I,b)),M=Ji(b,I=>Bo(I,f));return!C&&!M?s:{...s,startTable:C?ue.none():s.startTable,endTable:M?ue.none():s.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(s),yl=s=>Nc(s),zn=(s,f)=>{const b=za(s.startContainer,f),C=za(s.endContainer,f),M=b.isSome(),I=C.isSome(),F=rs(b,C,Bo).getOr(!1);return yl({startTable:b,endTable:C,isStartInTable:M,isEndInTable:I,isSameTable:F,isMultiTable:!F&&M&&I})},Zr=(s,f)=>({start:s,end:f}),pi=(s,f,b)=>({rng:s,table:f,cells:b}),va=pu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),je=(s,f)=>Th(Ve.fromDom(s),"td,th",f),xt=s=>!Bo(s.start,s.end),Qe=(s,f)=>bm(s.start,f).bind(b=>bm(s.end,f).bind(C=>Do(Bo(b,C),b))),hn=(s,f)=>!xt(s)&&Qe(s,f).exists(b=>{const C=b.dom.rows;return C.length===1&&C[0].cells.length===1}),Pn=(s,f)=>{const b=je(s.startContainer,f),C=je(s.endContainer,f);return rs(b,C,Zr)},Jn=s=>f=>bm(f,s).bind(b=>oo(Ii(b)).map(C=>Zr(f,C))),Ao=s=>f=>bm(f,s).bind(b=>gn(Ii(b)).map(C=>Zr(C,f))),Lo=s=>f=>Qe(f,s).map(b=>pi(f,b,Ii(b))),si=(s,f,b,C)=>{if(b.collapsed||!s.forall(xt))return ue.none();if(f.isSameTable){const M=s.bind(Lo(C));return ue.some({start:M,end:M})}else{const M=je(b.startContainer,C),I=je(b.endContainer,C),F=M.bind(Jn(C)).bind(Lo(C)),Y=I.bind(Ao(C)).bind(Lo(C));return ue.some({start:F,end:Y})}},Ua=(s,f)=>ht(s,b=>Bo(b,f)),Oc=s=>rs(Ua(s.cells,s.rng.start),Ua(s.cells,s.rng.end),(f,b)=>s.cells.slice(f,b+1)),ks=(s,f,b)=>s.exists(C=>hn(C,b)&&vS(C.start,f)),bp=(s,f)=>{const{startTable:b,endTable:C}=f,M=s.cloneRange();return b.each(I=>M.setStartAfter(I.dom)),C.each(I=>M.setEndBefore(I.dom)),M},qv=(s,f,b,C)=>si(s,f,b,C).bind(({start:M,end:I})=>M.or(I)).bind(M=>{const{isSameTable:I}=f,F=Oc(M).getOr([]);if(I&&M.cells.length===F.length)return ue.some(va.fullTable(M.table));if(F.length>0){if(I)return ue.some(va.partialTable(F,ue.none()));{const Y=bp(b,f);return ue.some(va.partialTable(F,ue.some({...f,rng:Y})))}}else return ue.none()}),Js=(s,f,b,C)=>si(s,f,b,C).bind(({start:M,end:I})=>{const F=M.bind(Oc).getOr([]),Y=I.bind(Oc).getOr([]);if(F.length>0&&Y.length>0){const X=bp(b,f);return ue.some(va.multiTable(F,Y,X))}else return ue.none()}),Qa=(s,f)=>{const b=Gs(s),C=Pn(f,b),M=zn(f,b);return ks(C,f,b)?C.map(I=>va.singleCellTable(f,I.start)):M.isMultiTable?Js(C,M,f,b):qv(C,M,f,b)},Bc=s=>Fe(s,f=>{da(f,"contenteditable"),ju(f)}),nf=(s,f)=>ue.from(s.dom.getParent(f,s.dom.isBlock)).map(Ve.fromDom),sc=(s,f,b)=>{b.each(C=>{f?wo(C):(ju(C),s.selection.setCursorLocation(C.dom,0))})},$m=(s,f,b,C)=>{const M=b.cloneRange();C?(M.setStart(b.startContainer,b.startOffset),M.setEndAfter(f.dom.lastChild)):(M.setStartBefore(f.dom.firstChild),M.setEnd(b.endContainer,b.endOffset)),Ws(s,M,f,!1).each(I=>I())},Ol=s=>{const f=ym(s),b=Ve.fromDom(s.selection.getNode());Eg(b.dom)&&Ai(b)?s.selection.setCursorLocation(b.dom,0):s.selection.collapse(!0),f.length>1&&st(f,C=>Bo(C,b))&&na(b,"data-mce-selected","1")},A1=(s,f,b)=>ue.some(()=>{const C=s.selection.getRng(),M=b.bind(({rng:I,isStartInTable:F})=>{const Y=nf(s,F?I.endContainer:I.startContainer);I.deleteContents(),sc(s,F,Y.filter(Ai));const X=F?f[0]:f[f.length-1];return $m(s,X,C,F),Ai(X)?ue.none():ue.some(F?f.slice(1):f.slice(0,-1))}).getOr(f);Bc(M),Ol(s)}),fd=(s,f,b,C)=>ue.some(()=>{const M=s.selection.getRng(),I=f[0],F=b[b.length-1];$m(s,I,M,!0),$m(s,F,M,!1);const Y=Ai(I)?f:f.slice(1),X=Ai(F)?b:b.slice(0,-1);Bc(Y.concat(X)),C.deleteContents(),Ol(s)}),Ws=(s,f,b,C=!0)=>ue.some(()=>{Ir(s,f,b,C)}),Kv=(s,f)=>ue.some(()=>ot(s,!1,f)),Wo=(s,f,b)=>Qa(f,b).bind(C=>C.fold(Te(Ws,s),Te(Kv,s),Te(A1,s),Te(fd,s))),Xv=(s,f)=>dh(s,f),rA=(s,f,b,C)=>Jv(f,C).fold(()=>Wo(s,f,b),M=>Xv(s,M)),oA=(s,f,b)=>{const C=Ve.fromDom(s.getBody()),M=s.selection.getRng();return b.length!==0?A1(s,b,ue.none()):rA(s,C,M,f)},M1=(s,f)=>Ae(dd(f,s),Tl),Jv=(s,f)=>Ae(dd(f,s),Ns("caption")),px=(s,f,b,C,M)=>Qd(b,s.getBody(),M).bind(I=>M1(f,Ve.fromDom(I.getNode())).bind(F=>Bo(F,C)?ue.none():ue.some(be))),dh=(s,f)=>ue.some(()=>{ju(f),s.selection.setCursorLocation(f.dom,0)}),Pe=(s,f,b,C)=>Ts(s.dom).bind(M=>Pc(s.dom).map(I=>f?b.isEqual(M)&&C.isEqual(I):b.isEqual(I)&&C.isEqual(M))).getOr(!0),at=(s,f)=>dh(s,f),_t=(s,f,b)=>Jv(s,Ve.fromDom(b.getNode())).fold(()=>ue.some(be),C=>Do(!Bo(C,f),be)),Ot=(s,f,b,C,M)=>Qd(b,s.getBody(),M).fold(()=>ue.some(be),I=>Pe(C,b,M,I)?at(s,C):_t(f,C,I)),vn=(s,f,b,C)=>{const M=kt.fromRangeStart(s.selection.getRng());return M1(b,C).bind(I=>Ai(I)?dh(s,I):px(s,b,f,I,M))},fn=(s,f,b,C)=>{const M=kt.fromRangeStart(s.selection.getRng());return Ai(C)?dh(s,C):Ot(s,b,f,C,M)},En=(s,f)=>s?FT(f):Rr(f),Un=(s,f)=>{const b=kt.fromRangeStart(s.selection.getRng());return En(f,b)||Hs(f,s.getBody(),b).exists(C=>En(f,C))},hr=(s,f,b)=>{const C=Ve.fromDom(s.getBody());return Jv(C,b).fold(()=>vn(s,f,C,b).orThunk(()=>Do(Un(s,f),be)),M=>fn(s,f,C,M))},Or=(s,f)=>{const b=Ve.fromDom(s.selection.getStart(!0)),C=ym(s);return s.selection.isCollapsed()&&C.length===0?hr(s,f,b):oA(s,b,C)},Gr=(s,f)=>{let b=f;for(;b&&b!==s;){if(Fs(b)||Eo(b))return b;b=b.parentNode}return null},Vr=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],to=on.each,zo=s=>{const f=s.dom,b=new Set(s.serializer.getTempAttrs()),C=(I,F)=>{if(I.nodeName!==F.nodeName||I.nodeType!==F.nodeType)return!1;const Y=ae=>{const de={};return to(f.getAttribs(ae),fe=>{const ve=fe.nodeName.toLowerCase();ve!=="style"&&!M(ve)&&(de[ve]=f.getAttrib(ae,ve))}),de},X=(ae,de)=>{for(const fe in ae)if(Vn(ae,fe)){const ve=de[fe];if(te(ve)||ae[fe]!==ve)return!1;delete de[fe]}for(const fe in de)if(Vn(de,fe))return!1;return!0};return Rn(I)&&Rn(F)&&(!X(Y(I),Y(F))||!X(f.parseStyle(f.getAttrib(I,"style")),f.parseStyle(f.getAttrib(F,"style"))))?!1:!bi(I)&&!bi(F)},M=I=>st(Vr,F=>Li(I,F))||b.has(I);return{compare:C,isAttributeInternal:M}},Yo=s=>["h1","h2","h3","h4","h5","h6"].includes(s.name),Ea=s=>s.name==="summary",xu=(s,f)=>{let b=s;for(;b=b.walk();)f(b)},rf=(s,f,b,C)=>{const M=b.name;for(let I=0,F=s.length;I<F;I++){const Y=s[I];if(Y.name===M){const X=C.nodes[M];X?X.nodes.push(b):C.nodes[M]={filter:Y,nodes:[b]}}}if(b.attributes)for(let I=0,F=f.length;I<F;I++){const Y=f[I],X=Y.name;if(X in b.attributes.map){const ae=C.attributes[X];ae?ae.nodes.push(b):C.attributes[X]={filter:Y,nodes:[b]}}}},lc=(s,f,b)=>{const C={nodes:{},attributes:{}};return b.firstChild&&xu(b,M=>{rf(s,f,M,C)}),C},hh=(s,f)=>{const b=(C,M)=>{Ue(C,I=>{const F=Cr(I.nodes);Fe(I.filter.callbacks,Y=>{for(let X=F.length-1;X>=0;X--){const ae=F[X];(!(M?ae.attr(I.filter.name)!==void 0:ae.name===I.filter.name)||oe(ae.parent))&&F.splice(X,1)}F.length>0&&Y(F,I.filter.name,f)})})};b(s.nodes,!1),b(s.attributes,!0)},mx=(s,f,b,C={})=>{const M=lc(s,f,b);hh(M,C)},Qv=(s,f,b,C)=>{if((s.pad_empty_with_br||f.insert)&&b(C)){const I=new Va("br",1);f.insert&&I.attr("data-mce-bogus","1"),C.empty().append(I)}else C.empty().append(new Va("#text",3)).value=ko},mN=s=>{var f;return YP(s,"#text")&&((f=s==null?void 0:s.firstChild)===null||f===void 0?void 0:f.value)===ko},YP=(s,f)=>{const b=s==null?void 0:s.firstChild;return re(b)&&b===s.lastChild&&b.name===f},gN=(s,f)=>{const b=s.getElementRule(f.name);return(b==null?void 0:b.paddEmpty)===!0},k1=(s,f,b,C)=>C.isEmpty(f,b,M=>gN(s,M)),jP=(s,f)=>re(s)&&(f(s)||s.name==="br"),vN=s=>{let f;for(let b=s;b;b=b.parent){const C=b.attr("contenteditable");if(C==="false")break;C==="true"&&(f=b)}return ue.from(f)},iA=(s,f,b=s.parent)=>{if(f.getSpecialElements()[s.name])s.empty().remove();else{const C=s.children();for(const M of C)b&&!f.isValidChild(b.name,M.name)&&iA(M,f,b);s.unwrap()}},aA=(s,f,b,C=be)=>{const M=f.getTextBlockElements(),I=f.getNonEmptyElements(),F=f.getWhitespaceElements(),Y=on.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),X=new Set,ae=de=>de!==b&&!Y[de.name];for(let de=0;de<s.length;de++){const fe=s[de];let ve,De,Ie;if(!fe.parent||X.has(fe))continue;if(M[fe.name]&&fe.parent.name==="li"){let Re=fe.next;for(;Re&&M[Re.name];){Re.name="li",X.add(Re),fe.parent.insert(Re,fe.parent);Re=Re.next}fe.unwrap();continue}const Me=[fe];for(ve=fe.parent;ve&&!f.isValidChild(ve.name,fe.name)&&ae(ve);ve=ve.parent)Me.push(ve);if(ve&&Me.length>1)if(sA(f,fe,ve))iA(fe,f);else{Me.reverse(),De=Me[0].clone(),C(De);let Re=De;for(let qe=0;qe<Me.length-1;qe++){f.isValidChild(Re.name,Me[qe].name)&&qe>0?(Ie=Me[qe].clone(),C(Ie),Re.append(Ie)):Ie=Re;for(let nt=Me[qe].firstChild;nt&&nt!==Me[qe+1];){const tt=nt.next;Ie.append(nt),nt=tt}Re=Ie}k1(f,I,F,De)?ve.insert(fe,Me[0],!0):(ve.insert(De,Me[0],!0),ve.insert(fe,De)),ve=Me[0],(k1(f,I,F,ve)||YP(ve,"br"))&&ve.empty().remove()}else if(fe.parent){if(fe.name==="li"){let Re=fe.prev;if(Re&&(Re.name==="ul"||Re.name==="ol")){Re.append(fe);continue}if(Re=fe.next,Re&&(Re.name==="ul"||Re.name==="ol")&&Re.firstChild){Re.insert(fe,Re.firstChild,!0);continue}const qe=new Va("ul",1);C(qe),fe.wrap(qe);continue}if(f.isValidChild(fe.parent.name,"div")&&f.isValidChild("div",fe.name)){const Re=new Va("div",1);C(Re),fe.wrap(Re)}else iA(fe,f)}}},yN=(s,f)=>{let b=s;for(;b;){if(b.name===f)return!0;b=b.parent}return!1},sA=(s,f,b=f.parent)=>b?s.children[f.name]&&!s.isValidChild(b.name,f.name)||f.name==="a"&&yN(b,"a")?!0:Ea(b)&&Yo(f)?!((b==null?void 0:b.firstChild)===f&&(b==null?void 0:b.lastChild)===f):!1:!1,bN=(s,f,b,C)=>{const M=document.createRange();return M.setStart(s,f),M.setEnd(b,C),M},ZP=s=>{const f=kt.fromRangeStart(s),b=kt.fromRangeEnd(s),C=s.commonAncestorContainer;return Hs(!1,C,b).map(M=>!vu(f,b,C)&&vu(f,M,C)?bN(f.container(),f.offset(),M.container(),M.offset()):s).getOr(s)},D1=s=>s.collapsed?s:ZP(s),lA=s=>re(s.firstChild)&&s.firstChild===s.lastChild,qP=s=>s.name==="br"||s.value===ko,_N=(s,f)=>s.getBlockElements()[f.name]&&lA(f)&&qP(f.firstChild),cA=(s,f)=>{const b=s.getNonEmptyElements();return re(f)&&(f.isEmpty(b)||_N(s,f))},KP=(s,f)=>{let b=f.firstChild,C=f.lastChild;return b&&b.name==="meta"&&(b=b.next),C&&C.attr("id")==="mce_marker"&&(C=C.prev),cA(s,C)&&(C=C==null?void 0:C.prev),!b||b!==C?!1:b.name==="ul"||b.name==="ol"},gx=s=>{var f,b;const C=s.firstChild,M=s.lastChild;return C&&C.nodeName==="META"&&((f=C.parentNode)===null||f===void 0||f.removeChild(C)),M&&M.id==="mce_marker"&&((b=M.parentNode)===null||b===void 0||b.removeChild(M)),s},XP=(s,f,b)=>{const C=f.serialize(b),M=s.createFragment(C);return gx(M)},SN=s=>{var f;return mt((f=s==null?void 0:s.childNodes)!==null&&f!==void 0?f:[],b=>b.nodeName==="LI")},P1=s=>s.data===ko||Ko(s),JP=s=>re(s==null?void 0:s.firstChild)&&s.firstChild===s.lastChild&&P1(s.firstChild),QP=s=>!s.firstChild||JP(s),vx=s=>s.length>0&&QP(s[s.length-1])?s.slice(0,-1):s,of=(s,f)=>{const b=s.getParent(f,s.isBlock);return b&&b.nodeName==="LI"?b:null},xN=(s,f)=>!!of(s,f),P5=(s,f)=>{const b=f.cloneRange(),C=f.cloneRange();return b.setStartBefore(s),C.setEndAfter(s),[b.cloneContents(),C.cloneContents()]},CN=(s,f)=>{const b=kt.before(s),M=id(f).next(b);return M?M.toRange():null},eR=(s,f)=>{const b=kt.after(s),M=id(f).prev(b);return M?M.toRange():null},R5=(s,f,b,C)=>{const M=P5(s,C),I=s.parentNode;return I&&(I.insertBefore(M[0],s),on.each(f,F=>{I.insertBefore(F,s)}),I.insertBefore(M[1],s),I.removeChild(s)),eR(f[f.length-1],b)},_Y=(s,f,b)=>{const C=s.parentNode;return C&&on.each(f,M=>{C.insertBefore(M,s)}),CN(s,b)},I5=(s,f,b,C)=>(C.insertAfter(f.reverse(),s),eR(f[0],b)),tR=(s,f,b,C)=>{const M=XP(f,s,C),I=of(f,b.startContainer),F=vx(SN(M.firstChild)),Y=1,X=2,ae=f.getRoot(),de=fe=>{const ve=kt.fromRangeStart(b),De=id(f.getRoot()),Ie=fe===Y?De.prev(ve):De.next(ve),Me=Ie==null?void 0:Ie.getNode();return Me?of(f,Me)!==I:!0};return I?de(Y)?_Y(I,F,ae):de(X)?I5(I,F,ae,f):R5(I,F,ae,b):null},fh=["pre"],nR=(s,f,b,C)=>{var M;const I=f.firstChild,F=f.lastChild,Y=F.attr("data-mce-type")==="bookmark"?F.prev:F,X=I===Y,ae=$e(fh,I.name);if(X&&ae){const de=I.attr("contenteditable")!=="false",fe=((M=s.getParent(b,s.isBlock))===null||M===void 0?void 0:M.nodeName.toLowerCase())===I.name,ve=ue.from(Gr(C,b)).forall(Fs);return de&&fe&&ve}else return!1},R1=Eg,rR=(s,f,b)=>{if(re(b)){const C=s.getParent(f.endContainer,R1);return b===C&&vS(Ve.fromDom(b),f)}else return!1},$5=(s,f,b)=>{var C;if(b.getAttribute("data-mce-bogus")==="all")(C=b.parentNode)===null||C===void 0||C.insertBefore(s.dom.createFragment(f),b);else{const M=b.firstChild,I=b.lastChild;!M||M===I&&M.nodeName==="BR"?s.dom.setHTML(b,f):s.selection.setContent(f,{no_events:!0})}},wN=(s,f,b)=>{ue.from(s.getParent(f,"td,th")).map(Ve.fromDom).each(C=>sr(C,b))},L5=(s,f)=>{const b=s.schema.getTextInlineElements(),C=s.dom;if(f){const M=s.getBody(),I=zo(s);on.each(C.select("*[data-mce-fragment]"),F=>{if(re(b[F.nodeName.toLowerCase()])&&jv(C,F)){for(let X=F.parentElement;re(X)&&X!==M&&!PP(C,F,X);X=X.parentElement)if(I.compare(X,F)){C.remove(F,!0);break}}})}},EN=s=>{let f=s;for(;f=f.walk();)f.type===1&&f.attr("data-mce-fragment","1")},oR=s=>{on.each(s.getElementsByTagName("*"),f=>{f.removeAttribute("data-mce-fragment")})},N5=s=>!!s.getAttribute("data-mce-fragment"),TN=(s,f)=>re(f)&&!s.schema.getVoidElements()[f.nodeName],O5=(s,f)=>{var b,C,M;let I;const F=s.dom,Y=s.selection;if(!f)return;Y.scrollIntoView(f);const X=Gr(s.getBody(),f);if(X&&F.getContentEditable(X)==="false"){F.remove(f),Y.select(X);return}let ae=F.createRng();const de=f.previousSibling;if(Zt(de)){ae.setStart(de,(C=(b=de.nodeValue)===null||b===void 0?void 0:b.length)!==null&&C!==void 0?C:0);const De=f.nextSibling;Zt(De)&&(de.appendData(De.data),(M=De.parentNode)===null||M===void 0||M.removeChild(De))}else ae.setStartBefore(f),ae.setEndBefore(f);const fe=De=>{let Ie=kt.fromRangeStart(De);return Ie=id(s.getBody()).next(Ie),Ie==null?void 0:Ie.toRange()},ve=F.getParent(f,F.isBlock);if(F.remove(f),ve&&F.isEmpty(ve)){const De=R1(ve);Nd(Ve.fromDom(ve)),ae.setStart(ve,0),ae.setEnd(ve,0),!De&&!N5(ve)&&(I=fe(ae))?(ae=I,F.remove(ve)):F.add(ve,F.create("br",De?{}:{"data-mce-bogus":"1"}))}Y.setRng(ae)},yx=s=>{const f=s.dom,b=D1(s.selection.getRng());s.selection.setRng(b);const C=f.getParent(b.startContainer,R1);rR(f,b,C)?Ws(s,b,Ve.fromDom(C)):b.startContainer===b.endContainer&&b.endOffset-b.startOffset===1&&Zt(b.startContainer.childNodes[b.startOffset])?b.deleteContents():s.getDoc().execCommand("Delete",!1)},AN=s=>{for(let f=s;f;f=f.walk())if(f.attr("id")==="mce_marker")return ue.some(f);return ue.none()},B5=(s,f,b)=>{var C;return st(b.children(),Yo)&&((C=s.getParent(f,s.isBlock))===null||C===void 0?void 0:C.nodeName)==="SUMMARY"},MN=(s,f,b)=>{var C,M;const I=s.selection,F=s.dom,Y=s.parser,X=b.merge,ae=Jh({validate:!0},s.schema),de='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';b.preserve_zwsp||(f=Al(f)),f.indexOf("{$caret}")===-1&&(f+="{$caret}"),f=f.replace(/\{\$caret\}/,de);let fe=I.getRng();const ve=fe.startContainer,De=s.getBody();ve===De&&I.isCollapsed()&&F.isBlock(De.firstChild)&&TN(s,De.firstChild)&&F.isEmpty(De.firstChild)&&(fe=F.createRng(),fe.setStart(De.firstChild,0),fe.setEnd(De.firstChild,0),I.setRng(fe)),I.isCollapsed()||yx(s);const Ie=I.getNode(),Me={context:Ie.nodeName.toLowerCase(),data:b.data,insert:!0},Re=Y.parse(f,Me);if(b.paste===!0&&KP(s.schema,Re)&&xN(F,Ie))return fe=tR(ae,F,I.getRng(),Re),fe&&I.setRng(fe),f;b.paste===!0&&nR(F,Re,Ie,s.getBody())&&((C=Re.firstChild)===null||C===void 0||C.unwrap()),EN(Re);let qe=Re.lastChild;if(qe&&qe.attr("id")==="mce_marker"){const nt=qe;for(qe=qe.prev;qe;qe=qe.walk(!0))if(qe.type===3||!F.isBlock(qe.name)){qe.parent&&s.schema.isValidChild(qe.parent.name,"span")&&qe.parent.insert(nt,qe,qe.name==="br");break}}if(s._selectionOverrides.showBlockCaretContainer(Ie),!Me.invalid&&!B5(F,Ie,Re))f=ae.serialize(Re),$5(s,f,Ie);else{s.selection.setContent(de);let nt=I.getNode(),tt;const gt=s.getBody();for(wg(nt)?nt=tt=gt:tt=nt;tt&&tt!==gt;)nt=tt,tt=tt.parentNode;f=nt===gt?gt.innerHTML:F.getOuterHTML(nt);const Ht=Y.parse(f),an=AN(Ht),_n=an.bind(vN).getOr(Ht);an.each($n=>$n.replace(Re));const At=Re.children(),St=(M=Re.parent)!==null&&M!==void 0?M:Ht;Re.unwrap();const Ut=mt(At,$n=>sA(s.schema,$n,St));aA(Ut,s.schema,_n),mx(Y.getNodeFilters(),Y.getAttributeFilters(),Ht),f=ae.serialize(Ht),nt===gt?F.setHTML(gt,f):F.setOuterHTML(nt,f)}return L5(s,X),O5(s,F.get("mce_marker")),oR(s.getBody()),wN(F,I.getStart(),s.schema),jp(s.schema,s.getBody(),I.getStart()),f},uA=s=>s instanceof Va,F5=s=>{Xh(s)&&Ts(s.getBody()).each(f=>{const b=f.getNode(),C=rl(b)?Ts(b).getOr(f):f;s.selection.setRng(C.toRange())})},iR=(s,f,b)=>{s.dom.setHTML(s.getBody(),f),b!==!0&&F5(s)},V5=(s,f,b,C)=>{if(b=Al(b),b.length===0||/^\s+$/.test(b)){const M='<br data-mce-bogus="1">';f.nodeName==="TABLE"?b="<tr><td>"+M+"</td></tr>":/^(UL|OL)$/.test(f.nodeName)&&(b="<li>"+M+"</li>");const I=xs(s);return s.schema.isValidChild(f.nodeName.toLowerCase(),I.toLowerCase())?(b=M,b=s.dom.createHTML(I,lv(s),b)):b||(b=M),iR(s,b,C.no_selection),{content:b,html:b}}else{C.format!=="raw"&&(b=Jh({validate:!1},s.schema).serialize(s.parser.parse(b,{isRootContent:!0,insert:!0})));const M=xa(Ve.fromDom(f))?b:on.trim(b);return iR(s,M,C.no_selection),{content:M,html:M}}},z5=(s,f,b,C)=>{mx(s.parser.getNodeFilters(),s.parser.getAttributeFilters(),b);const M=Jh({validate:!1},s.schema).serialize(b),I=Al(xa(Ve.fromDom(f))?M:on.trim(M));return iR(s,I,C.no_selection),{content:b,html:I}},kN=(s,f,b)=>ue.from(s.getBody()).map(C=>uA(f)?z5(s,C,f,b):V5(s,C,f,b)).getOr({content:f,html:uA(b.content)?"":b.content}),DN=s=>he(s)?s:Xe,aR=(s,f,b)=>{let C=s.dom;const M=DN(b);for(;C.parentNode;){C=C.parentNode;const I=Ve.fromDom(C),F=f(I);if(F.isSome())return F;if(M(I))break}return ue.none()},_p=(s,f,b)=>{const C=f(s),M=DN(b);return C.orThunk(()=>M(s)?ue.none():aR(s,f,M))},sR=SS,PN=(s,f,b)=>{const C=s.formatter.get(b);if(C)for(let M=0;M<C.length;M++){const I=C[M];if(fl(I)&&I.inherit===!1&&s.dom.is(f,I.selector))return!0}return!1},I1=(s,f,b,C,M)=>{const I=s.dom.getRoot();if(f===I)return!1;const F=s.dom.getParent(f,Y=>PN(s,Y,b)?!0:Y.parentNode===I||!!af(s,Y,b,C,!0));return!!af(s,F,b,C,M)},bx=(s,f,b)=>Xi(b)&&sR(f,b.inline)||bu(b)&&sR(f,b.block)?!0:fl(b)?Rn(f)&&s.is(f,b.selector):!1,lR=(s,f,b,C,M,I)=>{const F=b[C],Y=C==="attributes";if(he(b.onmatch))return b.onmatch(f,b,C);if(F){if(xh(F)){for(let X=0;X<F.length;X++)if(Y?s.getAttrib(f,F[X]):kv(s,f,F[X]))return!0}else for(const X in F)if(Vn(F,X)){const ae=Y?s.getAttrib(f,X):kv(s,f,X),de=ic(F[X],I),fe=oe(ae)||ts(ae);if(fe&&oe(de))continue;if(M&&fe&&!b.exact||(!M||b.exact)&&!sR(ae,xS(de,X)))return!1}}return!0},af=(s,f,b,C,M)=>{const I=s.formatter.get(b),F=s.dom;if(I&&Rn(f))for(let Y=0;Y<I.length;Y++){const X=I[Y];if(bx(s.dom,f,X)&&lR(F,f,X,"attributes",M,C)&&lR(F,f,X,"styles",M,C)){const ae=X.classes;if(ae){for(let de=0;de<ae.length;de++)if(!s.dom.hasClass(f,ic(ae[de],C)))return}return X}}},dA=(s,f,b,C,M)=>{if(C)return I1(s,C,f,b,M);if(C=s.selection.getNode(),I1(s,C,f,b,M))return!0;const I=s.selection.getStart();return!!(I!==C&&I1(s,I,f,b,M))},U5=(s,f,b)=>{const C=[],M={},I=s.selection.getStart();return s.dom.getParent(I,F=>{for(let Y=0;Y<f.length;Y++){const X=f[Y];!M[X]&&af(s,F,X,b)&&(M[X]=!0,C.push(X))}},s.dom.getRoot()),C},e0=(s,f)=>{const b=M=>Bo(M,Ve.fromDom(s.getBody())),C=(M,I)=>af(s,M.dom,I)?ue.some(I):ue.none();return ue.from(s.selection.getStart(!0)).bind(M=>_p(Ve.fromDom(M),I=>Wr(f,F=>C(I,F)),b)).getOrNull()},RN=(s,f)=>{const b=s.formatter.get(f),C=s.dom;if(b&&s.selection.isEditable()){const M=s.selection.getStart(),I=Zy(C,M);for(let F=b.length-1;F>=0;F--){const Y=b[F];if(!fl(Y))return!0;for(let X=I.length-1;X>=0;X--)if(C.is(I[X],Y.selector))return!0}}return!1},IN=(s,f,b)=>Bn(b,(C,M)=>{const I=LE(s,M);return s.formatter.matchNode(f,M,{},I)?C.concat([M]):C},[]),$1=Na,hA=(s,f)=>s.importNode(f,!0),cR=s=>{if(s){const f=new ri(s,s);for(let b=f.current();b;b=f.next())if(Zt(b))return b}return null},uR=s=>{const f=Ve.fromTag("span");return Dd(f,{id:Hy,"data-mce-bogus":"1","data-mce-type":"format-caret"}),s&&Ki(f,Ve.fromText($1)),f},$N=s=>{const f=cR(s);return f&&f.data.charAt(0)===$1&&f.deleteData(0,1),f},dR=(s,f,b)=>{const C=s.dom,M=s.selection;if(Rv(f))ot(s,!1,Ve.fromDom(f),b,!0);else{const I=M.getRng(),F=C.getParent(f,C.isBlock),Y=I.startContainer,X=I.startOffset,ae=I.endContainer,de=I.endOffset,fe=$N(f);C.remove(f,!0),Y===fe&&X>0&&I.setStart(fe,X-1),ae===fe&&de>0&&I.setEnd(fe,de-1),F&&C.isEmpty(F)&&ju(Ve.fromDom(F)),M.setRng(I)}},hR=(s,f,b)=>{const C=s.dom,M=s.selection;if(f)dR(s,f,b);else if(f=Yh(s.getBody(),M.getStart()),!f)for(;f=C.get(Hy);)dR(s,f,b)},fA=(s,f,b)=>{var C,M;const I=s.dom,F=I.getParent(b,Te(ia,s.schema));F&&I.isEmpty(F)?(C=b.parentNode)===null||C===void 0||C.replaceChild(f,b):(fw(Ve.fromDom(b)),I.isEmpty(b)?(M=b.parentNode)===null||M===void 0||M.replaceChild(f,b):I.insertAfter(f,b))},fR=(s,f)=>(s.appendChild(f),f),pA=(s,f)=>{var b;const C=en(s,(I,F)=>fR(I,F.cloneNode(!1)),f),M=(b=C.ownerDocument)!==null&&b!==void 0?b:document;return fR(C,M.createTextNode($1))},H5=(s,f,b,C,M,I)=>{const F=s.formatter,Y=s.dom,X=mt(qn(F.get()),fe=>fe!==C&&!Ur(fe,"removeformat")),ae=IN(s,b,X);if(mt(ae,fe=>!ED(s,fe,C)).length>0){const fe=b.cloneNode(!1);return Y.add(f,fe),F.remove(C,M,fe,I),Y.remove(fe),ue.some(fe)}else return ue.none()},G5=(s,f,b)=>{let C;const M=s.selection,I=s.formatter.get(f);if(!I)return;const F=M.getRng();let Y=F.startOffset;const ae=F.startContainer.nodeValue;C=Yh(s.getBody(),M.getStart());const de=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(ae&&Y>0&&Y<ae.length&&de.test(ae.charAt(Y))&&de.test(ae.charAt(Y-1))){const fe=M.getBookmark();F.collapse(!0);let ve=th(s.dom,F,I);ve=Fv(ve),s.formatter.apply(f,b,ve),M.moveToBookmark(fe)}else{let fe=C?cR(C):null;(!C||(fe==null?void 0:fe.data)!==$1)&&(C=hA(s.getDoc(),uR(!0).dom),fe=C.firstChild,F.insertNode(C),Y=1),s.formatter.apply(f,b,C),M.setCursorLocation(fe,Y)}},LN=(s,f,b,C)=>{const M=s.dom,I=s.selection;let F=!1;const Y=s.formatter.get(f);if(!Y)return;const X=I.getRng(),ae=X.startContainer,de=X.startOffset;let fe=ae;Zt(ae)&&(de!==ae.data.length&&(F=!0),fe=fe.parentNode);const ve=[];let De;for(;fe;){if(af(s,fe,f,b,C)){De=fe;break}fe.nextSibling&&(F=!0),ve.push(fe),fe=fe.parentNode}if(De)if(F){const Ie=I.getBookmark();X.collapse(!0);let Me=th(M,X,Y,!0);Me=Fv(Me),s.formatter.remove(f,b,Me,C),I.moveToBookmark(Ie)}else{const Ie=Yh(s.getBody(),De),Me=re(Ie)?M.getParents(De.parentNode,Be,Ie):[],Re=uR(!1).dom;fA(s,Re,Ie??De);const qe=H5(s,Re,De,f,b,C),nt=pA([...ve,...qe.toArray(),...Me],Re);Ie&&dR(s,Ie,re(Ie)),I.setCursorLocation(nt,1),M.isEmpty(De)&&M.remove(De)}},pR=(s,f,b)=>{const C=s.selection,M=s.getBody();hR(s,null,b),(f===8||f===46)&&C.isCollapsed()&&C.getStart().innerHTML===$1&&hR(s,Yh(M,C.getStart()),!0),(f===37||f===39)&&hR(s,Yh(M,C.getStart()),!0)},NN=s=>Zt(s)&&Mo(s.data,ko),W5=s=>{s.on("mouseup keydown",f=>{pR(s,f.keyCode,NN(s.selection.getRng().endContainer))})},ON=s=>{const f=uR(!1),b=pA(s,f.dom);return{caretContainer:f,caretPosition:kt(b,0)}},BN=(s,f)=>{const{caretContainer:b,caretPosition:C}=ON(f);return Zs(Ve.fromDom(s),b),wo(Ve.fromDom(s)),C},mA=(s,f)=>{const{caretContainer:b,caretPosition:C}=ON(f);return s.insertNode(b.dom),C},sf=(s,f)=>{if(hl(f.dom))return!1;const b=s.schema.getTextInlineElements();return Vn(b,Co(f))&&!hl(f.dom)&&!iu(f.dom)},Sx={},gA=Fi(["pre"]),Qi=(s,f)=>{Sx[s]||(Sx[s]=[]),Sx[s].push(f)},mR=(s,f)=>{Vn(Sx,s)&&Fe(Sx[s],b=>{b(f)})};Qi("pre",s=>{const f=s.selection.getRng(),b=M=>I=>{const F=I.previousSibling;return gA(F)&&$e(M,F)},C=(M,I)=>{const F=Ve.fromDom(I),Y=Rd(F).dom;wo(F),ci(Ve.fromDom(M),[Ve.fromTag("br",Y),Ve.fromTag("br",Y),...Ya(F)])};if(!f.collapsed){const M=s.selection.getSelectedBlocks(),I=mt(mt(M,gA),b(M));Fe(I,F=>{C(F.previousSibling,F)})}});const vA=["fontWeight","fontStyle","color","fontSize","fontFamily"],Sp=s=>j(s.styles)&&st(qn(s.styles),f=>$e(vA,f)),FN=s=>Ae(s,f=>Xi(f)&&f.inline==="span"&&Sp(f)),gR=(s,f)=>{const b=s.get(f);return Z(b)?FN(b):ue.none()},L1=(s,f)=>ls(f,kt.fromRangeStart(s)).isNone(),VN=(s,f)=>Es(f,kt.fromRangeEnd(s)).exists(b=>!Ko(b.getNode())||Es(f,b).isSome())===!1,zN=s=>f=>t_(f)&&s.isEditable(f),N1=s=>{const f=s.getSelectedBlocks(),b=s.getRng();if(s.isCollapsed())return[];if(f.length===1)return L1(b,f[0])&&VN(b,f[0])?f:[];{const C=gn(f).filter(F=>L1(b,F)).toArray(),M=oo(f).filter(F=>VN(b,F)).toArray(),I=f.slice(1,-1);return C.concat(I).concat(M)}},Y5=s=>mt(N1(s),zN(s.dom)),Lm=s=>mt(s.getSelectedBlocks(),zN(s.dom)),vR=on.each,lf=s=>Rn(s)&&!bi(s)&&!hl(s)&&!iu(s),Fc=(s,f)=>{for(let b=s;b;b=b[f]){if(Zt(b)&&Fo(b.data))return s;if(Rn(b)&&!bi(b))return b}return s},xx=(s,f,b)=>{const C=zo(s),M=ou(f)&&s.dom.isEditable(f),I=ou(b)&&s.dom.isEditable(b);if(M&&I){const F=Fc(f,"previousSibling"),Y=Fc(b,"nextSibling");if(C.compare(F,Y)){for(let X=F.nextSibling;X&&X!==Y;){const ae=X;X=X.nextSibling,F.appendChild(ae)}return s.dom.remove(Y),on.each(on.grep(Y.childNodes),X=>{F.appendChild(X)}),F}}return b},yA=(s,f,b,C)=>{var M;if(C&&f.merge_siblings!==!1){const I=(M=xx(s,Sn(C),C))!==null&&M!==void 0?M:C;xx(s,I,Sn(I,!0))}},j5=(s,f,b)=>{if(f.clear_child_styles){const C=f.links?"*:not(a)":"*";vR(s.select(C,b),M=>{lf(M)&&s.isEditable(M)&&vR(f.styles,(I,F)=>{s.setStyle(M,F,"")})})}},yR=(s,f,b)=>{vR(s.childNodes,C=>{lf(C)&&(f(C)&&b(C),C.hasChildNodes()&&yR(C,f,b))})},bA=(s,f)=>{f.nodeName==="SPAN"&&s.getAttribs(f).length===0&&s.remove(f,!0)},UN=(s,f)=>b=>!!(b&&kv(s,b,f)),Cu=(s,f,b)=>C=>{s.setStyle(C,f,b),C.getAttribute("style")===""&&C.removeAttribute("style"),bA(s,C)},cf=pu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),HN=/^(src|href|style)$/,Cx=on.each,O1=SS,t0=s=>/^(TR|TH|TD)$/.test(s.nodeName),_A=(s,f,b)=>s.isChildOf(f,b)&&f!==b&&!s.isBlock(b),GN=(s,f,b)=>{let C=f[b?"startContainer":"endContainer"],M=f[b?"startOffset":"endOffset"];if(Rn(C)){const I=C.childNodes.length-1;!b&&M&&M--,C=C.childNodes[M>I?I:M]}return Zt(C)&&b&&M>=C.data.length&&(C=new ri(C,s.getBody()).next()||C),Zt(C)&&!b&&M===0&&(C=new ri(C,s.getBody()).prev()||C),C},bR=(s,f)=>{const b=f?"firstChild":"lastChild",C=s[b];return t0(s)&&C?s.nodeName==="TR"&&C[b]||C:s},_R=(s,f,b,C)=>{var M;const I=s.create(b,C);return(M=f.parentNode)===null||M===void 0||M.insertBefore(I,f),I.appendChild(f),I},WN=(s,f,b,C,M)=>{const I=Ve.fromDom(f),F=Ve.fromDom(s.create(C,M)),Y=b?Xl(I):nw(I);return ci(F,Y),b?(Zs(I,F),_g(F,I)):(Hu(I,F),Ki(F,I)),F.dom},Z5=(s,f)=>f.links&&s.nodeName==="A",YN=(s,f,b)=>{const C=f.parentNode;let M;const I=s.dom,F=xs(s);bu(b)&&C===I.getRoot()&&(!b.list_block||!O1(f,b.list_block))&&Fe(Cr(f.childNodes),Y=>{eh(s,F,Y.nodeName.toLowerCase())?M?M.appendChild(Y):(M=_R(I,Y,F),I.setAttribs(M,lv(s))):M=null}),!(Pv(b)&&!O1(b.inline,f))&&I.remove(f,!0)},B1=(s,f,b)=>_e(s)?{name:f,value:null}:{name:s,value:ic(f,b)},jN=(s,f)=>{s.getAttrib(f,"style")===""&&(f.removeAttribute("style"),f.removeAttribute("data-mce-style"))},SR=(s,f,b,C,M)=>{let I=!1;Cx(b.styles,(F,Y)=>{const{name:X,value:ae}=B1(Y,F,C),de=xS(ae,X);(b.remove_similar||q(ae)||!Rn(M)||O1(kv(s,M,X),de))&&s.setStyle(f,X,""),I=!0}),I&&jN(s,f)},xR=(s,f,b)=>{f==="removeformat"?Fe(Lm(s.selection),C=>{Fe(vA,M=>s.dom.setStyle(C,M,"")),jN(s.dom,C)}):gR(s.formatter,f).each(C=>{Fe(Lm(s.selection),M=>SR(s.dom,M,C,b,null))})},ZN=(s,f,b,C,M)=>{const I=s.dom,F=zo(s),Y=s.schema;if(Xi(f)&&Zp(Y,f.inline)&&Kr(Y,C)&&C.parentElement===s.getBody())return YN(s,C,f),cf.removed();if(!f.ceFalseOverride&&C&&I.getContentEditableParent(C)==="false"||C&&!bx(I,C,f)&&!Z5(C,f))return cf.keep();const X=C,ae=f.preserve_attributes;if(Xi(f)&&f.remove==="all"&&Z(ae)){const de=mt(I.getAttribs(X),fe=>$e(ae,fe.name.toLowerCase()));if(I.removeAllAttribs(X),Fe(de,fe=>I.setAttrib(X,fe.name,fe.value)),de.length>0)return cf.rename("span")}if(f.remove!=="all"){SR(I,X,f,b,M),Cx(f.attributes,(fe,ve)=>{const{name:De,value:Ie}=B1(ve,fe,b);if(f.remove_similar||q(Ie)||!Rn(M)||O1(I.getAttrib(M,De),Ie)){if(De==="class"){const Me=I.getAttrib(X,De);if(Me){let Re="";if(Fe(Me.split(/\s+/),qe=>{/mce\-\w+/.test(qe)&&(Re+=(Re?" ":"")+qe)}),Re){I.setAttrib(X,De,Re);return}}}if(HN.test(De)&&X.removeAttribute("data-mce-"+De),De==="style"&&Fi(["li"])(X)&&I.getStyle(X,"list-style-type")==="none"){X.removeAttribute(De),I.setStyle(X,"list-style-type","none");return}De==="class"&&X.removeAttribute("className"),X.removeAttribute(De)}}),Cx(f.classes,fe=>{fe=ic(fe,b),(!Rn(M)||I.hasClass(M,fe))&&I.removeClass(X,fe)});const de=I.getAttribs(X);for(let fe=0;fe<de.length;fe++){const ve=de[fe].nodeName;if(!F.isAttributeInternal(ve))return cf.keep()}}return f.remove!=="none"?(YN(s,X,f),cf.removed()):cf.keep()},qN=(s,f,b,C,M)=>{let I;return f.parentNode&&Fe(Zy(s.dom,f.parentNode).reverse(),F=>{if(!I&&Rn(F)&&F.id!=="_start"&&F.id!=="_end"){const Y=af(s,F,b,C,M);Y&&Y.split!==!1&&(I=F)}}),I},KN=(s,f,b,C)=>ZN(s,f,b,C,C).fold(Ee(C),M=>(s.dom.createFragment().appendChild(C),s.dom.rename(C,M)),Ee(null)),q5=(s,f,b,C,M,I,F,Y)=>{var X,ae;let de,fe;const ve=s.dom;if(b){const De=b.parentNode;for(let Ie=C.parentNode;Ie&&Ie!==De;Ie=Ie.parentNode){let Me=ve.clone(Ie,!1);for(let Re=0;Re<f.length&&(Me=KN(s,f[Re],Y,Me),Me!==null);Re++);Me&&(de&&Me.appendChild(de),fe||(fe=Me),de=Me)}I&&(!F.mixed||!ve.isBlock(b))&&(C=(X=ve.split(b,C))!==null&&X!==void 0?X:C),de&&fe&&((ae=M.parentNode)===null||ae===void 0||ae.insertBefore(de,M),fe.appendChild(M),Xi(F)&&yA(s,F,Y,de))}return C},K5=(s,f,b,C,M)=>{const I=s.formatter.get(f),F=I[0],Y=s.dom,X=s.selection,ae=Me=>{const Re=qN(s,Me,f,b,M);return q5(s,I,Re,Me,Me,!0,F,b)},de=Me=>bi(Me)&&Rn(Me)&&(Me.id==="_start"||Me.id==="_end"),fe=Me=>st(I,Re=>Ex(s,Re,b,Me,Me)),ve=Me=>{const Re=Cr(Me.childNodes),nt=fe(Me)||st(I,Ht=>bx(Y,Me,Ht)),tt=Me.parentNode;if(!nt&&re(tt)&&wS(F)&&fe(tt),F.deep&&Re.length)for(let Ht=0;Ht<Re.length;Ht++)ve(Re[Ht]);Fe(["underline","line-through","overline"],Ht=>{Rn(Me)&&s.dom.getStyle(Me,"text-decoration")===Ht&&Me.parentNode&&$E(Y,Me.parentNode)===Ht&&Ex(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ht}},void 0,Me)})},De=Me=>{const Re=Y.get(Me?"_start":"_end");if(Re){let qe=Re[Me?"firstChild":"lastChild"];return de(qe)&&(qe=qe[Me?"firstChild":"lastChild"]),Zt(qe)&&qe.data.length===0&&(qe=Me?Re.previousSibling||Re.nextSibling:Re.nextSibling||Re.previousSibling),Y.remove(Re,!0),qe}else return null},Ie=Me=>{let Re,qe,nt=th(Y,Me,I,Me.collapsed);if(F.split){if(nt=Fv(nt),Re=GN(s,nt,!0),qe=GN(s,nt),Re!==qe){if(Re=bR(Re,!0),qe=bR(qe,!1),_A(Y,Re,qe)){const gt=ue.from(Re.firstChild).getOr(Re);ae(WN(Y,gt,!0,"span",{id:"_start","data-mce-type":"bookmark"})),De(!0);return}if(_A(Y,qe,Re)){const gt=ue.from(qe.lastChild).getOr(qe);ae(WN(Y,gt,!1,"span",{id:"_end","data-mce-type":"bookmark"})),De(!1);return}Re=_R(Y,Re,"span",{id:"_start","data-mce-type":"bookmark"}),qe=_R(Y,qe,"span",{id:"_end","data-mce-type":"bookmark"});const tt=Y.createRng();tt.setStartAfter(Re),tt.setEndBefore(qe),Lv(Y,tt,gt=>{Fe(gt,Ht=>{!bi(Ht)&&!bi(Ht.parentNode)&&ae(Ht)})}),ae(Re),ae(qe),Re=De(!0),qe=De()}else Re=qe=ae(Re);nt.startContainer=Re.parentNode?Re.parentNode:Re,nt.startOffset=Y.nodeIndex(Re),nt.endContainer=qe.parentNode?qe.parentNode:qe,nt.endOffset=Y.nodeIndex(qe)+1}Lv(Y,nt,tt=>{Fe(tt,ve)})};if(C){if(jh(C)){const Me=Y.createRng();Me.setStartBefore(C),Me.setEndAfter(C),Ie(Me)}else Ie(C);sp(s,f,C,b);return}!X.isCollapsed()||!Xi(F)||ym(s).length?(RE(s,()=>bS(s,Ie),Me=>Xi(F)&&dA(s,f,b,Me)),s.nodeChanged()):LN(s,f,b,M),xR(s,f,b),sp(s,f,C,b)},XN=(s,f,b,C,M)=>{(C||s.selection.isEditable())&&K5(s,f,b,C,M)},Ex=(s,f,b,C,M)=>ZN(s,f,b,C,M).fold(Xe,I=>(s.dom.rename(C,I),!0),Be),JN=on.each,X5=(s,f,b,C)=>{const M=I=>{if(ou(I)&&Rn(I.parentNode)&&s.isEditable(I)){const F=$E(s,I.parentNode);s.getStyle(I,"color")&&F?s.setStyle(I,"text-decoration",F):s.getStyle(I,"text-decoration")===F&&s.setStyle(I,"text-decoration",null)}};f.styles&&(f.styles.color||f.styles.textDecoration)&&(on.walk(C,M,"childNodes"),M(C))},J5=(s,f,b,C)=>{if(f.styles&&f.styles.backgroundColor){const M=UN(s,"fontSize");yR(C,I=>M(I)&&s.isEditable(I),Cu(s,"backgroundColor",ic(f.styles.backgroundColor,b)))}},Q5=(s,f,b,C)=>{if(Xi(f)&&(f.inline==="sub"||f.inline==="sup")){const M=UN(s,"fontSize");yR(C,F=>M(F)&&s.isEditable(F),Cu(s,"fontSize",""));const I=mt(s.select(f.inline==="sup"?"sub":"sup",C),s.isEditable);s.remove(I,!0)}},ez=(s,f,b,C)=>{JN(f,M=>{Xi(M)&&JN(s.dom.select(M.inline,C),I=>{lf(I)&&Ex(s,M,b,I,M.exact?I:null)}),j5(s.dom,M,C)})},tz=(s,f,b,C,M)=>{const I=M.parentNode;af(s,I,b,C)&&Ex(s,f,C,M)||f.merge_with_parents&&I&&s.dom.getParent(I,F=>af(s,F,b,C)?(Ex(s,f,C,M),!0):!1)},SA=on.each,nz=(s,f,b,C)=>{if(oE(s)&&Xi(f)&&b.parentNode){const M=xw(s.schema),I=Io(Ve.fromDom(b),F=>hl(F.dom));return Is(M,C)&&Ai(Ve.fromDom(b.parentNode),!1)&&!I}else return!1},QN=(s,f,b,C)=>{if(SA(b.styles,(M,I)=>{s.setStyle(f,I,ic(M,C))}),b.styles){const M=s.getAttrib(f,"style");M&&s.setAttrib(f,"data-mce-style",M)}},eO=(s,f,b,C)=>{const M=s.formatter.get(f),I=M[0],F=!C&&s.selection.isCollapsed(),Y=s.dom,X=s.selection,ae=(Ie,Me=I)=>{he(Me.onformat)&&Me.onformat(Ie,Me,b,C),QN(Y,Ie,Me,b),SA(Me.attributes,(Re,qe)=>{Y.setAttrib(Ie,qe,ic(Re,b))}),SA(Me.classes,Re=>{const qe=ic(Re,b);Y.hasClass(Ie,qe)||Y.addClass(Ie,qe)})},de=(Ie,Me)=>{let Re=!1;return SA(Ie,qe=>fl(qe)?Y.getContentEditable(Me)==="false"&&!qe.ceFalseOverride||re(qe.collapsed)&&qe.collapsed!==F?!0:Y.is(Me,qe.selector)&&!hl(Me)?(ae(Me,qe),Re=!0,!1):!0:!1),Re},fe=Ie=>{if(V(Ie)){const Me=Y.create(Ie);return ae(Me),Me}else return null},ve=(Ie,Me,Re)=>{const qe=[];let nt=!0;const tt=I.inline||I.block,gt=fe(tt),Ht=At=>Dv(I)&&af(s,At,f,b),an=(At,St,Ut)=>{const $n=qy(I)&&ia(s.schema,At)&&eh(s,St,tt);return Ut&&$n},_n=(At,St,Ut,$n)=>{const Qn=At.nodeName.toLowerCase(),zr=eh(s,tt,Qn)&&eh(s,St,tt),Jr=!Re&&Zt(At)&&il(At.data),Uo=hl(At),ho=!Xi(I)||!Ie.isBlock(At);return(Ut||$n)&&zr&&!Jr&&!Uo&&ho};Lv(Ie,Me,At=>{let St;const Ut=$n=>{let Qn=!1,zr=nt,Jr=!1;const Uo=$n.parentNode,ho=Uo.nodeName.toLowerCase(),ki=Ie.getContentEditable($n);re(ki)&&(zr=nt,nt=ki==="true",Qn=!0,Jr=Mv(s,$n));const hs=nt&&!Qn;if(Ko($n)&&!nz(s,I,$n,ho)){St=null,bu(I)&&Ie.remove($n);return}if(Ht($n)){St=null;return}if(an($n,ho,hs)){const Ho=Ie.rename($n,tt);ae(Ho),qe.push(Ho),St=null;return}if(fl(I)){let Ho=de(M,$n);if(!Ho&&re(Uo)&&wS(I)&&(Ho=de(M,Uo)),!Xi(I)||Ho){St=null;return}}re(gt)&&_n($n,ho,hs,Jr)?(St||(St=Ie.clone(gt,!1),Uo.insertBefore(St,$n),qe.push(St)),Jr&&Qn&&(nt=zr),St.appendChild($n)):(St=null,Fe(Cr($n.childNodes),Ut),Qn&&(nt=zr),St=null)};Fe(At,Ut)}),I.links===!0&&Fe(qe,At=>{const St=Ut=>{Ut.nodeName==="A"&&ae(Ut,I),Fe(Cr(Ut.childNodes),St)};St(At)}),Fe(qe,At=>{const St=Qn=>{let zr=0;return Fe(Qn.childNodes,Jr=>{!Ic(Jr)&&!bi(Jr)&&zr++}),zr},Ut=Qn=>Ae(Qn.childNodes,_S).filter(Jr=>Ie.getContentEditable(Jr)!=="false"&&bx(Ie,Jr,I)).map(Jr=>{const Uo=Ie.clone(Jr,!1);return ae(Uo),Ie.replace(Uo,Qn,!0),Ie.remove(Jr,!0),Uo}).getOr(Qn),$n=St(At);if((qe.length>1||!Ie.isBlock(At))&&$n===0){Ie.remove(At,!0);return}(Xi(I)||bu(I)&&I.wrapper)&&(!I.exact&&$n===1&&(At=Ut(At)),ez(s,M,b,At),tz(s,I,f,b,At),J5(Ie,I,b,At),X5(Ie,I,b,At),Q5(Ie,I,b,At),yA(s,I,b,At))})},De=jh(C)?C:X.getNode();if(Y.getContentEditable(De)==="false"&&!Mv(s,De)){C=De,de(M,C),us(s,f,C,b);return}if(I){if(C)if(jh(C)){if(!de(M,C)){const Ie=Y.createRng();Ie.setStartBefore(C),Ie.setEndAfter(C),ve(Y,th(Y,Ie,M),!0)}}else ve(Y,C,!0);else!F||!Xi(I)||ym(s).length?(X.setRng(D1(X.getRng())),RE(s,()=>{bS(s,(Ie,Me)=>{const Re=Me?Ie:th(Y,Ie,M);ve(Y,Re,!1)})},Be),s.nodeChanged()):G5(s,f,b),gR(s.formatter,f).each(Ie=>{Fe(Y5(s.selection),Me=>QN(Y,Me,Ie,b))});mR(f,s)}us(s,f,C,b)},tO=(s,f,b,C)=>{(C||s.selection.isEditable())&&eO(s,f,b,C)},n0=s=>Vn(s,"vars"),rz=(s,f)=>{s.set({}),f.on("NodeChange",b=>{CR(f,b.element,s.get())}),f.on("FormatApply FormatRemove",b=>{const C=ue.from(b.node).map(M=>jh(M)?M:M.startContainer).bind(M=>Rn(M)?ue.some(M):ue.from(M.parentElement)).getOrThunk(()=>nO(f));CR(f,C,s.get())})},nO=s=>s.selection.getStart(),rO=(s,f,b,C,M)=>Le(f,Y=>{const X=s.formatter.matchNode(Y,b,M??{},C);return!te(X)},Y=>PN(s,Y,b)?!0:C?!1:re(s.formatter.matchNode(Y,b,M,!0))),oO=(s,f)=>{const b=f??nO(s);return mt(Zy(s.dom,b),C=>Rn(C)&&!iu(C))},CR=(s,f,b)=>{const C=oO(s,f);Ue(b,(M,I)=>{const F=Y=>{const X=rO(s,C,I,Y.similar,n0(Y)?Y.vars:void 0),ae=X.isSome();if(Y.state.get()!==ae){Y.state.set(ae);const de=X.getOr(f);n0(Y)?Y.callback(ae,{node:de,format:I,parents:C}):Fe(Y.callbacks,fe=>fe(ae,{node:de,format:I,parents:C}))}};Fe([M.withSimilar,M.withoutSimilar],F),Fe(M.withVars,F)})},oz=(s,f,b,C,M,I)=>{const F=f.get();Fe(b.split(","),Y=>{const X=Nr(F,Y).getOrThunk(()=>{const de={withSimilar:{state:Vi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Vi(!1),similar:!1,callbacks:[]},withVars:[]};return F[Y]=de,de}),ae=()=>{const de=oO(s);return rO(s,de,Y,M,I).isSome()};if(te(I)){const de=M?X.withSimilar:X.withoutSimilar;de.callbacks.push(C),de.callbacks.length===1&&de.state.set(ae())}else X.withVars.push({state:Vi(ae()),similar:M,vars:I,callback:C})}),f.set(F)},iz=(s,f,b)=>{const C=s.get();Fe(f.split(","),M=>Nr(C,M).each(I=>{C[M]={withSimilar:{...I.withSimilar,callbacks:mt(I.withSimilar.callbacks,F=>F!==b)},withoutSimilar:{...I.withoutSimilar,callbacks:mt(I.withoutSimilar.callbacks,F=>F!==b)},withVars:mt(I.withVars,F=>F.callback!==b)}})),s.set(C)},az=(s,f,b,C,M,I)=>(oz(s,f,b,C,M,I),{unbind:()=>iz(f,b,C)}),sz=(s,f,b,C)=>{const M=s.formatter.get(f);M&&(dA(s,f,b,C)&&(!("toggle"in M[0])||M[0].toggle)?XN(s,f,b,C):tO(s,f,b,C))},iO=on.explode,aO=()=>{const s={};return{addFilter:(M,I)=>{Fe(iO(M),F=>{Vn(s,F)||(s[F]={name:F,callbacks:[]}),s[F].callbacks.push(I)})},getFilters:()=>js(s),removeFilter:(M,I)=>{Fe(iO(M),F=>{if(Vn(s,F))if(re(I)){const Y=s[F],X=mt(Y.callbacks,ae=>ae!==I);X.length>0?Y.callbacks=X:delete s[F]}else delete s[F]})}}},lz=(s,f)=>{Fe(f,b=>{s.attr(b,null)})},cz=(s,f,b)=>{s.addNodeFilter("font",C=>{Fe(C,M=>{const I=f.parse(M.attr("style")),F=M.attr("color"),Y=M.attr("face"),X=M.attr("size");F&&(I.color=F),Y&&(I["font-family"]=Y),X&&ea(X).each(ae=>{I["font-size"]=b[ae-1]}),M.name="span",M.attr("style",f.serialize(I)),lz(M,["color","face","size"])})})},uz=(s,f,b)=>{s.addNodeFilter("strike",C=>{const M=f.type!=="html4";Fe(C,I=>{if(M)I.name="s";else{const F=b.parse(I.attr("style"));F["text-decoration"]="line-through",I.name="span",I.attr("style",b.serialize(F))}})})},dz=(s,f,b)=>{var C;const M=ay();f.convert_fonts_to_spans&&cz(s,M,on.explode((C=f.font_size_legacy_values)!==null&&C!==void 0?C:"")),uz(s,b,M)},wR=(s,f,b)=>{f.inline_styles&&dz(s,f,b)},ER=(s,f,b)=>{f.addNodeFilter("br",(C,M,I)=>{const F=on.extend({},b.getBlockElements()),Y=b.getNonEmptyElements(),X=b.getWhitespaceElements();F.body=1;const ae=de=>de.name in F||zd(b,de);for(let de=0,fe=C.length;de<fe;de++){let ve=C[de],De=ve.parent;if(De&&ae(De)&&ve===De.lastChild){let Ie=ve.prev;for(;Ie;){const Me=Ie.name;if(Me!=="span"||Ie.attr("data-mce-type")!=="bookmark"){Me==="br"&&(ve=null);break}Ie=Ie.prev}if(ve&&(ve.remove(),k1(b,Y,X,De))){const Me=b.getElementRule(De.name);Me&&(Me.removeEmpty?De.remove():Me.paddEmpty&&Qv(s,I,ae,De))}}else{let Ie=ve;for(;De&&De.firstChild===Ie&&De.lastChild===Ie&&(Ie=De,!F[De.name]);)De=De.parent;if(Ie===De){const Me=new Va("#text",3);Me.value=ko,ve.replace(Me)}}}})},SY=s=>fetch(s).then(f=>f.ok?f.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${s} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Tx=s=>{const f=/([a-z0-9+\/=\s]+)/i.exec(s);return f?f[1]:""},xA=s=>{const[f,...b]=s.split(","),C=b.join(","),M=/data:([^/]+\/[^;]+)(;.+)?/.exec(f);if(M){const I=M[2]===";base64",F=I?Tx(C):decodeURIComponent(C);return ue.some({type:M[1],data:F,base64Encoded:I})}else return ue.none()},F1=(s,f,b=!0)=>{let C=f;if(b)try{C=atob(f)}catch{return ue.none()}const M=new Uint8Array(C.length);for(let I=0;I<M.length;I++)M[I]=C.charCodeAt(I);return ue.some(new Blob([M],{type:s}))},Ax=s=>new Promise((f,b)=>{xA(s).bind(({type:C,data:M,base64Encoded:I})=>F1(C,M,I)).fold(()=>b("Invalid data URI"),f)}),sO=s=>Li(s,"blob:")?SY(s):Li(s,"data:")?Ax(s):Promise.reject("Unknown URI format"),hz=s=>new Promise((f,b)=>{const C=new FileReader;C.onloadend=()=>{f(C.result)},C.onerror=()=>{var M;b((M=C.error)===null||M===void 0?void 0:M.message)},C.readAsDataURL(s)});let fz=0;const xY=s=>(s||"blobid")+fz++,lO=(s,f,b)=>xA(s).bind(({data:C,type:M,base64Encoded:I})=>{if(f&&!I)return ue.none();{const F=I?C:btoa(C);return b(F,M)}}),cO=(s,f,b)=>{const C=s.create(xY(),f,b);return s.add(C),C},pz=(s,f,b=!1)=>lO(f,b,(C,M)=>ue.from(s.getByData(C,M)).orThunk(()=>F1(M,C).map(I=>cO(s,I,C)))),mz=(s,f)=>{const b=()=>Promise.reject("Invalid data URI");if(Li(f,"blob:")){const C=s.getByUri(f);return re(C)?Promise.resolve(C):sO(f).then(M=>hz(M).then(I=>lO(I,!1,F=>ue.some(cO(s,M,F))).getOrThunk(b)))}else return Li(f,"data:")?pz(s,f).fold(b,C=>Promise.resolve(C)):Promise.reject("Unknown image data format")},uO=s=>re(s.attr("data-mce-bogus")),gz=s=>s.attr("src")===bn.transparentSrc||re(s.attr("data-mce-placeholder")),dO=(s,f)=>{const{blob_cache:b}=f;if(b){const C=M=>{const I=M.attr("src");gz(M)||uO(M)||oe(I)||pz(b,I,!0).each(F=>{M.attr("src",F.blobUri())})};s.addAttributeFilter("src",M=>Fe(M,C))}},TR=(s,f)=>Li(s,`${f}/`),CA=(s,f,b,C,M)=>{let I;te(s)?I="iframe":TR(s,"image")?I="img":TR(s,"video")?I="video":TR(s,"audio")?I="audio":I="iframe";const F=new Va(I,1);return F.attr(I==="audio"?{src:f}:{src:f,width:b,height:C}),(I==="audio"||I==="video")&&F.attr("controls",""),I==="iframe"&&M&&F.attr("sandbox",""),F},hO=(s,f)=>{const b=s.schema;f.remove_trailing_brs&&ER(f,s,b),s.addAttributeFilter("href",M=>{let I=M.length;const F=X=>X.split(" ").filter(de=>de.length>0).concat(["noopener"]).sort().join(" "),Y=X=>{const ae=X?on.trim(X):"";return/\b(noopener)\b/g.test(ae)?ae:F(ae)};if(!f.allow_unsafe_link_target)for(;I--;){const X=M[I];X.name==="a"&&X.attr("target")==="_blank"&&X.attr("rel",Y(X.attr("rel")))}}),f.allow_html_in_named_anchor||s.addAttributeFilter("id,name",M=>{let I=M.length,F,Y,X,ae;for(;I--;)if(ae=M[I],ae.name==="a"&&ae.firstChild&&!ae.attr("href"))for(X=ae.parent,F=ae.lastChild;F&&X;)Y=F.prev,X.insert(F,ae),F=Y}),f.fix_list_elements&&s.addNodeFilter("ul,ol",M=>{let I=M.length,F,Y;for(;I--;)if(F=M[I],Y=F.parent,Y&&(Y.name==="ul"||Y.name==="ol"))if(F.prev&&F.prev.name==="li")F.prev.append(F);else{const X=new Va("li",1);X.attr("style","list-style-type: none"),F.wrap(X)}});const C=b.getValidClasses();f.validate&&C&&s.addAttributeFilter("class",M=>{var I;let F=M.length;for(;F--;){const Y=M[F],X=(I=Y.attr("class"))!==null&&I!==void 0?I:"",ae=on.explode(X," ");let de="";for(let fe=0;fe<ae.length;fe++){const ve=ae[fe];let De=!1,Ie=C["*"];Ie&&Ie[ve]&&(De=!0),Ie=C[Y.name],!De&&Ie&&Ie[ve]&&(De=!0),De&&(de&&(de+=" "),de+=ve)}de.length||(de=null),Y.attr("class",de)}}),dO(s,f),f.convert_unsafe_embeds&&s.addNodeFilter("object,embed",M=>Fe(M,I=>{I.replace(CA(I.attr("type"),I.name==="object"?I.attr("data"):I.attr("src"),I.attr("width"),I.attr("height"),f.sandbox_iframes))})),f.sandbox_iframes&&s.addNodeFilter("iframe",M=>Fe(M,I=>I.attr("sandbox","")))},{entries:ya,setPrototypeOf:vz,isFrozen:CY,getPrototypeOf:wY,getOwnPropertyDescriptor:EY}=Object;let{freeze:la,seal:Vc,create:Nm}=Object,{apply:uf,construct:AR}=typeof Reflect<"u"&&Reflect;uf||(uf=function(f,b,C){return f.apply(b,C)}),la||(la=function(f){return f}),Vc||(Vc=function(f){return f}),AR||(AR=function(f,b){return new f(...b)});const yz=md(Array.prototype.forEach),V1=md(Array.prototype.pop),df=md(Array.prototype.push),xp=md(String.prototype.toLowerCase),wA=md(String.prototype.toString),MR=md(String.prototype.match),pd=md(String.prototype.replace),fO=md(String.prototype.indexOf),bz=md(String.prototype.trim),wu=md(RegExp.prototype.test),z1=Sz(TypeError);function md(s){return function(f){for(var b=arguments.length,C=new Array(b>1?b-1:0),M=1;M<b;M++)C[M-1]=arguments[M];return uf(s,f,C)}}function Sz(s){return function(){for(var f=arguments.length,b=new Array(f),C=0;C<f;C++)b[C]=arguments[C];return AR(s,b)}}function jo(s,f,b){var C;b=(C=b)!==null&&C!==void 0?C:xp,vz&&vz(s,null);let M=f.length;for(;M--;){let I=f[M];if(typeof I=="string"){const F=b(I);F!==I&&(CY(f)||(f[M]=F),I=F)}s[I]=!0}return s}function U1(s){const f=Nm(null);for(const[b,C]of ya(s))f[b]=C;return f}function EA(s,f){for(;s!==null;){const C=EY(s,f);if(C){if(C.get)return md(C.get);if(typeof C.value=="function")return md(C.value)}s=wY(s)}function b(C){return console.warn("fallback value for",C),null}return b}const kR=la(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),DR=la(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),r0=la(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pO=la(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),PR=la(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mO=la(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gO=la(["#text"]),RR=la(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),IR=la(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vO=la(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Mx=la(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yO=Vc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bO=Vc(/<%[\w\W]*|[\w\W]*%>/gm),_O=Vc(/\${[\w\W]*}/gm),SO=Vc(/^data-[\-\w.\u00B7-\uFFFF]/),xO=Vc(/^aria-[\-\w]+$/),CO=Vc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xz=Vc(/^(?:\w+script|data):/i),Cz=Vc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),TA=Vc(/^html$/i);var H1=Object.freeze({__proto__:null,MUSTACHE_EXPR:yO,ERB_EXPR:bO,TMPLIT_EXPR:_O,DATA_ATTR:SO,ARIA_ATTR:xO,IS_ALLOWED_URI:CO,IS_SCRIPT_OR_DATA:xz,ATTR_WHITESPACE:Cz,DOCTYPE_NAME:TA});const wO=()=>typeof window>"u"?null:window,EO=function(f,b){if(typeof f!="object"||typeof f.createPolicy!="function")return null;let C=null;const M="data-tt-policy-suffix";b&&b.hasAttribute(M)&&(C=b.getAttribute(M));const I="dompurify"+(C?"#"+C:"");try{return f.createPolicy(I,{createHTML(F){return F},createScriptURL(F){return F}})}catch{return console.warn("TrustedTypes policy "+I+" could not be created."),null}};function kx(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wO();const f=qr=>kx(qr);if(f.version="3.0.5",f.removed=[],!s||!s.document||s.document.nodeType!==9)return f.isSupported=!1,f;const b=s.document,C=b.currentScript;let{document:M}=s;const{DocumentFragment:I,HTMLTemplateElement:F,Node:Y,Element:X,NodeFilter:ae,NamedNodeMap:de=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:fe,DOMParser:ve,trustedTypes:De}=s,Ie=X.prototype,Me=EA(Ie,"cloneNode"),Re=EA(Ie,"nextSibling"),qe=EA(Ie,"childNodes"),nt=EA(Ie,"parentNode");if(typeof F=="function"){const qr=M.createElement("template");qr.content&&qr.content.ownerDocument&&(M=qr.content.ownerDocument)}let tt,gt="";const{implementation:Ht,createNodeIterator:an,createDocumentFragment:_n,getElementsByTagName:At}=M,{importNode:St}=b;let Ut={};f.isSupported=typeof ya=="function"&&typeof nt=="function"&&Ht&&Ht.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$n,ERB_EXPR:Qn,TMPLIT_EXPR:zr,DATA_ATTR:Jr,ARIA_ATTR:Uo,IS_SCRIPT_OR_DATA:ho,ATTR_WHITESPACE:ki}=H1;let{IS_ALLOWED_URI:hs}=H1,Ho=null;const dn=jo({},[...kR,...DR,...r0,...PR,...gO]);let Hn=null;const bo=jo({},[...RR,...IR,...vO,...Mx]);let no=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Nn=null,vr=null,ln=!0,_r=!0,fo=!1,Jo=!0,Zo=!1,Ha=!1,Cd=!1,dc=!1,_l=!1,Ru=!1,Ar=!1,_o=!0,Qo=!1;const wi="user-content-";let gi=!0,Ul=!1,wd={},kp=null;const TM=jo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let kC=null;const AM=jo({},["audio","video","img","source","image","track"]);let Cb=null;const MM=jo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wb="http://www.w3.org/1998/Math/MathML",ig="http://www.w3.org/2000/svg",Ed="http://www.w3.org/1999/xhtml";let bh=Ed,Eb=!1,x0=null;const DC=jo({},[wb,ig,Ed],wA);let _h;const kM=["application/xhtml+xml","text/html"],PC="text/html";let Rs,C0=null;const S5=M.createElement("form"),DM=function(Ct){return Ct instanceof RegExp||Ct instanceof Function},RC=function(Ct){if(!(C0&&C0===Ct)){if((!Ct||typeof Ct!="object")&&(Ct={}),Ct=U1(Ct),_h=kM.indexOf(Ct.PARSER_MEDIA_TYPE)===-1?_h=PC:_h=Ct.PARSER_MEDIA_TYPE,Rs=_h==="application/xhtml+xml"?wA:xp,Ho="ALLOWED_TAGS"in Ct?jo({},Ct.ALLOWED_TAGS,Rs):dn,Hn="ALLOWED_ATTR"in Ct?jo({},Ct.ALLOWED_ATTR,Rs):bo,x0="ALLOWED_NAMESPACES"in Ct?jo({},Ct.ALLOWED_NAMESPACES,wA):DC,Cb="ADD_URI_SAFE_ATTR"in Ct?jo(U1(MM),Ct.ADD_URI_SAFE_ATTR,Rs):MM,kC="ADD_DATA_URI_TAGS"in Ct?jo(U1(AM),Ct.ADD_DATA_URI_TAGS,Rs):AM,kp="FORBID_CONTENTS"in Ct?jo({},Ct.FORBID_CONTENTS,Rs):TM,Nn="FORBID_TAGS"in Ct?jo({},Ct.FORBID_TAGS,Rs):{},vr="FORBID_ATTR"in Ct?jo({},Ct.FORBID_ATTR,Rs):{},wd="USE_PROFILES"in Ct?Ct.USE_PROFILES:!1,ln=Ct.ALLOW_ARIA_ATTR!==!1,_r=Ct.ALLOW_DATA_ATTR!==!1,fo=Ct.ALLOW_UNKNOWN_PROTOCOLS||!1,Jo=Ct.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zo=Ct.SAFE_FOR_TEMPLATES||!1,Ha=Ct.WHOLE_DOCUMENT||!1,_l=Ct.RETURN_DOM||!1,Ru=Ct.RETURN_DOM_FRAGMENT||!1,Ar=Ct.RETURN_TRUSTED_TYPE||!1,dc=Ct.FORCE_BODY||!1,_o=Ct.SANITIZE_DOM!==!1,Qo=Ct.SANITIZE_NAMED_PROPS||!1,gi=Ct.KEEP_CONTENT!==!1,Ul=Ct.IN_PLACE||!1,hs=Ct.ALLOWED_URI_REGEXP||CO,bh=Ct.NAMESPACE||Ed,no=Ct.CUSTOM_ELEMENT_HANDLING||{},Ct.CUSTOM_ELEMENT_HANDLING&&DM(Ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(no.tagNameCheck=Ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ct.CUSTOM_ELEMENT_HANDLING&&DM(Ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(no.attributeNameCheck=Ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ct.CUSTOM_ELEMENT_HANDLING&&typeof Ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(no.allowCustomizedBuiltInElements=Ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zo&&(_r=!1),Ru&&(_l=!0),wd&&(Ho=jo({},[...gO]),Hn=[],wd.html===!0&&(jo(Ho,kR),jo(Hn,RR)),wd.svg===!0&&(jo(Ho,DR),jo(Hn,IR),jo(Hn,Mx)),wd.svgFilters===!0&&(jo(Ho,r0),jo(Hn,IR),jo(Hn,Mx)),wd.mathMl===!0&&(jo(Ho,PR),jo(Hn,vO),jo(Hn,Mx))),Ct.ADD_TAGS&&(Ho===dn&&(Ho=U1(Ho)),jo(Ho,Ct.ADD_TAGS,Rs)),Ct.ADD_ATTR&&(Hn===bo&&(Hn=U1(Hn)),jo(Hn,Ct.ADD_ATTR,Rs)),Ct.ADD_URI_SAFE_ATTR&&jo(Cb,Ct.ADD_URI_SAFE_ATTR,Rs),Ct.FORBID_CONTENTS&&(kp===TM&&(kp=U1(kp)),jo(kp,Ct.FORBID_CONTENTS,Rs)),gi&&(Ho["#text"]=!0),Ha&&jo(Ho,["html","head","body"]),Ho.table&&(jo(Ho,["tbody"]),delete Nn.tbody),Ct.TRUSTED_TYPES_POLICY){if(typeof Ct.TRUSTED_TYPES_POLICY.createHTML!="function")throw z1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ct.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw z1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=Ct.TRUSTED_TYPES_POLICY,gt=tt.createHTML("")}else tt===void 0&&(tt=EO(De,C)),tt!==null&&typeof gt=="string"&&(gt=tt.createHTML(""));la&&la(Ct),C0=Ct}},_f=jo({},["mi","mo","mn","ms","mtext"]),Tb=jo({},["foreignobject","desc","title","annotation-xml"]),yt=jo({},["title","style","font","a","script"]),bt=jo({},DR);jo(bt,r0),jo(bt,pO);const cn=jo({},PR);jo(cn,mO);const Jt=function(Ct){let Fn=nt(Ct);(!Fn||!Fn.tagName)&&(Fn={namespaceURI:bh,tagName:"template"});const pr=xp(Ct.tagName),Zi=xp(Fn.tagName);return x0[Ct.namespaceURI]?Ct.namespaceURI===ig?Fn.namespaceURI===Ed?pr==="svg":Fn.namespaceURI===wb?pr==="svg"&&(Zi==="annotation-xml"||_f[Zi]):!!bt[pr]:Ct.namespaceURI===wb?Fn.namespaceURI===Ed?pr==="math":Fn.namespaceURI===ig?pr==="math"&&Tb[Zi]:!!cn[pr]:Ct.namespaceURI===Ed?Fn.namespaceURI===ig&&!Tb[Zi]||Fn.namespaceURI===wb&&!_f[Zi]?!1:!cn[pr]&&(yt[pr]||!bt[pr]):!!(_h==="application/xhtml+xml"&&x0[Ct.namespaceURI]):!1},jn=function(Ct){df(f.removed,{element:Ct});try{Ct.parentNode.removeChild(Ct)}catch{Ct.remove()}},Qr=function(Ct,Fn){try{df(f.removed,{attribute:Fn.getAttributeNode(Ct),from:Fn})}catch{df(f.removed,{attribute:null,from:Fn})}if(Fn.removeAttribute(Ct),Ct==="is"&&!Hn[Ct])if(_l||Ru)try{jn(Fn)}catch{}else try{Fn.setAttribute(Ct,"")}catch{}},Si=function(Ct){let Fn,pr;if(dc)Ct="<remove></remove>"+Ct;else{const jc=MR(Ct,/^[\r\n\t ]+/);pr=jc&&jc[0]}_h==="application/xhtml+xml"&&bh===Ed&&(Ct='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ct+"</body></html>");const Zi=tt?tt.createHTML(Ct):Ct;if(bh===Ed)try{Fn=new ve().parseFromString(Zi,_h)}catch{}if(!Fn||!Fn.documentElement){Fn=Ht.createDocument(bh,"template",null);try{Fn.documentElement.innerHTML=Eb?gt:Zi}catch{}}const Ys=Fn.body||Fn.documentElement;return Ct&&pr&&Ys.insertBefore(M.createTextNode(pr),Ys.childNodes[0]||null),bh===Ed?At.call(Fn,Ha?"html":"body")[0]:Ha?Fn.documentElement:Ys},Hl=function(Ct){return an.call(Ct.ownerDocument||Ct,Ct,ae.SHOW_ELEMENT|ae.SHOW_COMMENT|ae.SHOW_TEXT,null,!1)},fs=function(Ct){return Ct instanceof fe&&(typeof Ct.nodeName!="string"||typeof Ct.textContent!="string"||typeof Ct.removeChild!="function"||!(Ct.attributes instanceof de)||typeof Ct.removeAttribute!="function"||typeof Ct.setAttribute!="function"||typeof Ct.namespaceURI!="string"||typeof Ct.insertBefore!="function"||typeof Ct.hasChildNodes!="function")},w0=function(Ct){return typeof Y=="object"?Ct instanceof Y:Ct&&typeof Ct=="object"&&typeof Ct.nodeType=="number"&&typeof Ct.nodeName=="string"},Iu=function(Ct,Fn,pr){Ut[Ct]&&yz(Ut[Ct],Zi=>{Zi.call(f,Fn,pr,C0)})},x5=function(Ct){let Fn;if(Iu("beforeSanitizeElements",Ct,null),fs(Ct))return jn(Ct),!0;const pr=Rs(Ct.nodeName);if(Iu("uponSanitizeElement",Ct,{tagName:pr,allowedTags:Ho}),Ct.hasChildNodes()&&!w0(Ct.firstElementChild)&&(!w0(Ct.content)||!w0(Ct.content.firstElementChild))&&wu(/<[/\w]/g,Ct.innerHTML)&&wu(/<[/\w]/g,Ct.textContent))return jn(Ct),!0;if(!Ho[pr]||Nn[pr]){if(!Nn[pr]&&w5(pr)&&(no.tagNameCheck instanceof RegExp&&wu(no.tagNameCheck,pr)||no.tagNameCheck instanceof Function&&no.tagNameCheck(pr)))return!1;if(gi&&!kp[pr]){const Zi=nt(Ct)||Ct.parentNode,Ys=qe(Ct)||Ct.childNodes;if(Ys&&Zi){const jc=Ys.length;for(let Ga=jc-1;Ga>=0;--Ga)Zi.insertBefore(Me(Ys[Ga],!0),Re(Ct))}}return jn(Ct),!0}return Ct instanceof X&&!Jt(Ct)||(pr==="noscript"||pr==="noembed"||pr==="noframes")&&wu(/<\/no(script|embed|frames)/i,Ct.innerHTML)?(jn(Ct),!0):(Zo&&Ct.nodeType===3&&(Fn=Ct.textContent,Fn=pd(Fn,$n," "),Fn=pd(Fn,Qn," "),Fn=pd(Fn,zr," "),Ct.textContent!==Fn&&(df(f.removed,{element:Ct.cloneNode()}),Ct.textContent=Fn)),Iu("afterSanitizeElements",Ct,null),!1)},C5=function(Ct,Fn,pr){if(_o&&(Fn==="id"||Fn==="name")&&(pr in M||pr in S5))return!1;if(!(_r&&!vr[Fn]&&wu(Jr,Fn))){if(!(ln&&wu(Uo,Fn))){if(!Hn[Fn]||vr[Fn]){if(!(w5(Ct)&&(no.tagNameCheck instanceof RegExp&&wu(no.tagNameCheck,Ct)||no.tagNameCheck instanceof Function&&no.tagNameCheck(Ct))&&(no.attributeNameCheck instanceof RegExp&&wu(no.attributeNameCheck,Fn)||no.attributeNameCheck instanceof Function&&no.attributeNameCheck(Fn))||Fn==="is"&&no.allowCustomizedBuiltInElements&&(no.tagNameCheck instanceof RegExp&&wu(no.tagNameCheck,pr)||no.tagNameCheck instanceof Function&&no.tagNameCheck(pr))))return!1}else if(!Cb[Fn]){if(!wu(hs,pd(pr,ki,""))){if(!((Fn==="src"||Fn==="xlink:href"||Fn==="href")&&Ct!=="script"&&fO(pr,"data:")===0&&kC[Ct])){if(!(fo&&!wu(ho,pd(pr,ki,"")))){if(pr)return!1}}}}}}return!0},w5=function(Ct){return Ct.indexOf("-")>0},qL=function(Ct){let Fn,pr,Zi,Ys;Iu("beforeSanitizeAttributes",Ct,null);const{attributes:jc}=Ct;if(!jc)return;const Ga={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Hn};for(Ys=jc.length;Ys--;){Fn=jc[Ys];const{name:Td,namespaceURI:PM}=Fn;pr=Td==="value"?Fn.value:bz(Fn.value);const hY=pr;if(Zi=Rs(Td),Ga.attrName=Zi,Ga.attrValue=pr,Ga.keepAttr=!0,Ga.forceKeepAttr=void 0,Iu("uponSanitizeAttribute",Ct,Ga),pr=Ga.attrValue,Ga.forceKeepAttr)continue;if(!Ga.keepAttr){Qr(Td,Ct);continue}if(!Jo&&wu(/\/>/i,pr)){Qr(Td,Ct);continue}Zo&&(pr=pd(pr,$n," "),pr=pd(pr,Qn," "),pr=pd(pr,zr," "));const E5=Rs(Ct.nodeName);if(!C5(E5,Zi,pr)){Qr(Td,Ct);continue}if(Qo&&(Zi==="id"||Zi==="name")&&(Qr(Td,Ct),pr=wi+pr),tt&&typeof De=="object"&&typeof De.getAttributeType=="function"&&!PM)switch(De.getAttributeType(E5,Zi)){case"TrustedHTML":{pr=tt.createHTML(pr);break}case"TrustedScriptURL":{pr=tt.createScriptURL(pr);break}}if(pr!==hY)try{PM?Ct.setAttributeNS(PM,Td,pr):Ct.setAttribute(Td,pr)}catch{Qr(Td,Ct)}}Iu("afterSanitizeAttributes",Ct,null)},dY=function qr(Ct){let Fn;const pr=Hl(Ct);for(Iu("beforeSanitizeShadowDOM",Ct,null);Fn=pr.nextNode();)Iu("uponSanitizeShadowNode",Fn,null),!x5(Fn)&&(Fn.content instanceof I&&qr(Fn.content),qL(Fn));Iu("afterSanitizeShadowDOM",Ct,null)};return f.sanitize=function(qr){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fn,pr,Zi,Ys;if(Eb=!qr,Eb&&(qr="<!-->"),typeof qr!="string"&&!w0(qr))if(typeof qr.toString=="function"){if(qr=qr.toString(),typeof qr!="string")throw z1("dirty is not a string, aborting")}else throw z1("toString is not a function");if(!f.isSupported)return qr;if(Cd||RC(Ct),f.removed=[],typeof qr=="string"&&(Ul=!1),Ul){if(qr.nodeName){const Td=Rs(qr.nodeName);if(!Ho[Td]||Nn[Td])throw z1("root node is forbidden and cannot be sanitized in-place")}}else if(qr instanceof Y)Fn=Si("<!---->"),pr=Fn.ownerDocument.importNode(qr,!0),pr.nodeType===1&&pr.nodeName==="BODY"||pr.nodeName==="HTML"?Fn=pr:Fn.appendChild(pr);else{if(!_l&&!Zo&&!Ha&&qr.indexOf("<")===-1)return tt&&Ar?tt.createHTML(qr):qr;if(Fn=Si(qr),!Fn)return _l?null:Ar?gt:""}Fn&&dc&&jn(Fn.firstChild);const jc=Hl(Ul?qr:Fn);for(;Zi=jc.nextNode();)x5(Zi)||(Zi.content instanceof I&&dY(Zi.content),qL(Zi));if(Ul)return qr;if(_l){if(Ru)for(Ys=_n.call(Fn.ownerDocument);Fn.firstChild;)Ys.appendChild(Fn.firstChild);else Ys=Fn;return(Hn.shadowroot||Hn.shadowrootmode)&&(Ys=St.call(b,Ys,!0)),Ys}let Ga=Ha?Fn.outerHTML:Fn.innerHTML;return Ha&&Ho["!doctype"]&&Fn.ownerDocument&&Fn.ownerDocument.doctype&&Fn.ownerDocument.doctype.name&&wu(TA,Fn.ownerDocument.doctype.name)&&(Ga="<!DOCTYPE "+Fn.ownerDocument.doctype.name+`>
`+Ga),Zo&&(Ga=pd(Ga,$n," "),Ga=pd(Ga,Qn," "),Ga=pd(Ga,zr," ")),tt&&Ar?tt.createHTML(Ga):Ga},f.setConfig=function(qr){RC(qr),Cd=!0},f.clearConfig=function(){C0=null,Cd=!1},f.isValidAttribute=function(qr,Ct,Fn){C0||RC({});const pr=Rs(qr),Zi=Rs(Ct);return C5(pr,Zi,Fn)},f.addHook=function(qr,Ct){typeof Ct=="function"&&(Ut[qr]=Ut[qr]||[],df(Ut[qr],Ct))},f.removeHook=function(qr){if(Ut[qr])return V1(Ut[qr])},f.removeHooks=function(qr){Ut[qr]&&(Ut[qr]=[])},f.removeAllHooks=function(){Ut={}},f}var TO=kx();const AO=on.each,Om=on.trim,$R=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],MO={ftp:21,http:80,https:443,mailto:25},Dx=["img","video"],kO=(s,f)=>re(s)?!s:re(f)?!$e(Dx,f):!0,LR=s=>{try{return decodeURIComponent(s)}catch{return unescape(s)}},NR=(s,f,b)=>{const C=LR(f).replace(/\s/g,"");return s.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(C)?!0:s.allow_html_data_urls?!1:/^data:image\//i.test(C)?kO(s.allow_svg_data_urls,b)&&/^data:image\/svg\+xml/i.test(C):/^data:/i.test(C)};class Eu{static parseDataUri(f){let b;const C=decodeURIComponent(f).split(","),M=/data:([^;]+)/.exec(C[0]);return M&&(b=M[1]),{type:b,data:C[1]}}static isDomSafe(f,b,C={}){if(C.allow_script_urls)return!0;{const M=Nh.decode(f).replace(/[\s\u0000-\u001F]+/g,"");return!NR(C,M,b)}}static getDocumentBaseUrl(f){var b;let C;return f.protocol.indexOf("http")!==0&&f.protocol!=="file:"?C=(b=f.href)!==null&&b!==void 0?b:"":C=f.protocol+"//"+f.host+f.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(C)&&(C=C.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(C)||(C+="/")),C}constructor(f,b={}){this.path="",this.directory="",f=Om(f),this.settings=b;const C=b.base_uri,M=this;if(/^([\w\-]+):([^\/]{2})/i.test(f)||/^\s*#/.test(f)){M.source=f;return}const I=f.indexOf("//")===0;if(f.indexOf("/")===0&&!I&&(f=(C&&C.protocol||"http")+"://mce_host"+f),!/^[\w\-]*:?\/\//.test(f)){const Y=C?C.path:new Eu(document.location.href).directory;if((C==null?void 0:C.protocol)==="")f="//mce_host"+M.toAbsPath(Y,f);else{const X=/([^#?]*)([#?]?.*)/.exec(f);X&&(f=(C&&C.protocol||"http")+"://mce_host"+M.toAbsPath(Y,X[1])+X[2])}}f=f.replace(/@@/g,"(mce_at)");const F=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(f);F&&AO($R,(Y,X)=>{let ae=F[X];ae&&(ae=ae.replace(/\(mce_at\)/g,"@@")),M[Y]=ae}),C&&(M.protocol||(M.protocol=C.protocol),M.userInfo||(M.userInfo=C.userInfo),!M.port&&M.host==="mce_host"&&(M.port=C.port),(!M.host||M.host==="mce_host")&&(M.host=C.host),M.source=""),I&&(M.protocol="")}setPath(f){const b=/^(.*?)\/?(\w+)?$/.exec(f);b&&(this.path=b[0],this.directory=b[1],this.file=b[2]),this.source="",this.getURI()}toRelative(f){if(f==="./")return f;const b=new Eu(f,{base_uri:this});if(b.host!=="mce_host"&&this.host!==b.host&&b.host||this.port!==b.port||this.protocol!==b.protocol&&b.protocol!=="")return b.getURI();const C=this.getURI(),M=b.getURI();if(C===M||C.charAt(C.length-1)==="/"&&C.substr(0,C.length-1)===M)return C;let I=this.toRelPath(this.path,b.path);return b.query&&(I+="?"+b.query),b.anchor&&(I+="#"+b.anchor),I}toAbsolute(f,b){const C=new Eu(f,{base_uri:this});return C.getURI(b&&this.isSameOrigin(C))}isSameOrigin(f){if(this.host==f.host&&this.protocol==f.protocol){if(this.port==f.port)return!0;const b=this.protocol?MO[this.protocol]:null;if(b&&(this.port||b)==(f.port||b))return!0}return!1}toRelPath(f,b){let C=0,M="",I,F;const Y=f.substring(0,f.lastIndexOf("/")).split("/"),X=b.split("/");if(Y.length>=X.length){for(I=0,F=Y.length;I<F;I++)if(I>=X.length||Y[I]!==X[I]){C=I+1;break}}if(Y.length<X.length){for(I=0,F=X.length;I<F;I++)if(I>=Y.length||Y[I]!==X[I]){C=I+1;break}}if(C===1)return b;for(I=0,F=Y.length-(C-1);I<F;I++)M+="../";for(I=C-1,F=X.length;I<F;I++)I!==C-1?M+="/"+X[I]:M+=X[I];return M}toAbsPath(f,b){let C=0;const M=/\/$/.test(b)?"/":"",I=f.split("/"),F=b.split("/"),Y=[];AO(I,fe=>{fe&&Y.push(fe)});const X=[];for(let fe=F.length-1;fe>=0;fe--)if(!(F[fe].length===0||F[fe]===".")){if(F[fe]===".."){C++;continue}if(C>0){C--;continue}X.push(F[fe])}const ae=Y.length-C;let de;return ae<=0?de=xn(X).join("/"):de=Y.slice(0,ae).join("/")+"/"+xn(X).join("/"),de.indexOf("/")!==0&&(de="/"+de),M&&de.lastIndexOf("/")!==de.length-1&&(de+=M),de}getURI(f=!1){let b;return(!this.source||f)&&(b="",f||(this.protocol?b+=this.protocol+"://":b+="//",this.userInfo&&(b+=this.userInfo+"@"),this.host&&(b+=this.host),this.port&&(b+=":"+this.port)),this.path&&(b+=this.path),this.query&&(b+="?"+this.query),this.anchor&&(b+="#"+this.anchor),this.source=b),this.source}}const wz=on.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),OR="data-mce-type";let DO=0;const AA=(s,f,b,C,M)=>{var I,F,Y,X;const ae=f.validate,de=b.getSpecialElements();s.nodeType===R0&&!f.allow_conditional_comments&&/^\[if/i.test((I=s.nodeValue)!==null&&I!==void 0?I:"")&&(s.nodeValue=" "+s.nodeValue);const fe=(F=M==null?void 0:M.tagName)!==null&&F!==void 0?F:s.nodeName.toLowerCase();if(C!=="html"&&b.isValid(C)){re(M)&&(M.allowedTags[fe]=!0);return}if(s.nodeType!==Bu||fe==="body")return;const ve=Ve.fromDom(s),De=Os(ve,OR),Ie=ms(ve,"data-mce-bogus");if(!De&&V(Ie)){Ie==="all"?wo(ve):vc(ve);return}const Me=b.getElementRule(fe);if(ae&&!Me){Vn(de,fe)?wo(ve):vc(ve);return}else re(M)&&(M.allowedTags[fe]=!0);if(ae&&Me&&!De){if(Fe((Y=Me.attributesForced)!==null&&Y!==void 0?Y:[],Re=>{na(ve,Re.name,Re.value==="{$uid}"?`mce_${DO++}`:Re.value)}),Fe((X=Me.attributesDefault)!==null&&X!==void 0?X:[],Re=>{Os(ve,Re.name)||na(ve,Re.name,Re.value==="{$uid}"?`mce_${DO++}`:Re.value)}),Me.attributesRequired&&!st(Me.attributesRequired,Re=>Os(ve,Re))){vc(ve);return}if(Me.removeEmptyAttrs&&Vu(ve)){vc(ve);return}Me.outputName&&Me.outputName!==fe&&Ec(ve,Me.outputName)}},Ez=(s,f,b,C,M)=>{const I=s.tagName.toLowerCase(),{attrName:F,attrValue:Y}=M;M.keepAttr=BR(f,b,C,I,F,Y),M.keepAttr?(M.allowedAttributes[F]=!0,RO(F,b)&&(M.attrValue=F),f.allow_svg_data_urls&&Li(Y,"data:image/svg+xml")&&(M.forceKeepAttr=!0)):PO(s,F)&&(M.forceKeepAttr=!0)},BR=(s,f,b,C,M,I)=>b!=="html"&&!cu(C)?!0:!(M in wz&&NR(s,I,C))&&(!s.validate||f.isValid(C,M)||Li(M,"data-")||Li(M,"aria-")),PO=(s,f)=>s.hasAttribute(OR)&&(f==="id"||f==="class"||f==="style"),RO=(s,f)=>s in f.getBoolAttrs(),Tz=(s,f,b,C)=>{const{attributes:M}=s;for(let I=M.length-1;I>=0;I--){const F=M[I],Y=F.name,X=F.value;!BR(f,b,C,s.tagName.toLowerCase(),Y,X)&&!PO(s,Y)?s.removeAttribute(Y):RO(Y,b)&&s.setAttribute(Y,Y)}},Az=(s,f,b)=>{const C=TO();return C.addHook("uponSanitizeElement",(M,I)=>{AA(M,s,f,b.track(M),I)}),C.addHook("uponSanitizeAttribute",(M,I)=>{Ez(M,s,f,b.current(),I)}),C},Mz=(s,f)=>{const C={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return C.PARSER_MEDIA_TYPE=f,s.allow_script_urls?C.ALLOWED_URI_REGEXP=/.*/:s.allow_html_data_urls&&(C.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),C},kz=s=>{const f=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(C=>`xlink:${C}`),b={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:f};return TO().sanitize(s,b),s.innerHTML},Dz=(s,f)=>{const b=X0();if(s.sanitize){const C=Az(s,f,b);return{sanitizeHtmlElement:(I,F)=>{C.sanitize(I,Mz(s,F)),C.removed=[],b.reset()},sanitizeNamespaceElement:kz}}else return{sanitizeHtmlElement:(I,F)=>{const Y=document.createNodeIterator(I,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let X;for(;X=Y.nextNode();){const ae=b.track(X);AA(X,s,f,ae),Rn(X)&&Tz(X,s,f,ae)}b.reset()},sanitizeNamespaceElement:be}},IO=on.makeMap,$O=on.extend,Px=(s,f,b,C)=>{const M=s.name,I=M in b&&M!=="title"&&M!=="textarea",F=f.childNodes;for(let Y=0,X=F.length;Y<X;Y++){const ae=F[Y],de=new Va(ae.nodeName.toLowerCase(),ae.nodeType);if(Rn(ae)){const fe=ae.attributes;for(let ve=0,De=fe.length;ve<De;ve++){const Ie=fe[ve];de.attr(Ie.name,Ie.value)}cu(de.name)&&(C(ae),de.value=ae.innerHTML)}else Zt(ae)?(de.value=ae.data,I&&(de.raw=!0)):(Bd(ae)||dw(ae)||Cg(ae))&&(de.value=ae.data);cu(de.name)||Px(de,ae,b,C),s.append(de)}},Qs=(s,f,b)=>{const C=[];for(let M=s,I=M;M;I=M,M=M.walk()){const F=M;Fe(f,Y=>Y(F)),oe(F.parent)&&F!==s?M=I:C.push(F)}for(let M=C.length-1;M>=0;M--){const I=C[M];Fe(b,F=>F(I))}},Pz=(s,f,b,C)=>{const M=b.validate,I=f.getNonEmptyElements(),F=f.getWhitespaceElements(),Y=$O(IO("script,style,head,html,body,title,meta,param"),f.getBlockElements()),X=xw(f),ae=/[ \t\r\n]+/g,de=/^[ \t\r\n]+/,fe=/[ \t\r\n]+$/,ve=nt=>{let tt=nt.parent;for(;re(tt);){if(tt.name in F)return!0;tt=tt.parent}return!1},De=nt=>{let tt=nt;for(;re(tt);){if(tt.name in X)return k1(f,I,F,tt);tt=tt.parent}return!1},Ie=nt=>nt.name in Y||zd(f,nt)||cu(nt.name)&&nt.parent===s,Me=(nt,tt)=>{const gt=tt?nt.prev:nt.next;return re(gt)||oe(nt.parent)?!1:Ie(nt.parent)&&(nt.parent!==s||C.isRootContent===!0)};return[nt=>{var tt;if(nt.type===3&&!ve(nt)){let gt=(tt=nt.value)!==null&&tt!==void 0?tt:"";gt=gt.replace(ae," "),(jP(nt.prev,Ie)||Me(nt,!0))&&(gt=gt.replace(de,"")),gt.length===0?nt.remove():nt.value=gt}},nt=>{var tt;if(nt.type===1){const gt=f.getElementRule(nt.name);if(M&&gt){const Ht=k1(f,I,F,nt);gt.paddInEmptyBlock&&Ht&&De(nt)?Qv(b,C,Ie,nt):gt.removeEmpty&&Ht?Ie(nt)?nt.remove():nt.unwrap():gt.paddEmpty&&(Ht||mN(nt))&&Qv(b,C,Ie,nt)}}else if(nt.type===3&&!ve(nt)){let gt=(tt=nt.value)!==null&&tt!==void 0?tt:"";(nt.next&&Ie(nt.next)||Me(nt,!1))&&(gt=gt.replace(fe,"")),gt.length===0?nt.remove():nt.value=gt}}]},MA=(s,f)=>{var b;const C=(b=f.forced_root_block)!==null&&b!==void 0?b:s.forced_root_block;return C===!1?"":C===!0?"p":C},gd=(s={},f=Cc())=>{const b=aO(),C=aO(),M={validate:!0,root_name:"body",sanitize:!0,...s},I=new DOMParser,F=Dz(M,f),Y=(tt,gt,Ht="html")=>{const an=Ht==="xhtml"?"application/xhtml+xml":"text/html",_n=Vn(f.getSpecialElements(),gt.toLowerCase()),At=_n?`<${gt}>${tt}</${gt}>`:tt,St=Ht==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${At}</body></html>`:`<body>${At}</body>`,Ut=I.parseFromString(St,an).body;return F.sanitizeHtmlElement(Ut,an),_n?Ut.firstChild:Ut},X=b.addFilter,ae=b.getFilters,de=b.removeFilter,fe=C.addFilter,ve=C.getFilters,De=C.removeFilter,Ie=(tt,gt)=>{sA(f,tt)&&gt.push(tt)},Me=(tt,gt)=>{const Ht=V(gt.attr(OR)),an=gt.type===1&&!Vn(tt,gt.name)&&!zd(f,gt)&&!cu(gt.name);return gt.type===3||an&&!Ht},Re=(tt,gt)=>{const Ht=$O(IO("script,style,head,html,body,title,meta,param"),f.getBlockElements()),an=/^[ \t\r\n]+/,_n=/[ \t\r\n]+$/;let At=tt.firstChild,St=null;const Ut=$n=>{var Qn,zr;$n&&(At=$n.firstChild,At&&At.type===3&&(At.value=(Qn=At.value)===null||Qn===void 0?void 0:Qn.replace(an,"")),At=$n.lastChild,At&&At.type===3&&(At.value=(zr=At.value)===null||zr===void 0?void 0:zr.replace(_n,"")))};if(f.isValidChild(tt.name,gt.toLowerCase())){for(;At;){const $n=At.next;Me(Ht,At)?(St||(St=new Va(gt,1),St.attr(M.forced_root_block_attrs),tt.insert(St,At)),St.append(At)):(Ut(St),St=null),At=$n}Ut(St)}},nt={schema:f,addAttributeFilter:fe,getAttributeFilters:ve,removeAttributeFilter:De,addNodeFilter:X,getNodeFilters:ae,removeNodeFilter:de,parse:(tt,gt={})=>{var Ht;const an=M.validate,_n=(Ht=gt.context)!==null&&Ht!==void 0?Ht:M.root_name,At=Y(tt,_n,gt.format);Bf(f,At);const St=new Va(_n,11);Px(St,At,f.getSpecialElements(),F.sanitizeNamespaceElement),At.innerHTML="";const[Ut,$n]=Pz(St,f,M,gt),Qn=[],zr=an?ki=>Ie(ki,Qn):be,Jr={nodes:{},attributes:{}},Uo=ki=>rf(ae(),ve(),ki,Jr);if(Qs(St,[Ut,Uo],[$n,zr]),Qn.reverse(),an&&Qn.length>0)if(gt.context){const{pass:ki,fail:hs}=Gt(Qn,Ho=>Ho.parent===St);aA(hs,f,St,Uo),gt.invalid=ki.length>0}else aA(Qn,f,St,Uo);const ho=MA(M,gt);return ho&&(St.name==="body"||gt.isRootContent)&&Re(St,ho),gt.invalid||hh(Jr,gt),St}};return hO(nt,M),wR(nt,M,f),nt},LO=s=>uA(s)?Jh({validate:!1}).serialize(s):s,Bl=(s,f,b)=>{const C=LO(s),M=f(C);if(M.isDefaultPrevented())return M;if(uA(s))if(M.content!==C){const I=gd({validate:!1,forced_root_block:!1,...b}).parse(M.content,{context:s.name});return{...M,content:I}}else return{...M,content:s};else return M},Bm=(s,f)=>{if(f.no_events)return Us.value(f);{const b=ID(s,f);return b.isDefaultPrevented()?Us.error(eo(s,{content:"",...b}).content):Us.value(b)}},FR=(s,f,b)=>b.no_events?f:Bl(f,M=>eo(s,{...b,content:M}),{sanitize:lm(s),sandbox_iframes:Jf(s)}).content,VR=(s,f)=>{if(f.no_events)return Us.value(f);{const b=Bl(f.content,C=>dN(s,{...f,content:C}),{sanitize:lm(s),sandbox_iframes:Jf(s)});return b.isDefaultPrevented()?(YE(s,b),Us.error(void 0)):Us.value(b)}},kA=(s,f,b)=>{b.no_events||YE(s,{...b,content:f})},zR=(s,f,b)=>({element:s,width:f,rows:b}),UR=(s,f)=>({element:s,cells:f}),Rx=(s,f)=>({x:s,y:f}),DA=(s,f)=>Fu(s,f).bind(ea).getOr(1),Rz=(s,f,b,C,M)=>{const I=DA(M,"rowspan"),F=DA(M,"colspan"),Y=s.rows;for(let X=b;X<b+I;X++){Y[X]||(Y[X]=UR(fy(C),[]));for(let ae=f;ae<f+F;ae++){const de=Y[X].cells;de[ae]=X===b&&ae===f?M:Rl(M)}}},OO=(s,f,b)=>{const C=s.rows;return!!(C[b]?C[b].cells:[])[f]},Iz=(s,f,b)=>{for(;OO(s,f,b);)f++;return f},PA=s=>Bn(s,(f,b)=>b.cells.length>f?b.cells.length:f,0),RA=(s,f)=>{const b=s.rows;for(let C=0;C<b.length;C++){const M=b[C].cells;for(let I=0;I<M.length;I++)if(Bo(M[I],f))return ue.some(Rx(I,C))}return ue.none()},BO=(s,f,b,C,M)=>{const I=[],F=s.rows;for(let Y=b;Y<=M;Y++){const X=F[Y].cells,ae=f<C?X.slice(f,C+1):X.slice(C,f+1);I.push(UR(F[Y].element,ae))}return I},$z=(s,f,b)=>{const C=f.x,M=f.y,I=b.x,F=b.y,Y=M<F?BO(s,C,M,I,F):BO(s,C,F,I,M);return zR(s.element,PA(Y),Y)},hf=(s,f)=>{const b=Rl(s.element),C=Ve.fromTag("tbody");return ci(C,f),Ki(b,C),b},HR=s=>et(s.rows,f=>{const b=et(f.cells,M=>{const I=fy(M);return da(I,"colspan"),da(I,"rowspan"),I}),C=Rl(f.element);return ci(C,b),C}),Lz=s=>{const f=zR(Rl(s),0,[]);return Fe(fa(s,"tr"),(b,C)=>{Fe(fa(b,"td,th"),(M,I)=>{Rz(f,Iz(f,I,C),C,b,M)})}),zR(f.element,PA(f.rows),f.rows)},IA=s=>hf(s,HR(s)),GR=(s,f,b)=>RA(s,f).bind(C=>RA(s,b).map(M=>$z(s,C,M))),FO=s=>Ae(s,f=>Co(f)==="ul"||Co(f)==="ol"),VO=(s,f)=>Ae(s,b=>Co(b)==="li"&&vS(b,f)).fold(Ee([]),b=>FO(s).map(C=>{const M=Ve.fromTag(Co(C)),I=qo(ja(C),(F,Y)=>Li(Y,"list-style"));return F0(M,I),[Ve.fromTag("li"),M]}).getOr([])),zO=(s,f)=>{const b=Bn(f,(C,M)=>(Ki(M,C),M),s);return f.length>0?o1([b]):b},Nz=s=>Rf(s)?Kl(s).filter(ol).fold(Ee([]),f=>[s,f]):ol(s)?[s]:[],Oz=(s,f,b)=>{const C=Ve.fromDom(f.commonAncestorContainer),M=dd(C,s),I=mt(M,X=>b.isWrapper(Co(X))),F=VO(M,f),Y=I.concat(F.length?F:Nz(C));return et(Y,Rl)},UO=()=>o1([]),Bz=(s,f,b)=>zO(Ve.fromDom(f.cloneContents()),Oz(s,f,b)),Fz=(s,f)=>pc(f,"table",Te(Bo,s)),HO=(s,f)=>Fz(s,f[0]).bind(b=>{const C=f[0],M=f[f.length-1],I=Lz(b);return GR(I,C,M).map(F=>o1([IA(F)]))}).getOrThunk(UO),Vz=(s,f,b)=>f.length>0&&f[0].collapsed?UO():Bz(s,f[0],b),zz=(s,f,b)=>{const C=SD(f,s);return C.length>0?HO(s,C):Vz(s,f,b)},$A=(s,f)=>f>=0&&f<s.length&&vm(s.charAt(f)),WR=s=>Al(s.innerText),YR=s=>s.map(f=>f.nodeName).getOr("div").toLowerCase(),jR=s=>ue.from(s.selection.getRng()).map(f=>{var b;const C=ue.from(s.dom.getParent(f.commonAncestorContainer,s.dom.isBlock)),M=s.getBody(),I=YR(C),F=Ve.fromDom(f.cloneContents());Dr(F),b1(F);const Y=s.dom.add(M,I,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},F.dom),X=WR(Y),ae=Al((b=Y.textContent)!==null&&b!==void 0?b:"");if(s.dom.remove(Y),$A(ae,0)||$A(ae,ae.length-1)){const de=C.getOr(M),fe=WR(de),ve=fe.indexOf(X);if(ve===-1)return X;{const De=$A(fe,ve-1),Ie=$A(fe,ve+X.length);return(De?" ":"")+X+(Ie?" ":"")}}else return X}).getOr(""),GO=(s,f)=>{const b=s.selection.getRng(),C=s.dom.create("body"),M=s.selection.getSel(),I=Gv(s,ME(M)),F=f.contextual?zz(Ve.fromDom(s.getBody()),I,s.schema).dom:b.cloneContents();return F&&C.appendChild(F),s.selection.serializer.serialize(C,f)},ZR=(s,f)=>{if(f.format==="text")return jR(s);{const b=GO(s,f);return f.format==="tree"?b:s.selection.isCollapsed()?"":b}},WO=(s,f)=>({...s,format:f,get:!0,selection:!0,getInner:!0}),YO=(s,f,b={})=>{const C=WO(b,f);return Bm(s,C).fold(Ge,M=>{const I=ZR(s,M);return FR(s,I,M)})},Ix=0,qR=1,KR=2,jO=(s,f)=>{const b=s.length+f.length+2,C=new Array(b),M=new Array(b),I=(de,fe,ve)=>({start:de,end:fe,diag:ve}),F=(de,fe,ve,De,Ie)=>{const Me=X(de,fe,ve,De);if(Me===null||Me.start===fe&&Me.diag===fe-De||Me.end===de&&Me.diag===de-ve){let Re=de,qe=ve;for(;Re<fe||qe<De;)Re<fe&&qe<De&&s[Re]===f[qe]?(Ie.push([Ix,s[Re]]),++Re,++qe):fe-de>De-ve?(Ie.push([KR,s[Re]]),++Re):(Ie.push([qR,f[qe]]),++qe)}else{F(de,Me.start,ve,Me.start-Me.diag,Ie);for(let Re=Me.start;Re<Me.end;++Re)Ie.push([Ix,s[Re]]);F(Me.end,fe,Me.end-Me.diag,De,Ie)}},Y=(de,fe,ve,De)=>{let Ie=de;for(;Ie-fe<De&&Ie<ve&&s[Ie]===f[Ie-fe];)++Ie;return I(de,Ie,fe)},X=(de,fe,ve,De)=>{const Ie=fe-de,Me=De-ve;if(Ie===0||Me===0)return null;const Re=Ie-Me,qe=Me+Ie,nt=(qe%2===0?qe:qe+1)/2;C[1+nt]=de,M[1+nt]=fe+1;let tt,gt,Ht,an,_n;for(tt=0;tt<=nt;++tt){for(gt=-tt;gt<=tt;gt+=2){for(Ht=gt+nt,gt===-tt||gt!==tt&&C[Ht-1]<C[Ht+1]?C[Ht]=C[Ht+1]:C[Ht]=C[Ht-1]+1,an=C[Ht],_n=an-de+ve-gt;an<fe&&_n<De&&s[an]===f[_n];)C[Ht]=++an,++_n;if(Re%2!==0&&Re-tt<=gt&&gt<=Re+tt&&M[Ht-Re]<=C[Ht])return Y(M[Ht-Re],gt+de-ve,fe,De)}for(gt=Re-tt;gt<=Re+tt;gt+=2){for(Ht=gt+nt-Re,gt===Re-tt||gt!==Re+tt&&M[Ht+1]<=M[Ht-1]?M[Ht]=M[Ht+1]-1:M[Ht]=M[Ht-1],an=M[Ht]-1,_n=an-de+ve-gt;an>=de&&_n>=ve&&s[an]===f[_n];)M[Ht]=an--,_n--;if(Re%2===0&&-tt<=gt&&gt<=tt&&M[Ht]<=C[Ht+Re])return Y(M[Ht],gt+de-ve,fe,De)}}return null},ae=[];return F(0,s.length,0,f.length,ae),ae},XR=s=>Rn(s)?s.outerHTML:Zt(s)?Nh.encodeRaw(s.data,!1):Bd(s)?"<!--"+s.data+"-->":"",JR=s=>{let f;const b=document.createElement("div"),C=document.createDocumentFragment();for(s&&(b.innerHTML=s);f=b.firstChild;)C.appendChild(f);return C},Uz=(s,f,b)=>{const C=JR(f);if(s.hasChildNodes()&&b<s.childNodes.length){const M=s.childNodes[b];s.insertBefore(C,M)}else s.appendChild(C)},LA=(s,f)=>{if(s.hasChildNodes()&&f<s.childNodes.length){const b=s.childNodes[f];s.removeChild(b)}},Hz=(s,f)=>{let b=0;Fe(s,C=>{C[0]===Ix?b++:C[0]===qR?(Uz(f,C[1],b),b++):C[0]===KR&&LA(f,b)})},Gz=(s,f)=>mt(et(Cr(s.childNodes),f?Q(Al,XR):XR),b=>b.length>0),Wz=(s,f)=>{const b=et(Cr(f.childNodes),XR);return Hz(jO(b,s),f),f},ZO=zt(()=>document.implementation.createHTMLDocument("undo")),qO=s=>s.querySelector("iframe")!==null,Yz=s=>({type:"fragmented",fragments:s,content:"",bookmark:null,beforeBookmark:null}),jz=s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}),NA=s=>{const f=s.serializer.getTempAttrs(),b=IT(s.getBody(),f);return qO(b)?Yz(Gz(b,!0)):jz(Al(b.innerHTML))},QR=(s,f,b)=>{const C=b?f.beforeBookmark:f.bookmark;f.type==="fragmented"?Wz(f.fragments,s.getBody()):s.setContent(f.content,{format:"raw",no_selection:re(C)&&nc(C)?!C.isFakeCaret:!0}),C&&(s.selection.moveToBookmark(C),s.selection.scrollIntoView())},eI=s=>s.type==="fragmented"?s.fragments.join(""):s.content,tI=s=>{const f=Ve.fromTag("body",ZO());return U0(f,eI(s)),Fe(fa(f,"*[data-mce-bogus]"),vc),z0(f)},TY=(s,f)=>eI(s)===eI(f),Zz=(s,f)=>tI(s)===tI(f),nI=(s,f)=>!s||!f?!1:TY(s,f)?!0:Zz(s,f),rI=s=>s.get()===0,OA=(s,f,b)=>{rI(b)&&(s.typing=f)},KO=(s,f)=>{s.typing&&(OA(s,!1,f),s.add())},qz=s=>{s.typing&&(s.typing=!1,s.add())},Kz=(s,f,b)=>{rI(f)&&b.set(B_(s.selection))},XO=(s,f,b,C,M,I,F)=>{const Y=NA(s),X=on.extend(I||{},Y);if(!rI(C)||s.removed)return null;const ae=f.data[b.get()];if(s.dispatch("BeforeAddUndo",{level:X,lastLevel:ae,originalEvent:F}).isDefaultPrevented()||ae&&nI(ae,X))return null;f.data[b.get()]&&M.get().each(ve=>{f.data[b.get()].beforeBookmark=ve});const de=Dy(s);if(de&&f.data.length>de){for(let ve=0;ve<f.data.length-1;ve++)f.data[ve]=f.data[ve+1];f.data.length--,b.set(f.data.length)}X.bookmark=B_(s.selection),b.get()<f.data.length-1&&(f.data.length=b.get()+1),f.data.push(X),b.set(f.data.length-1);const fe={level:X,lastLevel:ae,originalEvent:F};return b.get()>0?(s.setDirty(!0),s.dispatch("AddUndo",fe),s.dispatch("change",fe)):s.dispatch("AddUndo",fe),X},Xz=(s,f,b)=>{f.data=[],b.set(0),f.typing=!1,s.dispatch("ClearUndos")},Jz=(s,f,b,C,M)=>{if(f.transact(C)){const I=f.data[b.get()].bookmark,F=f.data[b.get()-1];QR(s,F,!0),f.transact(M)&&(f.data[b.get()-1].beforeBookmark=I)}},Qz=(s,f,b)=>{let C;return f.get()<b.length-1&&(f.set(f.get()+1),C=b[f.get()],QR(s,C,!1),s.setDirty(!0),s.dispatch("Redo",{level:C})),C},e6=(s,f,b,C)=>{let M;return f.typing&&(f.add(),f.typing=!1,OA(f,!1,b)),C.get()>0&&(C.set(C.get()-1),M=f.data[C.get()],QR(s,M,!0),s.setDirty(!0),s.dispatch("Undo",{level:M})),M},t6=s=>{s.clear(),s.add()},AY=(s,f,b)=>b.get()>0||f.typing&&f.data[0]&&!nI(NA(s),f.data[0]),MY=(s,f)=>f.get()<s.data.length-1&&!s.typing,n6=(s,f,b)=>(KO(s,f),s.beforeChange(),s.ignore(b),s.add()),r6=(s,f)=>{try{s.set(s.get()+1),f()}finally{s.set(s.get()-1)}},kY=(s,f)=>{const b=s.dom,C=re(f)?f:s.getBody();Fe(b.select("table,a",C),M=>{switch(M.nodeName){case"TABLE":const I=sE(s),F=b.getAttrib(M,"border");(!F||F==="0")&&s.hasVisual?b.addClass(M,I):b.removeClass(M,I);break;case"A":if(!b.getAttrib(M,"href")){const Y=b.getAttrib(M,"name")||M.id,X=dv(s);Y&&s.hasVisual?b.addClass(M,X):b.removeClass(M,X)}break}}),s.dispatch("VisualAid",{element:f,hasVisual:s.hasVisual})},JO=s=>({init:{bindEvents:be},undoManager:{beforeChange:(f,b)=>Kz(s,f,b),add:(f,b,C,M,I,F)=>XO(s,f,b,C,M,I,F),undo:(f,b,C)=>e6(s,f,b,C),redo:(f,b)=>Qz(s,f,b),clear:(f,b)=>Xz(s,f,b),reset:f=>t6(f),hasUndo:(f,b)=>AY(s,f,b),hasRedo:(f,b)=>MY(f,b),transact:(f,b,C)=>n6(f,b,C),ignore:(f,b)=>r6(f,b),extra:(f,b,C,M)=>Jz(s,f,b,C,M)},formatter:{match:(f,b,C,M)=>dA(s,f,b,C,M),matchAll:(f,b)=>U5(s,f,b),matchNode:(f,b,C,M)=>af(s,f,b,C,M),canApply:f=>RN(s,f),closest:f=>e0(s,f),apply:(f,b,C)=>tO(s,f,b,C),remove:(f,b,C,M)=>XN(s,f,b,C,M),toggle:(f,b,C)=>sz(s,f,b,C),formatChanged:(f,b,C,M,I)=>az(s,f,b,C,M,I)},editor:{getContent:f=>pN(s,f),setContent:(f,b)=>kN(s,f,b),insertContent:(f,b)=>MN(s,f,b),addVisual:f=>kY(s,f)},selection:{getContent:(f,b)=>YO(s,f,b)},autocompleter:{addDecoration:f=>TT(s,f),removeDecoration:()=>SP(s,Ve.fromDom(s.getBody()))},raw:{getModel:()=>ue.none()}}),zi=s=>{const f=ae=>j(ae)?ae:{},{init:b,undoManager:C,formatter:M,editor:I,selection:F,autocompleter:Y,raw:X}=s;return{init:{bindEvents:b.bindEvents},undoManager:{beforeChange:C.beforeChange,add:C.add,undo:C.undo,redo:C.redo,clear:C.clear,reset:C.reset,hasUndo:C.hasUndo,hasRedo:C.hasRedo,transact:(ae,de,fe)=>C.transact(fe),ignore:(ae,de)=>C.ignore(de),extra:(ae,de,fe,ve)=>C.extra(fe,ve)},formatter:{match:(ae,de,fe,ve)=>M.match(ae,f(de),ve),matchAll:M.matchAll,matchNode:M.matchNode,canApply:ae=>M.canApply(ae),closest:ae=>M.closest(ae),apply:(ae,de,fe)=>M.apply(ae,f(de)),remove:(ae,de,fe,ve)=>M.remove(ae,f(de)),toggle:(ae,de,fe)=>M.toggle(ae,f(de)),formatChanged:(ae,de,fe,ve,De)=>M.formatChanged(de,fe,ve,De)},editor:{getContent:ae=>I.getContent(ae),setContent:(ae,de)=>({content:I.setContent(ae,de),html:""}),insertContent:(ae,de)=>(I.insertContent(ae),""),addVisual:I.addVisual},selection:{getContent:(ae,de)=>F.getContent(de)},autocompleter:{addDecoration:Y.addDecoration,removeDecoration:Y.removeDecoration},raw:{getModel:()=>ue.some(X.getRawModel())}}},oI=()=>{const s=Ee(null),f=Ee("");return{init:{bindEvents:be},undoManager:{beforeChange:be,add:s,undo:s,redo:s,clear:be,reset:be,hasUndo:Xe,hasRedo:Xe,transact:s,ignore:be,extra:be},formatter:{match:Xe,matchAll:Ee([]),matchNode:Ee(void 0),canApply:Xe,closest:f,apply:be,remove:be,toggle:be,formatChanged:Ee({unbind:be})},editor:{getContent:f,setContent:Ee({content:"",html:""}),insertContent:Ee(""),addVisual:be},selection:{getContent:f},autocompleter:{addDecoration:be,removeDecoration:be},raw:{getModel:Ee(ue.none())}}},Cp=s=>Vn(s.plugins,"rtc"),o6=s=>Nr(s.plugins,"rtc").bind(f=>ue.from(f.setup)),i6=s=>{const f=s;return o6(s).fold(()=>(f.rtcInstance=JO(s),ue.none()),b=>(f.rtcInstance=oI(),ue.some(()=>b().then(C=>(f.rtcInstance=zi(C),C.rtc.isRemote)))))},Fm=s=>s.rtcInstance?s.rtcInstance:JO(s),Ta=s=>{const f=s.rtcInstance;if(f)return f;throw new Error("Failed to get RTC instance not yet initialized.")},DY=(s,f,b)=>{Ta(s).undoManager.beforeChange(f,b)},Ds=(s,f,b,C,M,I,F)=>Ta(s).undoManager.add(f,b,C,M,I,F),QO=(s,f,b,C)=>Ta(s).undoManager.undo(f,b,C),eB=(s,f,b)=>Ta(s).undoManager.redo(f,b),tB=(s,f,b)=>{Ta(s).undoManager.clear(f,b)},a6=(s,f)=>{Ta(s).undoManager.reset(f)},s6=(s,f,b)=>Ta(s).undoManager.hasUndo(f,b),BA=(s,f,b)=>Ta(s).undoManager.hasRedo(f,b),l6=(s,f,b,C)=>Ta(s).undoManager.transact(f,b,C),iI=(s,f,b)=>{Ta(s).undoManager.ignore(f,b)},c6=(s,f,b,C,M)=>{Ta(s).undoManager.extra(f,b,C,M)},nB=(s,f,b,C,M)=>Ta(s).formatter.match(f,b,C,M),rB=(s,f,b)=>Ta(s).formatter.matchAll(f,b),aI=(s,f,b,C,M)=>Ta(s).formatter.matchNode(f,b,C,M),oB=(s,f)=>Ta(s).formatter.canApply(f),sI=(s,f)=>Ta(s).formatter.closest(f),u6=(s,f,b,C)=>{Ta(s).formatter.apply(f,b,C)},d6=(s,f,b,C,M)=>{Ta(s).formatter.remove(f,b,C,M)},h6=(s,f,b,C)=>{Ta(s).formatter.toggle(f,b,C)},Tu=(s,f,b,C,M,I)=>Ta(s).formatter.formatChanged(f,b,C,M,I),f6=(s,f)=>Fm(s).editor.getContent(f),p6=(s,f,b)=>Fm(s).editor.setContent(f,b),m6=(s,f,b)=>Fm(s).editor.insertContent(f,b),g6=(s,f,b)=>Ta(s).selection.getContent(f,b),v6=(s,f)=>Ta(s).editor.addVisual(f),lI=s=>Ta(s).init.bindEvents(),y6=(s,f)=>Ta(s).autocompleter.addDecoration(f),b6=s=>Ta(s).autocompleter.removeDecoration(),_6=(s,f={})=>{const b=f.format?f.format:"html";return g6(s,b,f)},$x=s=>s.dom.length===0?(wo(s),ue.none()):ue.some(s),S6=(s,f)=>s.filter(b=>ap.isBookmarkNode(b.dom)).bind(f?gg:tu),x6=(s,f,b,C,M)=>{const I=s.dom,F=f.dom,Y=C?I.length:F.length;C?(sa(I,F,M,!1,!C),b.setStart(F,Y)):(sa(F,I,M,!1,!C),b.setEnd(F,Y))},iB=(s,f,b)=>{Kl(s).each(C=>{const M=s.dom;f&&Rm(C,kt(M,0),b)?tf(M,0,b):!f&&Im(C,kt(M,M.length),b)&&T1(M,M.length,b)})},FA=(s,f,b,C,M)=>{s.bind(I=>((C?T1:tf)(I.dom,C?I.dom.length:0,M),f.filter(ql).map(Y=>x6(I,Y,b,C,M)))).orThunk(()=>S6(f,C).or(f).filter(ql).map(F=>iB(F,C,M)))},C6=(s,f,b)=>{const C=ue.from(f.firstChild).map(Ve.fromDom),M=ue.from(f.lastChild).map(Ve.fromDom);s.deleteContents(),s.insertNode(f);const I=C.bind(tu).filter(ql).bind($x),F=M.bind(gg).filter(ql).bind($x);FA(I,C,s,!0,b),FA(F,M,s,!1,b),s.collapse(!1)},w6=(s,f)=>({format:"html",...s,set:!0,selection:!0,content:f}),PY=(s,f)=>{if(f.format!=="raw"){const b=s.selection.getRng(),C=s.dom.getParent(b.commonAncestorContainer,s.dom.isBlock),M=C?{context:C.nodeName.toLowerCase()}:{},I=s.parser.parse(f.content,{forced_root_block:!1,...M,...f});return Jh({validate:!1},s.schema).serialize(I)}else return f.content},E6=(s,f,b={})=>{const C=w6(b,f);VR(s,C).each(M=>{const I=PY(s,M),F=s.selection.getRng();C6(F,F.createContextualFragment(I),s.schema),s.selection.setRng(F),Uv(s,F),kA(s,I,M)})},aB=(s,f,b)=>{if(Vn(s,f)){const C=mt(s[f],M=>M!==b);C.length===0?delete s[f]:s[f]=C}};var sB=(s,f)=>{let b,C;const M=(Y,X)=>Ae(X,ae=>s.is(ae,Y)),I=Y=>s.getParents(Y,void 0,s.getRoot()),F=()=>{b={},C={},f.on("NodeChange",Y=>{const X=Y.element,ae=I(X),de={};Ue(b,(fe,ve)=>{M(ve,ae).each(De=>{C[ve]||(Fe(fe,Ie=>{Ie(!0,{node:De,selector:ve,parents:ae})}),C[ve]=fe),de[ve]=fe})}),Ue(C,(fe,ve)=>{de[ve]||(delete C[ve],Fe(fe,De=>{De(!1,{node:X,selector:ve,parents:ae})}))})})};return{selectorChangedWithUnbind:(Y,X)=>(b||F(),b[Y]||(b[Y]=[]),b[Y].push(X),M(Y,I(f.selection.getStart())).each(()=>{C[Y]=b[Y]}),{unbind:()=>{aB(b,Y,X),aB(C,Y,X)}})}};const cI=s=>!!(s&&s.ownerDocument)&&Pd(Ve.fromDom(s.ownerDocument),Ve.fromDom(s)),T6=s=>s?cI(s.startContainer)&&cI(s.endContainer):!1,Vm=(s,f,b,C)=>{let M,I;const{selectorChangedWithUnbind:F}=sB(s,C),Y=(dn,Hn)=>{const bo=s.createRng();re(dn)&&re(Hn)?(bo.setStart(dn,Hn),bo.setEnd(dn,Hn),gt(bo),qe(!1)):(yS(s,bo,C.getBody(),!0),gt(bo))},X=dn=>_6(C,dn),ae=(dn,Hn)=>E6(C,dn,Hn),de=dn=>nx(C.getBody(),tt(),dn),fe=dn=>wT(C.getBody(),tt(),dn),ve=(dn,Hn)=>hs.getBookmark(dn,Hn),De=dn=>hs.moveToBookmark(dn),Ie=(dn,Hn)=>(pP(s,dn,Hn).each(gt),dn),Me=()=>{const dn=tt(),Hn=nt();return!dn||dn.item?!1:dn.compareEndPoints?dn.compareEndPoints("StartToEnd",dn)===0:!Hn||dn.collapsed},Re=()=>{const dn=tt(),Hn=C.getBody().querySelectorAll('[data-mce-selected="1"]');return Hn.length>0?Wt(Hn,bo=>s.isEditable(bo.parentElement)):xT(s,dn)},qe=dn=>{const Hn=tt();Hn.collapse(!!dn),gt(Hn)},nt=()=>f.getSelection?f.getSelection():f.document.selection,tt=()=>{let dn;const Hn=(no,Nn,vr)=>{try{return Nn.compareBoundaryPoints(no,vr)}catch{return-1}},bo=f.document;if(re(C.bookmark)&&!Xh(C)){const no=ZS(C);if(no.isSome())return no.map(Nn=>Gv(C,[Nn])[0]).getOr(bo.createRange())}try{const no=nt();no&&!ru(no.anchorNode)&&(no.rangeCount>0?dn=no.getRangeAt(0):dn=bo.createRange(),dn=Gv(C,[dn])[0])}catch{}if(dn||(dn=bo.createRange()),wg(dn.startContainer)&&dn.collapsed){const no=s.getRoot();dn.setStart(no,0),dn.setEnd(no,0)}return M&&I&&(Hn(dn.START_TO_START,dn,M)===0&&Hn(dn.END_TO_END,dn,M)===0?dn=I:(M=null,I=null)),dn},gt=(dn,Hn)=>{if(!T6(dn))return;const bo=nt();if(dn=C.dispatch("SetSelectionRange",{range:dn,forward:Hn}).range,bo){I=dn;try{bo.removeAllRanges(),bo.addRange(dn)}catch{}Hn===!1&&bo.extend&&(bo.collapse(dn.endContainer,dn.endOffset),bo.extend(dn.startContainer,dn.startOffset)),M=bo.rangeCount>0?bo.getRangeAt(0):null}if(!dn.collapsed&&dn.startContainer===dn.endContainer&&(bo!=null&&bo.setBaseAndExtent)&&dn.endOffset-dn.startOffset<2&&dn.startContainer.hasChildNodes()){const Nn=dn.startContainer.childNodes[dn.startOffset];Nn&&Nn.nodeName==="IMG"&&(bo.setBaseAndExtent(dn.startContainer,dn.startOffset,dn.endContainer,dn.endOffset),(bo.anchorNode!==dn.startContainer||bo.focusNode!==dn.endContainer)&&bo.setBaseAndExtent(Nn,0,Nn,1))}C.dispatch("AfterSetSelectionRange",{range:dn,forward:Hn})},Ht=dn=>(ae(s.getOuterHTML(dn)),dn),an=()=>ET(C.getBody(),tt()),_n=(dn,Hn)=>fP(s,tt(),dn,Hn),At=()=>{const dn=nt(),Hn=dn==null?void 0:dn.anchorNode,bo=dn==null?void 0:dn.focusNode;if(!dn||!Hn||!bo||ru(Hn)||ru(bo))return!0;const no=s.createRng(),Nn=s.createRng();try{no.setStart(Hn,dn.anchorOffset),no.collapse(!0),Nn.setStart(bo,dn.focusOffset),Nn.collapse(!0)}catch{return!0}return no.compareBoundaryPoints(no.START_TO_START,Nn)<=0},ki={dom:s,win:f,serializer:b,editor:C,expand:(dn={type:"word"})=>gt(dp(s).expand(tt(),dn)),collapse:qe,setCursorLocation:Y,getContent:X,setContent:ae,getBookmark:ve,moveToBookmark:De,select:Ie,isCollapsed:Me,isEditable:Re,isForward:At,setNode:Ht,getNode:an,getSel:nt,setRng:gt,getRng:tt,getStart:de,getEnd:fe,getSelectedBlocks:_n,normalize:()=>{const dn=tt(),Hn=nt();if(!Tv(Hn)&&Av(C)){const bo=Em(s,dn);return bo.each(no=>{gt(no,At())}),bo.getOr(dn)}return dn},selectorChanged:(dn,Hn)=>(F(dn,Hn),ki),selectorChangedWithUnbind:F,getScrollContainer:()=>{let dn,Hn=s.getRoot();for(;Hn&&Hn.nodeName!=="BODY";){if(Hn.scrollHeight>Hn.clientHeight){dn=Hn;break}Hn=Hn.parentNode}return dn},scrollIntoView:(dn,Hn)=>{re(dn)?eP(C,dn,Hn):Uv(C,tt(),Hn)},placeCaretAt:(dn,Hn)=>gt(Lc(dn,Hn,C.getDoc())),getBoundingClientRect:()=>{const dn=tt();return dn.collapsed?kt.fromRangeStart(dn).getClientRects()[0]:dn.getBoundingClientRect()},destroy:()=>{f=M=I=null,Ho.destroy()}},hs=ap(ki),Ho=BD(ki,C);return ki.bookmarkManager=hs,ki.controlSelection=Ho,ki},G1=(s,f,b)=>{s.addAttributeFilter("data-mce-tabindex",(C,M)=>{let I=C.length;for(;I--;){const F=C[I];F.attr("tabindex",F.attr("data-mce-tabindex")),F.attr(M,null)}}),s.addAttributeFilter("src,href,style",(C,M)=>{const I="data-mce-"+M,F=f.url_converter,Y=f.url_converter_scope;let X=C.length;for(;X--;){const ae=C[X];let de=ae.attr(I);de!==void 0?(ae.attr(M,de.length>0?de:null),ae.attr(I,null)):(de=ae.attr(M),M==="style"?de=b.serializeStyle(b.parseStyle(de),ae.name):F&&(de=F.call(Y,de,M,ae.name)),ae.attr(M,de.length>0?de:null))}}),s.addAttributeFilter("class",C=>{let M=C.length;for(;M--;){const I=C[M];let F=I.attr("class");F&&(F=F.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),I.attr("class",F.length>0?F:null))}}),s.addAttributeFilter("data-mce-type",(C,M,I)=>{let F=C.length;for(;F--;){const Y=C[F];Y.attr("data-mce-type")==="bookmark"&&!I.cleanup&&(ue.from(Y.firstChild).exists(ae=>{var de;return!il((de=ae.value)!==null&&de!==void 0?de:"")})?Y.unwrap():Y.remove())}}),s.addNodeFilter("noscript",C=>{var M;let I=C.length;for(;I--;){const F=C[I].firstChild;F&&(F.value=Nh.decode((M=F.value)!==null&&M!==void 0?M:""))}}),s.addNodeFilter("script,style",(C,M)=>{var I;const F=X=>X.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let Y=C.length;for(;Y--;){const X=C[Y],ae=X.firstChild,de=(I=ae==null?void 0:ae.value)!==null&&I!==void 0?I:"";if(M==="script"){const fe=X.attr("type");fe&&X.attr("type",fe==="mce-no/type"?null:fe.replace(/^mce\-/,"")),f.element_format==="xhtml"&&ae&&de.length>0&&(ae.value=`// <![CDATA[
`+F(de)+`
// ]]>`)}else f.element_format==="xhtml"&&ae&&de.length>0&&(ae.value=`<!--
`+F(de)+`
-->`)}}),s.addNodeFilter("#comment",C=>{let M=C.length;for(;M--;){const I=C[M],F=I.value;f.preserve_cdata&&(F==null?void 0:F.indexOf("[CDATA["))===0?(I.name="#cdata",I.type=4,I.value=b.decode(F.replace(/^\[CDATA\[|\]\]$/g,""))):(F==null?void 0:F.indexOf("mce:protected "))===0&&(I.name="#text",I.type=3,I.raw=!0,I.value=unescape(F).substr(14))}}),s.addNodeFilter("xml:namespace,input",(C,M)=>{let I=C.length;for(;I--;){const F=C[I];F.type===7?F.remove():F.type===1&&M==="input"&&!F.attr("type")&&F.attr("type","text")}}),s.addAttributeFilter("data-mce-type",C=>{Fe(C,M=>{M.attr("data-mce-type")==="format-caret"&&(M.isEmpty(s.schema.getNonEmptyElements())?M.remove():M.unwrap())})}),s.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(C,M)=>{let I=C.length;for(;I--;)C[I].attr(M,null)}),f.remove_trailing_brs&&ER(f,s,s.schema)},Lx=s=>{const f=C=>(C==null?void 0:C.name)==="br",b=s.lastChild;if(f(b)){const C=b.prev;f(C)&&(b.remove(),C.remove())}},lB=(s,f,b)=>{let C;const M=s.dom;let I=f.cloneNode(!0);const F=document.implementation;if(F.createHTMLDocument){const Y=F.createHTMLDocument("");on.each(I.nodeName==="BODY"?I.childNodes:[I],X=>{Y.body.appendChild(Y.importNode(X,!0))}),I.nodeName!=="BODY"?I=Y.body.firstChild:I=Y.body,C=M.doc,M.doc=Y}return PS(s,{...b,node:I}),C&&(M.doc=C),I},cB=(s,f)=>re(s)&&s.hasEventListeners("PreProcess")&&!f.no_events,A6=(s,f,b)=>cB(s,b)?lB(s,f,b):f,uB=(s,f,b)=>{on.inArray(f,b)===-1&&(s.addAttributeFilter(b,(C,M)=>{let I=C.length;for(;I--;)C[I].attr(M,null)}),f.push(b))},M6=(s,f,b)=>!f.no_events&&s?TD(s,{...f,content:b}).content:b,k6=(s,f,b)=>{const C=Al(b.getInner?f.innerHTML:s.getOuterHTML(f));return b.selection||xa(Ve.fromDom(f))?C:on.trim(C)},D6=(s,f,b)=>{const C=b.selection?{forced_root_block:!1,...b}:b,M=s.parse(f,C);return Lx(M),M},P6=(s,f,b)=>Jh(s,f).serialize(b),dB=(s,f,b,C,M)=>{const I=P6(f,b,C);return M6(s,M,I)},R6=(s,f)=>{const b=["data-mce-selected"],C={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...s},M=f&&f.dom?f.dom:Vo.DOM,I=f&&f.schema?f.schema:Cc(C),F=gd(C,I);G1(F,C,M);const Y=(X,ae={})=>{const de={format:"html",...ae},fe=A6(f,X,de),ve=k6(M,fe,de),De=D6(F,ve,de);return de.format==="tree"?De:dB(f,C,I,De,de)};return{schema:I,addNodeFilter:F.addNodeFilter,addAttributeFilter:F.addAttributeFilter,serialize:Y,addRules:I.addValidElements,setRules:I.setValidElements,addTempAttr:Te(uB,F,b),getTempAttrs:Ee(b),getNodeFilters:F.getNodeFilters,getAttributeFilters:F.getAttributeFilters,removeNodeFilter:F.removeNodeFilter,removeAttributeFilter:F.removeAttributeFilter}},hB=(s,f)=>{const b=R6(s,f);return{schema:b.schema,addNodeFilter:b.addNodeFilter,addAttributeFilter:b.addAttributeFilter,serialize:b.serialize,addRules:b.addRules,setRules:b.setRules,addTempAttr:b.addTempAttr,getTempAttrs:b.getTempAttrs,getNodeFilters:b.getNodeFilters,getAttributeFilters:b.getAttributeFilters,removeNodeFilter:b.removeNodeFilter,removeAttributeFilter:b.removeAttributeFilter}},Nx="html",fB=(s,f)=>({...s,format:f,get:!0,getInner:!0}),pB=(s,f={})=>{const b=f.format?f.format:Nx,C=fB(f,b);return Bm(s,C).fold(Ge,M=>{const I=f6(s,M);return FR(s,I,M)})},I6="html",$6=(s,f)=>({format:I6,...s,set:!0,content:f}),uI=(s,f,b={})=>{const C=$6(b,f);return VR(s,C).map(M=>{const I=p6(s,M.content,M);return kA(s,I.html,M),I.content}).getOr(f)},mB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),L6="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),N6="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),gB=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],vB=(s,f)=>{const b=mt(f,C=>Vn(s,C));return Zn(b)},RY=s=>{const f=vB(s,mB),b=s.forced_root_block;return(b===!1||b==="")&&f.push("forced_root_block (false only)"),Zn(f)},ph=s=>vB(s,L6),VA=(s,f)=>{const b=on.makeMap(s.plugins," "),M=mt(f,I=>Vn(b,I));return Zn(M)},O6=s=>VA(s,N6),B6=s=>VA(s,gB.map(f=>f.name)),F6=(s,f)=>{const b=RY(s),C=O6(f),M=C.length>0,I=b.length>0,F=f.theme==="mobile";if(M||I||F){const Y=`
- `,X=F?`

Themes:${Y}mobile`:"",ae=M?`

Plugins:${Y}${C.join(Y)}`:"",de=I?`

Options:${Y}${b.join(Y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+X+ae+de)}},V6=s=>Ae(gB,f=>f.name===s).fold(()=>s,f=>f.replacedWith?`${s}, replaced by ${f.replacedWith}`:s),No=(s,f)=>{const b=ph(s),C=B6(f),M=C.length>0,I=b.length>0;if(M||I){const F=`
- `,Y=M?`

Plugins:${F}${C.map(V6).join(F)}`:"",X=I?`

Options:${F}${b.join(F)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+Y+X)}},IY=(s,f)=>{F6(s,f),No(s,f)},zA=Vo.DOM,z6=s=>{zA.setStyle(s.id,"display",s.orgDisplay)},_i=s=>ue.from(s).each(f=>f.destroy()),U6=s=>{const f=s;f.contentAreaContainer=f.formElement=f.container=f.editorContainer=null,f.bodyElement=f.contentDocument=f.contentWindow=null,f.iframeElement=f.targetElm=null;const b=s.selection;if(b){const C=b.dom;f.selection=b.win=b.dom=C.doc=null}},Ox=s=>{const f=s.formElement;f&&(f._mceOldSubmit&&(f.submit=f._mceOldSubmit,delete f._mceOldSubmit),zA.unbind(f,"submit reset",s.formEventDelegate))},H6=s=>{if(!s.removed){const{_selectionOverrides:f,editorUpload:b}=s,C=s.getBody(),M=s.getElement();C&&s.save({is_removing:!0}),s.removed=!0,s.unbindAllNativeEvents(),s.hasHiddenInput&&re(M==null?void 0:M.nextSibling)&&zA.remove(M.nextSibling),AD(s),s.editorManager.remove(s),!s.inline&&C&&z6(s),GE(s),zA.remove(s.getContainer()),_i(f),_i(b),s.destroy()}},G6=(s,f)=>{const{selection:b,dom:C}=s;if(!s.destroyed){if(!f&&!s.removed){s.remove();return}f||(s.editorManager.off("beforeunload",s._beforeUnload),s.theme&&s.theme.destroy&&s.theme.destroy(),_i(b),_i(C)),Ox(s),U6(s),s.destroyed=!0}},Bx=(()=>{const s={};return{add:(M,I)=>{s[M]=I},get:M=>s[M]?s[M]:{icons:{}},has:M=>Vn(s,M)}})(),Au=zs.ModelManager,Fl=(s,f)=>f.dom[s],W1=(s,f)=>parseInt(gc(f,s),10),zm=Te(Fl,"clientWidth"),ff=Te(Fl,"clientHeight"),Fx=Te(W1,"margin-top"),dI=Te(W1,"margin-left"),hI=s=>s.dom.getBoundingClientRect(),yB=(s,f,b)=>{const C=zm(s),M=ff(s);return f>=0&&b>=0&&f<=C&&b<=M},bB=(s,f,b,C)=>{const M=hI(f),I=s?M.left+f.dom.clientLeft+dI(f):0,F=s?M.top+f.dom.clientTop+Fx(f):0,Y=b-I,X=C-F;return{x:Y,y:X}},W6=(s,f,b)=>{const C=Ve.fromDom(s.getBody()),M=s.inline?C:Ub(C),I=bB(s.inline,M,f,b);return yB(M,I.x,I.y)},Y6=s=>ue.from(s).map(Ve.fromDom),_B=s=>{const f=s.inline?s.getBody():s.getContentAreaContainer();return Y6(f).map(Bp).getOr(!1)};var SB=()=>{const s=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:s,close:s,getArgs:s}};const fI=s=>{const f=[],b=()=>{const ve=s.theme;return ve&&ve.getNotificationManagerImpl?ve.getNotificationManagerImpl():SB()},C=()=>ue.from(f[0]),M=(ve,De)=>ve.type===De.type&&ve.text===De.text&&!ve.progressBar&&!ve.timeout&&!De.progressBar&&!De.timeout,I=()=>{Fe(f,ve=>{ve.reposition()})},F=ve=>{f.push(ve)},Y=ve=>{ht(f,De=>De===ve).each(De=>{f.splice(De,1)})},X=(ve,De=!0)=>s.removed||!_B(s)?{}:(De&&s.dispatch("BeforeOpenNotification",{notification:ve}),Ae(f,Ie=>M(b().getArgs(Ie),ve)).getOrThunk(()=>{s.editorManager.setActive(s);const Ie=b().open(ve,()=>{Y(Ie),I(),ST(s)&&C().fold(()=>s.focus(),Me=>GS(Ve.fromDom(Me.getEl())))});return F(Ie),I(),s.dispatch("OpenNotification",{notification:{...Ie}}),Ie})),ae=()=>{C().each(ve=>{b().close(ve),Y(ve),I()})},de=Ee(f);return(ve=>{ve.on("SkinLoaded",()=>{const De=tE(ve);De&&X({text:De,type:"warning",timeout:0},!1),I()}),ve.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(I)}),ve.on("remove",()=>{Fe(f.slice(),De=>{b().close(De)})})})(s),{open:X,close:ae,getNotifications:de}},o0=zs.PluginManager,wp=zs.ThemeManager;var LY=()=>{const s=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:s,openUrl:s,alert:s,confirm:s,close:s}};const xB=s=>{let f=[];const b=()=>{const Me=s.theme;return Me&&Me.getWindowManagerImpl?Me.getWindowManagerImpl():LY()},C=(Me,Re)=>(...qe)=>Re?Re.apply(Me,qe):void 0,M=Me=>{s.dispatch("OpenWindow",{dialog:Me})},I=Me=>{s.dispatch("CloseWindow",{dialog:Me})},F=Me=>{f.push(Me),M(Me)},Y=Me=>{I(Me),f=mt(f,Re=>Re!==Me),f.length===0&&s.focus()},X=()=>ue.from(f[f.length-1]),ae=Me=>{s.editorManager.setActive(s),Mm(s),s.ui.show();const Re=Me();return F(Re),Re},de=(Me,Re)=>ae(()=>b().open(Me,Re,Y)),fe=Me=>ae(()=>b().openUrl(Me,Y)),ve=(Me,Re,qe)=>{const nt=b();nt.alert(Me,C(qe||nt,Re))},De=(Me,Re,qe)=>{const nt=b();nt.confirm(Me,C(qe||nt,Re))},Ie=()=>{X().each(Me=>{b().close(Me),Y(Me)})};return s.on("remove",()=>{Fe(f,Me=>{b().close(Me)})}),{open:de,openUrl:fe,alert:ve,confirm:De,close:Ie}},j6=(s,f)=>{s.notificationManager.open({type:"error",text:f})},UA=(s,f)=>{s._skinLoaded?j6(s,f):s.on("SkinLoaded",()=>{j6(s,f)})},Z6=(s,f)=>{UA(s,Oa.translate(["Failed to upload image: {0}",f]))},zc=(s,f,b)=>{ml(s,f,{message:b}),console.error(b)},HA=(s,f,b)=>b?`Failed to load ${s}: ${b} from url ${f}`:`Failed to load ${s} url: ${f}`,NY=(s,f,b)=>{zc(s,"PluginLoadError",HA("plugin",f,b))},q6=(s,f,b)=>{zc(s,"IconsLoadError",HA("icons",f,b))},Vx=(s,f,b)=>{zc(s,"LanguageLoadError",HA("language",f,b))},K6=(s,f,b)=>{zc(s,"ThemeLoadError",HA("theme",f,b))},CB=(s,f,b)=>{zc(s,"ModelLoadError",HA("model",f,b))},wB=(s,f,b)=>{const C=Oa.translate(["Failed to initialize plugin: {0}",f]);ml(s,"PluginLoadError",{message:C}),zx(C,b),UA(s,C)},zx=(s,...f)=>{const b=window.console;b&&(b.error?b.error(s,...f):b.log(s,...f))},X6=s=>/^[a-z0-9\-]+$/i.test(s),pI=s=>"content/"+s+"/content.css",Um=s=>tinymce.Resource.has(pI(s)),J6=s=>EB(s,Jw(s)),Q6=s=>EB(s,Qw(s)),EB=(s,f)=>{const b=s.editorManager.baseURL+"/skins/content",M=`content${s.editorManager.suffix}.css`;return et(f,I=>Um(I)?I:X6(I)&&!s.inline?`${b}/${I}/${M}`:s.documentBaseURI.toAbsolute(I))},eU=s=>{s.contentCSS=s.contentCSS.concat(J6(s),Q6(s))},tU=s=>s?Cr(s.getElementsByTagName("img")):[],nU=(s,f)=>{const b={};return{findAll:(M,I=Be)=>{const F=mt(tU(M),X=>{const ae=X.src;return X.hasAttribute("data-mce-bogus")||X.hasAttribute("data-mce-placeholder")||!ae||ae===bn.transparentSrc?!1:Li(ae,"blob:")?!s.isUploaded(ae)&&I(X):Li(ae,"data:")?I(X):!1}),Y=et(F,X=>{const ae=X.src;if(Vn(b,ae))return b[ae].then(de=>V(de)?de:{image:X,blobInfo:de.blobInfo});{const de=mz(f,ae).then(fe=>(delete b[ae],{image:X,blobInfo:fe})).catch(fe=>(delete b[ae],fe));return b[ae]=de,de}});return Promise.all(Y)}}},TB=()=>{let b={};const C=(ve,De)=>({status:ve,resultUri:De}),M=ve=>ve in b;return{hasBlobUri:M,getResultUri:ve=>{const De=b[ve];return De?De.resultUri:null},isPending:ve=>M(ve)?b[ve].status===1:!1,isUploaded:ve=>M(ve)?b[ve].status===2:!1,markPending:ve=>{b[ve]=C(1,null)},markUploaded:(ve,De)=>{b[ve]=C(2,De)},removeFailed:ve=>{delete b[ve]},destroy:()=>{b={}}}};let rU=0;const oU=()=>{const s=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+s()+s()+s()},iU=s=>s+rU+++oU(),aU=()=>{let s=[];const f=fe=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[fe.toLowerCase()]||"dat",b=(fe,ve,De,Ie,Me)=>{if(V(fe))return C({id:fe,name:Ie,filename:Me,blob:ve,base64:De});if(j(fe))return C(fe);throw new Error("Unknown input type")},C=fe=>{if(!fe.blob||!fe.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const ve=fe.id||iU("blobid"),De=fe.name||ve,Ie=fe.blob;return{id:Ee(ve),name:Ee(De),filename:Ee(fe.filename||De+"."+f(Ie.type)),blob:Ee(Ie),base64:Ee(fe.base64),blobUri:Ee(fe.blobUri||URL.createObjectURL(Ie)),uri:Ee(fe.uri)}},M=fe=>{F(fe.id())||s.push(fe)},I=fe=>Ae(s,fe).getOrUndefined(),F=fe=>I(ve=>ve.id()===fe);return{create:b,add:M,get:F,getByUri:fe=>I(ve=>ve.blobUri()===fe),getByData:(fe,ve)=>I(De=>De.base64()===fe&&De.blob().type===ve),findFirst:I,removeByUri:fe=>{s=mt(s,ve=>ve.blobUri()===fe?(URL.revokeObjectURL(ve.blobUri()),!1):!0)},destroy:()=>{Fe(s,fe=>{URL.revokeObjectURL(fe.blobUri())}),s=[]}}},OY=(s,f)=>{const b={},C=(Me,Re)=>Me?Me.replace(/\/$/,"")+"/"+Re.replace(/^\//,""):Re,M=(Me,Re)=>new Promise((qe,nt)=>{const tt=new XMLHttpRequest;tt.open("POST",f.url),tt.withCredentials=f.credentials,tt.upload.onprogress=Ht=>{Re(Ht.loaded/Ht.total*100)},tt.onerror=()=>{nt("Image upload failed due to a XHR Transport error. Code: "+tt.status)},tt.onload=()=>{if(tt.status<200||tt.status>=300){nt("HTTP Error: "+tt.status);return}const Ht=JSON.parse(tt.responseText);if(!Ht||!V(Ht.location)){nt("Invalid JSON: "+tt.responseText);return}qe(C(f.basePath,Ht.location))};const gt=new FormData;gt.append("file",Me.blob(),Me.filename()),tt.send(gt)}),I=he(f.handler)?f.handler:M,F=()=>new Promise(Me=>{Me([])}),Y=(Me,Re)=>({url:Re,blobInfo:Me,status:!0}),X=(Me,Re)=>({url:"",blobInfo:Me,status:!1,error:Re}),ae=(Me,Re)=>{on.each(b[Me],qe=>{qe(Re)}),delete b[Me]},de=(Me,Re,qe)=>(s.markPending(Me.blobUri()),new Promise(nt=>{let tt,gt;try{const Ht=()=>{tt&&(tt.close(),gt=be)},an=At=>{Ht(),s.markUploaded(Me.blobUri(),At),ae(Me.blobUri(),Y(Me,At)),nt(Y(Me,At))},_n=At=>{Ht(),s.removeFailed(Me.blobUri()),ae(Me.blobUri(),X(Me,At)),nt(X(Me,At))};gt=At=>{At<0||At>100||ue.from(tt).orThunk(()=>ue.from(qe).map(Lt)).each(St=>{tt=St,St.progressBar.value(At)})},Re(Me,gt).then(an,At=>{_n(V(At)?{message:At}:At)})}catch(Ht){nt(X(Me,Ht))}})),fe=Me=>Me===M,ve=Me=>{const Re=Me.blobUri();return new Promise(qe=>{b[Re]=b[Re]||[],b[Re].push(qe)})},De=(Me,Re)=>(Me=on.grep(Me,qe=>!s.isUploaded(qe.blobUri())),Promise.all(on.map(Me,qe=>s.isPending(qe.blobUri())?ve(qe):de(qe,I,Re))));return{upload:(Me,Re)=>!f.url&&fe(I)?F():De(Me,Re)}},Y1=s=>()=>s.notificationManager.open({text:s.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),AB=(s,f)=>OY(f,{url:Kw(s),basePath:$k(s),credentials:Z_(s),handler:uv(s)}),mI=s=>{const f=TB(),b=AB(s,f);return{upload:(C,M=!0)=>b.upload(C,M?Y1(s):void 0)}},sU=(s,f)=>s.dom.isEmpty(f.dom)&&re(s.schema.getTextBlockElements()[Co(f)]),lU=s=>f=>{sU(s,f)&&Ki(f,Ve.fromHtml('<br data-mce-bogus="1" />'))},cU=s=>{const f=aU();let b,C;const M=TB(),I=[],F=tt=>gt=>s.selection?tt(gt):[],Y=tt=>tt+(tt.indexOf("?")===-1?"?":"&")+new Date().getTime(),X=(tt,gt,Ht)=>{let an=0;do an=tt.indexOf(gt,an),an!==-1&&(tt=tt.substring(0,an)+Ht+tt.substr(an+gt.length),an+=Ht.length-gt.length+1);while(an!==-1);return tt},ae=(tt,gt,Ht)=>{const an=`src="${Ht}"${Ht===bn.transparentSrc?' data-mce-placeholder="1"':""}`;return tt=X(tt,`src="${gt}"`,an),tt=X(tt,'data-mce-src="'+gt+'"','data-mce-src="'+Ht+'"'),tt},de=(tt,gt)=>{Fe(s.undoManager.data,Ht=>{Ht.type==="fragmented"?Ht.fragments=et(Ht.fragments,an=>ae(an,tt,gt)):Ht.content=ae(Ht.content,tt,gt)})},fe=(tt,gt)=>{const Ht=s.convertURL(gt,"src");de(tt.src,gt),Dd(Ve.fromDom(tt),{src:cv(s)?Y(gt):gt,"data-mce-src":Ht})},ve=()=>(b||(b=AB(s,M)),Re().then(F(tt=>{const gt=et(tt,Ht=>Ht.blobInfo);return b.upload(gt,Y1(s)).then(F(Ht=>{const an=[];let _n=!1;const At=et(Ht,(St,Ut)=>{const{blobInfo:$n,image:Qn}=tt[Ut];let zr=!1;return St.status&&qw(s)?(St.url&&!Ur(Qn.src,St.url)&&(_n=!0),f.removeByUri(Qn.src),Cp(s)||fe(Qn,St.url)):St.error&&(St.error.remove&&(de(Qn.src,bn.transparentSrc),an.push(Qn),zr=!0),Z6(s,St.error.message)),{element:Qn,status:St.status,uploadUri:St.url,blobInfo:$n,removed:zr}});return an.length>0&&!Cp(s)?s.undoManager.transact(()=>{Fe(Gu(an),St=>{const Ut=Kl(St);wo(St),Ut.each(lU(s)),f.removeByUri(St.dom.src)})}):_n&&s.undoManager.dispatchChange(),At}))}))),De=()=>j_(s)?ve():Promise.resolve([]),Ie=tt=>Wt(I,gt=>gt(tt)),Me=tt=>{I.push(tt)},Re=()=>(C||(C=nU(M,f)),C.findAll(s.getBody(),Ie).then(F(tt=>{const gt=mt(tt,Ht=>V(Ht)?(UA(s,Ht),!1):Ht.uriType!=="blob");return Cp(s)||Fe(gt,Ht=>{de(Ht.image.src,Ht.blobInfo.blobUri()),Ht.image.src=Ht.blobInfo.blobUri(),Ht.image.removeAttribute("data-mce-src")}),gt}))),qe=()=>{f.destroy(),M.destroy(),C=b=null},nt=tt=>tt.replace(/src="(blob:[^"]+)"/g,(gt,Ht)=>{const an=M.getResultUri(Ht);if(an)return'src="'+an+'"';let _n=f.getByUri(Ht);return _n||(_n=Bn(s.editorManager.get(),(At,St)=>At||St.editorUpload&&St.editorUpload.blobCache.getByUri(Ht),void 0)),_n?'src="data:'+_n.blob().type+";base64,"+_n.base64()+'"':gt});return s.on("SetContent",()=>{j_(s)?De():Re()}),s.on("RawSaveContent",tt=>{tt.content=nt(tt.content)}),s.on("GetContent",tt=>{tt.source_view||tt.format==="raw"||tt.format==="tree"||(tt.content=nt(tt.content))}),s.on("PostRender",()=>{s.parser.addNodeFilter("img",tt=>{Fe(tt,gt=>{const Ht=gt.attr("src");if(!Ht||f.getByUri(Ht))return;const an=M.getResultUri(Ht);an&&gt.attr("src",an)})})}),{blobCache:f,addFilter:Me,uploadImages:ve,uploadImagesAuto:De,scanForImages:Re,destroy:qe}},uU=s=>{const f=s.dom,b=s.schema.type,C={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:M=>{f.setStyle(M,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:M=>{f.setStyle(M,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const M={inline:"span",styles:{textDecoration:"line-through"},exact:!0},I={inline:"strike",remove:"all",preserve_attributes:["class","style"]},F={inline:"s",remove:"all",preserve_attributes:["class","style"]};return b!=="html4"?[F,M,I]:[M,F,I]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(M,I,F)=>Rn(M)&&M.hasAttribute("href"),onformat:(M,I,F)=>{on.each(F,(Y,X)=>{f.setAttrib(M,X,Y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":M=>{var I;return(I=M==null?void 0:M.customValue)!==null&&I!==void 0?I:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return on.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),M=>{C[M]={block:M,remove:"all"}}),C},Hm={remove_similar:!0,inherit:!1},vd={selector:"td,th",...Hm},GA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...vd},tablecellverticalalign:{styles:{"vertical-align":"%value"},...vd},tablecellbordercolor:{styles:{borderColor:"%value"},...vd},tablecellclass:{classes:["%value"],...vd},tableclass:{selector:"table",classes:["%value"],...Hm},tablecellborderstyle:{styles:{borderStyle:"%value"},...vd},tablecellborderwidth:{styles:{borderWidth:"%value"},...vd}},WA=Ee(GA),i0=s=>{const f={},b=F=>re(F)?f[F]:f,C=F=>Vn(f,F),M=(F,Y)=>{F&&(V(F)?(Z(Y)||(Y=[Y]),Fe(Y,X=>{te(X.deep)&&(X.deep=!fl(X)),te(X.split)&&(X.split=!fl(X)||Xi(X)),te(X.remove)&&fl(X)&&!Xi(X)&&(X.remove="none"),fl(X)&&Xi(X)&&(X.mixed=!0,X.block_expand=!0),V(X.classes)&&(X.classes=X.classes.split(/\s+/))}),f[F]=Y):Ue(F,(X,ae)=>{M(ae,X)}))},I=F=>(F&&f[F]&&delete f[F],f);return M(uU(s)),M(WA()),M(Bk(s)),{get:b,has:C,register:M,unregister:I}},pf=on.each,Vl=Vo.DOM,j1=s=>re(s)&&j(s),gI=(s,f)=>{const b=f&&f.schema||Cc({}),C=(X,ae)=>{ae.classes.length>0&&Vl.addClass(X,ae.classes.join(" ")),Vl.setAttribs(X,ae.attrs)},M=X=>{const ae=V(X)?{name:X,classes:[],attrs:{}}:X,de=Vl.create(ae.name);return C(de,ae),de},I=(X,ae)=>{const de=b.getElementRule(X.nodeName.toLowerCase()),fe=de==null?void 0:de.parentsRequired;return fe&&fe.length?ae&&$e(fe,ae)?ae:fe[0]:!1},F=(X,ae,de)=>{let fe;const ve=ae[0],De=j1(ve)?ve.name:void 0,Ie=I(X,De);if(Ie)De===Ie?(fe=ve,ae=ae.slice(1)):fe=Ie;else if(ve)fe=ve,ae=ae.slice(1);else if(!de)return X;const Me=fe?M(fe):Vl.create("div");Me.appendChild(X),de&&on.each(de,qe=>{const nt=M(qe);Me.insertBefore(nt,X)});const Re=j1(fe)?fe.siblings:void 0;return F(Me,ae,Re)},Y=Vl.create("div");if(s.length>0){const X=s[0],ae=M(X),de=j1(X)?X.siblings:void 0;Y.appendChild(F(ae,s.slice(1),de))}return Y},vI=s=>{s=on.trim(s);let f="div";const b={name:f,classes:[],attrs:{},selector:s};return s!=="*"&&(f=s.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(C,M,I,F,Y)=>{switch(M){case"#":b.attrs.id=I;break;case".":b.classes.push(I);break;case":":on.inArray("checked disabled enabled read-only required".split(" "),I)!==-1&&(b.attrs[I]=I);break}if(F==="["){const X=Y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);X&&(b.attrs[X[1]]=X[2])}return""})),b.name=f||"div",b},yI=s=>V(s)?(s=s.split(/\s*,\s*/)[0],s=s.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),on.map(s.split(/(?:>|\s+(?![^\[\]]+\]))/),f=>{const b=on.map(f.split(/(?:~\+|~|\+)/),vI),C=b.pop();return b.length&&(C.siblings=b),C}).reverse()):[],MB=(s,f)=>{let b="",C=rE(s);if(C==="")return"";const M=ve=>V(ve)?ve.replace(/%(\w+)/g,""):"",I=(ve,De)=>Vl.getStyle(De??s.getBody(),ve,!0);if(V(f)){const ve=s.formatter.get(f);if(!ve)return"";f=ve[0]}if("preview"in f){const ve=f.preview;if(ve===!1)return"";C=ve||C}let F=f.block||f.inline||"span",Y;const X=yI(f.selector);X.length>0?(X[0].name||(X[0].name=F),F=f.selector,Y=gI(X,s)):Y=gI([F],s);const ae=Vl.select(F,Y)[0]||Y.firstChild;pf(f.styles,(ve,De)=>{const Ie=M(ve);Ie&&Vl.setStyle(ae,De,Ie)}),pf(f.attributes,(ve,De)=>{const Ie=M(ve);Ie&&Vl.setAttrib(ae,De,Ie)}),pf(f.classes,ve=>{const De=M(ve);Vl.hasClass(ae,De)||Vl.addClass(ae,De)}),s.dispatch("PreviewFormats"),Vl.setStyles(Y,{position:"absolute",left:-65535}),s.getBody().appendChild(Y);const de=I("fontSize"),fe=/px$/.test(de)?parseInt(de,10):0;return pf(C.split(" "),ve=>{let De=I(ve,ae);if(!(ve==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(De)&&(De=I(ve),al(De).toLowerCase()==="#ffffff"))&&!(ve==="color"&&al(De).toLowerCase()==="#000000")){if(ve==="font-size"&&/em|%$/.test(De)){if(fe===0)return;De=parseFloat(De)/(/%$/.test(De)?100:1)*fe+"px"}ve==="border"&&De&&(b+="padding:0 2px;"),b+=ve+":"+De+";"}}),s.dispatch("AfterPreviewFormats"),Vl.remove(Y),b},kB=s=>{s.addShortcut("meta+b","","Bold"),s.addShortcut("meta+i","","Italic"),s.addShortcut("meta+u","","Underline");for(let f=1;f<=6;f++)s.addShortcut("access+"+f,"",["FormatBlock",!1,"h"+f]);s.addShortcut("access+7","",["FormatBlock",!1,"p"]),s.addShortcut("access+8","",["FormatBlock",!1,"div"]),s.addShortcut("access+9","",["FormatBlock",!1,"address"])},a0=s=>{const f=i0(s),b=Vi({});return kB(s),W5(s),Cp(s)||rz(b,s),{get:f.get,has:f.has,register:f.register,unregister:f.unregister,apply:(C,M,I)=>{u6(s,C,M,I)},remove:(C,M,I,F)=>{d6(s,C,M,I,F)},toggle:(C,M,I)=>{h6(s,C,M,I)},match:(C,M,I,F)=>nB(s,C,M,I,F),closest:C=>sI(s,C),matchAll:(C,M)=>rB(s,C,M),matchNode:(C,M,I,F)=>aI(s,C,M,I,F),canApply:C=>oB(s,C),formatChanged:(C,M,I,F)=>Tu(s,b,C,M,I,F),getCssText:Te(MB,s)}},bI=s=>{switch(s.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},DB=(s,f,b)=>{const C=Vi(!1),M=X=>{OA(f,!1,b),f.add({},X)};s.on("init",()=>{f.add()}),s.on("BeforeExecCommand",X=>{const ae=X.command;bI(ae)||(KO(f,b),f.beforeChange())}),s.on("ExecCommand",X=>{const ae=X.command;bI(ae)||M(X)}),s.on("ObjectResizeStart cut",()=>{f.beforeChange()}),s.on("SaveContent ObjectResized blur",M),s.on("dragend",M),s.on("keyup",X=>{const ae=X.keyCode;if(X.isDefaultPrevented())return;const de=bn.os.isMacOS()&&X.key==="Meta";(ae>=33&&ae<=36||ae>=37&&ae<=40||ae===45||X.ctrlKey||de)&&(M(),s.nodeChanged()),(ae===46||ae===8)&&s.nodeChanged(),C.get()&&f.typing&&!nI(NA(s),f.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),C.set(!1),s.nodeChanged())}),s.on("keydown",X=>{const ae=X.keyCode;if(X.isDefaultPrevented())return;if(ae>=33&&ae<=36||ae>=37&&ae<=40||ae===45){f.typing&&M(X);return}const de=X.ctrlKey&&!X.altKey||X.metaKey;if((ae<16||ae>20)&&ae!==224&&ae!==91&&!f.typing&&!de){f.beforeChange(),OA(f,!0,b),f.add({},X),C.set(!0);return}(bn.os.isMacOS()?X.metaKey:X.ctrlKey&&!X.altKey)&&f.beforeChange()}),s.on("mousedown",X=>{f.typing&&M(X)});const I=X=>X.inputType==="insertReplacementText",F=X=>X.inputType==="insertText"&&X.data===null,Y=X=>X.inputType==="insertFromPaste"||X.inputType==="insertFromDrop";s.on("input",X=>{X.inputType&&(I(X)||F(X)||Y(X))&&M(X)}),s.on("AddUndo Undo Redo ClearUndos",X=>{X.isDefaultPrevented()||s.nodeChanged()})},PB=s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")},Ux=s=>{const f=zh(),b=Vi(0),C=Vi(0),M={data:[],typing:!1,beforeChange:()=>{DY(s,b,f)},add:(I,F)=>Ds(s,M,C,b,f,I,F),dispatchChange:()=>{s.setDirty(!0);const I=NA(s);I.bookmark=B_(s.selection),s.dispatch("change",{level:I,lastLevel:yo(M.data,C.get()).getOrUndefined()})},undo:()=>QO(s,M,b,C),redo:()=>eB(s,C,M.data),clear:()=>{tB(s,M,C)},reset:()=>{a6(s,M)},hasUndo:()=>s6(s,M,C),hasRedo:()=>BA(s,M,C),transact:I=>l6(s,M,b,I),ignore:I=>{iI(s,b,I)},extra:(I,F)=>{c6(s,M,C,I,F)}};return Cp(s)||DB(s,M,b),PB(s),M},RB=[9,27,Tn.HOME,Tn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Tn.DOWN,Tn.UP,Tn.LEFT,Tn.RIGHT].concat(bn.browser.isFirefox()?[224]:[]),_I="data-mce-placeholder",SI=s=>s.type==="keydown"||s.type==="keyup",xI=s=>{const f=s.keyCode;return f===Tn.BACKSPACE||f===Tn.DELETE},Ep=s=>{if(SI(s)){const f=s.keyCode;return!xI(s)&&(Tn.metaKeyPressed(s)||s.altKey||f>=112&&f<=123||$e(RB,f))}else return!1},Gm=s=>SI(s)&&!(xI(s)||s.type==="keyup"&&s.keyCode===229),yd=(s,f,b)=>{if(Ai(Ve.fromDom(f),!1)){const C=f.firstElementChild;return C?s.getStyle(f.firstElementChild,"padding-left")||s.getStyle(f.firstElementChild,"padding-right")?!1:b===C.nodeName.toLowerCase():!0}else return!1},dU=s=>{var f;const b=s.dom,C=xs(s),M=(f=Ok(s))!==null&&f!==void 0?f:"",I=(F,Y)=>{if(Ep(F))return;const X=s.getBody(),ae=Gm(F)?!1:yd(b,X,C);(b.getAttrib(X,_I)!==""!==ae||Y)&&(b.setAttrib(X,_I,ae?M:null),b.setAttrib(X,"aria-placeholder",ae?M:null),RD(s,ae),s.on(ae?"keydown":"keyup",I),s.off(ae?"keyup":"keydown",I))};Fo(M)&&s.on("init",F=>{I(F,!0),s.on("change SetContent ExecCommand",I),s.on("paste",Y=>Nl.setEditorTimeout(s,()=>I(Y)))})},hU=(s,f)=>({block:s,position:f}),fU=(s,f)=>({from:s,to:f}),CI=(s,f)=>{const b=Ve.fromDom(s),C=Ve.fromDom(f.container());return Hr(b,C).map(M=>hU(M,f))},pU=s=>!Bo(s.from.block,s.to.block),IB=(s,f)=>Sa(f,M=>Tl(M)||Fs(M.dom),M=>Bo(M,s)).filter(Cl).getOr(s),mU=(s,f)=>{const b=Ve.fromDom(s);return Bo(IB(b,f.from.block),IB(b,f.to.block))},gU=s=>Eo(s.from.block.dom)===!1&&Eo(s.to.block.dom)===!1,vU=s=>{const f=b=>ft(b)||Dl(b.dom);return f(s.from.block)&&f(s.to.block)},yU=(s,f,b)=>Ko(b.position.getNode())&&!Ai(b.block)?mm(!1,b.block.dom).bind(C=>C.isEqual(b.position)?Hs(f,s,C).bind(M=>CI(s,M)):ue.some(b)).getOr(b):b,bU=(s,f,b)=>{const C=CI(s,kt.fromRangeStart(b)),M=C.bind(I=>Hs(f,s,I.position).bind(F=>CI(s,F).map(Y=>yU(s,f,Y))));return rs(C,M,fU).filter(I=>pU(I)&&mU(s,I)&&gU(I)&&vU(I))},_U=(s,f,b)=>b.collapsed?bU(s,f,b):ue.none(),wI=(s,f)=>{const b=Ya(s);return ht(b,C=>f.isBlock(Co(C))).fold(Ee(b),C=>b.slice(0,C))},YA=(s,f)=>{const b=wI(s,f);return Fe(b,wo),b},EI=(s,f)=>{const b=dd(f,s);return Ae(b.reverse(),C=>Ai(C)).each(wo)},SU=s=>mt(nw(s),f=>!Ai(f)).length===0,xU=(s,f,b,C,M)=>{if(Ai(b))return ju(b),Ts(b.dom);SU(M)&&Ai(f)&&Zs(M,Ve.fromTag("br"));const I=ls(b.dom,kt.before(M.dom));return Fe(YA(f,C),F=>{Zs(M,F)}),EI(s,f),I},$B=(s,f)=>s.isInline(Co(f)),LB=(s,f,b,C)=>{if(Ai(b)){if(Ai(f)){const F=en((Y=>{const X=(ae,de)=>vg(ae).fold(()=>de,fe=>$B(C,fe)?X(fe,de.concat(Rl(fe))):de);return X(Y,[])})(b),(Y,X)=>(jb(Y,X),X),pa());Nd(f),Ki(f,F)}return wo(b),Ts(f.dom)}const M=Pc(b.dom);return Fe(YA(f,C),I=>{Ki(b,I)}),EI(s,f),M},TI=(s,f)=>{const b=dd(f,s);return ue.from(b[b.length-1])},NB=(s,f)=>Pd(f,s)?TI(f,s):ue.none(),AI=(s,f)=>{mm(s,f.dom).bind(b=>ue.from(b.getNode())).map(Ve.fromDom).filter(Pf).each(wo)},jA=(s,f,b,C)=>(AI(!0,f),AI(!1,b),NB(f,b).fold(Te(LB,s,f,b,C),Te(xU,s,f,b,C))),OB=(s,f,b,C,M)=>f?jA(s,C,b,M):jA(s,b,C,M),MI=(s,f)=>{const b=Ve.fromDom(s.getBody());return _U(b.dom,f,s.selection.getRng()).map(M=>()=>{OB(b,f,M.from.block,M.to.block,s.schema).each(I=>{s.selection.setRng(I.toRange())})})},mf=(s,f,b)=>{const C=f.getRng();return rs(Hr(s,Ve.fromDom(C.startContainer)),Hr(s,Ve.fromDom(C.endContainer)),(M,I)=>Bo(M,I)?ue.none():ue.some(()=>{C.deleteContents(),OB(s,!0,M,I,b).each(F=>{f.setRng(F.toRange())})})).getOr(ue.none())},Mu=(s,f)=>{const b=Ve.fromDom(f),C=Te(Bo,s);return Bi(b,Tl,C).isSome()},ZA=(s,f)=>Mu(s,f.startContainer)||Mu(s,f.endContainer),BB=(s,f)=>{const b=ls(s.dom,kt.fromRangeStart(f)).isNone(),C=Es(s.dom,kt.fromRangeEnd(f)).isNone();return!ZA(s,f)&&b&&C},qA=s=>ue.some(()=>{s.setContent(""),s.selection.setCursorLocation()}),FB=s=>{const f=Ve.fromDom(s.getBody()),b=s.selection.getRng();return BB(f,b)?qA(s):mf(f,s.selection,s.schema)},KA=(s,f)=>s.selection.isCollapsed()?ue.none():FB(s),gf=(s,f,b,C,M)=>ue.from(f._selectionOverrides.showCaret(s,b,C,M)),VB=s=>{const f=s.ownerDocument.createRange();return f.selectNode(s),f},Z1=(s,f)=>s.dispatch("BeforeObjectSelected",{target:f}).isDefaultPrevented()?ue.none():ue.some(VB(f)),zB=(s,f,b)=>{const C=uS(1,s.getBody(),f),M=kt.fromRangeStart(C),I=M.getNode();if(vv(I))return gf(1,s,I,!M.isAtEnd(),!1);const F=M.getNode(!0);if(vv(F))return gf(1,s,F,!1,!1);const Y=Gr(s.dom.getRoot(),M.getNode());return vv(Y)?gf(1,s,Y,!1,b):ue.none()},q1=(s,f,b)=>f.collapsed?zB(s,f,b).getOr(f):f,kI=s=>ud(s)||Zv(s),CU=s=>Su(s)||km(s),wU=(s,f)=>{Zt(f)&&f.data.length===0&&s.remove(f)},UB=(s,f,b,C,M,I)=>{gf(C,s,I.getNode(!M),M,!0).each(F=>{if(f.collapsed){const Y=f.cloneRange();M?Y.setEnd(F.startContainer,F.startOffset):Y.setStart(F.endContainer,F.endOffset),Y.deleteContents()}else f.deleteContents();s.selection.setRng(F)}),wU(s.dom,b)},EU=(s,f)=>{const b=s.selection.getRng();if(!Zt(b.commonAncestorContainer))return ue.none();const C=f?wa.Forwards:wa.Backwards,M=id(s.getBody()),I=Te(hm,f?M.next:M.prev),F=f?kI:CU,Y=xv(C,s.getBody(),b),X=I(Y),ae=X&&Pt(f,X);if(!ae||!Vy(Y,ae))return ue.none();if(F(ae))return ue.some(()=>UB(s,b,Y.getNode(),C,f,ae));const de=I(ae);return de&&F(de)&&Vy(ae,de)?ue.some(()=>UB(s,b,Y.getNode(),C,f,de)):ue.none()},XA=(s,f)=>EU(s,f),DI=(s,f)=>{const b=s.getBody();return f?Ts(b).filter(ud):Pc(b).filter(Su)},RI=s=>{const f=s.selection.getRng();return!f.collapsed&&(DI(s,!0).exists(b=>b.isEqual(kt.fromRangeStart(f)))||DI(s,!1).exists(b=>b.isEqual(kt.fromRangeEnd(f))))},II=s=>re(s)&&(Tl(Ve.fromDom(s))||Rf(Ve.fromDom(s))),Uc=pu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),TU=(s,f)=>{const b=f.getNode(!s),C=s?"after":"before";return Rn(b)&&b.getAttribute("data-mce-caret")===C},AU=(s,f,b,C,M)=>{const I=F=>M.isInline(F.nodeName.toLowerCase())&&!vu(b,C,s);return xE(!f,b).fold(()=>xE(f,C).fold(Xe,I),I)},HB=(s,f,b,C)=>{const M=C.getNode(!f);return Hr(Ve.fromDom(s),Ve.fromDom(b.getNode())).map(I=>Ai(I)?Uc.remove(I.dom):Uc.moveToElement(M)).orThunk(()=>ue.some(Uc.moveToElement(M)))},GB=(s,f,b,C)=>Hs(f,s,b).bind(M=>II(M.getNode())||AU(s,f,b,M,C)?ue.none():f&&Eo(M.getNode())||!f&&Eo(M.getNode(!0))?HB(s,f,b,M):f&&Su(b)||!f&&ud(b)?ue.some(Uc.moveToPosition(M)):ue.none()),MU=(s,f)=>oe(f)?ue.none():s&&Eo(f.nextSibling)?ue.some(Uc.moveToElement(f.nextSibling)):!s&&Eo(f.previousSibling)?ue.some(Uc.moveToElement(f.previousSibling)):ue.none(),kU=(s,f,b)=>b.fold(C=>ue.some(Uc.remove(C)),C=>ue.some(Uc.moveToElement(C)),C=>vu(f,C,s)?ue.none():ue.some(Uc.moveToPosition(C))),JA=(s,f,b,C)=>TU(f,b)?MU(f,b.getNode(!f)).orThunk(()=>GB(s,f,b,C)):GB(s,f,b,C).bind(M=>kU(s,b,M)),$I=(s,f,b,C)=>{const M=uS(f?1:-1,s,b),I=kt.fromRangeStart(M),F=Ve.fromDom(s);return!f&&Su(I)?ue.some(Uc.remove(I.getNode(!0))):f&&ud(I)?ue.some(Uc.remove(I.getNode())):!f&&ud(I)&&vp(F,I,C)?FP(F,I,C).map(Y=>Uc.remove(Y.getNode())):f&&Su(I)&&Dm(F,I,C)?VP(F,I,C).map(Y=>Uc.remove(Y.getNode())):JA(s,f,I,C)},DU=(s,f)=>b=>(s._selectionOverrides.hideFakeCaret(),ot(s,f,Ve.fromDom(b)),!0),PU=(s,f)=>b=>{const C=f?kt.before(b):kt.after(b);return s.selection.setRng(C.toRange()),!0},RU=s=>f=>(s.selection.setRng(f.toRange()),!0),WB=(s,f)=>ue.from(Gr(s.getBody(),f)),YB=(s,f)=>{const b=s.selection.getNode();return WB(s,b).filter(Eo).fold(()=>$I(s.getBody(),f,s.selection.getRng(),s.schema).map(C=>()=>C.fold(DU(s,f),PU(s,f),RU(s))),()=>ue.some(be))},IU=s=>{Fe(fa(s,".mce-offscreen-selection"),wo)},$U=(s,f)=>{const b=s.selection.getNode();return Eo(b)&&!Eg(b)?WB(s,b.parentNode).filter(Eo).fold(()=>ue.some(()=>{IU(Ve.fromDom(s.getBody())),ot(s,f,Ve.fromDom(s.selection.getNode())),rr(s)}),()=>ue.some(be)):RI(s)?ue.some(()=>{Ir(s,s.selection.getRng(),Ve.fromDom(s.getBody()))}):ue.none()},QA=s=>{const f=s.dom,b=s.selection,C=Gr(s.getBody(),b.getNode());if(Fs(C)&&f.isBlock(C)&&f.isEmpty(C)){const M=f.create("br",{"data-mce-bogus":"1"});f.setHTML(C,""),C.appendChild(M),b.setRng(kt.before(M).toRange())}return!0},LI=(s,f)=>s.selection.isCollapsed()?YB(s,f):$U(s,f),LU=(s,f)=>{const b=kt.fromRangeStart(s.selection.getRng());return Hs(f,s.getBody(),b).filter(C=>f?$P(C):LP(C)).bind(C=>By(f?0:-1,C)).map(C=>()=>s.selection.select(C))},NI=(s,f)=>s.selection.isCollapsed()?LU(s,f):ue.none(),K1=Zt,jB=s=>K1(s)&&s.data[0]===Na,ZB=s=>K1(s)&&s.data[s.data.length-1]===Na,qB=s=>{var f;return((f=s.ownerDocument)!==null&&f!==void 0?f:document).createTextNode(Na)},e2=s=>{var f;if(K1(s.previousSibling))return ZB(s.previousSibling)||s.previousSibling.appendData(Na),s.previousSibling;if(K1(s))return jB(s)||s.insertData(0,Na),s;{const b=qB(s);return(f=s.parentNode)===null||f===void 0||f.insertBefore(b,s),b}},t2=s=>{var f,b;if(K1(s.nextSibling))return jB(s.nextSibling)||s.nextSibling.insertData(0,Na),s.nextSibling;if(K1(s))return ZB(s)||s.appendData(Na),s;{const C=qB(s);return s.nextSibling?(f=s.parentNode)===null||f===void 0||f.insertBefore(C,s.nextSibling):(b=s.parentNode)===null||b===void 0||b.appendChild(C),C}},n2=(s,f)=>s?e2(f):t2(f),NU=Te(n2,!0),r2=Te(n2,!1),KB=(s,f)=>Zt(s.container())?n2(f,s.container()):n2(f,s.getNode()),XB=(s,f)=>{const b=f.get();return b&&s.container()===b&&qs(b)},OI=(s,f)=>f.fold(b=>{ga(s.get());const C=NU(b);return s.set(C),ue.some(kt(C,C.length-1))},b=>Ts(b).map(C=>{if(XB(C,s)){const M=s.get();return kt(M,1)}else{ga(s.get());const M=KB(C,!0);return s.set(M),kt(M,1)}}),b=>Pc(b).map(C=>{if(XB(C,s)){const M=s.get();return kt(M,M.length-1)}else{ga(s.get());const M=KB(C,!1);return s.set(M),kt(M,M.length-1)}}),b=>{ga(s.get());const C=r2(b);return s.set(C),ue.some(kt(C,1))}),JB=(s,f)=>{for(let b=0;b<s.length;b++){const C=s[b].apply(null,f);if(C.isSome())return C}return ue.none()},bl=pu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),QB=(s,f)=>{const b=Kd(f,s);return b||s},OU=(s,f,b)=>{const C=Pr(b),M=QB(f,C.container());return jt(s,M,C).fold(()=>Es(M,C).bind(Te(jt,s,M)).map(I=>bl.before(I)),ue.none)},BU=(s,f)=>Yh(s,f)===null,e3=(s,f,b)=>jt(s,f,b).filter(Te(BU,f)),FU=(s,f,b)=>{const C=cr(b);return e3(s,f,C).bind(M=>ls(M,C).isNone()?ue.some(bl.start(M)):ue.none())},VU=(s,f,b)=>{const C=Pr(b);return e3(s,f,C).bind(M=>Es(M,C).isNone()?ue.some(bl.end(M)):ue.none())},BY=(s,f,b)=>{const C=cr(b),M=QB(f,C.container());return jt(s,M,C).fold(()=>ls(M,C).bind(Te(jt,s,M)).map(I=>bl.after(I)),ue.none)},ku=s=>!ir(o2(s)),bd=(s,f,b)=>JB([OU,FU,VU,BY],[s,f,b]).filter(ku),o2=s=>s.fold(Ge,Ge,Ge,Ge),BI=s=>s.fold(Ee("before"),Ee("start"),Ee("end"),Ee("after")),i2=s=>s.fold(bl.before,bl.before,bl.after,bl.after),a2=s=>s.fold(bl.start,bl.start,bl.end,bl.end),zU=(s,f)=>BI(s)===BI(f)&&o2(s)===o2(f),t3=(s,f,b,C,M,I)=>rs(jt(f,b,C),jt(f,b,M),(F,Y)=>F!==Y&&It(b,F,Y)?bl.after(s?F:Y):I).getOr(I),UU=(s,f)=>s.fold(Be,b=>!zU(b,f)),HU=(s,f,b,C,M)=>{const I=Pt(s,M);return Hs(s,b,I).map(Te(Pt,s)).fold(()=>C.map(i2),X=>bd(f,b,X).map(Te(t3,s,f,b,I,X)).filter(Te(UU,C))).filter(ku)},GU=(s,f)=>s?f.fold(Q(ue.some,bl.start),ue.none,Q(ue.some,bl.after),ue.none):f.fold(ue.none,Q(ue.some,bl.before),ue.none,Q(ue.some,bl.end)),X1=(s,f,b,C)=>{const M=Pt(s,C),I=bd(f,b,M);return bd(f,b,M).bind(Te(GU,s)).orThunk(()=>HU(s,f,b,I,C))},n3=s=>he(s.selection.getSel().modify),FI=(s,f,b)=>{const C=s?1:-1;return f.setRng(kt(b.container(),b.offset()+C).toRange()),f.getSel().modify("move",s?"forward":"backward","word"),!0},r3=(s,f)=>{const b=f.selection.getRng(),C=s?kt.fromRangeEnd(b):kt.fromRangeStart(b);return n3(f)?s&&r_(C)?FI(!0,f.selection,C):!s&&Z0(C)?FI(!1,f.selection,C):!1:!1};var _d;(function(s){s[s.Br=0]="Br",s[s.Block=1]="Block",s[s.Wrap=2]="Wrap",s[s.Eol=3]="Eol"})(_d||(_d={}));const s2=(s,f)=>s===wa.Backwards?xn(f):f,WU=(s,f,b)=>s===wa.Forwards?f.next(b):f.prev(b),YU=(s,f,b,C)=>Ko(C.getNode(f===wa.Forwards))?_d.Br:vu(b,C)===!1?_d.Block:_d.Wrap,jU=(s,f,b,C)=>{const M=id(b);let I=C;const F=[];for(;I;){const Y=WU(f,M,I);if(!Y)break;if(Ko(Y.getNode(!1)))return f===wa.Forwards?{positions:s2(f,F).concat([Y]),breakType:_d.Br,breakAt:ue.some(Y)}:{positions:s2(f,F),breakType:_d.Br,breakAt:ue.some(Y)};if(!Y.isVisible()){I=Y;continue}if(s(I,Y)){const X=YU(b,f,I,Y);return{positions:s2(f,F),breakType:X,breakAt:ue.some(Y)}}F.push(Y),I=Y}return{positions:s2(f,F),breakType:_d.Eol,breakAt:ue.none()}},ZU=(s,f,b,C)=>f(b,C).breakAt.map(M=>{const I=f(b,M).positions;return s===wa.Backwards?I.concat(M):[M].concat(I)}).getOr([]),o3=(s,f)=>Bn(s,(b,C)=>b.fold(()=>ue.some(C),M=>rs(gn(M.getClientRects()),gn(C.getClientRects()),(I,F)=>{const Y=Math.abs(f-I.left);return Math.abs(f-F.left)<=Y?C:M}).or(b)),ue.none()),cc=(s,f)=>gn(f.getClientRects()).bind(b=>o3(s,b.left)),Hx=Te(jU,kt.isAbove,-1),Gx=Te(jU,kt.isBelow,1),Wm=Te(ZU,-1,Hx),VI=Te(ZU,1,Gx),i3=(s,f)=>Hx(s,f).breakAt.isNone(),Wx=(s,f)=>Gx(s,f).breakAt.isNone(),qU=s=>Ts(s).map(f=>[f].concat(Gx(s,f).positions)).getOr([]),KU=s=>Pc(s).map(f=>Hx(s,f).positions.concat(f)).getOr([]),XU=(s,f)=>cc(Wm(s,f),f),JU=(s,f)=>cc(VI(s,f),f),QU=Eo,a3=(s,f)=>Math.abs(s.left-f),vf=(s,f)=>Math.abs(s.right-f),eH=s=>Is(s,"node"),s3=(s,f)=>Nu(s,(b,C)=>{const M=Math.min(a3(b,f),vf(b,f)),I=Math.min(a3(C,f),vf(C,f));return I===M&&eH(C)&&QU(C.node)||I<M?C:b}),tH=s=>{const f=b=>et(b,C=>{const M=Zf(C);return M.node=s,M});if(Rn(s))return f(s.getClientRects());if(Zt(s)){const b=s.ownerDocument.createRange();return b.setStart(s,0),b.setEnd(s,s.data.length),f(b.getClientRects())}else return[]},l3=s=>Kt(s,tH);var Yx;(function(s){s[s.Up=-1]="Up",s[s.Down=1]="Down"})(Yx||(Yx={}));const zI=(s,f,b,C)=>{let M=C;for(;M=dm(M,s,q0,f);)if(b(M))return},l2=(s,f,b,C,M,I)=>{let F=0;const Y=[],X=fe=>{let ve=l3([fe]);s===-1&&(ve=ve.reverse());for(let De=0;De<ve.length;De++){const Ie=ve[De];if(!b(Ie,ae)){if(Y.length>0&&f(Ie,vt(Y))&&F++,Ie.line=F,M(Ie))return!0;Y.push(Ie)}}return!1},ae=vt(I.getClientRects());if(!ae)return Y;const de=I.getNode();return de&&(X(de),zI(s,C,X,de)),Y},UI=(s,f)=>f.line>s,c3=(s,f)=>f.line===s,u3=Te(l2,Yx.Up,Kf,Xg),d3=Te(l2,Yx.Down,Xg,Kf),h3=s=>vt(s.getClientRects()),jx=(s,f,b,C)=>{const M=id(f);let I,F,Y,X;const ae=[];let de=0;s===1?(I=M.next,F=Xg,Y=Kf,X=kt.after(C)):(I=M.prev,F=Kf,Y=Xg,X=kt.before(C));const fe=h3(X);do{if(!X.isVisible())continue;const ve=h3(X);if(Y(ve,fe))continue;ae.length>0&&F(ve,vt(ae))&&de++;const De=Zf(ve);if(De.position=X,De.line=de,b(De))return ae;ae.push(De)}while(X=I(X));return ae},Zx=s=>f=>UI(s,f),c2=s=>f=>c3(s,f),yf=(s,f)=>{s.selection.setRng(f),Uv(s,s.selection.getRng())},u2=(s,f,b)=>ue.some(q1(s,f,b)),HI=(s,f,b,C,M,I)=>{const F=f===wa.Forwards,Y=id(s.getBody()),X=Te(hm,F?Y.next:Y.prev),ae=F?C:M;if(!b.collapsed){const Ie=Jg(b);if(I(Ie))return gf(f,s,Ie,f===wa.Backwards,!1);if(RI(s)){const Me=b.cloneRange();return Me.collapse(f===wa.Backwards),ue.from(Me)}}const de=xv(f,s.getBody(),b);if(ae(de))return Z1(s,de.getNode(!F));let fe=X(de);const ve=kg(b);if(fe)fe=Pt(F,fe);else return ve?ue.some(b):ue.none();if(ae(fe))return gf(f,s,fe.getNode(!F),F,!1);const De=X(fe);return De&&ae(De)&&Vy(fe,De)?gf(f,s,De.getNode(!F),F,!1):ve?u2(s,fe.toRange(),!1):ue.none()},qx=(s,f,b,C,M,I)=>{const F=xv(f,s.getBody(),b),Y=vt(F.getClientRects()),X=f===Yx.Down,ae=s.getBody();if(!Y)return ue.none();if(RI(s)){const Re=X?kt.fromRangeEnd(b):kt.fromRangeStart(b);return(X?JU:XU)(ae,Re).orThunk(()=>ue.from(Re)).map(nt=>nt.toRange())}const fe=(X?d3:u3)(ae,Zx(1),F),ve=mt(fe,c2(1)),De=Y.left,Ie=s3(ve,De);if(Ie&&I(Ie.node)){const Re=Math.abs(De-Ie.left),qe=Math.abs(De-Ie.right);return gf(f,s,Ie.node,Re<qe,!1)}let Me;if(C(F)?Me=F.getNode():M(F)?Me=F.getNode(!0):Me=Jg(b),Me){const Re=jx(f,ae,Zx(1),Me);let qe=s3(mt(Re,c2(1)),De);if(qe||(qe=vt(mt(Re,c2(0))),qe))return u2(s,qe.position.toRange(),!1)}return ve.length===0?Kx(s,X).filter(X?M:C).map(Re=>q1(s,Re.toRange(),!1)):ue.none()},Kx=(s,f)=>{const b=s.selection.getRng(),C=f?kt.fromRangeEnd(b):kt.fromRangeStart(b),M=_E(C.container(),s.getBody());if(f){const I=Gx(M,C);return oo(I.positions)}else{const I=Hx(M,C);return gn(I.positions)}},J1=(s,f,b)=>Kx(s,f).filter(b).exists(C=>(s.selection.setRng(C.toRange()),!0)),d2=(s,f)=>{const b=s.dom.createRng();b.setStart(f.container(),f.offset()),b.setEnd(f.container(),f.offset()),s.selection.setRng(b)},GI=(s,f)=>{s?f.setAttribute("data-mce-selected","inline-boundary"):f.removeAttribute("data-mce-selected")},f3=(s,f,b)=>OI(f,b).map(C=>(d2(s,C),b)),nH=(s,f,b)=>{const C=kt.fromRangeStart(s);if(s.collapsed)return C;{const M=kt.fromRangeEnd(s);return b?ls(f,M).getOr(M):Es(f,C).getOr(C)}},p3=(s,f,b)=>{const C=s.getBody(),M=nH(s.selection.getRng(),C,b),I=Te(Er,s);return X1(b,I,C,M).bind(Y=>f3(s,f,Y))},rH=(s,f,b)=>{const C=et(fa(Ve.fromDom(f.getRoot()),'*[data-mce-selected="inline-boundary"]'),F=>F.dom),M=mt(C,s),I=mt(b,s);Fe(Mn(M,I),Te(GI,!1)),Fe(Mn(I,M),Te(GI,!0))},m3=(s,f)=>{const b=f.get();if(s.selection.isCollapsed()&&!s.composing&&b){const C=kt.fromRangeStart(s.selection.getRng());kt.isTextPosition(C)&&!Cn(C)&&(d2(s,rS(b,C)),f.set(null))}},FY=(s,f,b,C)=>{if(f.selection.isCollapsed()){const M=mt(C,s);Fe(M,I=>{const F=kt.fromRangeStart(f.selection.getRng());bd(s,f.getBody(),F).bind(Y=>f3(f,b,Y))})}},g3=(s,f,b)=>am(s)?p3(s,f,b).isSome():!1,y3=(s,f,b)=>am(f)?r3(s,f):!1,oH=s=>{const f=Vi(null),b=Te(Er,s);return s.on("NodeChange",C=>{am(s)&&(rH(b,s.dom,C.parents),m3(s,f),FY(b,s,f,C.parents))}),f},iH=Te(y3,!0),aH=Te(y3,!1),h2=(s,f,b)=>{if(am(s)){const C=Kx(s,f).getOrThunk(()=>{const M=s.selection.getRng();return f?kt.fromRangeEnd(M):kt.fromRangeStart(M)});return bd(Te(Er,s),s.getBody(),C).exists(M=>{const I=i2(M);return OI(b,I).exists(F=>(d2(s,F),!0))})}else return!1},sH=(s,f)=>{const b=document.createRange();return b.setStart(s.container(),s.offset()),b.setEnd(f.container(),f.offset()),b},lH=s=>rs(Ts(s),Pc(s),(f,b)=>{const C=Pt(!0,f),M=Pt(!1,b);return Es(s,C).forall(I=>I.isEqual(M))}).getOr(!0),WI=(s,f)=>b=>OI(f,b).map(C=>()=>d2(s,C)),b3=(s,f,b,C)=>{const M=s.getBody(),I=Te(Er,s);s.undoManager.ignore(()=>{s.selection.setRng(sH(b,C)),Tr(s),bd(I,M,kt.fromRangeStart(s.selection.getRng())).map(a2).bind(WI(s,f)).each(Qt)}),s.nodeChanged()},s0=(s,f)=>{const b=Kd(f,s);return b||s},_3=(s,f,b,C)=>{const M=s0(s.getBody(),C.container()),I=Te(Er,s),F=bd(I,M,C);return F.bind(X=>b?X.fold(Ee(ue.some(a2(X))),ue.none,Ee(ue.some(i2(X))),ue.none):X.fold(ue.none,Ee(ue.some(i2(X))),ue.none,Ee(ue.some(a2(X))))).map(WI(s,f)).getOrThunk(()=>{const X=Qd(b,M,C),ae=X.bind(de=>bd(I,M,de));return rs(F,ae,()=>jt(I,M,C).bind(de=>lH(de)?ue.some(()=>{ot(s,b,Ve.fromDom(de))}):ue.none())).getOrThunk(()=>ae.bind(()=>X.map(de=>()=>{b?b3(s,f,C,de):b3(s,f,de,C)})))})},Xx=(s,f,b)=>{if(s.selection.isCollapsed()&&am(s)){const C=kt.fromRangeStart(s.selection.getRng());return _3(s,f,b,C)}return ue.none()},S3=s=>wl(s)>1,f2=(s,f)=>{const b=Ve.fromDom(s.getBody()),C=Ve.fromDom(s.selection.getStart()),M=dd(C,b);return ht(M,f).fold(Ee(M),I=>M.slice(0,I))},Ym=s=>wl(s)===1,x3=s=>f2(s,f=>s.schema.isBlock(Co(f))||S3(f)),Du=s=>f2(s,f=>s.schema.isBlock(Co(f))),jm=(s,f)=>{const b=Te(sf,s);return Kt(f,C=>b(C)?[C.dom]:[])},p2=s=>{const f=Du(s);return jm(s,f)},cH=(s,f,b,C)=>{const M=jm(f,C);if(M.length===0)ot(f,s,b);else{const I=BN(b.dom,M);f.selection.setRng(I.toRange())}},C3=(s,f)=>{const b=mt(x3(s),Ym);return oo(b).bind(C=>{const M=kt.fromRangeStart(s.selection.getRng());return ao(f,M,C.dom)&&!ES(C)?ue.some(()=>cH(f,s,C,b)):ue.none()})},uH=(s,f)=>{const b=f.parentElement;return Ko(f)&&!q(b)&&s.dom.isEmpty(b)},dH=s=>ES(Ve.fromDom(s)),w3=(s,f)=>{const b=s.selection.getStart(),C=uH(s,b)||dH(b)?BN(b,f):mA(s.selection.getRng(),f);s.selection.setRng(C.toRange())},hH=(s,f)=>{const b=Mn(f,p2(s));b.length>0&&w3(s,b)},E3=s=>Zt(s.startContainer),T3=s=>s.startOffset===0&&E3(s),fH=(s,f)=>{const b=f.startContainer.parentElement;return!q(b)&&sf(s,Ve.fromDom(b))},pH=s=>{const f=s.startContainer.parentNode,b=s.endContainer.parentNode;return!q(f)&&!q(b)&&f.isEqualNode(b)},Q1=s=>{const f=s.endContainer;return s.endOffset===(Zt(f)?f.length:f.childNodes.length)},YI=s=>pH(s)&&Q1(s),A3=s=>!s.endContainer.isEqualNode(s.commonAncestorContainer),M3=s=>YI(s)||A3(s),jI=s=>{const f=s.selection.getRng();return T3(f)&&fH(s,f)&&M3(f)},mH=s=>{if(jI(s)){const f=p2(s);return ue.some(()=>{Tr(s),hH(s,f)})}else return ue.none()},ZI=(s,f)=>s.selection.isCollapsed()?C3(s,f):mH(s),gH=(s,f)=>Ci(s,b=>hl(b.dom),b=>f.isBlock(Co(b))),vH=s=>gH(Ve.fromDom(s.selection.getStart()),s.schema),yH=s=>{const f=s.selection.getRng();return f.collapsed&&(E3(f)||s.dom.isEmpty(f.startContainer))&&!vH(s)},Jx=s=>(yH(s)&&w3(s,[]),!0),qI=(s,f,b)=>re(b)?ue.some(()=>{s._selectionOverrides.hideFakeCaret(),ot(s,f,Ve.fromDom(b))}):ue.none(),k3=(s,f)=>{const b=f?Zv:km,C=f?wa.Forwards:wa.Backwards,M=xv(C,s.getBody(),s.selection.getRng());return b(M)?qI(s,f,M.getNode(!f)):ue.from(Pt(f,M)).filter(I=>b(I)&&Vy(M,I)).bind(I=>qI(s,f,I.getNode(!f)))},bH=(s,f)=>{const b=s.selection.getNode();return Gi(b)?qI(s,f,b):ue.none()},KI=(s,f)=>s.selection.isCollapsed()?k3(s,f):bH(s,f),Hc=s=>Sa(s,f=>Fs(f.dom)||Eo(f.dom)).exists(f=>Fs(f.dom)),XI=s=>ea(s??"").getOr(0),m2=(s,f)=>{const b=s||ys(f)?"margin":"padding",C=gc(f,"direction")==="rtl"?"-right":"-left";return b+C},D3=(s,f,b,C,M,I)=>{const F=m2(b,Ve.fromDom(I)),Y=XI(s.getStyle(I,F));if(f==="outdent"){const X=Math.max(0,Y-C);s.setStyle(I,F,X?X+M:"")}else{const X=Y+C+M;s.setStyle(I,F,X)}},JI=(s,f)=>Wt(f,b=>{const C=m2(Ay(s),b),M=bg(b,C).map(XI).getOr(0);return s.dom.getContentEditable(b.dom)!=="false"&&M>0}),P3=s=>{const f=I3(s);return!s.mode.isReadOnly()&&(f.length>1||JI(s,f))},R3=s=>ol(s)||Rf(s),_H=s=>Kl(s).exists(R3),I3=s=>mt(Gu(s.selection.getSelectedBlocks()),f=>!R3(f)&&!_H(f)&&Hc(f)),$3=(s,f)=>{var b,C;const{dom:M}=s,I=Xw(s),F=(C=(b=/[a-z%]+$/i.exec(I))===null||b===void 0?void 0:b[0])!==null&&C!==void 0?C:"px",Y=XI(I),X=Ay(s);Fe(I3(s),ae=>{D3(M,f,X,Y,F,ae.dom)})},L3=s=>$3(s,"indent"),N3=s=>$3(s,"outdent"),O3=s=>{if(s.selection.isCollapsed()&&P3(s)){const f=s.dom,b=s.selection.getRng(),C=kt.fromRangeStart(b),M=f.getParent(b.startContainer,f.isBlock);if(M!==null&&ux(Ve.fromDom(M),C,s.schema))return ue.some(()=>N3(s))}return ue.none()},eb=(s,f,b)=>Wr([O3,LI,XA,(C,M)=>Xx(C,f,M),MI,Or,NI,KI,KA,ZI],C=>C(s,b)).filter(C=>s.selection.isEditable()),Tp=(s,f)=>{eb(s,f,!1).fold(()=>{s.selection.isEditable()&&(Tr(s),rr(s))},Qt)},l0=(s,f)=>{eb(s,f,!0).fold(()=>{s.selection.isEditable()&&Ln(s)},Qt)},g2=(s,f)=>{s.addCommand("delete",()=>{Tp(s,f)}),s.addCommand("forwardDelete",()=>{l0(s,f)})},y2=5,QI=400,e$=s=>s.touches===void 0||s.touches.length!==1?ue.none():ue.some(s.touches[0]),SH=(s,f)=>{const b=Math.abs(s.clientX-f.x),C=Math.abs(s.clientY-f.y);return b>y2||C>y2},B3=s=>{const f=zh(),b=Vi(!1),C=Yg(M=>{s.dispatch("longpress",{...M,type:"longpress"}),b.set(!0)},QI);s.on("touchstart",M=>{e$(M).each(I=>{C.cancel();const F={x:I.clientX,y:I.clientY,target:M.target};C.throttle(M),b.set(!1),f.set(F)})},!0),s.on("touchmove",M=>{C.cancel(),e$(M).each(I=>{f.on(F=>{SH(I,F)&&(f.clear(),b.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",M=>{C.cancel(),M.type!=="touchcancel"&&f.get().filter(I=>I.target.isEqualNode(M.target)).each(()=>{b.get()?M.preventDefault():s.dispatch("tap",{...M,type:"tap"})})},!0)},b2=(s,f)=>Vn(s,f.nodeName),xH=(s,f)=>Zt(f)?!0:Rn(f)?!b2(s.getBlockElements(),f)&&!bi(f)&&!Kr(s,f)&&!s_(f):!1,CH=(s,f,b)=>st(lx(Ve.fromDom(b),Ve.fromDom(f)),C=>b2(s,C.dom)),wH=(s,f)=>{if(Zt(f)){if(f.data.length===0)return!0;if(/^\s+$/.test(f.data))return!f.nextSibling||b2(s,f.nextSibling)||s_(f.nextSibling)}return!1},F3=s=>s.dom.create(xs(s),lv(s)),EH=s=>{const f=s.dom,b=s.selection,C=s.schema,M=C.getBlockElements(),I=b.getStart(),F=s.getBody();let Y,X,ae=!1;const de=xs(s);if(!I||!Rn(I))return;const fe=F.nodeName.toLowerCase();if(!C.isValidChild(fe,de.toLowerCase())||CH(M,F,I))return;const ve=b.getRng(),{startContainer:De,startOffset:Ie,endContainer:Me,endOffset:Re}=ve,qe=Xh(s);let nt=F.firstChild;for(;nt;)if(Rn(nt)&&vw(C,nt),xH(C,nt)){if(wH(M,nt)){X=nt,nt=nt.nextSibling,f.remove(X);continue}Y||(Y=F3(s),F.insertBefore(Y,nt),ae=!0),X=nt,nt=nt.nextSibling,Y.appendChild(X)}else Y=null,nt=nt.nextSibling;ae&&qe&&(ve.setStart(De,Ie),ve.setEnd(Me,Re),b.setRng(ve),s.nodeChanged())},V3=(s,f,b)=>{const C=Ve.fromDom(F3(s)),M=pa();Ki(C,M),b(f,C);const I=document.createRange();return I.setStartBefore(M.dom),I.setEndBefore(M.dom),I},z3=s=>{s.on("NodeChange",Te(EH,s))},t$=s=>f=>(" "+f.attr("class")+" ").indexOf(s)!==-1,VY=(s,f,b)=>function(C){const M=arguments,I=M[M.length-2],F=I>0?f.charAt(I-1):"";if(F==='"')return C;if(F===">"){const Y=f.lastIndexOf("<",I);if(Y!==-1&&f.substring(Y,I).indexOf('contenteditable="false"')!==-1)return C}return'<span class="'+b+'" data-mce-content="'+s.dom.encode(M[0])+'">'+s.dom.encode(typeof M[1]=="string"?M[1]:M[0])+"</span>"},zY=(s,f,b)=>{let C=f.length,M=b.content;if(b.format!=="raw"){for(;C--;)M=M.replace(f[C],VY(s,M,pE(s)));b.content=M}},UY=s=>{const f="contenteditable",b=" "+on.trim(qk(s))+" ",C=" "+on.trim(pE(s))+" ",M=t$(b),I=t$(C),F=Kk(s);F.length>0&&s.on("BeforeSetContent",Y=>{zY(s,F,Y)}),s.parser.addAttributeFilter("class",Y=>{let X=Y.length;for(;X--;){const ae=Y[X];M(ae)?ae.attr(f,"true"):I(ae)&&ae.attr(f,"false")}}),s.serializer.addAttributeFilter(f,Y=>{let X=Y.length;for(;X--;){const ae=Y[X];!M(ae)&&!I(ae)||(F.length>0&&ae.attr("data-mce-content")?(ae.name="#text",ae.type=3,ae.raw=!0,ae.value=ae.attr("data-mce-content")):ae.attr(f,null))}})},TH=s=>mc(Ve.fromDom(s.getBody()),"*[data-mce-caret]").map(f=>f.dom).getOrNull(),AH=(s,f)=>{f.hasAttribute("data-mce-caret")&&(Dh(f),s.selection.setRng(s.selection.getRng()),s.selection.scrollIntoView(f))},HY=(s,f)=>{const b=TH(s);if(b){if(f.type==="compositionstart"){f.preventDefault(),f.stopPropagation(),AH(s,b);return}pw(b)&&(AH(s,b),s.undoManager.add())}},MH=s=>{s.on("keyup compositionstart",Te(HY,s))},U3=Eo,GY=(s,f,b)=>HI(f,s,b,ud,Su,U3),kH=(s,f,b)=>qx(f,s,b,I=>ud(I)||FT(I),I=>Su(I)||Rr(I),U3),uc=s=>{const f=s.dom.create(xs(s));return f.innerHTML='<br data-mce-bogus="1">',f},n$=(s,f,b)=>{const C=id(s.getBody()),M=Te(hm,f===1?C.next:C.prev);if(b.collapsed){const I=s.dom.getParent(b.startContainer,"PRE");if(!I)return;if(!M(kt.fromRangeStart(b))){const Y=Ve.fromDom(uc(s));f===1?Hu(Ve.fromDom(I),Y):Zs(Ve.fromDom(I),Y),s.selection.select(Y.dom,!0),s.selection.collapse()}}},Qx=(s,f)=>{const b=f?wa.Forwards:wa.Backwards,C=s.selection.getRng();return GY(b,s,C).orThunk(()=>(n$(s,b,C),ue.none()))},DH=(s,f)=>{const b=f?1:-1,C=s.selection.getRng();return kH(b,s,C).orThunk(()=>(n$(s,b,C),ue.none()))},H3=(s,f)=>{const b=f?s.getEnd(!0):s.getStart(!0);return ir(b)?!f:f},r$=(s,f)=>Qx(s,H3(s.selection,f)).exists(b=>(yf(s,b),!0)),_2=(s,f)=>DH(s,f).exists(b=>(yf(s,b),!0)),G3=(s,f)=>J1(s,f,f?Su:ud),S2=(s,f)=>DI(s,!f).map(b=>{const C=b.toRange(),M=s.selection.getRng();return f?C.setStart(M.startContainer,M.startOffset):C.setEnd(M.endContainer,M.endOffset),C}).exists(b=>(yf(s,b),!0)),W3=s=>$e(["figcaption"],Co(s)),PH=(s,f,b)=>{const C=Te(Bo,f);return Sa(Ve.fromDom(s.container()),M=>b.isBlock(Co(M)),C).filter(W3)},RH=(s,f,b)=>f?Wx(s.dom,b):i3(s.dom,b),IH=(s,f)=>{const b=Ve.fromDom(s.getBody()),C=kt.fromRangeStart(s.selection.getRng());return PH(C,b,s.schema).exists(()=>{if(RH(b,f,C)){const I=V3(s,b,f?Ki:_g);return s.selection.setRng(I),!0}else return!1})},x2=(s,f)=>s.selection.isCollapsed()?IH(s,f):!1,$H=(s,f,b)=>{const C=s.selection.getRng(),M=kt.fromRangeStart(C);return s.getBody().firstChild===f&&i3(b,M)?(s.execCommand("InsertNewBlockBefore"),!0):!1},LH=(s,f)=>{const b=s.selection.getRng(),C=kt.fromRangeStart(b);return s.getBody().lastChild===f&&Wx(f,C)?(s.execCommand("InsertNewBlockAfter"),!0):!1},WY=(s,f)=>f?ue.from(s.dom.getParent(s.selection.getNode(),"details")).map(b=>LH(s,b)).getOr(!1):ue.from(s.dom.getParent(s.selection.getNode(),"summary")).bind(b=>ue.from(s.dom.getParent(b,"details")).map(C=>$H(s,C,b))).getOr(!1),Y3=(s,f)=>WY(s,f),o$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},YY=s=>et(s,f=>({...o$,...f})),NH=s=>et(s,f=>({...o$,...f})),j3=(s,f)=>f.keyCode===s.keyCode&&f.shiftKey===s.shiftKey&&f.altKey===s.altKey&&f.ctrlKey===s.ctrlKey&&f.metaKey===s.metaKey,OH=(s,f)=>Kt(YY(s),b=>j3(b,f)?[b]:[]),i$=(s,f)=>Kt(NH(s),b=>j3(b,f)?[b]:[]),gr=(s,...f)=>()=>s.apply(null,f),tb=(s,f)=>Ae(OH(s,f),b=>b.action()),a$=(s,f)=>Wr(i$(s,f),b=>b.action()),Z3=(s,f)=>{const b=f?wa.Forwards:wa.Backwards,C=s.selection.getRng();return HI(s,b,C,Zv,km,Gi).exists(M=>(yf(s,M),!0))},q3=(s,f)=>{const b=f?1:-1,C=s.selection.getRng();return qx(s,b,C,Zv,km,Gi).exists(M=>(yf(s,M),!0))},C2=(s,f)=>J1(s,f,f?km:Zv),K3=pu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),eC={...K3,none:s=>K3.none(s)},BH=(s,f)=>Pu(s,f,Be),Pu=(s,f,b)=>Kt(Ya(s),C=>fc(C,f)?b(C)?[C]:[]:Pu(C,f,b)),X3=(s,f,b=Xe)=>{if(b(f))return ue.none();if($e(s,Co(f)))return ue.some(f);const C=M=>fc(M,"table")||b(M);return pc(f,s.join(","),C)},J3=(s,f)=>X3(["td","th"],s,f),ZY=s=>BH(s,"th,td"),FH=(s,f)=>Th(s,"table",f),Q3=(s,f,b,C,M=Be)=>{const I=C===1;if(!I&&b<=0)return eC.first(s[0]);if(I&&b>=s.length-1)return eC.last(s[s.length-1]);{const F=b+C,Y=s[F];return M(Y)?eC.middle(f,Y):Q3(s,f,F,C,M)}},VH=(s,f)=>FH(s,f).bind(b=>{const C=ZY(b);return ht(C,I=>Bo(s,I)).map(I=>({index:I,all:C}))}),zH=(s,f,b)=>VH(s,b).fold(()=>eC.none(s),M=>Q3(M.all,s,M.index,1,f)),w2=(s,f,b)=>VH(s,b).fold(()=>eC.none(),M=>Q3(M.all,s,M.index,-1,f)),UH=(s,f)=>({left:s.left-f,top:s.top-f,right:s.right+f*2,bottom:s.bottom+f*2,width:s.width+f,height:s.height+f}),s$=(s,f)=>Kt(f,b=>{const C=UH(Zf(b.getBoundingClientRect()),-1);return[{x:C.left,y:s(C),cell:b},{x:C.right,y:s(C),cell:b}]}),eF=(s,f,b)=>Bn(s,(C,M)=>C.fold(()=>ue.some(M),I=>{const F=Math.sqrt(Math.abs(I.x-f)+Math.abs(I.y-b)),Y=Math.sqrt(Math.abs(M.x-f)+Math.abs(M.y-b));return ue.some(Y<F?M:I)}),ue.none()),l$=(s,f,b,C,M)=>{const I=fa(Ve.fromDom(b),"td,th,caption").map(Y=>Y.dom),F=mt(s$(s,I),Y=>f(Y,M));return eF(F,C,M).map(Y=>Y.cell)},tF=s=>s.bottom,HH=s=>s.top,GH=(s,f)=>s.y<f,YH=(s,f)=>s.y>f,jH=Te(l$,tF,GH),E2=Te(l$,HH,YH),ZH=(s,f)=>gn(f.getClientRects()).bind(b=>jH(s,b.left,b.top)).bind(b=>cc(KU(b),f)),qH=(s,f)=>oo(f.getClientRects()).bind(b=>E2(s,b.left,b.top)).bind(b=>cc(qU(b),f)),KH=(s,f,b)=>b.breakAt.exists(C=>s(f,C).breakAt.isSome()),c$=s=>s.breakType===_d.Wrap&&s.positions.length===0,XH=s=>s.breakType===_d.Br&&s.positions.length===1,nF=(s,f,b)=>{const C=s(f,b);return c$(C)||!Ko(b.getNode())&&XH(C)?!KH(s,f,C):C.breakAt.isNone()},rF=Te(nF,Hx),JH=Te(nF,Gx),QH=(s,f,b)=>{const C=kt.fromRangeStart(f);return mm(!s,b).exists(M=>M.isEqual(C))},e8=(s,f,b,C)=>{const M=s.selection.getRng(),I=f?1:-1;return aS()&&QH(f,M,b)?(gf(I,s,b,!f,!1).each(F=>{yf(s,F)}),!0):!1},t8=(s,f,b)=>ZH(f,b).orThunk(()=>gn(b.getClientRects()).bind(C=>o3(Wm(s,kt.before(f)),C.left))).getOr(kt.before(f)),n8=(s,f,b)=>qH(f,b).orThunk(()=>gn(b.getClientRects()).bind(C=>o3(VI(s,kt.after(f)),C.left))).getOr(kt.after(f)),oF=(s,f)=>{const b=f.getNode(s);return rl(b)?ue.some(b):ue.none()},u$=(s,f,b)=>{f.undoManager.transact(()=>{const C=s?Hu:Zs,M=V3(f,Ve.fromDom(b),C);yf(f,M)})},iF=(s,f,b)=>{const C=oF(!!f,b),M=f===!1;C.fold(()=>yf(s,b.toRange()),I=>mm(M,s.getBody()).filter(F=>F.isEqual(b)).fold(()=>yf(s,b.toRange()),F=>u$(f,s,I)))},aF=(s,f,b,C)=>{const M=s.selection.getRng(),I=kt.fromRangeStart(M),F=s.getBody();if(!f&&rF(C,I)){const Y=t8(F,b,I);return iF(s,f,Y),!0}else if(f&&JH(C,I)){const Y=n8(F,b,I);return iF(s,f,Y),!0}else return!1},sF=(s,f,b)=>ue.from(s.dom.getParent(s.selection.getNode(),"td,th")).bind(C=>ue.from(s.dom.getParent(C,"table")).map(M=>b(s,f,M,C))).getOr(!1),lF=(s,f)=>sF(s,f,e8),d$=(s,f)=>sF(s,f,aF),r8=s=>{const f=ld.exact(s,0,s,0);return Bv(f)},cF=(s,f,b)=>b.fold(ue.none,ue.none,(C,M)=>Yv(M).map(I=>r8(I)),C=>(s.execCommand("mceTableInsertRowAfter"),uF(s,f,C))),uF=(s,f,b)=>cF(s,f,zH(b,kr)),Aa=(s,f,b)=>cF(s,f,w2(b,kr)),dF=(s,f)=>{const b=["table","li","dl"],C=Ve.fromDom(s.getBody()),M=Y=>{const X=Co(Y);return Bo(Y,C)||$e(b,X)},I=s.selection.getRng(),F=Ve.fromDom(f?I.endContainer:I.startContainer);return J3(F,M).map(Y=>(FH(Y,M).each(de=>{s.model.table.clearSelectedCells(de.dom)}),s.selection.collapse(!f),(f?uF:Aa)(s,M,Y).each(de=>{s.selection.setRng(de)}),!0)).getOr(!1)},o8=(s,f,b)=>{const C=bn.os.isMacOS()||bn.os.isiOS();tb([{keyCode:Tn.RIGHT,action:gr(r$,s,!0)},{keyCode:Tn.LEFT,action:gr(r$,s,!1)},{keyCode:Tn.UP,action:gr(_2,s,!1)},{keyCode:Tn.DOWN,action:gr(_2,s,!0)},...C?[{keyCode:Tn.UP,action:gr(S2,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Tn.DOWN,action:gr(S2,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Tn.RIGHT,action:gr(lF,s,!0)},{keyCode:Tn.LEFT,action:gr(lF,s,!1)},{keyCode:Tn.UP,action:gr(d$,s,!1)},{keyCode:Tn.DOWN,action:gr(d$,s,!0)},{keyCode:Tn.UP,action:gr(d$,s,!1)},{keyCode:Tn.UP,action:gr(Y3,s,!1)},{keyCode:Tn.DOWN,action:gr(Y3,s,!0)},{keyCode:Tn.RIGHT,action:gr(Z3,s,!0)},{keyCode:Tn.LEFT,action:gr(Z3,s,!1)},{keyCode:Tn.UP,action:gr(q3,s,!1)},{keyCode:Tn.DOWN,action:gr(q3,s,!0)},{keyCode:Tn.RIGHT,action:gr(g3,s,f,!0)},{keyCode:Tn.LEFT,action:gr(g3,s,f,!1)},{keyCode:Tn.RIGHT,ctrlKey:!C,altKey:C,action:gr(iH,s,f)},{keyCode:Tn.LEFT,ctrlKey:!C,altKey:C,action:gr(aH,s,f)},{keyCode:Tn.UP,action:gr(x2,s,!1)},{keyCode:Tn.DOWN,action:gr(x2,s,!0)}],b).each(M=>{b.preventDefault()})},i8=(s,f)=>{s.on("keydown",b=>{b.isDefaultPrevented()||o8(s,f,b)})},Sd=(s,f)=>({container:s,offset:f}),nb=Vo.DOM,tC=s=>f=>s===f?-1:0,Zm=s=>f=>s.isBlock(f)||$e(["BR","IMG","HR","INPUT"],f.nodeName)||s.getContentEditable(f)==="false",nC=(s,f,b)=>{if(Zt(s)&&f>=0)return ue.some(Sd(s,f));{const C=jf(nb);return ue.from(C.backwards(s,f,tC(s),b)).map(M=>Sd(M.container,M.container.data.length))}},hF=(s,f,b)=>{if(Zt(s)&&f>=s.length)return ue.some(Sd(s,f));{const C=jf(nb);return ue.from(C.forwards(s,f,tC(s),b)).map(M=>Sd(M.container,0))}},rC=(s,f,b)=>{if(!Zt(s))return ue.none();const C=s.data;if(f>=0&&f<=C.length)return ue.some(Sd(s,f));{const M=jf(nb);return ue.from(M.backwards(s,f,tC(s),b)).bind(I=>{const F=I.container.data;return rC(I.container,f+F.length,b)})}},T2=(s,f,b)=>{if(!Zt(s))return ue.none();const C=s.data;if(f<=C.length)return ue.some(Sd(s,f));{const M=jf(nb);return ue.from(M.forwards(s,f,tC(s),b)).bind(I=>T2(I.container,f-C.length,b))}},oC=(s,f,b,C,M)=>{const I=jf(s,Zm(s));return ue.from(I.backwards(f,b,C,M))},fF=s=>s.collapsed&&Zt(s.startContainer),iC=s=>Al(s.toString().replace(/\u00A0/g," ")),aC=s=>s!==""&&`  \f
\r	\v`.indexOf(s)!==-1,c0=(s,f)=>s.substring(f.length),sC=(s,f,b)=>{let C;const M=b.charAt(0);for(C=f-1;C>=0;C--){const I=s.charAt(C);if(aC(I))return ue.none();if(M===I&&Ur(s,b,C,f))break}return ue.some(C)},xd=(s,f,b,C=0)=>{if(!fF(f))return ue.none();const M={text:"",offset:0},I=(Y,X,ae)=>(M.text=ae+M.text,M.offset+=X,sC(M.text,M.offset,b).getOr(X)),F=s.getParent(f.startContainer,s.isBlock)||s.getRoot();return oC(s,f.startContainer,f.startOffset,I,F).bind(Y=>{const X=f.cloneRange();if(X.setStart(Y.container,Y.offset),X.setEnd(f.endContainer,f.endOffset),X.collapsed)return ue.none();const ae=iC(X);return ae.lastIndexOf(b)!==0||c0(ae,b).length<C?ue.none():ue.some({text:c0(ae,b),range:X,trigger:b})})},ob=(s,f,b,C=0)=>_P(Ve.fromDom(f.startContainer)).fold(()=>xd(s,f,b,C),M=>{const I=s.createRng();I.selectNode(M.dom);const F=iC(I);return ue.some({range:I,text:c0(F,b),trigger:b})}),pF=s=>s.nodeType===mg,mF=s=>s.nodeType===Bu,gF=s=>{if(pF(s))return Sd(s,s.data.length);{const f=s.childNodes;return f.length>0?gF(f[f.length-1]):Sd(s,f.length)}},h$=(s,f)=>{const b=s.childNodes;return b.length>0&&f<b.length?h$(b[f],0):b.length>0&&mF(s)&&b.length===f?gF(b[b.length-1]):Sd(s,f)},a8=(s,f)=>{var b;const C=(b=s.getParent(f.container,s.isBlock))!==null&&b!==void 0?b:s.getRoot();return oC(s,f.container,f.offset,(M,I)=>I===0?-1:I,C).filter(M=>{const I=M.container.data.charAt(M.offset-1);return!aC(I)}).isSome()},s8=s=>f=>{const b=h$(f.startContainer,f.startOffset);return!a8(s,b)},lC=(s,f,b)=>Wr(b.triggers,C=>ob(s,f,C)),l8=(s,f)=>{const b=f(),C=s.selection.getRng();return lC(s.dom,C,b).bind(M=>vF(s,f,M))},vF=(s,f,b,C={})=>{var M;const I=f(),Y=(M=s.selection.getRng().startContainer.nodeValue)!==null&&M!==void 0?M:"",X=mt(I.lookupByTrigger(b.trigger),de=>b.text.length>=de.minChars&&de.matches.getOrThunk(()=>s8(s.dom))(b.range,Y,b.text));if(X.length===0)return ue.none();const ae=Promise.all(et(X,de=>de.fetch(b.text,de.maxResults,C).then(ve=>({matchText:b.text,items:ve,columns:de.columns,onAction:de.onAction,highlightOn:de.highlightOn}))));return ue.some({lookupData:ae,context:b})};var mh;(function(s){s[s.Error=0]="Error",s[s.Value=1]="Value"})(mh||(mh={}));const f$=(s,f,b)=>s.stype===mh.Error?f(s.serror):b(s.svalue),c8=s=>{const f=[],b=[];return Fe(s,C=>{f$(C,M=>b.push(M),M=>f.push(M))}),{values:f,errors:b}},u8=(s,f)=>s.stype===mh.Error?{stype:mh.Error,serror:f(s.serror)}:s,d8=(s,f)=>s.stype===mh.Value?{stype:mh.Value,svalue:f(s.svalue)}:s,h8=(s,f)=>s.stype===mh.Value?f(s.svalue):s,f8=(s,f)=>s.stype===mh.Error?f(s.serror):s,yF=s=>({stype:mh.Value,svalue:s}),bF=s=>({stype:mh.Error,serror:s}),Ps={fromResult:s=>s.fold(bF,yF),toResult:s=>f$(s,Us.error,Us.value),svalue:yF,partition:c8,serror:bF,bind:h8,bindError:f8,map:d8,mapError:u8,fold:f$},A2=s=>j(s)&&qn(s).length>100?" removed due to size":JSON.stringify(s,null,2),_F=s=>{const f=s.length>10?s.slice(0,10).concat([{path:[],getErrorInfo:Ee("... (only showing first ten failures)")}]):s;return et(f,b=>"Failed path: ("+b.path.join(" > ")+`)
`+b.getErrorInfo())},cC=(s,f)=>Ps.serror([{path:s,getErrorInfo:f}]),p8=(s,f,b)=>cC(s,()=>'Could not find valid *required* value for "'+f+'" in '+A2(b)),m8=(s,f)=>cC(s,()=>'Choice schema did not contain choice key: "'+f+'"'),g8=(s,f,b)=>cC(s,()=>'The chosen schema: "'+b+'" did not exist in branches: '+A2(f)),v8=(s,f)=>cC(s,Ee(f)),SF=(s,f,b,C)=>Nr(b,C).fold(()=>g8(s,b,C),I=>I.extract(s.concat(["branch: "+C]),f)),y8=(s,f)=>({extract:(M,I)=>Nr(I,s).fold(()=>m8(M,s),Y=>SF(M,I,f,Y)),toString:()=>"chooseOn("+s+"). Possible values: "+qn(f)}),xF=(s,f)=>f,b8=(s,f)=>K(s)&&K(f)?uC(s,f):f,p$=s=>(...f)=>{if(f.length===0)throw new Error("Can't merge zero objects");const b={};for(let C=0;C<f.length;C++){const M=f[C];for(const I in M)Vn(M,I)&&(b[I]=s(b[I],M[I]))}return b},uC=p$(b8),_8=p$(xF),CF=()=>({tag:"required",process:{}}),S8=s=>({tag:"defaultedThunk",process:s}),m$=s=>S8(Ee(s)),x8=()=>({tag:"option",process:{}}),C8=(s,f)=>s.length>0?Ps.svalue(uC(f,_8.apply(void 0,s))):Ps.svalue(f),g$=s=>Q(Ps.serror,rn)(s),wF={consolidateObj:(s,f)=>{const b=Ps.partition(s);return b.errors.length>0?g$(b.errors):C8(b.values,f)},consolidateArr:s=>{const f=Ps.partition(s);return f.errors.length>0?g$(f.errors):Ps.svalue(f.values)}},w8=(s,f,b,C)=>({tag:"field",key:s,newKey:f,presence:b,prop:C}),E8=(s,f)=>({tag:"custom",newKey:s,instantiator:f}),EF=(s,f,b)=>{switch(s.tag){case"field":return f(s.key,s.newKey,s.presence,s.prop);case"custom":return b(s.newKey,s.instantiator)}},M2=s=>{const f=(C,M)=>Ps.bindError(s(M),I=>v8(C,I)),b=Ee("val");return{extract:f,toString:b}},TF=M2(Ps.svalue),T8=(s,f,b,C)=>Nr(f,b).fold(()=>p8(s,b,f),C),AF=(s,f,b,C)=>{const M=Nr(s,f).getOrThunk(()=>b(s));return C(M)},A8=(s,f,b)=>b(Nr(s,f)),M8=(s,f,b,C)=>{const M=Nr(s,f).map(I=>I===!0?b(s):I);return C(M)},k8=(s,f,b,C,M)=>{const I=Y=>M.extract(f.concat([C]),Y),F=Y=>Y.fold(()=>Ps.svalue(ue.none()),X=>{const ae=M.extract(f.concat([C]),X);return Ps.map(ae,ue.some)});switch(s.tag){case"required":return T8(f,b,C,I);case"defaultedThunk":return AF(b,C,s.process,I);case"option":return A8(b,C,F);case"defaultedOptionThunk":return M8(b,C,s.process,F);case"mergeWithThunk":return AF(b,C,Ee({}),Y=>{const X=uC(s.process(b),Y);return I(X)})}},D8=(s,f,b)=>{const C={},M=[];for(const I of b)EF(I,(F,Y,X,ae)=>{const de=k8(X,s,f,F,ae);Ps.fold(de,fe=>{M.push(...fe)},fe=>{C[Y]=fe})},(F,Y)=>{C[F]=Y(f)});return M.length>0?Ps.serror(M):Ps.svalue(C)},v$=s=>({extract:(C,M)=>D8(C,M,s),toString:()=>`obj{
`+et(s,M=>EF(M,(I,F,Y,X)=>I+" -> "+X.toString(),(I,F)=>"state("+I+")")).join(`
`)+"}"}),MF=s=>({extract:(C,M)=>{const I=et(M,(F,Y)=>s.extract(C.concat(["["+Y+"]"]),F));return wF.consolidateArr(I)},toString:()=>"array("+s.toString()+")"}),ej=s=>M2(f=>s(f).fold(Ps.serror,Ps.svalue)),P8=(s,f,b)=>{const C=f.extract([s],b);return Ps.mapError(C,M=>({input:b,errors:M}))},k2=(s,f,b)=>Ps.toResult(P8(s,f,b)),kF=s=>`Errors: 
`+_F(s.errors).join(`
`)+`

Input object: `+A2(s.input),y$=(s,f)=>y8(s,yn(f,v$)),R8=Ee(TF),dC=(s,f)=>M2(b=>{const C=typeof b;return s(b)?Ps.svalue(b):Ps.serror(`Expected type: ${f} but got: ${C}`)}),DF=dC(_e,"number"),D2=dC(V,"string"),I8=dC(ie,"boolean"),b$=dC(he,"function"),ib=w8,PF=E8,_$=s=>ej(f=>$e(s,f)?Us.value(f):Us.error(`Unsupported value: "${f}", choose one of "${s.join(", ")}".`)),RF=(s,f)=>ib(s,s,CF(),f),IF=s=>RF(s,D2),$F=s=>RF(s,b$),LF=(s,f)=>ib(s,s,CF(),MF(f)),S$=(s,f)=>ib(s,s,x8(),f),P2=s=>S$(s,D2),$8=s=>S$(s,b$),L8=(s,f)=>ib(s,s,m$(f),R8()),ab=(s,f,b)=>ib(s,s,m$(f),b),Ma=(s,f)=>ab(s,f,DF),bf=(s,f)=>ab(s,f,D2),NF=(s,f,b)=>ab(s,f,_$(b)),OF=(s,f)=>ab(s,f,I8),x$=(s,f)=>ab(s,f,b$),N8=(s,f,b)=>ab(s,f,MF(b)),O8=IF("type"),B8=$F("fetch"),R2=$F("onAction"),sb=x$("onSetup",()=>be),tj=P2("text"),F8=P2("icon"),V8=P2("tooltip"),gh=P2("label"),z8=OF("active",!1),U8=OF("enabled",!0),C$=OF("primary",!1),H8=s=>L8("columns",s),u0=s=>bf("type",s),BF=v$([O8,IF("trigger"),Ma("minChars",1),H8(1),Ma("maxResults",10),$8("matches"),B8,R2,N8("highlightOn",[],D2)]),G8=s=>k2("Autocompleter",BF,{trigger:s.ch,...s}),w$=[U8,V8,F8,tj,sb],FF=[z8].concat(w$),VF=[x$("predicate",Xe),NF("scope","node",["node","editor"]),NF("position","selection",["node","selection","line"])],zF=w$.concat([u0("contextformbutton"),C$,R2,PF("original",Ge)]),E$=FF.concat([u0("contextformbutton"),C$,R2,PF("original",Ge)]),T$=w$.concat([u0("contextformbutton")]),A$=FF.concat([u0("contextformtogglebutton")]),W8=y$("type",{contextformbutton:zF,contextformtogglebutton:E$});v$([u0("contextform"),x$("initValue",Ee("")),gh,LF("commands",W8),S$("launch",y$("type",{contextformbutton:T$,contextformtogglebutton:A$}))].concat(VF));const Y8=s=>{const f=s.ui.registry.getAll().popups,b=yn(f,F=>G8(F).fold(Y=>{throw new Error(kF(Y))},Ge)),C=sg(vi(b,F=>F.trigger)),M=js(b);return{dataset:b,triggers:C,lookupByTrigger:F=>mt(M,Y=>Y.trigger===F)}},j8=(s,f)=>{const b=Yg(f.load,50);s.on("keypress compositionend",C=>{C.which!==27&&b.throttle()}),s.on("keydown",C=>{const M=C.which;M===8?b.throttle():M===27&&f.cancelIfNecessary()}),s.on("remove",b.cancel)},Z8=s=>{const f=zh(),b=Vi(!1),C=f.isSet,M=()=>{C()&&(b6(s),IS(s),b.set(!1),f.clear())},I=ae=>{C()||(y6(s,ae.range),f.set({trigger:ae.trigger,matchLength:ae.text.length}))},F=zt(()=>Y8(s)),Y=ae=>f.get().map(de=>ob(s.dom,s.selection.getRng(),de.trigger).bind(fe=>vF(s,F,fe,ae))).getOrThunk(()=>l8(s,F)),X=ae=>{Y(ae).fold(M,de=>{I(de.context),de.lookupData.then(fe=>{f.get().map(ve=>{const De=de.context;ve.trigger===De.trigger&&(De.text.length-ve.matchLength>=10?M():(f.set({...ve,matchLength:De.text.length}),b.get()?ZE(s,{lookupData:fe}):(b.set(!0),jE(s,{lookupData:fe}))))})})})};s.addCommand("mceAutocompleterReload",(ae,de)=>{const fe=j(de)?de.fetchOptions:{};X(fe)}),s.addCommand("mceAutocompleterClose",M),j8(s,{cancelIfNecessary:M,load:X})},HF=Qc().browser.isSafari(),GF=s=>ju(Ve.fromDom(s)),M$=(s,f)=>{var b;return s.startOffset===0&&s.endOffset===((b=f.textContent)===null||b===void 0?void 0:b.length)},I2=(s,f)=>ue.from(s.getParent(f.container(),"details")),$2=(s,f)=>I2(s,f).isSome(),q8=(s,f)=>{const b=ue.from(s.getParent(f.startContainer,"details")),C=ue.from(s.getParent(f.endContainer,"details"));if(b.isSome()||C.isSome()){const M=b.bind(I=>ue.from(s.select("summary",I)[0]));return ue.some({startSummary:M,startDetails:b,endDetails:C})}else return ue.none()},K8=(s,f)=>Ts(f).exists(b=>b.isEqual(s)),X8=(s,f)=>Pc(f).exists(b=>Ko(b.getNode())&&ls(f,b).exists(C=>C.isEqual(s))||b.isEqual(s)),J8=(s,f)=>f.startSummary.exists(b=>K8(s,b)),Q8=(s,f)=>f.startSummary.exists(b=>X8(s,b)),WF=(s,f)=>f.startDetails.exists(b=>ls(b,s).forall(C=>f.startSummary.exists(M=>!M.contains(s.container())&&M.contains(C.container())))),k$=(s,f,b)=>b.startDetails.exists(C=>Es(s,f).forall(M=>!C.contains(M.container()))),D$=(s,f)=>{const b=f.getNode();te(b)||s.selection.setCursorLocation(b,f.offset())},P$=(s,f,b)=>{const C=s.dom.getParent(f.container(),"details");if(C&&!C.open){const M=s.dom.select("summary",C)[0];M&&(b?Ts(M):Pc(M)).each(F=>D$(s,F))}else D$(s,f)},e7=(s,f)=>{const b=X=>X.contains(s.startContainer),C=X=>X.contains(s.endContainer),M=f.startSummary.exists(b),I=f.startSummary.exists(C),F=f.startDetails.forall(X=>f.endDetails.forall(ae=>X!==ae));return(M||I)&&!(M&&I)||F},YF=(s,f,b)=>{const{dom:C,selection:M}=s,I=s.getBody();if(b==="character"){const F=kt.fromRangeStart(M.getRng()),Y=C.getParent(F.container(),C.isBlock),X=I2(C,F),ae=Y&&C.isEmpty(Y),de=q(Y==null?void 0:Y.previousSibling),fe=q(Y==null?void 0:Y.nextSibling);return ae&&(f?fe:de)&&Qd(!f,I,F).exists(Ie=>$2(C,Ie)&&!$b(X,I2(C,Ie)))?!0:Qd(f,I,F).fold(Xe,ve=>{const De=I2(C,ve);if($2(C,ve)&&!$b(X,De)){if(f||P$(s,ve,!1),Y&&ae){if(f&&de)return!0;if(!f&&fe)return!0;P$(s,ve,f),s.dom.remove(Y)}return!0}else return!1})}else return!1},t7=(s,f,b,C)=>{const I=s.selection.getRng(),F=kt.fromRangeStart(I),Y=s.getBody();return C==="selection"?e7(I,f):b?Q8(F,f)||k$(Y,F,f):J8(F,f)||WF(F,f)},L2=(s,f,b)=>q8(s.dom,s.selection.getRng()).fold(()=>YF(s,f,b),C=>t7(s,C,f,b)||YF(s,f,b)),jF=(s,f,b)=>{const C=s.selection,M=C.getNode(),I=C.getRng(),F=kt.fromRangeStart(I);return La(M)?(b==="selection"&&M$(I,M)||ao(f,F,M)?GF(M):s.undoManager.transact(()=>{const Y=C.getSel();let{anchorNode:X,anchorOffset:ae,focusNode:de,focusOffset:fe}=Y??{};const ve=()=>{re(X)&&re(ae)&&re(de)&&re(fe)&&(Y==null||Y.setBaseAndExtent(X,ae,de,fe))},De=()=>{X=Y==null?void 0:Y.anchorNode,ae=Y==null?void 0:Y.anchorOffset,de=Y==null?void 0:Y.focusNode,fe=Y==null?void 0:Y.focusOffset},Ie=(Re,qe)=>{Fe(Re.childNodes,nt=>{jh(nt)&&qe.appendChild(nt)})},Me=s.dom.create("span",{"data-mce-bogus":"1"});Ie(M,Me),M.appendChild(Me),ve(),(b==="word"||b==="line")&&(Y==null||Y.modify("extend",f?"right":"left",b)),!C.isCollapsed()&&M$(C.getRng(),Me)?GF(M):(s.execCommand(f?"ForwardDelete":"Delete"),De(),Ie(Me,M),ve()),s.dom.remove(Me)}),!0):!1},qm=(s,f,b)=>L2(s,f,b)||HF&&jF(s,f,b)?ue.some(be):ue.none(),ZF=s=>(f,b,C={})=>{const M=f.getBody(),I={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:M,currentTarget:M,eventPhase:Event.AT_TARGET,originalTarget:M,explicitOriginalTarget:M,isTrusted:!1,srcElement:M,cancelable:!1,preventDefault:be,inputType:b},F=Bg(new InputEvent(s));return f.dispatch(s,{...F,...I,...C})},hC=ZF("input"),R$=ZF("beforeinput"),n7=Qc(),r7=n7.os,qF=r7.isMacOS()||r7.isiOS(),o7=n7.browser.isFirefox(),i7=(s,f,b)=>{const C=b.keyCode===Tn.BACKSPACE?"deleteContentBackward":"deleteContentForward",M=s.selection.isCollapsed(),I=M?"character":"selection",F=Y=>M?Y?"word":"line":"selection";a$([{keyCode:Tn.BACKSPACE,action:gr(O3,s)},{keyCode:Tn.BACKSPACE,action:gr(LI,s,!1)},{keyCode:Tn.DELETE,action:gr(LI,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(XA,s,!1)},{keyCode:Tn.DELETE,action:gr(XA,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(Xx,s,f,!1)},{keyCode:Tn.DELETE,action:gr(Xx,s,f,!0)},{keyCode:Tn.BACKSPACE,action:gr(Or,s,!1)},{keyCode:Tn.DELETE,action:gr(Or,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(qm,s,!1,I)},{keyCode:Tn.DELETE,action:gr(qm,s,!0,I)},...qF?[{keyCode:Tn.BACKSPACE,altKey:!0,action:gr(qm,s,!1,F(!0))},{keyCode:Tn.DELETE,altKey:!0,action:gr(qm,s,!0,F(!0))},{keyCode:Tn.BACKSPACE,metaKey:!0,action:gr(qm,s,!1,F(!1))}]:[{keyCode:Tn.BACKSPACE,ctrlKey:!0,action:gr(qm,s,!1,F(!0))},{keyCode:Tn.DELETE,ctrlKey:!0,action:gr(qm,s,!0,F(!0))}],{keyCode:Tn.BACKSPACE,action:gr(NI,s,!1)},{keyCode:Tn.DELETE,action:gr(NI,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(KI,s,!1)},{keyCode:Tn.DELETE,action:gr(KI,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(KA,s,!1)},{keyCode:Tn.DELETE,action:gr(KA,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(MI,s,!1)},{keyCode:Tn.DELETE,action:gr(MI,s,!0)},{keyCode:Tn.BACKSPACE,action:gr(ZI,s,!1)},{keyCode:Tn.DELETE,action:gr(ZI,s,!0)}],b).filter(Y=>s.selection.isEditable()).each(Y=>{b.preventDefault(),R$(s,C).isDefaultPrevented()||(Y(),hC(s,C))})},nj=(s,f,b)=>tb([{keyCode:Tn.BACKSPACE,action:gr(QA,s)},{keyCode:Tn.DELETE,action:gr(QA,s)},...qF?[{keyCode:Tn.BACKSPACE,altKey:!0,action:gr(Jx,s)},{keyCode:Tn.DELETE,altKey:!0,action:gr(Jx,s)},...b?[{keyCode:o7?224:91,action:gr(Jx,s)}]:[]]:[{keyCode:Tn.BACKSPACE,ctrlKey:!0,action:gr(Jx,s)},{keyCode:Tn.DELETE,ctrlKey:!0,action:gr(Jx,s)}]],f),a7=(s,f)=>{let b=!1;s.on("keydown",C=>{b=C.keyCode===Tn.BACKSPACE,C.isDefaultPrevented()||i7(s,f,C)}),s.on("keyup",C=>{C.isDefaultPrevented()||nj(s,C,b),b=!1})},ji=s=>{for(;s;){if(Rn(s)||Zt(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null},Km=(s,f)=>{const b=s.dom,C=s.schema.getMoveCaretBeforeOnEnterElements();if(!f)return;if(/^(LI|DT|DD)$/.test(f.nodeName)){const I=ji(f.firstChild);I&&/^(UL|OL|DL)$/.test(I.nodeName)&&f.insertBefore(b.doc.createTextNode(ko),f.firstChild)}const M=b.createRng();if(f.normalize(),f.hasChildNodes()){const I=new ri(f,f);let F=f,Y;for(;Y=I.current();){if(Zt(Y)){M.setStart(Y,0),M.setEnd(Y,0);break}if(C[Y.nodeName.toLowerCase()]){M.setStartBefore(Y),M.setEndBefore(Y);break}F=Y,Y=I.next()}Y||(M.setStart(F,0),M.setEnd(F,0))}else Ko(f)?f.nextSibling&&b.isBlock(f.nextSibling)?(M.setStartBefore(f),M.setEndBefore(f)):(M.setStartAfter(f),M.setEndAfter(f)):(M.setStart(f,0),M.setEnd(f,0));s.selection.setRng(M),Uv(s,M)},Gc=(s,f)=>{const b=s.getRoot();let C,M=f;for(;M!==b&&M&&s.getContentEditable(M)!=="false";){if(s.getContentEditable(M)==="true"){C=M;break}M=M.parentNode}return M!==b?C:b},N2=s=>ue.from(s.dom.getParent(s.selection.getStart(!0),s.dom.isBlock)),KF=s=>N2(s).fold(Ee(""),f=>f.nodeName.toUpperCase()),s7=s=>N2(s).filter(f=>Rf(Ve.fromDom(f))).isSome(),cb=s=>{s.innerHTML='<br data-mce-bogus="1">'},I$=(s,f,b)=>{const C=s.dom;ue.from(b.style).map(C.parseStyle).each(X=>{const de={...ja(Ve.fromDom(f)),...X};C.setStyles(f,de)});const M=ue.from(b.class).map(X=>X.split(/\s+/)),I=ue.from(f.className).map(X=>mt(X.split(/\s+/),ae=>ae!==""));rs(M,I,(X,ae)=>{const de=mt(ae,ve=>!$e(X,ve)),fe=[...X,...de];C.setAttrib(f,"class",fe.join(" "))});const F=["style","class"],Y=qo(b,(X,ae)=>!$e(F,ae));C.setAttribs(f,Y)},ub=(s,f)=>{if(xs(s).toLowerCase()===f.tagName.toLowerCase()){const C=lv(s);I$(s,f,C)}},$$=(s,f,b,C,M=!0,I,F)=>{const Y=s.dom,X=s.schema,ae=xs(s),de=b?b.nodeName.toUpperCase():"";let fe=f;const ve=X.getTextInlineElements();let De;I||de==="TABLE"||de==="HR"?De=Y.create(I||ae,F||{}):De=b.cloneNode(!1);let Ie=De;if(!M)Y.setAttrib(De,"style",null),Y.setAttrib(De,"class",null);else do if(ve[fe.nodeName]){if(hl(fe)||bi(fe))continue;const Me=fe.cloneNode(!1);Y.setAttrib(Me,"id",""),De.hasChildNodes()?(Me.appendChild(De.firstChild),De.appendChild(Me)):(Ie=Me,De.appendChild(Me))}while((fe=fe.parentNode)&&fe!==C);return ub(s,De),cb(Ie),De},l7=(s,f)=>s.dom.getParent(f,Ft),c7=(s,f,b)=>{let C=f;for(;C&&C!==s&&q(C.nextSibling);){const M=C.parentElement;if(!M||!b(M))return Ft(M);C=M}return!1},u7=(s,f,b)=>!f&&b.nodeName.toLowerCase()===xs(s)&&s.dom.isEmpty(b)&&c7(s.getBody(),b,C=>Vn(s.schema.getTextBlockElements(),C.nodeName.toLowerCase())),d7=(s,f,b)=>{var C,M,I;const F=f(xs(s)),Y=l7(s,b);Y&&(s.dom.insertAfter(F,Y),Km(s,F),((I=(M=(C=b.parentElement)===null||C===void 0?void 0:C.childNodes)===null||M===void 0?void 0:M.length)!==null&&I!==void 0?I:0)>1&&s.dom.remove(b))},h7=(s,f)=>s.firstChild&&s.firstChild.nodeName===f,XF=s=>{var f;return((f=s.parentNode)===null||f===void 0?void 0:f.firstChild)===s},JF=(s,f)=>{const b=s==null?void 0:s.parentNode;return re(b)&&b.nodeName===f},QF=s=>re(s)&&/^(OL|UL|LI)$/.test(s.nodeName),L$=s=>re(s)&&/^(LI|DT|DD)$/.test(s.nodeName),f7=s=>QF(s)&&QF(s.parentNode),O2=s=>{const f=s.parentNode;return L$(f)?f:s},fC=(s,f,b)=>{let C=s[b?"firstChild":"lastChild"];for(;C&&!Rn(C);)C=C[b?"nextSibling":"previousSibling"];return C===f},N$=s=>Bn(vi(ja(Ve.fromDom(s)),(f,b)=>`${b}: ${f};`),(f,b)=>f+b,""),p7=(s,f,b,C,M)=>{const I=s.dom,F=s.selection.getRng(),Y=b.parentNode;if(b===s.getBody()||!Y)return;f7(b)&&(M="LI");const X=L$(C)?N$(C):void 0;let ae=L$(C)&&X?f(M,{style:N$(C)}):f(M);if(fC(b,C,!0)&&fC(b,C,!1))if(JF(b,"LI")){const de=O2(b);I.insertAfter(ae,de),XF(b)?I.remove(de):I.remove(b)}else I.replace(ae,b);else if(fC(b,C,!0))JF(b,"LI")?(I.insertAfter(ae,O2(b)),ae.appendChild(I.doc.createTextNode(" ")),ae.appendChild(b)):Y.insertBefore(ae,b),I.remove(C);else if(fC(b,C,!1))I.insertAfter(ae,O2(b)),I.remove(C);else{b=O2(b);const de=F.cloneRange();de.setStartAfter(C),de.setEndAfter(b);const fe=de.extractContents();if(M==="LI"&&h7(fe,"LI")){const ve=mt(et(ae.children,Ve.fromDom),Ke(Ns("br")));ae=fe.firstChild,I.insertAfter(fe,b),Fe(ve,De=>_g(Ve.fromDom(ae),De)),X&&ae.setAttribute("style",X)}else I.insertAfter(fe,b),I.insertAfter(ae,b);I.remove(C)}Km(s,ae)},m7=s=>{Fe(Od(Ve.fromDom(s),ql),f=>{const b=f.dom;b.nodeValue=Al(b.data)})},rj=(s,f)=>{const b=s.dom.getParent(f,"ol,ul,dl");return b!==null&&s.dom.getContentEditableParent(b)==="false"},O$=(s,f)=>f&&f.nodeName==="A"&&s.isEmpty(f),B$=(s,f)=>s.nodeName===f||s.previousSibling&&s.previousSibling.nodeName===f,F$=(s,f)=>re(f)&&s.isBlock(f)&&!/^(TD|TH|CAPTION|FORM)$/.test(f.nodeName)&&!/^(fixed|absolute)/i.test(f.style.position)&&s.isEditable(f.parentNode)&&s.getContentEditable(f)!=="false",g7=(s,f,b)=>{var C;const M=[];if(!b)return;let I=b;for(;I=I.firstChild;){if(s.isBlock(I))return;Rn(I)&&!f[I.nodeName.toLowerCase()]&&M.push(I)}let F=M.length;for(;F--;)I=M[F],(!I.hasChildNodes()||I.firstChild===I.lastChild&&((C=I.firstChild)===null||C===void 0?void 0:C.nodeValue)===""||O$(s,I))&&s.remove(I)},B2=(s,f,b)=>Zt(f)?s?b===1&&f.data.charAt(b-1)===Na?0:b:b===f.data.length-1&&f.data.charAt(b)===Na?f.data.length:b:b,v7=s=>{const f=s.cloneRange();return f.setStart(s.startContainer,B2(!0,s.startContainer,s.startOffset)),f.setEnd(s.endContainer,B2(!1,s.endContainer,s.endOffset)),f},eV=s=>{let f=s;do Zt(f)&&(f.data=f.data.replace(/^[\r\n]+/,"")),f=f.firstChild;while(f)},y7=(s,f,b,C,M)=>{var I,F;const Y=s.dom,X=(I=Gc(Y,C))!==null&&I!==void 0?I:Y.getRoot();let ae=Y.getParent(C,Y.isBlock);if(!ae||!F$(Y,ae)){if(ae=ae||X,!ae.hasChildNodes()){const De=Y.create(f);return ub(s,De),ae.appendChild(De),b.setStart(De,0),b.setEnd(De,0),De}let de=C;for(;de&&de.parentNode!==ae;)de=de.parentNode;let fe;for(;de&&!Y.isBlock(de);)fe=de,de=de.previousSibling;const ve=(F=fe==null?void 0:fe.parentElement)===null||F===void 0?void 0:F.nodeName;if(fe&&ve&&s.schema.isValidChild(ve,f.toLowerCase())){const De=fe.parentNode,Ie=Y.create(f);for(ub(s,Ie),De.insertBefore(Ie,fe),de=fe;de&&!Y.isBlock(de);){const Me=de.nextSibling;Ie.appendChild(de),de=Me}b.setStart(C,M),b.setEnd(C,M)}}return C},b7=(s,f)=>{f.normalize();const b=f.lastChild;(!b||Rn(b)&&/^(left|right)$/gi.test(s.getStyle(b,"float",!0)))&&s.add(f,"br")},oj=(s,f)=>{const b=Zw(s);return oe(f)?!1:V(b)?$e(on.explode(b),f.nodeName.toLowerCase()):b},tV={insert:(s,f)=>{let b,C,M,I,F=!1;const Y=s.dom,X=s.schema,ae=X.getNonEmptyElements(),de=s.selection.getRng(),fe=xs(s),ve=Ve.fromDom(de.startContainer),De=Mf(ve,de.startOffset),Ie=De.exists(Ut=>eu(Ut)&&!kr(Ut)),Me=de.collapsed&&Ie,Re=(Ut,$n)=>$$(s,b,an,Ht,Rk(s),Ut,$n),qe=Ut=>{const $n=B2(Ut,b,C);if(Zt(b)&&(Ut?$n>0:$n<b.data.length))return!1;if(b.parentNode===an&&F&&!Ut||Ut&&Rn(b)&&b===an.firstChild)return!0;if(B$(b,"TABLE")||B$(b,"HR"))return F&&!Ut||!F&&Ut;const Qn=new ri(b,an);Zt(b)&&(Ut&&$n===0?Qn.prev():!Ut&&$n===b.data.length&&Qn.next());let zr;for(;zr=Qn.current();){if(Rn(zr)){if(!zr.getAttribute("data-mce-bogus")){const Jr=zr.nodeName.toLowerCase();if(ae[Jr]&&Jr!=="br")return!1}}else if(Zt(zr)&&!bc(zr.data))return!1;Ut?Qn.prev():Qn.next()}return!0},nt=()=>{let Ut;return/^(H[1-6]|PRE|FIGURE)$/.test(M)&&_n!=="HGROUP"?Ut=Re(fe):Ut=Re(),oj(s,I)&&F$(Y,I)&&Y.isEmpty(an,void 0,{includeZwsp:!0})?Ut=Y.split(I,an):Y.insertAfter(Ut,an),Km(s,Ut),Ut};Em(Y,de).each(Ut=>{de.setStart(Ut.startContainer,Ut.startOffset),de.setEnd(Ut.endContainer,Ut.endOffset)}),b=de.startContainer,C=de.startOffset;const tt=!!(f&&f.shiftKey),gt=!!(f&&f.ctrlKey);Rn(b)&&b.hasChildNodes()&&!Me&&(F=C>b.childNodes.length-1,b=b.childNodes[Math.min(C,b.childNodes.length-1)]||b,F&&Zt(b)?C=b.data.length:C=0);const Ht=Gc(Y,b);if(!Ht||rj(s,b))return;tt||(b=y7(s,fe,de,b,C));let an=Y.getParent(b,Y.isBlock)||Y.getRoot();I=re(an==null?void 0:an.parentNode)?Y.getParent(an.parentNode,Y.isBlock):null,M=an?an.nodeName.toUpperCase():"";const _n=I?I.nodeName.toUpperCase():"";if(_n==="LI"&&!gt){const Ut=I;an=Ut,I=Ut.parentNode,M=_n}if(Rn(I)&&u7(s,tt,an))return d7(s,Re,an);if(/^(LI|DT|DD)$/.test(M)&&Rn(I)&&Y.isEmpty(an)){p7(s,Re,I,an,fe);return}if(!Me&&(an===s.getBody()||!F$(Y,an)))return;const At=an.parentNode;let St;if(Me)St=Re(fe),De.fold(()=>{Ki(ve,Ve.fromDom(St))},Ut=>{Zs(Ut,Ve.fromDom(St))}),s.selection.setCursorLocation(St,0);else if(Gp(an))St=Dh(an),Y.isEmpty(an)&&cb(an),ub(s,St),Km(s,St);else if(qe(!1))St=nt();else if(qe(!0)&&At){St=At.insertBefore(Re(),an);const Ut=rw(Ve.fromDom(de.startContainer))&&de.collapsed;Km(s,B$(an,"HR")||Ut?St:an)}else{const Ut=v7(de).cloneRange();Ut.setEndAfter(an);const $n=Ut.extractContents();m7($n),eV($n),St=$n.firstChild,Y.insertAfter($n,an),g7(Y,ae,St),b7(Y,an),Y.isEmpty(an)&&cb(an),St.normalize(),Y.isEmpty(St)?(Y.remove(St),nt()):(ub(s,St),Km(s,St))}Y.setAttrib(St,"id",""),s.dispatch("NewBlock",{newBlock:St})},fakeEventName:"insertParagraph"},_7=(s,f,b)=>{const C=new ri(f,b);let M;const I=s.getNonEmptyElements();for(;M=C.next();)if(I[M.nodeName.toLowerCase()]||Zt(M)&&M.length>0)return!0;return!1},nV=(s,f,b)=>{const C=s.dom.createRng();b?(C.setStartBefore(f),C.setEndBefore(f)):(C.setStartAfter(f),C.setEndAfter(f)),s.selection.setRng(C),Uv(s,C)},S7=(s,f)=>{const b=s.selection,C=s.dom,M=b.getRng();let I,F=!1;Em(C,M).each(De=>{M.setStart(De.startContainer,De.startOffset),M.setEnd(De.endContainer,De.endOffset)});let Y=M.startOffset,X=M.startContainer;if(Rn(X)&&X.hasChildNodes()){const De=Y>X.childNodes.length-1;X=X.childNodes[Math.min(Y,X.childNodes.length-1)]||X,De&&Zt(X)?Y=X.data.length:Y=0}let ae=C.getParent(X,C.isBlock);const de=ae&&ae.parentNode?C.getParent(ae.parentNode,C.isBlock):null,fe=de?de.nodeName.toUpperCase():"",ve=!!(f&&f.ctrlKey);fe==="LI"&&!ve&&(ae=de),Zt(X)&&Y>=X.data.length&&(_7(s.schema,X,ae||C.getRoot())||(I=C.create("br"),M.insertNode(I),M.setStartAfter(I),M.setEndAfter(I),F=!0)),I=C.create("br"),td(C,M,I),nV(s,I,F),s.undoManager.add()},x7=(s,f)=>{const b=Ve.fromTag("br");Zs(Ve.fromDom(f),b),s.undoManager.add()},C7=(s,f)=>{w7(s.getBody(),f)||Hu(Ve.fromDom(f),Ve.fromTag("br"));const b=Ve.fromTag("br");Hu(Ve.fromDom(f),b),nV(s,b.dom,!1),s.undoManager.add()},F2=s=>Ko(s.getNode()),w7=(s,f)=>F2(kt.after(f))?!0:Es(s,kt.after(f)).map(b=>Ko(b.getNode())).getOr(!1),rV=s=>s&&s.nodeName==="A"&&"href"in s,V$=s=>s.fold(Xe,rV,rV,Xe),z$=s=>{const f=Te(Er,s),b=kt.fromRangeStart(s.selection.getRng());return bd(f,s.getBody(),b).filter(V$)},E7=(s,f)=>{f.fold(be,Te(x7,s),Te(C7,s),be)},T7={insert:(s,f)=>{const b=z$(s);b.isSome()?b.each(Te(E7,s)):S7(s,f)},fakeEventName:"insertLineBreak"},oV=(s,f)=>N2(s).filter(b=>f.length>0&&fc(Ve.fromDom(b),f)).isSome(),A7=s=>oV(s,jw(s)),aj=s=>oV(s,Ey(s)),Wc=pu.generate([{br:[]},{block:[]},{none:[]}]),vh=(s,f)=>aj(s),iV=s=>(f,b)=>s7(f)===s,U$=(s,f)=>(b,C)=>KF(b)===s.toUpperCase()===f,M7=s=>{const f=Gc(s.dom,s.selection.getStart());return oe(f)},pC=s=>U$("pre",s),k7=()=>U$("summary",!0),V2=s=>(f,b)=>Pk(f)===s,D7=(s,f)=>A7(s),z2=(s,f)=>f,P7=s=>{const f=xs(s),b=Gc(s.dom,s.selection.getStart());return re(b)&&s.schema.isValidChild(b.nodeName,f)},H$=s=>{const f=s.selection.getRng(),b=Ve.fromDom(f.startContainer),M=Mf(b,f.startOffset).map(I=>eu(I)&&!kr(I));return f.collapsed&&M.getOr(!0)},Yc=(s,f)=>(b,C)=>Bn(s,(I,F)=>I&&F(b,C),!0)?ue.some(f):ue.none(),U2=(s,f)=>JB([Yc([vh],Wc.none()),Yc([pC(!0),M7],Wc.none()),Yc([k7()],Wc.br()),Yc([pC(!0),V2(!1),z2],Wc.br()),Yc([pC(!0),V2(!1)],Wc.block()),Yc([pC(!0),V2(!0),z2],Wc.block()),Yc([pC(!0),V2(!0)],Wc.br()),Yc([iV(!0),z2],Wc.br()),Yc([iV(!0)],Wc.block()),Yc([D7],Wc.br()),Yc([z2],Wc.br()),Yc([P7],Wc.block()),Yc([H$],Wc.block())],[s,!!(f&&f.shiftKey)]).getOr(Wc.none()),H2=(s,f,b)=>{f.selection.isCollapsed()||uo(f),!(re(b)&&R$(f,s.fakeEventName).isDefaultPrevented())&&(s.insert(f,b),re(b)&&hC(f,s.fakeEventName))},aV=(s,f)=>{const b=()=>H2(T7,s,f),C=()=>H2(tV,s,f),M=U2(s,f);switch(Y_(s)){case"linebreak":M.fold(b,b,be);break;case"block":M.fold(C,C,be);break;case"invert":M.fold(C,b,be);break;default:M.fold(b,C,be);break}},sV=Qc(),R7=sV.os.isiOS()&&sV.browser.isSafari(),lV=(s,f)=>{f.isDefaultPrevented()||(f.preventDefault(),qz(s.undoManager),s.undoManager.transact(()=>{aV(s,f)}))},cV=s=>{if(!s.collapsed)return!1;const f=s.startContainer;if(Zt(f)){const b=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,C=f.data.charAt(s.startOffset-1);return b.test(C)}else return!1},I7=s=>{let f=ue.none();const b=M=>{f=ue.some(M.selection.getBookmark()),M.undoManager.add()},C=(M,I)=>{M.undoManager.undo(),f.fold(be,F=>M.selection.moveToBookmark(F)),lV(M,I),f=ue.none()};s.on("keydown",M=>{M.keyCode===Tn.ENTER&&(R7&&cV(s.selection.getRng())?b(s):lV(s,M))}),s.on("keyup",M=>{M.keyCode===Tn.ENTER&&f.each(()=>C(s,M))})},uV=(s,f,b)=>{const C=bn.os.isMacOS()||bn.os.isiOS();tb([{keyCode:Tn.END,action:gr(G3,s,!0)},{keyCode:Tn.HOME,action:gr(G3,s,!1)},...C?[]:[{keyCode:Tn.HOME,action:gr(S2,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Tn.END,action:gr(S2,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Tn.END,action:gr(C2,s,!0)},{keyCode:Tn.HOME,action:gr(C2,s,!1)},{keyCode:Tn.END,action:gr(h2,s,!0,f)},{keyCode:Tn.HOME,action:gr(h2,s,!1,f)}],b).each(M=>{b.preventDefault()})},dV=(s,f)=>{s.on("keydown",b=>{b.isDefaultPrevented()||uV(s,f,b)})},$7=s=>{s.on("input",f=>{f.isComposing||WP(s)})},L7=Qc(),G$=(s,f,b)=>{tb([{keyCode:Tn.PAGE_UP,action:gr(h2,s,!1,f)},{keyCode:Tn.PAGE_DOWN,action:gr(h2,s,!0,f)}],b)},hV=s=>s.stopImmediatePropagation(),fV=s=>s.keyCode===Tn.PAGE_UP||s.keyCode===Tn.PAGE_DOWN,mC=(s,f,b)=>{b&&!s.get()?f.on("NodeChange",hV,!0):!b&&s.get()&&f.off("NodeChange",hV),s.set(b)},N7=(s,f)=>{if(L7.os.isMacOS())return;const b=Vi(!1);s.on("keydown",C=>{fV(C)&&mC(b,s,!0)}),s.on("keyup",C=>{C.isDefaultPrevented()||G$(s,f,C),fV(C)&&b.get()&&(mC(b,s,!1),s.nodeChanged())})},W$=s=>{s.on("beforeinput",f=>{(!s.selection.isEditable()||st(f.getTargetRanges(),b=>!xT(s.dom,b)))&&f.preventDefault()})},G2=(s,f)=>{const b=f.container(),C=f.offset();return Zt(b)?(b.insertData(C,s),ue.some(kt(b,C+s.length))):Fy(f).map(M=>{const I=Ve.fromText(s);return f.isAtEnd()?Hu(M,I):Zs(M,I),kt(I.dom,s.length)})},Y$=Te(G2,ko),pV=Te(G2," "),sj=(s,f,b)=>qT(s,f,b)?Y$(f):pV(f),Xm=s=>f=>f.fold(b=>ls(s.dom,kt.before(b)),b=>Ts(b),b=>Pc(b),b=>Es(s.dom,kt.after(b))),O7=(s,f,b)=>C=>qT(s,C,b)?Y$(f):pV(f),mV=s=>f=>{s.selection.setRng(f.toRange()),s.nodeChanged()},B7=(s,f)=>s.isEditable(s.getParent(f,"summary")),W2=s=>{const f=kt.fromRangeStart(s.selection.getRng()),b=Ve.fromDom(s.getBody());if(s.selection.isCollapsed()){const C=Te(Er,s),M=kt.fromRangeStart(s.selection.getRng());return bd(C,s.getBody(),M).bind(Xm(b)).map(I=>()=>O7(b,f,s.schema)(I).each(mV(s)))}else return ue.none()},gV=s=>{const f=()=>{const b=Ve.fromDom(s.getBody());s.selection.isCollapsed()||s.getDoc().execCommand("Delete");const C=kt.fromRangeStart(s.selection.getRng());sj(b,C,s.schema).each(mV(s))};return Do(bn.browser.isFirefox()&&s.selection.isEditable()&&B7(s.dom,s.selection.getRng().startContainer),f)},vV=(s,f)=>{a$([{keyCode:Tn.SPACEBAR,action:gr(W2,s)},{keyCode:Tn.SPACEBAR,action:gr(gV,s)}],f).each(b=>{f.preventDefault(),R$(s,"insertText",{data:" "}).isDefaultPrevented()||(b(),hC(s,"insertText",{data:" "}))})},F7=s=>{s.on("keydown",f=>{f.isDefaultPrevented()||vV(s,f)})},yV=s=>rD(s)?[{keyCode:Tn.TAB,action:gr(dF,s,!0)},{keyCode:Tn.TAB,shiftKey:!0,action:gr(dF,s,!1)}]:[],V7=(s,f)=>{tb([...yV(s)],f).each(b=>{f.preventDefault()})},z7=s=>{s.on("keydown",f=>{f.isDefaultPrevented()||V7(s,f)})},U7=s=>{if(s.addShortcut("Meta+P","","mcePrint"),Z8(s),Cp(s))return Vi(null);{const f=oH(s);return W$(s),MH(s),i8(s,f),a7(s,f),I7(s),F7(s),$7(s),z7(s),dV(s,f),N7(s,f),f}};class bV{constructor(f){this.lastPath=[],this.editor=f;let b;const C=this;"onselectionchange"in f.getDoc()||f.on("NodeChange click mouseup keyup focus",M=>{const I=f.selection.getRng(),F={startContainer:I.startContainer,startOffset:I.startOffset,endContainer:I.endContainer,endOffset:I.endOffset};(M.type==="nodechange"||!Zh(F,b))&&f.dispatch("SelectionChange"),b=F}),f.on("contextmenu",()=>{f.dispatch("SelectionChange")}),f.on("SelectionChange",()=>{const M=f.selection.getStart(!0);M&&Av(f)&&!C.isSameElementPath(M)&&f.dom.isChildOf(M,f.getBody())&&f.nodeChanged({selectionChange:!0})}),f.on("mouseup",M=>{!M.isDefaultPrevented()&&Av(f)&&(f.selection.getNode().nodeName==="IMG"?Nl.setEditorTimeout(f,()=>{f.nodeChanged()}):f.nodeChanged())})}nodeChanged(f={}){const b=this.editor.selection;let C;if(this.editor.initialized&&b&&!J_(this.editor)&&!this.editor.mode.isReadOnly()){const M=this.editor.getBody();C=b.getStart(!0)||M,(C.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(C,M))&&(C=M);const I=[];this.editor.dom.getParent(C,F=>F===M?!0:(I.push(F),!1)),this.editor.dispatch("NodeChange",{...f,element:C,parents:I})}}isSameElementPath(f){let b;const C=this.editor,M=xn(C.dom.getParents(f,Be,C.getBody()));if(M.length===this.lastPath.length){for(b=M.length;b>=0&&M[b]===this.lastPath[b];b--);if(b===-1)return this.lastPath=M,!0}return this.lastPath=M,!1}}const Y2=Uh("image"),H7=s=>{const f=s;return ue.from(f[Y2])},j$=(s,f)=>{const b=s;b[Y2]=f},j2=Uh("event"),Z2=s=>{const f=s;return ue.from(f[j2])},gC=s=>f=>{const b=f;b[j2]=s},_V=(s,f)=>gC(f)(s),SV=gC(0),G7=gC(2),q2=gC(1),Y7=(s=>f=>{const b=f;return ue.from(b[j2]).exists(C=>C===s)})(0),j7=()=>Object.freeze({length:0,item:s=>null}),K2=Uh("mode"),Z7=s=>{const f=s;return ue.from(f[K2])},X2=s=>f=>{const b=f;b[K2]=s},xV=(s,f)=>X2(f)(s),CV=X2(0),Z$=X2(2),wV=X2(1),EV=s=>f=>{const b=f;return ue.from(b[K2]).exists(C=>C===s)},d0=EV(0),TV=EV(1),q7=(s,f)=>({...f,get length(){return f.length},add:(b,C)=>{if(d0(s))if(V(b)){if(!te(C))return f.add(b,C)}else return f.add(b);return null},remove:b=>{d0(s)&&f.remove(b)},clear:()=>{d0(s)&&f.clear()}}),K7=["none","copy","link","move"],X7=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],q$=()=>{const s=new window.DataTransfer;let f="move",b="all";const C={get dropEffect(){return f},set dropEffect(M){$e(K7,M)&&(f=M)},get effectAllowed(){return b},set effectAllowed(M){Y7(C)&&$e(X7,M)&&(b=M)},get items(){return q7(C,s.items)},get files(){return TV(C)?j7():s.files},get types(){return s.types},setDragImage:(M,I,F)=>{d0(C)&&(j$(C,{image:M,x:I,y:F}),s.setDragImage(M,I,F))},getData:M=>TV(C)?"":s.getData(M),setData:(M,I)=>{d0(C)&&s.setData(M,I)},clearData:M=>{d0(C)&&s.clearData(M)}};return CV(C),C},db=s=>{const f=q$(),b=Z7(s);return Z$(s),SV(f),f.dropEffect=s.dropEffect,f.effectAllowed=s.effectAllowed,H7(s).each(C=>f.setDragImage(C.image,C.x,C.y)),Fe(s.types,C=>{C!=="Files"&&f.setData(C,s.getData(C))}),Fe(s.files,C=>f.items.add(C)),Z2(s).each(C=>{_V(f,C)}),b.each(C=>{xV(s,C),xV(f,C)}),f},J7=s=>{const f=s.getData("text/html");return f===""?ue.none():ue.some(f)},AV=(s,f)=>s.setData("text/html",f),K$="x-tinymce/html",J2=Ee(K$),X$="<!-- "+K$+" -->",Q7=s=>X$+s,MV=s=>s.replace(X$,""),kV=s=>s.indexOf(X$)!==-1,eG=s=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),lj=(s,f)=>{let b="<"+s;const C=vi(f,(M,I)=>I+'="'+Nh.encodeAllRaw(M)+'"');return C.length&&(b+=" "+C.join(" ")),b+">"},Q2=(s,f,b)=>{const C=s.split(/\n\n/),M=lj(f,b),I="</"+f+">",F=et(C,X=>X.split(/\n/).join("<br />")),Y=X=>M+X+I;return F.length===1?F[0]:et(F,Y).join("")},DV="%MCEPASTEBIN%",tG=(s,f)=>{const{dom:b,selection:C}=s,M=s.getBody();f.set(C.getRng());const I=b.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},DV);bn.browser.isFirefox()&&b.setStyle(I,"left",b.getStyle(M,"direction",!0)==="rtl"?65535:-65535),b.bind(I,"beforedeactivate focusin focusout",F=>{F.stopPropagation()}),I.focus(),C.select(I,!0)},nG=(s,f)=>{const b=s.dom;if(J$(s)){let C;const M=f.get();for(;C=J$(s);)b.remove(C),b.unbind(C);M&&s.selection.setRng(M)}f.set(null)},J$=s=>s.dom.get("mcepastebin"),rG=s=>re(s)&&s.id==="mcepastebin",oG=s=>{const f=s.dom,b=(F,Y)=>{F.appendChild(Y),f.remove(Y,!0)},[C,...M]=mt(s.getBody().childNodes,rG);Fe(M,F=>{b(C,F)});const I=f.select("div[id=mcepastebin]",C);for(let F=I.length-1;F>=0;F--){const Y=f.create("div");C.insertBefore(Y,I[F]),b(Y,I[F])}return C?C.innerHTML:""},PV=s=>s===DV,iG=s=>{const f=Vi(null);return{create:()=>tG(s,f),remove:()=>nG(s,f),getEl:()=>J$(s),getHtml:()=>oG(s),getLastRng:f.get}},RV=(s,f)=>(on.each(f,b=>{z(b,RegExp)?s=s.replace(b,""):s=s.replace(b[0],b[1])}),s),aG=s=>{const f=Cc(),b=gd({},f);let C="";const M=f.getVoidElements(),I=on.makeMap("script noscript style textarea video audio iframe object"," "),F=f.getBlockElements(),Y=X=>{const ae=X.name,de=X;if(ae==="br"){C+=`
`;return}if(ae!=="wbr"){if(M[ae]&&(C+=" "),I[ae]){C+=" ";return}if(X.type===3&&(C+=X.value),!(X.name in f.getVoidElements())){let fe=X.firstChild;if(fe)do Y(fe);while(fe=fe.next)}F[ae]&&de.next&&(C+=`
`,ae==="p"&&(C+=`
`))}};return s=RV(s,[/<!\[[^\]]+\]>/g]),Y(b.parse(s)),C},IV=s=>(s=RV(s,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(b,C,M)=>!C&&!M?" ":ko],/<br class="Apple-interchange-newline">/g,/<br>$/i]),s),sG=s=>{let f=0;return()=>s+f++},lG=s=>{const f=s.toLowerCase(),b={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return on.hasOwn(b,f)?"image/"+b[f]:"image/"+f},li=(s,f)=>{const b=gd({sanitize:lm(s),sandbox_iframes:Jf(s)},s.schema);b.addNodeFilter("meta",M=>{on.each(M,I=>{I.remove()})});const C=b.parse(f,{forced_root_block:!1,isRootContent:!0});return Jh({validate:!0},s.schema).serialize(C)},$V=(s,f)=>({content:s,cancelled:f}),LV=(s,f,b)=>{const C=s.dom.create("div",{style:"display:none"},f),M=LD(s,C,b);return $V(M.node.innerHTML,M.isDefaultPrevented())},cG=(s,f,b)=>{const C=$D(s,f,b),M=li(s,C.content);return s.hasEventListeners("PastePostProcess")&&!C.isDefaultPrevented()?LV(s,M,b):$V(M,C.isDefaultPrevented())},Q$=(s,f,b)=>cG(s,f,b),eM=(s,f)=>(s.insertContent(f,{merge:tc(s),paste:!0}),!0),eL=s=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(s),uG=(s,f)=>eL(f)&&st(mE(s),b=>Mo(f.toLowerCase(),`.${b.toLowerCase()}`)),NV=(s,f,b)=>(s.undoManager.extra(()=>{b(s,f)},()=>{s.insertContent('<img src="'+f+'">')}),!0),tL=(s,f,b)=>(s.undoManager.extra(()=>{b(s,f)},()=>{s.execCommand("mceInsertLink",!1,f)}),!0),dG=(s,f,b)=>!s.selection.isCollapsed()&&eL(f)?tL(s,f,b):!1,hG=(s,f,b)=>uG(s,f)?NV(s,f,b):!1,fG=(s,f)=>{on.each([dG,hG,eM],b=>!b(s,f,eM))},OV=(s,f,b)=>{b||!Yk(s)?eM(s,f):fG(s,f)},pG=sG("mceclip"),mG=s=>{const f=q$();return AV(f,s),Z$(f),f},h0=(s,f,b,C,M)=>{const I=Q$(s,f,b);if(!I.cancelled){const F=I.content,Y=()=>OV(s,F,C);M?R$(s,"insertFromPaste",{dataTransfer:mG(F)}).isDefaultPrevented()||(Y(),hC(s,"insertFromPaste")):Y()}},tM=(s,f,b,C)=>{const M=b||kV(f);h0(s,MV(f),M,!1,C)},Jm=(s,f,b)=>{const C=s.dom.encode(f).replace(/\r\n/g,`
`),M=Yp(C,uN(s)),I=Q2(M,xs(s),lv(s));h0(s,I,!1,!0,b)},hb=s=>{const f={};if(s&&s.types)for(let b=0;b<s.types.length;b++){const C=s.types[b];try{f[C]=s.getData(C)}catch{f[C]=""}}return f},Qm=(s,f)=>f in s&&s[f].length>0,BV=s=>Qm(s,"text/html")||Qm(s,"text/plain"),fb=(s,f)=>{const b=f.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return re(b)?s.dom.encode(b[1]):void 0},gG=(s,f,b,C)=>{const M=pG(),I=cv(s)&&re(b.name),F=I?fb(s,b.name):M,Y=I?b.name:void 0,X=f.create(M,b,C,F,Y);return f.add(X),X},nL=(s,f)=>{xA(f.uri).each(({data:b,type:C,base64Encoded:M})=>{const I=M?b:btoa(b),F=f.file,Y=s.editorUpload.blobCache,X=Y.getByData(I,C),ae=X??gG(s,Y,F,I);tM(s,`<img src="${ae.blobUri()}">`,!1,!0)})},rL=s=>s.type==="paste",FV=s=>Promise.all(et(s,f=>hz(f).then(b=>({file:f,uri:b})))),oL=s=>{const f=mE(s);return b=>Li(b.type,"image/")&&st(f,C=>lG(C)===b.type)},VV=(s,f)=>{const b=f.items?Kt(Cr(f.items),M=>M.kind==="file"?[M.getAsFile()]:[]):[],C=f.files?Cr(f.files):[];return mt(b.length>0?b:C,oL(s))},zV=(s,f,b)=>{const C=rL(f)?f.clipboardData:f.dataTransfer;if($y(s)&&C){const M=VV(s,C);if(M.length>0)return f.preventDefault(),FV(M).then(I=>{b&&s.selection.setRng(b),Fe(I,F=>{nL(s,F)})}),!0}return!1},vG=s=>{var f,b;return bn.os.isAndroid()&&((b=(f=s.clipboardData)===null||f===void 0?void 0:f.items)===null||b===void 0?void 0:b.length)===0},UV=s=>Tn.metaKeyPressed(s)&&s.keyCode===86||s.shiftKey&&s.keyCode===45,vC=(s,f,b,C,M)=>{let I=IV(b);const F=Qm(f,J2())||kV(b),Y=!F&&eG(I),X=eL(I);(PV(I)||!I.length||Y&&!X)&&(C=!0),(C||X)&&(Qm(f,"text/plain")&&Y?I=f["text/plain"]:I=aG(I)),!PV(I)&&(C?Jm(s,I,M):tM(s,I,F,M))},iL=(s,f,b)=>{let C;const M=()=>f.getLastRng()||s.selection.getRng();s.on("keydown",I=>{UV(I)&&!I.isDefaultPrevented()&&(C=I.shiftKey&&I.keyCode===86)}),s.on("paste",I=>{if(I.isDefaultPrevented()||vG(I))return;const F=b.get()==="text"||C;C=!1;const Y=hb(I.clipboardData);!BV(Y)&&zV(s,I,M())||(Qm(Y,"text/html")?(I.preventDefault(),vC(s,Y,Y["text/html"],F,!0)):Qm(Y,"text/plain")&&Qm(Y,"text/uri-list")?(I.preventDefault(),vC(s,Y,Y["text/plain"],F,!0)):(f.create(),Nl.setEditorTimeout(s,()=>{const X=f.getHtml();f.remove(),vC(s,Y,X,F,!1)},0)))})},HV=s=>{const f=M=>Li(M,"webkit-fake-url"),b=M=>Li(M,"data:"),C=M=>{var I;return((I=M.data)===null||I===void 0?void 0:I.paste)===!0};s.parser.addNodeFilter("img",(M,I,F)=>{if(!$y(s)&&C(F))for(const Y of M){const X=Y.attr("src");V(X)&&!Y.attr("data-mce-object")&&X!==bn.transparentSrc&&(f(X)||!eS(s)&&b(X))&&Y.remove()}})},yG=(s,f,b)=>{iL(s,f,b),HV(s)},bG=(s,f)=>{f.get()==="text"?(f.set("html"),qE(s,!1)):(f.set("text"),qE(s,!0)),s.focus()},aL=(s,f)=>{s.addCommand("mceTogglePlainTextPaste",()=>{bG(s,f)}),s.addCommand("mceInsertClipboardContent",(b,C)=>{C.html&&tM(s,C.html,C.internal,!1),C.text&&Jm(s,C.text,!1)})},sL=(s,f,b)=>{if(s)try{return s.clearData(),s.setData("text/html",f),s.setData("text/plain",b),s.setData(J2(),f),!0}catch{return!1}else return!1},GV=(s,f,b,C)=>{sL(s.clipboardData,f.html,f.text)?(s.preventDefault(),C()):b(f.html,C)},lL=s=>(f,b)=>{const{dom:C,selection:M}=s,I=C.create("div",{contenteditable:"false","data-mce-bogus":"all"}),F=C.create("div",{contenteditable:"true"},f);C.setStyles(I,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),I.appendChild(F),C.add(s.getBody(),I);const Y=M.getRng();F.focus();const X=C.createRng();X.selectNodeContents(F),M.setRng(X),Nl.setEditorTimeout(s,()=>{M.setRng(Y),C.remove(I),b()},0)},cL=s=>({html:Q7(s.selection.getContent({contextual:!0})),text:s.selection.getContent({format:"text"})}),_G=s=>!!s.dom.getParent(s.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",s.getBody()),uL=s=>!s.selection.isCollapsed()||_G(s),SG=s=>f=>{!f.isDefaultPrevented()&&uL(s)&&s.selection.isEditable()&&GV(f,cL(s),lL(s),()=>{if(bn.browser.isChromium()||bn.browser.isFirefox()){const b=s.selection.getRng();Nl.setEditorTimeout(s,()=>{s.selection.setRng(b),s.execCommand("Delete")},0)}else s.execCommand("Delete")})},xG=s=>f=>{!f.isDefaultPrevented()&&uL(s)&&GV(f,cL(s),lL(s),be)},CG=s=>{s.on("cut",SG(s)),s.on("copy",xG(s))},WV=(s,f)=>{var b,C;return dp.getCaretRangeFromPoint((b=f.clientX)!==null&&b!==void 0?b:0,(C=f.clientY)!==null&&C!==void 0?C:0,s.getDoc())},wG=s=>{const f=s["text/plain"];return f?f.indexOf("file://")===0:!1},yC=(s,f)=>{s.focus(),f&&s.selection.setRng(f)},EG=s=>st(s.files,f=>/^image\//.test(f.type)),YV=(s,f,b,C)=>{const M=s.getParent(b,F=>Kr(f,F));if(!q(s.getParent(b,"summary")))return!0;if(M&&Vn(C,"text/html")){const F=new DOMParser().parseFromString(C["text/html"],"text/html").body;return!q(F.querySelector(M.nodeName.toLowerCase()))}else return!1},TG=s=>{s.on("input",f=>{const b=C=>q(C.querySelector("summary"));if(f.inputType==="deleteByDrag"){const C=mt(s.dom.select("details"),b);Fe(C,M=>{Ko(M.firstChild)&&M.firstChild.remove();const I=s.dom.create("summary");I.appendChild(pa().dom),M.prepend(I)})}})},dL=(s,f)=>{Gk(s)&&s.on("dragend dragover draggesture dragdrop drop drag",b=>{b.preventDefault(),b.stopPropagation()}),$y(s)||s.on("drop",b=>{const C=b.dataTransfer;C&&EG(C)&&b.preventDefault()}),s.on("drop",b=>{if(b.isDefaultPrevented())return;const C=WV(s,b);if(oe(C))return;const M=hb(b.dataTransfer),I=Qm(M,J2());if((!BV(M)||wG(M))&&zV(s,b,C))return;const F=M[J2()],Y=F||M["text/html"]||M["text/plain"],X=YV(s.dom,s.schema,C.startContainer,M),ae=f.get();ae&&!X||Y&&(b.preventDefault(),Nl.setEditorTimeout(s,()=>{s.undoManager.transact(()=>{(F||ae&&X)&&s.execCommand("Delete"),yC(s,C);const de=IV(Y);M["text/html"]?tM(s,de,I,!0):Jm(s,de,!0)})}))}),s.on("dragstart",b=>{f.set(!0)}),s.on("dragover dragend",b=>{$y(s)&&!f.get()&&(b.preventDefault(),yC(s,WV(s,b))),b.type==="dragend"&&f.set(!1)}),TG(s)},jV=s=>{const f=M=>I=>{M(s,I)},b=Q_(s);he(b)&&s.on("PastePreProcess",f(b));const C=Fr(s);he(C)&&s.on("PastePostProcess",f(C))},AG=(s,f)=>{s.on("PastePreProcess",b=>{b.content=f(s,b.content,b.internal)})},MG=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,ZV=s=>on.trim(s).replace(MG,al).toLowerCase(),kG=(s,f,b)=>{const C=fE(s);if(b||C==="all"||!Wk(s))return f;const M=C?C.split(/[, ]/):[];if(M&&C!=="none"){const I=s.dom,F=s.selection.getNode();f=f.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(Y,X,ae,de)=>{const fe=I.parseStyle(I.decode(ae)),ve={};for(let Ie=0;Ie<M.length;Ie++){const Me=fe[M[Ie]];let Re=Me,qe=I.getStyle(F,M[Ie],!0);/color/.test(M[Ie])&&(Re=ZV(Re),qe=ZV(qe)),qe!==Re&&(ve[M[Ie]]=Me)}const De=I.serializeStyle(ve,"span");return De?X+' style="'+De+'"'+de:X+de})}else f=f.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return f=f.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(I,F,Y,X)=>F+' style="'+Y+'"'+X),f},DG=s=>{(bn.browser.isChromium()||bn.browser.isSafari())&&AG(s,kG)},qV=s=>{const f=Vi(!1),b=Vi(jk(s)?"text":"html"),C=iG(s);DG(s),aL(s,b),jV(s),s.on("PreInit",()=>{CG(s),dL(s,f),yG(s,C,b)})},PG=s=>{s.on("click",f=>{s.dom.getParent(f.target,"details")&&f.preventDefault()})},RG=s=>{s.parser.addNodeFilter("details",f=>{const b=hv(s);Fe(f,C=>{b==="expanded"?C.attr("open","open"):b==="collapsed"&&C.attr("open",null)})}),s.serializer.addNodeFilter("details",f=>{const b=oD(s);Fe(f,C=>{b==="expanded"?C.attr("open","open"):b==="collapsed"&&C.attr("open",null)})})},IG=s=>{PG(s),RG(s)},$G=Ko,KV=Zt,LG=s=>Eo(s.dom),NG=s=>Fs(s.dom),nM=s=>f=>Bo(Ve.fromDom(s),f),XV=(s,f,b)=>Sa(Ve.fromDom(s),C=>NG(C)||b.isBlock(Co(C)),nM(f)).getOr(Ve.fromDom(f)).dom,JV=(s,f)=>Sa(Ve.fromDom(s),LG,nM(f)),QV=(s,f,b)=>{const C=new ri(s,f),M=b?C.next.bind(C):C.prev.bind(C);let I=s;for(let F=b?s:M();F&&!$G(F);F=M())oi(F)&&(I=F);return I},OG=(s,f,b)=>{const M=kt.fromRangeStart(s).getNode(),I=XV(M,f,b),F=QV(M,I,!1),Y=QV(M,I,!0),X=document.createRange();return JV(F,I).fold(()=>{KV(F)?X.setStart(F,0):X.setStartBefore(F)},ae=>X.setStartBefore(ae.dom)),JV(Y,I).fold(()=>{KV(Y)?X.setEnd(Y,Y.data.length):X.setEndAfter(Y)},ae=>X.setEndAfter(ae.dom)),X},BG=s=>{const f=OG(s.selection.getRng(),s.getBody(),s.schema);s.selection.setRng(D1(f))},FG=s=>{s.on("mousedown",f=>{f.detail>=3&&(f.preventDefault(),BG(s))})};var pb;(function(s){s.Before="before",s.After="after"})(pb||(pb={}));const VG=(s,f)=>Math.abs(s.left-f),rM=(s,f)=>Math.abs(s.right-f),e4=(s,f)=>s>=f.top&&s<=f.bottom,zG=(s,f)=>s.top<f.bottom&&s.bottom>f.top,t4=(s,f)=>{const b=Tk(s,f)/Math.min(s.height,f.height);return zG(s,f)&&b>.5},n4=(s,f)=>{const b=mt(s,C=>e4(f,C));return Ek(b).fold(()=>[[],s],C=>{const{pass:M,fail:I}=Gt(s,F=>t4(F,C));return[M,I]})},hL=(s,f)=>({node:s.node,position:VG(s,f)<rM(s,f)?pb.Before:pb.After}),UG=(s,f,b)=>f>s.left&&f<s.right?0:Math.min(Math.abs(s.left-f),Math.abs(s.right-f)),oM=(s,f,b)=>{const C=de=>oi(de.node)?ue.some(de):Rn(de.node)?oM(Cr(de.node.childNodes),f,b):ue.none(),M=(de,fe)=>{if(de.length>=2){const ve=C(de[0]).getOr(de[0]),De=C(de[1]).getOr(de[1]);if(Math.abs(fe(ve,f,b)-fe(De,f,b))<2){if(Zt(ve.node))return ue.some(ve);if(Zt(De.node))return ue.some(De)}}return ue.none()},I=(de,fe)=>{const ve=Zn(de,(De,Ie)=>fe(De,f,b)-fe(Ie,f,b));return M(ve,fe).orThunk(()=>Wr(ve,C))},[F,Y]=n4(l3(s),b),{pass:X,fail:ae}=Gt(Y,de=>de.top<b);return I(F,UG).orThunk(()=>I(ae,x_)).orThunk(()=>I(X,x_))},HG=(s,f,b,C)=>{const M=(I,F)=>{const Y=ae=>Rn(ae)&&ae.classList.contains("mce-drag-container"),X=mt(I.dom.childNodes,Ke(Y));return F.fold(()=>oM(X,b,C),ae=>{const de=mt(X,fe=>fe!==ae.dom);return oM(de,b,C)}).orThunk(()=>(Bo(I,s)?ue.none():O0(I)).bind(de=>M(de,ue.some(I))))};return M(f,ue.none())},r4=(s,f,b)=>{const C=Ve.fromDom(s),M=Rd(C),F=Ve.fromPoint(M,f,b).filter(Y=>Pd(C,Y)).getOr(C);return HG(C,F,f,b)},o4=(s,f,b)=>r4(s,f,b).filter(C=>um(C.node)).map(C=>hL(C,f)),fL=s=>{var f,b;const C=s.getBoundingClientRect(),M=s.ownerDocument,I=M.documentElement,F=M.defaultView;return{top:C.top+((f=F==null?void 0:F.scrollY)!==null&&f!==void 0?f:0)-I.clientTop,left:C.left+((b=F==null?void 0:F.scrollX)!==null&&b!==void 0?b:0)-I.clientLeft}},GG=s=>s.inline?fL(s.getBody()):{left:0,top:0},WG=s=>{const f=s.getBody();return s.inline?{left:f.scrollLeft,top:f.scrollTop}:{left:0,top:0}},YG=s=>{const f=s.getBody(),b=s.getDoc().documentElement,C={left:f.scrollLeft,top:f.scrollTop},M={left:f.scrollLeft||b.scrollLeft,top:f.scrollTop||b.scrollTop};return s.inline?C:M},bC=(s,f)=>{if(f.target.ownerDocument!==s.getDoc()){const b=fL(s.getContentAreaContainer()),C=YG(s);return{left:f.pageX-b.left+C.left,top:f.pageY-b.top+C.top}}return{left:f.pageX,top:f.pageY}},jG=(s,f,b)=>({pageX:b.left-s.left+f.left,pageY:b.top-s.top+f.top}),ZG=(s,f)=>jG(GG(s),WG(s),bC(s,f)),pL=s=>({target:s,srcElement:s}),qG=(s,f,b,C)=>({...f,dataTransfer:C,type:s,...pL(b)}),KG=(s,f,b)=>{const C=Tt("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:C,initEvent:C,preventDefault:be,stopImmediatePropagation:be,stopPropagation:be,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:C,initMouseEvent:C,getModifierState:C,dataTransfer:b,...pL(f)}},XG=(s,f)=>{const b=db(s);return f==="dragstart"?(SV(b),CV(b)):f==="drop"?(G7(b),Z$(b)):(q2(b),wV(b)),b},JG=(s,f,b,C)=>{const M=XG(b,s);return te(C)?KG(s,f,M):qG(s,C,f,M)},iM=32,aM=100,_C=8,SC=16,i4=Eo,QG=T_(i4,Fs),eW=(s,f,b)=>i4(b)&&b!==f&&s.isEditable(b.parentElement),cj=(s,f,b)=>oe(f)||f===b||s.dom.isChildOf(f,b)?!1:s.dom.isEditable(f),tW=(s,f,b,C)=>{const M=s.dom,I=f.cloneNode(!0);M.setStyles(I,{width:b,height:C}),M.setAttrib(I,"data-mce-selected",null);const F=M.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return M.setStyles(F,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:b,height:C}),M.setStyles(I,{margin:0,boxSizing:"border-box"}),F.appendChild(I),F},mL=(s,f)=>{s.parentNode!==f&&f.appendChild(s)},mb=(s,f)=>b=>()=>{const C=s==="left"?b.scrollX:b.scrollY;b.scroll({[s]:C+f,behavior:"smooth"})},xC=mb("left",-iM),a4=mb("left",iM),s4=mb("top",-iM),gL=mb("top",iM),nW=(s,f,b,C,M,I,F,Y,X,ae,de,fe)=>{let ve=0,De=0;s.style.left=f.pageX+"px",s.style.top=f.pageY+"px",f.pageX+b>M&&(ve=f.pageX+b-M),f.pageY+C>I&&(De=f.pageY+C-I),s.style.width=b-ve+"px",s.style.height=C-De+"px";const Ie=X.clientHeight,Me=X.clientWidth,Re=F+X.getBoundingClientRect().top,qe=Y+X.getBoundingClientRect().left;de.on(nt=>{nt.intervalId.clear(),nt.dragging&&fe&&(F+_C>=Ie?nt.intervalId.set(gL(ae)):F-_C<=0?nt.intervalId.set(s4(ae)):Y+_C>=Me?nt.intervalId.set(a4(ae)):Y-_C<=0?nt.intervalId.set(xC(ae)):Re+SC>=window.innerHeight?nt.intervalId.set(gL(window)):Re-SC<=0?nt.intervalId.set(s4(window)):qe+SC>=window.innerWidth?nt.intervalId.set(a4(window)):qe-SC<=0&&nt.intervalId.set(xC(window)))})},sM=s=>{s&&s.parentNode&&s.parentNode.removeChild(s)},l4=(s,f)=>{const b=s.getParent(f.parentNode,s.isBlock);sM(f),b&&b!==s.getRoot()&&s.isEmpty(b)&&ju(Ve.fromDom(b))},rW=s=>s.button===0,oW=(s,f)=>({pageX:f.pageX-s.relX,pageY:f.pageY+5}),c4=(s,f)=>b=>{if(rW(b)){const C=Ae(f.dom.getParents(b.target),QG).getOr(null);if(re(C)&&eW(f.dom,f.getBody(),C)){const M=f.dom.getPos(C),I=f.getBody(),F=f.getDoc().documentElement;s.set({element:C,dataTransfer:q$(),dragging:!1,screenX:b.screenX,screenY:b.screenY,maxX:(f.inline?I.scrollWidth:F.offsetWidth)-2,maxY:(f.inline?I.scrollHeight:F.offsetHeight)-2,relX:b.pageX-M.x,relY:b.pageY-M.y,width:C.offsetWidth,height:C.offsetHeight,ghost:tW(f,C,C.offsetWidth,C.offsetHeight),intervalId:Rw(aM)})}}},iW=(s,f,b)=>{s._selectionOverrides.hideFakeCaret(),o4(s.getBody(),f,b).fold(()=>s.selection.placeCaretAt(f,b),C=>{const M=s._selectionOverrides.showCaret(1,C.node,C.position===pb.Before,!1);M?s.selection.setRng(M):s.selection.placeCaretAt(f,b)})},lM=(s,f,b,C,M)=>{f==="dragstart"&&AV(C,s.dom.getOuterHTML(b));const I=JG(f,b,C,M);return s.dispatch(f,I)},aW=(s,f)=>{const b=dy((M,I)=>iW(f,M,I),0);f.on("remove",b.cancel);const C=s;return M=>s.on(I=>{const F=Math.max(Math.abs(M.screenX-I.screenX),Math.abs(M.screenY-I.screenY));if(!I.dragging&&F>10){const Y=lM(f,"dragstart",I.element,I.dataTransfer,M);if(re(Y.dataTransfer)&&(I.dataTransfer=Y.dataTransfer),Y.isDefaultPrevented())return;I.dragging=!0,f.focus()}if(I.dragging){const Y=M.currentTarget===f.getDoc().documentElement,X=oW(I,ZG(f,M));mL(I.ghost,f.getBody()),nW(I.ghost,X,I.width,I.height,I.maxX,I.maxY,M.clientY,M.clientX,f.getContentAreaContainer(),f.getWin(),C,Y),b.throttle(M.clientX,M.clientY)}})},sW=s=>{const f=s.getSel();if(re(f)){const C=f.getRangeAt(0).startContainer;return Zt(C)?C.parentNode:C}else return null},lW=(s,f)=>b=>{s.on(C=>{var M;if(C.intervalId.clear(),C.dragging){if(cj(f,sW(f.selection),C.element)){const I=(M=f.getDoc().elementFromPoint(b.clientX,b.clientY))!==null&&M!==void 0?M:f.getBody();lM(f,"drop",I,C.dataTransfer,b).isDefaultPrevented()||f.undoManager.transact(()=>{l4(f.dom,C.element),J7(C.dataTransfer).each(Y=>f.insertContent(Y)),f._selectionOverrides.hideFakeCaret()})}lM(f,"dragend",f.getBody(),C.dataTransfer,b)}}),yL(s)},vL=(s,f,b)=>{s.on(C=>{C.intervalId.clear(),C.dragging&&b.fold(()=>lM(f,"dragend",C.element,C.dataTransfer),M=>lM(f,"dragend",C.element,C.dataTransfer,M))}),yL(s)},cW=(s,f)=>b=>vL(s,f,ue.some(b)),yL=s=>{s.on(f=>{f.intervalId.clear(),sM(f.ghost)}),s.clear()},uW=s=>{const f=zh(),b=Vo.DOM,C=document,M=c4(f,s),I=aW(f,s),F=lW(f,s),Y=cW(f,s);s.on("mousedown",M),s.on("mousemove",I),s.on("mouseup",F),b.bind(C,"mousemove",I),b.bind(C,"mouseup",Y),s.on("remove",()=>{b.unbind(C,"mousemove",I),b.unbind(C,"mouseup",Y)}),s.on("keydown",X=>{X.keyCode===Tn.ESC&&vL(f,s,ue.none())})},dW=s=>{const f=M=>{if(!M.isDefaultPrevented()){const I=M.dataTransfer;I&&($e(I.types,"Files")||I.files.length>0)&&(M.preventDefault(),M.type==="drop"&&UA(s,"Dropped file type is not supported"))}},b=M=>{f1(s,M.target)&&f(M)},C=()=>{const M=Vo.DOM,I=s.dom,F=document,Y=s.inline?s.getBody():s.getDoc(),X=["drop","dragover"];Fe(X,ae=>{M.bind(F,ae,b),I.bind(Y,ae,f)}),s.on("remove",()=>{Fe(X,ae=>{M.unbind(F,ae,b),I.unbind(Y,ae,f)})})};s.on("init",()=>{Nl.setEditorTimeout(s,C,0)})},hW=s=>{uW(s),Iy(s)&&dW(s)},fW=s=>{const f=dy(()=>{if(!s.removed&&s.getBody().contains(document.activeElement)){const b=s.selection.getRng();if(b.collapsed){const C=q1(s,b,!1);s.selection.setRng(C)}}},0);s.on("focus",()=>{f.throttle()}),s.on("blur",()=>{f.cancel()})},pW=s=>{s.on("init",()=>{s.on("focusin",f=>{const b=f.target;if(Gi(b)){const C=Gr(s.getBody(),b),M=Eo(C)?C:b;s.selection.getNode()!==M&&Z1(s,M).each(I=>s.selection.setRng(I))}})})},gb=Eo,mW=(s,f)=>Gr(s.getBody(),f),gW=s=>{const f=s.selection,b=s.dom,C=s.getBody(),M=gv(s,C,b.isBlock,()=>Xh(s)),I="sel-"+b.uniqueId(),F="data-mce-selected";let Y;const X=_n=>re(_n)&&b.hasClass(_n,"mce-offscreen-selection"),ae=_n=>_n!==C&&(gb(_n)||Gi(_n))&&b.isChildOf(_n,C)&&b.isEditable(_n.parentNode),de=_n=>{_n&&f.setRng(_n)},fe=(_n,At,St,Ut=!0)=>s.dispatch("ShowCaret",{target:At,direction:_n,before:St}).isDefaultPrevented()?null:(Ut&&f.scrollIntoView(At,_n===-1),M.show(St,At)),ve=_n=>{_n.hasAttribute("data-mce-caret")&&(Dh(_n),f.scrollIntoView(_n))},De=()=>{s.on("click",At=>{b.isEditable(At.target)||(At.preventDefault(),s.focus())}),s.on("blur NewBlock",gt),s.on("ResizeWindow FullscreenStateChanged",M.reposition),s.on("tap",At=>{const St=At.target,Ut=mW(s,St);gb(Ut)?(At.preventDefault(),Z1(s,Ut).each(tt)):ae(St)&&Z1(s,St).each(tt)},!0),s.on("mousedown",At=>{const St=At.target;if(St!==C&&St.nodeName!=="HTML"&&!b.isChildOf(St,C)||!W6(s,At.clientX,At.clientY))return;gt(),an();const Ut=mW(s,St);gb(Ut)?(At.preventDefault(),Z1(s,Ut).each(tt)):o4(C,At.clientX,At.clientY).each($n=>{At.preventDefault();const Qn=fe(1,$n.node,$n.position===pb.Before,!1);de(Qn),ou(Ut)?Ut.focus():s.getBody().focus()})}),s.on("keypress",At=>{Tn.modifierPressed(At)||gb(f.getNode())&&At.preventDefault()}),s.on("GetSelectionRange",At=>{let St=At.range;if(Y){if(!Y.parentNode){Y=null;return}St=St.cloneRange(),St.selectNode(Y),At.range=St}}),s.on("SetSelectionRange",At=>{At.range=Re(At.range);const St=tt(At.range,At.forward);St&&(At.range=St)});const _n=At=>Rn(At)&&At.id==="mcepastebin";s.on("AfterSetSelectionRange",At=>{const St=At.range,Ut=St.startContainer.parentElement;!Me(St)&&!_n(Ut)&&an(),X(Ut)||gt()}),hW(s),fW(s),pW(s)},Ie=_n=>is(_n)||If(_n)||Mg(_n),Me=_n=>Ie(_n.startContainer)||Ie(_n.endContainer),Re=_n=>{const At=s.schema.getVoidElements(),St=b.createRng(),Ut=_n.startContainer,$n=_n.startOffset,Qn=_n.endContainer,zr=_n.endOffset;return Vn(At,Ut.nodeName.toLowerCase())?$n===0?St.setStartBefore(Ut):St.setStartAfter(Ut):St.setStart(Ut,$n),Vn(At,Qn.nodeName.toLowerCase())?zr===0?St.setEndBefore(Qn):St.setEndAfter(Qn):St.setEnd(Qn,zr),St},qe=(_n,At)=>{const St=Ve.fromDom(s.getBody()),Ut=s.getDoc(),$n=mc(St,"#"+I).getOrThunk(()=>{const Jr=Ve.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ut);return na(Jr,"id",I),Ki(St,Jr),Jr}),Qn=b.createRng();Nd($n),ci($n,[Ve.fromText(ko,Ut),Ve.fromDom(At),Ve.fromText(ko,Ut)]),Qn.setStart($n.dom.firstChild,1),Qn.setEnd($n.dom.lastChild,0),F0($n,{top:b.getPos(_n,s.getBody()).y+"px"}),GS($n);const zr=f.getSel();return zr&&(zr.removeAllRanges(),zr.addRange(Qn)),Qn},nt=_n=>{const At=_n.cloneNode(!0),St=s.dispatch("ObjectSelected",{target:_n,targetClone:At});if(St.isDefaultPrevented())return null;const Ut=qe(_n,St.targetClone),$n=Ve.fromDom(_n);return Fe(fa(Ve.fromDom(s.getBody()),`*[${F}]`),Qn=>{Bo($n,Qn)||da(Qn,F)}),b.getAttrib(_n,F)||_n.setAttribute(F,"1"),Y=_n,an(),Ut},tt=(_n,At)=>{if(!_n)return null;if(_n.collapsed){if(!Me(_n)){const Qn=At?1:-1,zr=xv(Qn,C,_n),Jr=zr.getNode(!At);if(re(Jr)){if(um(Jr))return fe(Qn,Jr,At?!zr.isAtEnd():!1,!1);if(qs(Jr)&&Eo(Jr.nextSibling)){const ho=b.createRng();return ho.setStart(Jr,0),ho.setEnd(Jr,0),ho}}const Uo=zr.getNode(At);if(re(Uo)){if(um(Uo))return fe(Qn,Uo,At?!1:!zr.isAtEnd(),!1);if(qs(Uo)&&Eo(Uo.previousSibling)){const ho=b.createRng();return ho.setStart(Uo,1),ho.setEnd(Uo,1),ho}}}return null}let St=_n.startContainer,Ut=_n.startOffset;const $n=_n.endOffset;if(Zt(St)&&Ut===0&&gb(St.parentNode)&&(St=St.parentNode,Ut=b.nodeIndex(St),St=St.parentNode),!Rn(St))return null;if($n===Ut+1&&St===_n.endContainer){const Qn=St.childNodes[Ut];if(ae(Qn))return nt(Qn)}return null},gt=()=>{Y&&Y.removeAttribute(F),mc(Ve.fromDom(s.getBody()),"#"+I).each(wo),Y=null},Ht=()=>{M.destroy(),Y=null},an=()=>{M.hide()};return Cp(s)||De(),{showCaret:fe,showBlockCaretContainer:ve,hideFakeCaret:an,destroy:Ht}},u4=(s,f)=>{let b=f;for(let C=s.previousSibling;Zt(C);C=C.previousSibling)b+=C.data.length;return b},d4=(s,f,b,C,M)=>{if(Zt(b)&&(C<0||C>b.data.length))return[];const I=M&&Zt(b)?[u4(b,C)]:[C];let F=b;for(;F!==f&&F.parentNode;)I.push(s.nodeIndex(F,M)),F=F.parentNode;return F===f?I.reverse():[]},CC=(s,f,b,C,M,I,F=!1)=>{const Y=d4(s,f,b,C,F),X=d4(s,f,M,I,F);return{start:Y,end:X}},h4=(s,f)=>{const b=f.slice(),C=b.pop();return _e(C)?Bn(b,(I,F)=>I.bind(Y=>ue.from(Y.childNodes[F])),ue.some(s)).bind(I=>Zt(I)&&(C<0||C>I.data.length)?ue.none():ue.some({node:I,offset:C})):ue.none()},f4=(s,f)=>h4(s,f.start).bind(({node:b,offset:C})=>h4(s,f.end).map(({node:M,offset:I})=>{const F=document.createRange();return F.setStart(b,C),F.setEnd(M,I),F})),vW=(s,f,b,C=!1)=>CC(s,f,b.startContainer,b.startOffset,b.endContainer,b.endOffset,C),f0=(s,f,b)=>{if(f&&s.isEmpty(f)&&!b(f)){const C=f.parentNode;s.remove(f,Zt(f.firstChild)&&bc(f.firstChild.data)),f0(s,C,b)}},p0=(s,f,b,C=!0)=>{const M=f.startContainer.parentNode,I=f.endContainer.parentNode;f.deleteContents(),C&&!b(f.startContainer)&&(Zt(f.startContainer)&&f.startContainer.data.length===0&&s.remove(f.startContainer),Zt(f.endContainer)&&f.endContainer.data.length===0&&s.remove(f.endContainer),f0(s,M,b),M!==I&&f0(s,I,b))},cM=(s,f)=>ue.from(s.dom.getParent(f.startContainer,s.dom.isBlock)),bL=(s,f,b)=>{const C=s.dynamicPatternsLookup({text:b,block:f});return{...s,blockPatterns:V_(C).concat(s.blockPatterns),inlinePatterns:Hw(C).concat(s.inlinePatterns)}},p4=(s,f,b,C)=>{const M=s.createRng();return M.setStart(f,0),M.setEnd(b,C),M.toString()},yW=s=>/^\s[^\s]/.test(s),_L=(s,f,b)=>{hF(f,0,f).each(M=>{const I=M.container;T2(I,b.start.length,f).each(X=>{const ae=s.createRng();ae.setStart(I,0),ae.setEnd(X.container,X.offset),p0(s,ae,de=>de===f)});const F=Ve.fromDom(I),Y=lu(F);yW(Y)&&El(F,Y.slice(1))})},bW=(s,f)=>{const b=s.dom,C=f.pattern,M=f4(b.getRoot(),f.range).getOrDie("Unable to resolve path range"),I=(F,Y)=>{const X=Y.get(F);return Z(X)&&gn(X).exists(ae=>Vn(ae,"block"))};return cM(s,M).each(F=>{C.type==="block-format"?I(C.format,s.formatter)&&s.undoManager.transact(()=>{_L(s.dom,F,C),s.formatter.apply(C.format)}):C.type==="block-command"&&s.undoManager.transact(()=>{_L(s.dom,F,C),s.execCommand(C.cmd,!1,C.value)})}),!0},_W=s=>Zn(s,(f,b)=>b.start.length-f.start.length),SW=(s,f)=>{const b=_W(s),C=f.replace(ko," ");return Ae(b,M=>f.indexOf(M.start)===0||C.indexOf(M.start)===0)},SL=(s,f,b,C)=>{var M;const I=s.dom,F=xs(s);if(!I.is(f,F))return[];const Y=(M=f.textContent)!==null&&M!==void 0?M:"";return SW(b.blockPatterns,Y).map(X=>on.trim(Y).length===X.start.length?[]:[{pattern:X,range:CC(I,I.getRoot(),f,0,f,0,C)}]).getOr([])},xW=(s,f)=>{if(f.length===0)return;const b=s.selection.getBookmark();Fe(f,C=>bW(s,C)),s.selection.moveToBookmark(b)},m4=(s,f)=>s.create("span",{"data-mce-type":"bookmark",id:f}),uM=(s,f)=>{const b=s.createRng();return b.setStartAfter(f.start),b.setEndBefore(f.end),b},g4=(s,f,b)=>{const C=f4(s.getRoot(),b).getOrDie("Unable to resolve path range"),M=C.startContainer,I=C.endContainer,F=C.endOffset===0?I:I.splitText(C.endOffset),Y=C.startOffset===0?M:M.splitText(C.startOffset),X=Y.parentNode,ae=F.parentNode;return{prefix:f,end:ae.insertBefore(m4(s,f+"-end"),F),start:X.insertBefore(m4(s,f+"-start"),Y)}},v4=(s,f,b)=>{f0(s,s.get(f.prefix+"-end"),b),f0(s,s.get(f.prefix+"-start"),b)},xL=s=>s.start.length===0,y4=s=>(f,b)=>{const M=f.data.substring(0,b),I=M.lastIndexOf(s.charAt(s.length-1)),F=M.lastIndexOf(s);return F!==-1?F+s.length:I!==-1?I+1:-1},CL=(s,f,b,C)=>{const M=f.start;return oC(s,C.container,C.offset,y4(M),b).bind(F=>{var Y,X;const ae=(X=(Y=b.textContent)===null||Y===void 0?void 0:Y.indexOf(M))!==null&&X!==void 0?X:-1;if(ae!==-1&&F.offset>=ae+M.length){const fe=s.createRng();return fe.setStart(F.container,F.offset-M.length),fe.setEnd(F.container,F.offset),ue.some(fe)}else{const fe=F.offset-M.length;return rC(F.container,fe,b).map(ve=>{const De=s.createRng();return De.setStart(ve.container,ve.offset),De.setEnd(F.container,F.offset),De}).filter(ve=>ve.toString()===M).orThunk(()=>CL(s,f,b,Sd(F.container,0)))}})},wL=(s,f,b,C,M,I=!1)=>{if(f.start.length===0&&!I){const F=s.createRng();return F.setStart(b,C),F.setEnd(b,C),ue.some(F)}return nC(b,C,M).bind(F=>CL(s,f,M,F).bind(X=>{var ae;if(I){if(X.endContainer===F.container&&X.endOffset===F.offset)return ue.none();if(F.offset===0&&((ae=X.endContainer.textContent)===null||ae===void 0?void 0:ae.length)===X.endOffset)return ue.none()}return ue.some(X)}))},EL=(s,f,b,C)=>{const M=s.dom,I=M.getRoot(),F=b.pattern,Y=b.position.container,X=b.position.offset;return rC(Y,X-b.pattern.end.length,f).bind(ae=>{const de=CC(M,I,ae.container,ae.offset,Y,X,C);if(xL(F))return ue.some({matches:[{pattern:F,startRng:de,endRng:de}],position:ae});{const fe=dM(s,b.remainingPatterns,ae.container,ae.offset,f,C),ve=fe.getOr({matches:[],position:ae}),De=ve.position;return wL(M,F,De.container,De.offset,f,fe.isNone()).map(Me=>{const Re=vW(M,I,Me,C);return{matches:ve.matches.concat([{pattern:F,startRng:Re,endRng:de}]),position:Sd(Me.startContainer,Me.startOffset)}})}})},dM=(s,f,b,C,M,I)=>{const F=s.dom;return nC(b,C,F.getRoot()).bind(Y=>{const X=p4(F,M,b,C);for(let ae=0;ae<f.length;ae++){const de=f[ae];if(!Mo(X,de.end))continue;const fe=f.slice();fe.splice(ae,1);const ve=EL(s,M,{pattern:de,remainingPatterns:fe,position:Y},I);if(ve.isNone()&&C>0)return dM(s,f,b,C-1,M,I);if(ve.isSome())return ve}return ue.none()})},hM=(s,f,b)=>{s.selection.setRng(b),f.type==="inline-format"?Fe(f.format,C=>{s.formatter.apply(C)}):s.execCommand(f.cmd,!1,f.value)},CW=(s,f,b,C)=>{const M=uM(s.dom,b);p0(s.dom,M,C),hM(s,f,M)},wW=(s,f,b,C,M)=>{const I=s.dom,F=uM(I,C),Y=uM(I,b);p0(I,Y,M),p0(I,F,M);const X={prefix:b.prefix,start:b.end,end:C.start},ae=uM(I,X);hM(s,f,ae)},b4=(s,f)=>{const b=Uh("mce_textpattern"),C=en(f,(M,I)=>{const F=g4(s,b+`_end${M.length}`,I.endRng);return M.concat([{...I,endMarker:F}])},[]);return en(C,(M,I)=>{const F=C.length-M.length-1,Y=xL(I.pattern)?I.endMarker:g4(s,b+`_start${F}`,I.startRng);return M.concat([{...I,startMarker:Y}])},[])},EW=s=>Zn(s,(f,b)=>b.end.length-f.end.length),TW=(s,f)=>{const b=Wt(s,C=>st(f,M=>C.pattern.start===M.pattern.start&&C.pattern.end===M.pattern.end));return s.length===f.length?b?s:f:s.length>f.length?s:f},_4=(s,f,b,C,M,I)=>{const F=dM(s,M.inlinePatterns,b,C,f,I).fold(()=>[],X=>X.matches),Y=dM(s,EW(M.inlinePatterns),b,C,f,I).fold(()=>[],X=>X.matches);return TW(F,Y)},S4=(s,f)=>{if(f.length===0)return;const b=s.dom,C=s.selection.getBookmark(),M=b4(b,f);Fe(M,I=>{const F=b.getParent(I.startMarker.start,b.isBlock),Y=X=>X===F;xL(I.pattern)?CW(s,I.pattern,I.endMarker,Y):wW(s,I.pattern,I.startMarker,I.endMarker,Y),v4(b,I.endMarker,Y),v4(b,I.startMarker,Y)}),s.selection.moveToBookmark(C)},AW=(s,f)=>{const b=s.selection.getRng();return cM(s,b).map(C=>{var M;const I=Math.max(0,b.startOffset),F=bL(f,C,(M=C.textContent)!==null&&M!==void 0?M:""),Y=_4(s,C,b.startContainer,I,F,!0),X=SL(s,C,F,!0);return X.length>0||Y.length>0?(s.undoManager.add(),s.undoManager.extra(()=>{s.execCommand("mceInsertNewLine")},()=>{Up(s),S4(s,Y),xW(s,X);const ae=s.selection.getRng(),de=nC(ae.startContainer,ae.startOffset,s.dom.getRoot());s.execCommand("mceInsertNewLine"),de.each(fe=>{const ve=fe.container;ve.data.charAt(fe.offset-1)===Tg&&(ve.deleteData(fe.offset-1,1),f0(s.dom,ve.parentNode,De=>De===s.dom.getRoot()))})}),!0):!1}).getOr(!1)},MW=(s,f)=>{const b=s.selection.getRng();cM(s,b).map(C=>{const M=Math.max(0,b.startOffset-1),I=p4(s.dom,C,b.startContainer,M),F=bL(f,C,I),Y=_4(s,C,b.startContainer,M,F,!1);Y.length>0&&s.undoManager.transact(()=>{S4(s,Y)})})},x4=(s,f,b)=>{for(let C=0;C<s.length;C++)if(b(s[C],f))return!0;return!1},C4=(s,f)=>x4(s,f,(b,C)=>b===C.keyCode&&!Tn.modifierPressed(C)),kW=(s,f)=>x4(s,f,(b,C)=>b.charCodeAt(0)===C.charCode),TL=s=>{const f=[",",".",";",":","!","?"],b=[32],C=()=>dl(tS(s),Zk(s)),M=()=>Wh(s);s.on("keydown",F=>{if(F.keyCode===13&&!Tn.modifierPressed(F)&&s.selection.isCollapsed()){const Y=C();(Y.inlinePatterns.length>0||Y.blockPatterns.length>0||M())&&AW(s,Y)&&F.preventDefault()}},!0);const I=()=>{if(s.selection.isCollapsed()){const F=C();(F.inlinePatterns.length>0||M())&&MW(s,F)}};s.on("keyup",F=>{C4(b,F)&&I()}),s.on("keypress",F=>{kW(f,F)&&Nl.setEditorTimeout(s,I)})},DW=s=>{TL(s)},PW=s=>{const f=on.each,b=Tn.BACKSPACE,C=Tn.DELETE,M=s.dom,I=s.selection,F=s.parser,Y=bn.browser,X=Y.isFirefox(),ae=Y.isChromium()||Y.isSafari(),de=bn.deviceType.isiPhone()||bn.deviceType.isiPad(),fe=bn.os.isMacOS()||bn.os.isiOS(),ve=(Nn,vr)=>{try{s.getDoc().execCommand(Nn,!1,String(vr))}catch{}},De=Nn=>Nn.isDefaultPrevented(),Ie=()=>{const Nn=ln=>{const _r=M.create("body"),fo=ln.cloneContents();return _r.appendChild(fo),I.serializer.serialize(_r,{format:"html"})},vr=ln=>{const _r=Nn(ln),fo=M.createRng();fo.selectNode(s.getBody());const Jo=Nn(fo);return _r===Jo};s.on("keydown",ln=>{const _r=ln.keyCode;if(!De(ln)&&(_r===C||_r===b)&&s.selection.isEditable()){const fo=s.selection.isCollapsed(),Jo=s.getBody();if(fo&&!Ai(Ve.fromDom(Jo))||!fo&&!vr(s.selection.getRng()))return;ln.preventDefault(),s.setContent(""),Jo.firstChild&&M.isBlock(Jo.firstChild)?s.selection.setCursorLocation(Jo.firstChild,0):s.selection.setCursorLocation(Jo,0),s.nodeChanged()}})},Me=()=>{s.shortcuts.add("meta+a",null,"SelectAll")},Re=()=>{s.inline||M.bind(s.getDoc(),"mousedown mouseup",Nn=>{let vr;if(Nn.target===s.getDoc().documentElement)if(vr=I.getRng(),s.getBody().focus(),Nn.type==="mousedown"){if(is(vr.startContainer))return;I.placeCaretAt(Nn.clientX,Nn.clientY)}else I.setRng(vr)})},qe=()=>{s.on("keydown",Nn=>{if(!De(Nn)&&Nn.keyCode===b){if(!s.getBody().getElementsByTagName("hr").length)return;if(I.isCollapsed()&&I.getRng().startOffset===0){const vr=I.getNode(),ln=vr.previousSibling;if(vr.nodeName==="HR"){M.remove(vr),Nn.preventDefault();return}ln&&ln.nodeName&&ln.nodeName.toLowerCase()==="hr"&&(M.remove(ln),Nn.preventDefault())}}})},nt=()=>{Range.prototype.getClientRects||s.on("mousedown",Nn=>{if(!De(Nn)&&Nn.target.nodeName==="HTML"){const vr=s.getBody();vr.blur(),Nl.setEditorTimeout(s,()=>{vr.focus()})}})},tt=()=>{const Nn=dv(s);s.on("click",vr=>{const ln=vr.target;/^(IMG|HR)$/.test(ln.nodeName)&&M.isEditable(ln)&&(vr.preventDefault(),s.selection.select(ln),s.nodeChanged()),ln.nodeName==="A"&&M.hasClass(ln,Nn)&&ln.childNodes.length===0&&M.isEditable(ln.parentNode)&&(vr.preventDefault(),I.select(ln))})},gt=()=>{const Nn=()=>{const ln=M.getAttribs(I.getStart().cloneNode(!1));return()=>{const _r=I.getStart();_r!==s.getBody()&&(M.setAttrib(_r,"style",null),f(ln,fo=>{_r.setAttributeNode(fo.cloneNode(!0))}))}},vr=()=>!I.isCollapsed()&&M.getParent(I.getStart(),M.isBlock)!==M.getParent(I.getEnd(),M.isBlock);s.on("keypress",ln=>{let _r;return!De(ln)&&(ln.keyCode===8||ln.keyCode===46)&&vr()?(_r=Nn(),s.getDoc().execCommand("delete",!1),_r(),ln.preventDefault(),!1):!0}),M.bind(s.getDoc(),"cut",ln=>{if(!De(ln)&&vr()){const _r=Nn();Nl.setEditorTimeout(s,()=>{_r()})}})},Ht=()=>{s.on("keydown",Nn=>{if(!De(Nn)&&Nn.keyCode===b&&I.isCollapsed()&&I.getRng().startOffset===0){const vr=I.getNode().previousSibling;if(vr&&vr.nodeName&&vr.nodeName.toLowerCase()==="table")return Nn.preventDefault(),!1}return!0})},an=()=>{s.on("keydown",Nn=>{if(De(Nn)||Nn.keyCode!==Tn.BACKSPACE)return;let vr=I.getRng();const ln=vr.startContainer,_r=vr.startOffset,fo=M.getRoot();let Jo=ln;if(!(!vr.collapsed||_r!==0)){for(;Jo.parentNode&&Jo.parentNode.firstChild===Jo&&Jo.parentNode!==fo;)Jo=Jo.parentNode;Jo.nodeName==="BLOCKQUOTE"&&(s.formatter.toggle("blockquote",void 0,Jo),vr=M.createRng(),vr.setStart(ln,0),vr.setEnd(ln,0),I.setRng(vr))}})},_n=()=>{const Nn=()=>{ve("StyleWithCSS",!1),ve("enableInlineTableEditing",!1),jd(s)||ve("enableObjectResizing",!1)};aE(s)||s.on("BeforeExecCommand mousedown",Nn)},At=()=>{const Nn=()=>{f(M.select("a:not([data-mce-block])"),vr=>{var ln;let _r=vr.parentNode;const fo=M.getRoot();if((_r==null?void 0:_r.lastChild)===vr){for(;_r&&!M.isBlock(_r);){if(((ln=_r.parentNode)===null||ln===void 0?void 0:ln.lastChild)!==_r||_r===fo)return;_r=_r.parentNode}M.add(_r,"br",{"data-mce-bogus":1})}})};s.on("SetContent ExecCommand",vr=>{(vr.type==="setcontent"||vr.command==="mceInsertLink")&&Nn()})},St=()=>{s.on("init",()=>{ve("DefaultParagraphSeparator",xs(s))})},Ut=Nn=>{const vr=Nn.getBody(),ln=Nn.selection.getRng();return ln.startContainer===ln.endContainer&&ln.startContainer===vr&&ln.startOffset===0&&ln.endOffset===vr.childNodes.length},$n=()=>{s.on("keyup focusin mouseup",Nn=>{!Tn.modifierPressed(Nn)&&!Ut(s)&&I.normalize()},!0)},Qn=()=>{s.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},zr=()=>{s.inline||s.on("keydown",()=>{document.activeElement===document.body&&s.getWin().focus()})},Jr=()=>{s.inline||(s.contentStyles.push("body {min-height: 150px}"),s.on("click",Nn=>{let vr;Nn.target.nodeName==="HTML"&&(vr=s.selection.getRng(),s.getBody().focus(),s.selection.setRng(vr),s.selection.normalize(),s.nodeChanged())}))},Uo=()=>{fe&&s.on("keydown",Nn=>{Tn.metaKeyPressed(Nn)&&!Nn.shiftKey&&(Nn.keyCode===37||Nn.keyCode===39)&&(Nn.preventDefault(),s.selection.getSel().modify("move",Nn.keyCode===37?"backward":"forward","lineboundary"))})},ho=()=>{s.on("click",Nn=>{let vr=Nn.target;do if(vr.tagName==="A"){Nn.preventDefault();return}while(vr=vr.parentNode)}),s.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ki=()=>{s.on("init",()=>{s.dom.bind(s.getBody(),"submit",Nn=>{Nn.preventDefault()})})},hs=()=>{F.addNodeFilter("br",Nn=>{let vr=Nn.length;for(;vr--;)Nn[vr].attr("class")==="Apple-interchange-newline"&&Nn[vr].remove()})},Ho=be,dn=()=>{if(!X||s.removed)return!1;const Nn=s.selection.getSel();return!Nn||!Nn.rangeCount||Nn.rangeCount===0},Hn=()=>{ae&&(Re(),tt(),ki(),Me(),de&&(zr(),Jr(),ho())),X&&(nt(),_n(),Qn(),Uo())},bo=()=>{s.on("drop",Nn=>{var vr;const ln=(vr=Nn.dataTransfer)===null||vr===void 0?void 0:vr.getData("text/html");V(ln)&&/^<img[^>]*>$/.test(ln)&&s.dispatch("dragend",new window.DragEvent("dragend",Nn))})},no=()=>{an(),Ie(),bn.windowsPhone||$n(),ae&&(Re(),tt(),St(),ki(),Ht(),hs(),de?(zr(),Jr(),ho()):Me()),X&&(qe(),nt(),gt(),_n(),At(),Qn(),Uo(),Ht(),bo())};return Cp(s)?Hn():no(),{refreshContentEditable:Ho,isHidden:dn}},AL=Vo.DOM,RW=(s,f)=>{const b=Ve.fromDom(s.getBody()),C=Wb(Id(b)),M=Ve.fromTag("style");na(M,"type","text/css"),Ki(M,Ve.fromText(f)),Ki(C,M),s.on("remove",()=>{wo(M)})},IW=s=>s.inline?s.getElement().nodeName.toLowerCase():void 0,ML=s=>qo(s,f=>te(f)===!1),wC=s=>{const f=s.options.get,b=s.editorUpload.blobCache;return ML({allow_conditional_comments:f("allow_conditional_comments"),allow_html_data_urls:f("allow_html_data_urls"),allow_svg_data_urls:f("allow_svg_data_urls"),allow_html_in_named_anchor:f("allow_html_in_named_anchor"),allow_script_urls:f("allow_script_urls"),allow_unsafe_link_target:f("allow_unsafe_link_target"),convert_unsafe_embeds:f("convert_unsafe_embeds"),convert_fonts_to_spans:f("convert_fonts_to_spans"),fix_list_elements:f("fix_list_elements"),font_size_legacy_values:f("font_size_legacy_values"),forced_root_block:f("forced_root_block"),forced_root_block_attrs:f("forced_root_block_attrs"),preserve_cdata:f("preserve_cdata"),inline_styles:f("inline_styles"),root_name:IW(s),sandbox_iframes:f("sandbox_iframes"),sanitize:f("xss_sanitization"),validate:!0,blob_cache:b,document:s.getDoc()})},w4=s=>{const f=s.options.get;return ML({custom_elements:f("custom_elements"),extended_valid_elements:f("extended_valid_elements"),invalid_elements:f("invalid_elements"),invalid_styles:f("invalid_styles"),schema:f("schema"),valid_children:f("valid_children"),valid_classes:f("valid_classes"),valid_elements:f("valid_elements"),valid_styles:f("valid_styles"),verify_html:f("verify_html"),padd_empty_block_inline_children:f("format_empty_lines")})},$W=s=>{const f=s.options.get;return{...wC(s),...w4(s),...ML({remove_trailing_brs:f("remove_trailing_brs"),pad_empty_with_br:f("pad_empty_with_br"),url_converter:f("url_converter"),url_converter_scope:f("url_converter_scope"),element_format:f("element_format"),entities:f("entities"),entity_encoding:f("entity_encoding"),indent:f("indent"),indent_after:f("indent_after"),indent_before:f("indent_before")})}},LW=s=>{const f=gd(wC(s),s.schema);return f.addAttributeFilter("src,href,style,tabindex",(b,C)=>{const M=s.dom,I="data-mce-"+C;let F=b.length;for(;F--;){const Y=b[F];let X=Y.attr(C);if(X&&!Y.attr(I)){if(X.indexOf("data:")===0||X.indexOf("blob:")===0)continue;C==="style"?(X=M.serializeStyle(M.parseStyle(X),Y.name),X.length||(X=null),Y.attr(I,X),Y.attr(C,X)):C==="tabindex"?(Y.attr(I,X),Y.attr(C,null)):Y.attr(I,s.convertURL(X,C,Y.name))}}}),f.addNodeFilter("script",b=>{let C=b.length;for(;C--;){const M=b[C],I=M.attr("type")||"no/type";I.indexOf("mce-")!==0&&M.attr("type","mce-"+I)}}),Xk(s)&&f.addNodeFilter("#cdata",b=>{var C;let M=b.length;for(;M--;){const I=b[M];I.type=8,I.name="#comment",I.value="[CDATA["+s.dom.encode((C=I.value)!==null&&C!==void 0?C:"")+"]]"}}),f.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",b=>{let C=b.length;const M=s.schema.getNonEmptyElements();for(;C--;){const I=b[C];I.isEmpty(M)&&I.getAll("br").length===0&&I.append(new Va("br",1))}}),f},NW=s=>{const f=uE(s);f&&Nl.setEditorTimeout(s,()=>{let b;f===!0?b=s:b=s.editorManager.get(f),b&&!b.destroyed&&(b.focus(),b.selection.scrollIntoView())},100)},OW=s=>{const f=s.dom.getRoot();!s.inline&&(!Av(s)||s.selection.getStart(!0)===f)&&Ts(f).each(b=>{const C=b.getNode(),M=rl(C)?Ts(C).getOr(b):b;s.selection.setRng(M.toRange())})},BW=s=>{s.bindPendingEventDelegates(),s.initialized=!0,PD(s),s.focus(!0),OW(s),s.nodeChanged({initial:!0});const f=cE(s);he(f)&&f.call(s,s),NW(s)},kL=s=>s.inline?s.ui.styleSheetLoader:s.dom.styleSheetLoader,FW=(s,f,b)=>{const{pass:C,fail:M}=Gt(f,Y=>tinymce.Resource.has(pI(Y))),F=[...C.map(Y=>{const X=tinymce.Resource.get(pI(Y));return V(X)?Promise.resolve(kL(s).loadRawCss(Y,X)):Promise.resolve()}),kL(s).loadAll(M)];return s.inline?F:F.concat([s.ui.styleSheetLoader.loadAll(b)])},E4=s=>{const f=kL(s),b=Qw(s),C=s.contentCSS,M=()=>{f.unloadAll(C),s.inline||s.ui.styleSheetLoader.unloadAll(b)},I=()=>{s.removed?M():s.on("remove",M)};if(s.contentStyles.length>0){let X="";on.each(s.contentStyles,ae=>{X+=ae+`\r
`}),s.dom.addStyle(X)}const F=Promise.all(FW(s,C,b)).then(I).catch(I),Y=My(s);return Y&&RW(s,Y),F},T4=s=>{const f=s.getDoc(),b=s.getBody();WE(s),dE(s)||(f.body.spellcheck=!1,AL.setAttrib(b,"spellcheck","false")),s.quirks=PW(s),DD(s);const C=eE(s);C!==void 0&&(b.dir=C);const M=hE(s);M&&s.on("BeforeSetContent",I=>{on.each(M,F=>{I.content=I.content.replace(F,Y=>"<!--mce:protected "+escape(Y)+"-->")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",I=>{s.composing=I.type==="compositionstart"})},VW=s=>{Cp(s)||s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"})},fM=s=>{s.removed!==!0&&(VW(s),BW(s))},zW=s=>{let f=!1;const b=setTimeout(()=>{f||s.setProgressState(!0)},500);return()=>{clearTimeout(b),f=!0,s.setProgressState(!1)}},A4=s=>{const f=s.getElement();let b=s.getDoc();s.inline&&(AL.addClass(f,"mce-content-body"),s.contentDocument=b=document,s.contentWindow=window,s.bodyElement=f,s.contentAreaContainer=f);const C=s.getBody();C.disabled=!0,s.readonly=aE(s),s._editableRoot=mu(s),!s.readonly&&s.hasEditableRoot()&&(s.inline&&AL.getStyle(C,"position",!0)==="static"&&(C.style.position="relative"),C.contentEditable="true"),C.disabled=!1,s.editorUpload=cU(s),s.schema=Cc(w4(s)),s.dom=Vo(b,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,update_styles:!0,root_element:s.inline?s.getBody():null,collect:s.inline,schema:s.schema,contentCssCors:om(s),referrerPolicy:ai(s),onSetAttrib:F=>{s.dispatch("SetAttrib",F)},force_hex_color:gE(s)}),s.parser=LW(s),s.serializer=hB($W(s),s),s.selection=Vm(s.dom,s.getWin(),s.serializer,s),s.annotator=kS(s),s.formatter=a0(s),s.undoManager=Ux(s),s._nodeChangeDispatcher=new bV(s),s._selectionOverrides=gW(s),B3(s),IG(s),UY(s),Cp(s)||(FG(s),DW(s));const M=U7(s);g2(s,M),z3(s),dU(s),qV(s);const I=i6(s);T4(s),I.fold(()=>{const F=zW(s);E4(s).then(()=>{fM(s),F()})},F=>{s.setProgressState(!0),E4(s).then(()=>{F().then(Y=>{s.setProgressState(!1),fM(s),lI(s)},Y=>{s.notificationManager.open({type:"error",text:String(Y)}),fM(s),lI(s)})})})},M4=Be,EC=(s,f,b)=>qb(s,f,M4,b),DL=Vo.DOM,k4=(s,f,b,C)=>{const M=Ve.fromTag("iframe");return C.each(I=>na(M,"tabindex",I)),Dd(M,b),Dd(M,{id:s+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),$p(M,"tox-edit-area__iframe"),M},UW=s=>{let f=H_(s)+"<html><head>";sv(s)!==s.documentBaseUrl&&(f+='<base href="'+s.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const b=G_(s),C=Dk(s),M=s.translate(Uk(s));return W_(s)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+W_(s)+'" />'),f+=`</head><body id="${b}" class="mce-content-body ${C}" data-id="${s.id}" aria-label="${M}"><br></body></html>`,f},HW=(s,f)=>{const b=s.translate("Rich Text Area"),C=Fu(Ve.fromDom(s.getElement()),"tabindex").bind(ea),M=k4(s.id,b,U_(s),C).dom;M.onload=()=>{M.onload=null,s.dispatch("load")},s.contentAreaContainer=f.iframeContainer,s.iframeElement=M,s.iframeHTML=UW(s),DL.add(f.iframeContainer,M)},GW=s=>{const f=s.iframeElement,b=()=>{s.contentDocument=f.contentDocument,A4(s)};if(Qk(s)||bn.browser.isFirefox()){const C=s.getDoc();C.open(),C.write(s.iframeHTML),C.close(),b()}else{const C=EC(Ve.fromDom(f),"load",()=>{C.unbind(),b()});f.srcdoc=s.iframeHTML}},WW=(s,f)=>{HW(s,f),f.editorContainer&&(f.editorContainer.style.display=s.orgDisplay,s.hidden=DL.isHidden(f.editorContainer)),s.getElement().style.display="none",DL.setAttrib(s.id,"aria-hidden","true"),s.getElement().style.visibility=s.orgVisibility,GW(s)},PL=Vo.DOM,YW=(s,f,b)=>{const C=o0.get(b),M=o0.urls[b]||s.documentBaseUrl.replace(/\/$/,"");if(b=on.trim(b),C&&on.inArray(f,b)===-1){if(s.plugins[b])return;try{const I=C(s,M)||{};s.plugins[b]=I,he(I.init)&&(I.init(s,M),f.push(b))}catch(I){wB(s,b,I)}}},D4=s=>s.replace(/^\-/,""),jW=s=>{const f=[];Fe(Ry(s),b=>{YW(s,f,D4(b))})},ZW=s=>{const f=on.trim(Ty(s)),b=s.ui.registry.getAll().icons,C={...Bx.get("default").icons,...Bx.get(f).icons};Ue(C,(M,I)=>{Vn(b,I)||s.ui.registry.addIcon(I,M)})},qW=s=>{const f=Xf(s);if(V(f)){const b=wp.get(f);s.theme=b(s,wp.urls[f])||{},he(s.theme.init)&&s.theme.init(s,wp.urls[f]||s.documentBaseUrl.replace(/\/$/,""))}else s.theme={}},KW=s=>{const f=nd(s),b=Au.get(f);s.model=b(s,Au.urls[f])},XW=s=>{const f=s.theme.renderUI;return f?f():R4(s)},JW=s=>{const f=s.getElement(),C=Xf(s)(s,f);return C.editorContainer.nodeType&&(C.editorContainer.id=C.editorContainer.id||s.id+"_parent"),C.iframeContainer&&C.iframeContainer.nodeType&&(C.iframeContainer.id=C.iframeContainer.id||s.id+"_iframecontainer"),C.height=C.iframeHeight?C.iframeHeight:f.offsetHeight,C},P4=(s,f)=>({editorContainer:s,iframeContainer:f,api:{}}),QW=s=>{const f=PL.create("div");return PL.insertAfter(f,s),P4(f,f)},R4=s=>{const f=s.getElement();return s.inline?P4(null):QW(f)},I4=s=>{const f=s.getElement();return s.orgDisplay=f.style.display,V(Xf(s))?XW(s):he(Xf(s))?JW(s):R4(s)},RL=(s,f)=>{const b={show:ue.from(f.show).getOr(be),hide:ue.from(f.hide).getOr(be),isEnabled:ue.from(f.isEnabled).getOr(Be),setEnabled:C=>{s.mode.isReadOnly()||ue.from(f.setEnabled).each(M=>M(C))}};s.ui={...s.ui,...b}},$4=async s=>{s.dispatch("ScriptsLoaded"),ZW(s),qW(s),KW(s),jW(s);const f=await I4(s);RL(s,ue.from(f.api).getOr({})),s.editorContainer=f.editorContainer,eU(s),s.inline?A4(s):WW(s,{editorContainer:f.editorContainer,iframeContainer:f.iframeContainer})},eg=Vo.DOM,L4=s=>s.charAt(0)==="-",e9=(s,f)=>{const b=q_(f),C=Fa(f);if(!Oa.hasCode(b)&&b!=="en"){const M=Fo(C)?C:`${f.editorManager.baseURL}/langs/${b}.js`;s.add(M).catch(()=>{Vx(f,M,b)})}},t9=(s,f)=>{const b=Xf(s);if(V(b)&&!L4(b)&&!Vn(wp.urls,b)){const C=im(s),M=C?s.documentBaseURI.toAbsolute(C):`themes/${b}/theme${f}.js`;wp.load(b,M).catch(()=>{K6(s,M,b)})}},N4=(s,f)=>{const b=nd(s);if(b!=="plugin"&&!Vn(Au.urls,b)){const C=nE(s),M=V(C)?s.documentBaseURI.toAbsolute(C):`models/${b}/model${f}.js`;Au.load(b,M).catch(()=>{CB(s,M,b)})}},O4=s=>ue.from(Ik(s)).filter(Fo).map(f=>({url:f,name:ue.none()})),B4=(s,f,b)=>ue.from(f).filter(C=>Fo(C)&&!Bx.has(C)).map(C=>({url:`${s.editorManager.baseURL}/icons/${C}/icons${b}.js`,name:ue.some(C)})),n9=(s,f,b)=>{const C=B4(f,"default",b),M=O4(f).orThunk(()=>B4(f,Ty(f),""));Fe(Wa([C,M]),I=>{s.add(I.url).catch(()=>{q6(f,I.url,I.name.getOrUndefined())})})},IL=(s,f)=>{const b=(C,M)=>{o0.load(C,M).catch(()=>{NY(s,M,C)})};Ue(gu(s),(C,M)=>{b(M,C),s.options.set("plugins",Ry(s).concat(M))}),Fe(Ry(s),C=>{C=on.trim(C),C&&!o0.urls[C]&&!L4(C)&&b(C,`plugins/${C}/plugin${f}.js`)})},pM=s=>{const f=Xf(s);return!V(f)||re(wp.get(f))},mM=s=>{const f=nd(s);return re(Au.get(f))},Ap=(s,f)=>{const b=ra.ScriptLoader,C=()=>{!s.removed&&pM(s)&&mM(s)&&$4(s)};t9(s,f),N4(s,f),e9(b,s),n9(b,s,f),IL(s,f),b.loadQueue().then(C,C)},gM=(s,f)=>h_.forElement(s,{contentCssCors:Py(f),referrerPolicy:ai(f)}),vb=s=>{const f=s.id;Oa.setCode(q_(s));const b=()=>{eg.unbind(window,"ready",b),s.render()};if(!di.Event.domLoaded){eg.bind(window,"ready",b);return}if(!s.getElement())return;const C=Ve.fromDom(s.getElement()),M=jC(C);s.on("remove",()=>{tn(C.dom.attributes,F=>da(C,F.name)),Dd(C,M)}),s.ui.styleSheetLoader=gM(C,s),X_(s)?s.inline=!0:(s.orgVisibility=s.getElement().style.visibility,s.getElement().style.visibility="hidden");const I=s.getElement().form||eg.getParent(f,"form");I&&(s.formElement=I,Fk(s)&&!e_(s.getElement())&&(eg.insertAfter(eg.create("input",{type:"hidden",name:f}),f),s.hasHiddenInput=!0),s.formEventDelegate=F=>{s.dispatch(F.type,F)},eg.bind(I,"submit reset",s.formEventDelegate),s.on("reset",()=>{s.resetContent()}),Vk(s)&&!I.submit.nodeType&&!I.submit.length&&!I._mceOldSubmit&&(I._mceOldSubmit=I.submit,I.submit=()=>(s.editorManager.triggerSave(),s.setDirty(!1),I._mceOldSubmit(I)))),s.windowManager=xB(s),s.notificationManager=fI(s),nD(s)&&s.on("GetContent",F=>{F.save&&(F.content=eg.encode(F.content))}),Zd(s)&&s.on("submit",()=>{s.initialized&&s.save()}),ky(s)&&(s._beforeUnload=()=>{s.initialized&&!s.destroyed&&!s.isHidden()&&s.save({format:"raw",no_events:!0,set_dirty:!1})},s.editorManager.on("BeforeUnload",s._beforeUnload)),s.editorManager.add(s),Ap(s,s.suffix)},F4=(s,f)=>{s._editableRoot!==f&&(s._editableRoot=f,s.readonly||(s.getBody().contentEditable=String(s.hasEditableRoot()),s.nodeChanged()),ND(s,f))},r9=s=>s._editableRoot,o9=(s,f)=>({sections:Ee(s),options:Ee(f)}),$L=Qc().deviceType,V4=$L.isPhone(),LL=$L.isTablet(),tg=s=>{if(oe(s))return[];{const f=Z(s)?s:s.split(/[ ,]/),b=et(f,kd);return mt(b,Fo)}},ng=(s,f)=>{const b=Yr(f,(C,M)=>$e(s,M));return o9(b.t,b.f)},m0=(s,f,b={})=>{const C=s.sections(),M=Nr(C,f).getOr({});return on.extend({},b,M)},vM=(s,f)=>Vn(s.sections(),f),i9=(s,f)=>vM(s,f)?s.sections()[f]:{},a9=(s,f)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Nr(s,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...f?{menubar:!1}:{}}),s9=(s,f)=>{var b;const C=(b=f.external_plugins)!==null&&b!==void 0?b:{};return s&&s.external_plugins?on.extend({},s.external_plugins,C):C},l9=(s,f)=>[...tg(s),...tg(f)],c9=(s,f,b,C)=>s&&vM(f,"mobile")?C:b,u9=(s,f,b,C)=>{const M=tg(b.forced_plugins),I=tg(C.plugins),F=i9(f,"mobile"),Y=F.plugins?tg(F.plugins):I,X=c9(s,f,I,Y),ae=l9(M,X);return on.extend(C,{forced_plugins:M,plugins:ae})},z4=(s,f)=>s&&vM(f,"mobile"),d9=(s,f,b,C,M)=>{var I;const F=s?{mobile:a9((I=M.mobile)!==null&&I!==void 0?I:{},f)}:{},Y=ng(["mobile"],uC(F,M)),X=on.extend(b,C,Y.options(),z4(s,Y)?m0(Y,"mobile"):{},{external_plugins:s9(C,Y.options())});return u9(s,Y,C,X)},h9=(s,f)=>d9(V4||LL,V4,f,s,f),f9=(s,f)=>v6(s,f),uj=s=>{const f=(C,M)=>{s.formatter.toggle(C,M),s.nodeChanged()},b=C=>()=>{Fe("left,center,right,justify".split(","),M=>{C!==M&&s.formatter.remove("align"+M)}),C!=="none"&&f("align"+C)};s.editorCommands.addCommands({JustifyLeft:b("left"),JustifyCenter:b("center"),JustifyRight:b("right"),JustifyFull:b("justify"),JustifyNone:b("none")})},p9=s=>{const f=b=>()=>{const C=s.selection,M=C.isCollapsed()?[s.dom.getParent(C.getNode(),s.dom.isBlock)]:C.getSelectedBlocks();return st(M,I=>re(s.formatter.matchNode(I,b)))};s.editorCommands.addCommands({JustifyLeft:f("alignleft"),JustifyCenter:f("aligncenter"),JustifyRight:f("alignright"),JustifyFull:f("alignjustify")},"state")},NL=s=>{uj(s),p9(s)},m9=s=>{s.editorCommands.addCommands({"Cut,Copy,Paste":f=>{const b=s.getDoc();let C;try{b.execCommand(f)}catch{C=!0}if(f==="paste"&&!b.queryCommandEnabled(f)&&(C=!0),C||!b.queryCommandSupported(f)){let M=s.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(bn.os.isMacOS()||bn.os.isiOS())&&(M=M.replace(/Ctrl\+/g,"⌘+")),s.notificationManager.open({text:M,type:"error"})}}})},g9=(s,f,b,C)=>{const M=Ve.fromDom(s.getRoot());return Rm(M,kt.fromRangeStart(f),C)?b=b.replace(/^ /,"&nbsp;"):b=b.replace(/^&nbsp;/," "),Im(M,kt.fromRangeEnd(f),C)?b=b.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):b=b.replace(/&nbsp;(<br( \/)?>)?$/," "),b},U4=s=>{if(typeof s!="string"){const f=on.extend({paste:s.paste,data:{paste:s.paste}},s);return{content:s.content,details:f}}return{content:s,details:{}}},v9=(s,f)=>{const b=s.selection,C=s.dom;return/^ | $/.test(f)?g9(C,b.getRng(),f,s.schema):f},TC=(s,f)=>{if(s.selection.isEditable()){const{content:b,details:C}=U4(f);VR(s,{...C,content:v9(s,b),format:"html",set:!1,selection:!0}).each(M=>{const I=m6(s,M.content,C);kA(s,I,M),s.addVisual()})}},y9=s=>{s.editorCommands.addCommands({mceCleanup:()=>{const f=s.selection.getBookmark();s.setContent(s.getContent()),s.selection.moveToBookmark(f)},insertImage:(f,b,C)=>{TC(s,s.dom.createHTML("img",{src:C}))},insertHorizontalRule:()=>{s.execCommand("mceInsertContent",!1,"<hr>")},insertText:(f,b,C)=>{TC(s,s.dom.encode(C))},insertHTML:(f,b,C)=>{TC(s,C)},mceInsertContent:(f,b,C)=>{TC(s,C)},mceSetContent:(f,b,C)=>{s.setContent(C)},mceReplaceContent:(f,b,C)=>{s.execCommand("mceInsertContent",!1,C.replace(/\{\$selection\}/g,s.selection.getContent({format:"text"})))},mceNewDocument:()=>{s.setContent(rd(s))}})},OL={"font-size":"size","font-family":"face"},b9=Ns("font"),_9=(s,f,b)=>{const C=I=>bg(I,s).orThunk(()=>b9(I)?Nr(OL,s).bind(F=>Fu(I,F)):ue.none()),M=I=>Bo(Ve.fromDom(f),I);return _p(Ve.fromDom(b),I=>C(I),M)},S9=s=>s.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),x9=(s,f)=>ue.from(Vo.DOM.getStyle(f,s,!0)),BL=s=>(f,b)=>ue.from(b).map(Ve.fromDom).filter(Cl).bind(C=>_9(s,f,C.dom).or(x9(s,C.dom))).getOr(""),FL=BL("font-size"),H4=Q(S9,BL("font-family")),VL=s=>Ts(s.getBody()).bind(f=>{const b=f.container();return ue.from(Zt(b)?b.parentNode:b)}),C9=s=>ue.from(s.selection.getRng()).bind(f=>{const b=s.getBody();return f.startContainer===b&&f.startOffset===0?ue.none():ue.from(s.selection.getStart(!0))}),dj=(s,f)=>C9(s).orThunk(Te(VL,s)).map(Ve.fromDom).filter(Cl).bind(f),G4=(s,f)=>dj(s,Ne(ue.some,f)),W4=(s,f)=>{if(/^[0-9.]+$/.test(f)){const b=parseInt(f,10);if(b>=1&&b<=7){const C=eD(s),M=tD(s);return M.length>0?M[b-1]||f:C[b-1]||f}else return f}else return f},Y4=s=>{const f=s.split(/\s*,\s*/);return et(f,b=>b.indexOf(" ")!==-1&&!(Li(b,'"')||Li(b,"'"))?`'${b}'`:b).join(",")},w9=(s,f)=>{const b=W4(s,f);s.formatter.toggle("fontname",{value:Y4(b)}),s.nodeChanged()},E9=s=>G4(s,f=>H4(s.getBody(),f.dom)).getOr(""),T9=(s,f)=>{s.formatter.toggle("fontsize",{value:W4(s,f)}),s.nodeChanged()},hj=s=>G4(s,f=>FL(s.getBody(),f.dom)).getOr(""),fj=s=>G4(s,f=>{const b=Ve.fromDom(s.getBody()),C=_p(f,I=>bg(I,"line-height"),Te(Bo,b)),M=()=>{const I=parseFloat(gc(f,"line-height")),F=parseFloat(gc(f,"font-size"));return String(I/F)};return C.getOrThunk(M)}).getOr(""),j4=(s,f)=>{s.formatter.toggle("lineheight",{value:String(f)}),s.nodeChanged()},Z4=s=>{const f=(b,C)=>{s.formatter.toggle(b,C),s.nodeChanged()};s.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":b=>{f(b)},"ForeColor,HiliteColor":(b,C,M)=>{f(b,{value:M})},BackColor:(b,C,M)=>{f("hilitecolor",{value:M})},FontName:(b,C,M)=>{w9(s,M)},FontSize:(b,C,M)=>{T9(s,M)},LineHeight:(b,C,M)=>{j4(s,M)},Lang:(b,C,M)=>{var I;f(b,{value:M.code,customValue:(I=M.customCode)!==null&&I!==void 0?I:null})},RemoveFormat:b=>{s.formatter.remove(b)},mceBlockQuote:()=>{f("blockquote")},FormatBlock:(b,C,M)=>{f(V(M)?M:"p")},mceToggleFormat:(b,C,M)=>{f(M)}})},A9=s=>{const f=b=>s.formatter.match(b);s.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":b=>f(b),mceBlockQuote:()=>f("blockquote")},"state"),s.editorCommands.addQueryValueHandler("FontName",()=>E9(s)),s.editorCommands.addQueryValueHandler("FontSize",()=>hj(s)),s.editorCommands.addQueryValueHandler("LineHeight",()=>fj(s))},M9=s=>{Z4(s),A9(s)},k9=s=>{s.editorCommands.addCommands({mceAddUndoLevel:()=>{s.undoManager.add()},mceEndUndoLevel:()=>{s.undoManager.add()},Undo:()=>{s.undoManager.undo()},Redo:()=>{s.undoManager.redo()}})},pj=s=>{s.editorCommands.addCommands({Indent:()=>{L3(s)},Outdent:()=>{N3(s)}}),s.editorCommands.addCommands({Outdent:()=>P3(s)},"state")},mj=s=>{const f=(b,C,M)=>{const I=V(M)?{href:M}:M,F=s.dom.getParent(s.selection.getNode(),"a");j(I)&&V(I.href)&&(I.href=I.href.replace(/ /g,"%20"),(!F||!I.href)&&s.formatter.remove("link"),I.href&&s.formatter.apply("link",I,F))};s.editorCommands.addCommands({unlink:()=>{if(s.selection.isEditable()){if(s.selection.isCollapsed()){const b=s.dom.getParent(s.selection.getStart(),"a");b&&s.dom.remove(b,!0);return}s.formatter.remove("link")}},mceInsertLink:f,createLink:f})},gj=s=>{s.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":f=>{s.getDoc().execCommand(f);const b=s.dom.getParent(s.selection.getNode(),"ol,ul");if(b){const C=b.parentNode;if(C&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(C.nodeName)){const M=s.selection.getBookmark();s.dom.split(C,b),s.selection.moveToBookmark(M)}}}})},D9=s=>{s.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":f=>{const b=s.dom.getParent(s.selection.getNode(),"ul,ol");return b&&(f==="insertunorderedlist"&&b.tagName==="UL"||f==="insertorderedlist"&&b.tagName==="OL")}},"state")},vj=s=>{gj(s),D9(s)},P9=(s,f,b,C)=>{const M=s.dom,I=Y=>M.isBlock(Y)&&Y.parentElement===b,F=I(f)?f:M.getParent(C,I,b);return ue.from(F).map(Ve.fromDom)},rg=(s,f)=>{const b=s.dom,C=s.selection.getRng(),M=f?s.selection.getStart():s.selection.getEnd(),I=f?C.startContainer:C.endContainer,F=Gc(b,I);if(!F||!F.isContentEditable)return;const Y=f?Zs:Hu,X=xs(s);P9(s,M,F,I).each(ae=>{const de=$$(s,I,ae.dom,F,!1,X);Y(ae,Ve.fromDom(de)),s.selection.setCursorLocation(de,0),s.dispatch("NewBlock",{newBlock:de}),hC(s,"insertParagraph")})},zL=s=>rg(s,!0),yM=s=>rg(s,!1),q4=s=>{s.editorCommands.addCommands({InsertNewBlockBefore:()=>{zL(s)},InsertNewBlockAfter:()=>{yM(s)}})},K4=s=>{s.editorCommands.addCommands({insertParagraph:()=>{H2(tV,s)},mceInsertNewLine:(f,b,C)=>{aV(s,C)},InsertLineBreak:(f,b,C)=>{H2(T7,s)}})},X4=s=>{s.editorCommands.addCommands({mceSelectNodeDepth:(f,b,C)=>{let M=0;s.dom.getParent(s.selection.getNode(),I=>Rn(I)&&M++===C?(s.selection.select(I),!1):!0,s.getBody())},mceSelectNode:(f,b,C)=>{s.selection.select(C)},selectAll:()=>{const f=s.dom.getParent(s.selection.getStart(),Fs);if(f){const b=s.dom.createRng();b.selectNodeContents(f),s.selection.setRng(b)}}})},R9=s=>{s.editorCommands.addCommands({mceRemoveNode:(f,b,C)=>{const M=C??s.selection.getNode();if(M!==s.getBody()){const I=s.selection.getBookmark();s.dom.remove(M,!0),s.selection.moveToBookmark(I)}},mcePrint:()=>{s.getWin().print()},mceFocus:(f,b,C)=>{tx(s,C===!0)},mceToggleVisualAid:()=>{s.hasVisual=!s.hasVisual,s.addVisual()}})},I9=s=>{NL(s),m9(s),k9(s),X4(s),y9(s),mj(s),pj(s),q4(s),K4(s),vj(s),M9(s),R9(s)},$9=["toggleview"],J4=s=>$e($9,s.toLowerCase());class Mp{constructor(f){this.commands={state:{},exec:{},value:{}},this.editor=f}execCommand(f,b=!1,C,M){const I=this.editor,F=f.toLowerCase(),Y=M==null?void 0:M.skip_focus;if(I.removed||(F!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(F)&&!Y?I.focus():mT(I)),I.dispatch("BeforeExecCommand",{command:f,ui:b,value:C}).isDefaultPrevented()))return!1;const ae=this.commands.exec[F];return he(ae)?(ae(F,b,C),I.dispatch("ExecCommand",{command:f,ui:b,value:C}),!0):!1}queryCommandState(f){if(!J4(f)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const b=f.toLowerCase(),C=this.commands.state[b];return he(C)?C(b):!1}queryCommandValue(f){if(!J4(f)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const b=f.toLowerCase(),C=this.commands.value[b];return he(C)?C(b):""}addCommands(f,b="exec"){const C=this.commands;Ue(f,(M,I)=>{Fe(I.toLowerCase().split(","),F=>{C[b][F]=M})})}addCommand(f,b,C){const M=f.toLowerCase();this.commands.exec[M]=(I,F,Y)=>b.call(C??this.editor,F,Y)}queryCommandSupported(f){const b=f.toLowerCase();return!!this.commands.exec[b]}addQueryStateHandler(f,b,C){this.commands.state[f.toLowerCase()]=()=>b.call(C??this.editor)}addQueryValueHandler(f,b,C){this.commands.value[f.toLowerCase()]=()=>b.call(C??this.editor)}}const g0="data-mce-contenteditable",Q4=(s,f,b)=>{N0(s,f)&&!b?Lp(s,f):b&&$p(s,f)},UL=(s,f,b)=>{try{s.getDoc().execCommand(f,!1,String(b))}catch{}},v0=(s,f)=>{s.dom.contentEditable=f?"true":"false"},L9=s=>{Fe(fa(s,'*[contenteditable="true"]'),f=>{na(f,g0,"true"),v0(f,!1)})},N9=s=>{Fe(fa(s,`*[${g0}="true"]`),f=>{da(f,g0),v0(f,!0)})},O9=s=>{ue.from(s.selection.getNode()).each(f=>{f.removeAttribute("data-mce-selected")})},e5=s=>{s.selection.setRng(s.selection.getRng())},B9=(s,f)=>{const b=Ve.fromDom(s.getBody());Q4(b,"mce-content-readonly",f),f?(s.selection.controlSelection.hideResizeRect(),s._selectionOverrides.hideFakeCaret(),O9(s),s.readonly=!0,v0(b,!1),L9(b)):(s.readonly=!1,s.hasEditableRoot()&&v0(b,!0),N9(b),UL(s,"StyleWithCSS",!1),UL(s,"enableInlineTableEditing",!1),UL(s,"enableObjectResizing",!1),ST(s)&&s.focus(),e5(s),s.nodeChanged())},y0=s=>s.readonly,t5=s=>{s.parser.addAttributeFilter("contenteditable",f=>{y0(s)&&Fe(f,b=>{b.attr(g0,b.attr("contenteditable")),b.attr("contenteditable","false")})}),s.serializer.addAttributeFilter(g0,f=>{y0(s)&&Fe(f,b=>{b.attr("contenteditable",b.attr(g0))})}),s.serializer.addTempAttr(g0)},HL=s=>{s.serializer?t5(s):s.on("PreInit",()=>{t5(s)})},F9=s=>s.type==="click",V9=["copy"],ka=s=>$e(V9,s.type),z9=(s,f)=>Th(f,"a",C=>Bo(C,Ve.fromDom(s.getBody()))).bind(C=>Fu(C,"href")),U9=(s,f)=>{if(F9(f)&&!Tn.metaKeyPressed(f)){const b=Ve.fromDom(f.target);z9(s,b).each(C=>{if(f.preventDefault(),/^#/.test(C)){const M=s.dom.select(`${C},[name="${$i(C,"#")}"]`);M.length&&s.selection.scrollIntoView(M[0],!0)}else window.open(C,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else ka(f)&&s.dispatch(f.type,f)},GL=s=>{s.on("ShowCaret",f=>{y0(s)&&f.preventDefault()}),s.on("ObjectSelected",f=>{y0(s)&&f.preventDefault()})},n5=on.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class AC{static isNative(f){return!!n5[f.toLowerCase()]}constructor(f){this.bindings={},this.settings=f||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Xe}fire(f,b){return this.dispatch(f,b)}dispatch(f,b){const C=f.toLowerCase(),M=ly(C,b??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(M);const I=this.bindings[C];if(I)for(let F=0,Y=I.length;F<Y;F++){const X=I[F];if(!X.removed){if(X.once&&this.off(C,X.func),M.isImmediatePropagationStopped())return M;if(X.func.call(this.scope,M)===!1)return M.preventDefault(),M}}return M}on(f,b,C,M){if(b===!1&&(b=Xe),b){const I={func:b,removed:!1};M&&on.extend(I,M);const F=f.toLowerCase().split(" ");let Y=F.length;for(;Y--;){const X=F[Y];let ae=this.bindings[X];ae||(ae=[],this.toggleEvent(X,!0)),C?ae=[I,...ae]:ae=[...ae,I],this.bindings[X]=ae}}return this}off(f,b){if(f){const C=f.toLowerCase().split(" ");let M=C.length;for(;M--;){const I=C[M];let F=this.bindings[I];if(!I)return Ue(this.bindings,(Y,X)=>{this.toggleEvent(X,!1),delete this.bindings[X]}),this;if(F){if(!b)F.length=0;else{const Y=Gt(F,X=>X.func===b);F=Y.fail,this.bindings[I]=F,Fe(Y.pass,X=>{X.removed=!0})}F.length||(this.toggleEvent(f,!1),delete this.bindings[I])}}}else Ue(this.bindings,(C,M)=>{this.toggleEvent(M,!1)}),this.bindings={};return this}once(f,b,C){return this.on(f,b,C,{once:!0})}has(f){f=f.toLowerCase();const b=this.bindings[f];return!(!b||b.length===0)}}const MC=s=>(s._eventDispatcher||(s._eventDispatcher=new AC({scope:s,toggleEvent:(f,b)=>{AC.isNative(f)&&s.toggleNativeEvent&&s.toggleNativeEvent(f,b)}})),s._eventDispatcher),WL={fire(s,f,b){return this.dispatch(s,f,b)},dispatch(s,f,b){const C=this;if(C.removed&&s!=="remove"&&s!=="detach")return ly(s.toLowerCase(),f??{},C);const M=MC(C).dispatch(s,f);if(b!==!1&&C.parent){let I=C.parent();for(;I&&!M.isPropagationStopped();)I.dispatch(s,M,!1),I=I.parent?I.parent():void 0}return M},on(s,f,b){return MC(this).on(s,f,b)},off(s,f){return MC(this).off(s,f)},once(s,f){return MC(this).once(s,f)},hasEventListeners(s){return MC(this).has(s)}},bM=Vo.DOM;let b0;const _M=(s,f)=>{if(f==="selectionchange")return s.getDoc();if(!s.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(f))return s.getDoc().documentElement;const b=K_(s);return b?(s.eventRoot||(s.eventRoot=bM.select(b)[0]),s.eventRoot):s.getBody()},H9=s=>!s.hidden&&!y0(s),r5=(s,f,b)=>{H9(s)?s.dispatch(f,b):y0(s)&&U9(s,b)},o5=(s,f)=>{if(s.delegates||(s.delegates={}),s.delegates[f]||s.removed)return;const b=_M(s,f);if(K_(s)){if(b0||(b0={},s.editorManager.on("removeEditor",()=>{s.editorManager.activeEditor||b0&&(Ue(b0,(M,I)=>{s.dom.unbind(_M(s,I))}),b0=null)})),b0[f])return;const C=M=>{const I=M.target,F=s.editorManager.get();let Y=F.length;for(;Y--;){const X=F[Y].getBody();(X===I||bM.isChildOf(I,X))&&r5(F[Y],f,M)}};b0[f]=C,bM.bind(b,f,C)}else{const C=M=>{r5(s,f,M)};bM.bind(b,f,C),s.delegates[f]=C}},_0={...WL,bindPendingEventDelegates(){const s=this;on.each(s._pendingNativeEvents,f=>{o5(s,f)})},toggleNativeEvent(s,f){const b=this;s==="focus"||s==="blur"||b.removed||(f?b.initialized?o5(b,s):b._pendingNativeEvents?b._pendingNativeEvents.push(s):b._pendingNativeEvents=[s]:b.initialized&&b.delegates&&(b.dom.unbind(_M(b,s),s,b.delegates[s]),delete b.delegates[s]))},unbindAllNativeEvents(){const s=this,f=s.getBody(),b=s.dom;s.delegates&&(Ue(s.delegates,(C,M)=>{s.dom.unbind(_M(s,M),M,C)}),delete s.delegates),!s.inline&&f&&b&&(f.onload=null,b.unbind(s.getWin()),b.unbind(s.getDoc())),b&&(b.unbind(f),b.unbind(s.getContainer()))}},yh=s=>V(s)?{value:s.split(/[ ,]/),valid:!0}:me(s,V)?{value:s,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},G9=s=>{const f=(()=>{switch(s){case"array":return Z;case"boolean":return ie;case"function":return he;case"number":return _e;case"object":return j;case"string":return V;case"string[]":return yh;case"object[]":return b=>me(b,j);case"regexp":return b=>z(b,RegExp);default:return Be}})();return b=>YL(b,f,`The value must be a ${s}.`)},W9=s=>V(s.processor),i5=(s,f)=>{const b=ts(f.message)?"":`. ${f.message}`;return s+b},a5=s=>s.valid,YL=(s,f,b="")=>{const C=f(s);return ie(C)?C?{value:s,valid:!0}:{valid:!1,message:b}:C},Y9=(s,f,b)=>{if(!te(f)){const C=YL(f,b);if(a5(C))return C.value;console.error(i5(`Invalid default value passed for the "${s}" option`,C))}},j9=(s,f)=>{const b={},C={},M=(fe,ve,De)=>{const Ie=YL(ve,De);return a5(Ie)?(C[fe]=Ie.value,!0):(console.warn(i5(`Invalid value passed for the ${fe} option`,Ie)),!1)},I=(fe,ve)=>{const De=W9(ve)?G9(ve.processor):ve.processor,Ie=Y9(fe,ve.default,De);b[fe]={...ve,default:Ie,processor:De},Nr(C,fe).orThunk(()=>Nr(f,fe)).each(Re=>M(fe,Re,De))},F=fe=>Vn(b,fe);return{register:I,isRegistered:F,get:fe=>Nr(C,fe).orThunk(()=>Nr(b,fe).map(ve=>ve.default)).getOrUndefined(),set:(fe,ve)=>{if(F(fe)){const De=b[fe];return De.immutable?(console.error(`"${fe}" is an immutable option and cannot be updated`),!1):M(fe,ve,De.processor)}else return console.warn(`"${fe}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:fe=>{const ve=F(fe);return ve&&delete C[fe],ve},isSet:fe=>Vn(C,fe)}},Z9=["design","readonly"],s5=(s,f,b,C)=>{const M=b[f.get()],I=b[C];try{I.activate()}catch(F){console.error(`problem while activating editor mode ${C}:`,F);return}M.deactivate(),M.editorReadOnly!==I.editorReadOnly&&B9(s,I.editorReadOnly),f.set(C),MD(s,C)},yj=(s,f,b,C)=>{if(C!==b.get()){if(!Vn(f,C))throw new Error(`Editor mode '${C}' is invalid`);s.initialized?s5(s,b,f,C):s.on("init",()=>s5(s,b,f,C))}},q9=(s,f,b)=>{if($e(Z9,f))throw new Error(`Cannot override default mode ${f}`);return{...s,[f]:{...b,deactivate:()=>{try{b.deactivate()}catch(C){console.error(`problem while deactivating editor mode ${f}:`,C)}}}}},K9=s=>{const f=Vi("design"),b=Vi({design:{activate:be,deactivate:be,editorReadOnly:!1},readonly:{activate:be,deactivate:be,editorReadOnly:!0}});return HL(s),GL(s),{isReadOnly:()=>y0(s),set:C=>yj(s,b.get(),f,C),get:()=>f.get(),register:(C,M)=>{b.set(q9(b.get(),C,M))}}},jL=on.each,ZL=on.explode,X9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},l5=on.makeMap("alt,ctrl,shift,meta,access"),bj=s=>s in l5,J9=s=>{const f={},b=bn.os.isMacOS()||bn.os.isiOS();jL(ZL(s.toLowerCase(),"+"),I=>{bj(I)?f[I]=!0:/^[0-9]{2,}$/.test(I)?f.keyCode=parseInt(I,10):(f.charCode=I.charCodeAt(0),f.keyCode=X9[I]||I.toUpperCase().charCodeAt(0))});const C=[f.keyCode];let M;for(M in l5)f[M]?C.push(M):f[M]=!1;return f.id=C.join(","),f.access&&(f.alt=!0,b?f.ctrl=!0:f.shift=!0),f.meta&&(b?f.meta=!0:(f.ctrl=!0,f.meta=!1)),f};class c5{constructor(f){this.shortcuts={},this.pendingPatterns=[],this.editor=f;const b=this;f.on("keyup keypress keydown",C=>{(b.hasModifier(C)||b.isFunctionKey(C))&&!C.isDefaultPrevented()&&(jL(b.shortcuts,M=>{b.matchShortcut(C,M)&&(b.pendingPatterns=M.subpatterns.slice(0),C.type==="keydown"&&b.executeShortcutAction(M))}),b.matchShortcut(C,b.pendingPatterns[0])&&(b.pendingPatterns.length===1&&C.type==="keydown"&&b.executeShortcutAction(b.pendingPatterns[0]),b.pendingPatterns.shift()))})}add(f,b,C,M){const I=this,F=I.normalizeCommandFunc(C);return jL(ZL(on.trim(f)),Y=>{const X=I.createShortcut(Y,b,F,M);I.shortcuts[X.id]=X}),!0}remove(f){const b=this.createShortcut(f);return this.shortcuts[b.id]?(delete this.shortcuts[b.id],!0):!1}normalizeCommandFunc(f){const b=this,C=f;return typeof C=="string"?()=>{b.editor.execCommand(C,!1,null)}:on.isArray(C)?()=>{b.editor.execCommand(C[0],C[1],C[2])}:C}createShortcut(f,b,C,M){const I=on.map(ZL(f,">"),J9);return I[I.length-1]=on.extend(I[I.length-1],{func:C,scope:M||this.editor}),on.extend(I[0],{desc:this.editor.translate(b),subpatterns:I.slice(1)})}hasModifier(f){return f.altKey||f.ctrlKey||f.metaKey}isFunctionKey(f){return f.type==="keydown"&&f.keyCode>=112&&f.keyCode<=123}matchShortcut(f,b){return!b||b.ctrl!==f.ctrlKey||b.meta!==f.metaKey||b.alt!==f.altKey||b.shift!==f.shiftKey?!1:f.keyCode===b.keyCode||f.charCode&&f.charCode===b.charCode?(f.preventDefault(),!0):!1}executeShortcutAction(f){return f.func?f.func.call(f.scope):null}}const Q9=()=>{const s={},f={},b={},C={},M={},I={},F={},Y={},X=(de,fe)=>(ve,De)=>{de[ve.toLowerCase()]={...De,type:fe}},ae=(de,fe)=>C[de.toLowerCase()]=fe;return{addButton:X(s,"button"),addGroupToolbarButton:X(s,"grouptoolbarbutton"),addToggleButton:X(s,"togglebutton"),addMenuButton:X(s,"menubutton"),addSplitButton:X(s,"splitbutton"),addMenuItem:X(f,"menuitem"),addNestedMenuItem:X(f,"nestedmenuitem"),addToggleMenuItem:X(f,"togglemenuitem"),addAutocompleter:X(b,"autocompleter"),addContextMenu:X(M,"contextmenu"),addContextToolbar:X(I,"contexttoolbar"),addContextForm:X(I,"contextform"),addSidebar:X(F,"sidebar"),addView:X(Y,"views"),addIcon:ae,getAll:()=>({buttons:s,menuItems:f,icons:C,popups:b,contextMenus:M,contextToolbars:I,sidebars:F,views:Y})}},eY=()=>{const s=Q9();return{addAutocompleter:s.addAutocompleter,addButton:s.addButton,addContextForm:s.addContextForm,addContextMenu:s.addContextMenu,addContextToolbar:s.addContextToolbar,addIcon:s.addIcon,addMenuButton:s.addMenuButton,addMenuItem:s.addMenuItem,addNestedMenuItem:s.addNestedMenuItem,addSidebar:s.addSidebar,addSplitButton:s.addSplitButton,addToggleButton:s.addToggleButton,addGroupToolbarButton:s.addGroupToolbarButton,addToggleMenuItem:s.addToggleMenuItem,addView:s.addView,getAll:s.getAll}},S0=Vo.DOM,u5=on.extend,tY=on.each;class SM{constructor(f,b,C){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=C,this.documentBaseUrl=C.documentBaseURL,u5(this,_0);const M=this;this.id=f,this.hidden=!1;const I=h9(C.defaultOptions,b);this.options=j9(M,I),Yw(M);const F=this.options.get;F("deprecation_warnings")&&IY(b,I);const Y=F("suffix");Y&&(C.suffix=Y),this.suffix=C.suffix;const X=F("base_url");X&&C._setBaseUrl(X),this.baseUri=C.baseURI;const ae=ai(M);ae&&(ra.ScriptLoader._setReferrerPolicy(ae),Vo.DOM.styleSheetLoader._setReferrerPolicy(ae));const de=Py(M);re(de)&&Vo.DOM.styleSheetLoader._setContentCssCors(de),zs.languageLoad=F("language_load"),zs.baseURL=C.baseURL,this.setDirty(!1),this.documentBaseURI=new Eu(sv(M),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=X_(M),this.hasVisual=zk(M),this.shortcuts=new c5(this),this.editorCommands=new Mp(this),I9(this);const fe=F("cache_suffix");fe&&(bn.cacheSuffix=fe.replace(/^[\?\&]+/,"")),this.ui={registry:eY(),styleSheetLoader:void 0,show:be,hide:be,setEnabled:be,isEnabled:Be},this.mode=K9(M),C.dispatch("SetupEditor",{editor:this});const ve=lE(M);he(ve)&&ve.call(M,M)}render(){vb(this)}focus(f){this.execCommand("mceFocus",!1,f)}hasFocus(){return Xh(this)}translate(f){return Oa.translate(f)}getParam(f,b,C){const M=this.options;return M.isRegistered(f)||(re(C)?M.register(f,{processor:C,default:b}):M.register(f,{processor:Be,default:b})),!M.isSet(f)&&!te(b)?b:M.get(f)}hasPlugin(f,b){return $e(Ry(this),f)?b?o0.get(f)!==void 0:!0:!1}nodeChanged(f){this._nodeChangeDispatcher.nodeChanged(f)}addCommand(f,b,C){this.editorCommands.addCommand(f,b,C)}addQueryStateHandler(f,b,C){this.editorCommands.addQueryStateHandler(f,b,C)}addQueryValueHandler(f,b,C){this.editorCommands.addQueryValueHandler(f,b,C)}addShortcut(f,b,C,M){this.shortcuts.add(f,b,C,M)}execCommand(f,b,C,M){return this.editorCommands.execCommand(f,b,C,M)}queryCommandState(f){return this.editorCommands.queryCommandState(f)}queryCommandValue(f){return this.editorCommands.queryCommandValue(f)}queryCommandSupported(f){return this.editorCommands.queryCommandSupported(f)}show(){const f=this;f.hidden&&(f.hidden=!1,f.inline?f.getBody().contentEditable="true":(S0.show(f.getContainer()),S0.hide(f.id)),f.load(),f.dispatch("show"))}hide(){const f=this;f.hidden||(f.save(),f.inline?(f.getBody().contentEditable="false",f===f.editorManager.focusedEditor&&(f.editorManager.focusedEditor=null)):(S0.hide(f.getContainer()),S0.setStyle(f.id,"display",f.orgDisplay)),f.hidden=!0,f.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(f,b){this.dispatch("ProgressState",{state:f,time:b})}load(f={}){const b=this,C=b.getElement();if(b.removed)return"";if(C){const M={...f,load:!0},I=e_(C)?C.value:C.innerHTML,F=b.setContent(I,M);return M.no_events||b.dispatch("LoadContent",{...M,element:C}),F}else return""}save(f={}){const b=this;let C=b.getElement();if(!C||!b.initialized||b.removed)return"";const M={...f,save:!0,element:C};let I=b.getContent(M);const F={...M,content:I};if(F.no_events||b.dispatch("SaveContent",F),F.format==="raw"&&b.dispatch("RawSaveContent",F),I=F.content,e_(C))C.value=I;else{(f.is_removing||!b.inline)&&(C.innerHTML=I);const Y=S0.getParent(b.id,"form");Y&&tY(Y.elements,X=>X.name===b.id?(X.value=I,!1):!0)}return F.element=M.element=C=null,F.set_dirty!==!1&&b.setDirty(!1),I}setContent(f,b){return uI(this,f,b)}getContent(f){return pB(this,f)}insertContent(f,b){b&&(f=u5({content:f},b)),this.execCommand("mceInsertContent",!1,f)}resetContent(f){f===void 0?uI(this,this.startContent,{format:"raw"}):uI(this,f),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(f){const b=!this.isNotDirty;this.isNotDirty=!f,f&&f!==b&&this.dispatch("dirty")}getContainer(){const f=this;return f.container||(f.container=f.editorContainer||S0.get(f.id+"_parent")),f.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=S0.get(this.id)),this.targetElm}getWin(){const f=this;if(!f.contentWindow){const b=f.iframeElement;b&&(f.contentWindow=b.contentWindow)}return f.contentWindow}getDoc(){const f=this;if(!f.contentDocument){const b=f.getWin();b&&(f.contentDocument=b.document)}return f.contentDocument}getBody(){var f,b;const C=this.getDoc();return(b=(f=this.bodyElement)!==null&&f!==void 0?f:C==null?void 0:C.body)!==null&&b!==void 0?b:null}convertURL(f,b,C){const M=this,I=M.options.get,F=Hk(M);if(he(F))return F.call(M,f,C,!0,b);if(!I("convert_urls")||C==="link"||j(C)&&C.nodeName==="LINK"||f.indexOf("file:")===0||f.length===0)return f;const Y=new Eu(f);return Y.protocol!=="http"&&Y.protocol!=="https"&&Y.protocol!==""?f:I("relative_urls")?M.documentBaseURI.toRelative(f):(f=M.documentBaseURI.toAbsolute(f,I("remove_script_host")),f)}addVisual(f){f9(this,f)}setEditableRoot(f){F4(this,f)}hasEditableRoot(){return r9(this)}remove(){H6(this)}destroy(f){G6(this,f)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const yb=Vo.DOM,xM=on.each;let d5=!1,CM,zl=[];const wM=s=>{const f=s.type;xM(og.get(),b=>{switch(f){case"scroll":b.dispatch("ScrollWindow",s);break;case"resize":b.dispatch("ResizeWindow",s);break}})},h5=s=>{if(s!==d5){const f=Vo.DOM;s?(f.bind(window,"resize",wM),f.bind(window,"scroll",wM)):(f.unbind(window,"resize",wM),f.unbind(window,"scroll",wM)),d5=s}},f5=s=>{const f=zl;return zl=mt(zl,b=>s!==b),og.activeEditor===s&&(og.activeEditor=zl.length>0?zl[0]:null),og.focusedEditor===s&&(og.focusedEditor=null),f.length!==zl.length},p5=s=>{s&&s.initialized&&!(s.getContainer()||s.getBody()).parentNode&&(f5(s),s.unbindAllNativeEvents(),s.destroy(!0),s.removed=!0)},nY=document.compatMode!=="CSS1Compat",og={...WL,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.0",releaseDate:"2023-11-22",i18n:Oa,activeEditor:null,focusedEditor:null,setup(){const s=this;let f="",b="",C=Eu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(C)&&(C=C.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(C)||(C+="/"));const M=window.tinymce||window.tinyMCEPreInit;if(M)f=M.base||M.baseURL,b=M.suffix;else{const I=document.getElementsByTagName("script");for(let F=0;F<I.length;F++){const Y=I[F].src||"";if(Y==="")continue;const X=Y.substring(Y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(Y)){X.indexOf(".min")!==-1&&(b=".min"),f=Y.substring(0,Y.lastIndexOf("/"));break}}if(!f&&document.currentScript){const F=document.currentScript.src;F.indexOf(".min")!==-1&&(b=".min"),f=F.substring(0,F.lastIndexOf("/"))}}s.baseURL=new Eu(C).toAbsolute(f),s.documentBaseURL=C,s.baseURI=new Eu(s.baseURL),s.suffix=b,sP(s)},overrideDefaults(s){const f=s.base_url;f&&this._setBaseUrl(f);const b=s.suffix;b&&(this.suffix=b),this.defaultOptions=s;const C=s.plugin_base_urls;C!==void 0&&Ue(C,(M,I)=>{zs.PluginManager.urls[I]=M})},init(s){const f=this;let b;const C=on.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),M=(de,fe)=>de.inline&&fe.tagName.toLowerCase()in C,I=de=>{let fe=de.id;return fe||(fe=Nr(de,"name").filter(ve=>!yb.get(ve)).getOrThunk(yb.uniqueId),de.setAttribute("id",fe)),fe},F=de=>{const fe=s[de];if(fe)return fe.apply(f,[])},Y=de=>bn.browser.isIE()||bn.browser.isEdge()?(zx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):nY?(zx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):V(de.selector)?yb.select(de.selector):re(de.target)?[de.target]:[];let X=de=>{b=de};const ae=()=>{let de=0;const fe=[];let ve;const De=(Ie,Me,Re)=>{const qe=new SM(Ie,Me,f);fe.push(qe),qe.on("init",()=>{++de===ve.length&&X(fe)}),qe.targetElm=qe.targetElm||Re,qe.render()};yb.unbind(window,"ready",ae),F("onpageload"),ve=Lr(Y(s)),on.each(ve,Ie=>{p5(f.get(Ie.id))}),ve=on.grep(ve,Ie=>!f.get(Ie.id)),ve.length===0?X([]):xM(ve,Ie=>{M(s,Ie)?zx("Could not initialize inline editor on invalid inline target element",Ie):De(I(Ie),s,Ie)})};return yb.bind(window,"ready",ae),new Promise(de=>{b?de(b):X=fe=>{de(fe)}})},get(s){return arguments.length===0?zl.slice(0):V(s)?Ae(zl,f=>f.id===s).getOr(null):_e(s)&&zl[s]?zl[s]:null},add(s){const f=this,b=f.get(s.id);return b===s||(b===null&&zl.push(s),h5(!0),f.activeEditor=s,f.dispatch("AddEditor",{editor:s}),CM||(CM=C=>{const M=f.dispatch("BeforeUnload");if(M.returnValue)return C.preventDefault(),C.returnValue=M.returnValue,M.returnValue},window.addEventListener("beforeunload",CM))),s},createEditor(s,f){return this.add(new SM(s,f,this))},remove(s){const f=this;let b;if(!s){for(let C=zl.length-1;C>=0;C--)f.remove(zl[C]);return}if(V(s)){xM(yb.select(s),C=>{b=f.get(C.id),b&&f.remove(b)});return}return b=s,q(f.get(b.id))?null:(f5(b)&&f.dispatch("RemoveEditor",{editor:b}),zl.length===0&&window.removeEventListener("beforeunload",CM),b.remove(),h5(zl.length>0),b)},execCommand(s,f,b){var C;const M=this,I=j(b)?(C=b.id)!==null&&C!==void 0?C:b.index:b;switch(s){case"mceAddEditor":{if(!M.get(I)){const F=b.options;new SM(I,F,M).render()}return!0}case"mceRemoveEditor":{const F=M.get(I);return F&&F.remove(),!0}case"mceToggleEditor":{const F=M.get(I);return F?(F.isHidden()?F.show():F.hide(),!0):(M.execCommand("mceAddEditor",!1,b),!0)}}return M.activeEditor?M.activeEditor.execCommand(s,f,b):!1},triggerSave:()=>{xM(zl,s=>{s.save()})},addI18n:(s,f)=>{Oa.add(s,f)},translate:s=>Oa.translate(s),setActive(s){const f=this.activeEditor;this.activeEditor!==s&&(f&&f.dispatch("deactivate",{relatedTarget:s}),s.dispatch("activate",{relatedTarget:f})),this.activeEditor=s},_setBaseUrl(s){this.baseURL=new Eu(this.documentBaseURL).toAbsolute(s.replace(/\/+$/,"")),this.baseURI=new Eu(this.baseURL)}};og.setup();const rY=(()=>{const s=zh(),f=I=>({items:I,types:qn(I),getType:F=>Nr(I,F).getOrUndefined()}),b=I=>{s.set(I)},C=()=>s.get().getOrUndefined(),M=s.clear;return{FakeClipboardItem:f,write:b,read:C,clear:M}})(),m5=Math.min,bb=Math.max,EM=Math.round,g5=(s,f,b)=>{let C=f.x,M=f.y;const I=s.w,F=s.h,Y=f.w,X=f.h,ae=(b||"").split("");return ae[0]==="b"&&(M+=X),ae[1]==="r"&&(C+=Y),ae[0]==="c"&&(M+=EM(X/2)),ae[1]==="c"&&(C+=EM(Y/2)),ae[3]==="b"&&(M-=F),ae[4]==="r"&&(C-=I),ae[3]==="c"&&(M-=EM(F/2)),ae[4]==="c"&&(C-=EM(I/2)),Sb(C,M,I,F)},v5=(s,f,b,C)=>{for(let M=0;M<C.length;M++){const I=g5(s,f,C[M]);if(I.x>=b.x&&I.x+I.w<=b.w+b.x&&I.y>=b.y&&I.y+I.h<=b.h+b.y)return C[M]}return null},oY=(s,f,b)=>Sb(s.x-f,s.y-b,s.w+f*2,s.h+b*2),iY=(s,f)=>{const b=bb(s.x,f.x),C=bb(s.y,f.y),M=m5(s.x+s.w,f.x+f.w),I=m5(s.y+s.h,f.y+f.h);return M-b<0||I-C<0?null:Sb(b,C,M-b,I-C)},aY=(s,f,b)=>{let C=s.x,M=s.y,I=s.x+s.w,F=s.y+s.h;const Y=f.x+f.w,X=f.y+f.h,ae=bb(0,f.x-C),de=bb(0,f.y-M),fe=bb(0,I-Y),ve=bb(0,F-X);return C+=ae,M+=de,b&&(I+=ae,F+=de,C-=fe,M-=ve),I-=fe,F-=ve,Sb(C,M,I-C,F-M)},Sb=(s,f,b,C)=>({x:s,y:f,w:b,h:C}),sY={inflate:oY,relativePosition:g5,findBestRelativePosition:v5,intersect:iY,clamp:aY,create:Sb,fromClientRect:s=>Sb(s.left,s.top,s.width,s.height)},lY=(s,f,b=1e3)=>{let C=!1,M=null;const I=ae=>(...de)=>{C||(C=!0,M!==null&&(clearTimeout(M),M=null),ae.apply(null,de))},F=I(s),Y=I(f);return{start:(...ae)=>{!C&&M===null&&(M=setTimeout(()=>Y.apply(null,ae),b))},resolve:F,reject:Y}},y5=(()=>{const s={},f={},b={};return{load:(X,ae)=>{const de=`Script at URL "${ae}" failed to load`,fe=`Script at URL "${ae}" did not call \`tinymce.Resource.add('${X}', data)\` within 1 second`;if(s[X]!==void 0)return s[X];{const ve=new Promise((De,Ie)=>{const Me=lY(De,Ie);f[X]=Me.resolve,ra.ScriptLoader.loadScript(ae).then(()=>Me.start(fe),()=>Me.reject(de))});return s[X]=ve,ve}},add:(X,ae)=>{f[X]!==void 0&&(f[X](ae),delete f[X]),s[X]=Promise.resolve(ae),b[X]=ae},has:X=>X in b,get:X=>b[X],unload:X=>{delete s[X]}}})(),Cj=()=>(()=>{let s={},f=[];const b={getItem:C=>{const M=s[C];return M||null},setItem:(C,M)=>{f.push(C),s[C]=String(M)},key:C=>f[C],removeItem:C=>{f=f.filter(M=>M===C),delete s[C]},clear:()=>{f=[],s={}},length:0};return Object.defineProperty(b,"length",{get:()=>f.length,configurable:!1,enumerable:!1}),b})();let xb;try{const s="__storage_test__";xb=window.localStorage,xb.setItem(s,s),xb.removeItem(s)}catch{xb=Cj()}var cY=xb;const b5={geom:{Rect:sY},util:{Delay:Nl,Tools:on,VK:Tn,URI:Eu,EventDispatcher:AC,Observable:WL,I18n:Oa,LocalStorage:cY,ImageUploader:mI},dom:{EventUtils:di,TreeWalker:ri,TextSeeker:jf,DOMUtils:Vo,ScriptLoader:ra,RangeUtils:dp,Serializer:hB,StyleSheetLoader:d_,ControlSelection:BD,BookmarkManager:ap,Selection:Vm,Event:di.Event},html:{Styles:ay,Entities:Nh,Node:Va,Schema:Cc,DomParser:gd,Writer:gp,Serializer:Jh},Env:bn,AddOnManager:zs,Annotator:kS,Formatter:a0,UndoManager:Ux,EditorCommands:Mp,WindowManager:xB,NotificationManager:fI,EditorObservable:_0,Shortcuts:c5,Editor:SM,FocusManager:pp,EditorManager:og,DOM:Vo.DOM,ScriptLoader:ra.ScriptLoader,PluginManager:o0,ThemeManager:wp,ModelManager:Au,IconManager:Bx,Resource:y5,FakeClipboard:rY,trim:on.trim,isArray:on.isArray,is:on.is,toArray:on.toArray,makeMap:on.makeMap,each:on.each,map:on.map,grep:on.grep,inArray:on.inArray,extend:on.extend,walk:on.walk,resolve:on.resolve,explode:on.explode,_addCacheSuffix:on._addCacheSuffix},_5=on.extend(og,b5),uY=s=>{try{r.exports=s}catch{}};(s=>{window.tinymce=s,window.tinyMCE=s})(_5),uY(_5)})()})(tinymce$2);var tinymceExports=tinymce$2.exports;const tinymce$1=getDefaultExportFromCjs(tinymceExports);var validEvents=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],isValidKey=function(r){return validEvents.map(function(t){return t.toLowerCase()}).indexOf(r.toLowerCase())!==-1},bindHandlers=function(r,t,n){Object.keys(t).filter(isValidKey).forEach(function(o){var a=t[o];typeof a=="function"&&(o==="onInit"?a(r,n):n.on(o.substring(2),function(l){return a(l,n)}))})},bindModelHandlers=function(r,t,n,o){var a=r.modelEvents?r.modelEvents:null,l=Array.isArray(a)?a.join(" "):a;watch(o,function(d,g){n&&typeof d=="string"&&d!==g&&d!==n.getContent({format:r.outputFormat})&&n.setContent(d)}),n.on(l||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:r.outputFormat}))})},initEditor=function(r,t,n,o,a,l){o.setContent(l()),n.attrs["onUpdate:modelValue"]&&bindModelHandlers(t,n,o,a),bindHandlers(r,n.attrs,o)},unique=0,uuid=function(r){var t=Date.now(),n=Math.floor(Math.random()*1e9);return unique++,r+"_"+n+unique+String(t)},isTextarea=function(r){return r!==null&&r.tagName.toLowerCase()==="textarea"},normalizePluginArray=function(r){return typeof r>"u"||r===""?[]:Array.isArray(r)?r:r.split(" ")},mergePlugins=function(r,t){return normalizePluginArray(r).concat(normalizePluginArray(t))},isNullOrUndefined=function(r){return r==null},createState=function(){return{listeners:[],scriptId:uuid("tiny-script"),scriptLoaded:!1}},CreateScriptLoader=function(){var r=createState(),t=function(a,l,d,g){var y=l.createElement("script");y.referrerPolicy="origin",y.type="application/javascript",y.id=a,y.src=d;var S=function(){y.removeEventListener("load",S),g()};y.addEventListener("load",S),l.head&&l.head.appendChild(y)},n=function(a,l,d){r.scriptLoaded?d():(r.listeners.push(d),a.getElementById(r.scriptId)||t(r.scriptId,a,l,function(){r.listeners.forEach(function(g){return g()}),r.scriptLoaded=!0}))},o=function(){r=createState()};return{load:n,reinitialize:o}},ScriptLoader=CreateScriptLoader(),getGlobal=function(){return typeof window<"u"?window:global},getTinymce=function(){var r=getGlobal();return r&&r.tinymce?r.tinymce:null},editorProps={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(r){return r==="html"||r==="text"}}},__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(r){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},__assign.apply(this,arguments)},renderInline=function(r,t,n,o){return r(o||"div",{id:t,ref:n})},renderIframe=function(r,t,n){return r("textarea",{id:t,visibility:"hidden",ref:n})},defaultInitValues={selector:void 0,target:void 0},Editor=defineComponent({props:editorProps,setup:function(r,t){var n=r.init?__assign(__assign({},r.init),defaultInitValues):__assign({},defaultInitValues),o=toRefs(r),a=o.disabled,l=o.modelValue,d=o.tagName,g=ref(null),y=null,S=r.id||uuid("tiny-vue"),x=r.init&&r.init.inline||r.inline,w=!!t.attrs["onUpdate:modelValue"],c=!0,A=r.initialValue?r.initialValue:"",R="",L=function(z){return w?function(){return l!=null&&l.value?l.value:""}:function(){return z?A:R}},$=function(){var z=L(c),V=__assign(__assign({},n),{readonly:r.disabled,target:g.value,plugins:mergePlugins(n.plugins,r.plugins),toolbar:r.toolbar||n.toolbar,inline:x,setup:function(j){y=j,j.on("init",function(K){return initEditor(K,r,t,j,l,z)}),typeof n.setup=="function"&&n.setup(j)}});isTextarea(g.value)&&(g.value.style.visibility=""),getTinymce().init(V),c=!1};watch(a,function(z){var V;y!==null&&(typeof((V=y.mode)===null||V===void 0?void 0:V.set)=="function"?y.mode.set(z?"readonly":"design"):y.setMode(z?"readonly":"design"))}),watch(d,function(z){var V;w||(R=y.getContent()),(V=getTinymce())===null||V===void 0||V.remove(y),nextTick(function(){return $()})}),onMounted(function(){if(getTinymce()!==null)$();else if(g.value&&g.value.ownerDocument){var z=r.cloudChannel?r.cloudChannel:"6",V=r.apiKey?r.apiKey:"no-api-key",j=isNullOrUndefined(r.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(V,"/tinymce/").concat(z,"/tinymce.min.js"):r.tinymceScriptSrc;ScriptLoader.load(g.value.ownerDocument,j,$)}}),onBeforeUnmount(function(){getTinymce()!==null&&getTinymce().remove(y)}),x||(onActivated(function(){c||$()}),onDeactivated(function(){var z;w||(R=y.getContent()),(z=getTinymce())===null||z===void 0||z.remove(y)}));var O=function(z){var V;R=y.getContent(),(V=getTinymce())===null||V===void 0||V.remove(y),n=__assign(__assign(__assign({},n),z),defaultInitValues),nextTick(function(){return $()})};return t.expose({rerender:O,getEditor:function(){return y}}),function(){return x?renderInline(h,S,g,r.tagName):renderIframe(h,S,g)}}});(function(){const r=Object.getPrototypeOf,t=(u,_,T)=>{var D;return T(u,_.prototype)?!0:((D=u.constructor)===null||D===void 0?void 0:D.name)===_.name},n=u=>{const _=typeof u;return u===null?"null":_==="object"&&Array.isArray(u)?"array":_==="object"&&t(u,String,(T,D)=>D.isPrototypeOf(T))?"string":_},o=u=>_=>n(_)===u,a=u=>_=>typeof _===u,l=u=>_=>u===_,d=(u,_)=>y(u)&&t(u,_,(T,D)=>r(T)===D),g=o("string"),y=o("object"),S=u=>d(u,Object),x=o("array"),w=l(null),c=a("boolean"),A=l(void 0),R=u=>u==null,L=u=>!R(u),$=a("function"),O=a("number"),z=(u,_)=>{if(x(u)){for(let T=0,D=u.length;T<D;++T)if(!_(u[T]))return!1;return!0}return!1},V=()=>{},j=u=>()=>u(),K=(u,_)=>(...T)=>u(_.apply(null,T)),Z=(u,_)=>T=>u(_(T)),q=u=>()=>u,ie=u=>u,te=(u,_)=>u===_;function oe(u,..._){return(...T)=>{const D=_.concat(T);return u.apply(null,D)}}const re=u=>_=>!u(_),he=u=>()=>{throw new Error(u)},_e=u=>u(),me=q(!1),be=q(!0);class Q{constructor(_,T){this.tag=_,this.value=T}static some(_){return new Q(!0,_)}static none(){return Q.singletonNone}fold(_,T){return this.tag?T(this.value):_()}isSome(){return this.tag}isNone(){return!this.tag}map(_){return this.tag?Q.some(_(this.value)):Q.none()}bind(_){return this.tag?_(this.value):Q.none()}exists(_){return this.tag&&_(this.value)}forall(_){return!this.tag||_(this.value)}filter(_){return!this.tag||_(this.value)?this:Q.none()}getOr(_){return this.tag?this.value:_}or(_){return this.tag?this:_}getOrThunk(_){return this.tag?this.value:_()}orThunk(_){return this.tag?this:_()}getOrDie(_){if(this.tag)return this.value;throw new Error(_??"Called getOrDie on None")}static from(_){return L(_)?Q.some(_):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_){this.tag&&_(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);const Ne=Array.prototype.slice,Ee=Array.prototype.indexOf,Ge=Array.prototype.push,it=(u,_)=>Ee.call(u,_),Te=(u,_)=>{const T=it(u,_);return T===-1?Q.none():Q.some(T)},Ke=(u,_)=>it(u,_)>-1,Tt=(u,_)=>{for(let T=0,D=u.length;T<D;T++){const B=u[T];if(_(B,T))return!0}return!1},Lt=(u,_)=>{const T=[];for(let D=0;D<u;D++)T.push(_(D));return T},Qt=(u,_)=>{const T=[];for(let D=0;D<u.length;D+=_){const B=Ne.call(u,D,D+_);T.push(B)}return T},Xe=(u,_)=>{const T=u.length,D=new Array(T);for(let B=0;B<T;B++){const U=u[B];D[B]=_(U,B)}return D},Be=(u,_)=>{for(let T=0,D=u.length;T<D;T++){const B=u[T];_(B,T)}},ue=(u,_)=>{for(let T=u.length-1;T>=0;T--){const D=u[T];_(D,T)}},Dt=(u,_)=>{const T=[],D=[];for(let B=0,U=u.length;B<U;B++){const W=u[B];(_(W,B)?T:D).push(W)}return{pass:T,fail:D}},Rt=(u,_)=>{const T=[];for(let D=0,B=u.length;D<B;D++){const U=u[D];_(U,D)&&T.push(U)}return T},Bt=(u,_,T)=>(ue(u,(D,B)=>{T=_(T,D,B)}),T),Se=(u,_,T)=>(Be(u,(D,B)=>{T=_(T,D,B)}),T),Ye=(u,_,T)=>{for(let D=0,B=u.length;D<B;D++){const U=u[D];if(_(U,D))return Q.some(U);if(T(U,D))break}return Q.none()},$e=(u,_)=>Ye(u,_,me),st=(u,_)=>{for(let T=0,D=u.length;T<D;T++){const B=u[T];if(_(B,T))return Q.some(T)}return Q.none()},et=u=>{const _=[];for(let T=0,D=u.length;T<D;++T){if(!x(u[T]))throw new Error("Arr.flatten item "+T+" was not an array, input: "+u);Ge.apply(_,u[T])}return _},Fe=(u,_)=>et(Xe(u,_)),tn=(u,_)=>{for(let T=0,D=u.length;T<D;++T){const B=u[T];if(_(B,T)!==!0)return!1}return!0},Gt=u=>{const _=Ne.call(u,0);return _.reverse(),_},mt=(u,_)=>Rt(u,T=>!Ke(_,T)),en=(u,_)=>{const T={};for(let D=0,B=u.length;D<B;D++){const U=u[D];T[String(U)]=_(U,D)}return T},Bn=u=>[u],Le=(u,_)=>{const T=Ne.call(u,0);return T.sort(_),T},Ae=(u,_)=>_>=0&&_<u.length?Q.some(u[_]):Q.none(),ht=u=>Ae(u,0),rn=u=>Ae(u,u.length-1),Kt=$(Array.from)?Array.from:u=>Ne.call(u),Wt=(u,_)=>{for(let T=0;T<u.length;T++){const D=_(u[T],T);if(D.isSome())return D}return Q.none()},xn=Object.keys,Mn=Object.hasOwnProperty,kn=(u,_)=>{const T=xn(u);for(let D=0,B=T.length;D<B;D++){const U=T[D],W=u[U];_(W,U)}},Zn=(u,_)=>yo(u,(T,D)=>({k:D,v:_(T,D)})),yo=(u,_)=>{const T={};return kn(u,(D,B)=>{const U=_(D,B);T[U.k]=U.v}),T},gn=u=>(_,T)=>{u[T]=_},oo=(u,_,T,D)=>{kn(u,(B,U)=>{(_(B,U)?T:D)(B,U)})},Cr=(u,_)=>{const T={},D={};return oo(u,_,gn(T),gn(D)),{t:T,f:D}},Wr=(u,_)=>{const T={};return oo(u,_,gn(T),V),T},Lr=(u,_)=>{const T=[];return kn(u,(D,B)=>{T.push(_(D,B))}),T},qn=(u,_)=>{const T=xn(u);for(let D=0,B=T.length;D<B;D++){const U=T[D],W=u[U];if(_(W,U,u))return Q.some(W)}return Q.none()},Oo=u=>Lr(u,ie),Ue=(u,_)=>yn(u,_)?Q.from(u[_]):Q.none(),yn=(u,_)=>Mn.call(u,_),Dn=(u,_)=>yn(u,_)&&u[_]!==void 0&&u[_]!==null,Xt=(u,_,T=te)=>u.exists(D=>T(D,_)),Kn=(u,_,T=te)=>vi(u,_,T).getOr(u.isNone()&&_.isNone()),Yr=u=>{const _=[],T=D=>{_.push(D)};for(let D=0;D<u.length;D++)u[D].each(T);return _},qo=u=>{const _=[];for(let T=0;T<u.length;T++){const D=u[T];if(D.isSome())_.push(D.getOrDie());else return Q.none()}return Q.some(_)},vi=(u,_,T)=>u.isSome()&&_.isSome()?Q.some(T(u.getOrDie(),_.getOrDie())):Q.none(),js=(u,_,T,D)=>u.isSome()&&_.isSome()&&T.isSome()?Q.some(D(u.getOrDie(),_.getOrDie(),T.getOrDie())):Q.none(),Nr=(u,_)=>u!=null?Q.some(_(u)):Q.none(),Vn=(u,_)=>u?Q.some(_):Q.none(),Is=(u,_)=>u+_,M0=(u,_)=>u.substring(_),sg=(u,_,T)=>_===""||u.length>=_.length&&u.substr(T,T+_.length)===_,xh=(u,_)=>Ch(u,_)?M0(u,_.length):u,Md=(u,_)=>Lu(u,_)?u:Is(u,_),Da=(u,_,T=0,D)=>{const B=u.indexOf(_,T);return B!==-1?A(D)?!0:B+_.length<=D:!1},Ch=(u,_)=>sg(u,_,0),Lu=(u,_)=>sg(u,_,u.length-_.length),lg=(u=>_=>_.replace(u,""))(/^\s+|\s+$/g),Nu=u=>u.length>0,ze=u=>!Nu(u),vt=u=>u.style!==void 0&&$(u.style.getPropertyValue),zt=(u,_)=>{const D=(_||document).createElement("div");if(D.innerHTML=u,!D.hasChildNodes()||D.childNodes.length>1){const B="HTML does not have a single root node";throw console.error(B,u),new Error(B)}return fr(D.childNodes[0])},Yt=(u,_)=>{const D=(_||document).createElement(u);return fr(D)},qt=(u,_)=>{const D=(_||document).createTextNode(u);return fr(D)},fr=u=>{if(u==null)throw new Error("Node cannot be null or undefined");return{dom:u}},Nt={fromHtml:zt,fromTag:Yt,fromText:qt,fromDom:fr,fromPoint:(u,_,T)=>Q.from(u.dom.elementFromPoint(_,T)).map(fr)},po=typeof window<"u"?window:Function("return this;")(),So=(u,_)=>{let T=_??po;for(let D=0;D<u.length&&T!==void 0&&T!==null;++D)T=T[u[D]];return T},xo=(u,_)=>{const T=u.split(".");return So(T,_)},go=(u,_)=>xo(u,_),Ui=(u,_)=>{const T=go(u,_);if(T==null)throw new Error(u+" not available on this browser");return T},tl=Object.getPrototypeOf,Ra=u=>Ui("HTMLElement",u),jl=u=>{const _=xo("ownerDocument.defaultView",u);return y(u)&&(Ra(_).prototype.isPrototypeOf(u)||/^HTML\w*Element$/.test(tl(u).constructor.name))},$i=9,Ur=11,Li=1,Mo=3,Ei=u=>u.dom.nodeName.toLowerCase(),kd=u=>u.dom.nodeType,Zc=u=>_=>kd(_)===u,Cf=u=>Fo(u)&&jl(u.dom),Fo=Zc(Li),ts=Zc(Mo),cg=Zc($i),ea=Zc(Ur),qc=u=>_=>Fo(_)&&Ei(_)===u,Zl=(u,_)=>{const T=u.dom;if(T.nodeType!==Li)return!1;{const D=T;if(D.matches!==void 0)return D.matches(_);if(D.msMatchesSelector!==void 0)return D.msMatchesSelector(_);if(D.webkitMatchesSelector!==void 0)return D.webkitMatchesSelector(_);if(D.mozMatchesSelector!==void 0)return D.mozMatchesSelector(_);throw new Error("Browser lacks native selectors")}},ug=u=>u.nodeType!==Li&&u.nodeType!==$i&&u.nodeType!==Ur||u.childElementCount===0,Pp=(u,_)=>{const T=_===void 0?document:_.dom;return ug(T)?[]:Xe(T.querySelectorAll(u),Nt.fromDom)},OC=(u,_)=>{const T=_===void 0?document:_.dom;return ug(T)?Q.none():Q.from(T.querySelector(u)).map(Nt.fromDom)},ni=(u,_)=>u.dom===_.dom,wf=(u,_)=>{const T=u.dom,D=_.dom;return T===D?!1:T.contains(D)},Ia=u=>Nt.fromDom(u.dom.ownerDocument),dg=u=>cg(u)?u:Ia(u),k0=u=>Nt.fromDom(dg(u).dom.documentElement),qi=u=>Nt.fromDom(dg(u).dom.defaultView),Kc=u=>Q.from(u.dom.parentNode).map(Nt.fromDom),BC=u=>Kc(u),Ou=u=>Q.from(u.dom.parentElement).map(Nt.fromDom),FC=(u,_)=>{const T=$(_)?_:me;let D=u.dom;const B=[];for(;D.parentNode!==null&&D.parentNode!==void 0;){const U=D.parentNode,W=Nt.fromDom(U);if(B.push(W),T(W)===!0)break;D=U}return B},Mb=u=>Q.from(u.dom.offsetParent).map(Nt.fromDom),VC=u=>Q.from(u.dom.nextSibling).map(Nt.fromDom),Xc=u=>Xe(u.dom.childNodes,Nt.fromDom),wh=(u,_)=>{const T=u.dom.childNodes;return Q.from(T[_]).map(Nt.fromDom)},D0=u=>wh(u,0),kb=(u,_)=>({element:u,offset:_}),Db=(u,_)=>{const T=Xc(u);return T.length>0&&_<T.length?kb(T[_],0):kb(u,_)},Sl=u=>ea(u)&&L(u.dom.host),Pb=$(Element.prototype.attachShadow)&&$(Node.prototype.getRootNode),zC=q(Pb),$s=Pb?u=>Nt.fromDom(u.dom.getRootNode()):dg,Jc=u=>Sl(u)?u:Nt.fromDom(dg(u).dom.body),UC=u=>Rb(u).isSome(),Rb=u=>{const _=$s(u);return Sl(_)?Q.some(_):Q.none()},Qc=u=>Nt.fromDom(u.dom.host),OM=u=>{if(zC()&&L(u.target)){const _=Nt.fromDom(u.target);if(Fo(_)&&Ef(_)&&u.composed&&u.composedPath){const T=u.composedPath();if(T)return ht(T)}}return Q.from(u.target)},Ef=u=>L(u.dom.shadowRoot),ba=u=>{const _=ts(u)?u.dom.parentNode:u.dom;if(_==null||_.ownerDocument===null)return!1;const T=_.ownerDocument;return Rb(Nt.fromDom(_)).fold(()=>T.body.contains(_),Z(ba,Qc))},ta=()=>Tf(Nt.fromDom(document)),Tf=u=>{const _=u.dom.body;if(_==null)throw new Error("Body is not available yet");return Nt.fromDom(_)},HC=(u,_,T)=>{if(g(T)||c(T)||O(T))u.setAttribute(_,T+"");else throw console.error("Invalid call to Attribute.set. Key ",_,":: Value ",T,":: Element ",u),new Error("Attribute value was not simple")},bn=(u,_,T)=>{HC(u.dom,_,T)},hg=(u,_)=>{const T=u.dom;kn(_,(D,B)=>{HC(T,B,D)})},ns=(u,_)=>{const T=u.dom.getAttribute(_);return T===null?void 0:T},Ls=(u,_)=>Q.from(ns(u,_)),GC=(u,_)=>{const T=u.dom;return T&&T.hasAttribute?T.hasAttribute(_):!1},Ni=(u,_)=>{u.dom.removeAttribute(_)},Ib=u=>Se(u.dom.attributes,(_,T)=>(_[T.name]=T.value,_),{}),P0=(u,_,T)=>{if(!g(T))throw console.error("Invalid call to CSS.set. Property ",_,":: Value ",T,":: Element ",u),new Error("CSS value must be a string: "+T);vt(u)&&u.style.setProperty(_,T)},BM=(u,_)=>{vt(u)&&u.style.removeProperty(_)},$r=(u,_,T)=>{const D=u.dom;P0(D,_,T)},Af=(u,_)=>{const T=u.dom;kn(_,(D,B)=>{P0(T,B,D)})},on=(u,_)=>{const T=u.dom;kn(_,(D,B)=>{D.fold(()=>{BM(T,B)},U=>{P0(T,B,U)})})},mi=(u,_)=>{const T=u.dom,B=window.getComputedStyle(T).getPropertyValue(_);return B===""&&!ba(u)?$b(T,_):B},$b=(u,_)=>vt(u)?u.style.getPropertyValue(_):"",Wa=(u,_)=>{const T=u.dom,D=$b(T,_);return Q.from(D).filter(B=>B.length>0)},rs=u=>{const _={},T=u.dom;if(vt(T))for(let D=0;D<T.style.length;D++){const B=T.style.item(D);_[B]=T.style[B]}return _},fg=(u,_,T)=>{const D=Nt.fromTag(u);return $r(D,_,T),Wa(D,_).isSome()},Do=(u,_)=>{const T=u.dom;BM(T,_),Xt(Ls(u,"style").map(lg),"")&&Ni(u,"style")},pg=u=>u.dom.offsetWidth,WC=(u,_)=>{const T=(J,ne)=>{if(!O(ne)&&!ne.match(/^[0-9]+$/))throw new Error(u+".set accepts only positive integer values. Value was "+ne);const se=J.dom;vt(se)&&(se.style[u]=ne+"px")},D=J=>{const ne=_(J);if(ne<=0||ne===null){const se=mi(J,u);return parseFloat(se)||0}return ne},B=D,U=(J,ne)=>Se(ne,(se,ce)=>{const ge=mi(J,ce),ye=ge===void 0?0:parseInt(ge,10);return isNaN(ye)?se:se+ye},0);return{set:T,get:D,getOuter:B,aggregate:U,max:(J,ne,se)=>{const ce=U(J,se);return ne>ce?ne-ce:0}}},Rp=WC("height",u=>{const _=u.dom;return ba(u)?_.getBoundingClientRect().height:_.offsetHeight}),ua=u=>Rp.get(u),Eh=u=>Rp.getOuter(u),FM=(u,_)=>{const T=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],D=Rp.max(u,_,T);$r(u,"max-height",D+"px")},YC=(u,_)=>({left:u,top:_,translate:(D,B)=>YC(u+D,_+B)}),Ti=YC,R0=u=>{const _=u.getBoundingClientRect();return Ti(_.left,_.top)},hc=(u,_)=>u!==void 0?u:_!==void 0?_:0,Oi=u=>{const _=u.dom.ownerDocument,T=_.body,D=_.defaultView,B=_.documentElement;if(T===u.dom)return Ti(T.offsetLeft,T.offsetTop);const U=hc(D==null?void 0:D.pageYOffset,B.scrollTop),W=hc(D==null?void 0:D.pageXOffset,B.scrollLeft),J=hc(B.clientTop,T.clientTop),ne=hc(B.clientLeft,T.clientLeft);return Bu(u).translate(W-ne,U-J)},Bu=u=>{const _=u.dom,D=_.ownerDocument.body;return D===_?Ti(D.offsetLeft,D.offsetTop):ba(u)?R0(_):Ti(0,0)},mg=WC("width",u=>u.dom.offsetWidth),Co=(u,_)=>mg.set(u,_),os=u=>mg.get(u),xl=u=>mg.getOuter(u),VM=(u,_)=>{const T=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],D=mg.max(u,_,T);$r(u,"max-width",D+"px")},eu=u=>{let _=!1,T;return(...D)=>(_||(_=!0,T=u.apply(null,D)),T)},Cl=(u,_,T,D)=>{const B=u.isiOS()&&/ipad/i.test(T)===!0,U=u.isiOS()&&!B,W=u.isiOS()||u.isAndroid(),J=W||D("(pointer:coarse)"),ne=B||!U&&W&&D("(min-device-width:768px)"),se=U||W&&!ne,ce=_.isSafari()&&u.isiOS()&&/safari/i.test(T)===!1,ge=!se&&!ne&&!ce;return{isiPad:q(B),isiPhone:q(U),isTablet:q(ne),isPhone:q(se),isTouch:q(J),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:q(ce),isDesktop:q(ge)}},ql=(u,_)=>{for(let T=0;T<u.length;T++){const D=u[T];if(D.test(_))return D}},zM=(u,_)=>{const T=ql(u,_);if(!T)return{major:0,minor:0};const D=B=>Number(_.replace(T,"$"+B));return $0(D(1),D(2))},I0=(u,_)=>{const T=String(_).toLowerCase();return u.length===0?Ns():zM(u,T)},Ns=()=>$0(0,0),$0=(u,_)=>({major:u,minor:_}),na={nu:$0,detect:I0,unknown:Ns},Dd=(u,_)=>Wt(_.brands,T=>{const D=T.brand.toLowerCase();return $e(u,B=>{var U;return D===((U=B.brand)===null||U===void 0?void 0:U.toLowerCase())}).map(B=>({current:B.name,version:na.nu(parseInt(T.version,10),0)}))}),ms=(u,_)=>{const T=String(_).toLowerCase();return $e(u,D=>D.search(T))},Fu=(u,_)=>ms(u,_).map(T=>{const D=na.detect(T.versionRegexes,_);return{current:T.name,version:D}}),Os=(u,_)=>ms(u,_).map(T=>{const D=na.detect(T.versionRegexes,_);return{current:T.name,version:D}}),da=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Vu=u=>_=>Da(_,u),jC=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:u=>Da(u,"edge/")&&Da(u,"chrome")&&Da(u,"safari")&&Da(u,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,da],search:u=>Da(u,"chrome")&&!Da(u,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:u=>Da(u,"msie")||Da(u,"trident")},{name:"Opera",versionRegexes:[da,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Vu("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Vu("firefox")},{name:"Safari",versionRegexes:[da,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:u=>(Da(u,"safari")||Da(u,"mobile/"))&&Da(u,"applewebkit")}],L0=[{name:"Windows",search:Vu("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:u=>Da(u,"iphone")||Da(u,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Vu("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Vu("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Vu("linux"),versionRegexes:[]},{name:"Solaris",search:Vu("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Vu("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Vu("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ZC={browsers:q(jC),oses:q(L0)},qC="Edge",Ip="Chromium",Lb="IE",Nb="Opera",Ob="Firefox",KC="Safari",$p=()=>Bb({current:void 0,version:na.unknown()}),Bb=u=>{const _=u.current,T=u.version,D=B=>()=>_===B;return{current:_,version:T,isEdge:D(qC),isChromium:D(Ip),isIE:D(Lb),isOpera:D(Nb),isFirefox:D(Ob),isSafari:D(KC)}},Lp={unknown:$p,nu:Bb,edge:q(qC),chromium:q(Ip),ie:q(Lb),opera:q(Nb),firefox:q(Ob),safari:q(KC)},Fb="Windows",N0="iOS",XC="Android",JC="Linux",QC="macOS",Np="Solaris",UM="FreeBSD",Ve="ChromeOS",ew=()=>fc({current:void 0,version:na.unknown()}),fc=u=>{const _=u.current,T=u.version,D=B=>()=>_===B;return{current:_,version:T,isWindows:D(Fb),isiOS:D(N0),isAndroid:D(XC),isMacOS:D(QC),isLinux:D(JC),isSolaris:D(Np),isFreeBSD:D(UM),isChromeOS:D(Ve)}},Vb={unknown:ew,nu:fc,windows:q(Fb),ios:q(N0),android:q(XC),linux:q(JC),macos:q(QC),solaris:q(Np),freebsd:q(UM),chromeos:q(Ve)},HM={detect:(u,_,T)=>{const D=ZC.browsers(),B=ZC.oses(),U=_.bind(ne=>Dd(D,ne)).orThunk(()=>Fu(D,u)).fold(Lp.unknown,Lp.nu),W=Os(B,u).fold(Vb.unknown,Vb.nu),J=Cl(W,U,u,T);return{browser:U,os:W,deviceType:J}}},Bo=u=>window.matchMedia(u).matches;let Pd=eu(()=>HM.detect(navigator.userAgent,Q.from(navigator.userAgentData),Bo));const zu=()=>Pd(),Rd=(u,_,T,D,B,U,W)=>({target:u,x:_,y:T,stop:D,prevent:B,kill:U,raw:W}),Ub=u=>{const _=Nt.fromDom(OM(u).getOr(u.target)),T=()=>u.stopPropagation(),D=()=>u.preventDefault(),B=K(D,T);return Rd(_,u.clientX,u.clientY,T,D,B,u)},Op=(u,_)=>T=>{u(T)&&_(Ub(T))},Kl=(u,_,T,D,B)=>{const U=Op(T,D);return u.dom.addEventListener(_,U,B),{unbind:oe(GM,u,_,U,B)}},O0=(u,_,T,D)=>Kl(u,_,T,D,!1),tw=(u,_,T,D)=>Kl(u,_,T,D,!0),GM=(u,_,T,D)=>{u.dom.removeEventListener(_,T,D)},tu=(u,_)=>{Kc(u).each(D=>{D.dom.insertBefore(_.dom,u.dom)})},gg=(u,_)=>{VC(u).fold(()=>{Kc(u).each(B=>{Xl(B,_)})},D=>{tu(D,_)})},nw=(u,_)=>{D0(u).fold(()=>{Xl(u,_)},D=>{u.dom.insertBefore(_.dom,D.dom)})},Xl=(u,_)=>{u.dom.appendChild(_.dom)},Ya=(u,_,T)=>{wh(u,T).fold(()=>{Xl(u,_)},D=>{tu(D,_)})},Mf=(u,_)=>{Be(_,T=>{Xl(u,T)})},vg=u=>{u.dom.textContent="",Be(Xc(u),_=>{nu(_)})},nu=u=>{const _=u.dom;_.parentNode!==null&&_.parentNode.removeChild(_)},wl=u=>{const _=u!==void 0?u.dom:document,T=_.body.scrollLeft||_.documentElement.scrollLeft,D=_.body.scrollTop||_.documentElement.scrollTop;return Ti(T,D)},rw=(u,_,T)=>{const B=(T!==void 0?T.dom:document).defaultView;B&&B.scrollTo(u,_)},WM=u=>{const _=u===void 0?window:u;return zu().browser.isFirefox()?Q.none():Q.from(_.visualViewport)},B0=(u,_,T,D)=>({x:u,y:_,width:T,height:D,right:u+T,bottom:_+D}),Hb=u=>{const _=u===void 0?window:u,T=_.document,D=wl(Nt.fromDom(T));return WM(_).fold(()=>{const B=_.document.documentElement,U=B.clientWidth,W=B.clientHeight;return B0(D.left,D.top,U,W)},B=>B0(Math.max(B.pageLeft,D.left),Math.max(B.pageTop,D.top),B.width,B.height))},Gb=()=>Nt.fromDom(document),Id=(u,_)=>u.view(_).fold(q([]),D=>{const B=u.owner(D),U=Id(u,B);return[D].concat(U)}),Wb=(u,_)=>{const T=_.owner(u),D=Id(_,T);return Q.some(D)};var YM=Object.freeze({__proto__:null,view:u=>{var _;return(u.dom===document?Q.none():Q.from((_=u.dom.defaultView)===null||_===void 0?void 0:_.frameElement)).map(Nt.fromDom)},owner:u=>Ia(u)});const yg=u=>{const _=Gb(),T=wl(_);return Wb(u,YM).fold(oe(Oi,u),B=>{const U=Bu(u),W=Bt(B,(J,ne)=>{const se=Bu(ne);return{left:J.left+se.left,top:J.top+se.top}},{left:0,top:0});return Ti(W.left+U.left+T.left,W.top+U.top+T.top)})},$d=(u,_,T)=>({point:u,width:_,height:T}),Bp=(u,_,T,D)=>({x:u,y:_,width:T,height:D}),ha=(u,_,T,D)=>({x:u,y:_,width:T,height:D,right:u+T,bottom:_+D}),Bi=u=>{const _=Oi(u),T=xl(u),D=Eh(u);return ha(_.left,_.top,T,D)},Sa=u=>{const _=yg(u),T=xl(u),D=Eh(u);return ha(_.left,_.top,T,D)},Ld=(u,_)=>{const T=Math.max(u.x,_.x),D=Math.max(u.y,_.y),B=Math.min(u.right,_.right),U=Math.min(u.bottom,_.bottom),W=B-T,J=U-D;return ha(T,D,W,J)},jM=(u,_)=>Se(_,(T,D)=>Ld(T,D),u),gs=()=>Hb(window);var pc=tinymce.util.Tools.resolve("tinymce.ThemeManager");const mc=u=>{const _=U=>U(u),T=q(u),D=()=>B,B={tag:!0,inner:u,fold:(U,W)=>W(u),isValue:be,isError:me,map:U=>kr.value(U(u)),mapError:D,bind:_,exists:_,forall:_,getOr:T,or:D,getOrThunk:T,orThunk:D,getOrDie:T,each:U=>{U(u)},toOptional:()=>Q.some(u)};return B},Th=u=>{const _=()=>T,T={tag:!1,inner:u,fold:(D,B)=>D(u),isValue:me,isError:be,map:_,mapError:D=>kr.error(D(u)),bind:_,exists:me,forall:be,getOr:ie,or:ie,getOrThunk:_e,orThunk:_e,getOrDie:he(String(u)),each:V,toOptional:Q.none};return T},kr={value:mc,error:Th,fromOption:(u,_)=>u.fold(()=>Th(_),mc)};var Jl;(function(u){u[u.Error=0]="Error",u[u.Value=1]="Value"})(Jl||(Jl={}));const Uu=(u,_,T)=>u.stype===Jl.Error?_(u.serror):T(u.svalue),iw=u=>{const _=[],T=[];return Be(u,D=>{Uu(D,B=>T.push(B),B=>_.push(B))}),{values:_,errors:T}},Yb=(u,_)=>u.stype===Jl.Error?{stype:Jl.Error,serror:_(u.serror)}:u,aw=(u,_)=>u.stype===Jl.Value?{stype:Jl.Value,svalue:_(u.svalue)}:u,F0=(u,_)=>u.stype===Jl.Value?_(u.svalue):u,gc=(u,_)=>u.stype===Jl.Error?_(u.serror):u,nl=u=>({stype:Jl.Value,svalue:u}),bg=u=>({stype:Jl.Error,serror:u}),Hi={fromResult:u=>u.fold(bg,nl),toResult:u=>Uu(u,kr.error,kr.value),svalue:nl,partition:iw,serror:bg,bind:F0,bindError:gc,map:aw,mapError:Yb,fold:Uu},Zs=(u,_,T,D)=>({tag:"field",key:u,newKey:_,presence:T,prop:D}),Hu=(u,_)=>({tag:"custom",newKey:u,instantiator:_}),_g=(u,_,T)=>{switch(u.tag){case"field":return _(u.key,u.newKey,u.presence,u.prop);case"custom":return T(u.newKey,u.instantiator)}},Ki=(u,_)=>_,jb=(u,_)=>S(u)&&S(_)?ci(u,_):_,Zb=u=>(..._)=>{if(_.length===0)throw new Error("Can't merge zero objects");const T={};for(let D=0;D<_.length;D++){const B=_[D];for(const U in B)yn(B,U)&&(T[U]=u(T[U],B[U]))}return T},ci=Zb(jb),Nd=Zb(Ki),wo=()=>({tag:"required",process:{}}),vc=u=>({tag:"defaultedThunk",process:u}),V0=u=>vc(q(u)),Gu=()=>({tag:"option",process:{}}),z0=u=>({tag:"mergeWithThunk",process:u}),U0=u=>z0(q(u)),ti=(u,_)=>u.length>0?Hi.svalue(ci(_,Nd.apply(void 0,u))):Hi.svalue(_),sw=u=>K(Hi.serror,et)(u),lw={consolidateObj:(u,_)=>{const T=Hi.partition(u);return T.errors.length>0?sw(T.errors):ti(T.values,_)},consolidateArr:u=>{const _=Hi.partition(u);return _.errors.length>0?sw(_.errors):Hi.svalue(_.values)}},qb=u=>y(u)&&xn(u).length>100?" removed due to size":JSON.stringify(u,null,2),qM=u=>{const _=u.length>10?u.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):u;return Xe(_,T=>"Failed path: ("+T.path.join(" > ")+`)
`+T.getErrorInfo())},Fp=(u,_)=>Hi.serror([{path:u,getErrorInfo:_}]),Vp=(u,_,T)=>Fp(u,()=>'Could not find valid *required* value for "'+_+'" in '+qb(T)),KM=(u,_)=>Fp(u,()=>'Choice schema did not contain choice key: "'+_+'"'),H0=(u,_,T)=>Fp(u,()=>'The chosen schema: "'+T+'" did not exist in branches: '+qb(_)),XM=(u,_)=>Fp(u,()=>"There are unsupported fields: ["+_.join(", ")+"] specified"),Kb=(u,_)=>Fp(u,q(_)),Ah=u=>{const _=(D,B)=>Hi.bindError(u(B),U=>Kb(D,U)),T=q("val");return{extract:_,toString:T}},Xb=Ah(Hi.svalue),G0=(u,_,T,D)=>Ue(_,T).fold(()=>Vp(u,T,_),D),cw=(u,_,T,D)=>{const B=Ue(u,_).getOrThunk(()=>T(u));return D(B)},zp=(u,_,T)=>T(Ue(u,_)),W0=(u,_,T,D)=>{const B=Ue(u,_).map(U=>U===!0?T(u):U);return D(B)},Jb=(u,_,T,D,B)=>{const U=J=>B.extract(_.concat([D]),J),W=J=>J.fold(()=>Hi.svalue(Q.none()),ne=>{const se=B.extract(_.concat([D]),ne);return Hi.map(se,Q.some)});switch(u.tag){case"required":return G0(_,T,D,U);case"defaultedThunk":return cw(T,D,u.process,U);case"option":return zp(T,D,W);case"defaultedOptionThunk":return W0(T,D,u.process,W);case"mergeWithThunk":return cw(T,D,q({}),J=>{const ne=ci(u.process(T),J);return U(ne)})}},Od=(u,_,T)=>{const D={},B=[];for(const U of T)_g(U,(W,J,ne,se)=>{const ce=Jb(ne,u,_,W,se);Hi.fold(ce,ge=>{B.push(...ge)},ge=>{D[J]=ge})},(W,J)=>{D[W]=J(_)});return B.length>0?Hi.serror(B):Hi.svalue(D)},fa=u=>({extract:(D,B)=>u().extract(D,B),toString:()=>u().toString()}),Qb=u=>xn(Wr(u,L)),ri=u=>{const _=er(u),T=Bt(u,(B,U)=>_g(U,W=>ci(B,{[W]:!0}),q(B)),{});return{extract:(B,U)=>{const W=c(U)?[]:Qb(U),J=Rt(W,ne=>!Dn(T,ne));return J.length===0?_.extract(B,U):XM(B,J)},toString:_.toString}},er=u=>({extract:(D,B)=>Od(D,B,u),toString:()=>`obj{
`+Xe(u,B=>_g(B,(U,W,J,ne)=>U+" -> "+ne.toString(),(U,W)=>"state("+U+")")).join(`
`)+"}"}),ru=u=>({extract:(D,B)=>{const U=Xe(B,(W,J)=>u.extract(D.concat(["["+J+"]"]),W));return lw.consolidateArr(U)},toString:()=>"array("+u.toString()+")"}),Rn=(u,_)=>{const T=_!==void 0?_:ie;return{extract:(U,W)=>{const J=[];for(const ne of u){const se=ne.extract(U,W);if(se.stype===Jl.Value)return{stype:Jl.Value,svalue:T(se.svalue)};J.push(se)}return lw.consolidateArr(J)},toString:()=>"oneOf("+Xe(u,U=>U.toString()).join(", ")+")"}},ou=(u,_)=>{const T=(U,W)=>ru(Ah(u)).extract(U,W);return{extract:(U,W)=>{const J=xn(W),ne=T(U,J);return Hi.bind(ne,se=>{const ce=Xe(se,ge=>Zs(ge,ge,wo(),_));return er(ce).extract(U,W)})},toString:()=>"setOf("+_.toString()+")"}},Sg=(u,_)=>{const T=eu(_);return{extract:(U,W)=>T().extract(U,W),toString:()=>T().toString()}},Mh=K(ru,er),Fi=q(Xb),kh=(u,_)=>Ah(T=>{const D=typeof T;return u(T)?Hi.svalue(T):Hi.serror(`Expected type: ${_} but got: ${D}`)}),xg=kh(O,"number"),$a=kh(g,"string"),iu=kh(c,"boolean"),Y0=kh($,"function"),rl=u=>{if(Object(u)!==u)return!0;switch({}.toString.call(u).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(u).every(_=>rl(u[_]));default:return!1}},uw=Ah(u=>rl(u)?Hi.svalue(u):Hi.serror("Expected value to be acceptable for sending via postMessage")),e_=(u,_,T,D)=>Ue(T,D).fold(()=>H0(u,T,D),U=>U.extract(u.concat(["branch: "+D]),_)),Zt=(u,_)=>({extract:(B,U)=>Ue(U,u).fold(()=>KM(B,u),J=>e_(B,U,_,J)),toString:()=>"chooseOn("+u+"). Possible values: "+xn(_)}),dw=()=>ru(Xb),Cg=u=>Ah(_=>u(_).fold(Hi.serror,Hi.svalue)),Bd=(u,_)=>ou(T=>Hi.fromResult(u(T)),_),wg=(u,_,T)=>{const D=_.extract([u],T);return Hi.mapError(D,B=>({input:T,errors:B}))},yi=(u,_,T)=>Hi.toResult(wg(u,_,T)),Ko=u=>u.fold(_=>{throw new Error(Fs(_))},ie),Bs=(u,_,T)=>Ko(yi(u,_,T)),Fs=u=>`Errors: 
`+qM(u.errors).join(`
`)+`

Input object: `+qb(u.input),Eo=(u,_)=>Zt(u,Zn(_,er)),Eg=(u,_)=>Sg(u,_),Za=Zs,Gi=Hu,t_=u=>Cg(_=>Ke(u,_)?kr.value(_):kr.error(`Unsupported value: "${_}", choose one of "${u.join(", ")}".`)),Ft=u=>Za(u,u,wo(),Fi()),La=(u,_)=>Za(u,u,wo(),_),Tg=u=>La(u,xg),ko=u=>La(u,$a),au=(u,_)=>Za(u,u,wo(),t_(_)),JM=u=>La(u,iu),su=u=>La(u,Y0),j0=(u,_)=>Za(u,u,Gu(),Ah(T=>Hi.serror("The field: "+u+" is forbidden. "+_))),lu=(u,_)=>Za(u,u,wo(),er(_)),n_=(u,_)=>Za(u,u,wo(),Mh(_)),El=(u,_)=>Za(u,u,wo(),ru(_)),Ro=u=>Za(u,u,Gu(),Fi()),Wu=(u,_)=>Za(u,u,Gu(),_),Ag=u=>Wu(u,xg),vs=u=>Wu(u,$a),hw=(u,_)=>Wu(u,t_(_)),kf=u=>Wu(u,Y0),Df=(u,_)=>Wu(u,ru(_)),ys=(u,_)=>Wu(u,er(_)),Pf=(u,_)=>Wu(u,ri(_)),ft=(u,_)=>Za(u,u,V0(_),Fi()),ol=(u,_,T)=>Za(u,u,V0(_),T),Rf=(u,_)=>ol(u,_,xg),Yu=(u,_)=>ol(u,_,$a),Tl=(u,_,T)=>ol(u,_,t_(T)),xa=(u,_)=>ol(u,_,iu),Ca=(u,_)=>ol(u,_,Y0),fw=(u,_)=>ol(u,_,uw),pa=(u,_,T)=>ol(u,_,ru(T)),ju=(u,_,T)=>ol(u,_,er(T)),sr=u=>{let _=u;return{get:()=>_,set:B=>{_=B}}},il={generate:u=>{if(!x(u))throw new Error("cases must be an array");if(u.length===0)throw new Error("there must be at least one case");const _=[],T={};return Be(u,(D,B)=>{const U=xn(D);if(U.length!==1)throw new Error("one and only one name per case");const W=U[0],J=D[W];if(T[W]!==void 0)throw new Error("duplicate key detected:"+W);if(W==="cata")throw new Error("cannot have a case named cata (sorry)");if(!x(J))throw new Error("case arguments must be an array");_.push(W),T[W]=(...ne)=>{const se=ne.length;if(se!==J.length)throw new Error("Wrong number of arguments to case "+W+". Expected "+J.length+" ("+J+"), got "+se);return{fold:(...ge)=>{if(ge.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+ge.length);return ge[B].apply(null,ne)},match:ge=>{const ye=xn(ge);if(_.length!==ye.length)throw new Error("Wrong number of arguments to match. Expected: "+_.join(",")+`
Actual: `+ye.join(","));if(!tn(_,ke=>Ke(ye,ke)))throw new Error("Not all branches were specified when using match. Specified: "+ye.join(", ")+`
Required: `+_.join(", "));return ge[W].apply(null,ne)},log:ge=>{console.log(ge,{constructors:_,constructor:W,params:ne})}}}}),T}};il.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Al=u=>{const _=[],T=[];return Be(u,D=>{D.fold(B=>{_.push(B)},B=>{T.push(B)})}),{errors:_,values:T}},Up=(u,_)=>{const T={};return kn(u,(D,B)=>{Ke(_,B)||(T[B]=D)}),T},QM=(u,_)=>({[u]:_}),Hp=u=>{const _={};return Be(u,T=>{_[T.key]=T.value}),_},Gp=(u,_)=>Up(u,_),qs=(u,_)=>QM(u,_),is=u=>Hp(u),pw=(u,_)=>u.length===0?kr.value(_):kr.value(ci(_,Nd.apply(void 0,u))),ek=u=>kr.error(et(u)),r_=(u,_)=>{const T=Al(u);return T.errors.length>0?ek(T.errors):pw(T.values,_)},Z0=u=>$(u)?u:me,mw=(u,_,T)=>{let D=u.dom;const B=Z0(T);for(;D.parentNode;){D=D.parentNode;const U=Nt.fromDom(D),W=_(U);if(W.isSome())return W;if(B(U))break}return Q.none()},If=(u,_,T)=>{const D=_(u),B=Z0(T);return D.orThunk(()=>B(u)?Q.none():mw(u,_,B))},Mg=(u,_)=>ni(u.element,_.event.target),tk={can:be,abort:me,run:V},Dh=u=>{if(!Dn(u,"can")&&!Dn(u,"abort")&&!Dn(u,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(u,null,2)+" does not have can, abort, or run!");return{...tk,...u}},kg=(u,_)=>(...T)=>Se(u,(D,B)=>D&&_(B).apply(void 0,T),!0),Dg=(u,_)=>(...T)=>Se(u,(D,B)=>D||_(B).apply(void 0,T),!1),nk=u=>$(u)?{can:be,abort:me,run:u}:u,rk=u=>{const _=kg(u,B=>B.can),T=Dg(u,B=>B.abort);return{can:_,abort:T,run:(...B)=>{Be(u,U=>{U.run.apply(void 0,B)})}}},Wi=q,Fd=Wi("touchstart"),Wp=Wi("touchmove"),$f=Wi("touchend"),Ph=Wi("touchcancel"),oi=Wi("mousedown"),yc=Wi("mousemove"),Pg=Wi("mouseout"),o_=Wi("mouseup"),Vd=Wi("mouseover"),Ml=Wi("focusin"),q0=Wi("focusout"),Ks=Wi("keydown"),bc=Wi("keyup"),Lf=Wi("input"),Nf=Wi("change"),Rh=Wi("click"),ok=Wi("transitioncancel"),Yp=Wi("transitionend"),ik=Wi("transitionstart"),ak=Wi("selectstart"),Yi=u=>q("alloy."+u),K0={tap:Yi("tap")},Ih=Yi("focus"),i_=Yi("blur.post"),a_=Yi("paste.post"),Of=Yi("receive"),kl=Yi("execute"),Ai=Yi("focus.item"),cu=K0.tap,s_=Yi("longpress"),Rg=Yi("sandbox.close"),l_=Yi("typeahead.cancel"),X0=Yi("system.init"),Ig=Yi("system.touchmove"),gw=Yi("system.touchend"),$g=Yi("system.scroll"),Lg=Yi("system.resize"),Sc=Yi("system.attached"),$h=Yi("system.detached"),Zu=Yi("system.dismissRequested"),c_=Yi("system.repositionRequested"),Lh=Yi("focusmanager.shifted"),Bf=Yi("slotcontainer.visibility"),vw=Yi("system.external.element.scroll"),jp=Yi("change.tab"),Dl=Yi("dismiss.tab"),Zp=Yi("highlight"),qp=Yi("dehighlight"),Kr=(u,_)=>{J0(u,u.element,_,{})},tr=(u,_,T)=>{J0(u,u.element,_,T)},zd=u=>{Kr(u,kl())},u_=(u,_,T)=>{J0(u,_,T,{})},J0=(u,_,T,D)=>{const B={target:_,...D};u.getSystem().triggerEvent(T,_,B)},sk=(u,_,T,D)=>{const B={...D,target:_};u.getSystem().triggerEvent(T,_,B)},Ff=(u,_,T,D)=>{u.getSystem().triggerEvent(T,_,D.event)},ui=u=>is(u),d_=(u,_)=>({key:u,value:Dh({abort:_})}),rN=(u,_)=>({key:u,value:Dh({can:_})}),h_=u=>({key:u,value:Dh({run:(_,T)=>{T.event.prevent()}})}),Vt=(u,_)=>({key:u,value:Dh({run:_})}),Q0=(u,_,T)=>({key:u,value:Dh({run:(D,B)=>{_.apply(void 0,[D,B].concat(T))}})}),lk=u=>_=>Vt(u,_),Ng=u=>_=>({key:u,value:Dh({run:(T,D)=>{Mg(T,D)&&_(T,D)}})}),ck=(u,_)=>Vt(u,(T,D)=>{T.getSystem().getByUid(_).each(B=>{Ff(B,B.element,u,D)})}),Kp=(u,_,T)=>{const D=_.partUids[T];return ck(u,D)},f_=(u,_)=>Vt(u,(T,D)=>{const B=D.event,U=T.getSystem().getByDom(B.target).getOrThunk(()=>If(B.target,J=>T.getSystem().getByDom(J).toOptional(),me).getOr(T));_(T,U,D)}),Ud=u=>Vt(u,(_,T)=>{T.cut()}),uk=u=>Vt(u,(_,T)=>{T.stop()}),qu=(u,_)=>Ng(u)(_),ii=Ng(Sc()),Ku=Ng($h()),dk=Ng(X0()),uu=lk(kl()),Vf=(u,_)=>{const D=(_||document).createElement("div");return D.innerHTML=u,Xc(Nt.fromDom(D))},p_=u=>u.dom.innerHTML,zf=(u,_)=>{const D=Ia(u).dom,B=Nt.fromDom(D.createDocumentFragment()),U=Vf(_,D);Mf(B,U),vg(u),Xl(u,B)},yw=u=>{const _=Nt.fromTag("div"),T=Nt.fromDom(u.dom.cloneNode(!0));return Xl(_,T),p_(_)},ey=(u,_)=>Nt.fromDom(u.dom.cloneNode(_)),bw=u=>ey(u,!1),hk=u=>ey(u,!0),_w=u=>{if(Sl(u))return"#shadow-root";{const _=bw(u);return yw(_)}},Xu=u=>_w(u),oN=(u,_,T)=>ni(_,u.element)&&!ni(_,T),iN=ui([rN(Ih(),(u,_)=>{const T=_.event,D=T.originator,B=T.target;return oN(u,D,B)?(console.warn(Ih()+` did not get interpreted by the desired target. 
Originator: `+Xu(D)+`
Target: `+Xu(B)+`
Check the `+Ih()+" event handlers"),!1):!0})]);var Nh=Object.freeze({__proto__:null,events:iN});let qa=0;const In=u=>{const T=new Date().getTime(),D=Math.floor(Math.random()*1e9);return qa++,u+"_"+D+qa+String(T)},fk=q("alloy-id-"),pk=q("data-alloy-id"),ty=fk(),ny=pk(),Sw=(u,_)=>{const T=In(ty+u);return ry(_,T),T},ry=(u,_)=>{Object.defineProperty(u.dom,ny,{value:_,writable:!0})},Ju=u=>{const _=Fo(u)?u.dom[ny]:null;return Q.from(_)},Hd=u=>In(u),Og=ie,Oh=u=>{const _=B=>`The component must be in a context to execute: ${B}`+(u?`
`+Xu(u().element)+" is not in context.":""),T=B=>()=>{throw new Error(_(B))},D=B=>()=>{console.warn(_(B))};return{debugInfo:q("fake"),triggerEvent:D("triggerEvent"),triggerFocus:D("triggerFocus"),triggerEscape:D("triggerEscape"),broadcast:D("broadcast"),broadcastOn:D("broadcastOn"),broadcastEvent:D("broadcastEvent"),build:T("build"),buildOrPatch:T("buildOrPatch"),addToWorld:T("addToWorld"),removeFromWorld:T("removeFromWorld"),addToGui:T("addToGui"),removeFromGui:T("removeFromGui"),getByUid:T("getByUid"),getByDom:T("getByDom"),isConnected:me}},xc=Oh(),oy=(u,_,T)=>{const D=T.toString(),B=D.indexOf(")")+1,U=D.indexOf("("),W=D.substring(U+1,B-1).split(/,\s*/);return u.toFunctionAnnotation=()=>({name:_,parameters:iy(W.slice(0,1).concat(W.slice(3)))}),u},iy=u=>Xe(u,_=>Lu(_,"/*")?_.substring(0,_.length-2):_),Bh=(u,_)=>{const T=u.toString(),D=T.indexOf(")")+1,B=T.indexOf("("),U=T.substring(B+1,D-1).split(/,\s*/);return u.toFunctionAnnotation=()=>({name:_,parameters:iy(U)}),u},xw=(u,_)=>{const T=_.toString(),D=T.indexOf(")")+1,B=T.indexOf("("),U=T.substring(B+1,D-1).split(/,\s*/);return u.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:iy(U.slice(1))}),u},Xp=In("alloy-premade"),Cc=u=>(Object.defineProperty(u.element.dom,Xp,{value:u.uid,writable:!0}),qs(Xp,u)),m_=u=>yn(u.dom,Xp),Cw=u=>Ue(u,Xp),Jp=u=>xw((_,...T)=>u(_.getApis(),_,...T),u),wc={init:()=>Xs({readState:q("No State required")})},Xs=u=>u,mk=(u,_)=>{const T=Xe(_,B=>ys(B.name(),[Ft("config"),ft("state",wc)])),D=yi("component.behaviours",er(T),u.behaviours).fold(B=>{throw new Error(Fs(B)+`
Complete spec:
`+JSON.stringify(u,null,2))},ie);return{list:_,data:Zn(D,B=>{const U=B.map(W=>({config:W.config,state:W.state.init(W.config)}));return q(U)})}},ww=u=>u.list,Ew=u=>u.data,g_=(u,_)=>{const T={};return kn(u,(D,B)=>{kn(D,(U,W)=>{const J=Ue(T,W).getOr([]);T[W]=J.concat([_(B,U)])})}),T},Ql=u=>({classes:A(u.classes)?[]:u.classes,attributes:A(u.attributes)?{}:u.attributes,styles:A(u.styles)?{}:u.styles}),al=(u,_)=>({...u,attributes:{...u.attributes,..._.attributes},styles:{...u.styles,..._.styles},classes:u.classes.concat(_.classes)}),ay=(u,_,T,D)=>{const B={..._};Be(T,ce=>{B[ce.name()]=ce.exhibit(u,D)});const U=g_(B,(ce,ge)=>({name:ce,modification:ge})),W=ce=>Bt(ce,(ge,ye)=>({...ye.modification,...ge}),{}),J=Bt(U.classes,(ce,ge)=>ge.modification.concat(ce),[]),ne=W(U.attributes),se=W(U.styles);return Ql({classes:J,attributes:ne,styles:se})},Uf=(u,_,T,D)=>{try{const B=Le(T,(U,W)=>{const J=U[_],ne=W[_],se=D.indexOf(J),ce=D.indexOf(ne);if(se===-1)throw new Error("The ordering for "+u+" does not have an entry for "+J+`.
Order specified: `+JSON.stringify(D,null,2));if(ce===-1)throw new Error("The ordering for "+u+" does not have an entry for "+ne+`.
Order specified: `+JSON.stringify(D,null,2));return se<ce?-1:ce<se?1:0});return kr.value(B)}catch(B){return kr.error([B])}},gk=(u,_)=>({handler:u,purpose:_}),vk=(u,_)=>({cHandler:u,purpose:_}),sy=(u,_)=>vk(oe.apply(void 0,[u.handler].concat(_)),u.purpose),Bg=u=>u.cHandler,ly=(u,_)=>({name:u,handler:_}),Tw=(u,_)=>{const T={};return Be(u,D=>{T[D.name()]=D.handlers(_)}),T},Qu=(u,_,T)=>{const D={...T,...Tw(_,u)};return g_(D,ly)},cy=(u,_,T,D)=>{const B=Qu(u,T,D);return Aw(B,_)},Fg=u=>{const _=nk(u);return(T,D,...B)=>{const U=[T,D].concat(B);_.abort.apply(void 0,U)?D.stop():_.can.apply(void 0,U)&&_.run.apply(void 0,U)}},yk=(u,_)=>kr.error(["The event ("+u+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Xe(_,T=>T.name),null,2)]),Vg=(u,_,T)=>{const D=_[T];return D?Uf("Event: "+T,"name",u,D).map(B=>{const U=Xe(B,W=>W.handler);return rk(U)}):yk(T,u)},Aw=(u,_)=>{const T=Lr(u,(D,B)=>(D.length===1?kr.value(D[0].handler):Vg(D,_,B)).map(W=>{const J=Fg(W),ne=D.length>1?Rt(_[B],se=>Tt(D,ce=>ce.name===se)).join(" > "):D[0].name;return qs(B,gk(J,ne))}));return r_(T,{})},di="alloy.base.behaviour",zg=er([Za("dom","dom",wo(),er([Ft("tag"),ft("styles",{}),ft("classes",[]),ft("attributes",{}),Ro("value"),Ro("innerHtml")])),Ft("components"),Ft("uid"),ft("events",{}),ft("apis",{}),Za("eventOrder","eventOrder",U0({[kl()]:["disabling",di,"toggling","typeaheadevents"],[Ih()]:[di,"focusing","keying"],[X0()]:[di,"disabling","toggling","representing"],[Lf()]:[di,"representing","streaming","invalidating"],[$h()]:[di,"representing","item-events","tooltipping"],[oi()]:["focusing",di,"item-type-events"],[Fd()]:["focusing",di,"item-type-events"],[Vd()]:["item-type-events","tooltipping"],[Of()]:["receiving","reflecting","tooltipping"]}),Fi()),Ro("domModification")]),sl=u=>yi("custom.definition",zg,u),v_=u=>({...u.dom,uid:u.uid,domChildren:Xe(u.components,_=>_.element)}),Ug=u=>u.domModification.fold(()=>Ql({}),Ql),Fh=u=>u.events,Hg=(u,_)=>{const T=ns(u,_);return T===void 0||T===""?[]:T.split(" ")},Hf=(u,_,T)=>{const B=Hg(u,_).concat([T]);return bn(u,_,B.join(" ")),!0},du=(u,_,T)=>{const D=Rt(Hg(u,_),B=>B!==T);return D.length>0?bn(u,_,D.join(" ")):Ni(u,_),!1},Vh=u=>u.dom.classList!==void 0,Gg=u=>Hg(u,"class"),Qp=(u,_)=>Hf(u,"class",_),Vo=(u,_)=>du(u,"class",_),y_=(u,_)=>Ke(Gg(u),_)?Vo(u,_):Qp(u,_),Di=(u,_)=>{Vh(u)?u.dom.classList.add(_):Qp(u,_)},Gf=u=>{(Vh(u)?u.dom.classList:Gg(u)).length===0&&Ni(u,"class")},hi=(u,_)=>{Vh(u)?u.dom.classList.remove(_):Vo(u,_),Gf(u)},Mw=(u,_)=>{const T=Vh(u)?u.dom.classList.toggle(_):y_(u,_);return Gf(u),T},ra=(u,_)=>Vh(u)&&u.dom.classList.contains(_),Vi=(u,_)=>{Be(_,T=>{Di(u,T)})},Vs=(u,_)=>{Be(_,T=>{hi(u,T)})},bk=(u,_)=>{Be(_,T=>{Mw(u,T)})},b_=(u,_)=>tn(_,T=>ra(u,T)),Wg=u=>{const _=u.dom.classList,T=new Array(_.length);for(let D=0;D<_.length;D++){const B=_.item(D);B!==null&&(T[D]=B)}return T},uy=u=>Vh(u)?Wg(u):Gg(u),hu=u=>u.dom.value,Wf=(u,_)=>{if(_===void 0)throw new Error("Value.set was undefined");u.dom.value=_},_k=(u,_,T)=>wh(u,_).map(B=>{if(T.exists(W=>!ni(W,B))){const W=T.map(Ei).getOr("span"),J=Nt.fromTag(W);return tu(B,J),J}else return B}),kw=(u,_,T)=>{T.fold(()=>Xl(u,_),D=>{ni(D,_)||(tu(D,_),nu(D))})},Dw=(u,_,T)=>{const D=Xe(_,T),B=Xc(u);return Be(B.slice(D.length),nu),D},Sk=(u,_,T,D)=>{const B=wh(u,_),U=D(T,B),W=_k(u,_,B);return kw(u,U.element,W),U},aN=(u,_,T)=>Dw(u,_,(D,B)=>Sk(u,B,D,T)),sN=(u,_)=>Dw(u,_,(T,D)=>{const B=wh(u,D);return kw(u,T,B),T}),Oa=(u,_)=>{const T=xn(u),D=xn(_),B=mt(D,T),U=Cr(u,(W,J)=>!yn(_,J)||W!==_[J]).t;return{toRemove:B,toSet:U}},zs=(u,_)=>{const{class:T,style:D,...B}=Ib(_),{toSet:U,toRemove:W}=Oa(u.attributes,B),J=()=>{Be(W,dt=>Ni(_,dt)),hg(_,U)},ne=rs(_),{toSet:se,toRemove:ce}=Oa(u.styles,ne),ge=()=>{Be(ce,dt=>Do(_,dt)),Af(_,se)},ye=uy(_),xe=mt(ye,u.classes),ke=mt(u.classes,ye),He=()=>{Vi(_,ke),Vs(_,xe)},pt=dt=>{zf(_,dt)},Je=()=>{const dt=u.domChildren;sN(_,dt)},Ze=()=>{const dt=_,Mt=u.value.getOrUndefined();Mt!==hu(dt)&&Wf(dt,Mt??"")};return J(),He(),ge(),u.innerHtml.fold(Je,pt),Ze(),_},Pw=u=>{const _=Nt.fromTag(u.tag);hg(_,u.attributes),Vi(_,u.classes),Af(_,u.styles),u.innerHtml.each(D=>zf(_,D));const T=u.domChildren;return Mf(_,T),u.value.each(D=>{Wf(_,D)}),_},Rw=(u,_)=>{try{const T=zs(u,_);return Q.some(T)}catch{return Q.none()}},zh=u=>u.innerHtml.isSome()&&u.domChildren.length>0,dy=(u,_)=>{const T=B=>Ei(B)===u.tag&&!zh(u)&&!m_(B),D=_.filter(T).bind(B=>Rw(u,B)).getOrThunk(()=>Pw(u));return ry(D,u.uid),D},Yg=u=>{const _=Ue(u,"behaviours").getOr({});return Fe(xn(_),T=>{const D=_[T];return L(D)?[D.me]:[]})},Mi=(u,_)=>mk(u,_),Yf=u=>{const _=Yg(u);return Mi(u,_)},em=(u,_,T)=>{const D=v_(u),B=Ug(u),U={"alloy.base.modification":B},W=_.length>0?ay(T,U,_,D):B;return al(D,W)},jg=(u,_,T)=>{const D={"alloy.base.behaviour":Fh(u)};return cy(T,u.eventOrder,_,D).getOrDie()},Zg=(u,_)=>{const T=()=>dt,D=sr(xc),B=Ko(sl(u)),U=Yf(u),W=ww(U),J=Ew(U),ne=em(B,W,J),se=dy(ne,_),ce=jg(B,W,J),ge=sr(B.components),ye=Mt=>{D.set(Mt)},xe=()=>{D.set(Oh(T))},ke=()=>{const Mt=Xc(se),nn=Fe(Mt,$t=>D.get().getByDom($t).fold(()=>[],Bn));ge.set(nn)},He=Mt=>{const nn=J;return($(nn[Mt.name()])?nn[Mt.name()]:()=>{throw new Error("Could not find "+Mt.name()+" in "+JSON.stringify(u,null,2))})()},pt=Mt=>$(J[Mt.name()]),Je=()=>B.apis,Ze=Mt=>J[Mt]().map(nn=>nn.state.readState()).getOr("not enabled"),dt={uid:u.uid,getSystem:D.get,config:He,hasConfigured:pt,spec:u,readState:Ze,getApis:Je,connect:ye,disconnect:xe,element:se,syncComponents:ke,components:ge.get,events:ce};return dt},tm=(u,_)=>{const T=Ue(u,"components").getOr([]);return _.fold(()=>Xe(T,as),D=>Xe(T,(B,U)=>hy(B,wh(D,U))))},Iw=(u,_)=>{const{events:T,...D}=Og(u),B=tm(D,_),U={...D,events:{...Nh,...T},components:B};return kr.value(Zg(U,_))},Pi=u=>{const _=Nt.fromText(u);return $w({element:_})},$w=u=>{const _=Bs("external.component",ri([Ft("element"),Ro("uid")]),u),T=sr(Oh()),D=J=>{T.set(J)},B=()=>{T.set(Oh(()=>W))},U=_.uid.getOrThunk(()=>Hd("external"));ry(_.element,U);const W={uid:U,getSystem:T.get,config:Q.none,hasConfigured:me,connect:D,disconnect:B,getApis:()=>({}),element:_.element,spec:u,readState:q("No state"),syncComponents:V,components:q([]),events:{}};return Cc(W)},__=Hd,Lw=u=>yn(u,"uid"),hy=(u,_)=>Cw(u).getOrThunk(()=>{const T=Lw(u)?u:{uid:__(""),...u};return Iw(T,_).getOrDie()}),as=u=>hy(u,Q.none()),Pl=Cc;var qg=(u,_,T,D,B)=>u(T,D)?Q.some(T):$(B)&&B(T)?Q.none():_(T,D,B);const Gd=(u,_,T)=>{let D=u.dom;const B=$(T)?T:me;for(;D.parentNode;){D=D.parentNode;const U=Nt.fromDom(D);if(_(U))return Q.some(U);if(B(U))break}return Q.none()},Uh=(u,_,T)=>qg((B,U)=>U(B),Gd,u,_,T),xk=(u,_)=>{const T=B=>_(Nt.fromDom(B));return $e(u.dom.childNodes,T).map(Nt.fromDom)},Ck=(u,_)=>{const T=D=>{for(let B=0;B<D.childNodes.length;B++){const U=Nt.fromDom(D.childNodes[B]);if(_(U))return Q.some(U);const W=T(D.childNodes[B]);if(W.isSome())return W}return Q.none()};return T(u.dom)},S_=(u,_,T)=>Uh(u,_,T).isSome(),Rl=(u,_,T)=>Gd(u,D=>Zl(D,_),T),fy=(u,_)=>xk(u,T=>Zl(T,_)),Ri=(u,_)=>OC(_,u),Ec=(u,_,T)=>qg((B,U)=>Zl(B,U),Rl,u,_,T),nm="aria-controls",jf=u=>Uh(u,T=>{if(!Fo(T))return!1;const D=ns(T,"id");return D!==void 0&&D.indexOf(nm)>-1}).bind(T=>{const D=ns(T,"id"),B=$s(T);return Ri(B,`[${nm}="${D}"]`)}),ed=()=>{const u=In(nm);return{id:u,link:D=>{bn(D,nm,u)},unlink:D=>{Ni(D,nm)}}},Zf=(u,_)=>jf(_).exists(T=>Wd(u,T)),Wd=(u,_)=>S_(_,T=>ni(T,u.element),me)||Zf(u,_),Kg="unknown";var qf;(function(u){u[u.STOP=0]="STOP",u[u.NORMAL=1]="NORMAL",u[u.LOGGING=2]="LOGGING"})(qf||(qf={}));const Kf=sr({}),Xg=(u,_)=>{const T=[],D=new Date().getTime();return{logEventCut:(B,U,W)=>{T.push({outcome:"cut",target:U,purpose:W})},logEventStopped:(B,U,W)=>{T.push({outcome:"stopped",target:U,purpose:W})},logNoParent:(B,U,W)=>{T.push({outcome:"no-parent",target:U,purpose:W})},logEventNoHandlers:(B,U)=>{T.push({outcome:"no-handlers-left",target:U})},logEventResponse:(B,U,W)=>{T.push({outcome:"response",purpose:W,target:U})},write:()=>{const B=new Date().getTime();Ke(["mousemove","mouseover","mouseout",X0()],u)||console.log(u,{event:u,time:B-D,target:_.dom,sequence:Xe(T,U=>Ke(["cut","stopped","response"],U.outcome)?"{"+U.purpose+"} "+U.outcome+" at ("+Xu(U.target)+")":U.outcome)})}}},wk=(u,_,T)=>{switch(Ue(Kf.get(),u).orThunk(()=>{const B=xn(Kf.get());return Wt(B,U=>u.indexOf(U)>-1?Q.some(Kf.get()[U]):Q.none())}).getOr(qf.NORMAL)){case qf.NORMAL:return T(Jg());case qf.LOGGING:{const B=Xg(u,_),U=T(B);return B.write(),U}case qf.STOP:return!0}},Ek=["alloy/data/Fields","alloy/debugging/Debugging"],x_=()=>{const u=new Error;if(u.stack!==void 0){const _=u.stack.split(`
`);return $e(_,T=>T.indexOf("alloy")>0&&!Tt(Ek,D=>T.indexOf(D)>-1)).getOr(Kg)}else return Kg},Tk={logEventCut:V,logEventStopped:V,logNoParent:V,logEventNoHandlers:V,logEventResponse:V,write:V},C_=(u,_,T)=>wk(u,_,T),Jg=q(Tk),Yd=q([Ft("menu"),Ft("selectedMenu")]),w_=q([Ft("item"),Ft("selectedItem")]);q(er(w_().concat(Yd())));const Nw=q(er(w_())),E_=lu("initSize",[Ft("numColumns"),Ft("numRows")]),T_=()=>La("markers",Nw()),py=()=>lu("markers",[Ft("backgroundMenu")].concat(Yd()).concat(w_())),Hh=u=>lu("markers",Xe(u,Ft)),my=(u,_,T)=>(x_(),Za(_,_,T,Cg(D=>kr.value((...B)=>D.apply(void 0,B))))),so=u=>my("onHandler",u,V0(V)),ll=u=>my("onKeyboardHandler",u,V0(Q.none)),Tc=u=>my("onHandler",u,wo()),Qg=u=>my("onKeyboardHandler",u,wo()),Go=(u,_)=>Gi(u,q(_)),gy=u=>Gi(u,ie),A_=q(E_),oa=(u,_,T,D,B,U,W,J=!1)=>({x:u,y:_,bubble:T,direction:D,placement:B,restriction:U,label:`${W}-${B}`,alwaysFit:J}),cl=il.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ev=(u,_,T,D,B,U,W,J,ne)=>u.fold(_,T,D,B,U,W,J,ne),M_=(u,_,T,D)=>u.fold(_,_,D,D,_,D,T,T),k_=(u,_,T,D)=>u.fold(_,D,_,D,T,T,_,D),vy=cl.southeast,D_=cl.southwest,yy=cl.northeast,fu=cl.northwest,Gh=cl.south,P_=cl.north,kt=cl.east,tv=cl.west,rm=(u,_,T,D)=>{const B=u+_;return B>D?T:B<T?D:B},ul=(u,_,T)=>Math.min(Math.max(u,_),T),td=(u,_)=>{switch(_){case 1:return u.x;case 0:return u.x+u.width;case 2:return u.y;case 3:return u.y+u.height}},xi=(u,_)=>en(["left","right","top","bottom"],T=>Ue(_,T).map(D=>td(u,D))),Ow=(u,_,T)=>{const D=(ne,se)=>_[ne].map(ce=>{const ge=ne==="top"||ne==="bottom",ye=ge?T.top:T.left,ke=(ne==="left"||ne==="top"?Math.max:Math.min)(ce,se)+ye;return ge?ul(ke,u.y,u.bottom):ul(ke,u.x,u.right)}).getOr(se),B=D("left",u.x),U=D("top",u.y),W=D("right",u.right),J=D("bottom",u.bottom);return ha(B,U,W-B,J-U)},Ac="layout",nv=u=>u.x,bs=(u,_)=>u.x+u.width/2-_.width/2,Bw=(u,_)=>u.x+u.width-_.width,by=(u,_)=>u.y-_.height,R_=u=>u.y+u.height,I_=(u,_)=>u.y+u.height/2-_.height/2,Fw=u=>u.x+u.width,rv=(u,_)=>u.x-_.width,Ka=(u,_,T)=>oa(nv(u),R_(u),T.southeast(),vy(),"southeast",xi(u,{left:1,top:3}),Ac),Xa=(u,_,T)=>oa(Bw(u,_),R_(u),T.southwest(),D_(),"southwest",xi(u,{right:0,top:3}),Ac),_s=(u,_,T)=>oa(nv(u),by(u,_),T.northeast(),yy(),"northeast",xi(u,{left:1,bottom:2}),Ac),ss=(u,_,T)=>oa(Bw(u,_),by(u,_),T.northwest(),fu(),"northwest",xi(u,{right:0,bottom:2}),Ac),Ss=(u,_,T)=>oa(bs(u,_),by(u,_),T.north(),P_(),"north",xi(u,{bottom:2}),Ac),ma=(u,_,T)=>oa(bs(u,_),R_(u),T.south(),Gh(),"south",xi(u,{top:3}),Ac),$_=(u,_,T)=>oa(Fw(u),I_(u,_),T.east(),kt(),"east",xi(u,{left:0}),Ac),ov=(u,_,T)=>oa(rv(u,_),I_(u,_),T.west(),tv(),"west",xi(u,{right:1}),Ac),L_=()=>[Ka,Xa,_s,ss,ma,Ss,$_,ov],N_=()=>[Xa,Ka,ss,_s,ma,Ss,$_,ov],O_=()=>[_s,ss,Ka,Xa,Ss,ma],Vw=()=>[ss,_s,Xa,Ka,Ss,ma],iv=()=>[Ka,Xa,_s,ss,ma,Ss],Sy=()=>[Xa,Ka,ss,_s,ma,Ss],xy=(u,_)=>_.universal?u:Rt(u,T=>Ke(_.channels,T));var zw=Object.freeze({__proto__:null,events:u=>ui([Vt(Of(),(_,T)=>{const D=u.channels,B=xn(D),U=T,W=xy(B,U);Be(W,J=>{const ne=D[J],se=ne.schema,ce=Bs("channel["+J+`] data
Receiver: `+Xu(_.element),se,U.data);ne.onReceive(_,ce)})})])}),Mk=[La("channels",Bd(kr.value,ri([Tc("onReceive"),ft("schema",Fi())])))];const B_=(u,_,T)=>uu(D=>{T(D,u,_)}),Cy=(u,_,T)=>dk((D,B)=>{T(D,u,_)}),Uw=(u,_,T,D,B,U)=>{const W=ri(u),J=ys(_,[Pf("config",u)]);return pu(W,J,_,T,D,B,U)},lN=(u,_,T,D,B,U)=>{const W=u,J=ys(_,[Wu("config",u)]);return pu(W,J,_,T,D,B,U)},Us=(u,_,T)=>oy((B,...U)=>{const W=[B].concat(U);return B.config({name:q(u)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+u+". Using API: "+T)},J=>{const ne=Array.prototype.slice.call(W,1);return _.apply(void 0,[B,J.config,J.state].concat(ne))})},T,_),cN=u=>({key:u,value:void 0}),pu=(u,_,T,D,B,U,W)=>{const J=ge=>Dn(ge,T)?ge[T]():Q.none(),ne=Zn(B,(ge,ye)=>Us(T,ge,ye)),ce={...Zn(U,(ge,ye)=>Bh(ge,ye)),...ne,revoke:oe(cN,T),config:ge=>{const ye=Bs(T+"-config",u,ge);return{key:T,value:{config:ye,me:ce,configAsRaw:eu(()=>Bs(T+"-config",u,ge)),initialConfig:ge,state:W}}},schema:q(_),exhibit:(ge,ye)=>vi(J(ge),Ue(D,"exhibit"),(xe,ke)=>ke(ye,xe.config,xe.state)).getOrThunk(()=>Ql({})),name:q(T),handlers:ge=>J(ge).map(ye=>Ue(D,"events").getOr(()=>({}))(ye.config,ye.state)).getOr({})};return ce},sn=u=>is(u),F_=ri([Ft("fields"),Ft("name"),ft("active",{}),ft("apis",{}),ft("state",wc),ft("extra",{})]),Ba=u=>{const _=Bs("Creating behaviour: "+u.name,F_,u);return Uw(_.fields,_.name,_.active,_.apis,_.extra,_.state)},kk=ri([Ft("branchKey"),Ft("branches"),Ft("name"),ft("active",{}),ft("apis",{}),ft("state",wc),ft("extra",{})]),V_=u=>{const _=Bs("Creating behaviour: "+u.name,kk,u);return lN(Eo(_.branchKey,_.branches),_.name,_.active,_.apis,_.extra,_.state)},Hw=q(void 0),dl=Ba({fields:Mk,name:"receiving",active:zw});var wy=Object.freeze({__proto__:null,exhibit:(u,_)=>Ql({classes:[],styles:_.useFixed()?{}:{position:"relative"}})});const Il=(u,_=!1)=>u.dom.focus({preventScroll:_}),z_=u=>u.dom.blur(),av=u=>{const _=$s(u).dom;return u.dom===_.activeElement},ec=(u=Gb())=>Q.from(u.dom.activeElement).map(Nt.fromDom),Mc=u=>ec($s(u)).filter(_=>u.dom.contains(_.dom)),wn=(u,_)=>{const T=$s(_),D=ec(T).bind(U=>{const W=J=>ni(U,J);return W(_)?Q.some(_):Ck(_,W)}),B=u(_);return D.each(U=>{ec(T).filter(W=>ni(W,U)).fold(()=>{Il(U)},V)}),B},$l=(u,_,T,D,B)=>{const U=W=>W+"px";return{position:u,left:_.map(U),top:T.map(U),right:D.map(U),bottom:B.map(U)}},Ww=u=>({...u,position:Q.some(u.position)}),Yw=(u,_)=>{on(u,Ww(_))},U_=il.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),H_=(u,_,T,D,B,U)=>{const W=_.rect,J=W.x-T,ne=W.y-D,se=W.width,ce=W.height,ge=B-(J+se),ye=U-(ne+ce),xe=Q.some(J),ke=Q.some(ne),He=Q.some(ge),pt=Q.some(ye),Je=Q.none();return ev(_.direction,()=>$l(u,xe,ke,Je,Je),()=>$l(u,Je,ke,He,Je),()=>$l(u,xe,Je,Je,pt),()=>$l(u,Je,Je,He,pt),()=>$l(u,xe,ke,Je,Je),()=>$l(u,xe,Je,Je,pt),()=>$l(u,xe,ke,Je,Je),()=>$l(u,Je,ke,He,Je))},sv=(u,_)=>u.fold(()=>{const T=_.rect;return $l("absolute",Q.some(T.x),Q.some(T.y),Q.none(),Q.none())},(T,D,B,U)=>H_("absolute",_,T,D,B,U),(T,D,B,U)=>H_("fixed",_,T,D,B,U)),G_=(u,_)=>{const T=oe(yg,_),D=u.fold(T,T,()=>{const W=wl();return yg(_).translate(-W.left,-W.top)}),B=xl(_),U=Eh(_);return ha(D.left,D.top,B,U)},Dk=(u,_)=>_.fold(()=>u.fold(gs,gs,ha),T=>u.fold(q(T),q(T),()=>{const D=W_(u,T.x,T.y);return ha(D.left,D.top,T.width,T.height)})),W_=(u,_,T)=>{const D=Ti(_,T),B=()=>{const U=wl();return D.translate(-U.left,-U.top)};return u.fold(q(D),q(D),B)},Pk=(u,_,T,D)=>u.fold(_,T,D);U_.none;const xs=U_.relative,lv=U_.fixed,Y_=(u,_)=>({anchorBox:u,origin:_}),jw=(u,_)=>Y_(u,_),Ey="data-alloy-placement",Rk=(u,_)=>{bn(u,Ey,_)},Zw=u=>Ls(u,Ey),j_=u=>Ni(u,Ey),cv=il.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),qw=(u,_)=>{const{x:T,y:D,right:B,bottom:U}=_,{x:W,y:J,right:ne,bottom:se,width:ce,height:ge}=u,ye=W>=T&&W<=B,xe=J>=D&&J<=U,ke=ye&&xe,He=ne<=B&&ne>=T,pt=se<=U&&se>=D,Je=He&&pt,Ze=Math.min(ce,W>=T?B-W:ne-T),dt=Math.min(ge,J>=D?U-J:se-D);return{originInBounds:ke,sizeInBounds:Je,visibleW:Ze,visibleH:dt}},Ty=(u,_)=>{const{x:T,y:D,right:B,bottom:U}=_,{x:W,y:J,width:ne,height:se}=u,ce=Math.max(T,B-ne),ge=Math.max(D,U-se),ye=ul(W,T,ce),xe=ul(J,D,ge),ke=Math.min(ye+ne,B)-ye,He=Math.min(xe+se,U)-xe;return ha(ye,xe,ke,He)},Ik=(u,_,T)=>{const D=q(_.bottom-T.y),B=q(T.bottom-_.y),U=M_(u,B,B,D),W=q(_.right-T.x),J=q(T.right-_.x);return{maxWidth:k_(u,J,J,W),maxHeight:U}},Kw=(u,_,T,D)=>{const B=u.bubble,U=B.offset,W=Ow(D,u.restriction,U),J=u.x+U.left,ne=u.y+U.top,se=ha(J,ne,_,T),{originInBounds:ce,sizeInBounds:ge,visibleW:ye,visibleH:xe}=qw(se,W),ke=ce&&ge,He=ke?se:Ty(se,W),pt=He.width>0&&He.height>0,{maxWidth:Je,maxHeight:Ze}=Ik(u.direction,He,D),dt={rect:He,maxHeight:Ze,maxWidth:Je,direction:u.direction,placement:u.placement,classes:{on:B.classesOn,off:B.classesOff},layout:u.label,testY:ne};return ke||u.alwaysFit?cv.fit(dt):cv.nofit(dt,ye,xe,pt)},$k=(u,_,T,D,B,U)=>{const W=D.width,J=D.height,ne=(ce,ge,ye,xe,ke)=>{const He=ce(T,D,B,u,U),pt=Kw(He,W,J,U);return pt.fold(q(pt),(Je,Ze,dt,Mt)=>(ke===Mt?dt>xe||Ze>ye:!ke&&Mt)?pt:cv.nofit(ge,ye,xe,ke))};return Se(_,(ce,ge)=>{const ye=oe(ne,ge);return ce.fold(q(ce),ye)},cv.nofit({rect:T,maxHeight:D.height,maxWidth:D.width,direction:vy(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:T.y},-1,-1,!1)).fold(ie,ie)},Z_=u=>{const _=sr(Q.none()),T=()=>_.get().each(u);return{clear:()=>{T(),_.set(Q.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:J=>{T(),_.set(Q.some(J))}}},uv=()=>Z_(u=>u.destroy()),om=()=>Z_(u=>u.unbind()),ai=()=>{const u=Z_(V);return{...u,on:T=>u.get().each(T)}},q_=be,Fa=(u,_,T)=>O0(u,_,q_,T),Ay=(u,_,T)=>tw(u,_,q_,T),Xw=Ub,Jw=["top","bottom","right","left"],My="data-alloy-transition-timer",Qw=(u,_)=>b_(u,_.classes),eE=(u,_,T)=>T.exists(D=>{const B=u.mode;return B==="all"?!0:D[B]!==_[B]}),Lk=(u,_)=>{const T=D=>parseFloat(D).toFixed(3);return qn(_,(D,B)=>{const U=u[B].map(T),W=D.map(T);return!Kn(U,W)}).isSome()},jd=u=>{const _=U=>{const J=mi(u,U).split(/\s*,\s*/);return Rt(J,Nu)},T=U=>{if(g(U)&&/^[\d.]+/.test(U)){const W=parseFloat(U);return Lu(U,"ms")?W:W*1e3}else return 0},D=_("transition-delay"),B=_("transition-duration");return Se(B,(U,W,J)=>{const ne=T(D[J])+T(W);return Math.max(U,ne)},0)},Nk=(u,_)=>{const T=om(),D=om();let B;const U=se=>{var ce;const ge=(ce=se.raw.pseudoElement)!==null&&ce!==void 0?ce:"";return ni(se.target,u)&&ze(ge)&&Ke(Jw,se.raw.propertyName)},W=se=>{if(R(se)||U(se)){T.clear(),D.clear();const ce=se==null?void 0:se.raw.type;(R(ce)||ce===Yp())&&(clearTimeout(B),Ni(u,My),Vs(u,_.classes))}},J=Fa(u,ik(),se=>{U(se)&&(J.unbind(),T.set(Fa(u,Yp(),W)),D.set(Fa(u,ok(),W)))}),ne=jd(u);requestAnimationFrame(()=>{B=setTimeout(W,ne+17),bn(u,My,B)})},Ok=(u,_)=>{Vi(u,_.classes),Ls(u,My).each(T=>{clearTimeout(parseInt(T,10)),Ni(u,My)}),Nk(u,_)},K_=(u,_,T,D,B,U)=>{const W=eE(D,B,U);if(W||Qw(u,D)){$r(u,"position",T.position);const J=G_(_,u),ne=sv(_,{...B,rect:J}),se=en(Jw,ce=>ne[ce]);Lk(T,se)&&(on(u,se),W&&Ok(u,D),pg(u))}else Vs(u,D.classes)},tE=u=>({width:xl(u),height:Eh(u)}),Xf=(u,_,T,D)=>{Do(_,"max-height"),Do(_,"max-width");const B=tE(_);return $k(_,D.preference,u,B,T,D.bounds)},im=(u,_)=>{const T=_.classes;Vs(u,T.off),Vi(u,T.on)},nd=(u,_,T)=>{const D=T.maxHeightFunction;D(u,_.maxHeight)},nE=(u,_,T)=>{const D=T.maxWidthFunction;D(u,_.maxWidth)},am=(u,_,T)=>{const D=sv(T.origin,_);T.transition.each(B=>{K_(u,T.origin,D,B,_,T.lastPlacement)}),Yw(u,D)},Bk=(u,_)=>{Rk(u,_.placement)},rE=(u,_)=>{FM(u,Math.floor(_))},oE=q((u,_)=>{rE(u,_),Af(u,{"overflow-x":"hidden","overflow-y":"auto"})}),sm=q((u,_)=>{rE(u,_)}),iE=(u,_,T)=>u[_]===void 0?T:u[_],X_=(u,_,T,D,B,U,W,J)=>{const ne=iE(W,"maxHeightFunction",oE()),se=iE(W,"maxWidthFunction",V),ce=u.anchorBox,ge=u.origin,ye={bounds:Dk(ge,U),origin:ge,preference:D,maxHeightFunction:ne,maxWidthFunction:se,lastPlacement:B,transition:J};return Fk(ce,_,T,ye)},Fk=(u,_,T,D)=>{const B=Xf(u,_,T,D);return am(_,B,D),Bk(_,B),im(_,B),nd(_,B,D),nE(_,B,D),{layout:B.layout,placement:B.placement}},Vk=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Zd=(u,_,T,D=1)=>{const B=u*D,U=_*D,W=ne=>Ue(T,ne).getOr([]),J=(ne,se,ce)=>{const ge=mt(Vk,ce);return{offset:Ti(ne,se),classesOn:Fe(ce,W),classesOff:Fe(ge,W)}};return{southeast:()=>J(-u,_,["top","alignLeft"]),southwest:()=>J(u,_,["top","alignRight"]),south:()=>J(-u/2,_,["top","alignCentre"]),northeast:()=>J(-u,-_,["bottom","alignLeft"]),northwest:()=>J(u,-_,["bottom","alignRight"]),north:()=>J(-u/2,-_,["bottom","alignCentre"]),east:()=>J(u,-_/2,["valignCentre","left"]),west:()=>J(-u,-_/2,["valignCentre","right"]),insetNortheast:()=>J(B,U,["top","alignLeft","inset"]),insetNorthwest:()=>J(-B,U,["top","alignRight","inset"]),insetNorth:()=>J(-B/2,U,["top","alignCentre","inset"]),insetSoutheast:()=>J(B,-U,["bottom","alignLeft","inset"]),insetSouthwest:()=>J(-B,-U,["bottom","alignRight","inset"]),insetSouth:()=>J(-B/2,-U,["bottom","alignCentre","inset"]),insetEast:()=>J(-B,-U/2,["valignCentre","right","inset"]),insetWest:()=>J(B,-U/2,["valignCentre","left","inset"])}},ky=()=>Zd(0,0,{}),Dy=ie,J_=(u,_)=>T=>aE(T)==="rtl"?_:u,aE=u=>mi(u,"direction")==="rtl"?"rtl":"ltr";var mu;(function(u){u.TopToBottom="toptobottom",u.BottomToTop="bottomtotop"})(mu||(mu={}));const Py="data-alloy-vertical-dir",Ry=u=>S_(u,_=>Fo(_)&&ns(_,"data-alloy-vertical-dir")===mu.BottomToTop),gu=()=>ys("layouts",[Ft("onLtr"),Ft("onRtl"),Ro("onBottomLtr"),Ro("onBottomRtl")]),Iy=(u,_,T,D,B,U,W)=>{const J=W.map(Ry).getOr(!1),ne=_.layouts.map(xe=>xe.onLtr(u)),se=_.layouts.map(xe=>xe.onRtl(u)),ce=J?_.layouts.bind(xe=>xe.onBottomLtr.map(ke=>ke(u))).or(ne).getOr(B):ne.getOr(T),ge=J?_.layouts.bind(xe=>xe.onBottomRtl.map(ke=>ke(u))).or(se).getOr(U):se.getOr(D);return J_(ce,ge)(u)},zk=(u,_,T)=>{const D=_.hotspot,B=G_(T,D.element),U=Iy(u.element,_,iv(),Sy(),O_(),Vw(),Q.some(_.hotspot.element));return Q.some(Dy({anchorBox:B,bubble:_.bubble.getOr(ky()),overrides:_.overrides,layouts:U}))};var sE=[Ft("hotspot"),Ro("bubble"),ft("overrides",{}),gu(),Go("placement",zk)];const dv=(u,_,T)=>{const D=W_(T,_.x,_.y),B=ha(D.left,D.top,_.width,_.height),U=Iy(u.element,_,L_(),N_(),L_(),N_(),Q.none());return Q.some(Dy({anchorBox:B,bubble:_.bubble,overrides:_.overrides,layouts:U}))};var Uk=[Ft("x"),Ft("y"),ft("height",0),ft("width",0),ft("bubble",ky()),ft("overrides",{}),gu(),Go("placement",dv)];const lE=il.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),cE=u=>u.fold(ie,(_,T,D)=>_.translate(-T,-D)),Hk=u=>u.fold(ie,ie),uE=u=>Se(u,(_,T)=>_.translate(T.left,T.top),Ti(0,0)),dE=u=>{const _=Xe(u,cE);return uE(_)},hE=u=>{const _=Xe(u,Hk);return uE(_)},Gk=lE.screen,$y=lE.absolute,Q_=(u,_,T)=>{const D=qi(T.root).dom,B=U=>{const W=Ia(U),J=Ia(u.element);return ni(W,J)};return Q.from(D.frameElement).map(Nt.fromDom).filter(B).map(Oi)},Fr=(u,_,T)=>{const D=Ia(u.element),B=wl(D),U=Q_(u,_,T).getOr(B);return $y(U,B.left,B.top)},rd=(u,_,T,D)=>{const B=Gk(Ti(u,_));return Q.some($d(B,T,D))},fE=(u,_,T,D,B)=>u.map(U=>{const W=[_,U.point],J=Pk(D,()=>hE(W),()=>hE(W),()=>dE(W)),ne=Bp(J.left,J.top,U.width,U.height),se=T.showAbove?O_():iv(),ce=T.showAbove?Vw():Sy(),ge=Iy(B,T,se,ce,se,ce,Q.none());return Dy({anchorBox:ne,bubble:T.bubble.getOr(ky()),overrides:T.overrides,layouts:ge})}),Wk=(u,_,T)=>{const D=Fr(u,T,_);return _.node.filter(ba).bind(B=>{const U=B.dom.getBoundingClientRect(),W=rd(U.left,U.top,U.width,U.height),J=_.node.getOr(u.element);return fE(W,D,_,T,J)})};var tc=[Ft("node"),Ft("root"),Ro("bubble"),gu(),ft("overrides",{}),ft("showAbove",!1),Go("placement",Wk)];const Yk="\uFEFF",jk=" ",eS={create:(u,_,T,D)=>({start:u,soffset:_,finish:T,foffset:D})},tS=il.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Zk=(u,_,T,D)=>u.fold(_,T,D),pE=u=>u.fold(ie,ie,ie),qk=tS.before,Kk=tS.on,Xk=tS.after,Jk={before:qk,on:Kk,after:Xk,cata:Zk,getStart:pE},lm=il.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Qk=u=>lm.exact(u.start,u.soffset,u.finish,u.foffset),Wh=u=>u.match({domRange:_=>Nt.fromDom(_.startContainer),relative:(_,T)=>Jk.getStart(_),exact:(_,T,D,B)=>_}),eD=lm.domRange,tD=lm.relative,nD=lm.exact,mE=u=>{const _=Wh(u);return qi(_)},rD=eS.create,hv={domRange:eD,relative:tD,exact:nD,exactFromRange:Qk,getWin:mE,range:rD},oD=(u,_)=>{_.fold(T=>{u.setStartBefore(T.dom)},(T,D)=>{u.setStart(T.dom,D)},T=>{u.setStartAfter(T.dom)})},gE=(u,_)=>{_.fold(T=>{u.setEndBefore(T.dom)},(T,D)=>{u.setEnd(T.dom,D)},T=>{u.setEndAfter(T.dom)})},Jf=(u,_,T)=>{const D=u.document.createRange();return oD(D,_),gE(D,T),D},vE=(u,_,T,D,B)=>{const U=u.document.createRange();return U.setStart(_.dom,T),U.setEnd(D.dom,B),U},Cs=u=>({left:u.left,top:u.top,right:u.right,bottom:u.bottom,width:u.width,height:u.height}),fv=u=>{const _=u.getClientRects(),T=_.length>0?_[0]:u.getBoundingClientRect();return T.width>0||T.height>0?Q.some(T).map(Cs):Q.none()},pv=u=>{const _=u.getBoundingClientRect();return _.width>0||_.height>0?Q.some(_).map(Cs):Q.none()},cm=il.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),nS=(u,_,T)=>_(Nt.fromDom(T.startContainer),T.startOffset,Nt.fromDom(T.endContainer),T.endOffset),iD=(u,_)=>_.match({domRange:T=>({ltr:q(T),rtl:Q.none}),relative:(T,D)=>({ltr:eu(()=>Jf(u,T,D)),rtl:eu(()=>Q.some(Jf(u,D,T)))}),exact:(T,D,B,U)=>({ltr:eu(()=>vE(u,T,D,B,U)),rtl:eu(()=>Q.some(vE(u,B,U,T,D)))})}),aD=(u,_)=>{const T=_.ltr();return T.collapsed?_.rtl().filter(B=>B.collapsed===!1).map(B=>cm.rtl(Nt.fromDom(B.endContainer),B.endOffset,Nt.fromDom(B.startContainer),B.startOffset)).getOrThunk(()=>nS(u,cm.ltr,T)):nS(u,cm.ltr,T)},sD=(u,_)=>{const T=iD(u,_);return aD(u,T)},Ly=(u,_)=>sD(u,_).match({ltr:(D,B,U,W)=>{const J=u.document.createRange();return J.setStart(D.dom,B),J.setEnd(U.dom,W),J},rtl:(D,B,U,W)=>{const J=u.document.createRange();return J.setStart(U.dom,W),J.setEnd(D.dom,B),J}});cm.ltr,cm.rtl;const rS=(u,_,T)=>Rt(FC(u,T),_),ga=(u,_)=>Pp(_,u),lD=(u,_,T,D)=>{const U=Ia(u).dom.createRange();return U.setStart(u.dom,_),U.setEnd(T.dom,D),U},yE=(u,_,T,D)=>{const B=lD(u,_,T,D),U=ni(u,T)&&_===D;return B.collapsed&&!U},bE=u=>Q.from(u.getSelection()),oS=u=>{if(u.rangeCount>0){const _=u.getRangeAt(0),T=u.getRangeAt(u.rangeCount-1);return Q.some(eS.create(Nt.fromDom(_.startContainer),_.startOffset,Nt.fromDom(T.endContainer),T.endOffset))}else return Q.none()},iS=u=>{if(u.anchorNode===null||u.focusNode===null)return oS(u);{const _=Nt.fromDom(u.anchorNode),T=Nt.fromDom(u.focusNode);return yE(_,u.anchorOffset,T,u.focusOffset)?Q.some(eS.create(_,u.anchorOffset,T,u.focusOffset)):oS(u)}},mv=u=>bE(u).filter(_=>_.rangeCount>0).bind(iS),gv=(u,_)=>{const T=Ly(u,_);return fv(T)},aS=(u,_)=>{const T=Ly(u,_);return pv(T)},um=((u,_)=>{const T=U=>{if(!u(U))throw new Error("Can only get "+_+" value of a "+_+" node");return D(U).getOr("")},D=U=>u(U)?Q.from(U.dom.nodeValue):Q.none();return{get:T,getOption:D,set:(U,W)=>{if(!u(U))throw new Error("Can only set raw "+_+" value of a "+_+" node");U.dom.nodeValue=W}}})(ts,"text"),yv=u=>um.get(u),Qf=(u,_)=>({element:u,offset:_}),cD=(u,_)=>{const T=Xc(u);if(T.length===0)return Qf(u,_);if(_<T.length)return Qf(T[_],0);{const D=T[T.length-1],B=ts(D)?yv(D).length:Xc(D).length;return Qf(D,B)}},ep=(u,_)=>ts(u)?Qf(u,_):cD(u,_),Ny=u=>u.foffset!==void 0,sS=(u,_)=>_.getSelection.getOrThunk(()=>()=>mv(u))().map(D=>{if(Ny(D)){const B=ep(D.start,D.soffset),U=ep(D.finish,D.foffset);return hv.range(B.element,B.offset,U.element,U.offset)}else return D}),uD=(u,_,T)=>{const D=qi(_.root).dom,B=Fr(u,T,_),U=sS(D,_).bind(ne=>{if(Ny(ne))return aS(D,hv.exactFromRange(ne)).orThunk(()=>{const ce=Nt.fromText(Yk);tu(ne.start,ce);const ge=gv(D,hv.exact(ce,0,ce,1));return nu(ce),ge}).bind(ce=>rd(ce.left,ce.top,ce.width,ce.height));{const se=Zn(ne,ge=>ge.dom.getBoundingClientRect()),ce={left:Math.min(se.firstCell.left,se.lastCell.left),right:Math.max(se.firstCell.right,se.lastCell.right),top:Math.min(se.firstCell.top,se.lastCell.top),bottom:Math.max(se.firstCell.bottom,se.lastCell.bottom)};return rd(ce.left,ce.top,ce.right-ce.left,ce.bottom-ce.top)}}),J=sS(D,_).bind(ne=>Ny(ne)?Fo(ne.start)?Q.some(ne.start):Ou(ne.start):Q.some(ne.firstCell)).getOr(u.element);return fE(U,B,_,T,J)};var dD=[Ro("getSelection"),Ft("root"),Ro("bubble"),gu(),ft("overrides",{}),ft("showAbove",!1),Go("placement",uD)];const Oy="link-layout",tp=u=>u.x+u.width,qd=(u,_)=>u.x-_.width,bv=(u,_)=>u.y-_.height+u.height,dm=u=>u.y,_E=(u,_,T)=>oa(tp(u),dm(u),T.southeast(),vy(),"southeast",xi(u,{left:0,top:2}),Oy),Kd=(u,_,T)=>oa(qd(u,_),dm(u),T.southwest(),D_(),"southwest",xi(u,{right:1,top:2}),Oy),vu=(u,_,T)=>oa(tp(u),bv(u,_),T.northeast(),yy(),"northeast",xi(u,{left:0,bottom:3}),Oy),By=(u,_,T)=>oa(qd(u,_),bv(u,_),T.northwest(),fu(),"northwest",xi(u,{right:1,bottom:3}),Oy),lS=()=>[_E,Kd,vu,By],cS=()=>[Kd,_E,By,vu],SE=(u,_,T)=>{const D=G_(T,_.item.element),B=Iy(u.element,_,lS(),cS(),lS(),cS(),Q.none());return Q.some(Dy({anchorBox:D,bubble:ky(),overrides:_.overrides,layouts:B}))};var _v=[Ft("item"),gu(),ft("overrides",{}),Go("placement",SE)],Sv=Eo("type",{selection:dD,node:tc,hotspot:sE,submenu:_v,makeshift:Uk});const uS=[El("classes",$a),Tl("mode","all",["all","layout","placement"])],xE=[ft("useFixed",me),Ro("getBounds")],xv=[La("anchor",Sv),ys("transition",uS)],Fy=()=>{const u=document.documentElement;return lv(0,0,u.clientWidth,u.clientHeight)},CE=u=>{const _=Oi(u.element),T=u.element.dom.getBoundingClientRect();return xs(_.left,_.top,T.width,T.height)},hm=(u,_,T,D,B,U)=>{const W=jw(_.anchorBox,u);return X_(W,D.element,_.bubble,_.layouts,B,T,_.overrides,U)},Vy=(u,_,T,D,B)=>{const U=Q.none();wa(u,_,T,D,B,U)},wa=(u,_,T,D,B,U)=>{const W=Bs("placement.info",er(xv),B),J=W.anchor,ne=D.element,se=T.get(D.uid);wn(()=>{$r(ne,"position","fixed");const ce=Wa(ne,"visibility");$r(ne,"visibility","hidden");const ge=_.useFixed()?Fy():CE(u);J.placement(u,J,ge).each(ye=>{const xe=U.orThunk(()=>_.getBounds.map(_e)),ke=hm(ge,ye,xe,D,se,W.transition);T.set(D.uid,ke)}),ce.fold(()=>{Do(ne,"visibility")},ye=>{$r(ne,"visibility",ye)}),Wa(ne,"left").isNone()&&Wa(ne,"top").isNone()&&Wa(ne,"right").isNone()&&Wa(ne,"bottom").isNone()&&Xt(Wa(ne,"position"),"fixed")&&Do(ne,"position")},ne)};var dS=Object.freeze({__proto__:null,position:Vy,positionWithinBounds:wa,getMode:(u,_,T)=>_.useFixed()?"fixed":"absolute",reset:(u,_,T,D)=>{const B=D.element;Be(["position","left","right","top","bottom"],U=>Do(B,U)),j_(B),T.clear(D.uid)}}),np=Object.freeze({__proto__:null,init:()=>{let u={};return Xs({readState:()=>u,clear:B=>{L(B)?delete u[B]:u={}},set:(B,U)=>{u[B]=U},get:B=>Ue(u,B)})}});const Ja=Ba({fields:xE,name:"positioning",active:wy,apis:dS,state:np}),od=u=>u.getSystem().isConnected(),fm=u=>{Kr(u,$h());const _=u.components();Be(_,fm)},Dc=u=>{const _=u.components();Be(_,Dc),Kr(u,Sc())},zy=(u,_)=>{u.getSystem().addToWorld(_),ba(u.element)&&Dc(_)},rp=u=>{fm(u),u.getSystem().removeFromWorld(u)},pm=(u,_)=>{Xl(u.element,_.element)},id=u=>{Be(u.components(),_=>nu(_.element)),vg(u.element),u.syncComponents()},hD=(u,_,T)=>{const D=u.components();id(u);const B=T(_),U=mt(D,B);Be(U,W=>{fm(W),u.getSystem().removeFromWorld(W)}),Be(B,W=>{od(W)?pm(u,W):(u.getSystem().addToWorld(W),pm(u,W),ba(u.element)&&Dc(W))}),u.syncComponents()},fD=(u,_,T)=>{const D=u.components(),B=Fe(_,J=>Cw(J).toArray());Be(D,J=>{Ke(B,J)||rp(J)});const U=T(_),W=mt(D,U);Be(W,J=>{od(J)&&rp(J)}),Be(U,J=>{od(J)||zy(u,J)}),u.syncComponents()},Xd=(u,_)=>{Cv(u,_,Xl)},Cv=(u,_,T)=>{u.getSystem().addToWorld(_),T(u.element,_.element),ba(u.element)&&Dc(_),u.syncComponents()},fS=u=>{fm(u),nu(u.element),u.getSystem().removeFromWorld(u)},Jd=u=>{const _=Kc(u.element).bind(T=>u.getSystem().getByDom(T).toOptional());fS(u),_.each(T=>{T.syncComponents()})},Uy=u=>{const _=u.components();Be(_,fS),vg(u.element),u.syncComponents()},Hs=(u,_)=>{pS(u,_,Xl)},Qd=(u,_)=>{pS(u,_,gg)},pS=(u,_,T)=>{T(u,_.element);const D=Xc(_.element);Be(D,B=>{_.getByDom(B).each(Dc)})},mm=u=>{const _=Xc(u.element);Be(_,T=>{u.getByDom(T).each(fm)}),nu(u.element)},Es=(u,_,T,D)=>{T.get().each(W=>{Uy(u)});const B=_.getAttachPoint(u);Xd(B,u);const U=u.getSystem().build(D);return Xd(u,U),T.set(U),U},ls=(u,_,T,D)=>{const B=Es(u,_,T,D);return _.onOpen(u,B),B},Ts=(u,_,T,D)=>T.get().map(()=>Es(u,_,T,D)),Pc=(u,_,T,D,B)=>{mS(u,_),ls(u,_,T,D),B(),rc(u,_)},Hy=(u,_,T)=>{T.get().each(D=>{Uy(u),Jd(u),_.onClose(u,D),T.clear()})},hl=(u,_,T)=>T.isOpen(),Yh=(u,_,T,D)=>hl(u,_,T)&&T.get().exists(B=>_.isPartOf(u,B,D)),Ll=(u,_,T)=>T.get(),EE=(u,_,T,D)=>{Wa(u.element,_).fold(()=>{Ni(u.element,T)},B=>{bn(u.element,T,B)}),$r(u.element,_,D)},pD=(u,_,T)=>{Ls(u.element,T).fold(()=>Do(u.element,_),D=>$r(u.element,_,D))},mS=(u,_,T)=>{const D=_.getAttachPoint(u);$r(u.element,"position",Ja.getMode(D)),EE(u,"visibility",_.cloakVisibilityAttr,"hidden")},nc=u=>Tt(["top","left","right","bottom"],_=>Wa(u,_).isSome()),rc=(u,_,T)=>{nc(u.element)||Do(u.element,"position"),pD(u,"visibility",_.cloakVisibilityAttr)};var gm=Object.freeze({__proto__:null,cloak:mS,decloak:rc,open:ls,openWhileCloaked:Pc,close:Hy,isOpen:hl,isPartOf:Yh,getState:Ll,setContent:Ts}),wv=Object.freeze({__proto__:null,events:(u,_)=>ui([Vt(Rg(),(T,D)=>{Hy(T,u,_)})])}),oc=[so("onOpen"),so("onClose"),Ft("isPartOf"),Ft("getAttachPoint"),ft("cloakVisibilityAttr","data-precloak-visibility")],TE=Object.freeze({__proto__:null,init:()=>{const u=ai(),_=q("not-implemented");return Xs({readState:_,isOpen:u.isSet,clear:u.clear,set:u.set,get:u.get})}});const io=Ba({fields:oc,name:"sandboxing",active:wv,apis:gm,state:TE}),yu=q("dismiss.popups"),Rc=q("reposition.popups"),Gy=q("mouse.released"),vD=ri([ft("isExtraPart",me),ys("fireEventInstead",[ft("event",Zu())])]),Wy=u=>{const _=Bs("Dismissal",vD,u);return{[yu()]:{schema:ri([Ft("target")]),onReceive:(T,D)=>{io.isOpen(T)&&(io.isPartOf(T,D.target)||_.isExtraPart(T,D.target)||_.fireEventInstead.fold(()=>io.close(T),U=>Kr(T,U.event)))}}}},AE=ri([ys("fireEventInstead",[ft("event",c_())]),su("doReposition")]),op=u=>{const _=Bs("Reposition",AE,u);return{[Rc()]:{onReceive:T=>{io.isOpen(T)&&_.fireEventInstead.fold(()=>_.doReposition(T),D=>Kr(T,D.event))}}}},Ev=(u,_,T)=>{_.store.manager.onLoad(u,_,T)},bi=(u,_,T)=>{_.store.manager.onUnload(u,_,T)};var gS=Object.freeze({__proto__:null,onLoad:Ev,onUnload:bi,setValue:(u,_,T,D)=>{_.store.manager.setValue(u,_,T,D)},getValue:(u,_,T)=>_.store.manager.getValue(u,_,T),getState:(u,_,T)=>T}),bD=Object.freeze({__proto__:null,events:(u,_)=>{const T=u.resetOnDom?[ii((D,B)=>{Ev(D,u,_)}),Ku((D,B)=>{bi(D,u,_)})]:[Cy(u,_,Ev)];return ui(T)}});const Tv=()=>{const u=sr(null),_=()=>({mode:"memory",value:u.get()}),T=()=>u.get()===null,D=()=>{u.set(null)};return Xs({set:u.set,get:u.get,isNotSet:T,clear:D,readState:_})},_D=()=>Xs({readState:V}),kE=()=>{const u=sr({}),_=sr({});return Xs({readState:()=>({mode:"dataset",dataByValue:u.get(),dataByText:_.get()}),lookup:W=>Ue(u.get(),W).orThunk(()=>Ue(_.get(),W)),update:W=>{const J=u.get(),ne=_.get(),se={},ce={};Be(W,ge=>{se[ge.value]=ge,Ue(ge,"meta").each(ye=>{Ue(ye,"text").each(xe=>{ce[xe]=ge})})}),u.set({...J,...se}),_.set({...ne,...ce})},clear:()=>{u.set({}),_.set({})}})};var ym=Object.freeze({__proto__:null,memory:Tv,dataset:kE,manual:_D,init:u=>u.store.manager.state(u)});const bm=(u,_,T,D)=>{const B=_.store;T.update([D]),B.setValue(u,D),_.onSetValue(u,D)},DE=(u,_,T)=>{const D=_.store,B=D.getDataKey(u);return T.lookup(B).getOrThunk(()=>D.getFallbackEntry(B))},xD=(u,_,T)=>{_.store.initialValue.each(B=>{bm(u,_,T,B)})},_m=(u,_,T)=>{T.clear()};var jy=[Ro("initialValue"),Ft("getFallbackEntry"),Ft("getDataKey"),Ft("setValue"),Go("manager",{setValue:bm,getValue:DE,onLoad:xD,onUnload:_m,state:kE})];const vS=(u,_,T)=>_.store.getValue(u),yS=(u,_,T,D)=>{_.store.setValue(u,D),_.onSetValue(u,D)},Av=(u,_,T)=>{_.store.initialValue.each(D=>{_.store.setValue(u,D)})};var bS=[Ft("getValue"),ft("setValue",V),Ro("initialValue"),Go("manager",{setValue:yS,getValue:vS,onLoad:Av,onUnload:V,state:wc.init})];const PE=(u,_,T,D)=>{T.set(D),_.onSetValue(u,D)},jh=(u,_,T)=>T.get(),_S=(u,_,T)=>{_.store.initialValue.each(D=>{T.isNotSet()&&T.set(D)})},CD=(u,_,T)=>{T.clear()};var RE=[Ro("initialValue"),Go("manager",{setValue:PE,getValue:jh,onLoad:_S,onUnload:CD,state:Tv})],wD=[ol("store",{mode:"memory"},Eo("mode",{memory:RE,manual:bS,dataset:jy})),so("onSetValue"),ft("resetOnDom",!1)];const Sn=Ba({fields:wD,name:"representing",active:bD,apis:gS,extra:{setValueFrom:(u,_)=>{const T=Sn.getValue(_);Sn.setValue(u,T)}},state:ym}),ia=(u,_)=>ju(u,{},Xe(_,T=>j0(T.name(),"Cannot configure "+T.name()+" for "+u)).concat([Gi("dump",ie)])),eh=u=>u.dump,aa=(u,_)=>({...sn(_),...u.dump}),Ic={field:ia,augment:aa,get:eh},IE="placeholder",Mv=il.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ic=u=>yn(u,"uiType"),SS=(u,_,T,D)=>u.exists(B=>B!==T.owner)?Mv.single(!0,q(T)):Ue(D,T.name).fold(()=>{throw new Error("Unknown placeholder component: "+T.name+`
Known: [`+xn(D)+`]
Namespace: `+u.getOr("none")+`
Spec: `+JSON.stringify(T,null,2))},B=>B.replace()),xS=(u,_,T,D)=>ic(T)&&T.uiType===IE?SS(u,_,T,D):Mv.single(!1,q(T)),kv=(u,_,T,D)=>xS(u,_,T,D).fold((U,W)=>{const J=ic(T)?W(_,T.config,T.validated):W(_),ne=Ue(J,"components").getOr([]),se=Fe(ne,ce=>kv(u,_,ce,D));return[{...J,components:se}]},(U,W)=>{if(ic(T)){const J=W(_,T.config,T.validated);return T.validated.preprocess.getOr(ie)(J)}else return W(_)}),$E=(u,_,T,D)=>Fe(T,B=>kv(u,_,B,D)),Zy=(u,_)=>{let T=!1;const D=()=>T,B=()=>{if(T)throw new Error("Trying to use the same placeholder more than once: "+u);return T=!0,_},U=()=>_.fold((W,J)=>W,(W,J)=>W);return{name:q(u),required:U,used:D,replace:B}},CS=(u,_,T,D)=>{const B=Zn(D,(W,J)=>Zy(J,W)),U=$E(u,_,T,B);return kn(B,W=>{if(W.used()===!1&&W.required())throw new Error("Placeholder: "+W.name()+` was not found in components list
Namespace: `+u.getOr("none")+`
Components: `+JSON.stringify(_.components,null,2))}),U},LE=Mv.single,ED=Mv.multiple,bu=q(IE),Dv=il.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),qy=ft("factory",{sketch:ie}),fl=ft("schema",[]),Xi=Ft("name"),Pv=Za("pname","pname",vc(u=>"<alloy."+In(u.name)+">"),Fi()),wS=Gi("schema",()=>[Ro("preprocess")]),Ky=ft("defaults",q({})),Rv=ft("overrides",q({})),ES=er([qy,fl,Xi,Pv,Ky,Rv]),Sm=er([qy,fl,Xi,Ky,Rv]),NE=er([qy,fl,Xi,Pv,Ky,Rv]),OE=er([qy,wS,Xi,Ft("unit"),Pv,Ky,Rv]),TS=u=>u.fold(Q.some,Q.none,Q.some,Q.some),AS=u=>{const _=T=>T.name;return u.fold(_,_,_,_)},BE=u=>u.fold(ie,ie,ie,ie),Iv=(u,_)=>T=>{const D=Bs("Converting part type",_,T);return u(D)},cs=Iv(Dv.required,ES),$c=Iv(Dv.external,Sm),pl=Iv(Dv.optional,NE),$v=Iv(Dv.group,OE),Xy=q("entirety");var FE=Object.freeze({__proto__:null,required:cs,external:$c,optional:pl,group:$v,asNamedPart:TS,name:AS,asCommon:BE,original:Xy});const ip=(u,_,T,D)=>ci(_.defaults(u,T,D),T,{uid:u.partUids[_.name]},_.overrides(u,T,D)),Jy=(u,_,T)=>{const D={},B={};return Be(T,U=>{U.fold(W=>{D[W.pname]=LE(!0,(J,ne,se)=>W.factory.sketch(ip(J,W,ne,se)))},W=>{const J=_.parts[W.name];B[W.name]=q(W.factory.sketch(ip(_,W,J[Xy()]),J))},W=>{D[W.pname]=LE(!1,(J,ne,se)=>W.factory.sketch(ip(J,W,ne,se)))},W=>{D[W.pname]=ED(!0,(J,ne,se)=>{const ce=J[W.name];return Xe(ce,ge=>W.factory.sketch(ci(W.defaults(J,ge,se),ge,W.overrides(J,ge))))})})}),{internals:q(D),externals:q(B)}},th=(u,_)=>{const T={};return Be(_,D=>{TS(D).each(B=>{const U=Lv(u,B.pname);T[B.name]=W=>{const J=Bs("Part: "+B.name+" in "+u,er(B.schema),W);return{...U,config:W,validated:J}}})}),T},Lv=(u,_)=>({uiType:bu(),owner:u,name:_}),MS=(u,_,T)=>({uiType:bu(),owner:u,name:_,config:T,validated:{}}),VE=u=>Fe(u,_=>_.fold(Q.none,Q.some,Q.none,Q.none).map(T=>lu(T.name,T.schema.concat([gy(Xy())]))).toArray()),zE=u=>Xe(u,AS),As=(u,_,T)=>Jy(u,_,T),Qy=(u,_,T)=>CS(Q.some(u),_,_.components,T),Xo=(u,_,T)=>{const D=_.partUids[T];return u.getSystem().getByUid(D).toOptional()},nh=(u,_,T)=>Xo(u,_,T).getOrDie("Could not find part: "+T),UE=(u,_,T)=>{const D={},B=_.partUids,U=u.getSystem();return Be(T,W=>{D[W]=q(U.getByUid(B[W]))}),D},HE=(u,_)=>{const T=u.getSystem();return Zn(_.partUids,(D,B)=>q(T.getByUid(D)))},kS=u=>xn(u.partUids),ap=(u,_,T)=>{const D={},B=_.partUids,U=u.getSystem();return Be(T,W=>{D[W]=q(U.getByUid(B[W]).getOrDie())}),D},DS=(u,_)=>{const T=zE(_);return is(Xe(T,D=>({key:D,value:u+"-"+D})))},PS=u=>Za("partUids","partUids",z0(_=>DS(_.uid,u)),Fi());var TD=Object.freeze({__proto__:null,generate:th,generateOne:MS,schemas:VE,names:zE,substitutes:As,components:Qy,defaultUids:DS,defaultUidsSchema:PS,getAllParts:HE,getAllPartNames:kS,getPart:Xo,getPartOrDie:nh,getParts:UE,getPartsOrDie:ap});const AD=(u,_)=>(u.length>0?[lu("parts",u)]:[]).concat([Ft("uid"),ft("dom",{}),ft("components",[]),gy("originalSpec"),ft("debug.sketcher",{})]).concat(_),GE=(u,_,T,D,B)=>{const U=AD(D,B);return Bs(u+" [SpecSchema]",ri(U.concat(_)),T)},MD=(u,_,T,D)=>{const B=WE(D),U=GE(u,_,B,[],[]);return T(U,B)},RS=(u,_,T,D,B)=>{const U=WE(B),W=VE(T),J=PS(T),ne=GE(u,_,U,W,[J]),se=As(u,ne,T),ce=Qy(u,ne,se.internals());return D(ne,ce,U,se.externals())},kD=u=>yn(u,"uid"),WE=u=>kD(u)?u:{...u,uid:Hd("uid")},DD=u=>u.uid!==void 0,PD=ri([Ft("name"),Ft("factory"),Ft("configFields"),ft("apis",{}),ft("extraApis",{})]),RD=ri([Ft("name"),Ft("factory"),Ft("configFields"),Ft("partFields"),ft("apis",{}),ft("extraApis",{})]),ml=u=>{const _=Bs("Sketcher for "+u.name,PD,u),T=U=>MD(_.name,_.configFields,_.factory,U),D=Zn(_.apis,Jp),B=Zn(_.extraApis,(U,W)=>Bh(U,W));return{name:_.name,configFields:_.configFields,sketch:T,...D,...B}},us=u=>{const _=Bs("Sketcher for "+u.name,RD,u),T=W=>RS(_.name,_.configFields,_.partFields,_.factory,W),D=th(_.name,_.partFields),B=Zn(_.apis,Jp),U=Zn(_.extraApis,(W,J)=>Bh(W,J));return{name:_.name,partFields:_.partFields,configFields:_.configFields,sketch:T,parts:D,...B,...U}},sp=u=>qc("input")(u)&&ns(u,"type")!=="radio"||qc("textarea")(u);var YE=Object.freeze({__proto__:null,getCurrent:(u,_,T)=>_.find(u)});const ID=[Ft("find")],eo=Ba({fields:ID,name:"composing",apis:YE}),jE=["input","button","textarea","select"],ZE=(u,_,T)=>{(_.disabled()?$S:e1)(u,_)},IS=(u,_)=>_.useNative===!0&&Ke(jE,Ei(u.element)),$D=u=>GC(u.element,"disabled"),LD=u=>{bn(u.element,"disabled","disabled")},qE=u=>{Ni(u.element,"disabled")},ND=u=>ns(u.element,"aria-disabled")==="true",Tn=u=>{bn(u.element,"aria-disabled","true")},lp=u=>{bn(u.element,"aria-disabled","false")},$S=(u,_,T)=>{_.disableClass.each(B=>{Di(u.element,B)}),(IS(u,_)?LD:Tn)(u),_.onDisabled(u)},e1=(u,_,T)=>{_.disableClass.each(B=>{hi(u.element,B)}),(IS(u,_)?qE:lp)(u),_.onEnabled(u)},Nv=(u,_)=>IS(u,_)?$D(u):ND(u);var OD=Object.freeze({__proto__:null,enable:e1,disable:$S,isDisabled:Nv,onLoad:ZE,set:(u,_,T,D)=>{(D?$S:e1)(u,_)}}),VD=Object.freeze({__proto__:null,exhibit:(u,_)=>Ql({classes:_.disabled()?_.disableClass.toArray():[]}),events:(u,_)=>ui([d_(kl(),(T,D)=>Nv(T,u)),Cy(u,_,ZE)])}),XE=[Ca("disabled",me),ft("useNative",!0),Ro("disableClass"),so("onDisabled"),so("onEnabled")];const or=Ba({fields:XE,name:"disabling",active:VD,apis:OD}),ad=(u,_,T,D)=>{const B=ga(u.element,"."+_.highlightClass);Be(B,U=>{Tt(D,J=>ni(J.element,U))||(hi(U,_.highlightClass),u.getSystem().getByDom(U).each(J=>{_.onDehighlight(u,J),Kr(J,qp())}))})},JE=(u,_,T)=>ad(u,_,T,[]),zD=(u,_,T,D)=>{LS(u,_,T,D)&&(hi(D.element,_.highlightClass),_.onDehighlight(u,D),Kr(D,qp()))},xm=(u,_,T,D)=>{ad(u,_,T,[D]),LS(u,_,T,D)||(Di(D.element,_.highlightClass),_.onHighlight(u,D),Kr(D,Zp()))},QE=(u,_,T)=>{ac(u,_).each(D=>{xm(u,_,T,D)})},UD=(u,_,T)=>{eT(u,_).each(D=>{xm(u,_,T,D)})},rh=(u,_,T,D)=>{NS(u,_,T,D).fold(B=>{throw B},B=>{xm(u,_,T,B)})},HD=(u,_,T,D)=>{const B=oh(u,_);$e(B,D).each(W=>{xm(u,_,T,W)})},LS=(u,_,T,D)=>ra(D.element,_.highlightClass),GD=(u,_,T)=>Ri(u.element,"."+_.highlightClass).bind(D=>u.getSystem().getByDom(D).toOptional()),NS=(u,_,T,D)=>{const B=ga(u.element,"."+_.itemClass);return Q.from(B[D]).fold(()=>kr.error(new Error("No element found with index "+D)),u.getSystem().getByDom)},ac=(u,_,T)=>Ri(u.element,"."+_.itemClass).bind(D=>u.getSystem().getByDom(D).toOptional()),eT=(u,_,T)=>{const D=ga(u.element,"."+_.itemClass);return(D.length>0?Q.some(D[D.length-1]):Q.none()).bind(U=>u.getSystem().getByDom(U).toOptional())},tT=(u,_,T,D)=>{const B=ga(u.element,"."+_.itemClass);return st(B,W=>ra(W,_.highlightClass)).bind(W=>{const J=rm(W,D,0,B.length-1);return u.getSystem().getByDom(B[J]).toOptional()})},WD=(u,_,T)=>tT(u,_,T,-1),t1=(u,_,T)=>tT(u,_,T,1),oh=(u,_,T)=>{const D=ga(u.element,"."+_.itemClass);return Yr(Xe(D,B=>u.getSystem().getByDom(B).toOptional()))};var ih=Object.freeze({__proto__:null,dehighlightAll:JE,dehighlight:zD,highlight:xm,highlightFirst:QE,highlightLast:UD,highlightAt:rh,highlightBy:HD,isHighlighted:LS,getHighlighted:GD,getFirst:ac,getLast:eT,getPrevious:WD,getNext:t1,getCandidates:oh}),n1=[Ft("highlightClass"),Ft("itemClass"),so("onHighlight"),so("onDehighlight")];const To=Ba({fields:n1,name:"highlighting",apis:ih}),YD=[8],ah=[9],sd=[13],Ov=[27],gl=[32],r1=[37],ld=[38],cp=[39],Cm=[40],nT=(u,_,T)=>{const D=Gt(u.slice(0,_)),B=Gt(u.slice(_+1));return $e(D.concat(B),T)},jD=(u,_,T)=>{const D=Gt(u.slice(0,_));return $e(D,T)},o1=(u,_,T)=>{const D=u.slice(0,_),B=u.slice(_+1);return $e(B.concat(D),T)},Bv=(u,_,T)=>{const D=u.slice(_+1);return $e(D,T)},lo=u=>_=>{const T=_.raw;return Ke(u,T.which)},Lc=u=>_=>tn(u,T=>T(_)),Zh=u=>u.raw.shiftKey===!0,wm=u=>u.raw.ctrlKey===!0,up=re(Zh),co=(u,_)=>({matches:u,classification:_}),ZD=(u,_)=>$e(u,D=>D.matches(_)).map(D=>D.classification),OS=(u,_,T)=>{_.exists(B=>T.exists(U=>ni(U,B)))||tr(u,Lh(),{prevFocus:_,newFocus:T})},i1=()=>{const u=T=>Mc(T.element);return{get:u,set:(T,D)=>{const B=u(T);T.getSystem().triggerFocus(D,T.element);const U=u(T);OS(T,B,U)}}},qD=()=>{const u=T=>To.getHighlighted(T).map(D=>D.element);return{get:u,set:(T,D)=>{const B=u(T);T.getSystem().getByDom(D).fold(V,W=>{To.highlight(T,W)});const U=u(T);OS(T,B,U)}}};var sh;(function(u){u.OnFocusMode="onFocus",u.OnEnterOrSpaceMode="onEnterOrSpace",u.OnApiMode="onApi"})(sh||(sh={}));const qh=(u,_,T,D,B)=>{const U=()=>u.concat([ft("focusManager",i1()),ol("focusInside","onFocus",Cg(se=>Ke(["onFocus","onEnterOrSpace","onApi"],se)?kr.value(se):kr.error("Invalid value for focusInside"))),Go("handler",ne),Go("state",_),Go("sendFocusIn",B)]),W=(se,ce,ge,ye,xe)=>{const ke=ge(se,ce,ye,xe);return ZD(ke,ce.event).bind(He=>He(se,ce,ye,xe))},ne={schema:U,processKey:W,toEvents:(se,ce)=>{const ge=se.focusInside!==sh.OnFocusMode?Q.none():B(se).map(ke=>Vt(Ih(),(He,pt)=>{ke(He,se,ce),pt.stop()})),ye=(ke,He)=>{const pt=lo(gl.concat(sd))(He.event);se.focusInside===sh.OnEnterOrSpaceMode&&pt&&Mg(ke,He)&&B(se).each(Je=>{Je(ke,se,ce),He.stop()})},xe=[Vt(Ks(),(ke,He)=>{W(ke,He,T,se,ce).fold(()=>{ye(ke,He)},pt=>{He.stop()})}),Vt(bc(),(ke,He)=>{W(ke,He,D,se,ce).each(pt=>{He.stop()})})];return ui(ge.toArray().concat(xe))}};return ne},Em=u=>{const _=[Ro("onEscape"),Ro("onEnter"),ft("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ft("firstTabstop",0),ft("useTabstopAt",be),Ro("visibilitySelector")].concat([u]),T=(Je,Ze)=>{const dt=Je.visibilitySelector.bind(Mt=>Ec(Ze,Mt)).getOr(Ze);return ua(dt)>0},D=(Je,Ze)=>{const dt=ga(Je.element,Ze.selector),Mt=Rt(dt,nn=>T(Ze,nn));return Q.from(Mt[Ze.firstTabstop])},B=(Je,Ze)=>Ze.focusManager.get(Je).bind(dt=>Ec(dt,Ze.selector)),U=(Je,Ze)=>T(Je,Ze)&&Je.useTabstopAt(Ze),W=(Je,Ze,dt)=>{D(Je,Ze).each(Mt=>{Ze.focusManager.set(Je,Mt)})},J=(Je,Ze,dt,Mt,nn)=>nn(Ze,dt,$t=>U(Mt,$t)).fold(()=>Mt.cyclic?Q.some(!0):Q.none(),$t=>(Mt.focusManager.set(Je,$t),Q.some(!0))),ne=(Je,Ze,dt,Mt)=>{const nn=ga(Je.element,dt.selector);return B(Je,dt).bind($t=>st(nn,oe(ni,$t)).bind(mn=>J(Je,nn,mn,dt,Mt)))},se=(Je,Ze,dt)=>{const Mt=dt.cyclic?nT:jD;return ne(Je,Ze,dt,Mt)},ce=(Je,Ze,dt)=>{const Mt=dt.cyclic?o1:Bv;return ne(Je,Ze,dt,Mt)},ge=Je=>BC(Je).bind(D0).exists(Ze=>ni(Ze,Je)),ye=(Je,Ze,dt)=>B(Je,dt).filter(Mt=>!dt.useTabstopAt(Mt)).bind(Mt=>(ge(Mt)?se:ce)(Je,Ze,dt)),xe=(Je,Ze,dt)=>dt.onEnter.bind(Mt=>Mt(Je,Ze)),ke=(Je,Ze,dt)=>dt.onEscape.bind(Mt=>Mt(Je,Ze)),He=q([co(Lc([Zh,lo(ah)]),se),co(lo(ah),ce),co(Lc([up,lo(sd)]),xe)]),pt=q([co(lo(Ov),ke),co(lo(ah),ye)]);return qh(_,wc.init,He,pt,()=>Q.some(W))};var a1=Em(Gi("cyclic",me)),Fv=Em(Gi("cyclic",be));const dp=(u,_,T)=>(u_(u,T,kl()),Q.some(!0)),Vv=(u,_,T)=>sp(T)&&lo(gl)(_.event)?Q.none():dp(u,_,T),Tm=(u,_)=>Q.some(!0),BS=[ft("execute",Vv),ft("useSpace",!1),ft("useEnter",!0),ft("useControlEnter",!1),ft("useDown",!1)],FS=(u,_,T)=>T.execute(u,_,u.element),s1=(u,_,T,D)=>{const B=T.useSpace&&!sp(u.element)?gl:[],U=T.useEnter?sd:[],W=T.useDown?Cm:[],J=B.concat(U).concat(W);return[co(lo(J),FS)].concat(T.useControlEnter?[co(Lc([wm,lo(sd)]),FS)]:[])},lh=(u,_,T,D)=>T.useSpace&&!sp(u.element)?[co(lo(gl),Tm)]:[];var hN=qh(BS,wc.init,s1,lh,()=>Q.none());const KD=()=>{const u=ai();return Xs({readState:()=>u.get().map(B=>({numRows:String(B.numRows),numColumns:String(B.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(B,U)=>{u.set({numRows:B,numColumns:U})},getNumRows:()=>u.get().map(B=>B.numRows),getNumColumns:()=>u.get().map(B=>B.numColumns)})};var rT=Object.freeze({__proto__:null,flatgrid:KD,init:u=>u.state(u)});const _u=u=>(_,T,D,B)=>{const U=u(_.element);return ch(U,_,T,D,B)},VS=(u,_)=>{const T=J_(u,_);return _u(T)},zS=(u,_)=>{const T=J_(_,u);return _u(T)},zv=u=>(_,T,D,B)=>ch(u,_,T,D,B),ch=(u,_,T,D,B)=>D.focusManager.get(_).bind(W=>u(_.element,W,D,B)).map(W=>(D.focusManager.set(_,W),!0)),oT=zv,iT=zv,Am=zv,aT=u=>u.offsetWidth<=0&&u.offsetHeight<=0,cd=u=>!aT(u.dom),sT=(u,_)=>st(u,_).map(T=>({index:T,candidates:u})),lT=(u,_,T)=>{const D=W=>ni(W,_),B=ga(u,T),U=Rt(B,cd);return sT(U,D)},l1=(u,_)=>st(u,T=>ni(_,T)),US=(u,_,T,D)=>{const B=Math.floor(_/T),U=_%T;return D(B,U).bind(W=>{const J=W.row*T+W.column;return J>=0&&J<u.length?Q.some(u[J]):Q.none()})},c1=(u,_,T,D,B)=>US(u,_,D,(U,W)=>{const ne=U===T-1?u.length-U*D:D,se=rm(W,B,0,ne-1);return Q.some({row:U,column:se})}),HS=(u,_,T,D,B)=>US(u,_,D,(U,W)=>{const J=rm(U,B,0,T-1),se=J===T-1?u.length-J*D:D,ce=ul(W,0,se-1);return Q.some({row:J,column:ce})}),cT=(u,_,T,D)=>c1(u,_,T,D,1),XD=(u,_,T,D)=>c1(u,_,T,D,-1),JD=(u,_,T,D)=>HS(u,_,T,D,-1),QD=(u,_,T,D)=>HS(u,_,T,D,1),eP=[Ft("selector"),ft("execute",Vv),ll("onEscape"),ft("captureTab",!1),A_()],Uv=(u,_,T)=>{Ri(u.element,_.selector).each(D=>{_.focusManager.set(u,D)})},GS=(u,_)=>_.focusManager.get(u).bind(T=>Ec(T,_.selector)),hp=(u,_,T,D)=>GS(u,T).bind(B=>T.execute(u,_,B)),fp=u=>(_,T,D,B)=>lT(_,T,D.selector).bind(U=>u(U.candidates,U.index,B.getNumRows().getOr(D.initSize.numRows),B.getNumColumns().getOr(D.initSize.numColumns))),uT=(u,_,T)=>T.captureTab?Q.some(!0):Q.none(),dT=(u,_,T)=>T.onEscape(u,_),hT=fp(XD),WS=fp(cT),fT=fp(JD),pT=fp(QD),YS=q([co(lo(r1),VS(hT,WS)),co(lo(cp),zS(hT,WS)),co(lo(ld),oT(fT)),co(lo(Cm),iT(pT)),co(Lc([Zh,lo(ah)]),uT),co(Lc([up,lo(ah)]),uT),co(lo(gl.concat(sd)),hp)]),tP=q([co(lo(Ov),dT),co(lo(gl),Tm)]);var nP=qh(eP,KD,YS,tP,()=>Q.some(Uv));const jS=(u,_,T,D,B)=>{const U=J=>Ei(J)==="button"&&ns(J,"disabled")==="disabled",W=(J,ne,se)=>B(J,ne,D,0,se.length-1,se[ne],ce=>U(se[ce])?W(J,ce,se):Q.from(se[ce]));return lT(u,T,_).bind(J=>{const ne=J.index,se=J.candidates;return W(ne,ne,se)})},Kh=(u,_,T,D)=>jS(u,_,T,D,(B,U,W,J,ne,se,ce)=>{const ge=ul(U+W,J,ne);return ge===B?Q.from(se):ce(ge)}),Mm=(u,_,T,D)=>jS(u,_,T,D,(B,U,W,J,ne,se,ce)=>{const ge=rm(U,W,J,ne);return ge===B?Q.none():ce(ge)}),ZS=[Ft("selector"),ft("getInitial",Q.none),ft("execute",Vv),ll("onEscape"),ft("executeOnMove",!1),ft("allowVertical",!0),ft("allowHorizontal",!0),ft("cycles",!0)],mT=(u,_)=>_.focusManager.get(u).bind(T=>Ec(T,_.selector)),qS=(u,_,T)=>mT(u,T).bind(D=>T.execute(u,_,D)),pp=(u,_,T)=>{_.getInitial(u).orThunk(()=>Ri(u.element,_.selector)).each(D=>{_.focusManager.set(u,D)})},gT=(u,_,T)=>(T.cycles?Mm:Kh)(u,T.selector,_,-1),vT=(u,_,T)=>(T.cycles?Mm:Kh)(u,T.selector,_,1),Nl=u=>(_,T,D,B)=>u(_,T,D,B).bind(()=>D.executeOnMove?qS(_,T,D):Q.some(!0)),KS=(u,_,T)=>T.onEscape(u,_),rP=(u,_,T,D)=>{const B=[...T.allowHorizontal?r1:[]].concat(T.allowVertical?ld:[]),U=[...T.allowHorizontal?cp:[]].concat(T.allowVertical?Cm:[]);return[co(lo(B),Nl(VS(gT,vT))),co(lo(U),Nl(zS(gT,vT))),co(lo(sd),qS),co(lo(gl),qS)]},XS=q([co(lo(gl),Tm),co(lo(Ov),KS)]);var oP=qh(ZS,wc.init,rP,XS,()=>Q.some(pp));const u1=(u,_,T)=>Q.from(u[_]).bind(D=>Q.from(D[T]).map(B=>({rowIndex:_,columnIndex:T,cell:B}))),mp=(u,_,T,D)=>{const U=u[_].length,W=rm(T,D,0,U-1);return u1(u,_,W)},d1=(u,_,T,D)=>{const B=rm(T,D,0,u.length-1),U=u[B].length,W=ul(_,0,U-1);return u1(u,B,W)},yT=(u,_,T,D)=>{const U=u[_].length,W=ul(T+D,0,U-1);return u1(u,_,W)},h1=(u,_,T,D)=>{const B=ul(T+D,0,u.length-1),U=u[B].length,W=ul(_,0,U-1);return u1(u,B,W)},f1=(u,_,T)=>mp(u,_,T,1),JS=(u,_,T)=>mp(u,_,T,-1),iP=(u,_,T)=>d1(u,T,_,-1),aP=(u,_,T)=>d1(u,T,_,1),sP=(u,_,T)=>yT(u,_,T,-1),lP=(u,_,T)=>yT(u,_,T,1),cP=(u,_,T)=>h1(u,T,_,-1),uP=(u,_,T)=>h1(u,T,_,1),bT=[lu("selectors",[Ft("row"),Ft("cell")]),ft("cycles",!0),ft("previousSelector",Q.none),ft("execute",Vv)],Hv=(u,_,T)=>{_.previousSelector(u).orThunk(()=>{const B=_.selectors;return Ri(u.element,B.cell)}).each(B=>{_.focusManager.set(u,B)})},QS=(u,_,T)=>Mc(u.element).bind(D=>T.execute(u,_,D)),dP=(u,_)=>Xe(u,T=>ga(T,_.selectors.cell)),p1=(u,_)=>(T,D,B)=>{const U=B.cycles?u:_;return Ec(D,B.selectors.row).bind(W=>{const J=ga(W,B.selectors.cell);return l1(J,D).bind(ne=>{const se=ga(T,B.selectors.row);return l1(se,W).bind(ce=>{const ge=dP(se,B);return U(ge,ce,ne).map(ye=>ye.cell)})})})},_T=p1(JS,sP),Xh=p1(f1,lP),ST=p1(iP,cP),hP=p1(aP,uP),ex=q([co(lo(r1),VS(_T,Xh)),co(lo(cp),zS(_T,Xh)),co(lo(ld),oT(ST)),co(lo(Cm),iT(hP)),co(lo(gl.concat(sd)),QS)]),tx=q([co(lo(gl),Tm)]);var xT=qh(bT,wc.init,ex,tx,()=>Q.some(Hv));const CT=[Ft("selector"),ft("execute",Vv),ft("moveOnTab",!1)],nx=(u,_,T)=>T.focusManager.get(u).bind(D=>T.execute(u,_,D)),wT=(u,_,T)=>{Ri(u.element,_.selector).each(D=>{_.focusManager.set(u,D)})},rx=(u,_,T)=>Mm(u,T.selector,_,-1),ET=(u,_,T)=>Mm(u,T.selector,_,1),fP=(u,_,T,D)=>T.moveOnTab?Am(rx)(u,_,T,D):Q.none(),pP=(u,_,T,D)=>T.moveOnTab?Am(ET)(u,_,T,D):Q.none(),Gv=q([co(lo(ld),Am(rx)),co(lo(Cm),Am(ET)),co(Lc([Zh,lo(ah)]),fP),co(Lc([up,lo(ah)]),pP),co(lo(sd),nx),co(lo(gl),nx)]),mP=q([co(lo(gl),Tm)]);var gP=qh(CT,wc.init,Gv,mP,()=>Q.some(wT));const ox=[ll("onSpace"),ll("onEnter"),ll("onShiftEnter"),ll("onLeft"),ll("onRight"),ll("onTab"),ll("onShiftTab"),ll("onUp"),ll("onDown"),ll("onEscape"),ft("stopSpaceKeyup",!1),Ro("focusIn")],vP=(u,_,T)=>[co(lo(gl),T.onSpace),co(Lc([up,lo(sd)]),T.onEnter),co(Lc([Zh,lo(sd)]),T.onShiftEnter),co(Lc([Zh,lo(ah)]),T.onShiftTab),co(Lc([up,lo(ah)]),T.onTab),co(lo(ld),T.onUp),co(lo(Cm),T.onDown),co(lo(r1),T.onLeft),co(lo(cp),T.onRight),co(lo(gl),T.onSpace)],Wv=(u,_,T)=>[...T.stopSpaceKeyup?[co(lo(gl),Tm)]:[],co(lo(Ov),T.onEscape)];var Yv=qh(ox,wc.init,vP,Wv,u=>u.focusIn);const yP=a1.schema(),bP=Fv.schema(),ds=oP.schema(),TT=nP.schema(),_P=xT.schema(),AT=hN.schema(),SP=gP.schema(),xP=Yv.schema();var m1=Object.freeze({__proto__:null,acyclic:yP,cyclic:bP,flow:ds,flatgrid:TT,matrix:_P,execution:AT,menu:SP,special:xP});const CP=u=>Dn(u,"setGridSize"),Xn=V_({branchKey:"mode",branches:m1,name:"keying",active:{events:(u,_)=>u.handler.toEvents(u,_)},apis:{focusIn:(u,_,T)=>{_.sendFocusIn(_).fold(()=>{u.getSystem().triggerFocus(u.element,u.element)},D=>{D(u,_,T)})},setGridSize:(u,_,T,D,B)=>{CP(T)?T.setGridSize(D,B):console.error("Layout does not support setGridSize")}},state:rT}),Va=(u,_)=>{wn(()=>{hD(u,_,()=>Xe(_,u.getSystem().build))},u.element)},MT=(u,_)=>{wn(()=>{fD(u,_,()=>aN(u.element,_,u.getSystem().buildOrPatch))},u.element)},kT=(u,_,T,D)=>{rp(_);const B=Sk(u.element,T,D,u.getSystem().buildOrPatch);zy(u,B),u.syncComponents()},g1=(u,_,T)=>{const D=u.getSystem().build(T);Cv(u,D,_)},wP=(u,_,T,D)=>{Jd(_),g1(u,(B,U)=>Ya(B,U,T),D)},DT=(u,_,T,D)=>(_.reuseDom?MT:Va)(u,D),ix=(u,_,T,D)=>{g1(u,Xl,D)},EP=(u,_,T,D)=>{g1(u,nw,D)},TP=(u,_,T,D)=>{const B=y1(u);$e(B,W=>ni(D.element,W.element)).each(Jd)},y1=(u,_)=>u.components(),PT=(u,_,T,D,B)=>{const U=y1(u);return Q.from(U[D]).map(W=>(B.fold(()=>Jd(W),J=>{(_.reuseDom?kT:wP)(u,W,D,J)}),W))};var RT=Object.freeze({__proto__:null,append:ix,prepend:EP,remove:TP,replaceAt:PT,replaceBy:(u,_,T,D,B)=>{const U=y1(u);return st(U,D).bind(W=>PT(u,_,T,W,B))},set:DT,contents:y1});const wr=Ba({fields:[xa("reuseDom",!0)],name:"replacing",apis:RT}),IT=(u,_)=>{const T=ui(_);return Ba({fields:[Ft("enabled")],name:u,active:{events:q(T)}})},Dr=(u,_)=>{const T=IT(u,_);return{key:u,value:{config:{},me:T,configAsRaw:q({}),initialConfig:{},state:wc}}},b1=(u,_)=>{_.ignore||(Il(u.element),_.onFocus(u))};var DP=Object.freeze({__proto__:null,focus:b1,blur:(u,_)=>{_.ignore||z_(u.element)},isFocused:u=>av(u.element)}),gp=Object.freeze({__proto__:null,exhibit:(u,_)=>{const T=_.ignore?{}:{attributes:{tabindex:"-1"}};return Ql(T)},events:u=>ui([Vt(Ih(),(_,T)=>{b1(_,u),T.stop()})].concat(u.stopMousedown?[Vt(oi(),(_,T)=>{T.event.prevent()})]:[]))}),Jh=[so("onFocus"),ft("stopMousedown",!1),ft("ignore",!1)];const dr=Ba({fields:Jh,name:"focusing",active:gp,apis:DP}),ax=u=>({init:()=>{const T=sr(u);return{get:()=>T.get(),set:J=>T.set(J),clear:()=>T.set(u),readState:()=>T.get()}}}),_1=(u,_,T)=>{const D=_.aria;D.update(u,D,T.get())},LT=(u,_,T)=>{_.toggleClass.each(D=>{T.get()?Di(u.element,D):hi(u.element,D)})},jv=(u,_,T,D)=>{const B=T.get();T.set(D),LT(u,_,T),_1(u,_,T),B!==D&&_.onToggled(u,D)},NT=(u,_,T)=>{jv(u,_,T,!T.get())},PP=(u,_,T)=>{jv(u,_,T,!0)},OT=(u,_,T)=>{jv(u,_,T,!1)},sx=(u,_,T)=>T.get(),S1=(u,_,T)=>{jv(u,_,T,_.selected)};var RP=Object.freeze({__proto__:null,onLoad:S1,toggle:NT,isOn:sx,on:PP,off:OT,set:jv}),BT=Object.freeze({__proto__:null,exhibit:()=>Ql({}),events:(u,_)=>{const T=B_(u,_,NT),D=Cy(u,_,S1);return ui(et([u.toggleOnExecute?[T]:[],[D]]))}});const $P=(u,_,T)=>{bn(u.element,"aria-pressed",T),_.syncWithExpanded&&km(u,_,T)},LP=(u,_,T)=>{bn(u.element,"aria-selected",T)},Zv=(u,_,T)=>{bn(u.element,"aria-checked",T)},km=(u,_,T)=>{bn(u.element,"aria-expanded",T)};var FT=[ft("selected",!1),Ro("toggleClass"),ft("toggleOnExecute",!0),so("onToggled"),ol("aria",{mode:"none"},Eo("mode",{pressed:[ft("syncWithExpanded",!1),Go("update",$P)],checked:[Go("update",Zv)],expanded:[Go("update",km)],selected:[Go("update",LP)],none:[Go("update",V)]}))];const Rr=Ba({fields:FT,name:"toggling",active:BT,apis:RP,state:ax(!1)}),ud=()=>{const u=(_,T)=>{T.stop(),zd(_)};return[Vt(Rh(),u),Vt(cu(),u),Ud(Fd()),Ud(oi())]},Su=u=>{const _=T=>uu((D,B)=>{T(D),B.stop()});return ui(et([u.map(_).toArray(),ud()]))},uh="alloy.item-hover",VT="alloy.item-focus",lx="alloy.item-toggled",dd=u=>{(Mc(u.element).isNone()||dr.isFocused(u))&&(dr.isFocused(u)||dr.focus(u),tr(u,uh,{item:u}))},x1=u=>{tr(u,VT,{item:u})},NP=(u,_)=>{tr(u,lx,{item:u,state:_})},cx=q(uh),zT=q(VT),C1=q(lx),ux=u=>u.toggling.map(_=>_.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),UT=u=>({aria:{mode:"checked"},...Wr(u,(_,T)=>T!=="exclusive"),onToggled:(_,T)=>{$(u.onToggled)&&u.onToggled(_,T),NP(_,T)}}),HT=u=>({dom:u.dom,domModification:{...u.domModification,attributes:{role:ux(u),...u.domModification.attributes,"aria-haspopup":u.hasSubmenu,...u.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ic.augment(u.itemBehaviours,[u.toggling.fold(Rr.revoke,_=>Rr.config(UT(_))),dr.config({ignore:u.ignoreFocus,stopMousedown:u.ignoreFocus,onFocus:_=>{x1(_)}}),Xn.config({mode:"execution"}),Sn.config({store:{mode:"memory",initialValue:u.data}}),Dr("item-type-events",[...ud(),Vt(Vd(),dd),Vt(Ai(),dr.focus)])]),components:u.components,eventOrder:u.eventOrder}),OP=[Ft("data"),Ft("components"),Ft("dom"),ft("hasSubmenu",!1),Ro("toggling"),Ic.field("itemBehaviours",[Rr,dr,Xn,Sn]),ft("ignoreFocus",!1),ft("domModification",{}),Go("builder",HT),ft("eventOrder",{})],BP=u=>({dom:u.dom,components:u.components,events:ui([uk(Ai())])}),w1=[Ft("dom"),Ft("components"),Go("builder",BP)],Dm=q("item-widget"),vp=q([cs({name:"widget",overrides:u=>({behaviours:sn([Sn.config({store:{mode:"manual",getValue:_=>u.data,setValue:V}})])})})]),FP=u=>{const _=As(Dm(),u,vp()),T=Qy(Dm(),u,_.internals()),D=U=>Xo(U,u,"widget").map(W=>(Xn.focusIn(W),W)),B=(U,W)=>sp(W.event.target)?Q.none():(()=>(u.autofocus&&W.setSource(U.element),Q.none()))();return{dom:u.dom,components:T,domModification:u.domModification,events:ui([uu((U,W)=>{D(U).each(J=>{W.stop()})}),Vt(Vd(),dd),Vt(Ai(),(U,W)=>{u.autofocus?D(U):dr.focus(U)})]),behaviours:Ic.augment(u.widgetBehaviours,[Sn.config({store:{mode:"memory",initialValue:u.data}}),dr.config({ignore:u.ignoreFocus,onFocus:U=>{x1(U)}}),Xn.config({mode:"special",focusIn:u.autofocus?U=>{D(U)}:Hw(),onLeft:B,onRight:B,onEscape:(U,W)=>!dr.isFocused(U)&&!u.autofocus?(dr.focus(U),Q.some(!0)):(u.autofocus&&W.setSource(U.element),Q.none())})])}},VP=[Ft("uid"),Ft("data"),Ft("components"),Ft("dom"),ft("autofocus",!1),ft("ignoreFocus",!1),Ic.field("widgetBehaviours",[Sn,dr,Xn]),ft("domModification",{}),PS(vp()),Go("builder",FP)],GT=Eo("type",{widget:VP,item:OP,separator:w1}),WT=(u,_)=>({mode:"flatgrid",selector:"."+u.markers.item,initSize:{numColumns:_.initSize.numColumns,numRows:_.initSize.numRows},focusManager:u.focusManager}),YT=(u,_)=>({mode:"matrix",selectors:{row:_.rowSelector,cell:"."+u.markers.item},previousSelector:_.previousSelector,focusManager:u.focusManager}),jT=(u,_)=>({mode:"menu",selector:"."+u.markers.item,moveOnTab:_.moveOnTab,focusManager:u.focusManager}),ZT=q([$v({factory:{sketch:u=>{const _=Bs("menu.spec item",GT,u);return _.builder(_)}},name:"items",unit:"item",defaults:(u,_)=>yn(_,"uid")?_:{..._,uid:Hd("item")},overrides:(u,_)=>({type:_.type,ignoreFocus:u.fakeFocus,domModification:{classes:[u.markers.item]}})})]),dx=q([Ft("value"),Ft("items"),Ft("dom"),Ft("components"),ft("eventOrder",{}),ia("menuBehaviours",[To,Sn,eo,Xn]),ol("movement",{mode:"menu",moveOnTab:!0},Eo("mode",{grid:[A_(),Go("config",WT)],matrix:[Go("config",YT),Ft("rowSelector"),ft("previousSelector",Q.none)],menu:[ft("moveOnTab",!0),Go("config",jT)]})),T_(),ft("fakeFocus",!1),ft("focusManager",i1()),so("onHighlight"),so("onDehighlight")]),Pm=q("alloy.menu-focus"),zP=(u,_)=>{const T=ga(u.element,'[role="menuitemradio"][aria-checked="true"]');Be(T,D=>{ni(D,_.element)||u.getSystem().getByDom(D).each(B=>{Rr.off(B)})})},UP=(u,_,T,D)=>({uid:u.uid,dom:u.dom,markers:u.markers,behaviours:aa(u.menuBehaviours,[To.config({highlightClass:u.markers.selectedItem,itemClass:u.markers.item,onHighlight:u.onHighlight,onDehighlight:u.onDehighlight}),Sn.config({store:{mode:"memory",initialValue:u.value}}),eo.config({find:Q.some}),Xn.config(u.movement.config(u,u.movement))]),events:ui([Vt(zT(),(B,U)=>{const W=U.event;B.getSystem().getByDom(W.target).each(J=>{To.highlight(B,J),U.stop(),tr(B,Pm(),{menu:B,item:J})})}),Vt(cx(),(B,U)=>{const W=U.event.item;To.highlight(B,W)}),Vt(C1(),(B,U)=>{const{item:W,state:J}=U.event;J&&ns(W.element,"role")==="menuitemradio"&&zP(B,W)})]),components:_,eventOrder:u.eventOrder,domModification:{attributes:{role:"menu"}}}),yp=us({name:"Menu",configFields:dx(),partFields:ZT(),factory:UP}),hx=u=>yo(u,(_,T)=>({k:_,v:T})),fx=(u,_,T,D)=>Ue(T,D).bind(B=>Ue(u,B).bind(U=>{const W=fx(u,_,T,U);return Q.some([U].concat(W))})).getOr([]),HP=(u,_)=>{const T={};kn(u,(W,J)=>{Be(W,ne=>{T[ne]=J})});const D=_,B=hx(_),U=Zn(B,(W,J)=>[J].concat(fx(T,D,B,J)));return Zn(T,W=>Ue(U,W).getOr([W]))},qT=()=>{const u=sr({}),_=sr({}),T=sr({}),D=ai(),B=sr({}),U=()=>{u.set({}),_.set({}),T.set({}),D.clear()},W=()=>D.get().isNone(),J=(nn,$t)=>{_.set({..._.get(),[nn]:{type:"prepared",menu:$t}})},ne=(nn,$t,un,mn)=>{D.set(nn),u.set(un),_.set($t),B.set(mn);const Br=HP(mn,un);T.set(Br)},se=nn=>qn(u.get(),($t,un)=>$t===nn),ce=(nn,$t,un)=>He(nn).bind(mn=>se(nn).bind(Br=>$t(Br).map(An=>({triggeredMenu:mn,triggeringItem:An,triggeringPath:un})))),ge=(nn,$t)=>{const un=Rt(Je(nn).toArray(),mn=>He(mn).isSome());return Ue(T.get(),nn).bind(mn=>{const Br=Gt(un.concat(mn)),An=Fe(Br,(yr,mr)=>ce(yr,$t,Br.slice(0,mr+1)).fold(()=>Xt(D.get(),yr)?[]:[Q.none()],$o=>[Q.some($o)]));return qo(An)})},ye=nn=>Ue(u.get(),nn).map($t=>{const un=Ue(T.get(),nn).getOr([]);return[$t].concat(un)}),xe=nn=>Ue(T.get(),nn).bind($t=>$t.length>1?Q.some($t.slice(1)):Q.none()),ke=nn=>Ue(T.get(),nn),He=nn=>pt(nn).bind(Rm),pt=nn=>Ue(_.get(),nn),Je=nn=>Ue(u.get(),nn);return{setMenuBuilt:J,setContents:ne,expand:ye,refresh:ke,collapse:xe,lookupMenu:pt,lookupItem:Je,otherMenus:nn=>{const $t=B.get();return mt(xn($t),nn)},getPrimary:()=>D.get().bind(He),getMenus:()=>_.get(),clear:U,isClear:W,getTriggeringPath:ge}},Rm=u=>u.type==="prepared"?Q.some(u.menu):Q.none(),KT={init:qT,extractPreparedMenu:Rm},Im=In("tiered-menu-item-highlight"),E1=In("tiered-menu-item-dehighlight");var Ms;(function(u){u[u.HighlightMenuAndItem=0]="HighlightMenuAndItem",u[u.HighlightJustMenu=1]="HighlightJustMenu",u[u.HighlightNone=2]="HighlightNone"})(Ms||(Ms={}));const XT=(u,_)=>{const T=ai(),D=(pn,On,br)=>Zn(br,(Sr,ur)=>{const Mr=()=>yp.sketch({...Sr,value:ur,markers:u.markers,fakeFocus:u.fakeFocus,onHighlight:(ei,vo)=>{tr(ei,Im,{menuComp:ei,itemComp:vo})},onDehighlight:(ei,vo)=>{tr(ei,E1,{menuComp:ei,itemComp:vo})},focusManager:u.fakeFocus?qD():i1()});return ur===On?{type:"prepared",menu:pn.getSystem().build(Mr())}:{type:"notbuilt",nbMenu:Mr}}),B=KT.init(),U=pn=>{const On=D(pn,u.data.primary,u.data.menus),br=ne();return B.setContents(u.data.primary,On,u.data.expansions,br),B.getPrimary()},W=pn=>Sn.getValue(pn).value,J=(pn,On,br)=>Wt(On,Sr=>{if(!Sr.getSystem().isConnected())return Q.none();const ur=To.getCandidates(Sr);return $e(ur,Mr=>W(Mr)===br)}),ne=pn=>Zn(u.data.menus,(On,br)=>Fe(On.items,Sr=>Sr.type==="separator"?[]:[Sr.data.value])),se=To.highlight,ce=(pn,On)=>{se(pn,On),To.getHighlighted(On).orThunk(()=>To.getFirst(On)).each(br=>{u.fakeFocus?To.highlight(On,br):u_(pn,br.element,Ai())})},ge=(pn,On)=>Yr(Xe(On,br=>pn.lookupMenu(br).bind(Sr=>Sr.type==="prepared"?Q.some(Sr.menu):Q.none()))),ye=(pn,On,br)=>{const Sr=ge(On,On.otherMenus(br));Be(Sr,ur=>{Vs(ur.element,[u.markers.backgroundMenu]),u.stayInDom||wr.remove(pn,ur)})},xe=pn=>T.get().getOrThunk(()=>{const On={},br=ga(pn.element,`.${u.markers.item}`),Sr=Rt(br,ur=>ns(ur,"aria-haspopup")==="true");return Be(Sr,ur=>{pn.getSystem().getByDom(ur).each(Mr=>{const ei=W(Mr);On[ei]=Mr})}),T.set(On),On}),ke=(pn,On)=>{const br=xe(pn);kn(br,(Sr,ur)=>{const Mr=Ke(On,ur);bn(Sr.element,"aria-expanded",Mr)})},He=(pn,On,br)=>Q.from(br[0]).bind(Sr=>On.lookupMenu(Sr).bind(ur=>{if(ur.type==="notbuilt")return Q.none();{const Mr=ur.menu,ei=ge(On,br.slice(1));return Be(ei,vo=>{Di(vo.element,u.markers.backgroundMenu)}),ba(Mr.element)||wr.append(pn,Pl(Mr)),Vs(Mr.element,[u.markers.backgroundMenu]),ce(pn,Mr),ye(pn,On,br),Q.some(Mr)}}));let pt;(function(pn){pn[pn.HighlightSubmenu=0]="HighlightSubmenu",pn[pn.HighlightParent=1]="HighlightParent"})(pt||(pt={}));const Je=(pn,On,br)=>{if(br.type==="notbuilt"){const Sr=pn.getSystem().build(br.nbMenu());return B.setMenuBuilt(On,Sr),Sr}else return br.menu},Ze=(pn,On,br=pt.HighlightSubmenu)=>{if(On.hasConfigured(or)&&or.isDisabled(On))return Q.some(On);{const Sr=W(On);return B.expand(Sr).bind(ur=>(ke(pn,ur),Q.from(ur[0]).bind(Mr=>B.lookupMenu(Mr).bind(ei=>{const vo=Je(pn,Mr,ei);return ba(vo.element)||wr.append(pn,Pl(vo)),u.onOpenSubmenu(pn,On,vo,Gt(ur)),br===pt.HighlightSubmenu?(To.highlightFirst(vo),He(pn,B,ur)):(To.dehighlightAll(vo),Q.some(On))}))))}},dt=(pn,On)=>{const br=W(On);return B.collapse(br).bind(Sr=>(ke(pn,Sr),He(pn,B,Sr).map(ur=>(u.onCollapseMenu(pn,On,ur),ur))))},Mt=(pn,On)=>{const br=W(On);return B.refresh(br).bind(Sr=>(ke(pn,Sr),He(pn,B,Sr)))},nn=(pn,On)=>sp(On.element)?Q.none():Ze(pn,On,pt.HighlightSubmenu),$t=(pn,On)=>sp(On.element)?Q.none():dt(pn,On),un=(pn,On)=>dt(pn,On).orThunk(()=>u.onEscape(pn,On).map(()=>pn)),mn=pn=>(On,br)=>Ec(br.getSource(),`.${u.markers.item}`).bind(Sr=>On.getSystem().getByDom(Sr).toOptional().bind(ur=>pn(On,ur).map(be))),Br=ui([Vt(Pm(),(pn,On)=>{const br=On.event.item;B.lookupItem(W(br)).each(()=>{const Sr=On.event.menu;To.highlight(pn,Sr);const ur=W(On.event.item);B.refresh(ur).each(Mr=>ye(pn,B,Mr))})}),uu((pn,On)=>{const br=On.event.target;pn.getSystem().getByDom(br).each(Sr=>{W(Sr).indexOf("collapse-item")===0&&dt(pn,Sr),Ze(pn,Sr,pt.HighlightSubmenu).fold(()=>{u.onExecute(pn,Sr)},V)})}),ii((pn,On)=>{U(pn).each(br=>{wr.append(pn,Pl(br)),u.onOpenMenu(pn,br),u.highlightOnOpen===Ms.HighlightMenuAndItem?ce(pn,br):u.highlightOnOpen===Ms.HighlightJustMenu&&se(pn,br)})}),Vt(Im,(pn,On)=>{u.onHighlightItem(pn,On.event.menuComp,On.event.itemComp)}),Vt(E1,(pn,On)=>{u.onDehighlightItem(pn,On.event.menuComp,On.event.itemComp)}),...u.navigateOnHover?[Vt(cx(),(pn,On)=>{const br=On.event.item;Mt(pn,br),Ze(pn,br,pt.HighlightParent),u.onHover(pn,br)})]:[]]),An=pn=>To.getHighlighted(pn).bind(To.getHighlighted),yr=pn=>{An(pn).each(On=>{dt(pn,On)})},mr=pn=>{B.getPrimary().each(On=>{ce(pn,On)})},$o=pn=>Q.from(pn.components()[0]).filter(On=>ns(On.element,"role")==="menu"),mo={collapseMenu:yr,highlightPrimary:mr,repositionMenus:pn=>{B.getPrimary().bind(br=>An(pn).bind(Sr=>{const ur=W(Sr),Mr=Oo(B.getMenus()),ei=Yr(Xe(Mr,KT.extractPreparedMenu));return B.getTriggeringPath(ur,vo=>J(pn,ei,vo))}).map(Sr=>({primary:br,triggeringPath:Sr}))).fold(()=>{$o(pn).each(br=>{u.onRepositionMenu(pn,br,[])})},({primary:br,triggeringPath:Sr})=>{u.onRepositionMenu(pn,br,Sr)})}};return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:aa(u.tmenuBehaviours,[Xn.config({mode:"special",onRight:mn(nn),onLeft:mn($t),onEscape:mn(un),focusIn:(pn,On)=>{B.getPrimary().each(br=>{u_(pn,br.element,Ai())})}}),To.config({highlightClass:u.markers.selectedMenu,itemClass:u.markers.menu}),eo.config({find:pn=>To.getHighlighted(pn)}),wr.config({})]),eventOrder:u.eventOrder,apis:mo,events:Br}},JT=q("collapse-item"),QT=(u,_,T)=>({primary:u,menus:_,expansions:T}),eA=(u,_)=>({primary:u,menus:qs(u,_),expansions:{}}),GP=u=>({value:In(JT()),meta:{text:u}}),vl=ml({name:"TieredMenu",configFields:[Qg("onExecute"),Qg("onEscape"),Tc("onOpenMenu"),Tc("onOpenSubmenu"),so("onRepositionMenu"),so("onCollapseMenu"),ft("highlightOnOpen",Ms.HighlightMenuAndItem),lu("data",[Ft("primary"),Ft("menus"),Ft("expansions")]),ft("fakeFocus",!1),so("onHighlightItem"),so("onDehighlightItem"),so("onHover"),py(),Ft("dom"),ft("navigateOnHover",!0),ft("stayInDom",!1),ia("tmenuBehaviours",[Xn,To,eo,wr]),ft("eventOrder",{})],apis:{collapseMenu:(u,_)=>{u.collapseMenu(_)},highlightPrimary:(u,_)=>{u.highlightPrimary(_)},repositionMenus:(u,_)=>{u.repositionMenus(_)}},factory:XT,extraApis:{tieredData:QT,singleData:eA,collapseItem:GP}}),ef=(u,_,T,D,B)=>{const U=()=>u.lazySink(_),W=D.type==="horizontal"?{layouts:{onLtr:()=>iv(),onRtl:()=>Sy()}}:{},J=se=>se.length===2,ne=se=>J(se)?W:{};return vl.sketch({dom:{tag:"div"},data:D.data,markers:D.menu.markers,highlightOnOpen:D.menu.highlightOnOpen,fakeFocus:D.menu.fakeFocus,onEscape:()=>(io.close(_),u.onEscape.map(se=>se(_)),Q.some(!0)),onExecute:()=>Q.some(!0),onOpenMenu:(se,ce)=>{Ja.positionWithinBounds(U().getOrDie(),ce,T,B())},onOpenSubmenu:(se,ce,ge,ye)=>{const xe=U().getOrDie();Ja.position(xe,ge,{anchor:{type:"submenu",item:ce,...ne(ye)}})},onRepositionMenu:(se,ce,ge)=>{const ye=U().getOrDie();Ja.positionWithinBounds(ye,ce,T,B()),Be(ge,xe=>{const ke=ne(xe.triggeringPath);Ja.position(ye,xe.triggeredMenu,{anchor:{type:"submenu",item:xe.triggeringItem,...ke}})})}})},WP=(u,_)=>{const T=(ye,xe)=>u.getRelated(ye).exists(He=>Wd(He,xe)),D=(ye,xe)=>{io.setContent(ye,xe)},B=(ye,xe,ke)=>{const He=Q.none;U(ye,xe,ke,He)},U=(ye,xe,ke,He)=>{const pt=u.lazySink(ye).getOrDie();io.openWhileCloaked(ye,xe,()=>Ja.positionWithinBounds(pt,ye,ke,He())),Sn.setValue(ye,Q.some({mode:"position",config:ke,getBounds:He}))},W=(ye,xe,ke)=>{J(ye,xe,ke,Q.none)},J=(ye,xe,ke,He)=>{const pt=ef(u,ye,xe,ke,He);io.open(ye,pt),Sn.setValue(ye,Q.some({mode:"menu",menu:pt}))},ne=ye=>{io.isOpen(ye)&&(Sn.setValue(ye,Q.none()),io.close(ye))},se=ye=>io.getState(ye),ce=ye=>{io.isOpen(ye)&&Sn.getValue(ye).each(xe=>{switch(xe.mode){case"menu":io.getState(ye).each(vl.repositionMenus);break;case"position":const ke=u.lazySink(ye).getOrDie();Ja.positionWithinBounds(ke,ye,xe.config,xe.getBounds());break}})},ge={setContent:D,showAt:B,showWithinBounds:U,showMenuAt:W,showMenuWithinBounds:J,hide:ne,getContent:se,reposition:ce,isOpen:io.isOpen};return{uid:u.uid,dom:u.dom,behaviours:aa(u.inlineBehaviours,[io.config({isPartOf:(ye,xe,ke)=>Wd(xe,ke)||T(ye,ke),getAttachPoint:ye=>u.lazySink(ye).getOrDie(),onOpen:ye=>{u.onShow(ye)},onClose:ye=>{u.onHide(ye)}}),Sn.config({store:{mode:"memory",initialValue:Q.none()}}),dl.config({channels:{...Wy({isExtraPart:_.isExtraPart,...u.fireDismissalEventInstead.map(ye=>({fireEventInstead:{event:ye.event}})).getOr({})}),...op({...u.fireRepositionEventInstead.map(ye=>({fireEventInstead:{event:ye.event}})).getOr({}),doReposition:ce})}})]),eventOrder:u.eventOrder,apis:ge}},fi=ml({name:"InlineView",configFields:[Ft("lazySink"),so("onShow"),so("onHide"),kf("onEscape"),ia("inlineBehaviours",[io,Sn,dl]),ys("fireDismissalEventInstead",[ft("event",Zu())]),ys("fireRepositionEventInstead",[ft("event",c_())]),ft("getRelated",Q.none),ft("isExtraPart",me),ft("eventOrder",Q.none)],factory:WP,apis:{showAt:(u,_,T,D)=>{u.showAt(_,T,D)},showWithinBounds:(u,_,T,D,B)=>{u.showWithinBounds(_,T,D,B)},showMenuAt:(u,_,T,D)=>{u.showMenuAt(_,T,D)},showMenuWithinBounds:(u,_,T,D,B)=>{u.showMenuWithinBounds(_,T,D,B)},hide:(u,_)=>{u.hide(_)},isOpen:(u,_)=>u.isOpen(_),getContent:(u,_)=>u.getContent(_),setContent:(u,_,T)=>{u.setContent(_,T)},reposition:(u,_)=>{u.reposition(_)}}});var tf=tinymce.util.Tools.resolve("tinymce.util.Delay");const sa=ml({name:"Button",factory:u=>{const _=Su(u.action),T=u.dom.tag,D=U=>Ue(u.dom,"attributes").bind(W=>Ue(W,U)),B=()=>{if(T==="button"){const U=D("type").getOr("button"),W=D("role").map(J=>({role:J})).getOr({});return{type:U,...W}}else return{role:u.role.getOr(D("role").getOr("button"))}};return{uid:u.uid,dom:u.dom,components:u.components,events:_,behaviours:Ic.augment(u.buttonBehaviours,[dr.config({}),Xn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:B()},eventOrder:u.eventOrder}},configFields:[ft("uid",void 0),Ft("dom"),ft("components",[]),Ic.field("buttonBehaviours",[dr,Xn]),Ro("action"),Ro("role"),ft("eventOrder",{})]}),tA=u=>{const _=u.dom.attributes!==void 0?u.dom.attributes:[];return Se(_,(T,D)=>D.name==="class"?T:{...T,[D.name]:D.value},{})},nA=u=>Array.prototype.slice.call(u.dom.classList,0),hd=u=>{const _=Nt.fromHtml(u),T=Xc(_),D=tA(_),B=nA(_),U=T.length===0?{}:{innerHtml:p_(_)};return{tag:Ei(_),classes:B,attributes:D,...U}},Po=u=>{const _=DD(u)&&Dn(u,"uid")?u.uid:Hd("memento");return{get:U=>U.getSystem().getByUid(_).getOrDie(),getOpt:U=>U.getSystem().getByUid(_).toOptional(),asSpec:()=>({...u,uid:_})}},{entries:v,setPrototypeOf:E,isFrozen:P,getPrototypeOf:G,getOwnPropertyDescriptor:H}=Object;let{freeze:N,seal:ee,create:le}=Object,{apply:Ce,construct:pe}=typeof Reflect<"u"&&Reflect;Ce||(Ce=function(_,T,D){return _.apply(T,D)}),N||(N=function(_){return _}),ee||(ee=function(_){return _}),pe||(pe=function(_,T){return new _(...T)});const we=It(Array.prototype.forEach),We=It(Array.prototype.pop),ut=It(Array.prototype.push),ct=It(String.prototype.toLowerCase),ot=It(String.prototype.toString),Oe=It(String.prototype.match),wt=It(String.prototype.replace),Er=It(String.prototype.indexOf),ir=It(String.prototype.trim),Wn=It(RegExp.prototype.test),jt=Cn(TypeError);function It(u){return function(_){for(var T=arguments.length,D=new Array(T>1?T-1:0),B=1;B<T;B++)D[B-1]=arguments[B];return Ce(u,_,D)}}function Cn(u){return function(){for(var _=arguments.length,T=new Array(_),D=0;D<_;D++)T[D]=arguments[D];return pe(u,T)}}function Pt(u,_,T){var D;T=(D=T)!==null&&D!==void 0?D:ct,E&&E(u,null);let B=_.length;for(;B--;){let U=_[B];if(typeof U=="string"){const W=T(U);W!==U&&(P(_)||(_[B]=W),U=W)}u[U]=!0}return u}function Pr(u){const _=le(null);for(const[T,D]of v(u))_[T]=D;return _}function cr(u,_){for(;u!==null;){const D=H(u,_);if(D){if(D.get)return It(D.get);if(typeof D.value=="function")return It(D.value)}u=G(u)}function T(D){return console.warn("fallback value for",D),null}return T}const ar=N(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),uo=N(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Tr=N(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ln=N(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yn=N(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),nr=N(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Hr=N(["#text"]),rr=N(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ao=N(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xr=N(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ir=N(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ci=ee(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Io=ee(/<%[\w\W]*|[\w\W]*%>/gm),Ji=ee(/\${[\w\W]*}/gm),Gs=ee(/^data-[\-\w.\u00B7-\uFFFF]/),Ii=ee(/^aria-[\-\w]+$/),za=ee(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Nc=ee(/^(?:\w+script|data):/i),yl=ee(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zn=ee(/^html$/i);var Zr=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ci,ERB_EXPR:Io,TMPLIT_EXPR:Ji,DATA_ATTR:Gs,ARIA_ATTR:Ii,IS_ALLOWED_URI:za,IS_SCRIPT_OR_DATA:Nc,ATTR_WHITESPACE:yl,DOCTYPE_NAME:zn});const pi=()=>typeof window>"u"?null:window,va=function(_,T){if(typeof _!="object"||typeof _.createPolicy!="function")return null;let D=null;const B="data-tt-policy-suffix";T&&T.hasAttribute(B)&&(D=T.getAttribute(B));const U="dompurify"+(D?"#"+D:"");try{return _.createPolicy(U,{createHTML(W){return W},createScriptURL(W){return W}})}catch{return console.warn("TrustedTypes policy "+U+" could not be created."),null}};function je(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pi();const _=ro=>je(ro);if(_.version="3.0.5",_.removed=[],!u||!u.document||u.document.nodeType!==9)return _.isSupported=!1,_;const T=u.document,D=T.currentScript;let{document:B}=u;const{DocumentFragment:U,HTMLTemplateElement:W,Node:J,Element:ne,NodeFilter:se,NamedNodeMap:ce=u.NamedNodeMap||u.MozNamedAttrMap,HTMLFormElement:ge,DOMParser:ye,trustedTypes:xe}=u,ke=ne.prototype,He=cr(ke,"cloneNode"),pt=cr(ke,"nextSibling"),Je=cr(ke,"childNodes"),Ze=cr(ke,"parentNode");if(typeof W=="function"){const ro=B.createElement("template");ro.content&&ro.content.ownerDocument&&(B=ro.content.ownerDocument)}let dt,Mt="";const{implementation:nn,createNodeIterator:$t,createDocumentFragment:un,getElementsByTagName:mn}=B,{importNode:Br}=T;let An={};_.isSupported=typeof v=="function"&&typeof Ze=="function"&&nn&&nn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:yr,ERB_EXPR:mr,TMPLIT_EXPR:$o,DATA_ATTR:lr,ARIA_ATTR:mo,IS_SCRIPT_OR_DATA:pn,ATTR_WHITESPACE:On}=Zr;let{IS_ALLOWED_URI:br}=Zr,Sr=null;const ur=Pt({},[...ar,...uo,...Tr,...Yn,...Hr]);let Mr=null;const ei=Pt({},[...rr,...ao,...Xr,...Ir]);let vo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),es=null,Gl=null,$u=!0,Ad=!0,ag=!1,E0=!0,Sh=!1,Dp=!1,IC=!1,KL=!1,Ab=!1,RM=!1,T5=!1,Mj=!0,kj=!1;const Qj="user-content-";let fY=!0,XL=!1,IM={},$M=null;const Dj=Pt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Pj=null;const Rj=Pt({},["audio","video","img","source","image","track"]);let pY=null;const Ij=Pt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),A5="http://www.w3.org/1998/Math/MathML",M5="http://www.w3.org/2000/svg",T0="http://www.w3.org/1999/xhtml";let LM=T0,mY=!1,gY=null;const eZ=Pt({},[A5,M5,T0],ot);let $C;const tZ=["application/xhtml+xml","text/html"],nZ="text/html";let Wl,NM=null;const rZ=B.createElement("form"),$j=function(Et){return Et instanceof RegExp||Et instanceof Function},vY=function(Et){if(!(NM&&NM===Et)){if((!Et||typeof Et!="object")&&(Et={}),Et=Pr(Et),$C=tZ.indexOf(Et.PARSER_MEDIA_TYPE)===-1?$C=nZ:$C=Et.PARSER_MEDIA_TYPE,Wl=$C==="application/xhtml+xml"?ot:ct,Sr="ALLOWED_TAGS"in Et?Pt({},Et.ALLOWED_TAGS,Wl):ur,Mr="ALLOWED_ATTR"in Et?Pt({},Et.ALLOWED_ATTR,Wl):ei,gY="ALLOWED_NAMESPACES"in Et?Pt({},Et.ALLOWED_NAMESPACES,ot):eZ,pY="ADD_URI_SAFE_ATTR"in Et?Pt(Pr(Ij),Et.ADD_URI_SAFE_ATTR,Wl):Ij,Pj="ADD_DATA_URI_TAGS"in Et?Pt(Pr(Rj),Et.ADD_DATA_URI_TAGS,Wl):Rj,$M="FORBID_CONTENTS"in Et?Pt({},Et.FORBID_CONTENTS,Wl):Dj,es="FORBID_TAGS"in Et?Pt({},Et.FORBID_TAGS,Wl):{},Gl="FORBID_ATTR"in Et?Pt({},Et.FORBID_ATTR,Wl):{},IM="USE_PROFILES"in Et?Et.USE_PROFILES:!1,$u=Et.ALLOW_ARIA_ATTR!==!1,Ad=Et.ALLOW_DATA_ATTR!==!1,ag=Et.ALLOW_UNKNOWN_PROTOCOLS||!1,E0=Et.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Sh=Et.SAFE_FOR_TEMPLATES||!1,Dp=Et.WHOLE_DOCUMENT||!1,Ab=Et.RETURN_DOM||!1,RM=Et.RETURN_DOM_FRAGMENT||!1,T5=Et.RETURN_TRUSTED_TYPE||!1,KL=Et.FORCE_BODY||!1,Mj=Et.SANITIZE_DOM!==!1,kj=Et.SANITIZE_NAMED_PROPS||!1,fY=Et.KEEP_CONTENT!==!1,XL=Et.IN_PLACE||!1,br=Et.ALLOWED_URI_REGEXP||za,LM=Et.NAMESPACE||T0,vo=Et.CUSTOM_ELEMENT_HANDLING||{},Et.CUSTOM_ELEMENT_HANDLING&&$j(Et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vo.tagNameCheck=Et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Et.CUSTOM_ELEMENT_HANDLING&&$j(Et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vo.attributeNameCheck=Et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Et.CUSTOM_ELEMENT_HANDLING&&typeof Et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(vo.allowCustomizedBuiltInElements=Et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Sh&&(Ad=!1),RM&&(Ab=!0),IM&&(Sr=Pt({},[...Hr]),Mr=[],IM.html===!0&&(Pt(Sr,ar),Pt(Mr,rr)),IM.svg===!0&&(Pt(Sr,uo),Pt(Mr,ao),Pt(Mr,Ir)),IM.svgFilters===!0&&(Pt(Sr,Tr),Pt(Mr,ao),Pt(Mr,Ir)),IM.mathMl===!0&&(Pt(Sr,Yn),Pt(Mr,Xr),Pt(Mr,Ir))),Et.ADD_TAGS&&(Sr===ur&&(Sr=Pr(Sr)),Pt(Sr,Et.ADD_TAGS,Wl)),Et.ADD_ATTR&&(Mr===ei&&(Mr=Pr(Mr)),Pt(Mr,Et.ADD_ATTR,Wl)),Et.ADD_URI_SAFE_ATTR&&Pt(pY,Et.ADD_URI_SAFE_ATTR,Wl),Et.FORBID_CONTENTS&&($M===Dj&&($M=Pr($M)),Pt($M,Et.FORBID_CONTENTS,Wl)),fY&&(Sr["#text"]=!0),Dp&&Pt(Sr,["html","head","body"]),Sr.table&&(Pt(Sr,["tbody"]),delete es.tbody),Et.TRUSTED_TYPES_POLICY){if(typeof Et.TRUSTED_TYPES_POLICY.createHTML!="function")throw jt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Et.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw jt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');dt=Et.TRUSTED_TYPES_POLICY,Mt=dt.createHTML("")}else dt===void 0&&(dt=va(xe,D)),dt!==null&&typeof Mt=="string"&&(Mt=dt.createHTML(""));N&&N(Et),NM=Et}},Lj=Pt({},["mi","mo","mn","ms","mtext"]),Nj=Pt({},["foreignobject","desc","title","annotation-xml"]),oZ=Pt({},["title","style","font","a","script"]),k5=Pt({},uo);Pt(k5,Tr),Pt(k5,Ln);const yY=Pt({},Yn);Pt(yY,nr);const iZ=function(Et){let Gn=Ze(Et);(!Gn||!Gn.tagName)&&(Gn={namespaceURI:LM,tagName:"template"});const xr=ct(Et.tagName),ca=ct(Gn.tagName);return gY[Et.namespaceURI]?Et.namespaceURI===M5?Gn.namespaceURI===T0?xr==="svg":Gn.namespaceURI===A5?xr==="svg"&&(ca==="annotation-xml"||Lj[ca]):!!k5[xr]:Et.namespaceURI===A5?Gn.namespaceURI===T0?xr==="math":Gn.namespaceURI===M5?xr==="math"&&Nj[ca]:!!yY[xr]:Et.namespaceURI===T0?Gn.namespaceURI===M5&&!Nj[ca]||Gn.namespaceURI===A5&&!Lj[ca]?!1:!yY[xr]&&(oZ[xr]||!k5[xr]):!!($C==="application/xhtml+xml"&&gY[Et.namespaceURI]):!1},LC=function(Et){ut(_.removed,{element:Et});try{Et.parentNode.removeChild(Et)}catch{Et.remove()}},JL=function(Et,Gn){try{ut(_.removed,{attribute:Gn.getAttributeNode(Et),from:Gn})}catch{ut(_.removed,{attribute:null,from:Gn})}if(Gn.removeAttribute(Et),Et==="is"&&!Mr[Et])if(Ab||RM)try{LC(Gn)}catch{}else try{Gn.setAttribute(Et,"")}catch{}},Oj=function(Et){let Gn,xr;if(KL)Et="<remove></remove>"+Et;else{const Sf=Oe(Et,/^[\r\n\t ]+/);xr=Sf&&Sf[0]}$C==="application/xhtml+xml"&&LM===T0&&(Et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Et+"</body></html>");const ca=dt?dt.createHTML(Et):Et;if(LM===T0)try{Gn=new ye().parseFromString(ca,$C)}catch{}if(!Gn||!Gn.documentElement){Gn=nn.createDocument(LM,"template",null);try{Gn.documentElement.innerHTML=mY?Mt:ca}catch{}}const Yl=Gn.body||Gn.documentElement;return Et&&xr&&Yl.insertBefore(B.createTextNode(xr),Yl.childNodes[0]||null),LM===T0?mn.call(Gn,Dp?"html":"body")[0]:Dp?Gn.documentElement:Yl},Bj=function(Et){return $t.call(Et.ownerDocument||Et,Et,se.SHOW_ELEMENT|se.SHOW_COMMENT|se.SHOW_TEXT,null,!1)},aZ=function(Et){return Et instanceof ge&&(typeof Et.nodeName!="string"||typeof Et.textContent!="string"||typeof Et.removeChild!="function"||!(Et.attributes instanceof ce)||typeof Et.removeAttribute!="function"||typeof Et.setAttribute!="function"||typeof Et.namespaceURI!="string"||typeof Et.insertBefore!="function"||typeof Et.hasChildNodes!="function")},D5=function(Et){return typeof J=="object"?Et instanceof J:Et&&typeof Et=="object"&&typeof Et.nodeType=="number"&&typeof Et.nodeName=="string"},A0=function(Et,Gn,xr){An[Et]&&we(An[Et],ca=>{ca.call(_,Gn,xr,NM)})},Fj=function(Et){let Gn;if(A0("beforeSanitizeElements",Et,null),aZ(Et))return LC(Et),!0;const xr=Wl(Et.nodeName);if(A0("uponSanitizeElement",Et,{tagName:xr,allowedTags:Sr}),Et.hasChildNodes()&&!D5(Et.firstElementChild)&&(!D5(Et.content)||!D5(Et.content.firstElementChild))&&Wn(/<[/\w]/g,Et.innerHTML)&&Wn(/<[/\w]/g,Et.textContent))return LC(Et),!0;if(!Sr[xr]||es[xr]){if(!es[xr]&&zj(xr)&&(vo.tagNameCheck instanceof RegExp&&Wn(vo.tagNameCheck,xr)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(xr)))return!1;if(fY&&!$M[xr]){const ca=Ze(Et)||Et.parentNode,Yl=Je(Et)||Et.childNodes;if(Yl&&ca){const Sf=Yl.length;for(let ps=Sf-1;ps>=0;--ps)ca.insertBefore(He(Yl[ps],!0),pt(Et))}}return LC(Et),!0}return Et instanceof ne&&!iZ(Et)||(xr==="noscript"||xr==="noembed"||xr==="noframes")&&Wn(/<\/no(script|embed|frames)/i,Et.innerHTML)?(LC(Et),!0):(Sh&&Et.nodeType===3&&(Gn=Et.textContent,Gn=wt(Gn,yr," "),Gn=wt(Gn,mr," "),Gn=wt(Gn,$o," "),Et.textContent!==Gn&&(ut(_.removed,{element:Et.cloneNode()}),Et.textContent=Gn)),A0("afterSanitizeElements",Et,null),!1)},Vj=function(Et,Gn,xr){if(Mj&&(Gn==="id"||Gn==="name")&&(xr in B||xr in rZ))return!1;if(!(Ad&&!Gl[Gn]&&Wn(lr,Gn))){if(!($u&&Wn(mo,Gn))){if(!Mr[Gn]||Gl[Gn]){if(!(zj(Et)&&(vo.tagNameCheck instanceof RegExp&&Wn(vo.tagNameCheck,Et)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(Et))&&(vo.attributeNameCheck instanceof RegExp&&Wn(vo.attributeNameCheck,Gn)||vo.attributeNameCheck instanceof Function&&vo.attributeNameCheck(Gn))||Gn==="is"&&vo.allowCustomizedBuiltInElements&&(vo.tagNameCheck instanceof RegExp&&Wn(vo.tagNameCheck,xr)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(xr))))return!1}else if(!pY[Gn]){if(!Wn(br,wt(xr,On,""))){if(!((Gn==="src"||Gn==="xlink:href"||Gn==="href")&&Et!=="script"&&Er(xr,"data:")===0&&Pj[Et])){if(!(ag&&!Wn(pn,wt(xr,On,"")))){if(xr)return!1}}}}}}return!0},zj=function(Et){return Et.indexOf("-")>0},Uj=function(Et){let Gn,xr,ca,Yl;A0("beforeSanitizeAttributes",Et,null);const{attributes:Sf}=Et;if(!Sf)return;const ps={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Mr};for(Yl=Sf.length;Yl--;){Gn=Sf[Yl];const{name:xf,namespaceURI:bY}=Gn;xr=xf==="value"?Gn.value:ir(Gn.value);const lZ=xr;if(ca=Wl(xf),ps.attrName=ca,ps.attrValue=xr,ps.keepAttr=!0,ps.forceKeepAttr=void 0,A0("uponSanitizeAttribute",Et,ps),xr=ps.attrValue,ps.forceKeepAttr)continue;if(!ps.keepAttr){JL(xf,Et);continue}if(!E0&&Wn(/\/>/i,xr)){JL(xf,Et);continue}Sh&&(xr=wt(xr,yr," "),xr=wt(xr,mr," "),xr=wt(xr,$o," "));const Hj=Wl(Et.nodeName);if(!Vj(Hj,ca,xr)){JL(xf,Et);continue}if(kj&&(ca==="id"||ca==="name")&&(JL(xf,Et),xr=Qj+xr),dt&&typeof xe=="object"&&typeof xe.getAttributeType=="function"&&!bY)switch(xe.getAttributeType(Hj,ca)){case"TrustedHTML":{xr=dt.createHTML(xr);break}case"TrustedScriptURL":{xr=dt.createScriptURL(xr);break}}if(xr!==lZ)try{bY?Et.setAttributeNS(bY,xf,xr):Et.setAttribute(xf,xr)}catch{JL(xf,Et)}}A0("afterSanitizeAttributes",Et,null)},sZ=function ro(Et){let Gn;const xr=Bj(Et);for(A0("beforeSanitizeShadowDOM",Et,null);Gn=xr.nextNode();)A0("uponSanitizeShadowNode",Gn,null),!Fj(Gn)&&(Gn.content instanceof U&&ro(Gn.content),Uj(Gn));A0("afterSanitizeShadowDOM",Et,null)};return _.sanitize=function(ro){let Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gn,xr,ca,Yl;if(mY=!ro,mY&&(ro="<!-->"),typeof ro!="string"&&!D5(ro))if(typeof ro.toString=="function"){if(ro=ro.toString(),typeof ro!="string")throw jt("dirty is not a string, aborting")}else throw jt("toString is not a function");if(!_.isSupported)return ro;if(IC||vY(Et),_.removed=[],typeof ro=="string"&&(XL=!1),XL){if(ro.nodeName){const xf=Wl(ro.nodeName);if(!Sr[xf]||es[xf])throw jt("root node is forbidden and cannot be sanitized in-place")}}else if(ro instanceof J)Gn=Oj("<!---->"),xr=Gn.ownerDocument.importNode(ro,!0),xr.nodeType===1&&xr.nodeName==="BODY"||xr.nodeName==="HTML"?Gn=xr:Gn.appendChild(xr);else{if(!Ab&&!Sh&&!Dp&&ro.indexOf("<")===-1)return dt&&T5?dt.createHTML(ro):ro;if(Gn=Oj(ro),!Gn)return Ab?null:T5?Mt:""}Gn&&KL&&LC(Gn.firstChild);const Sf=Bj(XL?ro:Gn);for(;ca=Sf.nextNode();)Fj(ca)||(ca.content instanceof U&&sZ(ca.content),Uj(ca));if(XL)return ro;if(Ab){if(RM)for(Yl=un.call(Gn.ownerDocument);Gn.firstChild;)Yl.appendChild(Gn.firstChild);else Yl=Gn;return(Mr.shadowroot||Mr.shadowrootmode)&&(Yl=Br.call(T,Yl,!0)),Yl}let ps=Dp?Gn.outerHTML:Gn.innerHTML;return Dp&&Sr["!doctype"]&&Gn.ownerDocument&&Gn.ownerDocument.doctype&&Gn.ownerDocument.doctype.name&&Wn(zn,Gn.ownerDocument.doctype.name)&&(ps="<!DOCTYPE "+Gn.ownerDocument.doctype.name+`>
`+ps),Sh&&(ps=wt(ps,yr," "),ps=wt(ps,mr," "),ps=wt(ps,$o," ")),dt&&T5?dt.createHTML(ps):ps},_.setConfig=function(ro){vY(ro),IC=!0},_.clearConfig=function(){NM=null,IC=!1},_.isValidAttribute=function(ro,Et,Gn){NM||vY({});const xr=Wl(ro),ca=Wl(Et);return Vj(xr,ca,Gn)},_.addHook=function(ro,Et){typeof Et=="function"&&(An[ro]=An[ro]||[],ut(An[ro],Et))},_.removeHook=function(ro){if(An[ro])return We(An[ro])},_.removeHooks=function(ro){An[ro]&&(An[ro]=[])},_.removeAllHooks=function(){An={}},_}var xt=je();const Qe=u=>xt().sanitize(u);var hn=tinymce.util.Tools.resolve("tinymce.util.I18n");const Pn={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},Jn="temporary-placeholder",Ao=u=>()=>Ue(u,Jn).getOr("!not found!"),Lo=(u,_)=>{const T=u.toLowerCase();if(hn.isRtl()){const D=Md(T,"-rtl");return yn(_,D)?D:T}else return T},si=(u,_)=>Ue(_,Lo(u,_)),Ua=(u,_)=>{const T=_();return si(u,T).getOrThunk(Ao(T))},Oc=(u,_,T)=>{const D=_();return si(u,D).or(T).getOrThunk(Ao(D))},ks=u=>hn.isRtl()?yn(Pn,u):!1,bp=()=>Dr("add-focusable",[ii(u=>{fy(u.element,"svg").each(_=>bn(_,"focusable","false"))})]),qv=(u,_,T,D)=>{var B,U;const W=ks(_)?["tox-icon--flip"]:[],J=Ue(T,Lo(_,T)).or(D).getOrThunk(Ao(T));return{dom:{tag:u.tag,attributes:(B=u.attributes)!==null&&B!==void 0?B:{},classes:u.classes.concat(W),innerHtml:J},behaviours:sn([...(U=u.behaviours)!==null&&U!==void 0?U:[],bp()])}},Js=(u,_,T,D=Q.none())=>qv(_,u,T(),D),Qa=(u,_,T)=>{const D=T(),B=$e(u,U=>yn(D,Lo(U,D)));return qv(_,B.getOr(Jn),D,Q.none())},Bc={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},sc=ml({name:"Notification",factory:u=>{const _=Po({dom:hd(`<p>${Qe(u.translationProvider(u.text))}</p>`),behaviours:sn([wr.config({})])}),T=xe=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${xe}%`}}}),D=xe=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${xe}%`}}),B=Po({dom:{tag:"div",classes:u.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[T(0)]},D(0)],behaviours:sn([wr.config({})])}),J={updateProgress:(xe,ke)=>{xe.getSystem().isConnected()&&B.getOpt(xe).each(He=>{wr.set(He,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[T(ke)]},D(ke)])})},updateText:(xe,ke)=>{if(xe.getSystem().isConnected()){const He=_.get(xe);wr.set(He,[Pi(ke)])}}},ne=et([u.icon.toArray(),u.level.toArray(),u.level.bind(xe=>Q.from(Bc[xe])).toArray()]),se=Po(sa.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Js("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":u.translationProvider("Close")}},u.iconProvider)],action:xe=>{u.onAction(xe)}})),ce=Qa(ne,{tag:"div",classes:["tox-notification__icon"]},u.iconProvider),ge={dom:{tag:"div",classes:["tox-notification__body"]},components:[_.asSpec()],behaviours:sn([wr.config({})])},ye=[ce,ge];return{uid:u.uid,dom:{tag:"div",attributes:{role:"alert"},classes:u.level.map(xe=>["tox-notification","tox-notification--in",`tox-notification--${xe}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:sn([dr.config({}),Dr("notification-events",[Vt(Ml(),xe=>{se.getOpt(xe).each(dr.focus)})])]),components:ye.concat(u.progress?[B.asSpec()]:[]).concat(u.closeButton?[se.asSpec()]:[]),apis:J}},configFields:[Ro("level"),Ft("progress"),Ro("icon"),Ft("onAction"),Ft("text"),Ft("iconProvider"),Ft("translationProvider"),xa("closeButton",!0)],apis:{updateProgress:(u,_,T)=>{u.updateProgress(_,T)},updateText:(u,_,T)=>{u.updateText(_,T)}}});var $m=(u,_,T)=>{const D=_.backstage.shared,B=()=>{const ne=Bi(Nt.fromDom(u.getContentAreaContainer())),se=gs(),ce=ul(se.x,ne.x,ne.right),ge=ul(se.y,ne.y,ne.bottom),ye=Math.max(ne.right,se.right),xe=Math.max(ne.bottom,se.bottom);return Q.some(ha(ce,ge,ye-ce,xe-ge))};return{open:(ne,se)=>{const ce=()=>{se(),fi.hide(ye)},ge=as(sc.sketch({text:ne.text,level:Ke(["success","error","warning","warn","info"],ne.type)?ne.type:void 0,progress:ne.progressBar===!0,icon:ne.icon,closeButton:ne.closeButton,onAction:ce,iconProvider:D.providers.icons,translationProvider:D.providers.translate})),ye=as(fi.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:D.getSink,fireDismissalEventInstead:{},...D.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));T.add(ye),O(ne.timeout)&&ne.timeout>0&&tf.setEditorTimeout(u,()=>{ce()},ne.timeout);const ke={close:ce,reposition:()=>{const He=Pl(ge),pt={maxHeightFunction:sm()},Je=u.notificationManager.getNotifications();if(Je[0]===ke){const Ze={...D.anchors.banner(),overrides:pt};fi.showWithinBounds(ye,He,{anchor:Ze},B)}else Te(Je,ke).each(Ze=>{const dt=Je[Ze-1].getEl(),Mt={type:"node",root:ta(),node:Q.some(Nt.fromDom(dt)),overrides:pt,layouts:{onRtl:()=>[ma],onLtr:()=>[ma]}};fi.showWithinBounds(ye,He,{anchor:Mt},B)})},text:He=>{sc.updateText(ge,He)},settings:ne,getEl:()=>ge.element.dom,progressBar:{value:He=>{sc.updateProgress(ge,He)}}};return ke},close:ne=>{ne.close()},getArgs:ne=>ne.settings}},Ol=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A1=tinymce.util.Tools.resolve("tinymce.EditorManager"),fd=tinymce.util.Tools.resolve("tinymce.Env"),Ws;(function(u){u.default="wrap",u.floating="floating",u.sliding="sliding",u.scrolling="scrolling"})(Ws||(Ws={}));var Kv;(function(u){u.auto="auto",u.top="top",u.bottom="bottom"})(Kv||(Kv={}));const Wo=u=>_=>_.options.get(u),Xv=u=>_=>Q.from(u(_)),rA=u=>{const _=fd.deviceType.isPhone(),T=fd.deviceType.isTablet()||_,D=u.options.register,B=W=>g(W)||W===!1,U=W=>g(W)||O(W);D("skin",{processor:W=>g(W)||W===!1,default:"oxide"}),D("skin_url",{processor:"string"}),D("height",{processor:U,default:Math.max(u.getElement().offsetHeight,400)}),D("width",{processor:U,default:Ol.DOM.getStyle(u.getElement(),"width")}),D("min_height",{processor:"number",default:100}),D("min_width",{processor:"number"}),D("max_height",{processor:"number"}),D("max_width",{processor:"number"}),D("style_formats",{processor:"object[]"}),D("style_formats_merge",{processor:"boolean",default:!1}),D("style_formats_autohide",{processor:"boolean",default:!1}),D("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),D("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),D("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),D("font_size_input_default_unit",{processor:"string",default:"pt"}),D("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),D("content_langs",{processor:"object[]"}),D("removed_menuitems",{processor:"string",default:""}),D("menubar",{processor:W=>g(W)||c(W),default:!_}),D("menu",{processor:"object",default:{}}),D("toolbar",{processor:W=>c(W)||g(W)||x(W)?{value:W,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Lt(9,W=>{D("toolbar"+(W+1),{processor:"string"})}),D("toolbar_mode",{processor:"string",default:T?"scrolling":"floating"}),D("toolbar_groups",{processor:"object",default:{}}),D("toolbar_location",{processor:"string",default:Kv.auto}),D("toolbar_persist",{processor:"boolean",default:!1}),D("toolbar_sticky",{processor:"boolean",default:u.inline}),D("toolbar_sticky_offset",{processor:"number",default:0}),D("fixed_toolbar_container",{processor:"string",default:""}),D("fixed_toolbar_container_target",{processor:"object"}),D("ui_mode",{processor:"string",default:"combined"}),D("file_picker_callback",{processor:"function"}),D("file_picker_validator_handler",{processor:"function"}),D("file_picker_types",{processor:"string"}),D("typeahead_urls",{processor:"boolean",default:!0}),D("anchor_top",{processor:B,default:"#top"}),D("anchor_bottom",{processor:B,default:"#bottom"}),D("draggable_modal",{processor:"boolean",default:!1}),D("statusbar",{processor:"boolean",default:!0}),D("elementpath",{processor:"boolean",default:!0}),D("branding",{processor:"boolean",default:!0}),D("promotion",{processor:"boolean",default:!0}),D("resize",{processor:W=>W==="both"||c(W),default:!fd.deviceType.isTouch()}),D("sidebar_show",{processor:"string"}),D("help_accessibility",{processor:"boolean",default:u.hasPlugin("help")}),D("default_font_stack",{processor:"string[]",default:[]})},oA=Wo("readonly"),M1=Wo("height"),Jv=Wo("width"),px=Xv(Wo("min_width")),dh=Xv(Wo("min_height")),Pe=Xv(Wo("max_width")),at=Xv(Wo("max_height")),_t=Xv(Wo("style_formats")),Ot=Wo("style_formats_merge"),vn=Wo("style_formats_autohide"),fn=Wo("content_langs"),En=Wo("removed_menuitems"),Un=Wo("toolbar_mode"),hr=Wo("toolbar_groups"),Or=Wo("toolbar_location"),Gr=Wo("fixed_toolbar_container"),Vr=Wo("fixed_toolbar_container_target"),to=Wo("toolbar_persist"),zo=Wo("toolbar_sticky_offset"),Yo=Wo("menubar"),Ea=Wo("toolbar"),xu=Wo("file_picker_callback"),rf=Wo("file_picker_validator_handler"),lc=Wo("font_size_input_default_unit"),hh=Wo("file_picker_types"),mx=Wo("typeahead_urls"),Qv=Wo("anchor_top"),mN=Wo("anchor_bottom"),YP=Wo("draggable_modal"),gN=Wo("statusbar"),k1=Wo("elementpath"),jP=Wo("branding"),vN=Wo("resize"),iA=Wo("paste_as_text"),aA=Wo("sidebar_show"),yN=Wo("promotion"),sA=Wo("help_accessibility"),bN=Wo("default_font_stack"),ZP=u=>u.options.get("skin")===!1,D1=u=>u.options.get("menubar")!==!1,lA=u=>{const _=u.options.get("skin_url");if(ZP(u))return _;if(_)return u.documentBaseURI.toAbsolute(_);{const T=u.options.get("skin");return A1.baseURL+"/skins/ui/"+T}},qP=u=>Q.from(u.options.get("skin_url")),_N=u=>u.options.get("line_height_formats").split(" "),cA=u=>{const _=Ea(u),T=g(_),D=x(_)&&_.length>0;return!gx(u)&&(D||T||_===!0)},KP=u=>{const _=Lt(9,D=>u.options.get("toolbar"+(D+1))),T=Rt(_,g);return Vn(T.length>0,T)},gx=u=>KP(u).fold(()=>{const _=Ea(u);return z(_,g)&&_.length>0},be),XP=u=>Or(u)===Kv.bottom,SN=u=>{var _;if(!u.inline)return Q.none();const T=(_=Gr(u))!==null&&_!==void 0?_:"";if(T.length>0)return Ri(ta(),T);const D=Vr(u);return L(D)?Q.some(Nt.fromDom(D)):Q.none()},P1=u=>u.inline&&SN(u).isSome(),JP=u=>SN(u).getOrThunk(()=>Jc($s(Nt.fromDom(u.getElement())))),QP=u=>u.inline&&!D1(u)&&!cA(u)&&!gx(u),vx=u=>(u.options.get("toolbar_sticky")||u.inline)&&!P1(u)&&!QP(u),of=u=>!P1(u)&&u.options.get("ui_mode")==="split",xN=u=>{const _=u.options.get("menu");return Zn(_,T=>({...T,items:T.items}))};var P5=Object.freeze({__proto__:null,get ToolbarMode(){return Ws},get ToolbarLocation(){return Kv},register:rA,getSkinUrl:lA,getSkinUrlOption:qP,isReadOnly:oA,isSkinDisabled:ZP,getHeightOption:M1,getWidthOption:Jv,getMinWidthOption:px,getMinHeightOption:dh,getMaxWidthOption:Pe,getMaxHeightOption:at,getUserStyleFormats:_t,shouldMergeStyleFormats:Ot,shouldAutoHideStyleFormats:vn,getLineHeightFormats:_N,getContentLanguages:fn,getRemovedMenuItems:En,isMenubarEnabled:D1,isMultipleToolbars:gx,isToolbarEnabled:cA,isToolbarPersist:to,getMultipleToolbarsOption:KP,getUiContainer:JP,useFixedContainer:P1,isSplitUiMode:of,getToolbarMode:Un,isDraggableModal:YP,isDistractionFree:QP,isStickyToolbar:vx,getStickyToolbarOffset:zo,getToolbarLocation:Or,isToolbarLocationBottom:XP,getToolbarGroups:hr,getMenus:xN,getMenubar:Yo,getToolbar:Ea,getFilePickerCallback:xu,getFilePickerTypes:hh,useTypeaheadUrls:mx,getAnchorTop:Qv,getAnchorBottom:mN,getFilePickerValidatorHandler:rf,getFontSizeInputDefaultUnit:lc,useStatusBar:gN,useElementPath:k1,promotionEnabled:yN,useBranding:jP,getResize:vN,getPasteAsText:iA,getSidebarShow:aA,useHelpAccessibility:sA,getDefaultFontStack:bN});const CN="[data-mce-autocompleter]",eR=u=>Ec(u,CN),R5=u=>Ri(u,CN),I5={setup:(u,_)=>{const T=(B,U)=>{tr(B,Ks(),{raw:U})},D=()=>u.getMenu().bind(To.getHighlighted);_.on("keydown",B=>{const U=B.which;u.isActive()&&(u.isMenuOpen()?U===13?(D().each(zd),B.preventDefault()):U===40?(D().fold(()=>{u.getMenu().each(To.highlightFirst)},W=>{T(W,B)}),B.preventDefault(),B.stopImmediatePropagation()):(U===37||U===38||U===39)&&D().each(W=>{T(W,B),B.preventDefault(),B.stopImmediatePropagation()}):(U===13||U===38||U===40)&&u.cancelIfNecessary())}),_.on("NodeChange",B=>{u.isActive()&&!u.isProcessingAction()&&eR(Nt.fromDom(B.element)).isNone()&&u.cancelIfNecessary()})}};var tR;(function(u){u[u.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",u[u.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(tR||(tR={}));var fh=tR;const nR="tox-menu-nav__js",R1="tox-collection__item",rR="tox-swatch",$5={normal:nR,color:rR},wN="tox-collection__item--enabled",L5="tox-collection__group-heading",EN="tox-collection__item-icon",oR="tox-collection__item-label",N5="tox-collection__item-accessory",TN="tox-collection__item-caret",O5="tox-collection__item-checkmark",yx="tox-collection__item--active",AN="tox-collection__item-container",B5="tox-collection__item-container--column",MN="tox-collection__item-container--row",uA="tox-collection__item-container--align-right",F5="tox-collection__item-container--align-left",iR="tox-collection__item-container--valign-top",V5="tox-collection__item-container--valign-middle",z5="tox-collection__item-container--valign-bottom",kN=u=>Ue($5,u).getOr(nR),DN=u=>u==="color"?"tox-swatches":"tox-menu",aR=u=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:DN(u),tieredMenu:"tox-tiered-menu"}),_p=u=>{const _=aR(u);return{backgroundMenu:_.backgroundMenu,selectedMenu:_.selectedMenu,menu:_.menu,selectedItem:_.selectedItem,item:kN(u)}},sR=(u,_,T)=>{const D=aR(T);return{tag:"div",classes:et([[D.menu,`tox-menu-${_}-column`],u?[D.hasIcons]:[]])}},PN=[yp.parts.items({})],I1=(u,_,T)=>{const D=aR(T);return{dom:{tag:"div",classes:et([[D.tieredMenu]])},markers:_p(T)}},bx=q([Ro("data"),ft("inputAttributes",{}),ft("inputStyles",{}),ft("tag","input"),ft("inputClasses",[]),so("onSetValue"),ft("styles",{}),ft("eventOrder",{}),ia("inputBehaviours",[Sn,dr]),ft("selectOnFocus",!0)]),lR=u=>sn([dr.config({onFocus:u.selectOnFocus?_=>{const T=_.element,D=hu(T);T.dom.setSelectionRange(0,D.length)}:V})]),af=u=>({...lR(u),...aa(u.inputBehaviours,[Sn.config({store:{mode:"manual",...u.data.map(_=>({initialValue:_})).getOr({}),getValue:_=>hu(_.element),setValue:(_,T)=>{hu(_.element)!==T&&Wf(_.element,T)}},onSetValue:u.onSetValue})])}),dA=u=>({tag:u.tag,attributes:{type:"text",...u.inputAttributes},styles:u.inputStyles,classes:u.inputClasses}),U5=(u,_)=>({uid:u.uid,dom:dA(u),components:[],behaviours:af(u),eventOrder:u.eventOrder}),e0=ml({name:"Input",configFields:bx(),factory:U5}),RN=In("refetch-trigger-event"),IN=In("redirect-menu-item-interaction"),$1="tox-menu__searcher",hA=u=>Ri(u.element,`.${$1}`).bind(_=>u.getSystem().getByDom(_).toOptional()),cR=hA,uR=(u,_)=>{Sn.setValue(u,_.fetchPattern),u.element.dom.selectionStart=_.selectionStart,u.element.dom.selectionEnd=_.selectionEnd},$N=u=>{const _=Sn.getValue(u),T=u.element.dom.selectionStart,D=u.element.dom.selectionEnd;return{fetchPattern:_,selectionStart:T,selectionEnd:D}},dR=(u,_)=>{Ls(_.element,"id").each(T=>bn(u.element,"aria-activedescendant",T))},hR=u=>{const _=(B,U)=>(U.cut(),Q.none()),T=(B,U)=>{const W={interactionEvent:U.event,eventType:U.event.raw.type};return tr(B,IN,W),Q.some(!0)},D="searcher-events";return{dom:{tag:"div",classes:[R1]},components:[e0.sketch({inputClasses:[$1,"tox-textfield"],inputAttributes:{...u.placeholder.map(B=>({placeholder:u.i18n(B)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:sn([Dr(D,[Vt(Lf(),B=>{Kr(B,RN)}),Vt(Ks(),(B,U)=>{U.event.raw.key==="Escape"&&U.stop()})]),Xn.config({mode:"special",onLeft:_,onRight:_,onSpace:_,onEnter:T,onEscape:T,onUp:T,onDown:T})]),eventOrder:{keydown:[D,Xn.name()]}})]}},fA="tox-collection--results__js",fR=u=>{var _;return u.dom?{...u,dom:{...u.dom,attributes:{...(_=u.dom.attributes)!==null&&_!==void 0?_:{},id:In("aria-item-search-result-id"),"aria-selected":"false"}}}:u},pA=(u,_)=>T=>{const D=Qt(T,_);return Xe(D,B=>({dom:u,components:B}))},H5=u=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[yp.parts.items({preprocess:u!=="auto"?pA({tag:"div",classes:["tox-swatches__row"]},u):ie})]}]}),G5=u=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[yp.parts.items({preprocess:pA({tag:"div",classes:["tox-collection__group"]},u)})]}),LN=(u,_)=>{const T=[];let D=[];return Be(u,(B,U)=>{_(B,U)?(D.length>0&&T.push(D),D=[],(yn(B.dom,"innerHtml")||B.components&&B.components.length>0)&&D.push(B)):D.push(B)}),D.length>0&&T.push(D),Xe(T,B=>({dom:{tag:"div",classes:["tox-collection__group"]},components:B}))},pR=(u,_,T)=>yp.parts.items({preprocess:D=>{const B=Xe(D,T);return u!=="auto"&&u>1?pA({tag:"div",classes:["tox-collection__group"]},u)(B):LN(B,(U,W)=>_[W].type==="separator")}}),NN=(u,_,T=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(u===1?["tox-collection--list"]:["tox-collection--grid"])},components:[pR(u,_,ie)]}),W5=(u,_,T=!0)=>{const D=In("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",fA].concat(u===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:D}},components:[pR(u,_,fR)]}},ON=(u,_,T)=>{const D=In("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(u===1?["tox-collection--list"]:["tox-collection--grid"])},components:[hR({i18n:hn.translate,placeholder:T.placeholder}),{dom:{tag:"div",classes:[...u===1?["tox-collection--list"]:["tox-collection--grid"],fA],attributes:{id:D}},components:[pR(u,_,fR)]}]}},BN=(u,_=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[yp.parts.items({preprocess:T=>LN(T,(D,B)=>u[B].type==="separator")})]}),mA=u=>Tt(u,_=>"icon"in _&&_.icon!==void 0),sf=u=>(console.error(Fs(u)),console.log(u),Q.none()),Sx=(u,_,T,D,B)=>{const U=BN(T);return{value:u,dom:U.dom,components:U.components,items:T}},gA=(u,_,T,D,B)=>{const U=()=>B.menuType!=="searchable"?NN(D,T):B.searchMode.searchMode==="search-with-field"?ON(D,T,B.searchMode):W5(D,T);if(B.menuType==="color"){const W=H5(D);return{value:u,dom:W.dom,components:W.components,items:T}}else if(B.menuType==="normal"&&D==="auto"){const W=NN(D,T);return{value:u,dom:W.dom,components:W.components,items:T}}else if(B.menuType==="normal"||B.menuType==="searchable"){const W=U();return{value:u,dom:W.dom,components:W.components,items:T}}else if(B.menuType==="listpreview"&&D!=="auto"){const W=G5(D);return{value:u,dom:W.dom,components:W.components,items:T}}else return{value:u,dom:sR(_,D,B.menuType),components:PN,items:T}},Qi=ko("type"),mR=ko("name"),vA=ko("label"),Sp=ko("text"),FN=ko("title"),gR=ko("icon"),L1=ko("value"),VN=su("fetch"),zN=su("getSubmenuItems"),N1=su("onAction"),Y5=su("onItemAction"),Lm=Ca("onSetup",()=>V),vR=vs("name"),lf=vs("text"),Fc=vs("icon"),xx=vs("tooltip"),yA=vs("label"),j5=vs("shortcut"),yR=kf("select"),bA=xa("active",!1),UN=xa("borderless",!1),Cu=xa("enabled",!0),cf=xa("primary",!1),HN=u=>ft("columns",u),Cx=ft("meta",{}),O1=Ca("onAction",V),t0=u=>Yu("type",u),_A=u=>Za("name","name",vc(()=>In(`${u}-name`)),$a),GN=u=>Za("value","value",vc(()=>In(`${u}-value`)),Fi()),bR=er([Qi,lf]),_R=u=>yi("separatormenuitem",bR,u),WN=er([t0("autocompleteitem"),bA,Cu,Cx,L1,lf,Fc]),Z5=u=>yi("Autocompleter.Separator",bR,u),YN=u=>yi("Autocompleter.Item",WN,u),B1=[Cu,xx,Fc,lf,Lm],jN=er([Qi,N1].concat(B1)),SR=u=>yi("toolbarbutton",jN,u),xR=[bA].concat(B1),ZN=er(xR.concat([Qi,N1])),qN=u=>yi("ToggleButton",ZN,u),KN=[Ca("predicate",me),Tl("scope","node",["node","editor"]),Tl("position","selection",["node","selection","line"])],q5=B1.concat([t0("contextformbutton"),cf,N1,Gi("original",ie)]),K5=xR.concat([t0("contextformbutton"),cf,N1,Gi("original",ie)]),XN=B1.concat([t0("contextformbutton")]),Ex=xR.concat([t0("contextformtogglebutton")]),JN=Eo("type",{contextformbutton:q5,contextformtogglebutton:K5}),X5=er([t0("contextform"),Ca("initValue",q("")),yA,El("commands",JN),Wu("launch",Eo("type",{contextformbutton:XN,contextformtogglebutton:Ex}))].concat(KN)),J5=u=>yi("ContextForm",X5,u),Q5=er([t0("contexttoolbar"),ko("items")].concat(KN)),ez=u=>yi("ContextToolbar",Q5,u),tz=[Qi,ko("src"),vs("alt"),pa("classes",[],$a)],SA=er(tz),nz=[Qi,Sp,vR,pa("classes",["tox-collection__item-label"],$a)],QN=er(nz),eO=fa(()=>Zt("type",{cardimage:SA,cardtext:QN,cardcontainer:tO})),tO=er([Qi,Yu("direction","horizontal"),Yu("align","left"),Yu("valign","middle"),El("items",eO)]),n0=[Cu,lf,j5,GN("menuitem"),Cx],rz=er([Qi,yA,El("items",eO),Lm,O1].concat(n0)),nO=u=>yi("cardmenuitem",rz,u),rO=er([Qi,bA,Fc].concat(n0)),oO=u=>yi("choicemenuitem",rO,u),CR=[Qi,ko("fancytype"),O1],oz=[ft("initData",{})].concat(CR),iz=[kf("select"),ju("initData",{},[xa("allowCustomColors",!0),Yu("storageKey","default"),Df("colors",Fi())])].concat(CR),az=Eo("fancytype",{inserttable:oz,colorswatch:iz}),sz=u=>yi("fancymenuitem",az,u),iO=er([Qi,Lm,O1,Fc].concat(n0)),aO=u=>yi("menuitem",iO,u),lz=er([Qi,zN,Lm,Fc].concat(n0)),cz=u=>yi("nestedmenuitem",lz,u),uz=er([Qi,Fc,bA,Lm,N1].concat(n0)),dz=u=>yi("togglemenuitem",uz,u),wR=(u,_,T)=>{const D=ga(u.element,"."+T);if(D.length>0){const B=st(D,U=>{const W=U.dom.getBoundingClientRect().top,J=D[0].dom.getBoundingClientRect().top;return Math.abs(W-J)>_}).getOr(D.length);return Q.some({numColumns:B,numRows:Math.ceil(D.length/B)})}else return Q.none()},ER=(u,_)=>sn([Dr(u,_)]),Tx={namedEvents:ER,unnamedEvents:u=>ER(In("unnamed-events"),u)},xA=In("tooltip.exclusive"),F1=In("tooltip.show"),Ax=In("tooltip.hide"),sO=(u,_,T)=>{u.getSystem().broadcastOn([xA],{})};var fz=Object.freeze({__proto__:null,hideAllExclusive:sO,setComponents:(u,_,T,D)=>{T.getTooltip().each(B=>{B.getSystem().isConnected()&&wr.set(B,D)})}}),lO=Object.freeze({__proto__:null,events:(u,_)=>{const T=B=>{_.getTooltip().each(U=>{Jd(U),u.onHide(B,U),_.clearTooltip()}),_.clearTimer()},D=B=>{if(!_.isShowing()){sO(B);const U=u.lazySink(B).getOrDie(),W=B.getSystem().build({dom:u.tooltipDom,components:u.tooltipComponents,events:ui(u.mode==="normal"?[Vt(Vd(),J=>{Kr(B,F1)}),Vt(Pg(),J=>{Kr(B,Ax)})]:[]),behaviours:sn([wr.config({})])});_.setTooltip(W),Xd(U,W),u.onShow(B,W),Ja.position(U,W,{anchor:u.anchor(B)})}};return ui(et([[Vt(F1,B=>{_.resetTimer(()=>{D(B)},u.delay)}),Vt(Ax,B=>{_.resetTimer(()=>{T(B)},u.delay)}),Vt(Of(),(B,U)=>{const W=U;W.universal||Ke(W.channels,xA)&&T(B)}),Ku(B=>{T(B)})],u.mode==="normal"?[Vt(Ml(),B=>{Kr(B,F1)}),Vt(i_(),B=>{Kr(B,Ax)}),Vt(Vd(),B=>{Kr(B,F1)}),Vt(Pg(),B=>{Kr(B,Ax)})]:[Vt(Zp(),(B,U)=>{Kr(B,F1)}),Vt(qp(),B=>{Kr(B,Ax)})]]))}}),cO=[Ft("lazySink"),Ft("tooltipDom"),ft("exclusive",!0),ft("tooltipComponents",[]),ft("delay",300),Tl("mode","normal",["normal","follow-highlight"]),ft("anchor",u=>({type:"hotspot",hotspot:u,layouts:{onLtr:q([ma,Ss,Ka,_s,Xa,ss]),onRtl:q([ma,Ss,Ka,_s,Xa,ss])}})),so("onHide"),so("onShow")],mz=Object.freeze({__proto__:null,init:()=>{const u=ai(),_=ai(),T=()=>{u.on(clearTimeout)},D=(U,W)=>{T(),u.set(setTimeout(U,W))},B=q("not-implemented");return Xs({getTooltip:_.get,isShowing:_.isSet,setTooltip:_.set,clearTooltip:_.clear,clearTimer:T,resetTimer:D,readState:B})}});const uO=Ba({fields:cO,name:"tooltipping",active:lO,state:mz,apis:fz}),gz=u=>u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),dO="silver.readonly",TR=er([JM("readonly")]),CA=(u,_)=>{const D=u.mainUi.outerContainer.element,B=[u.mainUi.mothership,...u.uiMotherships];_&&Be(B,U=>{U.broadcastOn([yu()],{target:D})}),Be(B,U=>{U.broadcastOn([dO],{readonly:_})})},hO=(u,_)=>{u.on("init",()=>{u.mode.isReadOnly()&&CA(_,!0)}),u.on("SwitchMode",()=>CA(_,u.mode.isReadOnly())),oA(u)&&u.mode.set("readonly")},ya=()=>dl.config({channels:{[dO]:{schema:TR,onReceive:(u,_)=>{or.set(u,_.readonly)}}}}),la={item:u=>or.config({disabled:u,disableClass:"tox-collection__item--state-disabled"}),button:u=>or.config({disabled:u}),splitButton:u=>or.config({disabled:u,disableClass:"tox-tbtn--disabled"}),toolbarButton:u=>or.config({disabled:u,disableClass:"tox-tbtn--disabled",useNative:!1})},Vc=(u,_)=>{const T=u.getApi(_);return D=>{D(T)}},Nm=(u,_)=>ii(T=>{Vc(u,T)(B=>{const U=u.onSetup(B);$(U)&&_.set(U)})}),uf=(u,_)=>Ku(T=>Vc(u,T)(_.get())),AR=(u,_)=>uu((T,D)=>{Vc(u,T)(u.onAction),!u.triggersSubmenu&&_===fh.CLOSE_ON_EXECUTE&&(T.getSystem().isConnected()&&Kr(T,Rg()),D.stop())}),yz={[kl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},V1=Yr,df=(u,_,T,D)=>{const B=sr(V);return{type:"item",dom:_.dom,components:V1(_.optComponents),data:u.data,eventOrder:yz,hasSubmenu:u.triggersSubmenu,itemBehaviours:sn([Dr("item-events",[AR(u,T),Nm(u,B),uf(u,B)]),la.item(()=>!u.enabled||D.isDisabled()),ya(),wr.config({})].concat(u.itemBehaviours))}},xp=u=>({value:u.value,meta:{text:u.text.getOr(""),...u.meta}}),wA=u=>{const _=fd.os.isMacOS()||fd.os.isiOS(),B=_?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},U=u.split("+"),W=Xe(U,J=>{const ne=J.toLowerCase().trim();return yn(B,ne)?B[ne]:J});return _?W.join(""):W.join("+")},MR=(u,_,T=[EN])=>Js(u,{tag:"div",classes:T},_),pd=u=>({dom:{tag:"div",classes:[oR]},components:[Pi(hn.translate(u))]}),fO=(u,_)=>({dom:{tag:"div",classes:_,innerHtml:u}}),bz=(u,_)=>({dom:{tag:"div",classes:[oR]},components:[{dom:{tag:u.tag,styles:u.styles},components:[Pi(hn.translate(_))]}]}),wu=u=>({dom:{tag:"div",classes:[N5]},components:[Pi(wA(u))]}),z1=u=>MR("checkmark",u,[O5]),md=u=>MR("chevron-right",u,[TN]),Sz=u=>MR("chevron-down",u,[TN]),jo=(u,_)=>{const T=u.direction==="vertical"?B5:MN,D=u.align==="left"?F5:uA;return{dom:{tag:"div",classes:[AN,T,D,(()=>{switch(u.valign){case"top":return iR;case"middle":return V5;case"bottom":return z5}})()]},components:_}},U1=(u,_,T)=>({dom:{tag:"img",classes:_,attributes:{src:u,alt:T.getOr("")}}}),EA=(u,_,T)=>{const D="custom",B="remove",U=u.ariaLabel,W=u.value,J=u.iconContent.map(se=>Oc(se,_.icons,T));return{dom:(()=>{const se=rR,ce=J.getOr(""),ye={tag:"div",attributes:U.map(xe=>({title:_.translate(xe)})).getOr({}),classes:[se]};return W===D?{...ye,tag:"button",classes:[...ye.classes,"tox-swatches__picker-btn"],innerHtml:ce}:W===B?{...ye,classes:[...ye.classes,"tox-swatch--remove"],innerHtml:ce}:L(W)?{...ye,attributes:{...ye.attributes,"data-mce-color":W},styles:{"background-color":W},innerHtml:ce}:ye})(),optComponents:[]}},kR=u=>{const _=u.map(T=>({attributes:{title:hn.translate(T),id:In("menu-item")}})).getOr({});return{tag:"div",classes:[nR,R1],..._}},DR=(u,_,T,D)=>{const B={tag:"div",classes:[EN]},U=ye=>Js(ye,B,_.icons,D),W=()=>Q.some({dom:B}),J=T?u.iconContent.map(U).orThunk(W):Q.none(),ne=u.checkMark,se=Q.from(u.meta).fold(()=>pd,ye=>yn(ye,"style")?oe(bz,ye.style):pd),ce=u.htmlContent.fold(()=>u.textContent.map(se),ye=>Q.some(fO(ye,[oR])));return{dom:kR(u.ariaLabel),optComponents:[J,ce,u.shortcutContent.map(wu),ne,u.caret]}},r0=(u,_,T,D=Q.none())=>u.presets==="color"?EA(u,_,D):DR(u,_,T,D),pO=(u,_)=>Ue(u,"tooltipWorker").map(T=>[uO.config({lazySink:_.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:D=>({type:"submenu",item:D,overrides:{maxHeightFunction:sm}}),mode:"follow-highlight",onShow:(D,B)=>{T(U=>{uO.setComponents(D,[$w({element:Nt.fromDom(U)})])})}})]).getOr([]),PR=u=>Ol.DOM.encode(u),mO=(u,_)=>{const T=hn.translate(u),D=PR(T);if(_.length>0){const B=new RegExp(gz(_),"gi");return D.replace(B,U=>`<span class="tox-autocompleter-highlight">${U}</span>`)}else return D},gO=(u,_,T,D,B,U,W,J=!0)=>{const ne=r0({presets:D,textContent:Q.none(),htmlContent:T?u.text.map(se=>mO(se,_)):Q.none(),ariaLabel:u.text,iconContent:u.icon,shortcutContent:Q.none(),checkMark:Q.none(),caret:Q.none(),value:u.value},W.providers,J,u.icon);return df({data:xp(u),enabled:u.enabled,getApi:q({}),onAction:se=>B(u.value,u.meta),onSetup:q(V),triggersSubmenu:!1,itemBehaviours:pO(u.meta,W)},ne,U,W.providers)},RR=(u,_)=>Xe(u,T=>{switch(T.type){case"cardcontainer":return jo(T,RR(T.items,_));case"cardimage":return U1(T.src,T.classes,T.alt);case"cardtext":const B=T.name.exists(U=>Ke(_.cardText.highlightOn,U))?Q.from(_.cardText.matchText).getOr(""):"";return fO(mO(T.text,B),T.classes)}}),IR=(u,_,T,D)=>{const B=W=>({isEnabled:()=>!or.isDisabled(W),setEnabled:J=>{or.set(W,!J),Be(ga(W.element,"*"),ne=>{W.getSystem().getByDom(ne).each(se=>{se.hasConfigured(or)&&or.set(se,!J)})})}}),U={dom:kR(u.label),optComponents:[Q.some({dom:{tag:"div",classes:[AN,MN]},components:RR(u.items,D)})]};return df({data:xp({text:Q.none(),...u}),enabled:u.enabled,getApi:B,onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:Q.from(D.itemBehaviours).getOr([])},U,_,T.providers)},vO=(u,_,T,D,B,U,W,J=!0)=>{const ne=ce=>({setActive:ge=>{Rr.set(ce,ge)},isActive:()=>Rr.isOn(ce),isEnabled:()=>!or.isDisabled(ce),setEnabled:ge=>or.set(ce,!ge)}),se=r0({presets:T,textContent:_?u.text:Q.none(),htmlContent:Q.none(),ariaLabel:u.text,iconContent:u.icon,shortcutContent:_?u.shortcut:Q.none(),checkMark:_?Q.some(z1(W.icons)):Q.none(),caret:Q.none(),value:u.value},W,J);return ci(df({data:xp(u),enabled:u.enabled,getApi:ne,onAction:ce=>D(u.value),onSetup:ce=>(ce.setActive(B),V),triggersSubmenu:!1,itemBehaviours:[]},se,U,W),{toggling:{toggleClass:wN,toggleOnExecute:!1,selected:u.active,exclusive:!0}})},Mx=th(Dm(),vp()),yO=u=>({value:xO(u)}),bO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,_O=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,SO=u=>bO.test(u)||_O.test(u),xO=u=>xh(u,"#").toUpperCase(),CO=u=>SO(u)?Q.some({value:xO(u)}):Q.none(),xz=u=>({value:u.value.replace(bO,(T,D,B,U)=>D+D+B+B+U+U)}),Cz=u=>{const _=xz(u),T=_O.exec(_.value);return T===null?["FFFFFF","FF","FF","FF"]:T},TA=u=>{const _=u.toString(16);return(_.length===1?"0"+_:_).toUpperCase()},H1=u=>{const _=TA(u.red)+TA(u.green)+TA(u.blue);return yO(_)},wO=Math.min,EO=Math.max,kx=Math.round,TO=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,AO=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Om=(u,_,T,D)=>({red:u,green:_,blue:T,alpha:D}),$R=u=>{const _=parseInt(u,10);return _.toString()===u&&_>=0&&_<=255},MO=u=>{let _,T,D;const B=(u.hue||0)%360;let U=u.saturation/100,W=u.value/100;if(U=EO(0,wO(U,1)),W=EO(0,wO(W,1)),U===0)return _=T=D=kx(255*W),Om(_,T,D,1);const J=B/60,ne=W*U,se=ne*(1-Math.abs(J%2-1)),ce=W-ne;switch(Math.floor(J)){case 0:_=ne,T=se,D=0;break;case 1:_=se,T=ne,D=0;break;case 2:_=0,T=ne,D=se;break;case 3:_=0,T=se,D=ne;break;case 4:_=se,T=0,D=ne;break;case 5:_=ne,T=0,D=se;break;default:_=T=D=0}return _=kx(255*(_+ce)),T=kx(255*(T+ce)),D=kx(255*(D+ce)),Om(_,T,D,1)},Dx=u=>{const _=Cz(u),T=parseInt(_[1],16),D=parseInt(_[2],16),B=parseInt(_[3],16);return Om(T,D,B,1)},kO=(u,_,T,D)=>{const B=parseInt(u,10),U=parseInt(_,10),W=parseInt(T,10),J=parseFloat(D);return Om(B,U,W,J)},LR=u=>{if(u==="transparent")return Q.some(Om(0,0,0,0));const _=TO.exec(u);if(_!==null)return Q.some(kO(_[1],_[2],_[3],"1"));const T=AO.exec(u);return T!==null?Q.some(kO(T[1],T[2],T[3],T[4])):Q.none()},NR=u=>`rgba(${u.red},${u.green},${u.blue},${u.alpha})`,Eu=Om(255,0,0,1),wz=u=>{u.dispatch("SkinLoaded")},OR=(u,_)=>{u.dispatch("SkinLoadError",_)},DO=u=>{u.dispatch("ResizeEditor")},AA=(u,_)=>{u.dispatch("ResizeContent",_)},Ez=(u,_)=>{u.dispatch("ScrollContent",_)},BR=(u,_)=>{u.dispatch("TextColorChange",_)},PO=(u,_)=>{u.dispatch("AfterProgressState",{state:_})},RO=(u,_)=>u.dispatch("ResolveName",{name:_.nodeName.toLowerCase(),target:_}),Tz=(u,_)=>{u.dispatch("ToggleToolbarDrawer",{state:_})},Az=(u,_)=>{u.dispatch("StylesTextUpdate",_)},Mz=(u,_)=>{u.dispatch("AlignTextUpdate",_)},kz=(u,_)=>{u.dispatch("FontSizeTextUpdate",_)},Dz=(u,_)=>{u.dispatch("FontSizeInputTextUpdate",_)},IO=(u,_)=>{u.dispatch("BlocksTextUpdate",_)},$O=(u,_)=>{u.dispatch("FontFamilyTextUpdate",_)},Px=(u,_)=>()=>{u(),_()},Qs=u=>gd(u,"NodeChange",_=>{_.setEnabled(u.selection.isEditable())}),Pz=(u,_)=>T=>{const D=om(),B=()=>{T.setActive(u.formatter.match(_));const U=u.formatter.formatChanged(_,T.setActive);D.set(U)};return u.initialized?B():u.once("init",B),()=>{u.off("init",B),D.clear()}},MA=(u,_)=>T=>{const D=Qs(u)(T),B=Pz(u,_)(T);return()=>{D(),B()}},gd=(u,_,T)=>D=>{const B=()=>T(D),U=()=>{T(D),u.on(_,B)};return u.initialized?U():u.once("init",U),()=>{u.off("init",U),u.off(_,B)}},LO=u=>_=>()=>{u.undoManager.transact(()=>{u.focus(),u.execCommand("mceToggleFormat",!1,_.format)})},Bl=(u,_)=>()=>u.execCommand(_);var Bm=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const FR={},VR=(u,_=10)=>{const T=Bm.getItem(u),D=g(T)?JSON.parse(T):[],U=(se=>_-se.length<0?se.slice(0,_):se)(D),W=se=>{Te(U,se).each(J),U.unshift(se),U.length>_&&U.pop(),Bm.setItem(u,JSON.stringify(U))},J=se=>{U.splice(se,1)};return{add:W,state:()=>U.slice(0)}},kA=u=>Ue(FR,u).getOrThunk(()=>{const _=`tinymce-custom-colors-${u}`,T=Bm.getItem(_);if(R(T)){const B=Bm.getItem("tinymce-custom-colors");Bm.setItem(_,L(B)?B:"[]")}const D=VR(_,10);return FR[u]=D,D}),zR=u=>Xe(kA(u).state(),_=>({type:"choiceitem",text:_,icon:"checkmark",value:_})),UR=(u,_)=>{kA(u).add(_)},Rx=(u,_,T)=>({hue:u,saturation:_,value:T}),DA=u=>{let _=0,T=0,D=0;const B=u.red/255,U=u.green/255,W=u.blue/255,J=Math.min(B,Math.min(U,W)),ne=Math.max(B,Math.max(U,W));if(J===ne)return D=J,Rx(0,0,D*100);const se=B===J?U-W:W===J?B-U:W-B;return _=B===J?3:W===J?1:5,_=60*(_-se/(ne-J)),T=(ne-J)/ne,D=ne,Rx(Math.round(_),Math.round(T*100),Math.round(D*100))},Rz=u=>DA(Dx(u)),OO=u=>H1(MO(u)),Iz=u=>CO(u).orThunk(()=>LR(u).map(H1)).getOrThunk(()=>{const _=document.createElement("canvas");_.height=1,_.width=1;const T=_.getContext("2d");T.clearRect(0,0,_.width,_.height),T.fillStyle="#FFFFFF",T.fillStyle=u,T.fillRect(0,0,1,1);const D=T.getImageData(0,0,1,1).data,B=D[0],U=D[1],W=D[2],J=D[3];return H1(Om(B,U,W,J))}),PA="forecolor",RA="hilitecolor",BO=5,$z=u=>{const _=[];for(let T=0;T<u.length;T+=2)_.push({text:u[T+1],value:"#"+Iz(u[T]).value,icon:"checkmark",type:"choiceitem"});return _},hf=u=>_=>_.options.get(u),HR="#000000",Lz=u=>{const _=u.options.register,T=B=>z(B,g)?{value:$z(B),valid:!0}:{valid:!1,message:"Must be an array of strings."},D=B=>O(B)&&B>0?{value:B,valid:!0}:{valid:!1,message:"Must be a positive number."};_("color_map",{processor:T,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),_("color_map_background",{processor:T}),_("color_map_foreground",{processor:T}),_("color_cols",{processor:D,default:GR(u)}),_("color_cols_foreground",{processor:D,default:FO(u,PA)}),_("color_cols_background",{processor:D,default:FO(u,RA)}),_("custom_colors",{processor:"boolean",default:!0}),_("color_default_foreground",{processor:"string",default:HR}),_("color_default_background",{processor:"string",default:HR})},IA=(u,_)=>_===PA&&u.options.isSet("color_map_foreground")?hf("color_map_foreground")(u):_===RA&&u.options.isSet("color_map_background")?hf("color_map_background")(u):hf("color_map")(u),GR=(u,_="default")=>Math.max(BO,Math.ceil(Math.sqrt(IA(u,_).length))),FO=(u,_)=>{const T=hf("color_cols")(u),D=GR(u,_);return T===GR(u)?D:T},VO=(u,_="default")=>Math.round((()=>_===PA?hf("color_cols_foreground")(u):_===RA?hf("color_cols_background")(u):hf("color_cols")(u))()),zO=hf("custom_colors"),Nz=hf("color_default_foreground"),Oz=hf("color_default_background"),UO="rgba(0, 0, 0, 0)",Bz=u=>LR(u).exists(_=>_.alpha!==0),Fz=u=>If(u,_=>{if(Fo(_)){const T=mi(_,"background-color");return Vn(Bz(T),T)}else return Q.none()}).getOr(UO),HO=(u,_)=>{const T=Nt.fromDom(u.selection.getStart()),D=_==="hilitecolor"?Fz(T):mi(T,"color");return LR(D).map(B=>"#"+H1(B).value)},Vz=(u,_,T)=>{u.undoManager.transact(()=>{u.focus(),u.formatter.apply(_,{value:T}),u.nodeChanged()})},zz=(u,_)=>{u.undoManager.transact(()=>{u.focus(),u.formatter.remove(_,{value:null},void 0,!0),u.nodeChanged()})},$A=u=>{u.addCommand("mceApplyTextcolor",(_,T)=>{Vz(u,_,T)}),u.addCommand("mceRemoveTextcolor",_=>{zz(u,_)})},WR=u=>{const _="choiceitem",T={type:_,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return u?[T,{type:_,text:"Custom color",icon:"color-picker",value:"custom"}]:[T]},YR=(u,_,T,D)=>{T==="custom"?jO(u)(U=>{U.each(W=>{UR(_,W),u.execCommand("mceApplyTextcolor",_,W),D(W)})},HO(u,_).getOr(HR)):T==="remove"?(D(""),u.execCommand("mceRemoveTextcolor",_)):(D(T),u.execCommand("mceApplyTextcolor",_,T))},jR=(u,_,T)=>u.concat(zR(_).concat(WR(T))),GO=(u,_,T)=>D=>{D(jR(u,_,T))},ZR=(u,_,T)=>{const D=_==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";u.setIconFill(D,T)},WO=(u,_)=>{u.setTooltip(_)},YO=(u,_)=>T=>{const D=HO(u,_);return Xt(D,T.toUpperCase())},Ix=(u,_,T)=>{if(ze(T))return _==="forecolor"?"Text color":"Background color";const D=_==="forecolor"?"Text color {0}":"Background color {0}",B=jR(IA(u,_),_,!1),U=$e(B,W=>W.value===T).getOr({text:""}).text;return u.translate([D,u.translate(U)])},qR=(u,_,T,D)=>{u.ui.registry.addSplitButton(_,{tooltip:Ix(u,T,D.get()),presets:"color",icon:_==="forecolor"?"text-color":"highlight-bg-color",select:YO(u,T),columns:VO(u,T),fetch:GO(IA(u,T),T,zO(u)),onAction:B=>{YR(u,T,D.get(),V)},onItemAction:(B,U)=>{YR(u,T,U,W=>{D.set(W),BR(u,{name:_,color:W})})},onSetup:B=>{ZR(B,_,D.get());const U=W=>{W.name===_&&(ZR(B,W.name,W.color),WO(B,Ix(u,T,W.color)))};return u.on("TextColorChange",U),Px(Qs(u)(B),()=>{u.off("TextColorChange",U)})}})},KR=(u,_,T,D,B)=>{u.ui.registry.addNestedMenuItem(_,{text:D,icon:_==="forecolor"?"text-color":"highlight-bg-color",onSetup:U=>(WO(U,Ix(u,T,B.get())),ZR(U,_,B.get()),Qs(u)(U)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:YO(u,T),initData:{storageKey:T},onAction:U=>{YR(u,T,U.value,W=>{B.set(W),BR(u,{name:_,color:W})})}}]})},jO=u=>(_,T)=>{let D=!1;const B=J=>{const se=J.getData().colorpicker;D?(_(Q.from(se)),J.close()):u.windowManager.alert(u.translate(["Invalid hex color code: {0}",se]))},U=(J,ne)=>{ne.name==="hex-valid"&&(D=ne.value)},W={colorpicker:T};u.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:W,onAction:U,onSubmit:B,onClose:V,onCancel:()=>{_(Q.none())}})},XR=u=>{$A(u);const _=Nz(u),T=Oz(u),D=sr(_),B=sr(T);qR(u,"forecolor","forecolor",D),qR(u,"backcolor","hilitecolor",B),KR(u,"forecolor","forecolor","Text color",D),KR(u,"backcolor","hilitecolor","Background color",B)},JR=(u,_,T,D,B,U,W,J)=>{const ne=mA(_),ce=Uz(_,T,D,B!=="color"?"normal":"color",U,W,J);return gA(u,ne,ce,D,{menuType:B})},Uz=(u,_,T,D,B,U,W)=>Yr(Xe(u,J=>J.type==="choiceitem"?oO(J).fold(sf,ne=>Q.some(vO(ne,T===1,D,_,U(ne.value),B,W,mA(u)))):Q.none())),LA=(u,_)=>{const T=_p(_);return u===1?{mode:"menu",moveOnTab:!0}:u==="auto"?{mode:"grid",selector:"."+T.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(_==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:B=>_==="color"?Ri(B.element,"[aria-checked=true]"):Q.none()}},Hz=(u,_)=>u===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:u==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:_==="color"?".tox-swatches__row":".tox-collection__group",cell:_==="color"?`.${rR}`:`.${R1}`}},Gz=(u,_)=>{const T=Wz(u,_),D=_.colorinput.getColorCols(u.initData.storageKey),B="color",W={...JR(In("menu-value"),T,J=>{u.onAction({value:J})},D,B,fh.CLOSE_ON_EXECUTE,u.select.getOr(me),_.shared.providers),markers:_p(B),movement:LA(D,B)};return{type:"widget",data:{value:In("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Mx.widget(yp.sketch(W))]}},Wz=(u,_)=>{const T=u.initData.allowCustomColors&&_.colorinput.hasCustomColors();return u.initData.colors.fold(()=>jR(_.colorinput.getColors(u.initData.storageKey),u.initData.storageKey,T),D=>D.concat(WR(T)))},ZO=In("cell-over"),qO=In("cell-execute"),Yz=u=>(_,T)=>u.shared.providers.translate(`${T} columns, ${_} rows`),jz=(u,_,T)=>{const D=W=>tr(W,ZO,{row:u,col:_}),B=W=>tr(W,qO,{row:u,col:_}),U=(W,J)=>{J.stop(),B(W)};return as({dom:{tag:"div",attributes:{role:"button","aria-label":T}},behaviours:sn([Dr("insert-table-picker-cell",[Vt(Vd(),dr.focus),Vt(kl(),B),Vt(Rh(),U),Vt(cu(),U)]),Rr.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),dr.config({onFocus:D})])})},NA=(u,_,T)=>{const D=[];for(let B=0;B<_;B++){const U=[];for(let W=0;W<T;W++){const J=u(B+1,W+1);U.push(jz(B,W,J))}D.push(U)}return D},QR=(u,_,T,D,B)=>{for(let U=0;U<D;U++)for(let W=0;W<B;W++)Rr.set(u[U][W],U<=_&&W<=T)},eI=u=>Fe(u,_=>Xe(_,Pl)),tI=(u,_)=>Pi(`${_}x${u}`),Zz={inserttable:(u,_)=>{const B=Yz(_),U=NA(B,10,10),W=tI(0,0),J=Po({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[W],behaviours:sn([wr.config({})])});return{type:"widget",data:{value:In("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Mx.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:eI(U).concat(J.asSpec()),behaviours:sn([Dr("insert-table-picker",[ii(ne=>{wr.set(J.get(ne),[W])}),f_(ZO,(ne,se,ce)=>{const{row:ge,col:ye}=ce.event;QR(U,ge,ye,10,10),wr.set(J.get(ne),[tI(ge+1,ye+1)])}),f_(qO,(ne,se,ce)=>{const{row:ge,col:ye}=ce.event;u.onAction({numRows:ge+1,numColumns:ye+1}),Kr(ne,Rg())})]),Xn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:Gz},nI=(u,_)=>Ue(Zz,u.fancytype).map(T=>T(u,_)),rI=(u,_,T,D=!0,B=!1)=>{const U=B?Sz(T.icons):md(T.icons),W=ne=>({isEnabled:()=>!or.isDisabled(ne),setEnabled:se=>or.set(ne,!se),setIconFill:(se,ce)=>{Ri(ne.element,`svg path[class="${se}"], rect[class="${se}"]`).each(ge=>{bn(ge,"fill",ce)})},setTooltip:se=>{const ce=T.translate(se);hg(ne.element,{"aria-label":ce,title:ce})}}),J=r0({presets:"normal",iconContent:u.icon,textContent:u.text,htmlContent:Q.none(),ariaLabel:u.text,caret:Q.some(U),checkMark:Q.none(),shortcutContent:u.shortcut},T,D);return df({data:xp(u),getApi:W,enabled:u.enabled,onAction:V,onSetup:u.onSetup,triggersSubmenu:!0,itemBehaviours:[]},J,_,T)},OA=(u,_,T,D=!0)=>{const B=W=>({isEnabled:()=>!or.isDisabled(W),setEnabled:J=>or.set(W,!J)}),U=r0({presets:"normal",iconContent:u.icon,textContent:u.text,htmlContent:Q.none(),ariaLabel:u.text,caret:Q.none(),checkMark:Q.none(),shortcutContent:u.shortcut},T,D);return df({data:xp(u),getApi:B,enabled:u.enabled,onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:[]},U,_,T)},KO=u=>({type:"separator",dom:{tag:"div",classes:[R1,L5]},components:u.text.map(Pi).toArray()}),qz=(u,_,T,D=!0)=>{const B=W=>({setActive:J=>{Rr.set(W,J)},isActive:()=>Rr.isOn(W),isEnabled:()=>!or.isDisabled(W),setEnabled:J=>or.set(W,!J)}),U=r0({iconContent:u.icon,textContent:u.text,htmlContent:Q.none(),ariaLabel:u.text,checkMark:Q.some(z1(T.icons)),caret:Q.none(),shortcutContent:u.shortcut,presets:"normal",meta:u.meta},T,D);return ci(df({data:xp(u),enabled:u.enabled,getApi:B,onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:[]},U,_,T),{toggling:{toggleClass:wN,toggleOnExecute:!1,selected:u.active}})},Kz=gO,XO=KO,Xz=OA,Jz=rI,Qz=qz,e6=nI,t6=IR;var n6=Object.freeze({__proto__:null,getCoupled:(u,_,T,D)=>T.getOrCreate(u,_,D),getExistingCoupled:(u,_,T,D)=>T.getExisting(u,_,D)}),r6=[La("others",Bd(kr.value,Fi()))],JO=Object.freeze({__proto__:null,init:()=>{const u={},_=(U,W)=>{if(xn(U.others).length===0)throw new Error("Cannot find any known coupled components");return Ue(u,W)},T=(U,W,J)=>_(W,J).getOrThunk(()=>{const se=Ue(W.others,J).getOrDie("No information found for coupled component: "+J)(U),ce=U.getSystem().build(se);return u[J]=ce,ce}),D=(U,W,J)=>_(W,J).orThunk(()=>(Ue(W.others,J).getOrDie("No information found for coupled component: "+J),Q.none())),B=q({});return Xs({readState:B,getExisting:D,getOrCreate:T})}});const zi=Ba({fields:r6,name:"coupling",apis:n6,state:JO}),oI=u=>{let _=Q.none(),T=[];const D=se=>oI(ce=>{B(ge=>{ce(se(ge))})}),B=se=>{W()?ne(se):T.push(se)},U=se=>{W()||(_=Q.some(se),J(T),T=[])},W=()=>_.isSome(),J=se=>{Be(se,ne)},ne=se=>{_.each(ce=>{setTimeout(()=>{se(ce)},0)})};return u(U),{get:B,map:D,isReady:W}},o6={nu:oI,pure:u=>oI(_=>{_(u)})},i6=u=>{setTimeout(()=>{throw u},0)},Fm=u=>{const _=ne=>{u().then(ne,i6)};return{map:ne=>Fm(()=>u().then(ne)),bind:ne=>Fm(()=>u().then(se=>ne(se).toPromise())),anonBind:ne=>Fm(()=>u().then(()=>ne.toPromise())),toLazy:()=>o6.nu(_),toCached:()=>{let ne=null;return Fm(()=>(ne===null&&(ne=u()),ne))},toPromise:u,get:_}},Ds={nu:u=>Fm(()=>new Promise(u)),pure:u=>Fm(()=>Promise.resolve(u))},QO=q("sink"),eB=q(pl({name:QO(),overrides:q({dom:{tag:"div"},behaviours:sn([Ja.config({useFixed:be})]),events:ui([Ud(Ks()),Ud(oi()),Ud(Rh())])})})),tB=(u,_)=>{const T=u.getHotspot(_).getOr(_),D="hotspot",B=u.getAnchorOverrides();return u.layouts.fold(()=>({type:D,hotspot:T,overrides:B}),U=>({type:D,hotspot:T,overrides:B,layouts:U}))},a6=(u,_,T)=>{const D=u.fetch;return D(T).map(_)},s6=(u,_,T,D,B,U,W)=>{const J=a6(u,_,D),ne=nB(D,u);return J.map(se=>se.bind(ce=>Q.from(vl.sketch({...U.menu(),uid:Hd(""),data:ce,highlightOnOpen:W,onOpenMenu:(ge,ye)=>{const xe=ne().getOrDie();Ja.position(xe,ye,{anchor:T}),io.decloak(B)},onOpenSubmenu:(ge,ye,xe)=>{const ke=ne().getOrDie();Ja.position(ke,xe,{anchor:{type:"submenu",item:ye}}),io.decloak(B)},onRepositionMenu:(ge,ye,xe)=>{const ke=ne().getOrDie();Ja.position(ke,ye,{anchor:T}),Be(xe,He=>{Ja.position(ke,He.triggeredMenu,{anchor:{type:"submenu",item:He.triggeringItem}})})},onEscape:()=>(dr.focus(D),io.close(B),Q.some(!0))}))))},BA=(u,_,T,D,B,U,W)=>{const J=tB(u,T);return s6(u,_,J,T,D,B,W).map(se=>(se.fold(()=>{io.isOpen(D)&&io.close(D)},ce=>{io.cloak(D),io.open(D,ce),U(D)}),D))},l6=(u,_,T,D,B,U,W)=>(io.close(D),Ds.pure(D)),iI=(u,_,T,D,B,U)=>{const W=zi.getCoupled(T,"sandbox");return(io.isOpen(W)?l6:BA)(u,_,T,W,D,B,U)},c6=(u,_,T)=>{const D=eo.getCurrent(_).getOr(_),B=os(u.element);T?$r(D.element,"min-width",B+"px"):Co(D.element,B)},nB=(u,_)=>u.getSystem().getByUid(_.uid+"-"+QO()).map(T=>()=>kr.value(T)).getOrThunk(()=>_.lazySink.fold(()=>()=>kr.error(new Error("No internal sink is specified, nor could an external sink be found")),T=>()=>T(u))),rB=u=>{io.getState(u).each(_=>{vl.repositionMenus(_)})},aI=(u,_,T)=>{const D=ed(),B=(J,ne)=>{const se=tB(u,_);D.link(_.element),u.matchWidth&&c6(se.hotspot,ne,u.useMinWidth),u.onOpen(se,J,ne),T!==void 0&&T.onOpen!==void 0&&T.onOpen(J,ne)},U=(J,ne)=>{D.unlink(_.element),T!==void 0&&T.onClose!==void 0&&T.onClose(J,ne)},W=nB(_,u);return{dom:{tag:"div",classes:u.sandboxClasses,attributes:{id:D.id,role:"listbox"}},behaviours:Ic.augment(u.sandboxBehaviours,[Sn.config({store:{mode:"memory",initialValue:_}}),io.config({onOpen:B,onClose:U,isPartOf:(J,ne,se)=>Wd(ne,se)||Wd(_,se),getAttachPoint:()=>W().getOrDie()}),eo.config({find:J=>io.getState(J).bind(ne=>eo.getCurrent(ne))}),dl.config({channels:{...Wy({isExtraPart:me}),...op({doReposition:rB})}})])}},oB=u=>{const _=zi.getCoupled(u,"sandbox");rB(_)},sI=()=>[ft("sandboxClasses",[]),Ic.field("sandboxBehaviours",[eo,dl,io,Sn])],u6=q([Ft("dom"),Ft("fetch"),so("onOpen"),ll("onExecute"),ft("getHotspot",Q.some),ft("getAnchorOverrides",q({})),gu(),ia("dropdownBehaviours",[Rr,zi,Xn,dr]),Ft("toggleClass"),ft("eventOrder",{}),Ro("lazySink"),ft("matchWidth",!1),ft("useMinWidth",!1),Ro("role")].concat(sI())),d6=q([$c({schema:[py(),ft("fakeFocus",!1)],name:"menu",defaults:u=>({onExecute:u.onExecute})}),eB()]),h6=(u,_,T,D)=>{const B=ce=>Ue(u.dom,"attributes").bind(ge=>Ue(ge,ce)),U=ce=>{io.getState(ce).each(ge=>{vl.highlightPrimary(ge)})},W=(ce,ge,ye)=>iI(u,ie,ce,D,ge,ye),J=ce=>{W(ce,U,Ms.HighlightMenuAndItem).get(V)},ne={expand:ce=>{Rr.isOn(ce)||W(ce,V,Ms.HighlightNone).get(V)},open:ce=>{Rr.isOn(ce)||W(ce,V,Ms.HighlightMenuAndItem).get(V)},refetch:ce=>zi.getExistingCoupled(ce,"sandbox").fold(()=>W(ce,V,Ms.HighlightMenuAndItem).map(V),ye=>BA(u,ie,ce,ye,D,V,Ms.HighlightMenuAndItem).map(V)),isOpen:Rr.isOn,close:ce=>{Rr.isOn(ce)&&W(ce,V,Ms.HighlightMenuAndItem).get(V)},repositionMenus:ce=>{Rr.isOn(ce)&&oB(ce)}},se=(ce,ge)=>(zd(ce),Q.some(!0));return{uid:u.uid,dom:u.dom,components:_,behaviours:aa(u.dropdownBehaviours,[Rr.config({toggleClass:u.toggleClass,aria:{mode:"expanded"}}),zi.config({others:{sandbox:ce=>aI(u,ce,{onOpen:()=>Rr.on(ce),onClose:()=>Rr.off(ce)})}}),Xn.config({mode:"special",onSpace:se,onEnter:se,onDown:(ce,ge)=>{if(Tu.isOpen(ce)){const ye=zi.getCoupled(ce,"sandbox");U(ye)}else Tu.open(ce);return Q.some(!0)},onEscape:(ce,ge)=>Tu.isOpen(ce)?(Tu.close(ce),Q.some(!0)):Q.none()}),dr.config({})]),events:Su(Q.some(J)),eventOrder:{...u.eventOrder,[kl()]:["disabling","toggling","alloy.base.behaviour"]},apis:ne,domModification:{attributes:{"aria-haspopup":"true",...u.role.fold(()=>({}),ce=>({role:ce})),...u.dom.tag==="button"?{type:B("type").getOr("button")}:{}}}}},Tu=us({name:"Dropdown",configFields:u6(),partFields:d6(),factory:h6,apis:{open:(u,_)=>u.open(_),refetch:(u,_)=>u.refetch(_),expand:(u,_)=>u.expand(_),close:(u,_)=>u.close(_),isOpen:(u,_)=>u.isOpen(_),repositionMenus:(u,_)=>u.repositionMenus(_)}}),f6=u=>{switch(u.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:u}}},p6=u=>{const _=Sn.getValue(u),T=hA(u).map($N);Tu.refetch(_).get(()=>{const D=zi.getCoupled(_,"sandbox");T.each(B=>hA(D).each(U=>uR(U,B)))})},m6=(u,_)=>{g6(u).each(T=>{sk(u,T.element,_.event.eventType,_.event.interactionEvent)})},g6=u=>io.getState(u).bind(To.getHighlighted).bind(To.getHighlighted),v6=u=>ra(u.element,fA)?Q.some(u.element):Ri(u.element,"."+fA),lI=(u,_,T)=>{cR(u).each(D=>{dR(D,T),v6(_).each(U=>{Ls(U,"id").each(W=>bn(D.element,"aria-controls",W))})}),bn(T.element,"aria-selected","true")},y6=(u,_,T)=>{bn(T.element,"aria-selected","false")},b6=u=>{cR(u).each(_=>dr.focus(_))},_6=u=>zi.getExistingCoupled(u,"sandbox").bind(hA).map($N).map(T=>T.fetchPattern).getOr("");var $x;(function(u){u[u.ContentFocus=0]="ContentFocus",u[u.UiFocus=1]="UiFocus"})($x||($x={}));const S6=(u,_,T,D,B)=>{const U=T.shared.providers,W=J=>B?{...J,shortcut:Q.none(),icon:J.text.isSome()?Q.none():J.icon}:J;switch(u.type){case"menuitem":return aO(u).fold(sf,J=>Q.some(Xz(W(J),_,U,D)));case"nestedmenuitem":return cz(u).fold(sf,J=>Q.some(Jz(W(J),_,U,D,B)));case"togglemenuitem":return dz(u).fold(sf,J=>Q.some(Qz(W(J),_,U,D)));case"separator":return _R(u).fold(sf,J=>Q.some(XO(J)));case"fancymenuitem":return sz(u).fold(sf,J=>e6(J,T));default:return console.error("Unknown item in general menu",u),Q.none()}},x6=(u,_,T,D,B,U,W)=>{const J=D===1,ne=!J||mA(u);return Yr(Xe(u,se=>{switch(se.type){case"separator":return Z5(se).fold(sf,ce=>Q.some(XO(ce)));case"cardmenuitem":return nO(se).fold(sf,ce=>Q.some(t6({...ce,onAction:ge=>{ce.onAction(ge),T(ce.value,ce.meta)}},B,U,{itemBehaviours:pO(ce.meta,U),cardText:{matchText:_,highlightOn:W}})));case"autocompleteitem":default:return YN(se).fold(sf,ce=>Q.some(Kz(ce,_,J,"normal",T,B,U,ne)))}}))},iB=(u,_,T,D,B,U)=>{const W=mA(_),J=Yr(Xe(_,ce=>{const ge=xe=>B?!yn(xe,"text"):W,ye=xe=>S6(xe,T,D,ge(xe),B);return ce.type==="nestedmenuitem"&&ce.getSubmenuItems().length<=0?ye({...ce,enabled:!1}):ye(ce)})),ne=f6(U);return(B?Sx:gA)(u,W,J,1,ne)},FA=u=>vl.singleData(u.value,u),C6=(u,_,T,D)=>{const B=LA(_,D),U=_p(D);return{data:FA({...u,movement:B,menuBehaviours:Tx.unnamedEvents(_!=="auto"?[]:[ii((W,J)=>{wR(W,4,U.item).each(({numColumns:ne,numRows:se})=>{Xn.setGridSize(W,se,ne)})})])}),menu:{markers:_p(D),fakeFocus:T===$x.ContentFocus}}},w6=(u,_)=>eR(Nt.fromDom(_.startContainer)).map(T=>{const D=u.createRng();return D.selectNode(T.dom),D}),E6={register:(u,_)=>{const T=In("autocompleter"),D=sr(!1),B=sr(!1),U=as(fi.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:T}},components:[],fireDismissalEventInstead:{},inlineBehaviours:sn([Dr("dismissAutocompleter",[Vt(Zu(),()=>ce()),Vt(Zp(),(pt,Je)=>{Ls(Je.event.target,"id").each(Ze=>bn(Nt.fromDom(u.getBody()),"aria-activedescendant",Ze))})])]),lazySink:_.getSink})),W=()=>fi.isOpen(U),J=B.get,ne=()=>{if(W()){fi.hide(U),u.dom.remove(T,!1);const pt=Nt.fromDom(u.getBody());Ls(pt,"aria-owns").filter(Je=>Je===T).each(()=>{Ni(pt,"aria-owns"),Ni(pt,"aria-activedescendant")})}},se=()=>fi.getContent(U).bind(pt=>Ae(pt.components(),0)),ce=()=>u.execCommand("mceAutocompleterClose"),ge=pt=>{const Je=Wt(pt,Ze=>Q.from(Ze.columns)).getOr(1);return Fe(pt,Ze=>{const dt=Ze.items;return x6(dt,Ze.matchText,(Mt,nn)=>{const $t=u.selection.getRng();w6(u.dom,$t).each(un=>{const mn={hide:()=>ce(),reload:Br=>{ne(),u.execCommand("mceAutocompleterReload",!1,{fetchOptions:Br})}};D.set(!0),Ze.onAction(mn,un,Mt,nn),D.set(!1)})},Je,fh.BUBBLE_TO_SANDBOX,_,Ze.highlightOn)})},ye=(pt,Je)=>{R5(Nt.fromDom(u.getBody())).each(Ze=>{const dt=Wt(pt,Mt=>Q.from(Mt.columns)).getOr(1);fi.showMenuAt(U,{anchor:{type:"node",root:Nt.fromDom(u.getBody()),node:Q.from(Ze)}},C6(gA("autocompleter-value",!0,Je,dt,{menuType:"normal"}),dt,$x.ContentFocus,"normal"))}),se().each(To.highlightFirst)},xe=pt=>{const Je=ge(pt);Je.length>0?(ye(pt,Je),bn(Nt.fromDom(u.getBody()),"aria-owns",T),u.inline||ke()):ne()},ke=()=>{u.dom.get(T)&&u.dom.remove(T,!1);const pt=u.getDoc().documentElement,Je=u.selection.getNode(),Ze=hk(U.element);Af(Ze,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Je.offsetTop}px`,left:`${Je.offsetLeft}px`}),u.dom.add(pt,Ze.dom),Ri(Ze,'[role="menu"]').each(dt=>{Do(dt,"position"),Do(dt,"max-height")})};u.on("AutocompleterStart",({lookupData:pt})=>{B.set(!0),D.set(!1),xe(pt)}),u.on("AutocompleterUpdate",({lookupData:pt})=>xe(pt)),u.on("AutocompleterEnd",()=>{ne(),B.set(!1),D.set(!1)});const He={cancelIfNecessary:ce,isMenuOpen:W,isActive:J,isProcessingAction:D.get,getMenu:se};I5.setup(He,u)}},aB=["visible","hidden","clip"],sB=u=>lg(u).length>0&&!Ke(aB,u),cI=u=>{if(Cf(u)){const _=mi(u,"overflow-x"),T=mi(u,"overflow-y");return sB(_)||sB(T)}else return!1},T6=u=>{const _=rS(u,cI),T=_.length===0?Rb(u).map(Qc).map(D=>rS(D,cI)).getOr([]):_;return ht(T).map(D=>({element:D,others:T.slice(1)}))},Vm=(u,_)=>of(u)?T6(_):Q.none(),G1=u=>{const _=[...Xe(u.others,Bi),gs()];return jM(Bi(u.element),_)},Lx=(u,_,T)=>Ec(u,_,T).isSome(),lB=(u,_)=>{let T=null;return{cancel:()=>{T!==null&&(clearTimeout(T),T=null)},schedule:(...U)=>{T=setTimeout(()=>{u.apply(null,U),T=null},_)}}},cB=5,A6=400,uB=u=>{const _=u.raw;return _.touches===void 0||_.touches.length!==1?Q.none():Q.some(_.touches[0])},M6=(u,_)=>{const T=Math.abs(u.clientX-_.x),D=Math.abs(u.clientY-_.y);return T>cB||D>cB},k6=u=>{const _=ai(),T=sr(!1),D=lB(se=>{u.triggerEvent(s_(),se),T.set(!0)},A6),B=se=>(uB(se).each(ce=>{D.cancel();const ge={x:ce.clientX,y:ce.clientY,target:se.target};D.schedule(se),T.set(!1),_.set(ge)}),Q.none()),U=se=>(D.cancel(),uB(se).each(ce=>{_.on(ge=>{M6(ce,ge)&&_.clear()})}),Q.none()),W=se=>{D.cancel();const ce=ge=>ni(ge.target,se.target);return _.get().filter(ce).map(ge=>T.get()?(se.prevent(),!1):u.triggerEvent(cu(),se))},J=is([{key:Fd(),value:B},{key:Wp(),value:U},{key:$f(),value:W}]);return{fireIfReady:(se,ce)=>Ue(J,ce).bind(ge=>ge(se))}},D6=u=>u.raw.which===YD[0]&&!Ke(["input","textarea"],Ei(u.target))&&!Lx(u.target,'[contenteditable="true"]'),P6=(u,_)=>{const T={stopBackspace:!0,..._},D=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],B=k6(T),U=Xe(D.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),xe=>Fa(u,xe,ke=>{B.fireIfReady(ke,xe).each(pt=>{pt&&ke.kill()}),T.triggerEvent(xe,ke)&&ke.kill()})),W=ai(),J=Fa(u,"paste",xe=>{B.fireIfReady(xe,"paste").each(He=>{He&&xe.kill()}),T.triggerEvent("paste",xe)&&xe.kill(),W.set(setTimeout(()=>{T.triggerEvent(a_(),xe)},0))}),ne=Fa(u,"keydown",xe=>{T.triggerEvent("keydown",xe)?xe.kill():T.stopBackspace&&D6(xe)&&xe.prevent()}),se=Fa(u,"focusin",xe=>{T.triggerEvent("focusin",xe)&&xe.kill()}),ce=ai(),ge=Fa(u,"focusout",xe=>{T.triggerEvent("focusout",xe)&&xe.kill(),ce.set(setTimeout(()=>{T.triggerEvent(i_(),xe)},0))});return{unbind:()=>{Be(U,xe=>{xe.unbind()}),ne.unbind(),se.unbind(),ge.unbind(),J.unbind(),W.on(clearTimeout),ce.on(clearTimeout)}}},dB=(u,_)=>{const T=Ue(u,"target").getOr(_);return sr(T)},R6=(u,_)=>{const T=sr(!1),D=sr(!1);return{stop:()=>{T.set(!0)},cut:()=>{D.set(!0)},isStopped:T.get,isCut:D.get,event:u,setSource:_.set,getSource:_.get}},hB=u=>{const _=sr(!1);return{stop:()=>{_.set(!0)},cut:V,isStopped:_.get,isCut:me,event:u,setSource:he("Cannot set source of a broadcasted event"),getSource:he("Cannot get source of a broadcasted event")}},Nx=il.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),fB=(u,_,T,D,B,U)=>{const W=u(_,D),J=R6(T,B);return W.fold(()=>(U.logEventNoHandlers(_,D),Nx.complete()),ne=>{const se=ne.descHandler;return Bg(se)(J),J.isStopped()?(U.logEventStopped(_,ne.element,se.purpose),Nx.stopped()):J.isCut()?(U.logEventCut(_,ne.element,se.purpose),Nx.complete()):Kc(ne.element).fold(()=>(U.logNoParent(_,ne.element,se.purpose),Nx.complete()),ge=>(U.logEventResponse(_,ne.element,se.purpose),Nx.resume(ge)))})},pB=(u,_,T,D,B,U)=>fB(u,_,T,D,B,U).fold(be,W=>pB(u,_,T,W,B,U),me),I6=(u,_,T,D,B)=>{const U=dB(T,D);return fB(u,_,T,D,U,B)},$6=(u,_,T)=>{const D=hB(_);return Be(u,B=>{const U=B.descHandler;Bg(U)(D)}),D.isStopped()},uI=(u,_,T,D)=>mB(u,_,T,T.target,D),mB=(u,_,T,D,B)=>{const U=dB(T,D);return pB(u,_,T,D,U,B)},L6=(u,_)=>({element:u,descHandler:_}),N6=(u,_)=>({id:u,descHandler:_}),gB=()=>{const u={},_=(W,J,ne)=>{kn(ne,(se,ce)=>{const ge=u[ce]!==void 0?u[ce]:{};ge[J]=sy(se,W),u[ce]=ge})},T=(W,J)=>Ju(J).bind(ne=>Ue(W,ne)).map(ne=>L6(J,ne));return{registerId:_,unregisterId:W=>{kn(u,(J,ne)=>{yn(J,W)&&delete J[W]})},filterByType:W=>Ue(u,W).map(J=>Lr(J,(ne,se)=>N6(se,ne))).getOr([]),find:(W,J,ne)=>Ue(u,J).bind(se=>If(ne,ce=>T(se,ce),W))}},vB=()=>{const u=gB(),_={},T=se=>{const ce=se.element;return Ju(ce).getOrThunk(()=>Sw("uid-",se.element))},D=(se,ce)=>{const ge=_[ce];if(ge===se)U(se);else throw new Error('The tagId "'+ce+'" is already used by: '+Xu(ge.element)+`
Cannot use it for: `+Xu(se.element)+`
The conflicting element is`+(ba(ge.element)?" ":" not ")+"already in the DOM")},B=se=>{const ce=T(se);Dn(_,ce)&&D(se,ce);const ge=[se];u.registerId(ge,ce,se.events),_[ce]=se},U=se=>{Ju(se.element).each(ce=>{delete _[ce],u.unregisterId(ce)})};return{find:(se,ce,ge)=>u.find(se,ce,ge),filter:se=>u.filterByType(se),register:B,unregister:U,getById:se=>Ue(_,se)}},ph=ml({name:"Container",factory:u=>{const{attributes:_,...T}=u.dom;return{uid:u.uid,dom:{tag:"div",attributes:{role:"presentation",..._},...T},components:u.components,behaviours:eh(u.containerBehaviours),events:u.events,domModification:u.domModification,eventOrder:u.eventOrder}},configFields:[ft("components",[]),ia("containerBehaviours",[]),ft("events",{}),ft("domModification",{}),ft("eventOrder",{})]}),VA=u=>{const _=Je=>Kc(u.element).fold(be,Ze=>ni(Je,Ze)),T=vB(),D=(Je,Ze)=>T.find(_,Je,Ze),B=P6(u.element,{triggerEvent:(Je,Ze)=>C_(Je,Ze.target,dt=>uI(D,Je,Ze,dt))}),U={debugInfo:q("real"),triggerEvent:(Je,Ze,dt)=>{C_(Je,Ze,Mt=>mB(D,Je,dt,Ze,Mt))},triggerFocus:(Je,Ze)=>{Ju(Je).fold(()=>{Il(Je)},dt=>{C_(Ih(),Je,Mt=>(I6(D,Ih(),{originator:Ze,kill:V,prevent:V,target:Je},Je,Mt),!1))})},triggerEscape:(Je,Ze)=>{U.triggerEvent("keydown",Je.element,Ze.event)},getByUid:Je=>He(Je),getByDom:Je=>pt(Je),build:as,buildOrPatch:hy,addToGui:Je=>{ne(Je)},removeFromGui:Je=>{se(Je)},addToWorld:Je=>{W(Je)},removeFromWorld:Je=>{J(Je)},broadcast:Je=>{ye(Je)},broadcastOn:(Je,Ze)=>{xe(Je,Ze)},broadcastEvent:(Je,Ze)=>{ke(Je,Ze)},isConnected:be},W=Je=>{Je.connect(U),ts(Je.element)||(T.register(Je),Be(Je.components(),W),U.triggerEvent(X0(),Je.element,{target:Je.element}))},J=Je=>{ts(Je.element)||(Be(Je.components(),J),T.unregister(Je)),Je.disconnect()},ne=Je=>{Xd(u,Je)},se=Je=>{Jd(Je)},ce=()=>{B.unbind(),nu(u.element)},ge=Je=>{const Ze=T.filter(Of());Be(Ze,dt=>{const Mt=dt.descHandler;Bg(Mt)(Je)})},ye=Je=>{ge({universal:!0,data:Je})},xe=(Je,Ze)=>{ge({universal:!1,channels:Je,data:Ze})},ke=(Je,Ze)=>{const dt=T.filter(Je);return $6(dt,Ze)},He=Je=>T.getById(Je).fold(()=>kr.error(new Error('Could not find component with uid: "'+Je+'" in system.')),kr.value),pt=Je=>{const Ze=Ju(Je).getOr("not found");return He(Ze)};return W(u),{root:u,element:u.element,destroy:ce,add:ne,remove:se,getByUid:He,getByDom:pt,addToWorld:W,removeFromWorld:J,broadcast:ye,broadcastOn:xe,broadcastEvent:ke}},O6=(u,_)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Xe(u.items,_.interpreter)}),B6=q([ft("prefix","form-field"),ia("fieldBehaviours",[eo,Sn])]),F6=q([pl({schema:[Ft("dom")],name:"label"}),pl({factory:{sketch:u=>({uid:u.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:u.text}})},schema:[Ft("text")],name:"aria-descriptor"}),cs({factory:{sketch:u=>{const _=Gp(u,["factory"]);return u.factory.sketch(_)}},schema:[Ft("factory")],name:"field"})]),V6=(u,_,T,D)=>{const B=aa(u.fieldBehaviours,[eo.config({find:J=>Xo(J,u,"field")}),Sn.config({store:{mode:"manual",getValue:J=>eo.getCurrent(J).bind(Sn.getValue),setValue:(J,ne)=>{eo.getCurrent(J).each(se=>{Sn.setValue(se,ne)})}}})]),U=ui([ii((J,ne)=>{const se=UE(J,u,["label","field","aria-descriptor"]);se.field().each(ce=>{const ge=In(u.prefix);se.label().each(ye=>{bn(ye.element,"for",ge),bn(ce.element,"id",ge)}),se["aria-descriptor"]().each(ye=>{const xe=In(u.prefix);bn(ye.element,"id",xe),bn(ce.element,"aria-describedby",xe)})})})]),W={getField:J=>Xo(J,u,"field"),getLabel:J=>Xo(J,u,"label")};return{uid:u.uid,dom:u.dom,components:_,behaviours:B,events:U,apis:W}},No=us({name:"FormField",configFields:B6(),partFields:F6(),factory:V6,apis:{getField:(u,_)=>u.getField(_),getLabel:(u,_)=>u.getLabel(_)}});var zA=Object.freeze({__proto__:null,exhibit:(u,_)=>Ql({attributes:is([{key:_.tabAttr,value:"true"}])})}),z6=[ft("tabAttr","data-alloy-tabstop")];const _i=Ba({fields:z6,name:"tabstopping",active:zA});var U6=tinymce.util.Tools.resolve("tinymce.html.Entities");const Ox=(u,_,T,D)=>{const B=G6(u,_,T,D);return No.sketch(B)},H6=(u,_)=>Ox(u,_,[],[]),G6=(u,_,T,D)=>({dom:Bx(T),components:u.toArray().concat([_]),fieldBehaviours:sn(D)}),$Y=()=>Bx([]),Bx=u=>({tag:"div",classes:["tox-form__group"].concat(u)}),Au=(u,_)=>No.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Pi(_.translate(u))]}),Fl=In("form-component-change"),W1=In("form-close"),zm=In("form-cancel"),ff=In("form-action"),Fx=In("form-submit"),dI=In("form-block"),hI=In("form-unblock"),yB=In("form-tabchange"),bB=In("form-resize"),W6=(u,_,T)=>{const D=u.label.map(xe=>Au(xe,_)),B=_.icons(),U=xe=>{var ke;return(ke=B[xe])!==null&&ke!==void 0?ke:xe},W=xe=>(ke,He)=>{Ec(He.event.target,"[data-collection-item-value]").each(pt=>{xe(ke,He,pt,ns(pt,"data-collection-item-value"))})},J=(xe,ke)=>{const He=Xe(ke,Ze=>{const dt=hn.translate(Ze.text),Mt=u.columns===1?`<div class="tox-collection__item-label">${dt}</div>`:"",nn=`<div class="tox-collection__item-icon">${U(Ze.icon)}</div>`,$t={_:" "," - ":" ","-":" "},un=dt.replace(/\_| \- |\-/g,Br=>$t[Br]);return`<div class="tox-collection__item${_.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${U6.encodeAllRaw(Ze.value)}" title="${un}" aria-label="${un}">${nn}${Mt}</div>`}),pt=u.columns!=="auto"&&u.columns>1?Qt(He,u.columns):[He],Je=Xe(pt,Ze=>`<div class="tox-collection__group">${Ze.join("")}</div>`);zf(xe.element,Je.join(""))},ne=W((xe,ke,He,pt)=>{ke.stop(),_.isDisabled()||tr(xe,ff,{name:u.name,value:pt})}),se=[Vt(Vd(),W((xe,ke,He)=>{Il(He)})),Vt(Rh(),ne),Vt(cu(),ne),Vt(Ml(),W((xe,ke,He)=>{Ri(xe.element,"."+yx).each(pt=>{hi(pt,yx)}),Di(He,yx)})),Vt(q0(),W(xe=>{Ri(xe.element,"."+yx).each(ke=>{hi(ke,yx)})})),uu(W((xe,ke,He,pt)=>{tr(xe,ff,{name:u.name,value:pt})}))],ce=(xe,ke)=>Xe(ga(xe.element,".tox-collection__item"),ke),ge=No.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(u.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ie},behaviours:sn([or.config({disabled:_.isDisabled,onDisabled:xe=>{ce(xe,ke=>{Di(ke,"tox-collection__item--state-disabled"),bn(ke,"aria-disabled",!0)})},onEnabled:xe=>{ce(xe,ke=>{hi(ke,"tox-collection__item--state-disabled"),Ni(ke,"aria-disabled")})}}),ya(),wr.config({}),Sn.config({store:{mode:"memory",initialValue:T.getOr([])},onSetValue:(xe,ke)=>{J(xe,ke),u.columns==="auto"&&wR(xe,5,"tox-collection__item").each(({numRows:He,numColumns:pt})=>{Xn.setGridSize(xe,He,pt)}),Kr(xe,bB)}}),_i.config({}),Xn.config(Hz(u.columns,"normal")),Dr("collection-events",se)]),eventOrder:{[kl()]:["disabling","alloy.base.behaviour","collection-events"]}});return Ox(D,ge,["tox-form__group--collection"],[])},Y6=["input","textarea"],_B=u=>{const _=Ei(u);return Ke(Y6,_)},SB=(u,_)=>{const T=_.getRoot(u).getOr(u.element);hi(T,_.invalidClass),_.notify.each(D=>{_B(u.element)&&bn(u.element,"aria-invalid",!1),D.getContainer(u).each(B=>{zf(B,D.validHtml)}),D.onValid(u)})},fI=(u,_,T,D)=>{const B=_.getRoot(u).getOr(u.element);Di(B,_.invalidClass),_.notify.each(U=>{_B(u.element)&&bn(u.element,"aria-invalid",!0),U.getContainer(u).each(W=>{zf(W,D)}),U.onInvalid(u,D)})},o0=(u,_,T)=>_.validator.fold(()=>Ds.pure(kr.value(!0)),D=>D.validate(u)),wp=(u,_,T)=>(_.notify.each(D=>{D.onValidate(u)}),o0(u,_).map(D=>u.getSystem().isConnected()?D.fold(B=>(fI(u,_,T,B),kr.error(B)),B=>(SB(u,_),kr.value(B))):kr.error("No longer in system")));var xB=Object.freeze({__proto__:null,markValid:SB,markInvalid:fI,query:o0,run:wp,isInvalid:(u,_)=>{const T=_.getRoot(u).getOr(u.element);return ra(T,_.invalidClass)}}),UA=Object.freeze({__proto__:null,events:(u,_)=>u.validator.map(T=>ui([Vt(T.onEvent,D=>{wp(D,u,_).get(ie)})].concat(T.validateOnLoad?[ii(D=>{wp(D,u,_).get(V)})]:[]))).getOr({})}),Z6=[Ft("invalidClass"),ft("getRoot",Q.none),ys("notify",[ft("aria","alert"),ft("getContainer",Q.none),ft("validHtml",""),so("onValid"),so("onInvalid"),so("onValidate")]),ys("validator",[Ft("validate"),ft("onEvent","input"),ft("validateOnLoad",!0)])];const zc=Ba({fields:Z6,name:"invalidating",active:UA,apis:xB,extra:{validation:u=>_=>{const T=Sn.getValue(_);return Ds.pure(u(T))}}});var q6=Object.freeze({__proto__:null,events:()=>ui([d_(ak(),be)]),exhibit:()=>Ql({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Vx=Ba({fields:[],name:"unselecting",active:q6}),K6=(u,_)=>Tu.sketch({dom:u.dom,components:u.components,toggleClass:"mce-active",dropdownBehaviours:sn([la.button(_.providers.isDisabled),ya(),Vx.config({}),_i.config({})]),layouts:u.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:_.getSink,fetch:T=>Ds.nu(D=>u.fetch(D)).map(D=>Q.from(FA(ci(JR(In("menu-value"),D,B=>{u.onItemAction(T,B)},u.columns,u.presets,fh.CLOSE_ON_EXECUTE,me,_.providers),{movement:LA(u.columns,u.presets)})))),parts:{menu:I1(!1,1,u.presets)}}),CB=In("color-input-change"),wB=In("color-swatch-change"),zx=In("color-picker-cancel"),X6=(u,_,T,D)=>{const B=No.parts.field({factory:e0,inputClasses:["tox-textfield"],data:D,onSetValue:se=>zc.run(se).get(V),inputBehaviours:sn([or.config({disabled:_.providers.isDisabled}),ya(),_i.config({}),zc.config({invalidClass:"tox-textbox-field-invalid",getRoot:se=>Ou(se.element),notify:{onValid:se=>{const ce=Sn.getValue(se);tr(se,CB,{color:ce})}},validator:{validateOnLoad:!1,validate:se=>{const ce=Sn.getValue(se);if(ce.length===0)return Ds.pure(kr.value(!0));{const ge=Nt.fromTag("span");$r(ge,"background-color",ce);const ye=Wa(ge,"background-color").fold(()=>kr.error("blah"),xe=>kr.value(ce));return Ds.pure(ye)}}}})]),selectOnFocus:!1}),U=u.label.map(se=>Au(se,_.providers)),W=(se,ce)=>{tr(se,wB,{value:ce})},J=(se,ce)=>{ne.getOpt(se).each(ge=>{ce==="custom"?T.colorPicker(ye=>{ye.fold(()=>Kr(ge,zx),xe=>{W(ge,xe),UR(u.storageKey,xe)})},"#ffffff"):ce==="remove"?W(ge,""):W(ge,ce)})},ne=Po(K6({dom:{tag:"span",attributes:{"aria-label":_.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Xa,Ka,ma],onLtr:()=>[Ka,Xa,ma]},components:[],fetch:GO(T.getColors(u.storageKey),u.storageKey,T.hasCustomColors()),columns:T.getColorCols(u.storageKey),presets:"color",onItemAction:J},_));return No.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:U.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[B,ne.asSpec()]}]),fieldBehaviours:sn([Dr("form-field-events",[Vt(CB,(se,ce)=>{ne.getOpt(se).each(ge=>{$r(ge.element,"background-color",ce.event.color)}),tr(se,Fl,{name:u.name})}),Vt(wB,(se,ce)=>{No.getField(se).each(ge=>{Sn.setValue(ge,ce.event.value),eo.getCurrent(se).each(dr.focus)})}),Vt(zx,(se,ce)=>{No.getField(se).each(ge=>{eo.getCurrent(se).each(dr.focus)})})])])})},pI=pl({schema:[Ft("dom")],name:"label"}),Um=u=>pl({name:""+u+"-edge",overrides:_=>_.model.manager.edgeActions[u].fold(()=>({}),D=>({events:ui([Q0(Fd(),(B,U,W)=>D(B,W),[_]),Q0(oi(),(B,U,W)=>D(B,W),[_]),Q0(yc(),(B,U,W)=>{W.mouseIsDown.get()&&D(B,W)},[_])])}))}),J6=Um("top-left"),Q6=Um("top"),EB=Um("top-right"),eU=Um("right"),tU=Um("bottom-right"),nU=Um("bottom"),TB=Um("bottom-left"),rU=Um("left"),oU=cs({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:u=>({events:ui([Kp(Fd(),u,"spectrum"),Kp(Wp(),u,"spectrum"),Kp($f(),u,"spectrum"),Kp(oi(),u,"spectrum"),Kp(yc(),u,"spectrum"),Kp(o_(),u,"spectrum")])})}),iU=cs({schema:[Gi("mouseIsDown",()=>sr(!1))],name:"spectrum",overrides:u=>{const T=u.model.manager,D=(B,U)=>T.getValueFromEvent(U).map(W=>T.setValueFrom(B,u,W));return{behaviours:sn([Xn.config({mode:"special",onLeft:B=>T.onLeft(B,u),onRight:B=>T.onRight(B,u),onUp:B=>T.onUp(B,u),onDown:B=>T.onDown(B,u)}),dr.config({})]),events:ui([Vt(Fd(),D),Vt(Wp(),D),Vt(oi(),D),Vt(yc(),(B,U)=>{u.mouseIsDown.get()&&D(B,U)})])}}});var aU=[pI,rU,eU,Q6,nU,J6,EB,TB,tU,oU,iU];const Y1=q("slider.change.value"),AB=u=>u.type.indexOf("touch")!==-1,mI=u=>{const _=u.event.raw;if(AB(_)){const T=_;return T.touches!==void 0&&T.touches.length===1?Q.some(T.touches[0]).map(D=>Ti(D.clientX,D.clientY)):Q.none()}else{const T=_;return T.clientX!==void 0?Q.some(T).map(D=>Ti(D.clientX,D.clientY)):Q.none()}},sU="top",lU="right",cU="bottom",uU="left",Hm=u=>u.model.minX,vd=u=>u.model.minY,GA=u=>u.model.minX-1,WA=u=>u.model.minY-1,i0=u=>u.model.maxX,pf=u=>u.model.maxY,Vl=u=>u.model.maxX+1,j1=u=>u.model.maxY+1,gI=(u,_,T)=>_(u)-T(u),vI=u=>gI(u,i0,Hm),yI=u=>gI(u,pf,vd),MB=u=>vI(u)/2,kB=u=>yI(u)/2,a0=u=>u.stepSize,bI=u=>u.snapToGrid,DB=u=>u.snapStart,PB=u=>u.rounded,Ux=(u,_)=>u[_+"-edge"]!==void 0,RB=u=>Ux(u,uU),_I=u=>Ux(u,lU),SI=u=>Ux(u,sU),xI=u=>Ux(u,cU),Ep=u=>u.model.value.get(),Gm=(u,_)=>({x:u,y:_}),yd=(u,_)=>{tr(u,Y1(),{value:_})},dU=(u,_)=>{yd(u,Gm(GA(_),WA(_)))},hU=(u,_)=>{yd(u,WA(_))},fU=(u,_)=>{yd(u,Gm(MB(_),WA(_)))},CI=(u,_)=>{yd(u,Gm(Vl(_),WA(_)))},pU=(u,_)=>{yd(u,Vl(_))},IB=(u,_)=>{yd(u,Gm(Vl(_),kB(_)))},mU=(u,_)=>{yd(u,Gm(Vl(_),j1(_)))},gU=(u,_)=>{yd(u,j1(_))},vU=(u,_)=>{yd(u,Gm(MB(_),j1(_)))},yU=(u,_)=>{yd(u,Gm(GA(_),j1(_)))},bU=(u,_)=>{yd(u,GA(_))},_U=(u,_)=>{yd(u,Gm(GA(_),kB(_)))},wI=(u,_,T,D)=>u<_?u:u>T?T:u===_?_-1:Math.max(_,u-D),YA=(u,_,T,D)=>u>T?u:u<_?_:u===T?T+1:Math.min(T,u+D),EI=(u,_,T)=>Math.max(_,Math.min(T,u)),SU=(u,_,T,D,B)=>B.fold(()=>{const U=u-_,W=Math.round(U/D)*D;return EI(_+W,_-1,T+1)},U=>{const W=(u-U)%D,J=Math.round(W/D),ne=Math.floor((u-U)/D),se=Math.floor((T-U)/D),ce=Math.min(se,ne+J),ge=U+ce*D;return Math.max(U,ge)}),xU=(u,_,T)=>Math.min(T,Math.max(u,_))-_,$B=u=>{const{min:_,max:T,range:D,value:B,step:U,snap:W,snapStart:J,rounded:ne,hasMinEdge:se,hasMaxEdge:ce,minBound:ge,maxBound:ye,screenRange:xe}=u,ke=se?_-1:_,He=ce?T+1:T;if(B<ge)return ke;if(B>ye)return He;{const pt=xU(B,ge,ye),Je=EI(pt/xe*D+_,ke,He);return W&&Je>=_&&Je<=T?SU(Je,_,T,U,J):ne?Math.round(Je):Je}},LB=u=>{const{min:_,max:T,range:D,value:B,hasMinEdge:U,hasMaxEdge:W,maxBound:J,maxOffset:ne,centerMinEdge:se,centerMaxEdge:ce}=u;return B<_?U?0:se:B>T?W?J:ce:(B-_)/D*ne},TI="top",NB="right",AI="bottom",jA="left",OB="width",MI="height",mf=u=>u.element.dom.getBoundingClientRect(),Mu=(u,_)=>u[_],ZA=u=>{const _=mf(u);return Mu(_,jA)},BB=u=>{const _=mf(u);return Mu(_,NB)},qA=u=>{const _=mf(u);return Mu(_,TI)},FB=u=>{const _=mf(u);return Mu(_,AI)},KA=u=>{const _=mf(u);return Mu(_,OB)},gf=u=>{const _=mf(u);return Mu(_,MI)},VB=(u,_,T)=>(u+_)/2-T,Z1=(u,_)=>{const T=mf(u),D=mf(_),B=Mu(T,jA),U=Mu(T,NB),W=Mu(D,jA);return VB(B,U,W)},zB=(u,_)=>{const T=mf(u),D=mf(_),B=Mu(T,TI),U=Mu(T,AI),W=Mu(D,TI);return VB(B,U,W)},q1=(u,_)=>{tr(u,Y1(),{value:_})},kI=(u,_,T)=>{const D={min:Hm(_),max:i0(_),range:vI(_),value:T,step:a0(_),snap:bI(_),snapStart:DB(_),rounded:PB(_),hasMinEdge:RB(_),hasMaxEdge:_I(_),minBound:ZA(u),maxBound:BB(u),screenRange:KA(u)};return $B(D)},CU=(u,_,T)=>{const D=kI(u,_,T);return q1(u,D),D},wU=(u,_)=>{const T=Hm(_);q1(u,T)},UB=(u,_)=>{const T=i0(_);q1(u,T)},EU=(u,_,T)=>{const B=(u>0?YA:wI)(Ep(T),Hm(T),i0(T),a0(T));return q1(_,B),Q.some(B)},XA=u=>(_,T)=>EU(u,_,T).map(be),DI=u=>mI(u).map(T=>T.left),RI=(u,_,T,D,B)=>{const W=KA(u),J=D.bind(ce=>Q.some(Z1(ce,u))).getOr(0),ne=B.bind(ce=>Q.some(Z1(ce,u))).getOr(W),se={min:Hm(_),max:i0(_),range:vI(_),value:T,hasMinEdge:RB(_),hasMaxEdge:_I(_),minBound:ZA(u),minOffset:0,maxBound:BB(u),maxOffset:W,centerMinEdge:J,centerMaxEdge:ne};return LB(se)},II=(u,_,T,D,B,U)=>{const W=RI(_,U,T,D,B);return ZA(_)-ZA(u)+W},Uc=(u,_,T,D)=>{const B=Ep(T),U=II(u,D.getSpectrum(u),B,D.getLeftEdge(u),D.getRightEdge(u),T),W=os(_.element)/2;$r(_.element,"left",U-W+"px")},TU=XA(-1),AU=XA(1),HB=Q.none,GB=Q.none,MU={"top-left":Q.none(),top:Q.none(),"top-right":Q.none(),right:Q.some(pU),"bottom-right":Q.none(),bottom:Q.none(),"bottom-left":Q.none(),left:Q.some(bU)};var kU=Object.freeze({__proto__:null,setValueFrom:CU,setToMin:wU,setToMax:UB,findValueOfOffset:kI,getValueFromEvent:DI,findPositionOfValue:II,setPositionFromValue:Uc,onLeft:TU,onRight:AU,onUp:HB,onDown:GB,edgeActions:MU});const JA=(u,_)=>{tr(u,Y1(),{value:_})},$I=(u,_,T)=>{const D={min:vd(_),max:pf(_),range:yI(_),value:T,step:a0(_),snap:bI(_),snapStart:DB(_),rounded:PB(_),hasMinEdge:SI(_),hasMaxEdge:xI(_),minBound:qA(u),maxBound:FB(u),screenRange:gf(u)};return $B(D)},DU=(u,_,T)=>{const D=$I(u,_,T);return JA(u,D),D},PU=(u,_)=>{const T=vd(_);JA(u,T)},RU=(u,_)=>{const T=pf(_);JA(u,T)},WB=(u,_,T)=>{const B=(u>0?YA:wI)(Ep(T),vd(T),pf(T),a0(T));return JA(_,B),Q.some(B)},YB=u=>(_,T)=>WB(u,_,T).map(be),IU=u=>mI(u).map(T=>T.top),$U=(u,_,T,D,B)=>{const W=gf(u),J=D.bind(ce=>Q.some(zB(ce,u))).getOr(0),ne=B.bind(ce=>Q.some(zB(ce,u))).getOr(W),se={min:vd(_),max:pf(_),range:yI(_),value:T,hasMinEdge:SI(_),hasMaxEdge:xI(_),minBound:qA(u),minOffset:0,maxBound:FB(u),maxOffset:W,centerMinEdge:J,centerMaxEdge:ne};return LB(se)},QA=(u,_,T,D,B,U)=>{const W=$U(_,U,T,D,B);return qA(_)-qA(u)+W},LI=(u,_,T,D)=>{const B=Ep(T),U=QA(u,D.getSpectrum(u),B,D.getTopEdge(u),D.getBottomEdge(u),T),W=ua(_.element)/2;$r(_.element,"top",U-W+"px")},LU=Q.none,NI=Q.none,K1=YB(-1),jB=YB(1),ZB={"top-left":Q.none(),top:Q.some(hU),"top-right":Q.none(),right:Q.none(),"bottom-right":Q.none(),bottom:Q.some(gU),"bottom-left":Q.none(),left:Q.none()};var qB=Object.freeze({__proto__:null,setValueFrom:DU,setToMin:PU,setToMax:RU,findValueOfOffset:$I,getValueFromEvent:IU,findPositionOfValue:QA,setPositionFromValue:LI,onLeft:LU,onRight:NI,onUp:K1,onDown:jB,edgeActions:ZB});const e2=(u,_)=>{tr(u,Y1(),{value:_})},t2=(u,_)=>({x:u,y:_}),n2=(u,_,T)=>{const D=kI(u,_,T.left),B=$I(u,_,T.top),U=t2(D,B);return e2(u,U),U},NU=(u,_,T,D)=>{const B=u>0?YA:wI,U=_?Ep(D).x:B(Ep(D).x,Hm(D),i0(D),a0(D)),W=_?B(Ep(D).y,vd(D),pf(D),a0(D)):Ep(D).y;return e2(T,t2(U,W)),Q.some(U)},r2=(u,_)=>(T,D)=>NU(u,_,T,D).map(be),KB=(u,_)=>{const T=Hm(_),D=vd(_);e2(u,t2(T,D))},XB=(u,_)=>{const T=i0(_),D=pf(_);e2(u,t2(T,D))},OI=u=>mI(u),JB=(u,_,T,D)=>{const B=Ep(T),U=II(u,D.getSpectrum(u),B.x,D.getLeftEdge(u),D.getRightEdge(u),T),W=QA(u,D.getSpectrum(u),B.y,D.getTopEdge(u),D.getBottomEdge(u),T),J=os(_.element)/2,ne=ua(_.element)/2;$r(_.element,"left",U-J+"px"),$r(_.element,"top",W-ne+"px")},bl=r2(-1,!1),QB=r2(1,!1),OU=r2(-1,!0),BU=r2(1,!0),e3={"top-left":Q.some(dU),top:Q.some(fU),"top-right":Q.some(CI),right:Q.some(IB),"bottom-right":Q.some(mU),bottom:Q.some(vU),"bottom-left":Q.some(yU),left:Q.some(_U)};var FU=Object.freeze({__proto__:null,setValueFrom:n2,setToMin:KB,setToMax:XB,getValueFromEvent:OI,setPositionFromValue:JB,onLeft:bl,onRight:QB,onUp:OU,onDown:BU,edgeActions:e3});const VU=[ft("stepSize",1),ft("onChange",V),ft("onChoose",V),ft("onInit",V),ft("onDragStart",V),ft("onDragEnd",V),ft("snapToGrid",!1),ft("rounded",!0),Ro("snapStart"),La("model",Eo("mode",{x:[ft("minX",0),ft("maxX",100),Gi("value",u=>sr(u.mode.minX)),Ft("getInitialValue"),Go("manager",kU)],y:[ft("minY",0),ft("maxY",100),Gi("value",u=>sr(u.mode.minY)),Ft("getInitialValue"),Go("manager",qB)],xy:[ft("minX",0),ft("maxX",100),ft("minY",0),ft("maxY",100),Gi("value",u=>sr({x:u.mode.minX,y:u.mode.minY})),Ft("getInitialValue"),Go("manager",FU)]})),ia("sliderBehaviours",[Xn,Sn]),Gi("mouseIsDown",()=>sr(!1))],ku=us({name:"Slider",configFields:VU,partFields:aU,factory:(u,_,T,D)=>{const B=Mt=>nh(Mt,u,"thumb"),U=Mt=>nh(Mt,u,"spectrum"),W=Mt=>Xo(Mt,u,"left-edge"),J=Mt=>Xo(Mt,u,"right-edge"),ne=Mt=>Xo(Mt,u,"top-edge"),se=Mt=>Xo(Mt,u,"bottom-edge"),ce=u.model,ge=ce.manager,ye=(Mt,nn)=>{ge.setPositionFromValue(Mt,nn,u,{getLeftEdge:W,getRightEdge:J,getTopEdge:ne,getBottomEdge:se,getSpectrum:U})},xe=(Mt,nn)=>{ce.value.set(nn);const $t=B(Mt);ye(Mt,$t)},ke=(Mt,nn)=>{xe(Mt,nn);const $t=B(Mt);return u.onChange(Mt,$t,nn),Q.some(!0)},He=Mt=>{ge.setToMin(Mt,u)},pt=Mt=>{ge.setToMax(Mt,u)},Je=Mt=>{const nn=()=>{Xo(Mt,u,"thumb").each(un=>{const mn=ce.value.get();u.onChoose(Mt,un,mn)})},$t=u.mouseIsDown.get();u.mouseIsDown.set(!1),$t&&nn()},Ze=(Mt,nn)=>{nn.stop(),u.mouseIsDown.set(!0),u.onDragStart(Mt,B(Mt))},dt=(Mt,nn)=>{nn.stop(),u.onDragEnd(Mt,B(Mt)),Je(Mt)};return{uid:u.uid,dom:u.dom,components:_,behaviours:aa(u.sliderBehaviours,[Xn.config({mode:"special",focusIn:Mt=>Xo(Mt,u,"spectrum").map(Xn.focusIn).map(be)}),Sn.config({store:{mode:"manual",getValue:Mt=>ce.value.get(),setValue:xe}}),dl.config({channels:{[Gy()]:{onReceive:Je}}})]),events:ui([Vt(Y1(),(Mt,nn)=>{ke(Mt,nn.event.value)}),ii((Mt,nn)=>{const $t=ce.getInitialValue();ce.value.set($t);const un=B(Mt);ye(Mt,un);const mn=U(Mt);u.onInit(Mt,un,mn,ce.value.get())}),Vt(Fd(),Ze),Vt($f(),dt),Vt(oi(),Ze),Vt(o_(),dt)]),apis:{resetToMin:He,resetToMax:pt,setValue:xe,refresh:ye},domModification:{styles:{position:"relative"}}}},apis:{setValue:(u,_,T)=>{u.setValue(_,T)},resetToMin:(u,_)=>{u.resetToMin(_)},resetToMax:(u,_)=>{u.resetToMax(_)},refresh:(u,_)=>{u.refresh(_)}}}),bd=In("rgb-hex-update"),o2=In("slider-update"),BI=In("palette-update"),i2=(u,_)=>{const T=ku.parts.spectrum({dom:{tag:"div",classes:[_("hue-slider-spectrum")],attributes:{role:"presentation"}}}),D=ku.parts.thumb({dom:{tag:"div",classes:[_("hue-slider-thumb")],attributes:{role:"presentation"}}});return ku.sketch({dom:{tag:"div",classes:[_("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[T,D],sliderBehaviours:sn([dr.config({})]),onChange:(B,U,W)=>{tr(B,o2,{value:W})}})},a2="form",zU=[ia("formBehaviours",[Sn])],t3=u=>"<alloy.field."+u+">",UU=u=>{const _=(()=>{const U=[];return{field:(J,ne)=>(U.push(J),MS(a2,t3(J),ne)),record:q(U)}})(),T=u(_),D=_.record(),B=Xe(D,U=>cs({name:U,pname:t3(U)}));return RS(a2,zU,B,GU,T)},HU=(u,_)=>u.fold(()=>kr.error(_),kr.value),GU=(u,_)=>({uid:u.uid,dom:u.dom,components:_,behaviours:aa(u.formBehaviours,[Sn.config({store:{mode:"manual",getValue:T=>{const D=HE(T,u);return Zn(D,(B,U)=>B().bind(W=>{const J=eo.getCurrent(W);return HU(J,new Error(`Cannot find a current component to extract the value from for form part '${U}': `+Xu(W.element)))}).map(Sn.getValue))},setValue:(T,D)=>{kn(D,(B,U)=>{Xo(T,u,U).each(W=>{eo.getCurrent(W).each(J=>{Sn.setValue(J,B)})})})}}})]),apis:{getField:(T,D)=>Xo(T,u,D).bind(eo.getCurrent)}}),X1={getField:Jp((u,_,T)=>u.getField(_,T)),sketch:UU},n3=In("valid-input"),FI=In("invalid-input"),r3=In("validating-input"),_d="colorcustom.rgb.",s2=(u,_,T,D)=>{const B=(ye,xe)=>zc.config({invalidClass:_("invalid"),notify:{onValidate:ke=>{tr(ke,r3,{type:ye})},onValid:ke=>{tr(ke,n3,{type:ye,value:Sn.getValue(ke)})},onInvalid:ke=>{tr(ke,FI,{type:ye,value:Sn.getValue(ke)})}},validator:{validate:ke=>{const He=Sn.getValue(ke),pt=xe(He)?kr.value(!0):kr.error(u("aria.input.invalid"));return Ds.pure(pt)},validateOnLoad:!1}}),U=(ye,xe,ke,He,pt)=>{const Je=u(_d+"range"),Ze=No.parts.label({dom:{tag:"label",attributes:{"aria-label":He}},components:[Pi(ke)]}),dt=No.parts.field({data:pt,factory:e0,inputAttributes:{type:"text",...xe==="hex"?{"aria-live":"polite"}:{}},inputClasses:[_("textfield")],inputBehaviours:sn([B(xe,ye),_i.config({})]),onSetValue:un=>{zc.isInvalid(un)&&zc.run(un).get(V)}}),Mt=[Ze,dt],nn=xe!=="hex"?[No.parts["aria-descriptor"]({text:Je})]:[],$t=Mt.concat(nn);return{dom:{tag:"div",attributes:{role:"presentation"}},components:$t}},W=(ye,xe)=>{const ke=H1(xe);return X1.getField(ye,"hex").each(He=>{dr.isFocused(He)||Sn.setValue(ye,{hex:ke.value})}),ke},J=(ye,xe)=>{const ke=xe.red,He=xe.green,pt=xe.blue;Sn.setValue(ye,{red:ke,green:He,blue:pt})},ne=Po({dom:{tag:"div",classes:[_("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),se=(ye,xe)=>{ne.getOpt(ye).each(ke=>{$r(ke.element,"background-color","#"+xe.value)})};return ml({factory:()=>{const ye={red:sr(Q.some(255)),green:sr(Q.some(255)),blue:sr(Q.some(255)),hex:sr(Q.some("ffffff"))},xe=(mr,$o)=>{const lr=Dx($o);J(mr,lr),Je(lr)},ke=mr=>ye[mr].get(),He=(mr,$o)=>{ye[mr].set($o)},pt=()=>ke("red").bind(mr=>ke("green").bind($o=>ke("blue").map(lr=>Om(mr,$o,lr,1)))),Je=mr=>{const $o=mr.red,lr=mr.green,mo=mr.blue;He("red",Q.some($o)),He("green",Q.some(lr)),He("blue",Q.some(mo))},Ze=(mr,$o)=>{const lr=$o.event;lr.type!=="hex"?He(lr.type,Q.none()):D(mr)},dt=(mr,$o)=>{T(mr);const lr=yO($o);He("hex",Q.some(lr.value));const mo=Dx(lr);J(mr,mo),Je(mo),tr(mr,bd,{hex:lr}),se(mr,lr)},Mt=(mr,$o,lr)=>{const mo=parseInt(lr,10);He($o,Q.some(mo)),pt().each(pn=>{const On=W(mr,pn);tr(mr,bd,{hex:On}),se(mr,On)})},nn=mr=>mr.type==="hex",$t=(mr,$o)=>{const lr=$o.event;nn(lr)?dt(mr,lr.value):Mt(mr,lr.type,lr.value)},un=mr=>({label:u(_d+mr+".label"),description:u(_d+mr+".description")}),mn=un("red"),Br=un("green"),An=un("blue"),yr=un("hex");return ci(X1.sketch(mr=>({dom:{tag:"form",classes:[_("rgb-form")],attributes:{"aria-label":u("aria.color.picker")}},components:[mr.field("red",No.sketch(U($R,"red",mn.label,mn.description,255))),mr.field("green",No.sketch(U($R,"green",Br.label,Br.description,255))),mr.field("blue",No.sketch(U($R,"blue",An.label,An.description,255))),mr.field("hex",No.sketch(U(SO,"hex",yr.label,yr.description,"ffffff"))),ne.asSpec()],formBehaviours:sn([zc.config({invalidClass:_("form-invalid")}),Dr("rgb-form-events",[Vt(n3,$t),Vt(FI,Ze),Vt(r3,Ze)])])})),{apis:{updateHex:(mr,$o)=>{Sn.setValue(mr,{hex:$o.value}),xe(mr,$o),se(mr,$o)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ye,xe,ke)=>{ye.updateHex(xe,ke)}},extraApis:{}})},WU=(u,_)=>{const T=ku.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[_("sv-palette-spectrum")]}}),D=ku.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[_("sv-palette-thumb")],innerHtml:`<div class=${_("sv-palette-inner-thumb")} role="presentation"></div>`}}),B=(se,ce)=>{const{width:ge,height:ye}=se,xe=se.getContext("2d");if(xe===null)return;xe.fillStyle=ce,xe.fillRect(0,0,ge,ye);const ke=xe.createLinearGradient(0,0,ge,0);ke.addColorStop(0,"rgba(255,255,255,1)"),ke.addColorStop(1,"rgba(255,255,255,0)"),xe.fillStyle=ke,xe.fillRect(0,0,ge,ye);const He=xe.createLinearGradient(0,0,0,ye);He.addColorStop(0,"rgba(0,0,0,0)"),He.addColorStop(1,"rgba(0,0,0,1)"),xe.fillStyle=He,xe.fillRect(0,0,ge,ye)},U=(se,ce)=>{const ge=se.components()[0].element.dom,ye=Rx(ce,100,100),xe=MO(ye);B(ge,NR(xe))},W=(se,ce)=>{const ge=DA(Dx(ce));ku.setValue(se,{x:ge.saturation,y:100-ge.value})};return ml({factory:se=>{const ce=q({x:0,y:0}),ge=(ke,He,pt)=>{tr(ke,BI,{value:pt})},ye=(ke,He,pt,Je)=>{B(pt.element.dom,NR(Eu))},xe=sn([eo.config({find:Q.some}),dr.config({})]);return ku.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[_("sv-palette")]},model:{mode:"xy",getInitialValue:ce},rounded:!1,components:[T,D],onChange:ge,onInit:ye,sliderBehaviours:xe})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(se,ce,ge)=>{U(ce,ge)},setThumb:(se,ce,ge)=>{W(ce,ge)}},extraApis:{}})},YU=(u,_)=>{const T=B=>{const U=s2(u,_,B.onValidHex,B.onInvalidHex),W=WU(u,_),J=$t=>(100-$t)/100*360,ne=$t=>100-$t/360*100,se={paletteRgba:sr(Eu),paletteHue:sr(0)},ce=Po(i2(u,_)),ge=Po(W.sketch({})),ye=Po(U.sketch({})),xe=($t,un,mn)=>{ge.getOpt($t).each(Br=>{W.setHue(Br,mn)})},ke=($t,un)=>{ye.getOpt($t).each(mn=>{U.updateHex(mn,un)})},He=($t,un,mn)=>{ce.getOpt($t).each(Br=>{ku.setValue(Br,ne(mn))})},pt=($t,un)=>{ge.getOpt($t).each(mn=>{W.setThumb(mn,un)})},Je=($t,un)=>{const mn=Dx($t);se.paletteRgba.set(mn),se.paletteHue.set(un)},Ze=($t,un,mn,Br)=>{Je(un,mn),Be(Br,An=>{An($t,un,mn)})},dt=()=>{const $t=[ke];return(un,mn)=>{const Br=mn.event.value,An=se.paletteHue.get(),yr=Rx(An,Br.x,100-Br.y),mr=OO(yr);Ze(un,mr,An,$t)}},Mt=()=>{const $t=[xe,ke];return(un,mn)=>{const Br=J(mn.event.value),An=se.paletteRgba.get(),yr=DA(An),mr=Rx(Br,yr.saturation,yr.value),$o=OO(mr);Ze(un,$o,Br,$t)}},nn=()=>{const $t=[xe,He,pt];return(un,mn)=>{const Br=mn.event.hex,An=Rz(Br);Ze(un,Br,An.hue,$t)}};return{uid:B.uid,dom:B.dom,components:[ge.asSpec(),ce.asSpec(),ye.asSpec()],behaviours:sn([Dr("colour-picker-events",[Vt(bd,nn()),Vt(BI,dt()),Vt(o2,Mt())]),eo.config({find:$t=>ye.getOpt($t)}),Xn.config({mode:"acyclic"})])}};return ml({name:"ColourPicker",configFields:[Ft("dom"),ft("onValidHex",V),ft("onInvalidHex",V)],factory:T})},cc={self:()=>eo.config({find:Q.some}),memento:u=>eo.config({find:u.getOpt}),childAt:u=>eo.config({find:_=>wh(_.element,u).bind(T=>_.getSystem().getByDom(T).toOptional())})},Hx=er([ft("preprocess",ie),ft("postprocess",ie)]),Gx=(u,_)=>{const T=Bs("RepresentingConfigs.memento processors",Hx,_);return Sn.config({store:{mode:"manual",getValue:D=>{const B=u.get(D),U=Sn.getValue(B);return T.postprocess(U)},setValue:(D,B)=>{const U=T.preprocess(B),W=u.get(D);Sn.setValue(W,U)}}})},Wm=(u,_,T)=>Sn.config({store:{mode:"manual",...u.map(D=>({initialValue:D})).getOr({}),getValue:_,setValue:T}}),VI=(u,_,T)=>Wm(u,D=>_(D.element),(D,B)=>T(D.element,B)),i3=u=>VI(u,p_,zf),Wx=u=>Sn.config({store:{mode:"memory",initialValue:u}}),qU={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},KU=u=>_=>u.translate(qU[_]),XU=(u,_,T)=>{const D=ne=>"tox-"+ne,B=YU(KU(_),D),U=ne=>{tr(ne,ff,{name:"hex-valid",value:!0})},W=ne=>{tr(ne,ff,{name:"hex-valid",value:!1})},J=Po(B.sketch({dom:{tag:"div",classes:[D("color-picker-container")],attributes:{role:"presentation"}},onValidHex:U,onInvalidHex:W}));return{dom:{tag:"div"},components:[J.asSpec()],behaviours:sn([Wm(T,ne=>{const se=J.get(ne);return eo.getCurrent(se).bind(ye=>Sn.getValue(ye).hex).map(ye=>"#"+xh(ye,"#")).getOr("")},(ne,se)=>{const ce=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,ge=Q.from(ce.exec(se)).bind(ke=>Ae(ke,1)),ye=J.get(ne);eo.getCurrent(ye).fold(()=>{console.log("Can not find form")},ke=>{Sn.setValue(ke,{hex:ge.getOr("")}),X1.getField(ke,"hex").each(He=>{Kr(He,Lf())})})}),cc.self()])}};var JU=tinymce.util.Tools.resolve("tinymce.Resource");const QU=u=>yn(u,"init"),a3=u=>{const _=ai(),T=Po({dom:{tag:u.tag}}),D=ai();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:sn([Dr("custom-editor-events",[ii(B=>{T.getOpt(B).each(U=>{(QU(u)?u.init(U.element.dom):JU.load(u.scriptId,u.scriptUrl).then(W=>W(U.element.dom,u.settings))).then(W=>{D.on(J=>{W.setValue(J)}),D.clear(),_.set(W)})})})]),Wm(Q.none(),()=>_.get().fold(()=>D.get().getOr(""),B=>B.getValue()),(B,U)=>{_.get().fold(()=>D.set(U),W=>W.setValue(U))}),cc.self()]),components:[T.asSpec()]}};var vf=tinymce.util.Tools.resolve("tinymce.util.Tools");const eH=(u,_)=>{const T=vf.explode(_.getOption("images_file_types")),D=B=>Tt(T,U=>Lu(B.name.toLowerCase(),`.${U.toLowerCase()}`));return Rt(Kt(u),D)},s3=(u,_,T)=>{const D=(ye,xe)=>{xe.stop()},B=ye=>(xe,ke)=>{Be(ye,He=>{He(xe,ke)})},U=(ye,xe)=>{var ke;if(!or.isDisabled(ye)){const He=xe.event.raw;J(ye,(ke=He.dataTransfer)===null||ke===void 0?void 0:ke.files)}},W=(ye,xe)=>{const ke=xe.event.raw.target;J(ye,ke.files)},J=(ye,xe)=>{xe&&(Sn.setValue(ye,eH(xe,_)),tr(ye,Fl,{name:u.name}))},ne=Po({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:sn([Dr("input-file-events",[Ud(Rh()),Ud(cu())])])}),se=ye=>({uid:ye.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:sn([Wx(T.getOr([])),cc.self(),or.config({}),Rr.config({toggleClass:"dragenter",toggleOnExecute:!1}),Dr("dropzone-events",[Vt("dragenter",B([D,Rr.toggle])),Vt("dragleave",B([D,Rr.toggle])),Vt("dragover",D),Vt("drop",B([D,U])),Vt(Nf(),W)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Pi(_.translate("Drop an image here"))]},sa.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Pi(_.translate("Browse for an image")),ne.asSpec()],action:xe=>{ne.get(xe).element.dom.click()},buttonBehaviours:sn([_i.config({}),la.button(_.isDisabled),ya()])})]}]}),ce=u.label.map(ye=>Au(ye,_)),ge=No.parts.field({factory:{sketch:se}});return Ox(ce,ge,["tox-form__group--stretched"],[])},tH=(u,_)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${u.columns}col`]},components:Xe(u.items,_.interpreter)}),l3=(u,_)=>{let T=null,D=null;return{cancel:()=>{w(T)||(clearTimeout(T),T=null,D=null)},throttle:(...W)=>{D=W,w(T)&&(T=setTimeout(()=>{const J=D;T=null,D=null,u.apply(null,J)},_))}}},Yx=(u,_)=>{let T=null;return{cancel:()=>{w(T)||(clearTimeout(T),T=null)},throttle:(...U)=>{w(T)&&(T=setTimeout(()=>{T=null,u.apply(null,U)},_))}}},zI=(u,_)=>{let T=null;const D=()=>{w(T)||(clearTimeout(T),T=null)};return{cancel:D,throttle:(...U)=>{D(),T=setTimeout(()=>{T=null,u.apply(null,U)},_)}}},l2=In("alloy-fake-before-tabstop"),UI=In("alloy-fake-after-tabstop"),c3=u=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:u},behaviours:sn([dr.config({ignore:!0}),_i.config({})])}),u3=(u,_)=>({dom:{tag:"div",classes:["tox-navobj",...u.getOr([])]},components:[c3([l2]),_,c3([UI])],behaviours:sn([cc.childAt(1)])}),d3=(u,_)=>{tr(u,Ks(),{raw:{which:9,shiftKey:_}})},h3=(u,_)=>{const T=_.element;ra(T,l2)?d3(u,!0):ra(T,UI)&&d3(u,!1)},jx=u=>Lx(u,["."+l2,"."+UI].join(","),me),Zx=In("update-dialog"),c2=In("update-title"),yf=In("update-body"),u2=In("update-footer"),HI=In("body-send-message"),qx=In("dialog-focus-shifted"),Kx=zu().browser,J1=Kx.isSafari(),d2=Kx.isFirefox(),GI=J1||d2,f3=Kx.isChromium(),nH=({scrollTop:u,scrollHeight:_,clientHeight:T})=>Math.ceil(u)+T>=_,p3=(u,_)=>u.scrollTo(0,_==="bottom"?99999999:_),rH=(u,_)=>{const T=u.body;return Q.from(!/^<!DOCTYPE (html|HTML)/.test(_)&&(!f3&&!J1||L(T)&&(T.scrollTop!==0||Math.abs(T.scrollHeight-T.clientHeight)>1))?T:u.documentElement)},m3=(u,_,T)=>{const D=u.dom;Q.from(D.contentDocument).fold(T,B=>{let U=0;const W=rH(B,_).map(ne=>(U=ne.scrollTop,ne)).forall(nH),J=()=>{const ne=D.contentWindow;L(ne)&&(W?p3(ne,"bottom"):!W&&GI&&U!==0&&p3(ne,U))};J1&&D.addEventListener("load",J,{once:!0}),B.open(),B.write(_),B.close(),J1||J()})},g3=Vn(GI,J1?500:200).map(u=>l3(m3,u)),y3=(u,_)=>{const T=sr(u.getOr(""));return{getValue:D=>T.get(),setValue:(D,B)=>{if(T.get()!==B){const U=D.element,W=()=>bn(U,"srcdoc",B);_?g3.fold(q(m3),J=>J.throttle)(U,B,W):W()}T.set(B)}}},oH=(u,_,T)=>{const D="tox-dialog__iframe",B=u.transparent?[]:[`${D}--opaque`],U=u.border?["tox-navobj-bordered"]:[],W={...u.label.map(ge=>({title:ge})).getOr({}),...T.map(ge=>({srcdoc:ge})).getOr({}),...u.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},J=y3(T,u.streamContent),ne=u.label.map(ge=>Au(ge,_)),se=ge=>u3(Q.from(U),{uid:ge.uid,dom:{tag:"iframe",attributes:W,classes:[D,...B]},behaviours:sn([_i.config({}),dr.config({}),Wm(T,J.getValue,J.setValue),dl.config({channels:{[qx]:{onReceive:(ye,xe)=>{xe.newFocus.each(ke=>{Ou(ye.element).each(He=>{(ni(ye.element,ke)?Di:hi)(He,"tox-navobj-bordered-focus")})})}}}})])}),ce=No.parts.field({factory:{sketch:se}});return Ox(ne,ce,["tox-form__group--stretched"],[])},iH=u=>new Promise((_,T)=>{const D=()=>{U(),_(u)},B=[Fa(u,"load",D),Fa(u,"error",()=>{U(),T("Unable to load data from image: "+u.dom.src)})],U=()=>Be(B,W=>W.unbind());u.dom.complete&&D()}),aH=(u,_,T,D,B)=>{const U=T*B,W=D*B,J=Math.max(0,u/2-U/2),ne=Math.max(0,_/2-W/2);return{left:J.toString()+"px",top:ne.toString()+"px",width:U.toString()+"px",height:W.toString()+"px"}},h2=(u,_,T)=>{const D=os(u),B=ua(u);return Math.min(D/_,B/T,1)},sH=(u,_)=>{const T=sr(_.getOr({url:""})),D=Po({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:_.map(ne=>({src:ne.url})).getOr({})}}),B=Po({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[D.asSpec()]}),U=(ne,se)=>{const ce={url:se.url};se.zoom.each(ye=>ce.zoom=ye),se.cachedWidth.each(ye=>ce.cachedWidth=ye),se.cachedHeight.each(ye=>ce.cachedHeight=ye),T.set(ce);const ge=()=>{const{cachedWidth:ye,cachedHeight:xe,zoom:ke}=ce;if(!A(ye)&&!A(xe)){if(A(ke)){const pt=h2(ne.element,ye,xe);ce.zoom=pt}const He=aH(os(ne.element),ua(ne.element),ye,xe,ce.zoom);B.getOpt(ne).each(pt=>{Af(pt.element,He)})}};D.getOpt(ne).each(ye=>{const xe=ye.element;se.url!==ns(xe,"src")&&(bn(xe,"src",se.url),hi(ne.element,"tox-imagepreview__loaded")),ge(),iH(xe).then(ke=>{ne.getSystem().isConnected()&&(Di(ne.element,"tox-imagepreview__loaded"),ce.cachedWidth=ke.dom.naturalWidth,ce.cachedHeight=ke.dom.naturalHeight,ge())})})},W={};u.height.each(ne=>W.height=ne);const J=_.map(ne=>({url:ne.url,zoom:Q.from(ne.zoom),cachedWidth:Q.from(ne.cachedWidth),cachedHeight:Q.from(ne.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:W,attributes:{role:"presentation"}},components:[B.asSpec()],behaviours:sn([cc.self(),Wm(J,()=>T.get(),U)])}},lH=(u,_)=>{const T="tox-label",D=u.align==="center"?[`${T}--center`]:[],B=u.align==="end"?[`${T}--end`]:[],U={dom:{tag:"label",classes:[T,...D,...B]},components:[Pi(_.providers.translate(u.label))]},W=Xe(u.items,_.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[U,...W],behaviours:sn([cc.self(),wr.config({}),i3(Q.none()),Xn.config({mode:"acyclic"})])}},WI=In("toolbar.button.execute"),b3=u=>uu((_,T)=>{Vc(u,_)(D=>{tr(_,WI,{buttonApi:D}),u.onAction(D)})}),s0=In("common-button-display-events"),_3={[kl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Sc()]:["toolbar-button-events",s0],[oi()]:["focusing","alloy.base.behaviour",s0]},Xx=u=>$r(u.element,"width",mi(u.element,"width")),S3=(u,_,T)=>Js(u,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:T},_),f2=(u,_)=>S3(u,_,[]),Ym=(u,_)=>S3(u,_,[wr.config({})]),x3=(u,_,T)=>({dom:{tag:"span",classes:[`${_}__select-label`]},components:[Pi(T.translate(u))],behaviours:sn([wr.config({})])}),Du=In("update-menu-text"),jm=In("update-menu-icon"),p2=(u,_,T)=>{const D=sr(V),B=u.text.map(ye=>Po(x3(ye,_,T.providers))),U=u.icon.map(ye=>Po(Ym(ye,T.providers.icons))),W=(ye,xe)=>{const ke=Sn.getValue(ye);return dr.focus(ke),tr(ke,"keydown",{raw:xe.event.raw}),Tu.close(ke),Q.some(!0)},J=u.role.fold(()=>({}),ye=>({role:ye})),ne=u.tooltip.fold(()=>({}),ye=>{const xe=T.providers.translate(ye);return{title:xe,"aria-label":xe}}),se=Js("chevron-down",{tag:"div",classes:[`${_}__select-chevron`]},T.providers.icons),ce=In("common-button-display-events");return Po(Tu.sketch({...u.uid?{uid:u.uid}:{},...J,dom:{tag:"button",classes:[_,`${_}--select`].concat(Xe(u.classes,ye=>`${_}--${ye}`)),attributes:{...ne}},components:V1([U.map(ye=>ye.asSpec()),B.map(ye=>ye.asSpec()),Q.some(se)]),matchWidth:!0,useMinWidth:!0,onOpen:(ye,xe,ke)=>{u.searchable&&b6(ke)},dropdownBehaviours:sn([...u.dropdownBehaviours,la.button(()=>u.disabled||T.providers.isDisabled()),ya(),Vx.config({}),wr.config({}),Dr("dropdown-events",[Nm(u,D),uf(u,D)]),Dr(ce,[ii((ye,xe)=>Xx(ye))]),Dr("menubutton-update-display-text",[Vt(Du,(ye,xe)=>{B.bind(ke=>ke.getOpt(ye)).each(ke=>{wr.set(ke,[Pi(T.providers.translate(xe.event.text))])})}),Vt(jm,(ye,xe)=>{U.bind(ke=>ke.getOpt(ye)).each(ke=>{wr.set(ke,[Ym(xe.event.icon,T.providers.icons)])})})])]),eventOrder:ci(_3,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Sc()]:["toolbar-button-events","dropdown-events",ce]}),sandboxBehaviours:sn([Xn.config({mode:"special",onLeft:W,onRight:W}),Dr("dropdown-sandbox-events",[Vt(RN,(ye,xe)=>{p6(ye),xe.stop()}),Vt(IN,(ye,xe)=>{m6(ye,xe),xe.stop()})])]),lazySink:T.getSink,toggleClass:`${_}--active`,parts:{menu:{...I1(!1,u.columns,u.presets),fakeFocus:u.searchable,onHighlightItem:lI,onCollapseMenu:(ye,xe,ke)=>{To.getHighlighted(ke).each(He=>{lI(ye,ke,He)})},onDehighlightItem:y6}},getAnchorOverrides:()=>({maxHeightFunction:(ye,xe)=>{oE()(ye,xe-10)}}),fetch:ye=>Ds.nu(oe(u.fetch,ye))})).asSpec()},cH=u=>g(u),C3=u=>u.type==="separator",uH=u=>yn(u,"getSubmenuItems"),dH={type:"separator"},w3=(u,_)=>{const T=Se(u,(D,B)=>cH(B)?B===""?D:B==="|"?D.length>0&&!C3(D[D.length-1])?D.concat([dH]):D:yn(_,B.toLowerCase())?D.concat([_[B.toLowerCase()]]):D:D.concat([B]),[]);return T.length>0&&C3(T[T.length-1])&&T.pop(),T},hH=(u,_)=>{const T=u.getSubmenuItems(),D=T3(T,_),B=ci(D.menus,{[u.value]:D.items}),U=ci(D.expansions,{[u.value]:u.value});return{item:u,menus:B,expansions:U}},E3=u=>{const _=Ue(u,"value").getOrThunk(()=>In("generated-menu-item"));return ci({value:_},u)},T3=(u,_)=>{const T=w3(g(u)?u.split(" "):u,_);return Bt(T,(D,B)=>{if(uH(B)){const U=E3(B),W=hH(U,_);return{menus:ci(D.menus,W.menus),items:[W.item,...D.items],expansions:ci(D.expansions,W.expansions)}}else return{...D,items:[B,...D.items]}},{menus:{},expansions:{},items:[]})},fH=u=>u.search.fold(()=>({searchMode:"no-search"}),_=>({searchMode:"search-with-field",placeholder:_.placeholder})),pH=u=>u.search.fold(()=>({searchMode:"no-search"}),_=>({searchMode:"search-with-results"})),Q1=(u,_,T,D)=>{const B=In("primary-menu"),U=T3(u,T.shared.providers.menuItems());if(U.items.length===0)return Q.none();const W=fH(D),J=iB(B,U.items,_,T,D.isHorizontalMenu,W),ne=pH(D),se=Zn(U.menus,(ge,ye)=>iB(ye,ge,_,T,!1,ne)),ce=ci(se,qs(B,J));return Q.from(vl.tieredData(B,ce,U.expansions))},YI=u=>!yn(u,"items"),A3="data-value",M3=(u,_,T,D)=>Xe(T,B=>YI(B)?{type:"togglemenuitem",text:B.text,value:B.value,active:B.value===D,onAction:()=>{Sn.setValue(u,B.value),tr(u,Fl,{name:_}),dr.focus(u)}}:{type:"nestedmenuitem",text:B.text,getSubmenuItems:()=>M3(u,_,B.items,D)}),jI=(u,_)=>Wt(u,T=>YI(T)?Vn(T.value===_,T):jI(T.items,_)),mH=(u,_,T)=>{const D=_.shared.providers,B=T.bind(ne=>jI(u.items,ne)).orThunk(()=>ht(u.items).filter(YI)),U=u.label.map(ne=>Au(ne,D)),W=No.parts.field({dom:{},factory:{sketch:ne=>p2({uid:ne.uid,text:B.map(se=>se.text),icon:Q.none(),tooltip:u.label,role:Q.none(),fetch:(se,ce)=>{const ge=M3(se,u.name,u.items,Sn.getValue(se));ce(Q1(ge,fh.CLOSE_ON_EXECUTE,_,{isHorizontalMenu:!1,search:Q.none()}))},onSetup:q(V),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[_i.config({}),Wm(B.map(se=>se.value),se=>ns(se.element,A3),(se,ce)=>{jI(u.items,ce).each(ge=>{bn(se.element,A3,ge.value),tr(se,Du,{text:ge.text})})})]},"tox-listbox",_.shared)}}),J={dom:{tag:"div",classes:["tox-listboxfield"]},components:[W]};return No.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:et([U.toArray(),[J]]),fieldBehaviours:sn([or.config({disabled:q(!u.enabled),onDisabled:ne=>{No.getField(ne).each(or.disable)},onEnabled:ne=>{No.getField(ne).each(or.enable)}})])})},ZI=(u,_)=>({dom:{tag:"div",classes:u.classes},components:Xe(u.items,_.shared.interpreter)}),gH=(u,_)=>{const T=Xe(u.options,B=>({dom:{tag:"option",value:B.value,innerHtml:B.text}})),D=u.data.map(B=>qs("initialValue",B)).getOr({});return{uid:u.uid,dom:{tag:"select",classes:u.selectClasses,attributes:u.selectAttributes},components:T,behaviours:aa(u.selectBehaviours,[dr.config({}),Sn.config({store:{mode:"manual",getValue:B=>hu(B.element),setValue:(B,U)=>{const W=ht(u.options);$e(u.options,ne=>ne.value===U).isSome()?Wf(B.element,U):B.element.dom.selectedIndex===-1&&U===""&&W.each(ne=>Wf(B.element,ne.value))},...D}})])}},vH=ml({name:"HtmlSelect",configFields:[Ft("options"),ia("selectBehaviours",[dr,Sn]),ft("selectClasses",[]),ft("selectAttributes",{}),Ro("data")],factory:gH}),yH=(u,_,T)=>{const D=Xe(u.items,ne=>({text:_.translate(ne.text),value:ne.value})),B=u.label.map(ne=>Au(ne,_)),U=No.parts.field({dom:{},...T.map(ne=>({data:ne})).getOr({}),selectAttributes:{size:u.size},options:D,factory:vH,selectBehaviours:sn([or.config({disabled:()=>!u.enabled||_.isDisabled()}),_i.config({}),Dr("selectbox-change",[Vt(Nf(),(ne,se)=>{tr(ne,Fl,{name:u.name})})])])}),W=u.size>1?Q.none():Q.some(Js("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},_.icons)),J={dom:{tag:"div",classes:["tox-selectfield"]},components:et([[U],W.toArray()])};return No.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:et([B.toArray(),[J]]),fieldBehaviours:sn([or.config({disabled:()=>!u.enabled||_.isDisabled(),onDisabled:ne=>{No.getField(ne).each(or.disable)},onEnabled:ne=>{No.getField(ne).each(or.enable)}}),ya()])})},Jx=q([ft("field1Name","field1"),ft("field2Name","field2"),Tc("onLockedChange"),Hh(["lockClass"]),ft("locked",!1),Ic.field("coupledFieldBehaviours",[eo,Sn])]),qI=(u,_,T)=>Xo(u,_,T).bind(eo.getCurrent),k3=(u,_)=>cs({factory:No,name:u,overrides:T=>({fieldBehaviours:sn([Dr("coupled-input-behaviour",[Vt(Lf(),D=>{qI(D,T,_).each(B=>{Xo(D,T,"lock").each(U=>{Rr.isOn(U)&&T.onLockedChange(D,B,U)})})})])])})}),bH=q([k3("field1","field2"),k3("field2","field1"),cs({factory:sa,schema:[Ft("dom")],name:"lock",overrides:u=>({buttonBehaviours:sn([Rr.config({selected:u.locked,toggleClass:u.markers.lockClass,aria:{mode:"pressed"}})])})})]),KI=(u,_,T,D)=>({uid:u.uid,dom:u.dom,components:_,behaviours:Ic.augment(u.coupledFieldBehaviours,[eo.config({find:Q.some}),Sn.config({store:{mode:"manual",getValue:B=>{const U=ap(B,u,["field1","field2"]);return{[u.field1Name]:Sn.getValue(U.field1()),[u.field2Name]:Sn.getValue(U.field2())}},setValue:(B,U)=>{const W=ap(B,u,["field1","field2"]);Dn(U,u.field1Name)&&Sn.setValue(W.field1(),U[u.field1Name]),Dn(U,u.field2Name)&&Sn.setValue(W.field2(),U[u.field2Name])}}})]),apis:{getField1:B=>Xo(B,u,"field1"),getField2:B=>Xo(B,u,"field2"),getLock:B=>Xo(B,u,"lock")}}),Hc=us({name:"FormCoupledInputs",configFields:Jx(),partFields:bH(),factory:KI,apis:{getField1:(u,_)=>u.getField1(_),getField2:(u,_)=>u.getField2(_),getLock:(u,_)=>u.getLock(_)}}),XI=u=>{const _={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},T=B=>B in _?_[B]:1;let D=u.value.toFixed(T(u.unit));return D.indexOf(".")!==-1&&(D=D.replace(/\.?0*$/,"")),D+u.unit},m2=u=>{const T=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(u);if(T!==null){const D=parseFloat(T[1]),B=T[2];return kr.value({value:D,unit:B})}else return kr.error(u)},D3=(u,_)=>{const T={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},D=B=>yn(T,B);return u.unit===_?Q.some(u.value):D(u.unit)&&D(_)?T[u.unit]===T[_]?Q.some(u.value):Q.some(u.value/T[u.unit]*T[_]):Q.none()},JI=u=>Q.none(),P3=(u,_)=>T=>D3(T,_).map(D=>({value:D*u,unit:_})),R3=(u,_)=>{const T=m2(u).toOptional(),D=m2(_).toOptional();return vi(T,D,(B,U)=>D3(B,U.unit).map(W=>U.value/W).map(W=>P3(W,U.unit)).getOr(JI)).getOr(JI)},_H=(u,_)=>{let T=JI;const D=In("ratio-event"),B=ge=>Js(ge,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ge]},_.icons),U=Hc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:_.translate(u.label.getOr("Constrain proportions"))}},components:[B("lock"),B("unlock")],buttonBehaviours:sn([or.config({disabled:()=>!u.enabled||_.isDisabled()}),ya(),_i.config({})])}),W=ge=>({dom:{tag:"div",classes:["tox-form__group"]},components:ge}),J=ge=>No.parts.field({factory:e0,inputClasses:["tox-textfield"],inputBehaviours:sn([or.config({disabled:()=>!u.enabled||_.isDisabled()}),ya(),_i.config({}),Dr("size-input-events",[Vt(Ml(),(ye,xe)=>{tr(ye,D,{isField1:ge})}),Vt(Nf(),(ye,xe)=>{tr(ye,Fl,{name:u.name})})])]),selectOnFocus:!1}),ne=ge=>({dom:{tag:"label",classes:["tox-label"]},components:[Pi(_.translate(ge))]}),se=Hc.parts.field1(W([No.parts.label(ne("Width")),J(!0)])),ce=Hc.parts.field2(W([No.parts.label(ne("Height")),J(!1)]));return Hc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[se,ce,W([ne(jk),U])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ge,ye,xe)=>{m2(Sn.getValue(ge)).each(ke=>{T(ke).each(He=>{Sn.setValue(ye,XI(He))})})},coupledFieldBehaviours:sn([or.config({disabled:()=>!u.enabled||_.isDisabled(),onDisabled:ge=>{Hc.getField1(ge).bind(No.getField).each(or.disable),Hc.getField2(ge).bind(No.getField).each(or.disable),Hc.getLock(ge).each(or.disable)},onEnabled:ge=>{Hc.getField1(ge).bind(No.getField).each(or.enable),Hc.getField2(ge).bind(No.getField).each(or.enable),Hc.getLock(ge).each(or.enable)}}),ya(),Dr("size-input-events2",[Vt(D,(ge,ye)=>{const xe=ye.event.isField1,ke=xe?Hc.getField1(ge):Hc.getField2(ge),He=xe?Hc.getField2(ge):Hc.getField1(ge),pt=ke.map(Sn.getValue).getOr(""),Je=He.map(Sn.getValue).getOr("");T=R3(pt,Je)})])])})},I3=(u,_,T)=>{const D=ku.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Pi(_.translate(u.label))]}),B=ku.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),U=ku.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ku.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:u.min,maxX:u.max,getInitialValue:q(T.getOrThunk(()=>(Math.abs(u.max)-Math.abs(u.min))/2))},components:[D,B,U],sliderBehaviours:sn([cc.self(),dr.config({})]),onChoose:(W,J,ne)=>{tr(W,Fl,{name:u.name,value:ne})}})},$3=(u,_)=>{const T=J=>({dom:{tag:"th",innerHtml:_.translate(J)}}),D=J=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Xe(J,T)}]}),B=J=>({dom:{tag:"td",innerHtml:_.translate(J)}}),U=J=>({dom:{tag:"tr"},components:Xe(J,B)}),W=J=>({dom:{tag:"tbody"},components:Xe(J,U)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[D(u.header),W(u.cells)],behaviours:sn([_i.config({}),dr.config({})])}},L3=(u,_)=>{const T=u.label.map(xe=>Au(xe,_)),D=[or.config({disabled:()=>u.disabled||_.isDisabled()}),ya(),Xn.config({mode:"execution",useEnter:u.multiline!==!0,useControlEnter:u.multiline===!0,execute:xe=>(Kr(xe,Fx),Q.some(!0))}),Dr("textfield-change",[Vt(Lf(),(xe,ke)=>{tr(xe,Fl,{name:u.name})}),Vt(a_(),(xe,ke)=>{tr(xe,Fl,{name:u.name})})]),_i.config({})],B=u.validation.map(xe=>zc.config({getRoot:ke=>Ou(ke.element),invalidClass:"tox-invalid",validator:{validate:ke=>{const He=Sn.getValue(ke),pt=xe.validator(He);return Ds.pure(pt===!0?kr.value(He):kr.error(pt))},validateOnLoad:xe.validateOnLoad}})).toArray(),U=u.placeholder.fold(q({}),xe=>({placeholder:_.translate(xe)})),W=u.inputMode.fold(q({}),xe=>({inputmode:xe})),J={...U,...W},ne=No.parts.field({tag:u.multiline===!0?"textarea":"input",...u.data.map(xe=>({data:xe})).getOr({}),inputAttributes:J,inputClasses:[u.classname],inputBehaviours:sn(et([D,B])),selectOnFocus:!1,factory:e0}),se=u.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[ne]}:ne,ge=(u.flex?["tox-form__group--stretched"]:[]).concat(u.maximized?["tox-form-group--maximize"]:[]),ye=[or.config({disabled:()=>u.disabled||_.isDisabled(),onDisabled:xe=>{No.getField(xe).each(or.disable)},onEnabled:xe=>{No.getField(xe).each(or.enable)}}),ya()];return Ox(T,se,ge,ye)},N3=(u,_,T)=>L3({name:u.name,multiline:!1,label:u.label,inputMode:u.inputMode,placeholder:u.placeholder,flex:!1,disabled:!u.enabled,classname:"tox-textfield",validation:Q.none(),maximized:u.maximized,data:T},_),O3=(u,_,T)=>L3({name:u.name,multiline:!0,label:u.label,inputMode:Q.none(),placeholder:u.placeholder,flex:!0,disabled:!u.enabled,classname:"tox-textarea",validation:Q.none(),maximized:u.maximized,data:T},_),eb=(u,_)=>_.getAnimationRoot.fold(()=>u.element,T=>T(u)),Tp=u=>u.dimension.property,l0=(u,_)=>u.dimension.getDimension(_),g2=(u,_)=>{const T=eb(u,_);Vs(T,[_.shrinkingClass,_.growingClass])},y2=(u,_)=>{hi(u.element,_.openClass),Di(u.element,_.closedClass),$r(u.element,Tp(_),"0px"),pg(u.element)},QI=(u,_)=>{hi(u.element,_.closedClass),Di(u.element,_.openClass),Do(u.element,Tp(_))},e$=(u,_,T,D)=>{T.setCollapsed(),$r(u.element,Tp(_),l0(_,u.element)),g2(u,_),y2(u,_),_.onStartShrink(u),_.onShrunk(u)},SH=(u,_,T,D)=>{const B=D.getOrThunk(()=>l0(_,u.element));T.setCollapsed(),$r(u.element,Tp(_),B),pg(u.element);const U=eb(u,_);hi(U,_.growingClass),Di(U,_.shrinkingClass),y2(u,_),_.onStartShrink(u)},B3=(u,_,T)=>{const D=l0(_,u.element);(D==="0px"?e$:SH)(u,_,T,Q.some(D))},b2=(u,_,T)=>{const D=eb(u,_),B=ra(D,_.shrinkingClass),U=l0(_,u.element);QI(u,_);const W=l0(_,u.element);(B?()=>{$r(u.element,Tp(_),U),pg(u.element)}:()=>{y2(u,_)})(),hi(D,_.shrinkingClass),Di(D,_.growingClass),QI(u,_),$r(u.element,Tp(_),W),T.setExpanded(),_.onStartGrow(u)},xH=(u,_,T)=>{if(T.isExpanded()){Do(u.element,Tp(_));const D=l0(_,u.element);$r(u.element,Tp(_),D)}},CH=(u,_,T)=>{T.isExpanded()||b2(u,_,T)},wH=(u,_,T)=>{T.isExpanded()&&B3(u,_,T)},F3=(u,_,T)=>{T.isExpanded()&&e$(u,_,T)},EH=(u,_,T)=>T.isExpanded(),V3=(u,_,T)=>T.isCollapsed(),z3=(u,_,T)=>{const D=eb(u,_);return ra(D,_.growingClass)===!0},t$=(u,_,T)=>{const D=eb(u,_);return ra(D,_.shrinkingClass)===!0};var TH=Object.freeze({__proto__:null,refresh:xH,grow:CH,shrink:wH,immediateShrink:F3,hasGrown:EH,hasShrunk:V3,isGrowing:z3,isShrinking:t$,isTransitioning:(u,_,T)=>z3(u,_)||t$(u,_),toggleGrow:(u,_,T)=>{(T.isExpanded()?B3:b2)(u,_,T)},disableTransitions:g2,immediateGrow:(u,_,T)=>{T.isExpanded()||(QI(u,_),$r(u.element,Tp(_),l0(_,u.element)),g2(u,_),T.setExpanded(),_.onStartGrow(u),_.onGrown(u))}}),MH=Object.freeze({__proto__:null,exhibit:(u,_,T)=>{const D=_.expanded;return Ql(D?{classes:[_.openClass],styles:{}}:{classes:[_.closedClass],styles:qs(_.dimension.property,"0px")})},events:(u,_)=>ui([qu(Yp(),(T,D)=>{D.event.raw.propertyName===u.dimension.property&&(g2(T,u),_.isExpanded()&&Do(T.element,u.dimension.property),(_.isExpanded()?u.onGrown:u.onShrunk)(T))})])}),U3=[Ft("closedClass"),Ft("openClass"),Ft("shrinkingClass"),Ft("growingClass"),Ro("getAnimationRoot"),so("onShrunk"),so("onStartShrink"),so("onGrown"),so("onStartGrow"),ft("expanded",!1),La("dimension",Eo("property",{width:[Go("property","width"),Go("getDimension",u=>os(u)+"px")],height:[Go("property","height"),Go("getDimension",u=>ua(u)+"px")]}))],kH=Object.freeze({__proto__:null,init:u=>{const _=sr(u.expanded),T=()=>"expanded: "+_.get();return Xs({isExpanded:()=>_.get()===!0,isCollapsed:()=>_.get()===!1,setCollapsed:oe(_.set,!1),setExpanded:oe(_.set,!0),readState:T})}});const uc=Ba({fields:U3,name:"sliding",active:MH,apis:TH,state:kH}),n$=u=>({isEnabled:()=>!or.isDisabled(u),setEnabled:_=>or.set(u,!_),setActive:_=>{const T=u.element;_?(Di(T,"tox-tbtn--enabled"),bn(T,"aria-pressed",!0)):(hi(T,"tox-tbtn--enabled"),Ni(T,"aria-pressed"))},isActive:()=>ra(u.element,"tox-tbtn--enabled"),setText:_=>{tr(u,Du,{text:_})},setIcon:_=>tr(u,jm,{icon:_})}),Qx=(u,_,T,D,B=!0)=>p2({text:u.text,icon:u.icon,tooltip:u.tooltip,searchable:u.search.isSome(),role:D,fetch:(U,W)=>{const J={pattern:u.search.isSome()?_6(U):""};u.fetch(ne=>{W(Q1(ne,fh.CLOSE_ON_EXECUTE,T,{isHorizontalMenu:!1,search:u.search}))},J,n$(U))},onSetup:u.onSetup,getApi:n$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...B?[_i.config({})]:[]]},_,T.shared),DH=(u,_,T)=>{const D=U=>W=>{const J=!W.isActive();W.setActive(J),U.storage.set(J),T.shared.getSink().each(ne=>{_().getOpt(ne).each(se=>{Il(se.element),tr(se,ff,{name:U.name,value:U.storage.get()})})})},B=U=>W=>{W.setActive(U.storage.get())};return U=>{U(Xe(u,W=>{const J=W.text.fold(()=>({}),ne=>({text:ne}));return{type:W.type,active:!1,...J,onAction:D(W),onSetup:B(W)}}))}},H3=u=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:u,"aria-label":u}},components:[Pi(u)]}),r$=In("leaf-label-event-id"),_2=({leaf:u,onLeafAction:_,visible:T,treeId:D,selectedId:B,backstage:U})=>{const W=u.menu.map(ne=>Qx(ne,"tox-mbtn",U,Q.none(),T)),J=[H3(u.title)];return W.each(ne=>J.push(ne)),sa.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(T?["tox-tree--leaf__label--visible"]:[])},components:J,role:"treeitem",action:ne=>{_(u.id),ne.getSystem().broadcastOn([`update-active-item-${D}`],{value:u.id})},eventOrder:{[Ks()]:[r$,"keying"]},buttonBehaviours:sn([...T?[_i.config({})]:[],Rr.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),dl.config({channels:{[`update-active-item-${D}`]:{onReceive:(ne,se)=>{(se.value===u.id?Rr.on:Rr.off)(ne)}}}}),Dr(r$,[ii((ne,se)=>{B.each(ce=>{(ce===u.id?Rr.on:Rr.off)(ne)})}),Vt(Ks(),(ne,se)=>{const ce=se.event.raw.code==="ArrowLeft",ge=se.event.raw.code==="ArrowRight";ce?(Rl(ne.element,".tox-tree--directory").each(ye=>{ne.getSystem().getByDom(ye).each(xe=>{fy(ye,".tox-tree--directory__label").each(ke=>{xe.getSystem().getByDom(ke).each(dr.focus)})})}),se.stop()):ge&&se.stop()})])])})},G3=(u,_,T)=>Js(u,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:T},_),S2=(u,_)=>G3(u,_,[]),W3=In("directory-label-event-id"),PH=({directory:u,visible:_,noChildren:T,backstage:D})=>{const B=u.menu.map(J=>Qx(J,"tox-mbtn",D,Q.none())),U=[{dom:{tag:"div",classes:["tox-chevron"]},components:[S2("chevron-right",D.shared.providers.icons)]},H3(u.title)];B.each(J=>{U.push(J)});const W=J=>{Rl(J.element,".tox-tree--directory").each(ne=>{J.getSystem().getByDom(ne).each(se=>{const ce=!Rr.isOn(se);Rr.toggle(se),tr(J,"expand-tree-node",{expanded:ce,node:u.id})})})};return sa.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(_?["tox-tree--directory__label--visible"]:[])},components:U,action:W,eventOrder:{[Ks()]:[W3,"keying"]},buttonBehaviours:sn([..._?[_i.config({})]:[],Dr(W3,[Vt(Ks(),(J,ne)=>{const se=ne.event.raw.code==="ArrowRight",ce=ne.event.raw.code==="ArrowLeft";se&&T&&ne.stop(),(se||ce)&&Rl(J.element,".tox-tree--directory").each(ge=>{J.getSystem().getByDom(ge).each(ye=>{!Rr.isOn(ye)&&se||Rr.isOn(ye)&&ce?(W(J),ne.stop()):ce&&!Rr.isOn(ye)&&(Rl(ye.element,".tox-tree--directory").each(xe=>{fy(xe,".tox-tree--directory__label").each(ke=>{ye.getSystem().getByDom(ke).each(dr.focus)})}),ne.stop())})})})])])})},RH=({children:u,onLeafAction:_,visible:T,treeId:D,expandedIds:B,selectedId:U,backstage:W})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:u.map(J=>J.type==="leaf"?_2({leaf:J,selectedId:U,onLeafAction:_,visible:T,treeId:D,backstage:W}):x2({directory:J,expandedIds:B,selectedId:U,onLeafAction:_,labelTabstopping:T,treeId:D,backstage:W})),behaviours:sn([uc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:T}),wr.config({})])}),IH=In("directory-event-id"),x2=({directory:u,onLeafAction:_,labelTabstopping:T,treeId:D,backstage:B,expandedIds:U,selectedId:W})=>{const{children:J}=u,ne=sr(U),se=ge=>J.map(ye=>ye.type==="leaf"?_2({leaf:ye,selectedId:W,onLeafAction:_,visible:ge,treeId:D,backstage:B}):x2({directory:ye,expandedIds:ne.get(),selectedId:W,onLeafAction:_,labelTabstopping:ge,treeId:D,backstage:B})),ce=U.includes(u.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[PH({directory:u,visible:T,noChildren:u.children.length===0,backstage:B}),RH({children:J,expandedIds:U,selectedId:W,onLeafAction:_,visible:ce,treeId:D,backstage:B})],behaviours:sn([Dr(IH,[ii((ge,ye)=>{Rr.set(ge,ce)}),Vt("expand-tree-node",(ge,ye)=>{const{expanded:xe,node:ke}=ye.event;ne.set(xe?[...ne.get(),ke]:ne.get().filter(He=>He!==ke))})]),Rr.config({...u.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(ge,ye)=>{const xe=ge.components()[1],ke=se(ye);ye?uc.grow(xe):uc.shrink(xe),wr.set(xe,ke)}})])}},$H=In("tree-event-id"),LH=(u,_)=>{const T=u.onLeafAction.getOr(V),D=u.onToggleExpand.getOr(V),B=u.defaultExpandedIds,U=sr(B),W=sr(u.defaultSelectedId),J=In("tree-id"),ne=(se,ce)=>u.items.map(ge=>ge.type==="leaf"?_2({leaf:ge,selectedId:se,onLeafAction:T,visible:!0,treeId:J,backstage:_}):x2({directory:ge,selectedId:se,onLeafAction:T,expandedIds:ce,labelTabstopping:!0,treeId:J,backstage:_}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:ne(W.get(),U.get()),behaviours:sn([Xn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Dr($H,[Vt("expand-tree-node",(se,ce)=>{const{expanded:ge,node:ye}=ce.event;U.set(ge?[...U.get(),ye]:U.get().filter(xe=>xe!==ye)),D(U.get(),{expanded:ge,node:ye})})]),dl.config({channels:{[`update-active-item-${J}`]:{onReceive:(se,ce)=>{W.set(Q.some(ce.value)),wr.set(se,ne(Q.some(ce.value),U.get()))}}}}),wr.config({})])}};var Y3=Object.freeze({__proto__:null,events:(u,_)=>{const D=u.stream.streams.setup(u,_);return ui([Vt(u.event,D),Ku(()=>_.cancel())].concat(u.cancelEvent.map(B=>[Vt(B,()=>_.cancel())]).getOr([])))}});const o$=u=>{const _=sr(null);return Xs({readState:()=>({timer:_.get()!==null?"set":"unset"}),setTimer:U=>{_.set(U)},cancel:()=>{const U=_.get();U!==null&&U.cancel()}})};var NH=Object.freeze({__proto__:null,throttle:o$,init:u=>u.stream.streams.state(u)});const j3=(u,_)=>{const T=u.stream,D=zI(u.onStream,T.delay);return _.setTimer(D),(B,U)=>{D.throttle(B,U),T.stopEvent&&U.stop()}};var OH=[La("stream",Eo("mode",{throttle:[Ft("delay"),ft("stopEvent",!0),Go("streams",{setup:j3,state:o$})]})),ft("event","input"),Ro("cancelEvent"),Tc("onStream")];const i$=Ba({fields:OH,name:"streaming",active:Y3,state:NH}),gr=(u,_,T)=>{const D=Sn.getValue(T);Sn.setValue(_,D),a$(_)},tb=(u,_)=>{const T=u.element,D=hu(T),B=T.dom;ns(T,"type")!=="number"&&_(B,D)},a$=u=>{tb(u,(_,T)=>_.setSelectionRange(T.length,T.length))},Z3=(u,_)=>{tb(u,(T,D)=>T.setSelectionRange(_,D.length))},q3=(u,_,T)=>{if(u.selectsOver){const D=Sn.getValue(_),B=u.getDisplayText(D),U=Sn.getValue(T);return u.getDisplayText(U).indexOf(B)===0?Q.some(()=>{gr(u,_,T),Z3(_,B.length)}):Q.none()}else return Q.none()},C2=q("alloy.typeahead.itemexecute"),K3=(u,_,T,D)=>{const B=(ge,ye,xe)=>{u.previewing.set(!1);const ke=zi.getCoupled(ge,"sandbox");if(io.isOpen(ke))eo.getCurrent(ke).each(He=>{To.getHighlighted(He).fold(()=>{xe(He)},()=>{Ff(ke,He.element,"keydown",ye)})});else{const He=pt=>{eo.getCurrent(pt).each(xe)};BA(u,W(ge),ge,ke,D,He,Ms.HighlightMenuAndItem).get(V)}},U=lR(u),W=ge=>ye=>ye.map(xe=>{const ke=Oo(xe.menus),He=Fe(ke,Je=>Rt(Je.items,Ze=>Ze.type==="item"));return Sn.getState(ge).update(Xe(He,Je=>Je.data)),xe}),J=ge=>eo.getCurrent(ge),ne="typeaheadevents",se=[dr.config({}),Sn.config({onSetValue:u.onSetValue,store:{mode:"dataset",getDataKey:ge=>hu(ge.element),getFallbackEntry:ge=>({value:ge,meta:{}}),setValue:(ge,ye)=>{Wf(ge.element,u.model.getDisplayText(ye))},...u.initialData.map(ge=>qs("initialValue",ge)).getOr({})}}),i$.config({stream:{mode:"throttle",delay:u.responseTime,stopEvent:!1},onStream:(ge,ye)=>{const xe=zi.getCoupled(ge,"sandbox");if(dr.isFocused(ge)&&hu(ge.element).length>=u.minChars){const He=J(xe).bind(Je=>To.getHighlighted(Je).map(Sn.getValue));u.previewing.set(!0);const pt=Je=>{J(xe).each(Ze=>{He.fold(()=>{u.model.selectsOver&&To.highlightFirst(Ze)},dt=>{To.highlightBy(Ze,Mt=>Sn.getValue(Mt).value===dt.value),To.getHighlighted(Ze).orThunk(()=>(To.highlightFirst(Ze),Q.none()))})})};BA(u,W(ge),ge,xe,D,pt,Ms.HighlightJustMenu).get(V)}},cancelEvent:l_()}),Xn.config({mode:"special",onDown:(ge,ye)=>(B(ge,ye,To.highlightFirst),Q.some(!0)),onEscape:ge=>{const ye=zi.getCoupled(ge,"sandbox");return io.isOpen(ye)?(io.close(ye),Q.some(!0)):Q.none()},onUp:(ge,ye)=>(B(ge,ye,To.highlightLast),Q.some(!0)),onEnter:ge=>{const ye=zi.getCoupled(ge,"sandbox"),xe=io.isOpen(ye);if(xe&&!u.previewing.get())return J(ye).bind(ke=>To.getHighlighted(ke)).map(ke=>(tr(ge,C2(),{item:ke}),!0));{const ke=Sn.getValue(ge);return Kr(ge,l_()),u.onExecute(ye,ge,ke),xe&&io.close(ye),Q.some(!0)}}}),Rr.config({toggleClass:u.markers.openClass,aria:{mode:"expanded"}}),zi.config({others:{sandbox:ge=>aI(u,ge,{onOpen:()=>Rr.on(ge),onClose:()=>{u.lazyTypeaheadComp.get().each(ye=>Ni(ye.element,"aria-activedescendant")),Rr.off(ge)}})}}),Dr(ne,[ii(ge=>{u.lazyTypeaheadComp.set(Q.some(ge))}),Ku(ge=>{u.lazyTypeaheadComp.set(Q.none())}),uu(ge=>{const ye=V;iI(u,W(ge),ge,D,ye,Ms.HighlightMenuAndItem).get(V)}),Vt(C2(),(ge,ye)=>{const xe=zi.getCoupled(ge,"sandbox");gr(u.model,ge,ye.event.item),Kr(ge,l_()),u.onItemExecute(ge,xe,ye.event.item,Sn.getValue(ge)),io.close(xe),a$(ge)})].concat(u.dismissOnBlur?[Vt(i_(),ge=>{const ye=zi.getCoupled(ge,"sandbox");Mc(ye.element).isNone()&&io.close(ye)})]:[]))],ce={[$h()]:[Sn.name(),i$.name(),ne],...u.eventOrder};return{uid:u.uid,dom:dA(ci(u,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...U,...aa(u.typeaheadBehaviours,se)},eventOrder:ce}},jY=q([Ro("lazySink"),Ft("fetch"),ft("minChars",5),ft("responseTime",1e3),so("onOpen"),ft("getHotspot",Q.some),ft("getAnchorOverrides",q({})),ft("layouts",Q.none()),ft("eventOrder",{}),ju("model",{},[ft("getDisplayText",u=>u.meta!==void 0&&u.meta.text!==void 0?u.meta.text:u.value),ft("selectsOver",!0),ft("populateFromBrowse",!0)]),so("onSetValue"),ll("onExecute"),so("onItemExecute"),ft("inputClasses",[]),ft("inputAttributes",{}),ft("inputStyles",{}),ft("matchWidth",!0),ft("useMinWidth",!1),ft("dismissOnBlur",!0),Hh(["openClass"]),Ro("initialData"),ia("typeaheadBehaviours",[dr,Sn,i$,Xn,Rr,zi]),Gi("lazyTypeaheadComp",()=>sr(Q.none)),Gi("previewing",()=>sr(!0))].concat(bx()).concat(sI())),eC=q([$c({schema:[py()],name:"menu",overrides:u=>({fakeFocus:!0,onHighlightItem:(_,T,D)=>{u.previewing.get()?u.lazyTypeaheadComp.get().each(B=>{q3(u.model,B,D).fold(()=>{u.model.selectsOver?(To.dehighlight(T,D),u.previewing.set(!0)):u.previewing.set(!1)},U=>{U(),u.previewing.set(!1)})}):u.lazyTypeaheadComp.get().each(B=>{u.model.populateFromBrowse&&gr(u.model,B,D),Ls(D.element,"id").each(U=>bn(B.element,"aria-activedescendant",U))})},onExecute:(_,T)=>u.lazyTypeaheadComp.get().map(D=>(tr(D,C2(),{item:T}),!0)),onHover:(_,T)=>{u.previewing.set(!1),u.lazyTypeaheadComp.get().each(D=>{u.model.populateFromBrowse&&gr(u.model,D,T)})}})})]),BH=us({name:"Typeahead",configFields:jY(),partFields:eC(),factory:K3}),Pu=u=>({...u,toCached:()=>Pu(u.toCached()),bindFuture:ne=>Pu(u.bind(se=>se.fold(ce=>Ds.pure(kr.error(ce)),ce=>ne(ce)))),bindResult:ne=>Pu(u.map(se=>se.bind(ne))),mapResult:ne=>Pu(u.map(se=>se.map(ne))),mapError:ne=>Pu(u.map(se=>se.mapError(ne))),foldResult:(ne,se)=>u.map(ce=>ce.fold(ne,se)),withTimeout:(ne,se)=>Pu(Ds.nu(ce=>{let ge=!1;const ye=setTimeout(()=>{ge=!0,ce(kr.error(se()))},ne);u.get(xe=>{ge||(clearTimeout(ye),ce(xe))})}))}),X3=u=>Pu(Ds.nu(u)),J3=u=>Pu(Ds.pure(kr.value(u))),zH={nu:X3,wrap:Pu,pure:J3,value:J3,error:u=>Pu(Ds.pure(kr.error(u))),fromResult:u=>Pu(Ds.pure(u)),fromFuture:u=>Pu(u.map(kr.value)),fromPromise:u=>X3(_=>{u.then(T=>{_(kr.value(T))},T=>{_(kr.error(T))})})},w2=(u,_,T=[],D,B,U)=>{const W=_.fold(()=>({}),se=>({action:se})),J={buttonBehaviours:sn([la.button(()=>!u.enabled||U.isDisabled()),ya(),_i.config({}),Dr("button press",[h_("click"),h_("mousedown")])].concat(T)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...W},ne=ci(J,{dom:D});return ci(ne,{components:B})},UH=(u,_,T,D=[])=>{const B=u.tooltip.map(ne=>({"aria-label":T.translate(ne),title:T.translate(ne)})).getOr({}),U={tag:"button",classes:["tox-tbtn"],attributes:B},W=u.icon.map(ne=>f2(ne,T.icons)),J=V1([W]);return w2(u,_,D,U,J,T)},s$=u=>{switch(u){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},eF=(u,_,T,D=[],B=[])=>{const U=T.translate(u.text),W=u.icon.map(ye=>f2(ye,T.icons)),J=[W.getOrThunk(()=>Pi(U))],ne=u.buttonType.getOr(!u.primary&&!u.borderless?"secondary":"primary"),ge={tag:"button",classes:[...s$(ne),...W.isSome()?["tox-button--icon"]:[],...u.borderless?["tox-button--naked"]:[],...B],attributes:{title:U}};return w2(u,_,D,ge,J,T)},l$=(u,_,T,D=[],B=[])=>{const U=eF(u,Q.some(_),T,D,B);return sa.sketch(U)},tF=(u,_)=>T=>{_==="custom"?tr(T,ff,{name:u,value:{}}):_==="submit"?Kr(T,Fx):_==="cancel"?Kr(T,zm):console.error("Unknown button type: ",_)},HH=(u,_)=>_==="menu",GH=(u,_)=>_==="custom"||_==="cancel"||_==="submit",YH=(u,_)=>_==="togglebutton",jH=(u,_)=>{var T,D;const B=u.icon.map(Ze=>Ym(Ze,_.icons)).map(Po),U=Ze=>{tr(Ze,ff,{name:u.name,value:{setIcon:dt=>{B.map(Mt=>Mt.getOpt(Ze).each(nn=>{wr.set(nn,[Ym(dt,_.icons)])}))}}})},W=u.buttonType.getOr(u.primary?"primary":"secondary"),J={...u,name:(T=u.name)!==null&&T!==void 0?T:"",primary:W==="primary",tooltip:Q.from(u.tooltip),enabled:(D=u.enabled)!==null&&D!==void 0?D:!1,borderless:!1},ne=J.tooltip.map(Ze=>({"aria-label":_.translate(Ze),title:_.translate(Ze)})).getOr({}),se=s$(W??"secondary"),ce=u.icon.isSome()&&u.text.isSome(),ge={tag:"button",classes:[...se.concat(u.icon.isSome()?["tox-button--icon"]:[]),...u.active?["tox-button--enabled"]:[],...ce?["tox-button--icon-and-text"]:[]],attributes:ne},ye=[],xe=_.translate(u.text.getOr("")),ke=Pi(xe),pt=[...V1([B.map(Ze=>Ze.asSpec())]),...u.text.isSome()?[ke]:[]],Je=w2(J,Q.some(U),ye,ge,pt,_);return sa.sketch(Je)},E2=(u,_,T)=>{if(HH(u,_)){const D=()=>W,B=u,U={...u,type:"menubutton",search:Q.none(),onSetup:J=>(J.setEnabled(u.enabled),V),fetch:DH(B.items,D,T)},W=Po(Qx(U,"tox-tbtn",T,Q.none()));return W.asSpec()}else if(GH(u,_)){const D=tF(u.name,_),B={...u,borderless:!1};return l$(B,D,T.shared.providers,[])}else{if(YH(u,_))return jH(u,T.shared.providers);throw console.error("Unknown footer button type: ",_),new Error("Unknown footer button type")}},ZH=(u,_)=>{const T=tF(u.name,"custom");return H6(Q.none(),No.parts.field({factory:sa,...eF(u,Q.some(T),_,[Wx(""),cc.self()])}))},qH={type:"separator"},KH=u=>({type:"menuitem",value:u.url,text:u.title,meta:{attach:u.attach},onAction:V}),c$=(u,_)=>({type:"menuitem",value:_,text:u,meta:{attach:void 0},onAction:V}),XH=u=>Xe(u,KH),nF=(u,_)=>Rt(_,T=>T.type===u),rF=(u,_)=>XH(nF(u,_)),JH=u=>rF("header",u.targets),QH=u=>rF("anchor",u.targets),e8=u=>Q.from(u.anchorTop).map(_=>c$("<top>",_)).toArray(),t8=u=>Q.from(u.anchorBottom).map(_=>c$("<bottom>",_)).toArray(),n8=u=>Xe(u,_=>c$(_,_)),oF=u=>Se(u,(_,T)=>_.length===0||T.length===0?_.concat(T):_.concat(qH,T),[]),u$=(u,_)=>{const T=u.toLowerCase();return Rt(_,D=>{var B;const U=D.meta!==void 0&&D.meta.text!==void 0?D.meta.text:D.text,W=(B=D.value)!==null&&B!==void 0?B:"";return Da(U.toLowerCase(),T)||Da(W.toLowerCase(),T)})},iF=(u,_,T)=>{var D,B;const U=Sn.getValue(_),W=(B=(D=U==null?void 0:U.meta)===null||D===void 0?void 0:D.text)!==null&&B!==void 0?B:U.value;return T.getLinkInformation().fold(()=>[],ne=>{const se=u$(W,n8(T.getHistory(u)));return u==="file"?oF([se,u$(W,JH(ne)),u$(W,et([e8(ne),QH(ne),t8(ne)]))]):se})},aF=In("aria-invalid"),sF=(u,_,T,D)=>{const B=_.shared.providers,U=Ze=>{const dt=Sn.getValue(Ze);T.addToHistory(dt.value,u.filetype)},W={...D.map(Ze=>({initialData:Ze})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":aF,type:"url"},minChars:0,responseTime:0,fetch:Ze=>{const dt=iF(u.filetype,Ze,T),Mt=Q1(dt,fh.BUBBLE_TO_SANDBOX,_,{isHorizontalMenu:!1,search:Q.none()});return Ds.pure(Mt)},getHotspot:Ze=>ke.getOpt(Ze),onSetValue:(Ze,dt)=>{Ze.hasConfigured(zc)&&zc.run(Ze).get(V)},typeaheadBehaviours:sn([...T.getValidationHandler().map(Ze=>zc.config({getRoot:dt=>Ou(dt.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(dt,Mt)=>{ce.getOpt(dt).each(nn=>{bn(nn.element,"title",B.translate(Mt))})}},validator:{validate:dt=>{const Mt=Sn.getValue(dt);return zH.nu(nn=>{Ze({type:u.filetype,url:Mt.value},$t=>{if($t.status==="invalid"){const un=kr.error($t.message);nn(un)}else{const un=kr.value($t.message);nn(un)}})})},validateOnLoad:!1}})).toArray(),or.config({disabled:()=>!u.enabled||B.isDisabled()}),_i.config({}),Dr("urlinput-events",[Vt(Lf(),Ze=>{const dt=hu(Ze.element),Mt=dt.trim();Mt!==dt&&Wf(Ze.element,Mt),u.filetype==="file"&&tr(Ze,Fl,{name:u.name})}),Vt(Nf(),Ze=>{tr(Ze,Fl,{name:u.name}),U(Ze)}),Vt(a_(),Ze=>{tr(Ze,Fl,{name:u.name}),U(Ze)})])]),eventOrder:{[Lf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ze=>Ze.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:_.shared.getSink,parts:{menu:I1(!1,1,"normal")},onExecute:(Ze,dt,Mt)=>{tr(dt,Fx,{})},onItemExecute:(Ze,dt,Mt,nn)=>{U(Ze),tr(Ze,Fl,{name:u.name})}},J=No.parts.field({...W,factory:BH}),ne=u.label.map(Ze=>Au(Ze,B)),ce=Po(((Ze,dt,Mt=Ze,nn=Ze)=>Js(Mt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ze],attributes:{title:B.translate(nn),"aria-live":"polite",...dt.fold(()=>({}),$t=>({id:$t}))}},B.icons))("invalid",Q.some(aF),"warning")),ge=Po({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[ce.asSpec()]}),ye=T.getUrlPicker(u.filetype),xe=In("browser.url.event"),ke=Po({dom:{tag:"div",classes:["tox-control-wrap"]},components:[J,ge.asSpec()],behaviours:sn([or.config({disabled:()=>!u.enabled||B.isDisabled()})])}),He=Po(l$({name:u.name,icon:Q.some("browse"),text:u.picker_text.or(u.label).getOr(""),enabled:u.enabled,primary:!1,buttonType:Q.none(),borderless:!0},Ze=>Kr(Ze,xe),B,[],["tox-browse-url"])),pt=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:et([[ke.asSpec()],ye.map(()=>He.asSpec()).toArray()])}),Je=Ze=>{eo.getCurrent(Ze).each(dt=>{const Mt=Sn.getValue(dt),nn={fieldname:u.name,...Mt};ye.each($t=>{$t(nn).get(un=>{Sn.setValue(dt,un),tr(Ze,Fl,{name:u.name})})})})};return No.sketch({dom:$Y(),components:ne.toArray().concat([pt()]),fieldBehaviours:sn([or.config({disabled:()=>!u.enabled||B.isDisabled(),onDisabled:Ze=>{No.getField(Ze).each(or.disable),He.getOpt(Ze).each(or.disable)},onEnabled:Ze=>{No.getField(Ze).each(or.enable),He.getOpt(Ze).each(or.enable)}}),ya(),Dr("url-input-events",[Vt(xe,Je)])])})},lF=(u,_)=>{const T=Ua(u.icon,_.icons);return ph.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${u.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:u.url?void 0:T},components:u.url?[sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:T,attributes:{title:_.translate(u.iconTooltip)}},action:D=>tr(D,ff,{name:"alert-banner",value:u.url}),buttonBehaviours:sn([bp()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:_.translate(u.text)}}]})},d$=(u,_)=>{u.dom.checked=_},r8=u=>u.dom.checked,cF=(u,_,T)=>{const D=ne=>(ne.element.dom.click(),Q.some(!0)),B=No.parts.field({factory:{sketch:ie},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:sn([cc.self(),or.config({disabled:()=>!u.enabled||_.isDisabled(),onDisabled:ne=>{Ou(ne.element).each(se=>Di(se,"tox-checkbox--disabled"))},onEnabled:ne=>{Ou(ne.element).each(se=>hi(se,"tox-checkbox--disabled"))}}),_i.config({}),dr.config({}),VI(T,r8,d$),Xn.config({mode:"special",onEnter:D,onSpace:D,stopSpaceKeyup:!0}),Dr("checkbox-events",[Vt(Nf(),(ne,se)=>{tr(ne,Fl,{name:u.name})})])])}),U=No.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Pi(_.translate(u.label))],behaviours:sn([Vx.config({})])}),W=ne=>Js(ne==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+ne]},_.icons),J=Po({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[W("checked"),W("unchecked")]});return No.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[B,J.asSpec(),U],fieldBehaviours:sn([or.config({disabled:()=>!u.enabled||_.isDisabled()}),ya()])})},uF=u=>u.presets==="presentation"?ph.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:u.html}}):ph.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:u.html,attributes:{role:"document"}},containerBehaviours:sn([_i.config({}),dr.config({})])}),Aa=u=>(_,T,D,B)=>Ue(T,"name").fold(()=>u(T,B,Q.none()),U=>_.field(U,u(T,B,Ue(D,U)))),dF=u=>(_,T,D,B)=>{const U=ci(T,{source:"dynamic"});return Aa(u)(_,U,D,B)},o8={bar:Aa((u,_)=>O6(u,_.shared)),collection:Aa((u,_,T)=>W6(u,_.shared.providers,T)),alertbanner:Aa((u,_)=>lF(u,_.shared.providers)),input:Aa((u,_,T)=>N3(u,_.shared.providers,T)),textarea:Aa((u,_,T)=>O3(u,_.shared.providers,T)),label:Aa((u,_)=>lH(u,_.shared)),iframe:dF((u,_,T)=>oH(u,_.shared.providers,T)),button:Aa((u,_)=>ZH(u,_.shared.providers)),checkbox:Aa((u,_,T)=>cF(u,_.shared.providers,T)),colorinput:Aa((u,_,T)=>X6(u,_.shared,_.colorinput,T)),colorpicker:Aa((u,_,T)=>XU(u,_.shared.providers,T)),dropzone:Aa((u,_,T)=>s3(u,_.shared.providers,T)),grid:Aa((u,_)=>tH(u,_.shared)),listbox:Aa((u,_,T)=>mH(u,_,T)),selectbox:Aa((u,_,T)=>yH(u,_.shared.providers,T)),sizeinput:Aa((u,_)=>_H(u,_.shared.providers)),slider:Aa((u,_,T)=>I3(u,_.shared.providers,T)),urlinput:Aa((u,_,T)=>sF(u,_,_.urlinput,T)),customeditor:Aa(a3),htmlpanel:Aa(uF),imagepreview:Aa((u,_,T)=>sH(u,T)),table:Aa((u,_)=>$3(u,_.shared.providers)),tree:Aa((u,_)=>LH(u,_)),panel:Aa((u,_)=>ZI(u,_))},i8={field:(u,_)=>_,record:q([])},Sd=(u,_,T,D)=>{const B=ci(D,{shared:{interpreter:U=>nb(u,U,T,B)}});return nb(u,_,T,B)},nb=(u,_,T,D)=>Ue(o8,_.type).fold(()=>(console.error(`Unknown factory type "${_.type}", defaulting to container: `,_),_),B=>B(u,_,T,D)),tC=(u,_,T)=>nb(i8,u,_,T),Zm="layout-inset",nC=u=>u.x,hF=(u,_)=>u.x+u.width/2-_.width/2,rC=(u,_)=>u.x+u.width-_.width,T2=u=>u.y,oC=(u,_)=>u.y+u.height-_.height,fF=(u,_)=>u.y+u.height/2-_.height/2,iC=(u,_,T)=>oa(rC(u,_),oC(u,_),T.insetSouthwest(),fu(),"southwest",xi(u,{right:0,bottom:3}),Zm),aC=(u,_,T)=>oa(nC(u),oC(u,_),T.insetSoutheast(),yy(),"southeast",xi(u,{left:1,bottom:3}),Zm),c0=(u,_,T)=>oa(rC(u,_),T2(u),T.insetNorthwest(),D_(),"northwest",xi(u,{right:0,top:2}),Zm),sC=(u,_,T)=>oa(nC(u),T2(u),T.insetNortheast(),vy(),"northeast",xi(u,{left:1,top:2}),Zm),xd=(u,_,T)=>oa(hF(u,_),T2(u),T.insetNorth(),Gh(),"north",xi(u,{top:2}),Zm),ob=(u,_,T)=>oa(hF(u,_),oC(u,_),T.insetSouth(),P_(),"south",xi(u,{bottom:3}),Zm),pF=(u,_,T)=>oa(rC(u,_),fF(u,_),T.insetEast(),tv(),"east",xi(u,{right:0}),Zm),mF=(u,_,T)=>oa(nC(u),fF(u,_),T.insetWest(),kt(),"west",xi(u,{left:1}),Zm),gF=u=>{switch(u){case"north":return xd;case"northeast":return sC;case"northwest":return c0;case"south":return ob;case"southeast":return aC;case"southwest":return iC;case"east":return pF;case"west":return mF}},h$=(u,_,T,D,B)=>Zw(D).map(gF).getOr(xd)(u,_,T,D,B),a8=u=>{switch(u){case"north":return ob;case"northeast":return aC;case"northwest":return iC;case"south":return xd;case"southeast":return sC;case"southwest":return c0;case"east":return mF;case"west":return pF}},s8=(u,_,T,D,B)=>Zw(D).map(a8).getOr(xd)(u,_,T,D,B),lC={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},l8=(u,_,T)=>{const B={maxHeightFunction:sm()},U=()=>({type:"node",root:Jc($s(u())),node:Q.from(u()),bubble:Zd(12,12,lC),layouts:{onRtl:()=>[sC],onLtr:()=>[c0]},overrides:B}),W=()=>({type:"hotspot",hotspot:_(),bubble:Zd(-12,12,lC),layouts:{onRtl:()=>[Ka,Xa,ma],onLtr:()=>[Xa,Ka,ma]},overrides:B});return()=>T()?U():W()},vF=(u,_,T,D)=>{const U={maxHeightFunction:sm()},W=()=>({type:"node",root:Jc($s(_())),node:Q.from(_()),bubble:Zd(12,12,lC),layouts:{onRtl:()=>[xd],onLtr:()=>[xd]},overrides:U}),J=()=>u?{type:"node",root:Jc($s(_())),node:Q.from(_()),bubble:Zd(0,-Eh(_()),lC),layouts:{onRtl:()=>[Ss],onLtr:()=>[Ss]},overrides:U}:{type:"hotspot",hotspot:T(),bubble:Zd(0,0,lC),layouts:{onRtl:()=>[Ss],onLtr:()=>[Ss]},overrides:U};return()=>D()?W():J()},mh=(u,_,T)=>{const D=()=>({type:"node",root:Jc($s(u())),node:Q.from(u()),layouts:{onRtl:()=>[xd],onLtr:()=>[xd]}}),B=()=>({type:"hotspot",hotspot:_(),layouts:{onRtl:()=>[ma],onLtr:()=>[ma]}});return()=>T()?D():B()},f$=(u,_)=>()=>({type:"selection",root:_(),getSelection:()=>{const T=u.selection.getRng(),D=u.model.table.getSelectedCells();if(D.length>1){const B=D[0],U=D[D.length-1],W={firstCell:Nt.fromDom(B),lastCell:Nt.fromDom(U)};return Q.some(W)}return Q.some(hv.range(Nt.fromDom(T.startContainer),T.startOffset,Nt.fromDom(T.endContainer),T.endOffset))}}),c8=u=>_=>({type:"node",root:u(),node:_}),u8=(u,_,T,D)=>{const B=P1(u),U=()=>Nt.fromDom(u.getBody()),W=()=>Nt.fromDom(u.getContentAreaContainer()),J=()=>B||!D();return{inlineDialog:l8(W,_,J),inlineBottomDialog:vF(u.inline,W,T,J),banner:mh(W,_,J),cursor:f$(u,U),node:c8(U)}},d8=u=>(_,T)=>{jO(u)(_,T)},h8=u=>()=>zO(u),f8=u=>_=>IA(u,_),yF=u=>_=>VO(u,_),bF=u=>({colorPicker:d8(u),hasCustomColors:h8(u),getColors:f8(u),getColorCols:yF(u)}),qY=u=>()=>YP(u),KY=u=>({isDraggableModal:qY(u)}),Ps=u=>{const _=sr(XP(u)?"bottom":"top");return{isPositionedAtTop:()=>_.get()==="top",getDockingMode:_.get,setDockingMode:_.set}},A2=u=>Dn(u,"items"),_F=u=>Dn(u,"format"),cC=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],p8=u=>yn(u,"items"),m8=u=>yn(u,"block"),g8=u=>yn(u,"inline"),v8=u=>yn(u,"selector"),SF=u=>Se(u,(_,T)=>{if(p8(T)){const D=SF(T.items);return{customFormats:_.customFormats.concat(D.customFormats),formats:_.formats.concat([{title:T.title,items:D.formats}])}}else if(g8(T)||m8(T)||v8(T)){const B=`custom-${g(T.name)?T.name:T.title.toLowerCase()}`;return{customFormats:_.customFormats.concat([{name:B,format:T}]),formats:_.formats.concat([{title:T.title,format:B,icon:T.icon}])}}else return{..._,formats:_.formats.concat(T)}},{customFormats:[],formats:[]}),y8=(u,_)=>{const T=SF(_),D=B=>{Be(B,U=>{u.formatter.has(U.name)||u.formatter.register(U.name,U.format)})};return u.formatter?D(T.customFormats):u.on("init",()=>{D(T.customFormats)}),T.formats},xF=u=>_t(u).map(_=>{const T=y8(u,_);return Ot(u)?cC.concat(T):T}).getOr(cC),b8=u=>{const _=xn(u);return _.length===1&&Ke(_,"title")},p$=(u,_,T)=>({...u,type:"formatter",isSelected:_(u.format),getStylePreview:T(u.format)}),uC=(u,_,T,D)=>{const B=ne=>p$(ne,T,D),U=ne=>{const se=J(ne.items);return{...ne,type:"submenu",getStyleItems:q(se)}},W=ne=>{const se=g(ne.name)?ne.name:In(ne.title),ce=`custom-${se}`,ge={...ne,type:"formatter",format:ce,isSelected:T(ce),getStylePreview:D(ce)};return u.formatter.register(se,ge),ge},J=ne=>Xe(ne,se=>A2(se)?U(se):_F(se)?B(se):b8(se)?{...se,type:"separator"}:W(se));return J(_)},_8=u=>{const _=J=>()=>u.formatter.match(J),T=J=>()=>{const ne=u.formatter.get(J);return ne!==void 0?Q.some({tag:ne.length>0&&(ne[0].inline||ne[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(J))}):Q.none()},D=sr([]),B=sr([]),U=sr(!1);return u.on("PreInit",J=>{const ne=xF(u),se=uC(u,ne,_,T);D.set(se)}),u.on("addStyleModifications",J=>{const ne=uC(u,J.items,_,T);B.set(ne),U.set(J.replace)}),{getData:()=>{const J=U.get()?[]:D.get(),ne=B.get();return J.concat(ne)}}},CF=u=>L(u)&&u.nodeType===1,S8=vf.trim,m$=u=>_=>!!(CF(_)&&(_.contentEditable===u||_.getAttribute("data-mce-contenteditable")===u)),x8=m$("true"),C8=m$("false"),g$=(u,_,T,D,B)=>({type:u,title:_,url:T,level:D,attach:B}),JY=u=>{let _=u;for(;_=_.parentNode;){const T=_.contentEditable;if(T&&T!=="inherit")return x8(_)}return!1},QY=(u,_)=>Xe(ga(Nt.fromDom(_),u),T=>T.dom),wF=u=>u.innerText||u.textContent,w8=u=>u.id?u.id:In("h"),E8=u=>u&&u.nodeName==="A"&&(u.id||u.name)!==void 0,EF=u=>E8(u)&&TF(u),M2=u=>u&&/^(H[1-6])$/.test(u.nodeName),TF=u=>JY(u)&&!C8(u),T8=u=>M2(u)&&TF(u),AF=u=>M2(u)?parseInt(u.nodeName.substr(1),10):0,A8=u=>{var _;const T=w8(u),D=()=>{u.id=T};return g$("header",(_=wF(u))!==null&&_!==void 0?_:"","#"+T,AF(u),D)},M8=u=>{const _=u.id||u.name,T=wF(u);return g$("anchor",T||"#"+_,"#"+_,0,V)},k8=u=>Xe(Rt(u,T8),A8),D8=u=>Xe(Rt(u,EF),M8),v$=u=>QY("h1,h2,h3,h4,h5,h6,a:not([href])",u),MF=u=>S8(u.title).length>0,P8={find:u=>{const _=v$(u);return Rt(k8(_).concat(D8(_)),MF)}},k2="tinymce-url-history",kF=5,y$=u=>g(u)&&/^https?/.test(u),R8=u=>x(u)&&u.length<=kF&&tn(u,y$),dC=u=>y(u)&&qn(u,_=>!R8(_)).isNone(),DF=()=>{const u=Bm.getItem(k2);if(u===null)return{};let _;try{_=JSON.parse(u)}catch(T){if(T instanceof SyntaxError)return console.log("Local storage "+k2+" was not valid JSON",T),{};throw T}return dC(_)?_:(console.log("Local storage "+k2+" was not valid format",_),{})},D2=u=>{if(!dC(u))throw new Error(`Bad format for history:
`+JSON.stringify(u));Bm.setItem(k2,JSON.stringify(u))},I8=u=>{const _=DF();return Ue(_,u).getOr([])},b$=(u,_)=>{if(!y$(u))return;const T=DF(),D=Ue(T,_).getOr([]),B=Rt(D,U=>U!==u);T[_]=[u].concat(B).slice(0,kF),D2(T)},ib=u=>!!u,PF=u=>Zn(vf.makeMap(u,/[, ]/),ib),_$=u=>Q.from(xu(u)),RF=u=>{const _=Q.from(hh(u)).filter(ib).map(PF);return _$(u).fold(me,T=>_.fold(be,D=>xn(D).length>0?D:!1))},IF=(u,_)=>{const T=RF(u);return c(T)?T?_$(u):Q.none():T[_]?_$(u):Q.none()},$F=(u,_)=>IF(u,_).map(T=>D=>Ds.nu(B=>{const U=(J,ne)=>{if(!g(J))throw new Error("Expected value to be string");if(ne!==void 0&&!y(ne))throw new Error("Expected meta to be a object");B({value:J,meta:ne})},W={filetype:_,fieldname:D.fieldname,...Q.from(D.meta).getOr({})};T.call(u,U,D.value,W)})),LF=u=>Q.from(u).filter(g).getOrUndefined(),S$=u=>mx(u)?Q.some({targets:P8.find(u.getBody()),anchorTop:LF(Qv(u)),anchorBottom:LF(mN(u))}):Q.none(),P2=u=>Q.from(rf(u)),$8=u=>({getHistory:I8,addToHistory:b$,getLinkInformation:()=>S$(u),getValidationHandler:()=>P2(u),getUrlPicker:_=>$F(u,_)}),L8=(u,_,T,D)=>{const B=sr(!1),U=Ps(_),W={icons:()=>_.ui.registry.getAll().icons,menuItems:()=>_.ui.registry.getAll().menuItems,translate:hn.translate,isDisabled:()=>_.mode.isReadOnly()||!_.ui.isEnabled(),getOption:_.options.get},J=$8(_),ne=_8(_),se=bF(_),ce=KY(_),ge=()=>B.get(),ye=pt=>B.set(pt),xe={shared:{providers:W,anchors:u8(_,T,D,U.isPositionedAtTop),header:U},urlinput:J,styles:ne,colorinput:se,dialog:ce,isContextMenuOpen:ge,setContextMenuState:ye},ke={...xe,shared:{...xe.shared,interpreter:pt=>tC(pt,{},ke),getSink:u.popup}},He={...xe,shared:{...xe.shared,interpreter:pt=>tC(pt,{},He),getSink:u.dialog}};return{popup:ke,dialog:He}},ab=(u,_,T)=>{const D=($t,un)=>{Be([_,...T],mn=>{mn.broadcastEvent($t,un)})},B=($t,un)=>{Be([_,...T],mn=>{mn.broadcastOn([$t],un)})},U=$t=>B(yu(),{target:$t.target}),W=Gb(),J=Fa(W,"touchstart",U),ne=Fa(W,"touchmove",$t=>D(Ig(),$t)),se=Fa(W,"touchend",$t=>D(gw(),$t)),ce=Fa(W,"mousedown",U),ge=Fa(W,"mouseup",$t=>{$t.raw.button===0&&B(Gy(),{target:$t.target})}),ye=$t=>B(yu(),{target:Nt.fromDom($t.target)}),xe=$t=>{$t.button===0&&B(Gy(),{target:Nt.fromDom($t.target)})},ke=()=>{Be(u.editorManager.get(),$t=>{u!==$t&&$t.dispatch("DismissPopups",{relatedTarget:u})})},He=$t=>D($g(),Xw($t)),pt=$t=>{B(Rc(),{}),D(Lg(),Xw($t))},Je=$s(Nt.fromDom(u.getElement())),Ze=Ay(Je,"scroll",$t=>{requestAnimationFrame(()=>{const un=u.getContainer();if(un!=null){const Br=Vm(u,_.element).map(An=>[An.element,...An.others]).getOr([]);Tt(Br,An=>ni(An,$t.target))&&(u.dispatch("ElementScroll",{target:$t.target.dom}),D(vw(),$t))}})}),dt=()=>B(Rc(),{}),Mt=$t=>{$t.state&&B(yu(),{target:Nt.fromDom(u.getContainer())})},nn=$t=>{B(yu(),{target:Nt.fromDom($t.relatedTarget.getContainer())})};u.on("PostRender",()=>{u.on("click",ye),u.on("tap",ye),u.on("mouseup",xe),u.on("mousedown",ke),u.on("ScrollWindow",He),u.on("ResizeWindow",pt),u.on("ResizeEditor",dt),u.on("AfterProgressState",Mt),u.on("DismissPopups",nn)}),u.on("remove",()=>{u.off("click",ye),u.off("tap",ye),u.off("mouseup",xe),u.off("mousedown",ke),u.off("ScrollWindow",He),u.off("ResizeWindow",pt),u.off("ResizeEditor",dt),u.off("AfterProgressState",Mt),u.off("DismissPopups",nn),ce.unbind(),J.unbind(),ne.unbind(),se.unbind(),ge.unbind(),Ze.unbind()}),u.on("detach",()=>{Be([_,...T],mm),Be([_,...T],$t=>$t.destroy())})},Ma=TD,bf=FE,NF=q([ft("shell",!1),Ft("makeItem"),ft("setupItem",V),Ic.field("listBehaviours",[wr])]),x$=pl({name:"items",overrides:()=>({behaviours:sn([wr.config({})])})}),N8=q([x$]),O8=q("CustomList"),B8=(u,_,T,D)=>{const B=(J,ne)=>{W(J).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},se=>{const ce=wr.contents(se),ge=ne.length,ye=ge-ce.length,xe=ye>0?Lt(ye,()=>u.makeItem()):[],ke=ce.slice(ge);Be(ke,pt=>wr.remove(se,pt)),Be(xe,pt=>wr.append(se,pt));const He=wr.contents(se);Be(He,(pt,Je)=>{u.setupItem(J,pt,ne[Je],Je)})})},U=u.shell?{behaviours:[wr.config({})],components:[]}:{behaviours:[],components:_},W=J=>u.shell?Q.some(J):Xo(J,u,"items");return{uid:u.uid,dom:u.dom,components:U.components,behaviours:aa(u.listBehaviours,U.behaviours),apis:{setItems:B}}},R2=us({name:O8(),configFields:NF(),partFields:N8(),factory:B8,apis:{setItems:(u,_,T)=>{u.setItems(_,T)}}}),sb=q([Ft("dom"),ft("shell",!0),ia("toolbarBehaviours",[wr])]),F8=q([pl({name:"groups",overrides:()=>({behaviours:sn([wr.config({})])})})]),V8=(u,_,T,D)=>{const B=(J,ne)=>{U(J).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},se=>{wr.set(se,ne)})},U=J=>u.shell?Q.some(J):Xo(J,u,"groups"),W=u.shell?{behaviours:[wr.config({})],components:[]}:{behaviours:[],components:_};return{uid:u.uid,dom:u.dom,components:W.components,behaviours:aa(u.toolbarBehaviours,W.behaviours),apis:{setGroups:B,refresh:V},domModification:{attributes:{role:"group"}}}},gh=us({name:"Toolbar",configFields:sb(),partFields:F8(),factory:V8,apis:{setGroups:(u,_,T)=>{u.setGroups(_,T)}}}),z8=V,U8=me,C$=q([]);var H8=Object.freeze({__proto__:null,setup:z8,isDocked:U8,getBehaviours:C$});const u0=u=>(Xt(Wa(u,"position"),"fixed")?Q.none():Mb(u)).orThunk(()=>{const D=Nt.fromTag("span");return Kc(u).bind(B=>{Xl(B,D);const U=Mb(D);return nu(D),U})}),BF=u=>u0(u).map(Oi).getOrThunk(()=>Ti(0,0)),G8=(u,_)=>{const T=u.element;Di(T,_.transitionClass),hi(T,_.fadeOutClass),Di(T,_.fadeInClass),_.onShow(u)},w$=(u,_)=>{const T=u.element;Di(T,_.transitionClass),hi(T,_.fadeInClass),Di(T,_.fadeOutClass),_.onHide(u)},FF=(u,_)=>u.y<_.bottom&&u.bottom>_.y,VF=(u,_)=>u.y>=_.y,zF=(u,_)=>u.bottom<=_.bottom,E$=(u,_,T)=>({location:"top",leftX:_,topY:T.bounds.y-u.y}),T$=(u,_,T)=>({location:"bottom",leftX:_,bottomY:u.bottom-T.bounds.bottom}),A$=u=>u.box.x-u.win.x,W8=(u,_,T)=>{const D=_.win,B=_.box,U=A$(_);return Wt(u,W=>{switch(W){case"bottom":return zF(B,T.bounds)?Q.none():Q.some(T$(D,U,T));case"top":return VF(B,T.bounds)?Q.none():Q.some(E$(D,U,T));default:return Q.none()}}).getOr({location:"no-dock"})},Y8=(u,_,T)=>tn(u,D=>{switch(D){case"bottom":return zF(_,T.bounds);case"top":return VF(_,T.bounds)}}),j8=(u,_)=>{const T=_.optScrollEnv.fold(q(u.bounds.y),D=>D.scrollElmTop+(u.bounds.y-D.currentScrollTop));return Ti(u.bounds.x,T)},Z8=(u,_)=>{const T=_.optScrollEnv.fold(q(u.y),D=>u.y+D.currentScrollTop-D.scrollElmTop);return Ti(u.x,T)},UF=(u,_,T)=>T.getInitialPos().map(D=>{const B=j8(D,_);return{box:ha(B.left,B.top,os(u),ua(u)),location:D.location}}),HF=(u,_,T,D,B)=>{const U=Z8(_,T),W=ha(U.left,U.top,_.width,_.height);D.setInitialPos({style:rs(u),position:mi(u,"position")||"static",bounds:W,location:B.location})},GF=(u,_,T,D,B)=>{D.getInitialPos().fold(()=>HF(u,_,T,D,B),()=>V)},M$=(u,_,T)=>T.getInitialPos().bind(D=>{var B;switch(T.clearInitialPos(),D.position){case"static":return Q.some({morph:"static"});case"absolute":const U=u0(u).getOr(ta()),W=Bi(U),J=(B=U.dom.scrollTop)!==null&&B!==void 0?B:0;return Q.some({morph:"absolute",positionCss:$l("absolute",Ue(D.style,"left").map(ne=>_.x-W.x),Ue(D.style,"top").map(ne=>_.y-W.y+J),Ue(D.style,"right").map(ne=>W.right-_.right),Ue(D.style,"bottom").map(ne=>W.bottom-_.bottom))});default:return Q.none()}}),I2=(u,_,T)=>UF(u,_,T).filter(({box:D})=>Y8(T.getModes(),D,_)).bind(({box:D})=>M$(u,D,T)),$2=u=>{switch(u.location){case"top":return Q.some({morph:"fixed",positionCss:$l("fixed",Q.some(u.leftX),Q.some(u.topY),Q.none(),Q.none())});case"bottom":return Q.some({morph:"fixed",positionCss:$l("fixed",Q.some(u.leftX),Q.none(),Q.none(),Q.some(u.bottomY))});default:return Q.none()}},q8=(u,_,T)=>{const D=Bi(u),B=gs(),U=W8(T.getModes(),{win:B,box:D},_);return U.location==="top"||U.location==="bottom"?(HF(u,D,_,T,U),$2(U)):Q.none()},K8=(u,_,T)=>I2(u,_,T).orThunk(()=>_.optScrollEnv.bind(D=>UF(u,_,T)).bind(({box:D,location:B})=>{const U=gs(),W=A$({win:U,box:D}),J=B==="top"?E$(U,W,_):T$(U,W,_);return $2(J)})),X8=(u,_,T)=>{const D=u.element;return Xt(Wa(D,"position"),"fixed")?K8(D,_,T):q8(D,_,T)},J8=(u,_,T)=>{const D=u.element;return UF(D,_,T).bind(({box:B})=>M$(D,B,T))},Q8=(u,_,T,D)=>{const B=Bi(u),U=gs(),W=A$({win:U,box:B}),J=D(U,W,_);return J.location==="bottom"||J.location==="top"?(GF(u,B,_,T,J),$2(J)):Q.none()},WF=(u,_,T)=>{T.setDocked(!1),Be(["left","right","top","bottom","position"],D=>Do(u.element,D)),_.onUndocked(u)},k$=(u,_,T,D)=>{const B=D.position==="fixed";T.setDocked(B),Yw(u.element,D),(B?_.onDocked:_.onUndocked)(u)},D$=(u,_,T,D,B=!1)=>{_.contextual.each(U=>{U.lazyContext(u).each(W=>{const J=FF(W,D.bounds);J!==T.isVisible()&&(T.setVisible(J),B&&!J?(Vi(u.element,[U.fadeOutClass]),U.onHide(u)):(J?G8:w$)(u,U))})})},P$=(u,_,T,D,B)=>{D$(u,_,T,D,!0),k$(u,_,T,B.positionCss)},e7=(u,_,T,D,B)=>{switch(B.morph){case"static":return WF(u,_,T);case"absolute":return k$(u,_,T,B.positionCss);case"fixed":return P$(u,_,T,D,B)}},YF=(u,_,T)=>{const D=_.lazyViewport(u);D$(u,_,T,D),X8(u,D,T).each(B=>{e7(u,_,T,D,B)})},t7=(u,_,T)=>{const D=u.element;T.setDocked(!1);const B=_.lazyViewport(u);J8(u,B,T).each(U=>{switch(U.morph){case"static":{WF(u,_,T);break}case"absolute":{k$(u,_,T,U.positionCss);break}}}),T.setVisible(!0),_.contextual.each(U=>{Vs(D,[U.fadeInClass,U.fadeOutClass,U.transitionClass]),U.onShow(u)}),L2(u,_,T)},L2=(u,_,T)=>{u.getSystem().isConnected()&&YF(u,_,T)},jF=(u,_,T)=>{T.isDocked()&&t7(u,_,T)},qm=u=>(_,T,D)=>{const B=T.lazyViewport(_);Q8(_.element,B,D,u).each(W=>{P$(_,T,D,B,W)})},ZF=qm(E$),hC=qm(T$);var qF=Object.freeze({__proto__:null,refresh:L2,reset:jF,isDocked:(u,_,T)=>T.isDocked(),getModes:(u,_,T)=>T.getModes(),setModes:(u,_,T,D)=>T.setModes(D),forceDockToTop:ZF,forceDockToBottom:hC}),o7=Object.freeze({__proto__:null,events:(u,_)=>ui([qu(Yp(),(T,D)=>{u.contextual.each(B=>{ra(T.element,B.transitionClass)&&(Vs(T.element,[B.transitionClass,B.fadeInClass]),(_.isVisible()?B.onShown:B.onHidden)(T)),D.stop()})}),Vt($g(),(T,D)=>{L2(T,u,_)}),Vt(vw(),(T,D)=>{L2(T,u,_)}),Vt(Lg(),(T,D)=>{jF(T,u,_)})])}),i7=[ys("contextual",[ko("fadeInClass"),ko("fadeOutClass"),ko("transitionClass"),su("lazyContext"),so("onShow"),so("onShown"),so("onHide"),so("onHidden")]),Ca("lazyViewport",()=>({bounds:gs(),optScrollEnv:Q.none()})),pa("modes",["top","bottom"],$a),so("onDocked"),so("onUndocked")],a7=Object.freeze({__proto__:null,init:u=>{const _=sr(!1),T=sr(!0),D=ai(),B=sr(u.modes),U=()=>`docked:  ${_.get()}, visible: ${T.get()}, modes: ${B.get().join(",")}`;return Xs({isDocked:_.get,setDocked:_.set,getInitialPos:D.get,setInitialPos:D.set,clearInitialPos:D.clear,isVisible:T.get,setVisible:T.set,getModes:B.get,setModes:B.set,readState:U})}});const ji=Ba({fields:i7,name:"docking",active:o7,apis:qF,state:a7}),Km=q(In("toolbar-height-change")),Gc={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},N2="tox-tinymce--toolbar-sticky-on",KF="tox-tinymce--toolbar-sticky-off",s7=(u,_)=>{const T=Ia(_),B=qi(_).dom.innerHeight,U=wl(T),W=Nt.fromDom(u.elm),J=Sa(W),ne=ua(W),se=J.y,ce=se+ne,ge=Oi(_),ye=ua(_),xe=ge.top,ke=xe+ye,He=Math.abs(xe-U.top)<2,pt=Math.abs(ke-(U.top+B))<2;if(He&&se<ke)rw(U.left,se-ye,T);else if(pt&&ce>xe){const Je=se-B+ne+ye;rw(U.left,Je,T)}},cb=(u,_)=>Ke(ji.getModes(u),_),I$=u=>{const _=D=>Eh(D)+(parseInt(mi(D,"margin-top"),10)||0)+(parseInt(mi(D,"margin-bottom"),10)||0),T=u.element;Ou(T).each(D=>{const B="padding-"+ji.getModes(u)[0];if(ji.isDocked(u)){const U=os(D);$r(T,"width",U+"px"),$r(D,B,_(T)+"px")}else Do(T,"width"),Do(D,B)})},ub=(u,_)=>{_?(hi(u,Gc.fadeOutClass),Vi(u,[Gc.transitionClass,Gc.fadeInClass])):(hi(u,Gc.fadeInClass),Vi(u,[Gc.fadeOutClass,Gc.transitionClass]))},$$=(u,_)=>{const T=Nt.fromDom(u.getContainer());_?(Di(T,N2),hi(T,KF)):(Di(T,KF),hi(T,N2))},l7=(u,_)=>{const T=Ia(_);ec(T).filter(D=>!ni(_,D)).filter(D=>ni(D,Nt.fromDom(T.dom.body))||wf(u,D)).each(()=>Il(_))},c7=(u,_)=>Mc(u).orThunk(()=>_().toOptional().bind(T=>Mc(T.element))),u7=(u,_,T)=>{u.inline||(_.header.isPositionedAtTop()||u.on("ResizeEditor",()=>{T().each(ji.reset)}),u.on("ResizeWindow ResizeEditor",()=>{T().each(I$)}),u.on("SkinLoaded",()=>{T().each(D=>{ji.isDocked(D)?ji.reset(D):ji.refresh(D)})}),u.on("FullscreenStateChanged",()=>{T().each(ji.reset)})),u.on("AfterScrollIntoView",D=>{T().each(B=>{ji.refresh(B);const U=B.element;cd(U)&&s7(D,U)})}),u.on("PostRender",()=>{$$(u,!1)})},d7=u=>u().map(ji.isDocked).getOr(!1),h7=()=>[dl.config({channels:{[Km()]:{onReceive:I$}}})],XF=(u,_)=>{const T=ai(),D=_.getSink,B=J=>{D().each(ne=>J(ne.element))},U=J=>{u.inline||I$(J),$$(u,ji.isDocked(J)),J.getSystem().broadcastOn([Rc()],{}),D().each(ne=>ne.getSystem().broadcastOn([Rc()],{}))},W=u.inline?[]:h7();return[dr.config({}),ji.config({contextual:{lazyContext:J=>{const ne=Eh(J.element),se=u.inline?u.getContentAreaContainer():u.getContainer();return Q.from(se).map(ce=>{const ge=Bi(Nt.fromDom(ce));return Vm(u,J.element).fold(()=>{const xe=ge.height-ne,ke=ge.y+(cb(J,"top")?0:ne);return ha(ge.x,ke,ge.width,xe)},xe=>{const ke=Ld(ge,G1(xe)),He=cb(J,"top")?ke.y:ke.y+ne;return ha(ke.x,He,ke.width,ke.height-ne)})})},onShow:()=>{B(J=>ub(J,!0))},onShown:J=>{B(ne=>Vs(ne,[Gc.transitionClass,Gc.fadeInClass])),T.get().each(ne=>{l7(J.element,ne),T.clear()})},onHide:J=>{c7(J.element,D).fold(T.clear,T.set),B(ne=>ub(ne,!1))},onHidden:()=>{B(J=>Vs(J,[Gc.transitionClass]))},...Gc},lazyViewport:J=>Vm(u,J.element).fold(()=>{const se=gs(),ce=zo(u),ge=se.y+(cb(J,"top")?ce:0),ye=se.height-(cb(J,"bottom")?ce:0);return{bounds:ha(se.x,ge,se.width,ye),optScrollEnv:Q.none()}},se=>({bounds:G1(se),optScrollEnv:Q.some({currentScrollTop:se.element.dom.scrollTop,scrollElmTop:Oi(se.element).top})})),modes:[_.header.getDockingMode()],onDocked:U,onUndocked:U}),...W]};var JF=Object.freeze({__proto__:null,setup:u7,isDocked:d7,getBehaviours:XF});const QF=u=>{const _=u.editor,T=u.sticky?XF:C$;return{uid:u.uid,dom:u.dom,components:u.components,behaviours:sn(T(_,u.sharedBackstage))}},L$=er([Qi,La("items",Rn([Mh([mR,El("items",$a)]),$a]))].concat(B1)),f7=u=>yi("GroupToolbarButton",L$,u),O2=[vs("text"),vs("tooltip"),vs("icon"),ol("search",!1,Rn([iu,er([vs("placeholder")])],u=>c(u)?u?Q.some({placeholder:Q.none()}):Q.none():Q.some(u))),su("fetch"),Ca("onSetup",()=>V)],fC=er([Qi,...O2]),N$=u=>yi("menubutton",fC,u),p7=er([Qi,xx,Fc,lf,yR,VN,Lm,Tl("presets","normal",["normal","color","listpreview"]),HN(1),N1,Y5]),m7=u=>yi("SplitButton",p7,u);var O$=ml({factory:(u,_)=>{const T=(B,U)=>{const W=Xe(U,J=>{const ne={type:"menubutton",text:J.text,fetch:ce=>{ce(J.getItems())}},se=N$(ne).mapError(ce=>Fs(ce)).getOrDie();return Qx(se,"tox-mbtn",_.backstage,Q.some("menuitem"))});wr.set(B,W)},D={focus:Xn.focusIn,setMenus:T};return{uid:u.uid,dom:u.dom,components:[],behaviours:sn([wr.config({}),Dr("menubar-events",[ii(B=>{u.onSetup(B)}),Vt(Vd(),(B,U)=>{Ri(B.element,".tox-mbtn--active").each(W=>{Ec(U.event.target,".tox-mbtn").each(J=>{ni(W,J)||B.getSystem().getByDom(W).each(ne=>{B.getSystem().getByDom(J).each(se=>{Tu.expand(se),Tu.close(ne),dr.focus(se)})})})})}),Vt(Lh(),(B,U)=>{U.event.prevFocus.bind(W=>B.getSystem().getByDom(W).toOptional()).each(W=>{U.event.newFocus.bind(J=>B.getSystem().getByDom(J).toOptional()).each(J=>{Tu.isOpen(W)&&(Tu.expand(J),Tu.close(W))})})})]),Xn.config({mode:"flow",selector:".tox-mbtn",onEscape:B=>(u.onEscape(B),Q.some(!0))}),_i.config({})]),apis:D,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ft("dom"),Ft("uid"),Ft("onEscape"),Ft("backstage"),ft("onSetup",V)],apis:{focus:(u,_)=>{u.focus(_)},setMenus:(u,_,T)=>{u.setMenus(_,T)}}});const B$="⚡️Upgrade",F$="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",g7=u=>({uid:u.uid,dom:u.dom,components:[{dom:{tag:"a",attributes:{href:F$,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:B$}}]}),B2="container",v7=[ia("slotBehaviours",[])],eV=u=>"<alloy.field."+u+">",y7=u=>{const _=(()=>{const U=[];return{slot:(J,ne)=>(U.push(J),MS(B2,eV(J),ne)),record:q(U)}})(),T=u(_),D=_.record(),B=Xe(D,U=>cs({name:U,pname:eV(U)}));return RS(B2,v7,B,b7,T)},b7=(u,_)=>{const T=He=>kS(u),D=(He,pt)=>Xo(He,u,pt),B=(He,pt)=>(Je,Ze)=>Xo(Je,u,Ze).map(dt=>He(dt,Ze)).getOr(pt),U=He=>(pt,Je)=>{Be(Je,Ze=>He(pt,Ze))},W=(He,pt)=>ns(He.element,"aria-hidden")!=="true",J=(He,pt)=>{if(!W(He)){const Je=He.element;Do(Je,"display"),Ni(Je,"aria-hidden"),tr(He,Bf(),{name:pt,visible:!0})}},ne=(He,pt)=>{if(W(He)){const Je=He.element;$r(Je,"display","none"),bn(Je,"aria-hidden","true"),tr(He,Bf(),{name:pt,visible:!1})}},se=B(W,!1),ce=B(ne),ge=U(ce),ye=He=>ge(He,T()),xe=B(J),ke={getSlotNames:T,getSlot:D,isShowing:se,hideSlot:ce,hideAllSlots:ye,showSlot:xe};return{uid:u.uid,dom:u.dom,components:_,behaviours:eh(u.slotBehaviours),apis:ke}},el={...Zn({getSlotNames:(u,_)=>u.getSlotNames(_),getSlot:(u,_,T)=>u.getSlot(_,T),isShowing:(u,_,T)=>u.isShowing(_,T),hideSlot:(u,_,T)=>u.hideSlot(_,T),hideAllSlots:(u,_)=>u.hideAllSlots(_),showSlot:(u,_,T)=>u.showSlot(_,T)},u=>Jp(u)),sketch:y7},ij=er([Fc,xx,Ca("onShow",V),Ca("onHide",V),Lm]),tV=u=>yi("sidebar",ij,u),_7=u=>{const{sidebars:_}=u.ui.registry.getAll();Be(xn(_),T=>{const D=_[T],B=()=>Xt(Q.from(u.queryCommandValue("ToggleSidebar")),T);u.ui.registry.addToggleButton(T,{icon:D.icon,tooltip:D.tooltip,onAction:U=>{u.execCommand("ToggleSidebar",!1,T),U.setActive(B())},onSetup:U=>{U.setActive(B());const W=()=>U.setActive(B());return u.on("ToggleSidebar",W),()=>{u.off("ToggleSidebar",W)}}})})},nV=u=>({element:()=>u.element.dom}),S7=(u,_)=>{const T=Xe(xn(_),D=>{const B=_[D],U=Ko(tV(B));return{name:D,getApi:nV,onSetup:U.onSetup,onShow:U.onShow,onHide:U.onHide}});return Xe(T,D=>{const B=sr(V);return u.slot(D.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Tx.unnamedEvents([Nm(D,B),uf(D,B),Vt(Bf(),(U,W)=>{const J=W.event;$e(T,se=>se.name===J.name).each(se=>{(J.visible?se.onShow:se.onHide)(se.getApi(U))})})])})})},x7=u=>el.sketch(_=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:S7(_,u),slotBehaviours:Tx.unnamedEvents([ii(T=>el.hideAllSlots(T))])})),C7=(u,_,T)=>{eo.getCurrent(u).each(B=>{wr.set(B,[x7(_)]);const U=T==null?void 0:T.toLowerCase();g(U)&&yn(_,U)&&eo.getCurrent(B).each(W=>{el.showSlot(W,U),uc.immediateGrow(B),Do(B.element,"width"),F2(u.element,"region")})})},F2=(u,_)=>{bn(u,"role",_)},w7=(u,_)=>{eo.getCurrent(u).each(D=>{eo.getCurrent(D).each(U=>{uc.hasGrown(D)?el.isShowing(U,_)?(uc.shrink(D),F2(u.element,"presentation")):(el.hideAllSlots(U),el.showSlot(U,_),F2(u.element,"region")):(el.hideAllSlots(U),el.showSlot(U,_),uc.grow(D),F2(u.element,"region"))})})},rV=u=>eo.getCurrent(u).bind(T=>uc.isGrowing(T)||uc.hasGrown(T)?eo.getCurrent(T).bind(U=>$e(el.getSlotNames(U),W=>el.isShowing(U,W))):Q.none()),V$=In("FixSizeEvent"),z$=In("AutoSizeEvent"),E7=u=>({uid:u.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:sn([_i.config({}),dr.config({}),uc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:_=>{eo.getCurrent(_).each(el.hideAllSlots),Kr(_,z$)},onGrown:_=>{Kr(_,z$)},onStartGrow:_=>{tr(_,V$,{width:Wa(_.element,"width").getOr("")})},onStartShrink:_=>{tr(_,V$,{width:os(_.element)+"px"})}}),wr.config({}),eo.config({find:_=>{const T=wr.contents(_);return ht(T)}})])}],behaviours:sn([cc.childAt(0),Dr("sidebar-sliding-events",[Vt(V$,(_,T)=>{$r(_.element,"width",T.event.width)}),Vt(z$,(_,T)=>{Do(_.element,"width")})])])});var oV=Object.freeze({__proto__:null,block:(u,_,T,D)=>{bn(u.element,"aria-busy",!0);const B=_.getRoot(u).getOr(u),U=sn([Xn.config({mode:"special",onTab:()=>Q.some(!0),onShiftTab:()=>Q.some(!0)}),dr.config({})]),W=D(B,U),J=B.getSystem().build(W);wr.append(B,Pl(J)),J.hasConfigured(Xn)&&_.focus&&Xn.focusIn(J),T.isBlocked()||_.onBlock(u),T.blockWith(()=>wr.remove(B,J))},unblock:(u,_,T)=>{Ni(u.element,"aria-busy"),T.isBlocked()&&_.onUnblock(u),T.clear()},isBlocked:(u,_,T)=>T.isBlocked()}),A7=[Ca("getRoot",Q.none),xa("focus",!0),so("onBlock"),so("onUnblock")],Wc=Object.freeze({__proto__:null,init:()=>{const u=uv(),_=T=>{u.set({destroy:T})};return Xs({readState:u.isSet,blockWith:_,clear:u.clear,isBlocked:u.isSet})}});const vh=Ba({fields:A7,name:"blocking",apis:oV,state:Wc}),iV=u=>(_,T)=>({dom:{tag:"div",attributes:{"aria-label":u.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:hd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),U$=u=>eo.getCurrent(u).each(_=>Il(_.element,!0)),M7=(u,_)=>{const T="tabindex",D=`data-mce-${T}`;Q.from(u.iframeElement).map(Nt.fromDom).each(B=>{_?(Ls(B,T).each(U=>bn(B,D,U)),bn(B,T,-1)):(Ni(B,T),Ls(B,D).each(U=>{bn(B,T,U),Ni(B,D)}))})},pC=(u,_,T,D)=>{const B=_.element;if(M7(u,T),T)vh.block(_,iV(D)),Do(B,"display"),Ni(B,"aria-hidden"),u.hasFocus()&&U$(_);else{const U=eo.getCurrent(_).exists(W=>av(W.element));vh.unblock(_),$r(B,"display","none"),bn(B,"aria-hidden","true"),U&&u.focus()}},k7=u=>({uid:u.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:sn([wr.config({}),vh.config({focus:!1}),eo.config({find:_=>ht(_.components())})]),components:[]}),V2=u=>u.type==="focusin",D7=u=>V2(u)?(u.composed?ht(u.composedPath()):Q.from(u.target)).map(Nt.fromDom).filter(Fo).exists(T=>ra(T,"mce-pastebin")):!1,z2=(u,_,T)=>{const D=sr(!1),B=ai(),U=J=>{D.get()&&!D7(J)&&(J.preventDefault(),U$(_()),u.editorManager.setActive(u))};u.inline||u.on("PreInit",()=>{u.dom.bind(u.getWin(),"focusin",U),u.on("BeforeExecCommand",J=>{J.command.toLowerCase()==="mcefocus"&&J.value!==!0&&U(J)})});const W=J=>{J!==D.get()&&(D.set(J),pC(u,_(),J,T.providers),PO(u,J))};u.on("ProgressState",J=>{if(B.on(clearTimeout),O(J.time)){const ne=tf.setEditorTimeout(u,()=>W(J.state),J.time);B.set(ne)}else W(J.state),B.clear()})},P7=(u,_)=>Se(u,(B,U)=>_(U,B.len).fold(q(B),J=>({len:J.finish,list:B.list.concat([J])})),{len:0,list:[]}).list,H$=(u,_,T)=>({within:u,extra:_,withinWidth:T}),Yc=(u,_,T)=>{const D=P7(u,(J,ne)=>{const se=T(J);return Q.some({element:J,start:ne,finish:ne+se,width:se})}),B=Rt(D,J=>J.finish<=_),U=Bt(B,(J,ne)=>J+ne.width,0),W=D.slice(B.length);return{within:B,extra:W,withinWidth:U}},U2=u=>Xe(u,_=>_.element),H2=(u,_,T)=>{const D=U2(u.concat(_));return H$(D,[],T)},aV=(u,_,T,D)=>{const B=U2(u).concat([T]);return H$(B,U2(_),D)},sV=(u,_,T)=>H$(U2(u),[],T),R7=(u,_,T)=>{const D=Yc(_,u,T);return D.extra.length===0?Q.some(D):Q.none()},lV=(u,_,T,D)=>{const B=R7(u,_,T).getOrThunk(()=>Yc(_,u-T(D),T)),U=B.within,W=B.extra,J=B.withinWidth;return W.length===1&&W[0].width<=T(D)?H2(U,W,J):W.length>=1?aV(U,W,D,J):sV(U,W,J)},cV=(u,_)=>{const T=Xe(_,D=>Pl(D));gh.setGroups(u,T)},I7=u=>Wt(u,_=>Mc(_.element).bind(T=>_.getSystem().getByDom(T).toOptional())),uV=(u,_,T)=>{const D=_.builtGroups.get();if(D.length===0)return;const B=nh(u,_,"primary"),U=zi.getCoupled(u,"overflowGroup");$r(B.element,"visibility","hidden");const W=D.concat([U]),J=I7(W);T([]),cV(B,W);const ne=os(B.element),se=lV(ne,_.builtGroups.get(),ce=>os(ce.element),U);se.extra.length===0?(wr.remove(B,U),T([])):(cV(B,se.within),T(se.extra)),Do(B.element,"visibility"),pg(B.element),J.each(dr.focus)},dV=q([ia("splitToolbarBehaviours",[zi]),Gi("builtGroups",()=>sr([]))]),$7=q([Hh(["overflowToggledClass"]),kf("getOverflowBounds"),Ft("lazySink"),Gi("overflowGroups",()=>sr([])),so("onOpened"),so("onClosed")].concat(dV())),L7=q([cs({factory:gh,schema:sb(),name:"primary"}),$c({schema:sb(),name:"overflow"}),$c({name:"overflow-button"}),$c({name:"overflow-group"})]),G$=q((u,_)=>{VM(u,Math.floor(_))}),hV=q([Hh(["toggledClass"]),Ft("lazySink"),su("fetch"),kf("getBounds"),ys("fireDismissalEventInstead",[ft("event",Zu())]),gu(),so("onToggled")]),fV=q([$c({name:"button",overrides:u=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:sn([Rr.config({toggleClass:u.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:u.onToggled})])})}),$c({factory:gh,schema:sb(),name:"toolbar",overrides:u=>({toolbarBehaviours:sn([Xn.config({mode:"cyclic",onEscape:_=>(Xo(_,u,"button").each(dr.focus),Q.none())})])})})]),mC=ai(),N7=(u,_)=>{mC.set(!0),W$(u,_),mC.clear()},W$=(u,_)=>{const T=zi.getCoupled(u,"toolbarSandbox");io.isOpen(T)?io.close(T):io.open(T,_.toolbar())},G2=(u,_,T,D)=>{const B=T.getBounds.map(W=>W()),U=T.lazySink(u).getOrDie();Ja.positionWithinBounds(U,_,{anchor:{type:"hotspot",hotspot:u,layouts:D,overrides:{maxWidthFunction:G$()}}},B)},Y$=(u,_,T,D,B)=>{gh.setGroups(_,B),G2(u,_,T,D),Rr.on(u)},pV=(u,_,T)=>{const D=ed(),B=(W,J)=>{const ne=mC.get().getOr(!1);T.fetch().get(se=>{Y$(u,J,T,_.layouts,se),D.link(u.element),ne||Xn.focusIn(J)})},U=()=>{Rr.off(u),mC.get().getOr(!1)||dr.focus(u),D.unlink(u.element)};return{dom:{tag:"div",attributes:{id:D.id}},behaviours:sn([Xn.config({mode:"special",onEscape:W=>(io.close(W),Q.some(!0))}),io.config({onOpen:B,onClose:U,isPartOf:(W,J,ne)=>Wd(J,ne)||Wd(u,ne),getAttachPoint:()=>T.lazySink(u).getOrDie()}),dl.config({channels:{...Wy({isExtraPart:me,...T.fireDismissalEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({})}),...op({doReposition:()=>{io.getState(zi.getCoupled(u,"toolbarSandbox")).each(W=>{G2(u,W,T,_.layouts)})}})}})])}},Xm=us({name:"FloatingToolbarButton",factory:(u,_,T,D)=>({...sa.sketch({...D.button(),action:B=>{W$(B,D)},buttonBehaviours:Ic.augment({dump:D.button().buttonBehaviours},[zi.config({others:{toolbarSandbox:B=>pV(B,T,u)}})])}),apis:{setGroups:(B,U)=>{io.getState(zi.getCoupled(B,"toolbarSandbox")).each(W=>{Y$(B,W,u,T.layouts,U)})},reposition:B=>{io.getState(zi.getCoupled(B,"toolbarSandbox")).each(U=>{G2(B,U,u,T.layouts)})},toggle:B=>{W$(B,D)},toggleWithoutFocusing:B=>{N7(B,D)},getToolbar:B=>io.getState(zi.getCoupled(B,"toolbarSandbox")),isOpen:B=>io.isOpen(zi.getCoupled(B,"toolbarSandbox"))}}),configFields:hV(),partFields:fV(),apis:{setGroups:(u,_,T)=>{u.setGroups(_,T)},reposition:(u,_)=>{u.reposition(_)},toggle:(u,_)=>{u.toggle(_)},toggleWithoutFocusing:(u,_)=>{u.toggleWithoutFocusing(_)},getToolbar:(u,_)=>u.getToolbar(_),isOpen:(u,_)=>u.isOpen(_)}}),O7=q([Ft("items"),Hh(["itemSelector"]),ia("tgroupBehaviours",[Xn])]),mV=q([$v({name:"items",unit:"item"})]),B7=(u,_,T,D)=>({uid:u.uid,dom:u.dom,components:_,behaviours:aa(u.tgroupBehaviours,[Xn.config({mode:"flow",selector:u.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),W2=us({name:"ToolbarGroup",configFields:O7(),partFields:mV(),factory:B7}),gV=u=>Xe(u,_=>Pl(_)),vV=(u,_,T)=>{uV(u,T,D=>{T.overflowGroups.set(D),_.getOpt(u).each(B=>{Xm.setGroups(B,gV(D))})})},F7=(u,_,T,D)=>{const B=Po(Xm.sketch({fetch:()=>Ds.nu(U=>{U(gV(u.overflowGroups.get()))}),layouts:{onLtr:()=>[Xa,Ka],onRtl:()=>[Ka,Xa],onBottomLtr:()=>[ss,_s],onBottomRtl:()=>[_s,ss]},getBounds:T.getOverflowBounds,lazySink:u.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:u.markers.overflowToggledClass},parts:{button:D["overflow-button"](),toolbar:D.overflow()},onToggled:(U,W)=>u[W?"onOpened":"onClosed"](U)}));return{uid:u.uid,dom:u.dom,components:_,behaviours:aa(u.splitToolbarBehaviours,[zi.config({others:{overflowGroup:()=>W2.sketch({...D["overflow-group"](),items:[B.asSpec()]})}})]),apis:{setGroups:(U,W)=>{u.builtGroups.set(Xe(W,U.getSystem().build)),vV(U,B,u)},refresh:U=>vV(U,B,u),toggle:U=>{B.getOpt(U).each(W=>{Xm.toggle(W)})},toggleWithoutFocusing:U=>{B.getOpt(U).each(Xm.toggleWithoutFocusing)},isOpen:U=>B.getOpt(U).map(Xm.isOpen).getOr(!1),reposition:U=>{B.getOpt(U).each(W=>{Xm.reposition(W)})},getOverflow:U=>B.getOpt(U).bind(Xm.getToolbar)},domModification:{attributes:{role:"group"}}}},yV=us({name:"SplitFloatingToolbar",configFields:$7(),partFields:L7(),factory:F7,apis:{setGroups:(u,_,T)=>{u.setGroups(_,T)},refresh:(u,_)=>{u.refresh(_)},reposition:(u,_)=>{u.reposition(_)},toggle:(u,_)=>{u.toggle(_)},toggleWithoutFocusing:(u,_)=>{u.toggle(_)},isOpen:(u,_)=>u.isOpen(_),getOverflow:(u,_)=>u.getOverflow(_)}}),V7=q([Hh(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),so("onOpened"),so("onClosed")].concat(dV())),z7=q([cs({factory:gh,schema:sb(),name:"primary"}),cs({factory:gh,schema:sb(),name:"overflow",overrides:u=>({toolbarBehaviours:sn([uc.config({dimension:{property:"height"},closedClass:u.markers.closedClass,openClass:u.markers.openClass,shrinkingClass:u.markers.shrinkingClass,growingClass:u.markers.growingClass,onShrunk:_=>{Xo(_,u,"overflow-button").each(T=>{Rr.off(T),dr.focus(T)}),u.onClosed(_)},onGrown:_=>{Xn.focusIn(_),u.onOpened(_)},onStartGrow:_=>{Xo(_,u,"overflow-button").each(Rr.on)}}),Xn.config({mode:"acyclic",onEscape:_=>(Xo(_,u,"overflow-button").each(dr.focus),Q.some(!0))})])})}),$c({name:"overflow-button",overrides:u=>({buttonBehaviours:sn([Rr.config({toggleClass:u.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),$c({name:"overflow-group"})]),U7=(u,_)=>Xo(u,_,"overflow").map(uc.hasGrown).getOr(!1),bV=(u,_)=>{Xo(u,_,"overflow-button").bind(()=>Xo(u,_,"overflow")).each(T=>{Y2(u,_),uc.toggleGrow(T)})},Y2=(u,_)=>{Xo(u,_,"overflow").each(T=>{uV(u,_,D=>{const B=Xe(D,U=>Pl(U));gh.setGroups(T,B)}),Xo(u,_,"overflow-button").each(D=>{uc.hasGrown(T)&&Rr.on(D)}),uc.refresh(T)})},H7=(u,_,T,D)=>{const B="alloy.toolbar.toggle",U=(W,J)=>{const ne=Xe(J,W.getSystem().build);u.builtGroups.set(ne)};return{uid:u.uid,dom:u.dom,components:_,behaviours:aa(u.splitToolbarBehaviours,[zi.config({others:{overflowGroup:W=>W2.sketch({...D["overflow-group"](),items:[sa.sketch({...D["overflow-button"](),action:J=>{Kr(W,B)}})]})}}),Dr("toolbar-toggle-events",[Vt(B,W=>{bV(W,u)})])]),apis:{setGroups:(W,J)=>{U(W,J),Y2(W,u)},refresh:W=>Y2(W,u),toggle:W=>bV(W,u),isOpen:W=>U7(W,u)},domModification:{attributes:{role:"group"}}}},j$=us({name:"SplitSlidingToolbar",configFields:V7(),partFields:z7(),factory:H7,apis:{setGroups:(u,_,T)=>{u.setGroups(_,T)},refresh:(u,_)=>{u.refresh(_)},toggle:(u,_)=>{u.toggle(_)},isOpen:(u,_)=>u.isOpen(_)}}),j2=u=>{const _=u.title.fold(()=>({}),T=>({attributes:{title:T}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],..._},components:[W2.parts.items({})],items:u.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:sn([_i.config({}),dr.config({})])}},Z2=u=>W2.sketch(j2(u)),gC=(u,_)=>{const T=ii(D=>{const B=Xe(u.initGroups,Z2);gh.setGroups(D,B)});return sn([la.toolbarButton(u.providers.isDisabled),ya(),Xn.config({mode:_,onEscape:u.onEscape,selector:".tox-toolbar__group"}),Dr("toolbar-events",[T])])},_V=u=>{const _=u.cyclicKeying?"cyclic":"acyclic";return{uid:u.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":j2({title:Q.none(),items:[]}),"overflow-button":UH({name:"more",icon:Q.some("more-drawer"),enabled:!0,tooltip:Q.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:Q.none(),borderless:!1},Q.none(),u.providers)},splitToolbarBehaviours:gC(u,_)}},SV=u=>{const _=_V(u),T=4,D=yV.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return yV.sketch({..._,lazySink:u.getSink,getOverflowBounds:()=>{const B=u.moreDrawerData.lazyHeader().element,U=Sa(B),W=k0(B),J=Sa(W),ne=Math.max(W.dom.scrollHeight,J.height);return ha(U.x+T,J.y,U.width-T*2,ne)},parts:{..._.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:u.attributes}}},components:[D],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:B=>u.onToggled(B,!0),onClosed:B=>u.onToggled(B,!1)})},G7=u=>{const _=j$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),T=j$.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),D=_V(u);return j$.sketch({...D,components:[_,T],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:B=>{B.getSystem().broadcastOn([Km()],{type:"opened"}),u.onToggled(B,!0)},onClosed:B=>{B.getSystem().broadcastOn([Km()],{type:"closed"}),u.onToggled(B,!1)}})},q2=u=>{const _=u.cyclicKeying?"cyclic":"acyclic";return gh.sketch({uid:u.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(u.type===Ws.scrolling?["tox-toolbar--scrolling"]:[])},components:[gh.parts.groups({})],toolbarBehaviours:gC(u,_)})},W7=[lf,Fc,vs("tooltip"),Tl("buttonType","secondary",["primary","secondary"]),xa("borderless",!1),su("onAction")],Y7=[...W7,Sp,au("type",["button"])],j7=[...W7,xa("active",!1),au("type",["togglebutton"])],K2={button:Y7,togglebutton:j7},Z7=[au("type",["group"]),pa("buttons",[],Eo("type",K2))],X2=Eo("type",{...K2,group:Z7}),xV=er([pa("buttons",[],X2),su("onShow"),su("onHide")]),CV=u=>yi("view",xV,u),Z$=(u,_)=>{var T,D;const B=u.type==="togglebutton",U=u.icon.map(dt=>Ym(dt,_.icons)).map(Po),J=(()=>dt=>{const Mt=un=>{U.map(mn=>mn.getOpt(dt).each(Br=>{wr.set(Br,[Ym(un,_.icons)])}))},nn=un=>{const mn=dt.element;un?(Di(mn,"tox-button--enabled"),bn(mn,"aria-pressed",!0)):(hi(mn,"tox-button--enabled"),Ni(mn,"aria-pressed"))},$t=()=>ra(dt.element,"tox-button--enabled");if(B)return u.onAction({setIcon:Mt,setActive:nn,isActive:$t});if(u.type==="button")return u.onAction({setIcon:Mt})})(),ne={...u,name:B?u.text.getOr(u.icon.getOr("")):(T=u.text)!==null&&T!==void 0?T:u.icon.getOr(""),primary:u.buttonType==="primary",buttonType:Q.from(u.buttonType),tooltip:u.tooltip,icon:u.icon,enabled:!0,borderless:u.borderless},se=s$((D=u.buttonType)!==null&&D!==void 0?D:"secondary"),ce=B?u.text.map(_.translate):Q.some(_.translate(u.text)),ge=ce.map(Pi),ye=ne.tooltip.or(ce).map(dt=>({"aria-label":_.translate(dt),title:_.translate(dt)})).getOr({}),xe=U.map(dt=>dt.asSpec()),ke=V1([xe,ge]),He=u.icon.isSome()&&ge.isSome(),pt={tag:"button",classes:se.concat(...u.icon.isSome()&&!He?["tox-button--icon"]:[]).concat(...He?["tox-button--icon-and-text"]:[]).concat(...u.borderless?["tox-button--naked"]:[]).concat(...u.type==="togglebutton"&&u.active?["tox-button--enabled"]:[]),attributes:ye},Je=[],Ze=w2(ne,Q.some(J),Je,pt,ke,_);return sa.sketch(Ze)},wV=(u,_)=>Z$(u,_),EV=(u,_)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Xe(u.buttons,T=>wV(T,_))}),d0=zu().deviceType,TV=d0.isPhone(),q7=d0.isTablet(),K7=u=>{let _=!1;const T=Xe(u.buttons,D=>D.type==="group"?(_=!0,EV(D,u.providers)):wV(D,u.providers));return{uid:u.uid,dom:{tag:"div",classes:[_?"tox-view__toolbar":"tox-view__header",...TV||q7?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:sn([dr.config({}),Xn.config({mode:"flow",selector:"button, .tox-button",focusInside:sh.OnEnterOrSpaceMode})]),components:_?T:[ph.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),ph.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:T})]}},X7=u=>({uid:u.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),q$=(u,_,T,D)=>{const B={getPane:U=>Ma.getPart(U,u,"pane"),getOnShow:U=>u.viewConfig.onShow,getOnHide:U=>u.viewConfig.onHide};return{uid:u.uid,dom:u.dom,components:_,apis:B}};var db=us({name:"silver.View",configFields:[Ft("viewConfig")],partFields:[pl({factory:{sketch:K7},schema:[Ft("buttons"),Ft("providers")],name:"header"}),pl({factory:{sketch:X7},schema:[],name:"pane"})],factory:q$,apis:{getPane:(u,_)=>u.getPane(_),getOnShow:(u,_)=>u.getOnShow(_),getOnHide:(u,_)=>u.getOnHide(_)}});const J7=(u,_,T)=>Lr(_,(D,B)=>{const U=Ko(CV(D));return u.slot(B,db.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:U,components:[...U.buttons.length>0?[db.parts.header({buttons:U.buttons,providers:T})]:[],db.parts.pane({})]}))}),AV=(u,_)=>el.sketch(T=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:J7(T,u,_),slotBehaviours:Tx.unnamedEvents([ii(D=>el.hideAllSlots(D))])})),K$=u=>$e(el.getSlotNames(u),_=>el.isShowing(u,_)),J2=u=>{const _=u.element;$r(_,"display","none"),bn(_,"aria-hidden","true")},X$=u=>{const _=u.element;Do(_,"display"),Ni(_,"aria-hidden")},Q7=u=>({getContainer:q(u)}),MV=(u,_,T)=>{el.getSlot(u,_).each(D=>{db.getPane(D).each(B=>{T(D)(Q7(B.element.dom))})})},kV=(u,_)=>MV(u,_,db.getOnShow),eG=(u,_)=>MV(u,_,db.getOnHide);var Q2=ml({factory:(u,_)=>{const U={setViews:(W,J)=>{wr.set(W,[AV(J,_.backstage.shared.providers)])},whichView:W=>eo.getCurrent(W).bind(K$),toggleView:(W,J,ne,se)=>eo.getCurrent(W).exists(ce=>{const ge=K$(ce),ye=ge.exists(ke=>se===ke),xe=el.getSlot(ce,se).isSome();return xe&&(el.hideAllSlots(ce),ye?(J2(W),J()):(ne(),X$(W),el.showSlot(ce,se),kV(ce,se)),ge.each(ke=>eG(ce,ke))),xe})};return{uid:u.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:sn([wr.config({}),eo.config({find:W=>{const J=wr.contents(W);return ht(J)}})]),apis:U}},name:"silver.ViewWrapper",configFields:[Ft("backstage")],apis:{setViews:(u,_,T)=>u.setViews(_,T),toggleView:(u,_,T,D,B)=>u.toggleView(_,T,D,B),whichView:(u,_)=>u.whichView(_)}});const DV=(u,_,T)=>{let D=!1;const B={getSocket:U=>Ma.getPart(U,u,"socket"),setSidebar:(U,W,J)=>{Ma.getPart(U,u,"sidebar").each(ne=>C7(ne,W,J))},toggleSidebar:(U,W)=>{Ma.getPart(U,u,"sidebar").each(J=>w7(J,W))},whichSidebar:U=>Ma.getPart(U,u,"sidebar").bind(rV).getOrNull(),getHeader:U=>Ma.getPart(U,u,"header"),getToolbar:U=>Ma.getPart(U,u,"toolbar"),setToolbar:(U,W)=>{Ma.getPart(U,u,"toolbar").each(J=>{const ne=Xe(W,Z2);J.getApis().setGroups(J,ne)})},setToolbars:(U,W)=>{Ma.getPart(U,u,"multiple-toolbar").each(J=>{const ne=Xe(W,se=>Xe(se,Z2));R2.setItems(J,ne)})},refreshToolbar:U=>{Ma.getPart(U,u,"toolbar").each(J=>J.getApis().refresh(J))},toggleToolbarDrawer:U=>{Ma.getPart(U,u,"toolbar").each(W=>{Nr(W.getApis().toggle,J=>J(W))})},toggleToolbarDrawerWithoutFocusing:U=>{Ma.getPart(U,u,"toolbar").each(W=>{Nr(W.getApis().toggleWithoutFocusing,J=>J(W))})},isToolbarDrawerToggled:U=>Ma.getPart(U,u,"toolbar").bind(W=>Q.from(W.getApis().isOpen).map(J=>J(W))).getOr(!1),getThrobber:U=>Ma.getPart(U,u,"throbber"),focusToolbar:U=>{Ma.getPart(U,u,"toolbar").orThunk(()=>Ma.getPart(U,u,"multiple-toolbar")).each(J=>{Xn.focusIn(J)})},setMenubar:(U,W)=>{Ma.getPart(U,u,"menubar").each(J=>{O$.setMenus(J,W)})},focusMenubar:U=>{Ma.getPart(U,u,"menubar").each(W=>{O$.focus(W)})},setViews:(U,W)=>{Ma.getPart(U,u,"viewWrapper").each(J=>{Q2.setViews(J,W)})},toggleView:(U,W)=>Ma.getPart(U,u,"viewWrapper").exists(J=>Q2.toggleView(J,()=>B.showMainView(U),()=>B.hideMainView(U),W)),whichView:U=>Ma.getPart(U,u,"viewWrapper").bind(Q2.whichView).getOrNull(),hideMainView:U=>{D=B.isToolbarDrawerToggled(U),D&&B.toggleToolbarDrawer(U),Ma.getPart(U,u,"editorContainer").each(W=>{const J=W.element;$r(J,"display","none"),bn(J,"aria-hidden","true")})},showMainView:U=>{D&&B.toggleToolbarDrawer(U),Ma.getPart(U,u,"editorContainer").each(W=>{const J=W.element;Do(J,"display"),Ni(J,"aria-hidden")})}};return{uid:u.uid,dom:u.dom,components:_,apis:B,behaviours:u.behaviours}},tG=bf.optional({factory:O$,name:"menubar",schema:[Ft("backstage")]}),nG=u=>u.type===Ws.sliding?G7:u.type===Ws.floating?SV:q2,J$=bf.optional({factory:{sketch:u=>R2.sketch({uid:u.uid,dom:u.dom,listBehaviours:sn([Xn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>q2({type:u.type,uid:In("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:u.providers,onEscape:()=>(u.onEscape(),Q.some(!0))}),setupItem:(_,T,D,B)=>{gh.setGroups(T,D)},shell:!0})},name:"multiple-toolbar",schema:[Ft("dom"),Ft("onEscape")]}),rG=bf.optional({factory:{sketch:u=>{const _=nG(u),T={type:u.type,uid:u.uid,onEscape:()=>(u.onEscape(),Q.some(!0)),onToggled:(D,B)=>u.onToolbarToggled(B),cyclicKeying:!1,initGroups:[],getSink:u.getSink,providers:u.providers,moreDrawerData:{lazyToolbar:u.lazyToolbar,lazyMoreButton:u.lazyMoreButton,lazyHeader:u.lazyHeader},attributes:u.attributes};return _(T)}},name:"toolbar",schema:[Ft("dom"),Ft("onEscape"),Ft("getSink")]}),oG=bf.optional({factory:{sketch:QF},name:"header",schema:[Ft("dom")]}),PV=bf.optional({factory:{sketch:g7},name:"promotion",schema:[Ft("dom")]}),iG=bf.optional({name:"socket",schema:[Ft("dom")]}),RV=bf.optional({factory:{sketch:E7},name:"sidebar",schema:[Ft("dom")]}),aG=bf.optional({factory:{sketch:k7},name:"throbber",schema:[Ft("dom")]}),IV=bf.optional({factory:Q2,name:"viewWrapper",schema:[Ft("backstage")]}),sG=u=>({uid:u.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:u.components}),lG=bf.optional({factory:{sketch:sG},name:"editorContainer",schema:[]});var li=us({name:"OuterContainer",factory:DV,configFields:[Ft("dom"),Ft("behaviours")],partFields:[oG,tG,rG,J$,iG,RV,PV,aG,IV,lG],apis:{getSocket:(u,_)=>u.getSocket(_),setSidebar:(u,_,T,D)=>{u.setSidebar(_,T,D)},toggleSidebar:(u,_,T)=>{u.toggleSidebar(_,T)},whichSidebar:(u,_)=>u.whichSidebar(_),getHeader:(u,_)=>u.getHeader(_),getToolbar:(u,_)=>u.getToolbar(_),setToolbar:(u,_,T)=>{u.setToolbar(_,T)},setToolbars:(u,_,T)=>{u.setToolbars(_,T)},refreshToolbar:(u,_)=>u.refreshToolbar(_),toggleToolbarDrawer:(u,_)=>{u.toggleToolbarDrawer(_)},toggleToolbarDrawerWithoutFocusing:(u,_)=>{u.toggleToolbarDrawerWithoutFocusing(_)},isToolbarDrawerToggled:(u,_)=>u.isToolbarDrawerToggled(_),getThrobber:(u,_)=>u.getThrobber(_),setMenubar:(u,_,T)=>{u.setMenubar(_,T)},focusMenubar:(u,_)=>{u.focusMenubar(_)},focusToolbar:(u,_)=>{u.focusToolbar(_)},setViews:(u,_,T)=>{u.setViews(_,T)},toggleView:(u,_,T)=>u.toggleView(_,T),whichView:(u,_)=>u.whichView(_)}});const $V="file edit view insert format tools table help",LV={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},cG=(u,_,T)=>{const D=En(T).split(/[ ,]/);return{text:u.title,getItems:()=>Fe(u.items,B=>{const U=B.toLowerCase();return U.trim().length===0?[]:Tt(D,W=>W===U)?[]:U==="separator"||U==="|"?[{type:"separator"}]:_.menuItems[U]?[_.menuItems[U]]:[]})}},Q$=u=>u.split(" "),eM=(u,_)=>{const T={...LV,..._.menus},D=xn(_.menus).length>0,B=_.menubar===void 0||_.menubar===!0?Q$($V):Q$(_.menubar===!1?"":_.menubar),U=Rt(B,J=>{const ne=yn(LV,J);return D?ne||Ue(_.menus,J).exists(se=>yn(se,"items")):ne}),W=Xe(U,J=>{const ne=T[J];return cG({title:ne.title,items:Q$(ne.items)},_,u)});return Rt(W,J=>{const ne=se=>g(se)||se.type!=="separator";return J.getItems().length>0&&Tt(J.getItems(),ne)})},eL=u=>{const _=()=>{u._skinLoaded=!0,wz(u)};return()=>{u.initialized?_():u.on("init",_)}},uG=(u,_)=>()=>OR(u,{message:_}),NV=(u,_,T)=>(u.on("remove",()=>T.unload(_)),T.load(_)),tL=(u,_,T,D)=>(u.on("remove",()=>D.unloadRawCss(_)),D.loadRawCss(_,T)),dG=async(u,_)=>{const D="ui/"+qP(u).getOr("default")+"/skin.css",B=tinymce.Resource.get(D);if(g(B))return Promise.resolve(tL(u,D,B,u.ui.styleSheetLoader));{const U=_+"/skin.min.css";return NV(u,U,u.ui.styleSheetLoader)}},hG=async(u,_)=>{if(UC(Nt.fromDom(u.getElement()))){const D=_+"/skin.shadowdom.css",B=tinymce.Resource.get(D);if(g(B))return tL(u,D,B,Ol.DOM.styleSheetLoader),Promise.resolve();{const U=_+"/skin.shadowdom.min.css";return NV(u,U,Ol.DOM.styleSheetLoader)}}},fG=async(u,_)=>{qP(_).fold(()=>{const D=lA(_);D&&_.contentCSS.push(D+(u?"/content.inline":"/content")+".min.css")},D=>{const B="ui/"+D+(u?"/content.inline":"/content")+".css",U=tinymce.Resource.get(B);if(g(U))tL(_,B,U,_.ui.styleSheetLoader);else{const W=lA(_);W&&_.contentCSS.push(W+(u?"/content.inline":"/content")+".min.css")}});const T=lA(_);if(!ZP(_)&&g(T))return Promise.all([dG(_,T),hG(_,T)]).then()},OV=(u,_)=>fG(u,_).then(eL(_),uG(_,"Skin could not be loaded")),pG=oe(OV,!1),mG=oe(OV,!0),h0=(u,_,T)=>u.translate([`${_} {0}`,u.translate(T)]),tM=(u,_,T)=>{const D=(J,ne,se,ce)=>{const ge=_.shared.providers.translate(J.title);if(J.type==="separator")return Q.some({type:"separator",text:ge});if(J.type==="submenu"){const ye=Fe(J.getStyleItems(),xe=>B(xe,ne,ce));return ne===0&&ye.length<=0?Q.none():Q.some({type:"nestedmenuitem",text:ge,enabled:ye.length>0,getSubmenuItems:()=>Fe(J.getStyleItems(),xe=>B(xe,ne,ce))})}else return Q.some({type:"togglemenuitem",text:ge,icon:J.icon,active:J.isSelected(ce),enabled:!se,onAction:T.onAction(J),...J.getStylePreview().fold(()=>({}),ye=>({meta:{style:ye}}))})},B=(J,ne,se)=>{const ce=J.type==="formatter"&&T.isInvalid(J);return ne===0?ce?[]:D(J,ne,!1,se).toArray():D(J,ne,ce,se).toArray()},U=J=>{const ne=T.getCurrentValue(),se=T.shouldHide?0:1;return Fe(J,ce=>B(ce,se,ne))};return{validateItems:U,getFetch:(J,ne)=>(se,ce)=>{const ge=ne(),ye=U(ge),xe=Q1(ye,fh.CLOSE_ON_EXECUTE,J,{isHorizontalMenu:!1,search:Q.none()});ce(xe)}}},Jm=(u,_,T)=>{const D=T.dataset,B=D.type==="basic"?()=>Xe(D.data,U=>p$(U,T.isSelectedFor,T.getPreviewFor)):D.getData;return{items:tM(u,_,T),getStyleItems:B}},hb=(u,_,T,D,B)=>{const{items:U,getStyleItems:W}=Jm(u,_,T),J=se=>({getComponent:q(se),setTooltip:ce=>{const ge=_.shared.providers.translate(ce);hg(se.element,{"aria-label":ge,title:ge})}}),ne=se=>{const ce=ge=>se.setTooltip(h0(u,D,ge.value));return u.on(B,ce),Px(gd(u,"NodeChange",ge=>{const ye=ge.getComponent();T.updateText(ye),or.set(ge.getComponent(),!u.selection.isEditable())})(se),()=>u.off(B,ce))};return p2({text:T.icon.isSome()?Q.none():T.text,icon:T.icon,tooltip:Q.from(T.tooltip),role:Q.none(),fetch:U.getFetch(_,W),onSetup:ne,getApi:J,columns:1,presets:"normal",classes:T.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",_.shared)},Qm=u=>Xe(u,_=>{let T=_,D=_;const B=_.split("=");return B.length>1&&(T=B[0],D=B[1]),{title:T,format:D}}),BV=u=>({type:"basic",data:u});var fb;(function(u){u[u.SemiColon=0]="SemiColon",u[u.Space=1]="Space"})(fb||(fb={}));const gG=(u,_)=>_===fb.SemiColon?u.replace(/;$/,"").split(";"):u.split(" "),nL=(u,_,T)=>{const D=u.options.get(_);return{type:"basic",data:Qm(gG(D,T))}},rL="Align",FV="left",oL=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],VV=u=>{const _=()=>$e(oL,J=>u.formatter.match(J.format)),T=J=>()=>u.formatter.match(J),D=J=>Q.none,B=J=>{const se=_().fold(q(FV),ce=>ce.title.toLowerCase());tr(J,jm,{icon:`align-${se}`}),Mz(u,{value:se})},U=BV(oL),W=J=>()=>$e(oL,ne=>ne.format===J.format).each(ne=>u.execCommand(ne.command));return{tooltip:h0(u,rL,FV),text:Q.none(),icon:Q.some("align-left"),isSelectedFor:T,getCurrentValue:Q.none,getPreviewFor:D,onAction:W,updateText:B,dataset:U,shouldHide:!1,isInvalid:J=>!u.formatter.canApply(J.format)}},zV=(u,_)=>hb(u,_,VV(u),rL,"AlignTextUpdate"),vG=(u,_)=>{const T=Jm(u,_,VV(u));u.ui.registry.addNestedMenuItem("align",{text:_.shared.providers.translate(rL),onSetup:Qs(u),getSubmenuItems:()=>T.items.validateItems(T.getStyleItems())})},UV=(u,_)=>{const T=_(),D=Xe(T,B=>B.format);return Q.from(u.formatter.closest(D)).bind(B=>$e(T,U=>U.format===B)).orThunk(()=>Vn(u.formatter.match("p"),{title:"Paragraph",format:"p"}))},vC="Blocks",iL="Paragraph",HV=u=>{const _=U=>()=>u.formatter.match(U),T=U=>()=>{const W=u.formatter.get(U);return W?Q.some({tag:W.length>0&&(W[0].inline||W[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(U))}):Q.none()},D=U=>{const J=UV(u,()=>B.data).fold(q(iL),ne=>ne.title);tr(U,Du,{text:J}),IO(u,{value:J})},B=nL(u,"block_formats",fb.SemiColon);return{tooltip:h0(u,vC,iL),text:Q.some(iL),icon:Q.none(),isSelectedFor:_,getCurrentValue:Q.none,getPreviewFor:T,onAction:LO(u),updateText:D,dataset:B,shouldHide:!1,isInvalid:U=>!u.formatter.canApply(U.format)}},yG=(u,_)=>hb(u,_,HV(u),vC,"BlocksTextUpdate"),bG=(u,_)=>{const T=Jm(u,_,HV(u));u.ui.registry.addNestedMenuItem("blocks",{text:vC,onSetup:Qs(u),getSubmenuItems:()=>T.items.validateItems(T.getStyleItems())})},aL="Fonts",sL="System Font",GV=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],lL=u=>{const _=u.split(/\s*,\s*/);return Xe(_,T=>T.replace(/^['"]+|['"]+$/g,""))},cL=(u,_)=>_.length>0&&tn(_,T=>u.indexOf(T.toLowerCase())>-1),_G=(u,_)=>{if(u.indexOf("-apple-system")===0||_.length>0){const T=lL(u.toLowerCase());return cL(T,GV)||cL(T,_)}else return!1},uL=u=>{const _=()=>{const ne=ke=>ke?lL(ke)[0]:"",se=u.queryCommandValue("FontName"),ce=J.data,ge=se?se.toLowerCase():"",ye=bN(u);return{matchOpt:$e(ce,ke=>{const He=ke.format;return He.toLowerCase()===ge||ne(He).toLowerCase()===ne(ge).toLowerCase()}).orThunk(()=>Vn(_G(ge,ye),{title:sL,format:ge})),font:se}},T=ne=>se=>se.exists(ce=>ce.format===ne),D=()=>{const{matchOpt:ne}=_();return ne},B=ne=>()=>Q.some({tag:"div",styles:ne.indexOf("dings")===-1?{"font-family":ne}:{}}),U=ne=>()=>{u.undoManager.transact(()=>{u.focus(),u.execCommand("FontName",!1,ne.format)})},W=ne=>{const{matchOpt:se,font:ce}=_(),ge=se.fold(q(ce),ye=>ye.title);tr(ne,Du,{text:ge}),$O(u,{value:ge})},J=nL(u,"font_family_formats",fb.SemiColon);return{tooltip:h0(u,aL,sL),text:Q.some(sL),icon:Q.none(),isSelectedFor:T,getCurrentValue:D,getPreviewFor:B,onAction:U,updateText:W,dataset:J,shouldHide:!1,isInvalid:me}},SG=(u,_)=>hb(u,_,uL(u),aL,"FontFamilyTextUpdate"),xG=(u,_)=>{const T=Jm(u,_,uL(u));u.ui.registry.addNestedMenuItem("fontfamily",{text:_.shared.providers.translate(aL),onSetup:Qs(u),getSubmenuItems:()=>T.items.validateItems(T.getStyleItems())})},CG={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},WV=(()=>{const u="[0-9]+",T="[eE]"+("[+-]?"+u),D="\\.",B=J=>`(?:${J})?`,W=`[+-]?(?:${["Infinity",u+D+B(u)+B(T),D+u+B(T),u+B(T)].join("|")})`;return new RegExp(`^(${W})(.*)$`)})(),wG=(u,_)=>Tt(_,T=>Tt(CG[T],D=>u===D)),yC=(u,_)=>Q.from(WV.exec(u)).bind(D=>{const B=Number(D[1]),U=D[2];return wG(U,_)?Q.some({value:B,unit:U}):Q.none()}),EG=(u,_)=>yC(u,_).map(({value:T,unit:D})=>T+D),YV={tab:q(9),escape:q(27),enter:q(13),backspace:q(8),delete:q(46),left:q(37),up:q(38),right:q(39),down:q(40),space:q(32),home:q(36),end:q(35),pageUp:q(33),pageDown:q(34)},TG=(u,_,T)=>{let D=Q.none();const B=Ze=>Ze.map(dt=>Sn.getValue(dt)).getOr(""),U=gd(u,"NodeChange SwitchMode",Ze=>{const dt=Ze.getComponent();D=Q.some(dt),T.updateInputValue(dt),or.set(dt,!u.selection.isEditable())}),W=Ze=>({getComponent:q(Ze)}),J=sr(V),ne=In("custom-number-input-events"),se=(Ze,dt,Mt)=>{const nn=B(D),$t=T.getNewValue(nn,Ze),un=nn.length-`${$t}`.length,mn=D.map(An=>An.element.dom.selectionStart-un),Br=D.map(An=>An.element.dom.selectionEnd-un);T.onAction($t,Mt),D.each(An=>{Sn.setValue(An,$t),dt&&(mn.each(yr=>An.element.dom.selectionStart=yr),Br.each(yr=>An.element.dom.selectionEnd=yr))})},ce=(Ze,dt)=>se((Mt,nn)=>Mt-nn,Ze,dt),ge=(Ze,dt)=>se((Mt,nn)=>Mt+nn,Ze,dt),ye=Ze=>Ou(Ze.element).fold(Q.none,dt=>(Il(dt),Q.some(!0))),xe=Ze=>av(Ze.element)?(D0(Ze.element).each(dt=>Il(dt)),Q.some(!0)):Q.none(),ke=(Ze,dt,Mt,nn)=>{const $t=sr(V),un=_.shared.providers.translate(Mt),mn=In("altExecuting"),Br=gd(u,"NodeChange SwitchMode",yr=>{or.set(yr.getComponent(),!u.selection.isEditable())}),An=yr=>{or.isDisabled(yr)||Ze(!0)};return sa.sketch({dom:{tag:"button",attributes:{title:un,"aria-label":un},classes:nn.concat(dt)},components:[f2(dt,_.shared.providers.icons)],buttonBehaviours:sn([or.config({}),Dr(mn,[Nm({onSetup:Br,getApi:W},$t),uf({getApi:W},$t),Vt(Ks(),(yr,mr)=>{(mr.event.raw.keyCode===YV.space()||mr.event.raw.keyCode===YV.enter())&&(or.isDisabled(yr)||Ze(!1))}),Vt(Rh(),An),Vt($f(),An)])]),eventOrder:{[Ks()]:[mn,"keying"],[Rh()]:[mn,"alloy.base.behaviour"],[$f()]:[mn,"alloy.base.behaviour"]}})},He=Po(ke(Ze=>ce(!1,Ze),"minus","Decrease font size",[])),pt=Po(ke(Ze=>ge(!1,Ze),"plus","Increase font size",[])),Je=Po({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[e0.sketch({inputBehaviours:sn([or.config({}),Dr(ne,[Nm({onSetup:U,getApi:W},J),uf({getApi:W},J)]),Dr("input-update-display-text",[Vt(Du,(Ze,dt)=>{Sn.setValue(Ze,dt.event.text)}),Vt(q0(),Ze=>{T.onAction(Sn.getValue(Ze))}),Vt(Nf(),Ze=>{T.onAction(Sn.getValue(Ze))})]),Xn.config({mode:"special",onEnter:Ze=>(se(ie,!0,!0),Q.some(!0)),onEscape:ye,onUp:Ze=>(ge(!0,!1),Q.some(!0)),onDown:Ze=>(ce(!0,!1),Q.some(!0)),onLeft:(Ze,dt)=>(dt.cut(),Q.none()),onRight:(Ze,dt)=>(dt.cut(),Q.none())})])})],behaviours:sn([dr.config({}),Xn.config({mode:"special",onEnter:xe,onSpace:xe,onEscape:ye}),Dr("input-wrapper-events",[Vt(Vd(),Ze=>{Be([He,pt],dt=>{const Mt=Nt.fromDom(dt.get(Ze).element.dom);av(Mt)&&z_(Mt)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[He.asSpec(),Je.asSpec(),pt.asSpec()],behaviours:sn([dr.config({}),Xn.config({mode:"flow",focusInside:sh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ze=>av(Ze.element)?Q.none():(Il(Ze.element),Q.some(!0))})])}},dL="Font sizes",jV="12pt",AG={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},MG={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZV=(u,_)=>{const T=Math.pow(10,_);return Math.round(u*T)/T},kG=(u,_)=>/[0-9.]+px$/.test(u)?ZV(parseInt(u,10)*72/96,_||0)+"pt":Ue(MG,u).getOr(u),DG=u=>Ue(AG,u).getOr(""),qV=u=>{const _=()=>{let ne=Q.none();const se=J.data,ce=u.queryCommandValue("FontSize");if(ce)for(let ge=3;ne.isNone()&&ge>=0;ge--){const ye=kG(ce,ge),xe=DG(ye);ne=$e(se,ke=>ke.format===ce||ke.format===ye||ke.format===xe)}return{matchOpt:ne,size:ce}},T=ne=>se=>se.exists(ce=>ce.format===ne),D=()=>{const{matchOpt:ne}=_();return ne},B=q(Q.none),U=ne=>()=>{u.undoManager.transact(()=>{u.focus(),u.execCommand("FontSize",!1,ne.format)})},W=ne=>{const{matchOpt:se,size:ce}=_(),ge=se.fold(q(ce),ye=>ye.title);tr(ne,Du,{text:ge}),kz(u,{value:ge})},J=nL(u,"font_size_formats",fb.Space);return{tooltip:h0(u,dL,jV),text:Q.some(jV),icon:Q.none(),isSelectedFor:T,getPreviewFor:B,getCurrentValue:D,onAction:U,updateText:W,dataset:J,shouldHide:!1,isInvalid:me}},PG=(u,_)=>hb(u,_,qV(u),dL,"FontSizeTextUpdate"),RG=u=>{var _;const T={step:1};return(_={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[u])!==null&&_!==void 0?_:T},IG=16,$G=u=>u>=0,KV=u=>{const _=()=>u.queryCommandValue("FontSize");return{updateInputValue:D=>tr(D,Du,{text:_()}),onAction:(D,B)=>u.execCommand("FontSize",!1,D,{skip_focus:!B}),getNewValue:(D,B)=>{yC(D,["unsupportedLength","empty"]);const U=_(),W=yC(D,["unsupportedLength","empty"]).or(yC(U,["unsupportedLength","empty"])),J=W.map(ye=>ye.value).getOr(IG),ne=lc(u),se=W.map(ye=>ye.unit).filter(ye=>ye!=="").getOr(ne),ce=B(J,RG(se).step),ge=`${$G(ce)?ce:J}${se}`;return ge!==U&&Dz(u,{value:ge}),ge}}},LG=(u,_)=>TG(u,_,KV(u)),NG=(u,_)=>{const T=Jm(u,_,qV(u));u.ui.registry.addNestedMenuItem("fontsize",{text:dL,onSetup:Qs(u),getSubmenuItems:()=>T.items.validateItems(T.getStyleItems())})},nM="Formats",XV=(u,_)=>{const T="Paragraph",D=W=>()=>u.formatter.match(W),B=W=>()=>{const J=u.formatter.get(W);return J!==void 0?Q.some({tag:J.length>0&&(J[0].inline||J[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(W))}):Q.none()},U=W=>{const J=ge=>A2(ge)?Fe(ge.items,J):_F(ge)?[{title:ge.title,format:ge.format}]:[],ne=Fe(xF(u),J),ce=UV(u,q(ne)).fold(q(T),ge=>ge.title);tr(W,Du,{text:ce}),Az(u,{value:ce})};return{tooltip:h0(u,nM,T),text:Q.some(T),icon:Q.none(),isSelectedFor:D,getCurrentValue:Q.none,getPreviewFor:B,onAction:LO(u),updateText:U,shouldHide:vn(u),isInvalid:W=>!u.formatter.canApply(W.format),dataset:_}},JV=(u,_)=>{const T={type:"advanced",..._.styles};return hb(u,_,XV(u,T),nM,"StylesTextUpdate")},QV=(u,_)=>{const T={type:"advanced",..._.styles},D=Jm(u,_,XV(u,T));u.ui.registry.addNestedMenuItem("styles",{text:nM,onSetup:Qs(u),getSubmenuItems:()=>D.items.validateItems(D.getStyleItems())})},OG=q([Ft("toggleClass"),Ft("fetch"),Tc("onExecute"),ft("getHotspot",Q.some),ft("getAnchorOverrides",q({})),gu(),Tc("onItemExecute"),Ro("lazySink"),Ft("dom"),so("onOpen"),ia("splitDropdownBehaviours",[zi,Xn,dr]),ft("matchWidth",!1),ft("useMinWidth",!1),ft("eventOrder",{}),Ro("role")].concat(sI())),BG=cs({factory:sa,schema:[Ft("dom")],name:"arrow",defaults:()=>({buttonBehaviours:sn([dr.revoke()])}),overrides:u=>({dom:{tag:"span",attributes:{role:"presentation"}},action:_=>{_.getSystem().getByUid(u.uid).each(zd)},buttonBehaviours:sn([Rr.config({toggleOnExecute:!1,toggleClass:u.toggleClass})])})}),FG=cs({factory:sa,schema:[Ft("dom")],name:"button",defaults:()=>({buttonBehaviours:sn([dr.revoke()])}),overrides:u=>({dom:{tag:"span",attributes:{role:"presentation"}},action:_=>{_.getSystem().getByUid(u.uid).each(T=>{u.onExecute(T,_)})}})}),pb=q([BG,FG,pl({factory:{sketch:u=>({uid:u.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:u.text}})},schema:[Ft("text")],name:"aria-descriptor"}),$c({schema:[py()],name:"menu",defaults:u=>({onExecute:(_,T)=>{_.getSystem().getByUid(u.uid).each(D=>{u.onItemExecute(D,_,T)})}})}),eB()]),VG=(u,_,T,D)=>{const B=ce=>{eo.getCurrent(ce).each(ge=>{To.highlightFirst(ge),Xn.focusIn(ge)})},U=ce=>{iI(u,ie,ce,D,B,Ms.HighlightMenuAndItem).get(V)},W=ce=>(U(ce),Q.some(!0)),J=ce=>{const ge=nh(ce,u,"button");return zd(ge),Q.some(!0)},ne={...ui([ii((ce,ge)=>{Xo(ce,u,"aria-descriptor").each(xe=>{const ke=In("aria");bn(xe.element,"id",ke),bn(ce.element,"aria-describedby",ke)})})]),...Su(Q.some(U))},se={repositionMenus:ce=>{Rr.isOn(ce)&&oB(ce)}};return{uid:u.uid,dom:u.dom,components:_,apis:se,eventOrder:{...u.eventOrder,[kl()]:["disabling","toggling","alloy.base.behaviour"]},events:ne,behaviours:aa(u.splitDropdownBehaviours,[zi.config({others:{sandbox:ce=>{const ge=nh(ce,u,"arrow");return aI(u,ce,{onOpen:()=>{Rr.on(ge),Rr.on(ce)},onClose:()=>{Rr.off(ge),Rr.off(ce)}})}}}),Xn.config({mode:"special",onSpace:J,onEnter:J,onDown:W}),dr.config({}),Rr.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:u.role.getOr("button"),"aria-haspopup":!0}}}},rM=us({name:"SplitDropdown",configFields:OG(),partFields:pb(),factory:VG,apis:{repositionMenus:(u,_)=>u.repositionMenus(_)}}),e4=u=>({isEnabled:()=>!or.isDisabled(u),setEnabled:_=>or.set(u,!_),setText:_=>tr(u,Du,{text:_}),setIcon:_=>tr(u,jm,{icon:_})}),zG=u=>({setActive:_=>{Rr.set(u,_)},isActive:()=>Rr.isOn(u),isEnabled:()=>!or.isDisabled(u),setEnabled:_=>or.set(u,!_),setText:_=>tr(u,Du,{text:_}),setIcon:_=>tr(u,jm,{icon:_})}),t4=(u,_)=>u.map(T=>({"aria-label":_.translate(T),title:_.translate(T)})).getOr({}),n4=In("focus-button"),hL=(u,_,T,D,B)=>{const U=_.map(J=>Po(x3(J,"tox-tbtn",B))),W=u.map(J=>Po(Ym(J,B.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(_.isSome()?["tox-tbtn--select"]:[]),attributes:t4(T,B)},components:V1([W.map(J=>J.asSpec()),U.map(J=>J.asSpec())]),eventOrder:{[oi()]:["focusing","alloy.base.behaviour",s0],[Sc()]:[s0,"toolbar-group-button-events"]},buttonBehaviours:sn([la.toolbarButton(B.isDisabled),ya(),Dr(s0,[ii((J,ne)=>Xx(J)),Vt(Du,(J,ne)=>{U.bind(se=>se.getOpt(J)).each(se=>{wr.set(se,[Pi(B.translate(ne.event.text))])})}),Vt(jm,(J,ne)=>{W.bind(se=>se.getOpt(J)).each(se=>{wr.set(se,[Ym(ne.event.icon,B.icons)])})}),Vt(oi(),(J,ne)=>{ne.event.prevent(),Kr(J,n4)})])].concat(D.getOr([])))}},UG=(u,_,T,D)=>{const B=_.shared,U=sr(V),W={toolbarButtonBehaviours:[],getApi:e4,onSetup:u.onSetup},J=[Dr("toolbar-group-button-events",[Nm(W,U),uf(W,U)])];return Xm.sketch({lazySink:B.getSink,fetch:()=>Ds.nu(ne=>{ne(Xe(T(u.items),Z2))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:hL(u.icon,u.text,u.tooltip,Q.some(J),B.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:D}}}})},oM=(u,_,T)=>{var D;const B=sr(V),U=hL(u.icon,u.text,u.tooltip,Q.none(),T);return sa.sketch({dom:U.dom,components:U.components,eventOrder:_3,buttonBehaviours:{...sn([Dr("toolbar-button-events",[b3({onAction:u.onAction,getApi:_.getApi}),Nm(_,B),uf(_,B)]),la.toolbarButton(()=>!u.enabled||T.isDisabled()),ya()].concat(_.toolbarButtonBehaviours)),[s0]:(D=U.buttonBehaviours)===null||D===void 0?void 0:D[s0]}})},HG=(u,_)=>r4(u,_,[]),r4=(u,_,T)=>oM(u,{toolbarButtonBehaviours:T.length>0?[Dr("toolbarButtonWith",T)]:[],getApi:e4,onSetup:u.onSetup},_),o4=(u,_)=>fL(u,_,[]),fL=(u,_,T)=>oM(u,{toolbarButtonBehaviours:[wr.config({}),Rr.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(T.length>0?[Dr("toolbarToggleButtonWith",T)]:[]),getApi:zG,onSetup:u.onSetup},_),GG=(u,_,T)=>D=>Ds.nu(B=>_.fetch(B)).map(B=>Q.from(FA(ci(JR(In("menu-value"),B,U=>{_.onItemAction(u(D),U)},_.columns,_.presets,fh.CLOSE_ON_EXECUTE,_.select.getOr(me),T),{movement:LA(_.columns,_.presets),menuBehaviours:Tx.unnamedEvents(_.columns!=="auto"?[]:[ii((U,W)=>{wR(U,4,kN(_.presets)).each(({numRows:J,numColumns:ne})=>{Xn.setGridSize(U,J,ne)})})])})))),WG=(u,_)=>{const T=U=>({isEnabled:()=>!or.isDisabled(U),setEnabled:W=>or.set(U,!W),setIconFill:(W,J)=>{Ri(U.element,`svg path[class="${W}"], rect[class="${W}"]`).each(ne=>{bn(ne,"fill",J)})},setActive:W=>{bn(U.element,"aria-pressed",W),Ri(U.element,"span").each(J=>{U.getSystem().getByDom(J).each(ne=>Rr.set(ne,W))})},isActive:()=>Ri(U.element,"span").exists(W=>U.getSystem().getByDom(W).exists(Rr.isOn)),setText:W=>Ri(U.element,"span").each(J=>U.getSystem().getByDom(J).each(ne=>tr(ne,Du,{text:W}))),setIcon:W=>Ri(U.element,"span").each(J=>U.getSystem().getByDom(J).each(ne=>tr(ne,jm,{icon:W}))),setTooltip:W=>{const J=_.providers.translate(W);hg(U.element,{"aria-label":J,title:J})}}),D=sr(V),B={getApi:T,onSetup:u.onSetup};return rM.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...t4(u.tooltip,_.providers)}},onExecute:U=>{const W=T(U);W.isEnabled()&&u.onAction(W)},onItemExecute:(U,W,J)=>{},splitDropdownBehaviours:sn([la.splitButton(_.providers.isDisabled),ya(),Dr("split-dropdown-events",[ii((U,W)=>Xx(U)),Vt(n4,dr.focus),Nm(B,D),uf(B,D)]),Vx.config({})]),eventOrder:{[Sc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:_.getSink,fetch:GG(T,u,_.providers),parts:{menu:I1(!1,u.columns,u.presets)},components:[rM.parts.button(hL(u.icon,u.text,Q.none(),Q.some([Rr.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),_.providers)),rM.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Ua("chevron-down",_.providers.icons)},buttonBehaviours:sn([la.splitButton(_.providers.isDisabled),ya(),bp()])}),rM.parts["aria-descriptor"]({text:_.providers.translate("To open the popup, press Shift+Enter")})]})},YG=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],bC=(u,_)=>(T,D,B)=>{const U=u(T).mapError(W=>Fs(W)).getOrDie();return _(U,D,B)},jG={button:bC(SR,(u,_)=>HG(u,_.shared.providers)),togglebutton:bC(qN,(u,_)=>o4(u,_.shared.providers)),menubutton:bC(N$,(u,_)=>Qx(u,"tox-tbtn",_,Q.none(),!1)),splitbutton:bC(m7,(u,_)=>WG(u,_.shared)),grouptoolbarbutton:bC(f7,(u,_,T)=>{const D=T.ui.registry.getAll().buttons,B=W=>aM(T,{buttons:D,toolbar:W,allowToolbarGroups:!1},_,Q.none()),U={[Py]:_.shared.header.isPositionedAtTop()?mu.TopToBottom:mu.BottomToTop};switch(Un(T)){case Ws.floating:return UG(u,_,B,U);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},ZG=(u,_,T)=>Ue(jG,u.type).fold(()=>(console.error("skipping button defined by",u),Q.none()),D=>Q.some(D(u,_,T))),pL={styles:JV,fontsize:PG,fontsizeinput:LG,fontfamily:SG,blocks:yG,align:zV},qG=u=>{const _=Xe(YG,T=>{const D=Rt(T.items,B=>yn(u,B)||yn(pL,B));return{name:T.name,items:D}});return Rt(_,T=>T.items.length>0)},KG=u=>{const _=u.split("|");return Xe(_,T=>({items:T.trim().split(" ")}))},XG=u=>z(u,_=>yn(_,"name")&&yn(_,"items")),JG=u=>{const _=u.toolbar,T=u.buttons;return _===!1?[]:_===void 0||_===!0?qG(T):g(_)?KG(_):XG(_)?_:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},iM=(u,_,T,D,B,U)=>Ue(_,T.toLowerCase()).orThunk(()=>U.bind(W=>Wt(W,J=>Ue(_,J+T.toLowerCase())))).fold(()=>Ue(pL,T.toLowerCase()).map(W=>W(u,B)),W=>W.type==="grouptoolbarbutton"&&!D?(console.warn(`Ignoring the '${T}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),Q.none()):ZG(W,B,u)),aM=(u,_,T,D)=>{const B=JG(_),U=Xe(B,W=>{const J=Fe(W.items,ne=>ne.trim().length===0?[]:iM(u,_.buttons,ne,_.allowToolbarGroups,T,D).toArray());return{title:Q.from(u.translate(W.name)),items:J}});return Rt(U,W=>W.items.length>0)},_C=(u,_,T,D)=>{const B=_.mainUi.outerContainer,U=T.toolbar,W=T.buttons;if(z(U,g)){const J=U.map(ne=>{const se={toolbar:ne,buttons:W,allowToolbarGroups:T.allowToolbarGroups};return aM(u,se,D,Q.none())});li.setToolbars(B,J)}else li.setToolbar(B,aM(u,T,D,Q.none()))},SC=zu(),i4=SC.os.isiOS()&&SC.os.version.major<=12,QG=(u,_)=>{const{uiMotherships:T}=_,D=u.dom;let B=u.getWin();const U=u.getDoc().documentElement,W=sr(Ti(B.innerWidth,B.innerHeight)),J=sr(Ti(U.offsetWidth,U.offsetHeight)),ne=()=>{const ye=W.get();(ye.left!==B.innerWidth||ye.top!==B.innerHeight)&&(W.set(Ti(B.innerWidth,B.innerHeight)),AA(u))},se=()=>{const ye=u.getDoc().documentElement,xe=J.get();(xe.left!==ye.offsetWidth||xe.top!==ye.offsetHeight)&&(J.set(Ti(ye.offsetWidth,ye.offsetHeight)),AA(u))},ce=ye=>{Ez(u,ye)};D.bind(B,"resize",ne),D.bind(B,"scroll",ce);const ge=Ay(Nt.fromDom(u.getBody()),"load",se);u.on("hide",()=>{Be(T,ye=>{$r(ye.element,"display","none")})}),u.on("show",()=>{Be(T,ye=>{Do(ye.element,"display")})}),u.on("NodeChange",se),u.on("remove",()=>{ge.unbind(),D.unbind(B,"resize",ne),D.unbind(B,"scroll",ce),B=null})},eW=(u,_,T)=>{of(u)&&Qd(T.mainUi.mothership.element,T.popupUi.mothership),Hs(_,T.dialogUi.mothership)};var tW=Object.freeze({__proto__:null,render:(u,_,T,D,B)=>{const{mainUi:U,uiMotherships:W}=_,J=sr(0),ne=U.outerContainer;pG(u);const se=Nt.fromDom(B.targetNode),ce=Jc($s(se));Qd(se,U.mothership),eW(u,ce,_),u.on("SkinLoaded",()=>{li.setSidebar(ne,T.sidebar,aA(u)),_C(u,_,T,D),J.set(u.getWin().innerWidth),li.setMenubar(ne,eM(u,T)),li.setViews(ne,T.views),QG(u,_)});const ge=li.getSocket(ne).getOrDie("Could not find expected socket element");if(i4){Af(ge.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const He=Yx(()=>{u.dispatch("ScrollContent")},20),pt=Fa(ge.element,"scroll",He.throttle);u.on("remove",pt.unbind)}hO(u,_),u.addCommand("ToggleSidebar",(He,pt)=>{li.toggleSidebar(ne,pt),u.dispatch("ToggleSidebar")}),u.addQueryValueHandler("ToggleSidebar",()=>{var He;return(He=li.whichSidebar(ne))!==null&&He!==void 0?He:""}),u.addCommand("ToggleView",(He,pt)=>{if(li.toggleView(ne,pt)){const Je=ne.element;U.mothership.broadcastOn([yu()],{target:Je}),Be(W,Ze=>{Ze.broadcastOn([yu()],{target:Je})}),w(li.whichView(ne))&&(u.focus(),u.nodeChanged(),li.refreshToolbar(ne))}}),u.addQueryValueHandler("ToggleView",()=>{var He;return(He=li.whichView(ne))!==null&&He!==void 0?He:""});const ye=Un(u),xe=()=>{li.refreshToolbar(_.mainUi.outerContainer)};(ye===Ws.sliding||ye===Ws.floating)&&u.on("ResizeWindow ResizeEditor ResizeContent",()=>{const He=u.getWin().innerWidth;He!==J.get()&&(xe(),J.set(He))});const ke={setEnabled:He=>{CA(_,!He)},isEnabled:()=>!or.isDisabled(ne)};return{iframeContainer:ge.element.dom,editorContainer:ne.element.dom,api:ke}}});const mL=u=>/^[0-9\.]+(|px)$/i.test(""+u)?Q.some(parseInt(""+u,10)):Q.none(),mb=u=>O(u)?u+"px":u,xC=(u,_,T)=>{const D=_.filter(U=>u<U),B=T.filter(U=>u>U);return D.or(B).getOr(u)},a4=u=>{const _=M1(u),T=dh(u),D=at(u);return mL(_).map(B=>xC(B,T,D))},s4=u=>a4(u).getOr(M1(u)),gL=u=>{const _=Jv(u),T=px(u),D=Pe(u);return mL(_).map(B=>xC(B,T,D))},nW=u=>gL(u).getOr(Jv(u)),{ToolbarLocation:sM,ToolbarMode:l4}=P5,rW=40,oW=(u,_,T,D,B)=>{const{mainUi:U,uiMotherships:W}=T,J=Ol.DOM,ne=P1(u),se=vx(u),ce=Pe(u).or(gL(u)),ge=D.shared.header,ye=ge.isPositionedAtTop,xe=Un(u),ke=xe===l4.sliding||xe===l4.floating,He=sr(!1),pt=()=>He.get()&&!u.removed,Je=lr=>ke?lr.fold(q(0),mo=>mo.components().length>1?ua(mo.components()[1].element):0):0,Ze=lr=>{switch(Or(u)){case sM.auto:const mo=li.getToolbar(U.outerContainer),pn=Je(mo),On=ua(lr.element)-pn,br=Bi(_);if(br.y>On)return"top";{const ur=k0(_),Mr=Math.max(ur.dom.scrollHeight,ua(ur));return br.bottom<Mr-On||gs().bottom<br.bottom-On?"bottom":"top"}case sM.bottom:return"bottom";case sM.top:default:return"top"}},dt=lr=>{B.on(mo=>{ji.setModes(mo,[lr]),ge.setDockingMode(lr);const pn=ye()?mu.TopToBottom:mu.BottomToTop;bn(mo.element,Py,pn)})},Mt=()=>{B.on(lr=>{const mo=ce.getOrThunk(()=>{const pn=mL(mi(ta(),"margin-left")).getOr(0);return os(ta())-Oi(_).left+pn});$r(lr.element,"max-width",mo+"px")})},nn=lr=>{B.on(mo=>{const pn=li.getToolbar(U.outerContainer),On=Je(pn),br=Bi(_),{top:Sr,left:ur}=$t(u,U.outerContainer.element).fold(()=>({top:ye()?Math.max(br.y-ua(mo.element)+On,0):br.bottom,left:br.x}),vo=>{var es;const Gl=Bi(vo),$u=(es=vo.dom.scrollTop)!==null&&es!==void 0?es:0,Ad=ni(vo,ta()),ag=Ad?Math.max(br.y-ua(mo.element)+On,0):br.y-Gl.y+$u-ua(mo.element)+On;return{top:ye()?ag:br.bottom,left:Ad?br.x:br.x-Gl.x}}),Mr={position:"absolute",left:Math.round(ur)+"px",top:Math.round(Sr)+"px"},ei=lr.map(vo=>{const es=wl(),Gl=150,$u=window.innerWidth-(ur-es.left);return{width:Math.max(Math.min(vo,$u),Gl)+"px"}}).getOr({});Af(U.outerContainer.element,{...Mr,...ei})})},$t=(lr,mo)=>of(lr)?u0(mo):Q.none(),un=()=>{Be(W,lr=>{lr.broadcastOn([Rc()],{})})},mn=()=>{if(ne)return Q.none();if(Oi(U.outerContainer.element).left+xl(U.outerContainer.element)>=window.innerWidth-rW||Wa(U.outerContainer.element,"width").isSome()){$r(U.outerContainer.element,"position","absolute"),$r(U.outerContainer.element,"left","0px"),Do(U.outerContainer.element,"width");const mo=xl(U.outerContainer.element);return Q.some(mo)}else return Q.none()},Br=lr=>{if(!pt())return;ne||Mt();const mo=ne?Q.none():mn();ke&&li.refreshToolbar(U.outerContainer),ne||nn(mo),se&&B.on(lr),un()},An=()=>ne||!se||!pt()?!1:B.get().exists(lr=>{const mo=ge.getDockingMode(),pn=Ze(lr);return pn!==mo?(dt(pn),!0):!1});return{isVisible:pt,isPositionedAtTop:ye,show:()=>{He.set(!0),$r(U.outerContainer.element,"display","flex"),J.addClass(u.getBody(),"mce-edit-focus"),Be(W,lr=>{Do(lr.element,"display")}),An(),of(u)?Br(lr=>ji.isDocked(lr)?ji.reset(lr):ji.refresh(lr)):Br(ji.refresh)},hide:()=>{He.set(!1),$r(U.outerContainer.element,"display","none"),J.removeClass(u.getBody(),"mce-edit-focus"),Be(W,lr=>{$r(lr.element,"display","none")})},update:Br,updateMode:()=>{An()&&Br(ji.reset)},repositionPopups:un}},c4=(u,_)=>{const T=Bi(u);return{pos:_?T.y:T.bottom,bounds:T}},iW=(u,_,T,D)=>{const B=sr(c4(_,T.isPositionedAtTop())),U=se=>{const{pos:ce,bounds:ge}=c4(_,T.isPositionedAtTop()),{pos:ye,bounds:xe}=B.get(),ke=ge.height!==xe.height||ge.width!==xe.width;B.set({pos:ce,bounds:ge}),ke&&AA(u,se),T.isVisible()&&(ye!==ce?T.update(ji.reset):ke&&(T.updateMode(),T.repositionPopups()))};D||(u.on("activate",T.show),u.on("deactivate",T.hide)),u.on("SkinLoaded ResizeWindow",()=>T.update(ji.reset)),u.on("NodeChange keydown",se=>{requestAnimationFrame(()=>U(se))});let W=0;const J=zI(()=>T.update(ji.refresh),33);u.on("ScrollWindow",()=>{const se=wl().left;se!==W&&(W=se,J.throttle()),T.updateMode()}),of(u)&&u.on("ElementScroll",se=>{T.update(ji.refresh)});const ne=om();ne.set(Ay(Nt.fromDom(u.getBody()),"load",se=>U(se.raw))),u.on("remove",()=>{ne.clear()})};var aW=Object.freeze({__proto__:null,render:(u,_,T,D,B)=>{const{mainUi:U}=_,W=ai(),J=Nt.fromDom(B.targetNode),ne=oW(u,J,_,D,W),se=to(u);mG(u);const ce=()=>{if(W.isSet()){ne.show();return}W.set(li.getHeader(U.outerContainer).getOrDie());const ye=JP(u);of(u)?(Qd(J,U.mothership),Qd(J,_.popupUi.mothership)):Hs(ye,U.mothership),Hs(ye,_.dialogUi.mothership),_C(u,_,T,D),li.setMenubar(U.outerContainer,eM(u,T)),ne.show(),iW(u,J,ne,se),u.nodeChanged()};u.on("show",ce),u.on("hide",ne.hide),se||(u.on("focus",ce),u.on("blur",ne.hide)),u.on("init",()=>{(u.hasFocus()||se)&&ce()}),hO(u,_);const ge={show:ce,hide:ne.hide,setEnabled:ye=>{CA(_,!ye)},isEnabled:()=>!or.isDisabled(U.outerContainer)};return{editorContainer:U.outerContainer.element.dom,api:ge}}});const sW=()=>{const u=ai(),_=ai(),T=ai();return{dialogUi:u,popupUi:_,mainUi:T,getUiMotherships:()=>{const U=u.get().map(J=>J.mothership),W=_.get().map(J=>J.mothership);return U.fold(()=>W.toArray(),J=>W.fold(()=>[J],ne=>ni(J.element,ne.element)?[J]:[J,ne]))},lazyGetInOuterOrDie:(U,W)=>()=>T.get().bind(J=>W(J.outerContainer)).getOrDie(`Could not find ${U} element in OuterContainer`)}},lW="contexttoolbar-show",vL="contexttoolbar-hide",cW=u=>({hide:()=>Kr(u,Rg()),getValue:()=>Sn.getValue(u)}),yL=(u,_)=>Vt(WI,(T,D)=>{const B=u.get(T),U=cW(B);_.onAction(U,D.event.buttonApi)}),uW=(u,_,T)=>{const{primary:D,...B}=_.original,U=Ko(SR({...B,type:"button",onAction:V}));return r4(U,T,[yL(u,_)])},dW=(u,_,T)=>{const{primary:D,...B}=_.original,U=Ko(qN({...B,type:"togglebutton",onAction:V}));return fL(U,T,[yL(u,_)])},hW=u=>u.type==="contextformtogglebutton",fW=(u,_,T)=>hW(_)?dW(u,_,T):uW(u,_,T),pW=(u,_,T)=>{const D=Xe(_,W=>Po(fW(u,W,T)));return{asSpecs:()=>Xe(D,W=>W.asSpec()),findPrimary:W=>Wt(_,(J,ne)=>J.primary?Q.from(D[ne]).bind(se=>se.getOpt(W)).filter(re(or.isDisabled)):Q.none())}},gb=(u,_)=>{const T=u.label.fold(()=>({}),U=>({"aria-label":U})),D=Po(e0.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:u.initValue(),inputAttributes:T,selectOnFocus:!0,inputBehaviours:sn([Xn.config({mode:"special",onEnter:U=>B.findPrimary(U).map(W=>(zd(W),!0)),onLeft:(U,W)=>(W.cut(),Q.none()),onRight:(U,W)=>(W.cut(),Q.none())})])})),B=pW(D,u.commands,_);return[{title:Q.none(),items:[D.asSpec()]},{title:Q.none(),items:B.asSpecs()}]},gW={renderContextForm:(u,_,T)=>q2({type:u,uid:In("context-toolbar"),initGroups:gb(_,T),onEscape:Q.none,cyclicKeying:!0,providers:T}),buildInitGroups:gb},u4=(u,_,T)=>_.bottom-u.y>=T&&u.bottom-_.y>=T,d4=u=>{const _=u.getBoundingClientRect();if(_.height<=0&&_.width<=0){const T=Db(Nt.fromDom(u.startContainer),u.startOffset).element;return(ts(T)?Kc(T):Q.some(T)).filter(Fo).map(B=>B.dom.getBoundingClientRect()).getOr(_)}else return _},CC=u=>{const _=u.selection.getRng(),T=d4(_);if(u.inline){const D=wl();return ha(D.left+T.left,D.top+T.top,T.width,T.height)}else{const D=Sa(Nt.fromDom(u.getBody()));return ha(D.x+T.left,D.y+T.top,T.width,T.height)}},h4=(u,_)=>_.filter(T=>ba(T)&&Cf(T)).map(Sa).getOrThunk(()=>CC(u)),f4=(u,_,T)=>{const D=Math.max(u.x+T,_.x),B=Math.min(u.right-T,_.right);return{x:D,width:B-D}},vW=(u,_,T,D,B,U)=>{const W=Nt.fromDom(u.getContainer()),J=Ri(W,".tox-editor-header").getOr(W),ne=Bi(J),se=ne.y>=_.bottom,ce=D&&!se;if(u.inline&&ce)return{y:Math.max(ne.bottom+U,T.y),bottom:T.bottom};if(u.inline&&!ce)return{y:T.y,bottom:Math.min(ne.y-U,T.bottom)};const ge=B==="line"?Bi(W):_;return ce?{y:Math.max(ne.bottom+U,T.y),bottom:Math.min(ge.bottom-U,T.bottom)}:{y:Math.max(ge.y+U,T.y),bottom:Math.min(ne.y-U,T.bottom)}},f0=(u,_,T,D=0)=>{const B=Hb(window),U=Bi(Nt.fromDom(u.getContentAreaContainer())),W=D1(u)||cA(u)||gx(u),{x:J,width:ne}=f4(U,B,D);if(u.inline&&!W)return ha(J,B.y,ne,B.height);{const se=_.header.isPositionedAtTop(),{y:ce,bottom:ge}=vW(u,U,B,se,T,D);return ha(J,ce,ne,ge-ce)}},p0=12,cM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},bL={maxHeightFunction:sm(),maxWidthFunction:G$()},p4=(u,_)=>{const T=u.selection.getRng(),D=Db(Nt.fromDom(T.startContainer),T.startOffset);return T.startContainer===T.endContainer&&T.startOffset===T.endOffset-1&&ni(D.element,_)},yW=(u,_,T)=>{const D=Wa(u,"position");$r(u,"position",_);const B=T(u);return D.each(U=>$r(u,"position",U)),B},_L=u=>u==="node",bW=(u,_,T,D,B)=>{const U=CC(u),W=D.lastElement().exists(J=>ni(T,J));if(p4(u,T))return W?h$:xd;if(W)return yW(_,D.getMode(),()=>u4(U,Bi(_),-20)&&!D.isReposition()?s8:h$);{const J=D.getMode()==="fixed"?B.y+wl().top:B.y,ne=ua(_)+p0;return J+ne<=U.y?xd:ob}},_W=(u,_,T,D)=>{const B=ne=>(se,ce,ge,ye,xe)=>{const ke=bW(u,ye,ne,T,xe),He={...se,y:xe.y,height:xe.height};return{...ke(He,ce,ge,ye,xe),alwaysFit:!0}},U=ne=>_L(D)?[B(ne)]:[];return _?{onLtr:ne=>[ma,Ka,Xa,_s,ss,Ss].concat(U(ne)),onRtl:ne=>[ma,Xa,Ka,ss,_s,Ss].concat(U(ne))}:{onLtr:ne=>[Ss,ma,_s,Ka,ss,Xa].concat(U(ne)),onRtl:ne=>[Ss,ma,ss,Xa,_s,Ka].concat(U(ne))}},SW=(u,_,T,D)=>_==="line"?{bubble:Zd(p0,0,cM),layouts:{onLtr:()=>[$_],onRtl:()=>[ov]},overrides:bL}:{bubble:Zd(0,p0,cM,1/p0),layouts:_W(u,T,D,_),overrides:bL},SL=(u,_)=>{const T=Rt(_,U=>U.predicate(u.dom)),{pass:D,fail:B}=Dt(T,U=>U.type==="contexttoolbar");return{contextToolbars:D,contextForms:B}},xW=u=>{if(u.length<=1)return u;{const _=U=>Tt(u,W=>W.position===U),T=U=>Rt(u,W=>W.position===U),D=_("selection"),B=_("node");if(D||B)if(B&&D){const U=T("node"),W=Xe(T("selection"),J=>({...J,position:"node"}));return U.concat(W)}else return T(D?"selection":"node");else return T("line")}},m4=u=>{if(u.length<=1)return u;{const _=D=>$e(u,B=>B.position===D);return _("selection").orThunk(()=>_("node")).orThunk(()=>_("line")).map(D=>D.position).fold(()=>[],D=>Rt(u,B=>B.position===D))}},uM=(u,_,T)=>{const D=SL(u,_);if(D.contextForms.length>0)return Q.some({elem:u,toolbars:[D.contextForms[0]]});{const B=SL(u,T);if(B.contextForms.length>0)return Q.some({elem:u,toolbars:[B.contextForms[0]]});if(D.contextToolbars.length>0||B.contextToolbars.length>0){const U=xW(D.contextToolbars.concat(B.contextToolbars));return Q.some({elem:u,toolbars:U})}else return Q.none()}},g4=(u,_,T)=>u(_)?Q.none():mw(_,D=>{if(Fo(D)){const{contextToolbars:B,contextForms:U}=SL(D,T.inNodeScope),W=U.length>0?U:m4(B);return W.length>0?Q.some({elem:D,toolbars:W}):Q.none()}else return Q.none()},u),v4=(u,_)=>{const T=Nt.fromDom(_.getBody()),D=W=>ni(W,T),B=W=>!D(W)&&!wf(T,W),U=Nt.fromDom(_.selection.getNode());return B(U)?Q.none():uM(U,u.inNodeScope,u.inEditorScope).orThunk(()=>g4(D,U,u))},xL=(u,_)=>{const T={},D=[],B=[],U={},W={},J=(ce,ge)=>{const ye=Ko(J5(ge));T[ce]=ye,ye.launch.map(xe=>{U["form:"+ce]={...ge.launch,type:xe.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{_(ye)}}}),ye.scope==="editor"?B.push(ye):D.push(ye),W[ce]=ye},ne=(ce,ge)=>{ez(ge).each(ye=>{ge.scope==="editor"?B.push(ye):D.push(ye),W[ce]=ye})},se=xn(u);return Be(se,ce=>{const ge=u[ce];ge.type==="contextform"?J(ce,ge):ge.type==="contexttoolbar"&&ne(ce,ge)}),{forms:T,inNodeScope:D,inEditorScope:B,lookupTable:W,formNavigators:U}},y4=In("forward-slide"),CL=In("backward-slide"),wL=In("change-slide-event"),EL="tox-pop--resizing",dM=u=>{const _=sr([]);return fi.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:T=>{_.set([]),fi.getContent(T).each(D=>{Do(D.element,"visibility")}),hi(T.element,EL),Do(T.element,"width")},inlineBehaviours:sn([Dr("context-toolbar-events",[qu(Yp(),(T,D)=>{D.event.raw.propertyName==="width"&&(hi(T.element,EL),Do(T.element,"width"))}),Vt(wL,(T,D)=>{const B=T.element;Do(B,"width");const U=os(B);fi.setContent(T,D.event.contents),Di(B,EL);const W=os(B);$r(B,"width",U+"px"),fi.getContent(T).each(J=>{D.event.focus.bind(ne=>(Il(ne),Mc(B))).orThunk(()=>(Xn.focusIn(J),ec($s(B))))}),setTimeout(()=>{$r(T.element,"width",W+"px")},0)}),Vt(y4,(T,D)=>{fi.getContent(T).each(B=>{_.set(_.get().concat([{bar:B,focus:ec($s(T.element))}]))}),tr(T,wL,{contents:D.event.forwardContents,focus:Q.none()})}),Vt(CL,(T,D)=>{rn(_.get()).each(B=>{_.set(_.get().slice(0,_.get().length-1)),tr(T,wL,{contents:Pl(B.bar),focus:B.focus})})})]),Xn.config({mode:"special",onEscape:T=>rn(_.get()).fold(()=>u.onEscape(),D=>(Kr(T,CL),Q.some(!0)))})]),lazySink:()=>kr.value(u.sink)})},hM="tox-pop--transition",CW=(u,_,T,D)=>{const B=D.backstage,U=B.shared,W=zu().deviceType.isTouch,J=ai(),ne=ai(),se=ai(),ce=as(dM({sink:T,onEscape:()=>(u.focus(),Q.some(!0))})),ge=()=>{const An=se.get().getOr("node"),yr=_L(An)?1:0;return f0(u,U,An,yr)},ye=()=>!u.removed&&!(W()&&B.isContextMenuOpen()),xe=An=>Xt(vi(An,J.get(),ni),!0),ke=()=>{if(ye()){const An=ge(),yr=Xt(se.get(),"node")?h4(u,J.get()):CC(u);return An.height<=0||!u4(yr,An,.01)}else return!0},He=()=>{J.clear(),ne.clear(),se.clear(),fi.hide(ce)},pt=()=>{if(fi.isOpen(ce)){const An=ce.element;Do(An,"display"),ke()?$r(An,"display","none"):(ne.set(0),fi.reposition(ce))}},Je=An=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[An],behaviours:sn([Xn.config({mode:"acyclic"}),Dr("pop-dialog-wrap-events",[ii(yr=>{u.shortcuts.add("ctrl+F9","focus statusbar",()=>Xn.focusIn(yr))}),Ku(yr=>{u.shortcuts.remove("ctrl+F9")})])])}),Ze=eu(()=>xL(_,An=>{const yr=nn([An]);tr(ce,y4,{forwardContents:Je(yr)})})),dt=(An,yr)=>aM(u,{buttons:An,toolbar:yr.items,allowToolbarGroups:!1},D.backstage,Q.some(["form:"])),Mt=(An,yr)=>gW.buildInitGroups(An,yr),nn=An=>{const{buttons:yr}=u.ui.registry.getAll(),mr=Ze(),$o={...yr,...mr.formNavigators},lr=Un(u)===Ws.scrolling?Ws.scrolling:Ws.default,mo=et(Xe(An,pn=>pn.type==="contexttoolbar"?dt($o,pn):Mt(pn,U.providers)));return q2({type:lr,uid:In("context-toolbar"),initGroups:mo,onEscape:Q.none,cyclicKeying:!0,providers:U.providers})},$t=(An,yr)=>{const mr=An==="node"?U.anchors.node(yr):U.anchors.cursor(),$o=SW(u,An,W(),{lastElement:J.get,isReposition:()=>Xt(ne.get(),0),getMode:()=>Ja.getMode(T)});return ci(mr,$o)},un=(An,yr)=>{if(Br.cancel(),!ye())return;const mr=nn(An),$o=An[0].position,lr=$t($o,yr);se.set($o),ne.set(1);const mo=ce.element;Do(mo,"display"),xe(yr)||(hi(mo,hM),Ja.reset(T,ce)),fi.showWithinBounds(ce,Je(mr),{anchor:lr,transition:{classes:[hM],mode:"placement"}},()=>Q.some(ge())),yr.fold(J.clear,J.set),ke()&&$r(mo,"display","none")};let mn=!1;const Br=zI(()=>{if(!(!u.hasFocus()||u.removed||mn))if(ra(ce.element,hM))Br.throttle();else{const An=Ze();v4(An,u).fold(He,yr=>{un(yr.toolbars,Q.some(yr.elem))})}},17);u.on("init",()=>{u.on("remove",He),u.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",pt),u.on("click keyup focus SetContent",Br.throttle),u.on(vL,He),u.on(lW,An=>{const yr=Ze();Ue(yr.lookupTable,An.toolbarKey).each(mr=>{un([mr],Vn(An.target!==u,An.target)),fi.getContent(ce).each(Xn.focusIn)})}),u.on("focusout",An=>{tf.setEditorTimeout(u,()=>{Mc(T.element).isNone()&&Mc(ce.element).isNone()&&He()},0)}),u.on("SwitchMode",()=>{u.mode.isReadOnly()&&He()}),u.on("AfterProgressState",An=>{An.state?He():u.hasFocus()&&Br.throttle()}),u.on("dragstart",()=>{mn=!0}),u.on("dragend drop",()=>{mn=!1}),u.on("NodeChange",An=>{Mc(ce.element).fold(Br.throttle,V)})})},wW=u=>{Be([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],T=>{u.ui.registry.addToggleButton(T.name,{tooltip:T.text,icon:T.icon,onAction:Bl(u,T.cmd),onSetup:MA(u,T.name)})}),u.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Qs(u),onAction:Bl(u,"JustifyNone")})},b4=(u,_)=>{const T=()=>{const D=_.getOptions(u),B=_.getCurrent(u).map(_.hash),U=ai();return Xe(D,W=>({type:"togglemenuitem",text:_.display(W),onSetup:J=>{const ne=ce=>{ce&&(U.on(ge=>ge.setActive(!1)),U.set(J)),J.setActive(ce)};ne(Xt(B,_.hash(W)));const se=_.watcher(u,W,ne);return()=>{U.clear(),se()}},onAction:()=>_.setCurrent(u,W)}))};u.ui.registry.addMenuButton(_.name,{tooltip:_.text,icon:_.icon,fetch:D=>D(T()),onSetup:_.onToolbarSetup}),u.ui.registry.addNestedMenuItem(_.name,{type:"nestedmenuitem",text:_.text,getSubmenuItems:T,onSetup:_.onMenuSetup})},EW=u=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:_N,hash:_=>EG(_,["fixed","relative","empty"]).getOr(_),display:ie,watcher:(_,T,D)=>_.formatter.formatChanged("lineheight",D,!1,{value:T}).unbind,getCurrent:_=>Q.from(_.queryCommandValue("LineHeight")),setCurrent:(_,T)=>_.execCommand("LineHeight",!1,T),onToolbarSetup:Qs(u),onMenuSetup:Qs(u)}),TW=u=>Q.from(fn(u)).map(T=>({name:"language",text:"Language",icon:"language",getOptions:q(T),hash:D=>A(D.customCode)?D.code:`${D.code}/${D.customCode}`,display:D=>D.title,watcher:(D,B,U)=>{var W;return D.formatter.formatChanged("lang",U,!1,{value:B.code,customValue:(W=B.customCode)!==null&&W!==void 0?W:null}).unbind},getCurrent:D=>{const B=Nt.fromDom(D.selection.getNode());return If(B,U=>Q.some(U).filter(Fo).bind(W=>Ls(W,"lang").map(ne=>{const se=Ls(W,"data-mce-lang").getOrUndefined();return{code:ne,customCode:se,title:""}})))},setCurrent:(D,B)=>D.execCommand("Lang",!1,B),onToolbarSetup:D=>{const B=om();return D.setActive(u.formatter.match("lang",{},void 0,!0)),B.set(u.formatter.formatChanged("lang",D.setActive,!0)),Px(B.clear,Qs(u)(D))},onMenuSetup:Qs(u)})),_4=u=>{b4(u,EW(u)),TW(u).each(_=>b4(u,_))},S4=(u,_)=>{vG(u,_),xG(u,_),QV(u,_),bG(u,_),NG(u,_)},AW=u=>gd(u,"NodeChange",_=>{_.setEnabled(u.queryCommandState("outdent")&&u.selection.isEditable())}),MW=u=>{u.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:AW(u),onAction:Bl(u,"outdent")}),u.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Qs(u),onAction:Bl(u,"indent")})},x4=u=>{MW(u)},C4=(u,_)=>T=>{T.setActive(_.get());const D=B=>{_.set(B.state),T.setActive(B.state)};return u.on("PastePlainTextToggle",D),Px(()=>u.off("PastePlainTextToggle",D),Qs(u)(T))},kW=u=>{const _=sr(iA(u)),T=()=>u.execCommand("mceTogglePlainTextPaste");u.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:T,onSetup:C4(u,_)}),u.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:T,onSetup:C4(u,_)})},TL=(u,_)=>()=>{u.execCommand("mceToggleFormat",!1,_)},DW=u=>{vf.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(_,T)=>{u.ui.registry.addToggleButton(_.name,{tooltip:_.text,icon:_.icon,onSetup:MA(u,_.name),onAction:TL(u,_.name)})});for(let _=1;_<=6;_++){const T="h"+_;u.ui.registry.addToggleButton(T,{text:T.toUpperCase(),tooltip:"Heading "+_,onSetup:MA(u,T),onAction:TL(u,T)})}},PW=u=>{vf.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],_=>{u.ui.registry.addButton(_.name,{tooltip:_.text,icon:_.icon,onAction:Bl(u,_.action)})}),vf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],_=>{u.ui.registry.addButton(_.name,{tooltip:_.text,icon:_.icon,onSetup:Qs(u),onAction:Bl(u,_.action)})})},AL=u=>{vf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],_=>{u.ui.registry.addToggleButton(_.name,{tooltip:_.text,icon:_.icon,onAction:Bl(u,_.action),onSetup:MA(u,_.name)})})},RW=u=>{DW(u),PW(u),AL(u)},IW=u=>{vf.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],_=>{u.ui.registry.addMenuItem(_.name,{text:_.text,icon:_.icon,shortcut:_.shortcut,onAction:Bl(u,_.action)})}),vf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],_=>{u.ui.registry.addMenuItem(_.name,{text:_.text,icon:_.icon,shortcut:_.shortcut,onSetup:Qs(u),onAction:Bl(u,_.action)})}),u.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Qs(u),onAction:TL(u,"code")})},ML=u=>{RW(u),IW(u)},wC=(u,_)=>gd(u,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",T=>{T.setEnabled(!u.mode.isReadOnly()&&u.undoManager[_]())}),w4=u=>{u.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:wC(u,"hasUndo"),onAction:Bl(u,"undo")}),u.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:wC(u,"hasRedo"),onAction:Bl(u,"redo")})},$W=u=>{u.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:wC(u,"hasUndo"),onAction:Bl(u,"undo")}),u.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:wC(u,"hasRedo"),onAction:Bl(u,"redo")})},LW=u=>{w4(u),$W(u)},NW=u=>gd(u,"VisualAid",_=>{_.setActive(u.hasVisual)}),OW=u=>{u.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:NW(u),onAction:Bl(u,"mceToggleVisualAid")})},BW=u=>{u.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Bl(u,"mceToggleVisualAid")})},kL=u=>{BW(u),OW(u)},FW=(u,_)=>{wW(u),ML(u),S4(u,_),LW(u),XR(u),kL(u),x4(u),_4(u),kW(u)},E4=u=>g(u)?u.split(/[ ,]/):u,T4=u=>_=>_.options.get(u),VW=u=>{const _=u.options.register;_("contextmenu_avoid_overlap",{processor:"string",default:""}),_("contextmenu_never_use_native",{processor:"boolean",default:!1}),_("contextmenu",{processor:T=>T===!1?{value:[],valid:!0}:g(T)||z(T,g)?{value:E4(T),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},fM=T4("contextmenu_never_use_native"),zW=T4("contextmenu_avoid_overlap"),A4=u=>M4(u).length===0,M4=u=>{const _=u.ui.registry.getAll().contextMenus,T=u.options.get("contextmenu");return u.options.isSet("contextmenu")?T:Rt(T,D=>yn(_,D))},EC=(u,_)=>({type:"makeshift",x:u,y:_}),DL=(u,_,T)=>EC(u.x+_,u.y+T),k4=u=>u.type==="longpress"||u.type.indexOf("touch")===0,UW=u=>{if(k4(u)){const _=u.touches[0];return EC(_.pageX,_.pageY)}else return EC(u.pageX,u.pageY)},HW=u=>{if(k4(u)){const _=u.touches[0];return EC(_.clientX,_.clientY)}else return EC(u.clientX,u.clientY)},GW=(u,_)=>{const T=Ol.DOM.getPos(u);return DL(_,T.x,T.y)},WW=(u,_)=>_.type==="contextmenu"||_.type==="longpress"?u.inline?UW(_):GW(u.getContentAreaContainer(),HW(_)):PL(u),PL=u=>({type:"selection",root:Nt.fromDom(u.selection.getNode())}),YW=u=>({type:"node",node:Q.some(Nt.fromDom(u.selection.getNode())),root:Nt.fromDom(u.getBody())}),D4=(u,_,T)=>{switch(T){case"node":return YW(u);case"point":return WW(u,_);case"selection":return PL(u)}},jW=(u,_,T,D,B,U)=>{const W=T(),J=D4(u,_,U);Q1(W,fh.CLOSE_ON_EXECUTE,D,{isHorizontalMenu:!1,search:Q.none()}).map(ne=>{_.preventDefault(),fi.showMenuAt(B,{anchor:J},{menu:{markers:_p("normal")},data:ne})})},ZW={onLtr:()=>[ma,Ka,Xa,_s,ss,Ss,xd,ob,sC,aC,c0,iC],onRtl:()=>[ma,Xa,Ka,ss,_s,Ss,xd,ob,c0,iC,sC,aC]},qW=12,KW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},XW=(u,_)=>{const T=u.selection;if(T.isCollapsed()||_.touches.length<1)return!1;{const D=_.touches[0],B=T.getRng();return gv(u.getWin(),hv.domRange(B)).exists(W=>W.left<=D.clientX&&W.right>=D.clientX&&W.top<=D.clientY&&W.bottom>=D.clientY)}},JW=u=>{const _=u.selection.getRng(),T=()=>{tf.setEditorTimeout(u,()=>{u.selection.setRng(_)},10),U()};u.once("touchend",T);const D=W=>{W.preventDefault(),W.stopImmediatePropagation()};u.on("mousedown",D,!0);const B=()=>U();u.once("longpresscancel",B);const U=()=>{u.off("touchend",T),u.off("longpresscancel",B),u.off("mousedown",D)}},P4=(u,_,T)=>{const D=D4(u,_,T);return{bubble:Zd(0,T==="point"?qW:0,KW),layouts:ZW,overrides:{maxWidthFunction:G$(),maxHeightFunction:sm()},...D}},QW=(u,_,T,D,B,U,W)=>{const J=P4(u,_,U);Q1(T,fh.CLOSE_ON_EXECUTE,D,{isHorizontalMenu:!0,search:Q.none()}).map(ne=>{_.preventDefault();const se=W?Ms.HighlightMenuAndItem:Ms.HighlightNone;fi.showMenuWithinBounds(B,{anchor:J},{menu:{markers:_p("normal"),highlightOnOpen:se},data:ne,type:"horizontal"},()=>Q.some(f0(u,D.shared,U==="node"?"node":"selection"))),u.dispatch(vL)})},R4=(u,_,T,D,B,U)=>{const W=zu(),J=W.os.isiOS(),ne=W.os.isMacOS(),se=W.os.isAndroid(),ce=W.deviceType.isTouch(),ge=()=>!(se||J||ne&&ce),ye=()=>{const xe=T();QW(u,_,xe,D,B,U,ge())};if((ne||J)&&U!=="node"){const xe=()=>{JW(u),ye()};XW(u,_)?xe():(u.once("selectionchange",xe),u.once("touchend",()=>u.off("selectionchange",xe)))}else ye()},I4=u=>g(u)?u==="|":u.type==="separator",RL={type:"separator"},$4=u=>{const _=T=>({text:T.text,icon:T.icon,enabled:T.enabled,shortcut:T.shortcut});if(g(u))return u;switch(u.type){case"separator":return RL;case"submenu":return{type:"nestedmenuitem",..._(u),getSubmenuItems:()=>{const D=u.getSubmenuItems();return g(D)?D:Xe(D,$4)}};default:const T=u;return{type:"menuitem",..._(T),onAction:j(T.onAction)}}},eg=(u,_)=>{if(_.length===0)return u;const D=rn(u).filter(B=>!I4(B)).fold(()=>[],B=>[RL]);return u.concat(D).concat(_).concat([RL])},L4=(u,_,T)=>{const D=Se(_,(B,U)=>Ue(u,U.toLowerCase()).map(W=>{const J=W.update(T);if(g(J)&&Nu(lg(J)))return eg(B,J.split(" "));if(x(J)&&J.length>0){const ne=Xe(J,$4);return eg(B,ne)}else return B}).getOrThunk(()=>B.concat([U])),[]);return D.length>0&&I4(D[D.length-1])&&D.pop(),D},e9=(u,_)=>_.ctrlKey&&!fM(u),t9=u=>u.type==="longpress"||yn(u,"touches"),N4=(u,_)=>!t9(_)&&(_.button!==2||_.target===u.getBody()&&_.pointerType===""),O4=(u,_)=>N4(u,_)?u.selection.getStart(!0):_.target,B4=(u,_)=>{const T=zW(u),D=N4(u,_)?"selection":"point";if(Nu(T)){const B=O4(u,_);return Lx(Nt.fromDom(B),T)?"node":D}else return D},n9=(u,_,T)=>{const B=zu().deviceType.isTouch,U=as(fi.sketch({dom:{tag:"div"},lazySink:_,onEscape:()=>u.focus(),onShow:()=>T.setContextMenuState(!0),onHide:()=>T.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:sn([Dr("dismissContextMenu",[Vt(Zu(),(ne,se)=>{io.close(ne),u.focus()})])])})),W=()=>fi.hide(U),J=ne=>{if(fM(u)&&ne.preventDefault(),e9(u,ne)||A4(u))return;const se=B4(u,ne),ce=()=>{const ye=O4(u,ne),xe=u.ui.registry.getAll(),ke=M4(u);return L4(xe.contextMenus,ke,ye)};(B()?R4:jW)(u,ne,ce,T,U,se)};u.on("init",()=>{const ne="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(B()?"":" ResizeWindow");u.on(ne,W),u.on("longpress contextmenu",J)})},IL=il.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),pM=u=>_=>_.translate(-u.left,-u.top),mM=u=>_=>_.translate(u.left,u.top),Ap=u=>(_,T)=>Se(u,(D,B)=>B(D),Ti(_,T)),gM=(u,_,T)=>u.fold(Ap([mM(T),pM(_)]),Ap([pM(_)]),Ap([])),vb=(u,_,T)=>u.fold(Ap([mM(T)]),Ap([]),Ap([mM(_)])),F4=(u,_,T)=>u.fold(Ap([]),Ap([pM(T)]),Ap([mM(_),pM(T)])),r9=(u,_,T,D,B,U)=>{const W=vb(u,B,U),J=vb(_,B,U);return Math.abs(W.left-J.left)<=T&&Math.abs(W.top-J.top)<=D},o9=(u,_,T,D,B,U)=>{const W=vb(u,B,U),J=vb(_,B,U),ne=Math.abs(W.left-J.left),se=Math.abs(W.top-J.top);return Ti(ne,se)},$L=(u,_,T)=>{const D=u.fold((B,U)=>({position:Q.some("absolute"),left:Q.some(B+"px"),top:Q.some(U+"px")}),(B,U)=>({position:Q.some("absolute"),left:Q.some(B-T.left+"px"),top:Q.some(U-T.top+"px")}),(B,U)=>({position:Q.some("fixed"),left:Q.some(B+"px"),top:Q.some(U+"px")}));return{right:Q.none(),bottom:Q.none(),...D}},V4=(u,_,T)=>u.fold((D,B)=>tg(D+_,B+T),(D,B)=>ng(D+_,B+T),(D,B)=>m0(D+_,B+T)),LL=(u,_,T,D)=>{const B=(U,W)=>(J,ne)=>{const se=U(_,T,D);return W(J.getOr(se.left),ne.getOr(se.top))};return u.fold(B(F4,tg),B(vb,ng),B(gM,m0))},tg=IL.offset,ng=IL.absolute,m0=IL.fixed,vM=(u,_)=>{const T=ns(u,_);return A(T)?NaN:parseInt(T,10)},i9=(u,_)=>{const T=u.element,D=vM(T,_.leftAttr),B=vM(T,_.topAttr);return isNaN(D)||isNaN(B)?Q.none():Q.some(Ti(D,B))},a9=(u,_,T)=>{const D=u.element;bn(D,_.leftAttr,T.left+"px"),bn(D,_.topAttr,T.top+"px")},s9=(u,_)=>{const T=u.element;Ni(T,_.leftAttr),Ni(T,_.topAttr)},l9=(u,_,T,D)=>i9(u,_).fold(()=>T,B=>m0(B.left+D.left,B.top+D.top)),c9=(u,_,T,D,B,U)=>{const W=l9(u,_,T,D),J=_.mustSnap?d9(u,_,W,B,U):h9(u,_,W,B,U),ne=gM(W,B,U);return a9(u,_,ne),J.fold(()=>({coord:m0(ne.left,ne.top),extra:Q.none()}),se=>({coord:se.output,extra:se.extra}))},u9=(u,_)=>{s9(u,_)},z4=(u,_,T,D)=>Wt(u,B=>{const U=B.sensor;return r9(_,U,B.range.left,B.range.top,T,D)?Q.some({output:LL(B.output,_,T,D),extra:B.extra}):Q.none()}),d9=(u,_,T,D,B)=>{const U=_.getSnapPoints(u);return z4(U,T,D,B).orThunk(()=>Se(U,(ne,se)=>{const ce=se.sensor,ge=o9(T,ce,se.range.left,se.range.top,D,B);return ne.deltas.fold(()=>({deltas:Q.some(ge),snap:Q.some(se)}),ye=>{const xe=(ge.left+ge.top)/2,ke=(ye.left+ye.top)/2;return xe<=ke?{deltas:Q.some(ge),snap:Q.some(se)}:ne})},{deltas:Q.none(),snap:Q.none()}).snap.map(ne=>({output:LL(ne.output,T,D,B),extra:ne.extra})))},h9=(u,_,T,D,B)=>{const U=_.getSnapPoints(u);return z4(U,T,D,B)},f9=(u,_,T)=>({coord:LL(u.output,u.output,_,T),extra:u.extra});var p9=Object.freeze({__proto__:null,snapTo:(u,_,T,D)=>{const B=_.getTarget(u.element);if(_.repositionTarget){const U=Ia(u.element),W=wl(U),J=BF(B),ne=f9(D,W,J),se=$L(ne.coord,W,J);on(B,se)}}});const NL="data-initial-z-index",m9=u=>{Kc(u.element).filter(Fo).each(_=>{Ls(_,NL).fold(()=>Do(_,"z-index"),T=>$r(_,"z-index",T)),Ni(_,NL)})},g9=u=>{Kc(u.element).filter(Fo).each(_=>{Wa(_,"z-index").each(T=>{bn(_,NL,T)}),$r(_,"z-index",mi(u.element,"z-index"))})},U4=(u,_)=>{u.getSystem().addToGui(_),g9(_)},v9=u=>{m9(u),u.getSystem().removeFromGui(u)},TC=(u,_,T)=>u.getSystem().build(ph.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[_]},events:T}));var y9=ys("snaps",[Ft("getSnapPoints"),so("onSensor"),Ft("leftAttr"),Ft("topAttr"),ft("lazyViewport",gs),ft("mustSnap",!1)]);const OL=[ft("useFixed",me),Ft("blockerClass"),ft("getTarget",ie),ft("onDrag",V),ft("repositionTarget",!0),ft("onDrop",V),Ca("getBounds",gs),y9],b9=u=>js(Wa(u,"left"),Wa(u,"top"),Wa(u,"position"),(_,T,D)=>(D==="fixed"?m0:tg)(parseInt(_,10),parseInt(T,10))).getOrThunk(()=>{const _=Oi(u);return ng(_.left,_.top)}),_9=(u,_,T,D,B)=>{const U=B.bounds,W=vb(_,T,D),J=ul(W.left,U.x,U.x+U.width-B.width),ne=ul(W.top,U.y,U.y+U.height-B.height),se=ng(J,ne);return _.fold(()=>{const ce=F4(se,T,D);return tg(ce.left,ce.top)},q(se),()=>{const ce=gM(se,T,D);return m0(ce.left,ce.top)})},S9=(u,_,T,D,B,U,W)=>{const J=_.fold(()=>{const ne=V4(T,U.left,U.top),se=gM(ne,D,B);return m0(se.left,se.top)},ne=>{const se=c9(u,ne,T,U,D,B);return se.extra.each(ce=>{ne.onSensor(u,ce)}),se.coord});return _9(u,J,D,B,W)},x9=(u,_,T,D)=>{const B=_.getTarget(u.element);if(_.repositionTarget){const U=Ia(u.element),W=wl(U),J=BF(B),ne=b9(B),se=S9(u,_.snaps,ne,W,J,D,T),ce=$L(se,W,J);on(B,ce)}_.onDrag(u,B,D)},BL=(u,_)=>({bounds:u.getBounds(),height:Eh(_.element),width:xl(_.element)}),FL=(u,_,T,D,B)=>{const U=T.update(D,B),W=T.getStartData().getOrThunk(()=>BL(_,u));U.each(J=>{x9(u,_,W,J)})},H4=(u,_,T,D)=>{_.each(v9),T.snaps.each(U=>{u9(u,U)});const B=T.getTarget(u.element);D.reset(),T.onDrop(u,B)},VL=u=>(_,T)=>{const D=B=>{T.setStartData(BL(_,B))};return ui([Vt($g(),B=>{T.getStartData().each(()=>D(B))}),...u(_,T,D)])},C9=u=>ui([Vt(oi(),u.forceDrop),Vt(o_(),u.drop),Vt(yc(),(_,T)=>{u.move(T.event)}),Vt(Pg(),u.delayDrop)]);var W4=Object.freeze({__proto__:null,getData:u=>Q.from(Ti(u.x,u.y)),getDelta:(u,_)=>Ti(_.left-u.left,_.top-u.top)});const Y4=(u,_,T)=>[Vt(oi(),(D,B)=>{if(B.event.raw.button!==0)return;B.stop();const W=()=>H4(D,Q.some(se),u,_),J=lB(W,200),ne={drop:W,delayDrop:J.schedule,forceDrop:W,move:ge=>{J.cancel(),FL(D,u,_,W4,ge)}},se=TC(D,u.blockerClass,C9(ne));(()=>{T(D),U4(D,se)})()})],w9=[...OL,Go("dragger",{handlers:VL(Y4)})],E9=u=>ui([Vt(Fd(),u.forceDrop),Vt($f(),u.drop),Vt(Ph(),u.drop),Vt(Wp(),(_,T)=>{u.move(T.event)})]),T9=u=>{const _=u[0];return Q.some(Ti(_.clientX,_.clientY))};var j4=Object.freeze({__proto__:null,getData:u=>{const T=u.raw.touches;return T.length===1?T9(T):Q.none()},getDelta:(u,_)=>Ti(_.left-u.left,_.top-u.top)});const Z4=(u,_,T)=>{const D=ai(),B=U=>{H4(U,D.get(),u,_),D.clear()};return[Vt(Fd(),(U,W)=>{W.stop();const J=()=>B(U),ne={drop:J,delayDrop:V,forceDrop:J,move:ge=>{FL(U,u,_,j4,ge)}},se=TC(U,u.blockerClass,E9(ne));D.set(se),(()=>{T(U),U4(U,se)})()}),Vt(Wp(),(U,W)=>{W.stop(),FL(U,u,_,j4,W.event)}),Vt($f(),(U,W)=>{W.stop(),B(U)}),Vt(Ph(),B)]},A9=[...OL,Go("dragger",{handlers:VL(Z4)})],M9=(u,_,T)=>[...Y4(u,_,T),...Z4(u,_,T)],k9=[...OL,Go("dragger",{handlers:VL(M9)})];var D9=Object.freeze({__proto__:null,mouse:w9,touch:A9,mouseOrTouch:k9}),P9=Object.freeze({__proto__:null,init:()=>{let u=Q.none(),_=Q.none();const T=()=>{u=Q.none(),_=Q.none()},D=(ne,se)=>{const ce=u.map(ge=>ne.getDelta(ge,se));return u=Q.some(se),ce},B=(ne,se)=>ne.getData(se).bind(ce=>D(ne,ce)),U=ne=>{_=Q.some(ne)},W=()=>_,J=q({});return Xs({readState:J,reset:T,update:B,getStartData:W,setStartData:U})}});const rg=V_({branchKey:"mode",branches:D9,name:"dragging",active:{events:(u,_)=>u.dragger.handlers(u,_)},extra:{snap:u=>({sensor:u.sensor,range:u.range,output:u.output,extra:Q.from(u.extra)})},state:P9,apis:p9}),zL=40,yM=zL/2,q4=(u,_,T,D,B,U)=>u.fold(()=>rg.snap({sensor:ng(T-yM,D-yM),range:Ti(B,U),output:ng(Q.some(T),Q.some(D)),extra:{td:_}}),W=>{const J=T-yM,ne=D-yM,se=zL,ce=zL,ge=W.element.dom.getBoundingClientRect();return rg.snap({sensor:ng(J,ne),range:Ti(se,ce),output:ng(Q.some(T-ge.width/2),Q.some(D-ge.height/2)),extra:{td:_}})}),K4=(u,_,T)=>{const D=(B,U)=>B.exists(W=>ni(W,U));return{getSnapPoints:u,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(B,U)=>{const W=U.td;D(_.get(),W)||(_.set(W),T(W))},mustSnap:!0}},X4=u=>Po(sa.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:sn([rg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:u}),Vx.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),R9=(u,_)=>{const T=sr([]),D=sr([]),B=sr(!1),U=ai(),W=ai(),J=un=>{const mn=Sa(un);return q4(xe.getOpt(_),un,mn.x,mn.y,mn.width,mn.height)},ne=()=>Xe(T.get(),un=>J(un)),se=un=>{const mn=Sa(un);return q4(ke.getOpt(_),un,mn.right,mn.bottom,mn.width,mn.height)},ce=()=>Xe(D.get(),un=>se(un)),ge=K4(ne,U,un=>{W.get().each(mn=>{u.dispatch("TableSelectorChange",{start:un,finish:mn})})}),ye=K4(ce,W,un=>{U.get().each(mn=>{u.dispatch("TableSelectorChange",{start:mn,finish:un})})}),xe=X4(ge),ke=X4(ye),He=as(xe.asSpec()),pt=as(ke.asSpec()),Je=(un,mn,Br,An)=>{const yr=mn.dom.getBoundingClientRect();Do(un.element,"display");const mr=qi(Nt.fromDom(u.getBody())).dom.innerHeight,$o=Br(yr),lr=An(yr,mr);($o||lr)&&$r(un.element,"display","none")},Ze=(un,mn,Br,An)=>{const yr=Br(mn);rg.snapTo(un,yr),Je(un,mn,lr=>lr[An]<0,(lr,mo)=>lr[An]>mo)},dt=un=>Ze(He,un,J,"top"),Mt=()=>U.get().each(dt),nn=un=>Ze(pt,un,se,"bottom"),$t=()=>W.get().each(nn);zu().deviceType.isTouch()&&(u.on("TableSelectionChange",un=>{B.get()||(Xd(_,He),Xd(_,pt),B.set(!0)),U.set(un.start),W.set(un.finish),un.otherCells.each(mn=>{T.set(mn.upOrLeftCells),D.set(mn.downOrRightCells),dt(un.start),nn(un.finish)})}),u.on("ResizeEditor ResizeWindow ScrollContent",()=>{Mt(),$t()}),u.on("TableSelectionClear",()=>{B.get()&&(Jd(He),Jd(pt),B.set(!1)),U.clear(),W.clear()}))};var I9=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const $9=u=>u.nodeName==="BR"||!!u.getAttribute("data-mce-bogus")||u.getAttribute("data-mce-type")==="bookmark",J4=(u,_,T)=>{var D;const B=(D=_.delimiter)!==null&&D!==void 0?D:"›",U=(se,ce,ge)=>sa.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":ge,"aria-level":ge+1}},components:[Pi(se)],action:ye=>{u.focus(),u.selection.select(ce),u.nodeChanged()},buttonBehaviours:sn([la.button(T.isDisabled),ya()])}),W=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Pi(` ${B} `)]}),J=se=>Se(se,(ce,ge,ye)=>{const xe=U(ge.name,ge.element,ye);return ye===0?ce.concat([xe]):ce.concat([W(),xe])},[]),ne=se=>{const ce=[];let ge=se.length;for(;ge-- >0;){const ye=se[ge];if(ye.nodeType===1&&!$9(ye)){const xe=RO(u,ye);if(xe.isDefaultPrevented()||ce.push({name:xe.name,element:ye}),xe.isPropagationStopped())break}}return ce};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:sn([Xn.config({mode:"flow",selector:"div[role=button]"}),or.config({disabled:T.isDisabled}),ya(),_i.config({}),wr.config({}),Dr("elementPathEvents",[ii((se,ce)=>{u.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Xn.focusIn(se)),u.on("NodeChange",ge=>{const ye=ne(ge.parents),xe=ye.length>0?J(ye):[];wr.set(se,xe)})})])]),components:[]}};var Mp;(function(u){u[u.None=0]="None",u[u.Both=1]="Both",u[u.Vertical=2]="Vertical"})(Mp||(Mp={}));const g0=(u,_,T,D,B)=>{const U={height:xC(D+_.top,dh(u),at(u))};return T===Mp.Both&&(U.width=xC(B+_.left,px(u),Pe(u))),U},Q4=(u,_,T)=>{const D=Nt.fromDom(u.getContainer()),B=g0(u,_,T,ua(D),os(D));kn(B,(U,W)=>{O(U)&&$r(D,W,mb(U))}),DO(u)},UL=u=>{const _=vN(u);return _===!1?Mp.None:_==="both"?Mp.Both:Mp.Vertical},v0=(u,_,T,D)=>{const U=Ti(T*20,D*20);return Q4(u,U,_),Q.some(!0)},L9=(u,_)=>{const T=UL(u);if(T===Mp.None)return Q.none();const D=T===Mp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return Q.some(Js("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:_.translate("Resize"),"aria-label":_.translate(D)},behaviours:[rg.config({mode:"mouse",repositionTarget:!1,onDrag:(B,U,W)=>Q4(u,W,T),blockerClass:"tox-blocker"}),Xn.config({mode:"special",onLeft:()=>v0(u,T,-1,0),onRight:()=>v0(u,T,1,0),onUp:()=>v0(u,T,0,-1),onDown:()=>v0(u,T,0,1)}),_i.config({}),dr.config({})]},_.icons))},N9=(u,_)=>{const T=(D,B,U)=>wr.set(D,[Pi(_.translate(["{0} "+U,B[U]]))]);return sa.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:sn([la.button(_.isDisabled),ya(),_i.config({}),wr.config({}),Sn.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Dr("wordcount-events",[uu(D=>{const B=Sn.getValue(D),U=B.mode==="words"?"characters":"words";Sn.setValue(D,{mode:U,count:B.count}),T(D,B.count,U)}),ii(D=>{u.on("wordCountUpdate",B=>{const{mode:U}=Sn.getValue(D);Sn.setValue(D,{mode:U,count:B.wordCount}),T(D,B.wordCount,U)})})])]),eventOrder:{[kl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},O9=(u,_)=>{const T=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":hn.translate(["Powered by {0}","Tiny"])},innerHtml:I9.trim()},behaviours:sn([dr.config({})])}]}),D=()=>{const J=wA("Alt+0"),ne="Press {0} for help";return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Pi(hn.translate([ne,J]))]}},B=()=>{const J=[];return u.hasPlugin("wordcount")&&J.push(N9(u,_)),jP(u)&&J.push(T()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:J}},U=()=>{const J=[],ne=sA(u),se=k1(u),ce=jP(u)||u.hasPlugin("wordcount"),ge=()=>{const ye="tox-statusbar__text-container--flex-start",xe="tox-statusbar__text-container--flex-end",ke="tox-statusbar__text-container--space-around";if(ne){const He="tox-statusbar__text-container-3-cols";return!ce&&!se?[He,ke]:ce&&!se?[He,xe]:[He,ye]}return[ce&&!se?xe:ye]};return se&&J.push(J4(u,{},_)),ne&&J.push(D()),ce&&J.push(B()),J.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...ge()]},components:J}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const J=U(),ne=L9(u,_);return J.concat(ne.toArray())})()}},e5=(u,_)=>_.get().getOrDie(`UI for ${u} has not been rendered`),B9=(u,_)=>{const T=u.inline,D=T?aW:tW,B=vx(u)?JF:H8,U=sW(),W=ai(),J=ai(),ne=ai(),ye=zu().deviceType.isTouch()?["tox-platform-touch"]:[],xe=XP(u),ke=Un(u),He=Po({dom:{tag:"div",classes:["tox-anchorbar"]}}),pt=Po({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Je=()=>U.mainUi.get().map(ur=>ur.outerContainer).bind(li.getHeader),Ze=()=>kr.fromOption(U.dialogUi.get().map(ur=>ur.sink),"UI has not been rendered"),dt=()=>kr.fromOption(U.popupUi.get().map(ur=>ur.sink),"(popup) UI has not been rendered"),Mt=U.lazyGetInOuterOrDie("anchor bar",He.getOpt),nn=U.lazyGetInOuterOrDie("bottom anchor bar",pt.getOpt),$t=U.lazyGetInOuterOrDie("toolbar",li.getToolbar),un=U.lazyGetInOuterOrDie("throbber",li.getThrobber),mn=L8({popup:dt,dialog:Ze},u,Mt,nn),Br=()=>{const ur={attributes:{[Py]:xe?mu.BottomToTop:mu.TopToBottom}},Mr=li.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:mn.popup,onEscape:()=>{u.focus()}}),ei=li.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:mn.popup.shared.getSink,providers:mn.popup.shared.providers,onEscape:()=>{u.focus()},onToolbarToggled:IC=>{Tz(u,IC)},type:ke,lazyToolbar:$t,lazyHeader:()=>Je().getOrDie("Could not find header element"),...ur}),vo=li.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:mn.popup.shared.providers,onEscape:()=>{u.focus()},type:ke}),es=gx(u),Gl=cA(u),$u=D1(u),Ad=yN(u),ag=An(),E0=es||Gl||$u,Sh=()=>es?[vo]:Gl?[ei]:[],Dp=Ad?[ag,Mr]:[Mr];return li.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(E0?[]:["tox-editor-header--empty"]),...ur},components:et([$u?Dp:[],Sh(),P1(u)?[]:[He.asSpec()]]),sticky:vx(u),editor:u,sharedBackstage:mn.popup.shared})},An=()=>li.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),yr=()=>{const ur=li.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Mr=li.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ur,Mr]}},mr=()=>{const ur=JP(u),Mr=ni(ta(),ur)&&mi(ur,"display")==="grid",ei={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(ye),attributes:{...hn.isRtl()?{dir:"rtl"}:{}}},behaviours:sn([Ja.config({useFixed:()=>B.isDocked(Je)})])},vo={dom:{styles:{width:document.body.clientWidth+"px"}},events:ui([Vt(Lg(),$u=>{$r($u.element,"width",document.body.clientWidth+"px")})])},es=as(ci(ei,Mr?vo:{})),Gl=VA(es);return J.set(Gl),{sink:es,mothership:Gl}},$o=()=>{const ur={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(ye),attributes:{...hn.isRtl()?{dir:"rtl"}:{}}},behaviours:sn([Ja.config({useFixed:()=>B.isDocked(Je),getBounds:()=>_.getPopupSinkBounds()})])},Mr=as(ur),ei=VA(Mr);return ne.set(ei),{sink:Mr,mothership:ei}},lr=()=>{const ur=Br(),Mr=yr(),ei=li.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:mn.popup}),vo=li.parts.viewWrapper({backstage:mn.popup}),es=gN(u)&&!T?Q.some(O9(u,mn.popup.shared.providers)):Q.none(),Gl=et([xe?[]:[ur],T?[]:[Mr],xe?[ur]:[]]),$u=li.parts.editorContainer({components:et([Gl,T?[]:[pt.asSpec(),...es.toArray()]])}),Ad=QP(u),ag={role:"application",...hn.isRtl()?{dir:"rtl"}:{},...Ad?{"aria-hidden":"true"}:{}},E0=as(li.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(T?["tox-tinymce-inline"]:[]).concat(xe?["tox-tinymce--toolbar-bottom"]:[]).concat(ye),styles:{visibility:"hidden",...Ad?{opacity:"0",border:"0"}:{}},attributes:ag},components:[$u,...T?[]:[vo],ei],behaviours:sn([ya(),or.config({disableClass:"tox-tinymce--disabled"}),Xn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Sh=VA(E0);return W.set(Sh),{mothership:Sh,outerContainer:E0}},mo=ur=>{const Mr=mb(s4(u)),ei=mb(nW(u));return u.inline||(fg("div","width",ei)&&$r(ur.element,"width",ei),fg("div","height",Mr)?$r(ur.element,"height",Mr):$r(ur.element,"height","400px")),Mr},pn=ur=>{u.addShortcut("alt+F9","focus menubar",()=>{li.focusMenubar(ur)}),u.addShortcut("alt+F10","focus toolbar",()=>{li.focusToolbar(ur)}),u.addCommand("ToggleToolbarDrawer",(Mr,ei)=>{ei!=null&&ei.skipFocus?li.toggleToolbarDrawerWithoutFocusing(ur):li.toggleToolbarDrawer(ur)}),u.addQueryStateHandler("ToggleToolbarDrawer",()=>li.isToolbarDrawerToggled(ur))},On=ur=>{const{mainUi:Mr,popupUi:ei,uiMotherships:vo}=ur;Zn(hr(u),(Ab,RM)=>{u.ui.registry.addGroupToolbarButton(RM,Ab)});const{buttons:es,menuItems:Gl,contextToolbars:$u,sidebars:Ad,views:ag}=u.ui.registry.getAll(),E0=KP(u),Sh={menuItems:Gl,menus:xN(u),menubar:Yo(u),toolbar:E0.getOrThunk(()=>Ea(u)),allowToolbarGroups:ke===Ws.floating,buttons:es,sidebar:Ad,views:ag};pn(Mr.outerContainer),ab(u,Mr.mothership,vo),B.setup(u,mn.popup.shared,Je),FW(u,mn.popup),n9(u,mn.popup.shared.getSink,mn.popup),_7(u),z2(u,un,mn.popup.shared),CW(u,$u,ei.sink,{backstage:mn.popup}),R9(u,ei.sink);const Dp=u.getElement(),IC=mo(Mr.outerContainer),KL={targetNode:Dp,height:IC};return D.render(u,ur,Sh,mn.popup,KL)},br=ur=>(ne.set(ur.mothership),ur),Sr=()=>{const ur=lr(),Mr=mr(),ei=of(u)?$o():br(Mr);U.dialogUi.set(Mr),U.popupUi.set(ei),U.mainUi.set(ur);const vo={popupUi:ei,dialogUi:Mr,mainUi:ur,uiMotherships:U.getUiMotherships()};return On(vo)};return{popups:{backstage:mn.popup,getMothership:()=>e5("popups",ne)},dialogs:{backstage:mn.dialog,getMothership:()=>e5("dialogs",J)},renderUI:Sr}},y0=(u,_)=>{const T=Ls(u,"id").fold(()=>{const D=In("dialog-label");return bn(_,"id",D),D},ie);bn(u,"aria-labelledby",T)},t5=q([Ft("lazySink"),Ro("dragBlockClass"),Ca("getBounds",gs),ft("useTabstopAt",be),ft("firstTabstop",0),ft("eventOrder",{}),ia("modalBehaviours",[Xn]),ll("onExecute"),Qg("onEscape")]),HL={sketch:ie},F9=q([pl({name:"draghandle",overrides:(u,_)=>({behaviours:sn([rg.config({mode:"mouse",getTarget:T=>Rl(T,'[role="dialog"]').getOr(T),blockerClass:u.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(_,null,2)).message),getBounds:u.getDragBounds})])})}),cs({schema:[Ft("dom")],name:"title"}),cs({factory:HL,schema:[Ft("dom")],name:"close"}),cs({factory:HL,schema:[Ft("dom")],name:"body"}),pl({factory:HL,schema:[Ft("dom")],name:"footer"}),$c({factory:{sketch:(u,_)=>({...u,dom:_.dom,components:_.components})},schema:[ft("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ft("components",[])],name:"blocker"})]),V9=(u,_,T,D)=>{const B=ai(),U=xe=>{B.set(xe);const ke=u.lazySink(xe).getOrDie(),He=D.blocker(),pt=ke.getSystem().build({...He,components:He.components.concat([Pl(xe)]),behaviours:sn([dr.config({}),Dr("dialog-blocker-events",[qu(Ml(),()=>{vh.isBlocked(xe)?V():Xn.focusIn(xe)})])])});Xd(ke,pt),Xn.focusIn(xe)},W=xe=>{B.clear(),Kc(xe.element).each(ke=>{xe.getSystem().getByDom(ke).each(He=>{Jd(He)})})},J=xe=>nh(xe,u,"body"),ne=xe=>Xo(xe,u,"footer"),se=(xe,ke)=>{vh.block(xe,ke)},ce=xe=>{vh.unblock(xe)},ge=In("modal-events"),ye={...u.eventOrder,[Sc()]:[ge].concat(u.eventOrder["alloy.system.attached"]||[])};return{uid:u.uid,dom:u.dom,components:_,apis:{show:U,hide:W,getBody:J,getFooter:ne,setIdle:ce,setBusy:se},eventOrder:ye,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:aa(u.modalBehaviours,[wr.config({}),Xn.config({mode:"cyclic",onEnter:u.onExecute,onEscape:u.onEscape,useTabstopAt:u.useTabstopAt,firstTabstop:u.firstTabstop}),vh.config({getRoot:B.get}),Dr(ge,[ii(xe=>{y0(xe.element,nh(xe,u,"title").element)})])])}},ka=us({name:"ModalDialog",configFields:t5(),partFields:F9(),factory:V9,apis:{show:(u,_)=>{u.show(_)},hide:(u,_)=>{u.hide(_)},getBody:(u,_)=>u.getBody(_),getFooter:(u,_)=>u.getFooter(_),setBusy:(u,_,T)=>{u.setBusy(_,T)},setIdle:(u,_)=>{u.setIdle(_)}}}),z9=er([Qi,mR].concat(n0)),U9=iu,GL=[_A("button"),Fc,Tl("align","end",["start","end"]),cf,Cu,hw("buttonType",["primary","secondary"])],n5=[...GL,Sp],AC=[au("type",["submit","cancel","custom"]),...n5],MC=[au("type",["menu"]),lf,xx,Fc,El("items",z9),...GL],WL=[...GL,au("type",["togglebutton"]),ko("tooltip"),Fc,lf,xa("active",!1)],bM=Eo("type",{submit:AC,cancel:AC,custom:AC,menu:MC,togglebutton:WL}),b0=[Qi,Sp,au("level",["info","warn","error","success"]),gR,ft("url","")],_M=er(b0),H9=u=>[Qi,u],r5=[Qi,Sp,Cu,_A("button"),Fc,UN,hw("buttonType",["primary","secondary","toolbar"]),cf],o5=er(r5),_0=[Qi,mR],yh=_0.concat([yA]),G9=_0.concat([vA,Cu]),W9=er(G9),i5=iu,a5=yh.concat([HN("auto")]),YL=er(a5),Y9=Mh([L1,Sp,gR]),j9=yh.concat([Yu("storageKey","default")]),Z9=er(j9),s5=$a,q9=er(yh),K9=$a,jL=_0.concat([Yu("tag","textarea"),ko("scriptId"),ko("scriptUrl"),fw("settings",void 0)]),ZL=_0.concat([Yu("tag","textarea"),su("init")]),X9=Cg(u=>yi("customeditor.old",ri(ZL),u).orThunk(()=>yi("customeditor.new",ri(jL),u))),l5=$a,J9=er(yh),c5=dw(),Q9=u=>[Qi,Tg("columns"),u],eY=[Qi,ko("html"),Tl("presets","presentation",["presentation","document"])],S0=er(eY),u5=yh.concat([xa("border",!1),xa("sandboxed",!0),xa("streamContent",!1),xa("transparent",!0)]),tY=er(u5),SM=$a,yb=er(_0.concat([vs("height")])),xM=er([ko("url"),Ag("zoom"),Ag("cachedWidth"),Ag("cachedHeight")]),d5=yh.concat([vs("inputMode"),vs("placeholder"),xa("maximized",!1),Cu]),CM=er(d5),zl=$a,wM=u=>[Qi,vA,u,Tl("align","start",["start","center","end"])],h5=[Sp,L1],f5=[Sp,El("items",Eg("items",()=>p5))],p5=Rn([er(h5),er(f5)]),nY=yh.concat([El("items",p5),Cu]),og=er(nY),_j=$a,rY=yh.concat([n_("items",[Sp,L1]),Rf("size",1),Cu]),m5=er(rY),bb=$a,EM=yh.concat([xa("constrain",!0),Cu]),g5=er(EM),v5=er([ko("width"),ko("height")]),oY=_0.concat([vA,Rf("min",0),Rf("max",0)]),iY=er(oY),aY=xg,Sb=[Qi,El("header",$a),El("cells",ru($a))],Sj=er(Sb),sY=yh.concat([vs("placeholder"),xa("maximized",!1),Cu]),lY=er(sY),xj=$a,y5=[au("type",["directory","leaf"]),FN,ko("id"),Wu("menu",fC)],xb=er(y5),cY=y5.concat([El("children",Eg("children",()=>Zt("type",{directory:b5,leaf:xb})))]),b5=er(cY),_5=Zt("type",{directory:b5,leaf:xb}),uY=[Qi,El("items",_5),kf("onLeafAction"),kf("onToggleExpand"),pa("defaultExpandedIds",[],$a),vs("defaultSelectedId")],wj=er(uY),s=yh.concat([Tl("filetype","file",["image","media","file"]),Cu,vs("picker_text")]),f=er(s),b=er([L1,Cx]),C=u=>Za("items","items",wo(),ru(Cg(_=>yi(`Checking item of ${u}`,M,_).fold(T=>kr.error(Fs(T)),T=>kr.value(T))))),M=fa(()=>Zt("type",{alertbanner:_M,bar:er(H9(C("bar"))),button:o5,checkbox:W9,colorinput:Z9,colorpicker:q9,dropzone:J9,grid:er(Q9(C("grid"))),iframe:tY,input:CM,listbox:og,selectbox:m5,sizeinput:g5,slider:iY,textarea:lY,urlinput:f,customeditor:X9,htmlpanel:S0,imagepreview:yb,collection:YL,label:er(wM(C("label"))),table:Sj,tree:wj,panel:F})),I=[Qi,ft("classes",[]),El("items",M)],F=er(I),Y=[_A("tab"),FN,El("items",M)],X=[Qi,n_("tabs",Y)],ae=er(X),de=n5,fe=bM,ve=er([ko("title"),La("body",Zt("type",{panel:F,tabpanel:ae})),Yu("size","normal"),pa("buttons",[],fe),ft("initialData",{}),Ca("onAction",V),Ca("onChange",V),Ca("onSubmit",V),Ca("onClose",V),Ca("onCancel",V),Ca("onTabChange",V)]),De=u=>yi("dialog",ve,u),Ie=er([au("type",["cancel","custom"]),...de]),Me=er([ko("title"),ko("url"),Ag("height"),Ag("width"),Df("buttons",Ie),Ca("onAction",V),Ca("onCancel",V),Ca("onClose",V),Ca("onMessage",V)]),Re=u=>yi("dialog",Me,u),qe=u=>y(u)?[u].concat(Fe(Oo(u),qe)):x(u)?Fe(u,qe):[],nt=u=>g(u.type)&&g(u.name),tt={checkbox:i5,colorinput:s5,colorpicker:K9,dropzone:c5,input:zl,iframe:SM,imagepreview:xM,selectbox:bb,sizeinput:v5,slider:aY,listbox:_j,size:v5,textarea:xj,urlinput:b,customeditor:l5,collection:Y9,togglemenuitem:U9},gt=u=>Q.from(tt[u.type]),Ht=u=>Rt(qe(u),nt),an=u=>{const _=Ht(u),T=Fe(_,D=>gt(D).fold(()=>[],B=>[La(D.name,B)]));return er(T)},_n=u=>{var _;const T=Ko(De(u)),D=an(u),B=(_=u.initialData)!==null&&_!==void 0?_:{};return{internalDialog:T,dataValidator:D,initialData:B}},At={open:(u,_)=>{const T=_n(_);return u(T.internalDialog,T.initialData,T.dataValidator)},openUrl:(u,_)=>{const T=Ko(Re(_));return u(T)},redial:u=>_n(u)};var Ut=Object.freeze({__proto__:null,events:(u,_)=>{const T=(D,B)=>{u.updateState.each(U=>{const W=U(D,B);_.set(W)}),u.renderComponents.each(U=>{const W=U(B,_.get());(u.reuseDom?MT:Va)(D,W)})};return ui([Vt(Of(),(D,B)=>{const U=B;if(!U.universal){const W=u.channel;Ke(U.channels,W)&&T(D,U.data)}}),ii((D,B)=>{u.initialData.each(U=>{T(D,U)})})])}}),Qn=Object.freeze({__proto__:null,getState:(u,_,T)=>T}),zr=[Ft("channel"),Ro("renderComponents"),Ro("updateState"),Ro("initialData"),xa("reuseDom",!0)],Uo=Object.freeze({__proto__:null,init:()=>{const u=sr(Q.none()),_=()=>u.set(Q.none());return{readState:()=>u.get().getOr("none"),get:u.get,set:u.set,clear:_}}});const ho=Ba({fields:zr,name:"reflecting",active:Ut,apis:Qn,state:Uo}),ki=u=>{const _=[],T={};return kn(u,(D,B)=>{D.fold(()=>{_.push(B)},U=>{T[B]=U})}),_.length>0?kr.error(_):kr.value(T)},hs=(u,_,T)=>{const D=Po(X1.sketch(B=>({dom:{tag:"div",classes:["tox-form"].concat(u.classes)},components:Xe(u.items,U=>Sd(B,U,_,T))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[D.asSpec()]}],behaviours:sn([Xn.config({mode:"acyclic",useTabstopAt:re(jx)}),cc.memento(D),Gx(D,{postprocess:B=>ki(B).fold(U=>(console.error(U),{}),ie)}),Dr("dialog-body-panel",[Vt(Ml(),(B,U)=>{B.getSystem().broadcastOn([qx],{newFocus:Q.some(U.event.target)})})])])}},Ho=(u,_)=>({uid:u.uid,dom:u.dom,components:u.components,events:Su(u.action),behaviours:aa(u.tabButtonBehaviours,[dr.config({}),Xn.config({mode:"execution",useSpace:!0,useEnter:!0}),Sn.config({store:{mode:"memory",initialValue:u.value}})]),domModification:u.domModification}),dn=ml({name:"TabButton",configFields:[ft("uid",void 0),Ft("value"),Za("dom","dom",z0(()=>({attributes:{role:"tab",id:In("aria"),"aria-selected":"false"}})),Fi()),Ro("action"),ft("domModification",{}),ia("tabButtonBehaviours",[dr,Xn,Sn]),Ft("view")],factory:Ho}),Hn=q([Ft("tabs"),Ft("dom"),ft("clickToDismiss",!1),ia("tabbarBehaviours",[To,Xn]),Hh(["tabClass","selectedClass"])]),bo=$v({factory:dn,name:"tabs",unit:"tab",overrides:u=>{const _=(D,B)=>{To.dehighlight(D,B),tr(D,Dl(),{tabbar:D,button:B})},T=(D,B)=>{To.highlight(D,B),tr(D,jp(),{tabbar:D,button:B})};return{action:D=>{const B=D.getSystem().getByUid(u.uid).getOrDie(),U=To.isHighlighted(B,D);(()=>U&&u.clickToDismiss?_:U?V:T)()(B,D)},domModification:{classes:[u.markers.tabClass]}}}}),no=q([bo]),Nn=(u,_,T,D)=>({uid:u.uid,dom:u.dom,components:_,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:aa(u.tabbarBehaviours,[To.config({highlightClass:u.markers.selectedClass,itemClass:u.markers.tabClass,onHighlight:(B,U)=>{bn(U.element,"aria-selected","true")},onDehighlight:(B,U)=>{bn(U.element,"aria-selected","false")}}),Xn.config({mode:"flow",getInitial:B=>To.getHighlighted(B).map(U=>U.element),selector:"."+u.markers.tabClass,executeOnMove:!0})])}),vr=us({name:"Tabbar",configFields:Hn(),partFields:no(),factory:Nn}),ln=(u,_)=>({uid:u.uid,dom:u.dom,behaviours:aa(u.tabviewBehaviours,[wr.config({})]),domModification:{attributes:{role:"tabpanel"}}}),_r=ml({name:"Tabview",configFields:[ia("tabviewBehaviours",[wr])],factory:ln}),fo=q([ft("selectFirst",!0),so("onChangeTab"),so("onDismissTab"),ft("tabs",[]),ia("tabSectionBehaviours",[])]),Jo=cs({factory:vr,schema:[Ft("dom"),lu("markers",[Ft("tabClass"),Ft("selectedClass")])],name:"tabbar",defaults:u=>({tabs:u.tabs})}),Zo=cs({factory:_r,name:"tabview"}),Ha=q([Jo,Zo]),Cd=(u,_,T,D)=>{const B=W=>{const J=Sn.getValue(W);Xo(W,u,"tabview").each(ne=>{$e(u.tabs,ce=>ce.value===J).each(ce=>{const ge=ce.view();Ls(W.element,"id").each(ye=>{bn(ne.element,"aria-labelledby",ye)}),wr.set(ne,ge),u.onChangeTab(ne,W,ge)})})},U=(W,J)=>{Xo(W,u,"tabbar").each(ne=>{J(ne).each(zd)})};return{uid:u.uid,dom:u.dom,components:_,behaviours:eh(u.tabSectionBehaviours),events:ui(et([u.selectFirst?[ii((W,J)=>{U(W,To.getFirst)})]:[],[Vt(jp(),(W,J)=>{const ne=J.event.button;B(ne)}),Vt(Dl(),(W,J)=>{const ne=J.event.button;u.onDismissTab(W,ne)})]])),apis:{getViewItems:W=>Xo(W,u,"tabview").map(J=>wr.contents(J)).getOr([]),showTab:(W,J)=>{U(W,se=>{const ce=To.getCandidates(se);return $e(ce,ye=>Sn.getValue(ye)===J).filter(ye=>!To.isHighlighted(se,ye))})}}}},dc=us({name:"TabSection",configFields:fo(),partFields:Ha(),factory:Cd,apis:{getViewItems:(u,_)=>u.getViewItems(_),showTab:(u,_,T)=>{u.showTab(_,T)}}}),_l=(u,_,T)=>Xe(u,(D,B)=>{wr.set(T,u[B].view());const U=_.dom.getBoundingClientRect();return wr.set(T,[]),U.height}),Ru=u=>ht(Le(u,(_,T)=>_>T?-1:_<T?1:0)),Ar=(u,_,T)=>{const D=k0(u).dom,B=Rl(u,".tox-dialog-wrap").getOr(u),U=mi(B,"position")==="fixed";let W;U?W=Math.max(D.clientHeight,window.innerHeight):W=Math.max(D.offsetHeight,D.scrollHeight);const J=ua(_),se=_.dom.offsetLeft>=T.dom.offsetLeft+os(T)?Math.max(ua(T),J):J,ce=parseInt(mi(u,"margin-top"),10)||0,ge=parseInt(mi(u,"margin-bottom"),10)||0,xe=ua(u)+ce+ge-se;return W-xe},_o=(u,_)=>{ht(u).each(T=>dc.showTab(_,T.value))},Qo=(u,_)=>{$r(u,"height",_+"px"),$r(u,"flex-basis",_+"px")},wi=(u,_,T)=>{Rl(u,'[role="dialog"]').each(D=>{Ri(D,'[role="tablist"]').each(B=>{T.get().map(U=>($r(_,"height","0"),$r(_,"flex-basis","0"),Math.min(U,Ar(D,_,B)))).each(U=>{Qo(_,U)})})})},gi=u=>Ri(u,'[role="tabpanel"]'),Ul=u=>{const _=ai();return{extraEvents:[ii(B=>{const U=B.element;gi(U).each(W=>{$r(W,"visibility","hidden"),B.getSystem().getByDom(W).toOptional().each(J=>{const ne=_l(u,W,J);Ru(ne).fold(_.clear,_.set)}),wi(U,W,_),Do(W,"visibility"),_o(u,B),requestAnimationFrame(()=>{wi(U,W,_)})})}),Vt(Lg(),B=>{const U=B.element;gi(U).each(W=>{wi(U,W,_)})}),Vt(bB,(B,U)=>{const W=B.element;gi(W).each(J=>{const ne=ec($s(J));$r(J,"visibility","hidden");const se=Wa(J,"height").map(ye=>parseInt(ye,10));Do(J,"height"),Do(J,"flex-basis");const ce=J.dom.getBoundingClientRect().height;se.forall(ye=>ce>ye)?(_.set(ce),wi(W,J,_)):se.each(ye=>{Qo(J,ye)}),Do(J,"visibility"),ne.each(Il)})})],selectFirst:!1}},wd="send-data-to-section",kp="send-data-to-view",TM=(u,_,T)=>{const D=sr({}),B=se=>{const ce=Sn.getValue(se),ge=ki(ce).getOr({}),ye=D.get(),xe=ci(ye,ge);D.set(xe)},U=se=>{const ce=D.get();Sn.setValue(se,ce)},W=sr(null),J=Xe(u.tabs,se=>({value:se.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Pi(T.shared.providers.translate(se.title))],view:()=>[X1.sketch(ce=>({dom:{tag:"div",classes:["tox-form"]},components:Xe(se.items,ge=>Sd(ce,ge,_,T)),formBehaviours:sn([Xn.config({mode:"acyclic",useTabstopAt:re(jx)}),Dr("TabView.form.events",[ii(U),Ku(B)]),dl.config({channels:is([{key:wd,value:{onReceive:B}},{key:kp,value:{onReceive:U}}])})])}))]})),ne=Ul(J);return dc.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(se,ce,ge)=>{const ye=Sn.getValue(ce);tr(se,yB,{name:ye,oldName:W.get()}),W.set(ye)},tabs:J,components:[dc.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[vr.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:sn([_i.config({})])}),dc.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:ne.selectFirst,tabSectionBehaviours:sn([Dr("tabpanel",ne.extraEvents),Xn.config({mode:"acyclic"}),eo.config({find:se=>ht(dc.getViewItems(se))}),Wm(Q.none(),se=>(se.getSystem().broadcastOn([wd],{}),D.get()),(se,ce)=>{D.set(ce),se.getSystem().broadcastOn([kp],{})})])})},kC=(u,_,T,D,B)=>{const U=ne=>{const se=ne.body;switch(se.type){case"tabpanel":return[TM(se,ne.initialData,D)];default:return[hs(se,ne.initialData,D)]}},W=(ne,se)=>Q.some({isTabPanel:()=>se.body.type==="tabpanel"}),J={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...T.map(ne=>({id:ne})).getOr({}),...B?J:{}}},components:[],behaviours:sn([cc.childAt(0),ho.config({channel:`${yf}-${_}`,updateState:W,renderComponents:U,initialData:u})])}},AM=(u,_,T,D,B)=>kC(u,_,Q.some(T),D,B),Cb=(u,_,T)=>{const D=kC(u,_,Q.none(),T,!1);return ka.parts.body(D)},MM=u=>{const _={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[u3(Q.none(),{dom:{tag:"iframe",attributes:{src:u.url}},behaviours:sn([_i.config({}),dr.config({})])})]}],behaviours:sn([Xn.config({mode:"acyclic",useTabstopAt:re(jx)})])};return ka.parts.body(_)},wb=fd.deviceType.isTouch(),ig=(u,_)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[u,_]}),Ed=(u,_)=>ka.parts.close(sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":_.translate("Close")}},action:u,buttonBehaviours:sn([_i.config({})])})),bh=()=>ka.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Eb=(u,_)=>ka.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:hd(`<p>${Qe(_.translate(u))}</p>`)}]}]}),x0=u=>ka.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:u}),DC=(u,_)=>[ph.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:u}),ph.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:_})],_h=u=>{const _="tox-dialog",T=_+"-wrap",D=T+"__backdrop",B=_+"__disable-scroll";return ka.sketch({lazySink:u.lazySink,onEscape:U=>(u.onEscape(U),Q.some(!0)),useTabstopAt:U=>!jx(U),firstTabstop:u.firstTabstop,dom:{tag:"div",classes:[_].concat(u.extraClasses),styles:{position:"relative",...u.extraStyles}},components:[u.header,u.body,...u.footer.toArray()],parts:{blocker:{dom:hd(`<div class="${T}"></div>`),components:[{dom:{tag:"div",classes:wb?[D,D+"--opaque"]:[D]}}]}},dragBlockClass:T,modalBehaviours:sn([dr.config({}),Dr("dialog-events",u.dialogEvents.concat([qu(Ml(),(U,W)=>{vh.isBlocked(U)?V():Xn.focusIn(U)}),Vt(Lh(),(U,W)=>{U.getSystem().broadcastOn([qx],{newFocus:W.event.newFocus})})])),Dr("scroll-lock",[ii(()=>{Di(ta(),B)}),Ku(()=>{hi(ta(),B)})]),...u.extraBehaviours]),eventOrder:{[kl()]:["dialog-events"],[Sc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[$h()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...u.eventOrder}})},kM=u=>sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":u.translate("Close"),title:u.translate("Close")}},buttonBehaviours:sn([_i.config({})]),components:[Js("close",{tag:"span",classes:["tox-icon"]},u.icons)],action:_=>{Kr(_,zm)}}),PC=(u,_,T,D)=>{const B=U=>[Pi(D.translate(U.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...T.map(U=>({id:U})).getOr({})}},components:[],behaviours:sn([ho.config({channel:`${c2}-${_}`,initialData:u,renderComponents:B})])}},Rs=()=>({dom:hd('<div class="tox-dialog__draghandle"></div>')}),C0=(u,_,T,D)=>ph.sketch({dom:hd('<div class="tox-dialog__header"></div>'),components:[PC(u,_,Q.some(T),D),Rs(),kM(D)],containerBehaviours:sn([rg.config({mode:"mouse",blockerClass:"blocker",getTarget:B=>Ec(B,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),S5=(u,_,T)=>{const D=ka.parts.title(PC(u,_,Q.none(),T)),B=ka.parts.draghandle(Rs()),U=ka.parts.close(kM(T)),W=[D].concat(u.draggable?[B]:[]).concat([U]);return ph.sketch({dom:hd('<div class="tox-dialog__header"></div>'),components:W})},DM=(u,_,T)=>S5({title:T.shared.providers.translate(u),draggable:T.dialog.isDraggableModal()},_,T.shared.providers),RC=(u,_,T,D)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":T.translate(u)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${D.getOr(0)}px`,position:"absolute"}},behaviours:_,components:[{dom:hd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),_f=(u,_,T)=>({onClose:()=>T.closeWindow(),onBlock:D=>{const B=Ri(u().element,".tox-dialog__header").map(U=>ua(U));ka.setBusy(u(),(U,W)=>RC(D.message,W,_,B))},onUnblock:()=>{ka.setIdle(u())}}),Tb="tox-dialog--fullscreen",yt="tox-dialog--width-lg",bt="tox-dialog--width-md",cn=u=>{switch(u){case"large":return Q.some(yt);case"medium":return Q.some(bt);default:return Q.none()}},Jt=(u,_)=>{const T=Nt.fromDom(_.element.dom);ra(T,Tb)||(Vs(T,[yt,bt]),cn(u).each(D=>Di(T,D)))},jn=(u,_)=>{const T=Nt.fromDom(u.element.dom),D=uy(T),B=$e(D,U=>U===yt||U===bt).or(cn(_));bk(T,[Tb,...B.toArray()])},Qr=(u,_,T)=>as(_h({...u,firstTabstop:1,lazySink:T.shared.getSink,extraBehaviours:[Wx({}),...u.extraBehaviours],onEscape:D=>{Kr(D,zm)},dialogEvents:_,eventOrder:{[Of()]:[ho.name(),dl.name()],[Sc()]:["scroll-lock",ho.name(),"messages","dialog-events","alloy.base.behaviour"],[$h()]:["alloy.base.behaviour","dialog-events","messages",ho.name(),"scroll-lock"]}})),Si=(u,_={})=>{const T=D=>{const B=Xe(D.items,U=>{const W=Ue(_,U.name).getOr(sr(!1));return{...U,storage:W}});return{...D,items:B}};return Xe(u,D=>D.type==="menu"?T(D):D)},Hl=u=>Se(u,(_,T)=>T.type==="menu"?Se(T.items,(B,U)=>(B[U.name]=U.storage,B),_):_,{}),fs=(u,_)=>[f_(Ml(),h3),u(W1,(T,D,B,U)=>{ec($s(U.element)).fold(V,z_),_.onClose(),D.onClose()}),u(zm,(T,D,B,U)=>{D.onCancel(T),Kr(U,W1)}),Vt(hI,(T,D)=>_.onUnblock()),Vt(dI,(T,D)=>_.onBlock(D.event))],w0=(u,_)=>{const T=(B,U)=>Vt(B,(W,J)=>{D(W,(ne,se)=>{U(u(),ne,J.event,W)})}),D=(B,U)=>{ho.getState(B).get().each(W=>{U(W,B)})};return[...fs(T,_),T(ff,(B,U,W)=>{U.onAction(B,{name:W.name})})]},Iu=(u,_,T)=>{const D=(U,W)=>Vt(U,(J,ne)=>{B(J,(se,ce)=>{W(u(),se,ne.event,J)})}),B=(U,W)=>{ho.getState(U).get().each(J=>{W(J.internalDialog,U)})};return[...fs(D,_),D(Fx,(U,W)=>W.onSubmit(U)),D(Fl,(U,W,J)=>{W.onChange(U,{name:J.name})}),D(ff,(U,W,J,ne)=>{const se=()=>ne.getSystem().isConnected()?Xn.focusIn(ne):void 0,ce=xe=>GC(xe,"disabled")||Ls(xe,"aria-disabled").exists(ke=>ke==="true"),ge=$s(ne.element),ye=ec(ge);W.onAction(U,{name:J.name,value:J.value}),ec(ge).fold(se,xe=>{ce(xe)||ye.exists(ke=>wf(xe,ke)&&ce(ke))?se():T().toOptional().filter(ke=>!wf(ke.element,xe)).each(se)})}),D(yB,(U,W,J)=>{W.onTabChange(U,{newTabName:J.name,oldTabName:J.oldName})}),Ku(U=>{const W=u();Sn.setValue(U,W.getData())})]},x5=(u,_)=>E2(u,u.type,_),C5=(u,_,T)=>$e(_,D=>D.name===T).bind(D=>D.memento.getOpt(u)),w5=(u,_)=>{const T=_.map(J=>J.footerButtons).getOr([]),D=Dt(T,J=>J.align==="start"),B=(J,ne)=>ph.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${J}`]},components:Xe(ne,se=>se.memento.asSpec())}),U=B("start",D.pass),W=B("end",D.fail);return[U,W]},qL=(u,_,T)=>{const D=(B,U)=>{const W=Xe(U.buttons,ne=>{const se=Po(x5(ne,T));return{name:ne.name,align:ne.align,memento:se}}),J=ne=>C5(B,W,ne);return Q.some({lookupByName:J,footerButtons:W})};return{dom:hd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:sn([ho.config({channel:`${u2}-${_}`,initialData:u,updateState:D,renderComponents:w5})])}},dY=(u,_,T)=>qL(u,_,T),qr=(u,_,T)=>ka.parts.footer(qL(u,_,T)),Ct=(u,_)=>{if(u.getRoot().getSystem().isConnected()){const D=eo.getCurrent(u.getFormWrapper()).getOr(u.getFormWrapper());return X1.getField(D,_).orThunk(()=>u.getFooter().bind(W=>ho.getState(W).get()).bind(W=>W.lookupByName(_)))}else return Q.none()},Fn=(u,_)=>{const T=u.getRoot();return ho.getState(T).get().map(D=>Ko(yi("data",D.dataValidator,_))).getOr(_)},pr=(u,_,T)=>{const D=ke=>{const He=u.getRoot();He.getSystem().isConnected()&&ke(He)},xe={getData:()=>{const ke=u.getRoot(),He=ke.getSystem().isConnected()?u.getFormWrapper():ke,pt=Sn.getValue(He),Je=Zn(T,Ze=>Ze.get());return{...pt,...Je}},setData:ke=>{D(He=>{const pt=xe.getData(),Je=ci(pt,ke),Ze=Fn(u,Je),dt=u.getFormWrapper();Sn.setValue(dt,Ze),kn(T,(Mt,nn)=>{yn(Je,nn)&&Mt.set(Je[nn])})})},setEnabled:(ke,He)=>{Ct(u,ke).each(He?or.enable:or.disable)},focus:ke=>{Ct(u,ke).each(dr.focus)},block:ke=>{if(!g(ke))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");D(He=>{tr(He,dI,{message:ke})})},unblock:()=>{D(ke=>{Kr(ke,hI)})},showTab:ke=>{D(He=>{const pt=u.getBody();ho.getState(pt).get().exists(Ze=>Ze.isTabPanel())&&eo.getCurrent(pt).each(Ze=>{dc.showTab(Ze,ke)})})},redial:ke=>{D(He=>{const pt=u.getId(),Je=_(ke),Ze=Si(Je.internalDialog.buttons,T);He.getSystem().broadcastOn([`${Zx}-${pt}`],Je),He.getSystem().broadcastOn([`${c2}-${pt}`],Je.internalDialog),He.getSystem().broadcastOn([`${yf}-${pt}`],Je.internalDialog),He.getSystem().broadcastOn([`${u2}-${pt}`],{...Je.internalDialog,buttons:Ze}),xe.setData(Je.initialData)})},close:()=>{D(ke=>{Kr(ke,W1)})},toggleFullscreen:u.toggleFullscreen};return xe},Zi=(u,_,T)=>{const D=In("dialog"),B=u.internalDialog,U=DM(B.title,D,T),W=sr(B.size),J=cn(W.get()).toArray(),ne=(Ze,dt)=>(W.set(dt.internalDialog.size),Jt(dt.internalDialog.size,Ze),Q.some(dt)),se=Cb({body:B.body,initialData:B.initialData},D,T),ce=Si(B.buttons),ge=Hl(ce),ye=Vn(ce.length!==0,qr({buttons:ce},D,T)),xe=Iu(()=>Je,_f(()=>He,T.shared.providers,_),T.shared.getSink),ke={id:D,header:U,body:se,footer:ye,extraClasses:J,extraBehaviours:[ho.config({channel:`${Zx}-${D}`,updateState:ne,initialData:u})],extraStyles:{}},He=Qr(ke,xe,T),pt=(()=>{const Ze=()=>{const Mt=ka.getBody(He);return eo.getCurrent(Mt).getOr(Mt)},dt=()=>{jn(He,W.get())};return{getId:q(D),getRoot:q(He),getBody:()=>ka.getBody(He),getFooter:()=>ka.getFooter(He),getFormWrapper:Ze,toggleFullscreen:dt}})(),Je=pr(pt,_.redial,ge);return{dialog:He,instanceApi:Je}},Ys=(u,_,T,D=!1,B)=>{const U=In("dialog"),W=In("dialog-label"),J=In("dialog-content"),ne=u.internalDialog,se=sr(ne.size),ce=cn(se.get()).toArray(),ge=($t,un)=>(se.set(un.internalDialog.size),Jt(un.internalDialog.size,$t),B(),Q.some(un)),ye=Po(C0({title:ne.title,draggable:!0},U,W,T.shared.providers)),xe=Po(AM({body:ne.body,initialData:ne.initialData},U,J,T,D)),ke=Si(ne.buttons),He=Hl(ke),pt=Vn(ke.length!==0,Po(dY({buttons:ke},U,T))),Je=Iu(()=>nn,{onBlock:$t=>{vh.block(dt,(un,mn)=>{const Br=ye.getOpt(dt).map(An=>ua(An.element));return RC($t.message,mn,T.shared.providers,Br)})},onUnblock:()=>{vh.unblock(dt)},onClose:()=>_.closeWindow()},T.shared.getSink),dt=as({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...ce],attributes:{role:"dialog","aria-labelledby":W}},eventOrder:{[Of()]:[ho.name(),dl.name()],[kl()]:["execute-on-form"],[Sc()]:["reflecting","execute-on-form"]},behaviours:sn([Xn.config({mode:"cyclic",onEscape:$t=>(Kr($t,W1),Q.some(!0)),useTabstopAt:$t=>!jx($t)&&(Ei($t)!=="button"||ns($t,"disabled")!=="disabled"),firstTabstop:1}),ho.config({channel:`${Zx}-${U}`,updateState:ge,initialData:u}),dr.config({}),Dr("execute-on-form",Je.concat([qu(Ml(),($t,un)=>{Xn.focusIn($t)}),Vt(Lh(),($t,un)=>{$t.getSystem().broadcastOn([qx],{newFocus:un.event.newFocus})})])),vh.config({getRoot:()=>Q.some(dt)}),wr.config({}),Wx({})]),components:[ye.asSpec(),xe.asSpec(),...pt.map($t=>$t.asSpec()).toArray()]}),Mt=()=>{jn(dt,se.get())},nn=pr({getId:q(U),getRoot:q(dt),getFooter:()=>pt.map($t=>$t.get(dt)),getBody:()=>xe.get(dt),getFormWrapper:()=>{const $t=xe.get(dt);return eo.getCurrent($t).getOr($t)},toggleFullscreen:Mt},_.redial,He);return{dialog:dt,instanceApi:nn}};var jc=tinymce.util.Tools.resolve("tinymce.util.URI");const Ga=u=>{const _=W=>{u.getSystem().isConnected()&&W(u)};return{block:W=>{if(!g(W))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");_(J=>{tr(J,dI,{message:W})})},unblock:()=>{_(W=>{Kr(W,hI)})},close:()=>{_(W=>{Kr(W,W1)})},sendMessage:W=>{_(J=>{J.getSystem().broadcastOn([HI],W)})}}},Td=["insertContent","setContent","execCommand","close","block","unblock"],PM=u=>y(u)&&Td.indexOf(u.mceAction)!==-1,hY=u=>!PM(u)&&y(u)&&yn(u,"mceAction"),E5=(u,_,T)=>{switch(T.mceAction){case"insertContent":u.insertContent(T.content);break;case"setContent":u.setContent(T.content);break;case"execCommand":const D=c(T.ui)?T.ui:!1;u.execCommand(T.cmd,D,T.value);break;case"close":_.close();break;case"block":_.block(T.message);break;case"unblock":_.unblock();break}},Ej=(u,_,T,D)=>{const B=In("dialog"),U=DM(u.title,B,D),W=MM(u),J=u.buttons.bind(dt=>dt.length===0?Q.none():Q.some(qr({buttons:dt},B,D))),ne=w0(()=>Ze,_f(()=>Je,D.shared.providers,_)),se={...u.height.fold(()=>({}),dt=>({height:dt+"px","max-height":dt+"px"})),...u.width.fold(()=>({}),dt=>({width:dt+"px","max-width":dt+"px"}))},ce=u.width.isNone()&&u.height.isNone()?["tox-dialog--width-lg"]:[],ge=new jc(u.url,{base_uri:new jc(window.location.href)}),ye=`${ge.protocol}://${ge.host}${ge.port?":"+ge.port:""}`,xe=om(),ke=(dt,Mt)=>Q.some(Mt),He=[ho.config({channel:`${Zx}-${B}`,updateState:ke,initialData:u}),Dr("messages",[ii(()=>{const dt=Fa(Nt.fromDom(window),"message",Mt=>{if(ge.isSameOrigin(new jc(Mt.raw.origin))){const nn=Mt.raw.data;PM(nn)?E5(T,Ze,nn):hY(nn)&&u.onMessage(Ze,nn)}});xe.set(dt)}),Ku(xe.clear)]),dl.config({channels:{[HI]:{onReceive:(dt,Mt)=>{Ri(dt.element,"iframe").each(nn=>{const $t=nn.dom.contentWindow;L($t)&&$t.postMessage(Mt,ye)})}}}})],Je=Qr({id:B,header:U,body:W,footer:J,extraClasses:ce,extraBehaviours:He,extraStyles:se},ne,D),Ze=Ga(Je);return{dialog:Je,instanceApi:Ze}},jj=u=>{const _=u.shared;return{open:(D,B)=>{const U=()=>{ka.hide(se),B()},W=Po(E2({name:"close-alert",text:"OK",primary:!0,buttonType:Q.some("primary"),align:"end",enabled:!0,icon:Q.none()},"cancel",u)),J=bh(),ne=Ed(U,_.providers),se=as(_h({lazySink:()=>_.getSink(),header:ig(J,ne),body:Eb(D,_.providers),footer:Q.some(x0(DC([],[W.asSpec()]))),onEscape:U,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Vt(zm,U)],eventOrder:{}}));ka.show(se);const ce=W.get(se);dr.focus(ce)}}},Zj=u=>{const _=u.shared;return{open:(D,B)=>{const U=ye=>{ka.hide(ce),B(ye)},W=Po(E2({name:"yes",text:"Yes",primary:!0,buttonType:Q.some("primary"),align:"end",enabled:!0,icon:Q.none()},"submit",u)),J=E2({name:"no",text:"No",primary:!1,buttonType:Q.some("secondary"),align:"end",enabled:!0,icon:Q.none()},"cancel",u),ne=bh(),se=Ed(()=>U(!1),_.providers),ce=as(_h({lazySink:()=>_.getSink(),header:ig(ne,se),body:Eb(D,_.providers),footer:Q.some(x0(DC([],[J,W.asSpec()]))),onEscape:()=>U(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Vt(zm,()=>U(!1)),Vt(Fx,()=>U(!0))],eventOrder:{}}));ka.show(ce);const ge=W.get(ce);dr.focus(ge)}}},Tj=(u,_)=>Ko(yi("data",_,u)),Aj=u=>Lx(u,".tox-alert-dialog")||Lx(u,".tox-confirm-dialog"),qj=(u,_,T)=>_&&T?[]:[ji.config({contextual:{lazyContext:()=>Q.some(Bi(Nt.fromDom(u.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:D=>Vm(u,D.element).map(U=>({bounds:G1(U),optScrollEnv:Q.some({currentScrollTop:U.element.dom.scrollTop,scrollElmTop:Oi(U.element).top})})).getOrThunk(()=>({bounds:gs(),optScrollEnv:Q.none()}))})],Kj=u=>{const _=u.editor,T=vx(_),D=jj(u.backstages.dialog),B=Zj(u.backstages.dialog),U=(ke,He,pt)=>{if(!A(He)){if(He.inline==="toolbar")return se(ke,u.backstages.popup.shared.anchors.inlineDialog(),pt,He);if(He.inline==="bottom")return ce(ke,u.backstages.popup.shared.anchors.inlineBottomDialog(),pt,He);if(He.inline==="cursor")return se(ke,u.backstages.popup.shared.anchors.cursor(),pt,He)}return ne(ke,pt)},W=(ke,He)=>J(ke,He),J=(ke,He)=>{const pt=Je=>{const Ze=Ej(Je,{closeWindow:()=>{ka.hide(Ze.dialog),He(Ze.instanceApi)}},_,u.backstages.dialog);return ka.show(Ze.dialog),Ze.instanceApi};return At.openUrl(pt,ke)},ne=(ke,He)=>{const pt=(Je,Ze,dt)=>{const Mt=Ze,$t=Zi({dataValidator:dt,initialData:Mt,internalDialog:Je},{redial:At.redial,closeWindow:()=>{ka.hide($t.dialog),He($t.instanceApi)}},u.backstages.dialog);return ka.show($t.dialog),$t.instanceApi.setData(Mt),$t.instanceApi};return At.open(pt,ke)},se=(ke,He,pt,Je)=>{const Ze=(dt,Mt,nn)=>{const $t=Tj(Mt,nn),un=ai(),mn=u.backstages.popup.shared.header.isPositionedAtTop(),Br={dataValidator:nn,initialData:$t,internalDialog:dt},An=()=>un.on(lr=>{fi.reposition(lr),(!T||!mn)&&ji.refresh(lr)}),yr=Ys(Br,{redial:At.redial,closeWindow:()=>{un.on(fi.hide),_.off("ResizeEditor",An),un.clear(),pt(yr.instanceApi)}},u.backstages.popup,Je.ariaAttrs,An),mr=as(fi.sketch({lazySink:u.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Je.persistent?{event:"doNotDismissYet"}:{},...mn?{}:{fireRepositionEventInstead:{}},inlineBehaviours:sn([Dr("window-manager-inline-events",[Vt(Zu(),(lr,mo)=>{Kr(yr.dialog,zm)})]),...qj(_,T,mn)]),isExtraPart:(lr,mo)=>Aj(mo)}));un.set(mr);const $o=()=>{const lr=_.inline?ta():Nt.fromDom(_.getContainer()),mo=Bi(lr);return Q.some(mo)};return fi.showWithinBounds(mr,Pl(yr.dialog),{anchor:He},$o),(!T||!mn)&&(ji.refresh(mr),_.on("ResizeEditor",An)),yr.instanceApi.setData($t),Xn.focusIn(yr.dialog),yr.instanceApi};return At.open(Ze,ke)},ce=(ke,He,pt,Je)=>{const Ze=(dt,Mt,nn)=>{const $t=Tj(Mt,nn),un=ai(),mn=u.backstages.popup.shared.header.isPositionedAtTop(),Br={dataValidator:nn,initialData:$t,internalDialog:dt},An=()=>un.on(lr=>{fi.reposition(lr),ji.refresh(lr)}),yr=Ys(Br,{redial:At.redial,closeWindow:()=>{un.on(fi.hide),_.off("ResizeEditor ScrollWindow ElementScroll",An),un.clear(),pt(yr.instanceApi)}},u.backstages.popup,Je.ariaAttrs,An),mr=as(fi.sketch({lazySink:u.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Je.persistent?{event:"doNotDismissYet"}:{},...mn?{}:{fireRepositionEventInstead:{}},inlineBehaviours:sn([Dr("window-manager-inline-events",[Vt(Zu(),(lr,mo)=>{Kr(yr.dialog,zm)})]),ji.config({contextual:{lazyContext:()=>Q.some(Bi(Nt.fromDom(_.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:lr=>Vm(_,lr.element).map(pn=>({bounds:G1(pn),optScrollEnv:Q.some({currentScrollTop:pn.element.dom.scrollTop,scrollElmTop:Oi(pn.element).top})})).getOrThunk(()=>({bounds:gs(),optScrollEnv:Q.none()}))})]),isExtraPart:(lr,mo)=>Aj(mo)}));un.set(mr);const $o=()=>u.backstages.popup.shared.getSink().toOptional().bind(lr=>{const mo=Vm(_,lr.element),pn=15,On=mo.map(ur=>G1(ur)).getOr(gs()),br=Bi(Nt.fromDom(_.getContentAreaContainer())),Sr=Ld(br,On);return Q.some(ha(Sr.x,Sr.y,Sr.width,Sr.height-pn))});return fi.showWithinBounds(mr,Pl(yr.dialog),{anchor:He},$o),ji.refresh(mr),_.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",An),yr.instanceApi.setData($t),Xn.focusIn(yr.dialog),yr.instanceApi};return At.open(Ze,ke)};return{open:U,openUrl:W,alert:(ke,He)=>{D.open(ke,He)},close:ke=>{ke.close()},confirm:(ke,He)=>{B.open(ke,He)}}},Xj=u=>{rA(u),Lz(u),VW(u)};var Jj=()=>{pc.add("silver",u=>{Xj(u);let _=()=>gs();const{dialogs:T,popups:D,renderUI:B}=B9(u,{getPopupSinkBounds:()=>_()}),U=()=>{const ne=B();return Vm(u,D.getMothership().element).each(ce=>{_=()=>G1(ce)}),ne};E6.register(u,D.backstage.shared);const W=Kj({editor:u,backstages:{popup:D.backstage,dialog:T.backstage}}),J=()=>$m(u,{backstage:D.backstage},D.getMothership());return{renderUI:U,getWindowManagerImpl:q(W),getNotificationManagerImpl:J}})};Jj()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});const setArticle=r=>request({url:"/admin/setarticle",method:"post",data:r}),showArticle=r=>request({url:"/admin/showArticle",method:"post",data:{a_id:r}}),deleteArticle=r=>request({url:"/admin/deleteArticle",method:"post",data:r}),getUser=()=>request({url:"/admin/getUser"}),setUserLogin=r=>request({url:"/admin/setUserLogin",method:"post",data:r}),wrtieArticle_vue_vue_type_style_index_0_scoped_32d39c8a_lang="",wrtieArticle_vue_vue_type_style_index_1_lang="",_withScopeId$1=r=>(pushScopeId("data-v-32d39c8a"),r=r(),popScopeId(),r),_hoisted_1$5={class:"item"},_hoisted_2$5=_withScopeId$1(()=>createBaseVNode("span",null,"文章名称:",-1)),_hoisted_3$1={class:"item"},_hoisted_4$1=_withScopeId$1(()=>createBaseVNode("span",null,"文章作者:",-1)),_hoisted_5$1={class:"item"},_hoisted_6$1=_withScopeId$1(()=>createBaseVNode("span",null,"文章分类:",-1)),_hoisted_7$1={id:"span_tag"},_hoisted_8=["name","onClick"],_sfc_main$8={__name:"wrtieArticle",setup(r){let t=reactive({title:"",type:[],writer:"",valueHtml:""}),n=ref(!1),o=ref([]),a=ref([]);const{proxy:l}=getCurrentInstance();onMounted(()=>{tinymce$1.init({})});const d=[];for(var g=0;g<50;g++)d.push({name:`tag${g}`,msg:`tag${g}`});const y={placeholder:"在这里输入内容",height:350,language_url:"/tinymce/langs/zh-Hans.js",language:"zh-Hans",plugins:"link lists image code table autolink advlist autolink  autosave emoticons codesample fullscreen preview quickbars",statusbar:!1,toolbar:"undo redo fontfamily fontsize fontname bold italic underline strikethrough | fontsizeselect | forecolor | alignment |numlist bullist | emoticons fullscreen quickimage codesample ",toolbar_groups:{alignment:{icon:"align-left",tooltip:"对齐方式",items:"alignleft aligncenter alignright"}},selector:"textarea",contextmenu:"link image imagetools table spellchecker",font_size_formats:"11px 12px 14px 16px 18px 24px 36px 48px",menubar:"file edit insert view format table tools help",block_formats:"Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3",menu:{file:{title:"文件",items:"newdocument"},edit:{title:"编辑",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"插入",items:"link image  |  hr emoticons"},view:{title:"查看",items:"visualaid"},format:{title:"格式",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"表格",items:"inserttable tableprops deletetable | cell row column"},tools:{title:"工具",items:"spellchecker code"}},custom_undo_redo_levels:10,max_height:500,autosave_interval:"60s",autosave_retention:"30m",image_caption:!0,paste_webkit_styles:"color font-size",smart_paste:!1,quickbars_image_toolbar:!1,quickbars_insert_toolbar:!1,nonbreaking_force_tab:!0};watchEffect(()=>{console.log(a.value)}),onMounted(()=>{}),onBeforeUnmount(()=>{tinymce$1.remove()});const S=()=>{t.type=a.value,console.log(t),setArticle(t).then(c=>{c.data.code===0&&l.$Notice.info({title:"提示",desc:c.data.message}),t.title="",t.type=[],t.valueHtml="",t.writer=""})},x=()=>{n.value=!0},w=async c=>{if(a.value.length===0)a.value.push(c);else{let $=!1;a.value=a.value.filter(O=>{if(O!==c)return O;O===c&&($=!0)}),$===!1&&a.value.push(c)}a.value.length>4&&a.value.shift();let R=document.getElementById("span_tag").children;for(let $=0;$<R.length;$++)R[$].classList.remove("tag-active");var L;for(L=0;L<R.length;L++)a.value.forEach($=>{R[L].getAttribute("name")===$&&R[L].classList.add("tag-active")})};return(c,A)=>{const R=resolveComponent("Input"),L=resolveComponent("Tag"),$=resolveComponent("Button"),O=resolveComponent("TabPane"),z=resolveComponent("TagSelectOption"),V=resolveComponent("TagSelect"),j=resolveComponent("Tabs"),K=resolveComponent("Divider");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$5,[_hoisted_2$5,createVNode$1(R,{modelValue:unref(t).title,"onUpdate:modelValue":A[0]||(A[0]=Z=>unref(t).title=Z),placeholder:"请输入;",class:"input"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_3$1,[_hoisted_4$1,createVNode$1(R,{modelValue:unref(t).writer,"onUpdate:modelValue":A[1]||(A[1]=Z=>unref(t).writer=Z),placeholder:"请输入",class:"input"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_5$1,[_hoisted_6$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),Z=>(openBlock(),createBlock(L,{key:Z}))),128)),createVNode$1($,{icon:"ios-add",size:"small",type:"dashed",style:{"margin-left":"7px"},onClick:x},{default:withCtx(()=>[createTextVNode("添加标签")]),_:1}),withDirectives(createVNode$1(j,{value:"name1",style:{width:"500px"}},{default:withCtx(()=>[createVNode$1(O,{label:"标签二",name:"name2"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$1,[(openBlock(),createElementBlock(Fragment,null,renderList(d,(Z,q)=>createBaseVNode("span",{key:q,name:Z.name,class:"span_tag",onClick:ie=>w(Z.name)},toDisplayString(Z.msg),9,_hoisted_8)),64))])]),_:1}),createVNode$1(O,{label:"标签三",name:"name3"},{default:withCtx(()=>[createVNode$1(V,{modelValue:unref(a),"onUpdate:modelValue":A[2]||(A[2]=Z=>isRef(a)?a.value=Z:a=Z),"hide-check-all":""},{default:withCtx(()=>[createVNode$1(z,{name:"tag7"},{default:withCtx(()=>[createTextVNode("选项一")]),_:1}),createVNode$1(z,{name:"tag8"},{default:withCtx(()=>[createTextVNode("选项二")]),_:1}),createVNode$1(z,{name:"tag9"},{default:withCtx(()=>[createTextVNode("选项三")]),_:1}),createVNode$1(z,{name:"tag10"},{default:withCtx(()=>[createTextVNode("选项四")]),_:1}),createVNode$1(z,{name:"tag11"},{default:withCtx(()=>[createTextVNode("选项五")]),_:1}),createVNode$1(z,{name:"tag12"},{default:withCtx(()=>[createTextVNode("选项六")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},512),[[vShow,unref(n)==!0]])]),createVNode$1(K,{orientation:"left",plain:!0},{default:withCtx(()=>[createTextVNode("文章详情")]),_:1}),createVNode$1(unref(Editor),{init:y,modelValue:unref(t).valueHtml,"onUpdate:modelValue":A[3]||(A[3]=Z=>unref(t).valueHtml=Z)},{default:withCtx(()=>[createTextVNode("Hello, World!")]),_:1},8,["modelValue"]),createVNode$1($,{type:"primary",style:{"margin-left":"10px","margin-top":"10px"},onClick:S},{default:withCtx(()=>[createTextVNode("submit")]),_:1})],64)}}},wrtieArticle=_export_sfc(_sfc_main$8,[["__scopeId","data-v-32d39c8a"]]),_hoisted_1$4={style:{"margin-top":"10px","margin-left":"10px","margin-right":"10px"}},_hoisted_2$4=["onClick"],_sfc_main$7={__name:"articleStatus",setup(r){const t=ref([]),n=ref(""),o=ref(!1),a=[{title:"title",key:"title",type:"html",ellipsis:!0},{title:"id",key:"id"},{title:"time",key:"date",ellipsis:!0},{title:"type",slot:"type",ellipsis:!0},{title:"detail",slot:"detail"},{title:"status",align:"center",slot:"show"},{title:"action",slot:"action",align:"center",ellipsis:!0}],{proxy:l}=getCurrentInstance(),d=()=>{getNewArticle().then(w=>{let c=w.data.data,A;A=c.filter(R=>{if(R.id!==0)return R}),t.value=A})},g=w=>{showArticle(w).then(c=>{S(c.data.message)}),d()},y=w=>{let c={a_id:w.id,a_type:w.type};deleteArticle(c).then(A=>{console.log(A),S(A.data.message),d()})},S=w=>{l.$Notice.info({title:"提示",desc:w})},x=w=>{o.value=!0,console.log(w),getArticle(w).then(c=>{console.log(c.data.data),n.value=c.data.data})};return onMounted(()=>{d()}),(w,c)=>{const A=resolveComponent("Button"),R=resolveComponent("Tag"),L=resolveComponent("Modal"),$=resolveComponent("Table");return openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode$1($,{columns:a,data:t.value,border:!1,stripe:!0,"disabled-hover":!0},{action:withCtx(({row:O})=>[createVNode$1(A,{type:"primary",style:{"margin-right":"5px"},onClick:z=>g(O.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(O.show===1?"下线":"上线"),1)]),_:2},1032,["onClick"]),createVNode$1(A,{type:"error",onClick:z=>y(O)},{default:withCtx(()=>[createTextVNode("删除")]),_:2},1032,["onClick"])]),show:withCtx(({row:O})=>[createVNode$1(R,{type:"dot",color:O.show===1?"success":"default",size:"large"},{default:withCtx(()=>[createTextVNode(toDisplayString(O.show===1?"已上线":"未上线"),1)]),_:2},1032,["color"])]),detail:withCtx(({row:O})=>[createBaseVNode("a",{type:"primary",onClick:z=>x(O.id)},"文章详情",8,_hoisted_2$4),createVNode$1(L,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=z=>o.value=z),"footer-hide":!0,width:777},{default:withCtx(()=>[createVNode$1(_sfc_main$k,{article:n.value},null,8,["article"])]),_:1},8,["modelValue"])]),type:withCtx(({row:O})=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(O.type,z=>(openBlock(),createBlock(R,{key:z},{default:withCtx(()=>[createTextVNode(toDisplayString(z),1)]),_:2},1024))),128))]),_:1},8,["data"])])}}},_sfc_main$6={__name:"user",setup(r){const t=[{title:"username",key:"username",ellipsis:!0},{title:"ip",key:"ip",ellipsis:!0},{title:"age",key:"age"},{title:"nikename",key:"nikename"},{title:"phone",key:"phone"},{title:"loginStatus",key:"login",slot:"loginStatus"},{title:"action",slot:"action"}];let n=ref([]);onMounted(()=>{o()});const o=()=>{getUser().then(l=>{let d=l.data.data;console.log(d),n.value=d})},a=(l,d)=>{setUserLogin({username:l,login:d}).then(y=>{console.log(y)})};return(l,d)=>{const g=resolveComponent("Tag"),y=resolveComponent("Button"),S=resolveComponent("Table");return openBlock(),createElementBlock("div",null,[createVNode$1(S,{columns:t,data:unref(n),border:!1,stripe:!0,"disabled-hover":!0},{loginStatus:withCtx(({row:x})=>[createVNode$1(g,{type:"dot",color:x.login===0?"success":"error",size:"large"},{default:withCtx(()=>[createTextVNode(toDisplayString(x.login===0?"正常":"封停"),1)]),_:2},1032,["color"])]),action:withCtx(({row:x})=>[createVNode$1(y,{type:"primary",onClick:w=>a(x.username,x.login)},{default:withCtx(()=>[createTextVNode(toDisplayString(x.login===0?"封停":"恢复"),1)]),_:2},1032,["onClick"])]),_:1},8,["data"])])}}},_sfc_main$5={__name:"echartTable",setup(r){const t=ref(""),{proxy:n}=getCurrentInstance();var o;return o={tooltip:{},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}],darkMode:!0},onMounted(()=>{var a=n.$echarts.init(t.value,"dark");a.setOption(o)}),(a,l)=>(openBlock(),createElementBlock("div",{ref_key:"echarts",ref:t,style:{width:"500px",height:"500px"}},null,512))}},_sfc_main$4={__name:"log_pageView",setup(r){return(t,n)=>(openBlock(),createBlock(_sfc_main$5))}},adminRouter=[{path:"/admin",component:Admin,redirect:"/admin/editArticle",children:[{path:"editArticle",component:wrtieArticle},{path:"articleStatus",component:_sfc_main$7},{path:"user",component:_sfc_main$6},{path:"log",component:_sfc_main$4}]}],user_vue_vue_type_style_index_0_lang="",_sfc_main$3={},_hoisted_1$3={class:"card"},_hoisted_2$3={class:"card-header"},_hoisted_3=createBaseVNode("h2",null,"John Doe",-1),_hoisted_4=createBaseVNode("p",null,"Web Developer",-1),_hoisted_5=createBaseVNode("div",{class:"card-body"},[createBaseVNode("p",null,[createBaseVNode("strong",null,"Email:"),createTextVNode(" john.doe@example.com")]),createBaseVNode("p",null,[createBaseVNode("strong",null,"Phone:"),createTextVNode(" +1 (123) 456-7890")]),createBaseVNode("p",null,[createBaseVNode("strong",null,"nikename:")])],-1),_hoisted_6={style:{"margin-left":"15px"}},_hoisted_7=createBaseVNode("div",null,null,-1);function _sfc_render(r,t){const n=resolveComponent("Avatar"),o=resolveComponent("Time"),a=resolveComponent("router-link"),l=resolveComponent("Icon"),d=resolveComponent("Card"),g=resolveComponent("Col"),y=resolveComponent("Row");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createVNode$1(n,{icon:"ios-person",class:"Img"}),_hoisted_3,_hoisted_4]),_hoisted_5]),createVNode$1(y,{gutter:16,warp:!0},{default:withCtx(()=>[createVNode$1(g,{span:"6",xs:24,sm:16,md:16,lg:6,xl:6},{default:withCtx(()=>[createVNode$1(d,{class:"card"},{extra:withCtx(()=>[createVNode$1(l,{type:"ios-close",size:"24",style:{top:"-13px",right:"-10px",position:"absolute",cursor:"pointer"}})]),default:withCtx(()=>[createVNode$1(n,{icon:"ios-person"}),createVNode$1(o,{time:new Date().getTime()-86400*3*1e3,type:"date"},null,8,["time"]),createBaseVNode("p",_hoisted_6,[createVNode$1(a,{to:`/mail/${r.mail}`},{default:withCtx(()=>[createTextVNode(toDisplayString(r.mail),1)]),_:1},8,["to"]),createVNode$1(l,{type:"ios-more",size:"24",style:{right:"40px",position:"absolute",cursor:"pointer"}})])]),_:1})]),_:1})]),_:1}),_hoisted_7],64)}const user=_export_sfc(_sfc_main$3,[["render",_sfc_render]]),_imports_0="/assets/login-77391a03.svg",_imports_1="/assets/logo-277e0e97.svg",useLoadingStore=defineStore("loading",()=>{const r=ref(!1);return{setloading:n=>{r.value=n},loading:r}},{persist:{storage:sessionStorage}}),loading_vue_vue_type_style_index_0_scoped_f2c56941_lang="",_hoisted_1$2={class:"loading"},_hoisted_2$2=createStaticVNode('<div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div><div class="dot" data-v-f2c56941></div>',30),_hoisted_32=[_hoisted_2$2],_sfc_main$2={__name:"loading",setup(r){const{proxy:t}=getCurrentInstance();return t.$nextTick(()=>{let n=document.querySelectorAll(".dot"),o=360/n.length;n.forEach((a,l)=>{a.style.transform=`rotate(${o*l}deg)`;let d=`-${2/30*l*7}s`;a.style.setProperty("--animation-delay",d)})}),(n,o)=>(openBlock(),createElementBlock("div",_hoisted_1$2,_hoisted_32))}},loading=_export_sfc(_sfc_main$2,[["__scopeId","data-v-f2c56941"]]),getFooter=()=>request({url:"/getFooter"}),Footer_vue_vue_type_style_index_0_scoped_665665d5_lang="",_hoisted_1$1={class:"footer"},_hoisted_2$1={class:"icp"},_sfc_main$1={__name:"Footer",setup(__props){const footer=ref([]),icp=ref("Copyright@he");return getFooter().then(res=>{footer.value=eval("("+res.data.data+")")}).catch(r=>{console.log(r)}),(r,t)=>{const n=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(footer.value,o=>(openBlock(),createElementBlock("div",{key:o.name,class:"footer-div"},[createTextVNode(toDisplayString(o.name)+":",1),createVNode$1(n,{to:o.src},{default:withCtx(()=>[createTextVNode(toDisplayString(o.text),1)]),_:2},1032,["to"])]))),128)),createBaseVNode("div",_hoisted_2$1,toDisplayString(icp.value),1)])}}},Footer=_export_sfc(_sfc_main$1,[["__scopeId","data-v-665665d5"]]),layout_vue_vue_type_style_index_0_scoped_09c1ecf0_lang="",_withScopeId=r=>(pushScopeId("data-v-09c1ecf0"),r=r(),popScopeId(),r),_hoisted_1={key:0,class:"loading"},_hoisted_2=_withScopeId(()=>createBaseVNode("div",{class:"g-img"},[createBaseVNode("img",{src:_imports_0,alt:""}),createBaseVNode("img",{src:_imports_1,alt:""})],-1)),_sfc_main={__name:"layout",setup(r){const t=useLoadingStore(),n=computed(()=>t.loading);return(o,a)=>(openBlock(),createElementBlock(Fragment,null,[n.value?(openBlock(),createElementBlock("div",_hoisted_1,[createVNode$1(loading)])):createCommentVNode("",!0),_hoisted_2,createVNode$1(Nav),createVNode$1(unref(RouterView)),createVNode$1(Footer)],64))}},layout$4=_export_sfc(_sfc_main,[["__scopeId","data-v-09c1ecf0"]]);let routes=[{path:"/",redirect:"/layout"},{path:"/layout",component:layout$4,redirect:"/layout/index",children:[{path:"index",component:index},{path:"about",name:"about"},{path:"article/:id",component:article},{path:"articles",component:_sfc_main$i},{path:"getArticleBytype",component:_sfc_main$h},{path:"regist",component:regist},{path:"user",component:user},{path:"mail",component:Mail},{path:"mail/:id",component:MailDetail}]},{path:"/:pathMatch(.*)",redirect:"/404"},{path:"/404",component:_sfc_main$m},{path:"/login",component:login},...adminRouter];const router=createRouter({BASE_URL:"./dist",history:createWebHistory("/"),routes}),viewuiplus$1="";function isObject$4(r){return typeof r=="object"&&r!==null}function normalizeOptions(r,t){return r=isObject$4(r)?r:Object.create(null),new Proxy(r,{get(n,o,a){return o==="key"?Reflect.get(n,o,a):Reflect.get(n,o,a)||Reflect.get(t,o,a)}})}function get$1(r,t){return t.reduce((n,o)=>n==null?void 0:n[o],r)}function set$2(r,t,n){return t.slice(0,-1).reduce((o,a)=>/^(__proto__)$/.test(a)?{}:o[a]=o[a]||{},r)[t[t.length-1]]=n,r}function pick(r,t){return t.reduce((n,o)=>{const a=o.split(".");return set$2(n,a,get$1(r,a))},{})}function hydrateStore(r,{storage:t,serializer:n,key:o,debug:a}){try{const l=t==null?void 0:t.getItem(o);l&&r.$patch(n==null?void 0:n.deserialize(l))}catch(l){a&&console.error(l)}}function persistState(r,{storage:t,serializer:n,key:o,paths:a,debug:l}){try{const d=Array.isArray(a)?pick(r,a):r;t.setItem(o,n.serialize(d))}catch(d){l&&console.error(d)}}function createPersistedState(r={}){return t=>{const{auto:n=!1}=r,{options:{persist:o=n},store:a,pinia:l}=t;if(!o)return;if(!(a.$id in l.state.value)){const g=l._s.get(a.$id.replace("__hot:",""));g&&Promise.resolve().then(()=>g.$persist());return}const d=(Array.isArray(o)?o.map(g=>normalizeOptions(g,r)):[normalizeOptions(o,r)]).map(({storage:g=localStorage,beforeRestore:y=null,afterRestore:S=null,serializer:x={serialize:JSON.stringify,deserialize:JSON.parse},key:w=a.$id,paths:c=null,debug:A=!1})=>{var R;return{storage:g,beforeRestore:y,afterRestore:S,serializer:x,key:((R=r.key)!=null?R:L=>L)(typeof w=="string"?w:w(a.$id)),paths:c,debug:A}});a.$persist=()=>{d.forEach(g=>{persistState(a.$state,g)})},a.$hydrate=({runHooks:g=!0}={})=>{d.forEach(y=>{const{beforeRestore:S,afterRestore:x}=y;g&&(S==null||S(t)),hydrateStore(a,y),g&&(x==null||x(t))})},d.forEach(g=>{const{beforeRestore:y,afterRestore:S}=g;y==null||y(t),hydrateStore(a,g),S==null||S(t),a.$subscribe((x,w)=>{persistState(w,g)},{detached:!0})})}}var src_default=createPersistedState();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},extendStatics(r,t)};function __extends(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Browser=function(){function r(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return r}(),Env=function(){function r(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return r}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:typeof navigator>"u"?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(r,t){var n=t.browser,o=r.match(/Firefox\/([\d.]+)/),a=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),l=r.match(/Edge?\/([\d.]+)/),d=/micromessenger/i.test(r);o&&(n.firefox=!0,n.version=o[1]),a&&(n.ie=!0,n.version=a[1]),l&&(n.edge=!0,n.version=l[1],n.newEdge=+l[1].split(".")[0]>18),d&&(n.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,t.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),t.domSupported=typeof document<"u";var g=document.documentElement.style;t.transform3dSupported=(n.ie&&"transition"in g||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in g)&&!("OTransition"in g),t.transformSupported=t.transform3dSupported||n.ie&&+n.version>=9}const env$1=env;var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(r){var t={};if(typeof JSON>"u")return t;for(var n=0;n<r.length;n++){var o=String.fromCharCode(n+32),a=(r.charCodeAt(n)-OFFSET)/SCALE;t[o]=a}return t}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var r,t;return function(n,o){if(!r){var a=platformApi.createCanvas();r=a&&a.getContext("2d")}if(r)return t!==o&&(t=r.font=o||DEFAULT_FONT),r.measureText(n);n=n||"",o=o||DEFAULT_FONT;var l=/(\d+)px/.exec(o),d=l&&+l[1]||DEFAULT_FONT_SIZE,g=0;if(o.indexOf("mono")>=0)g=d*n.length;else for(var y=0;y<n.length;y++){var S=DEFAULT_TEXT_WIDTH_MAP[n[y]];g+=S==null?d:S*d}return{width:g}}}(),loadImage:function(r,t,n){var o=new Image;return o.onload=t,o.onerror=n,o.src=r,o}};function setPlatformAPI(r){for(var t in platformApi)r[t]&&(platformApi[t]=r[t])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(r,t){return r["[object "+t+"]"]=!0,r},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(r,t){return r["[object "+t+"Array]"]=!0,r},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];typeof console<"u"&&console.error.apply(console,r)}function clone$4(r){if(r==null||typeof r!="object")return r;var t=r,n=objToString.call(r);if(n==="[object Array]"){if(!isPrimitive(r)){t=[];for(var o=0,a=r.length;o<a;o++)t[o]=clone$4(r[o])}}else if(TYPED_ARRAY[n]){if(!isPrimitive(r)){var l=r.constructor;if(l.from)t=l.from(r);else{t=new l(r.length);for(var o=0,a=r.length;o<a;o++)t[o]=r[o]}}}else if(!BUILTIN_OBJECT[n]&&!isPrimitive(r)&&!isDom(r)){t={};for(var d in r)r.hasOwnProperty(d)&&d!==protoKey&&(t[d]=clone$4(r[d]))}return t}function merge(r,t,n){if(!isObject$3(t)||!isObject$3(r))return n?clone$4(t):r;for(var o in t)if(t.hasOwnProperty(o)&&o!==protoKey){var a=r[o],l=t[o];isObject$3(l)&&isObject$3(a)&&!isArray$1(l)&&!isArray$1(a)&&!isDom(l)&&!isDom(a)&&!isBuiltInObject(l)&&!isBuiltInObject(a)&&!isPrimitive(l)&&!isPrimitive(a)?merge(a,l,n):(n||!(o in r))&&(r[o]=clone$4(t[o]))}return r}function mergeAll(r,t){for(var n=r[0],o=1,a=r.length;o<a;o++)n=merge(n,r[o],t);return n}function extend(r,t){if(Object.assign)Object.assign(r,t);else for(var n in t)t.hasOwnProperty(n)&&n!==protoKey&&(r[n]=t[n]);return r}function defaults(r,t,n){for(var o=keys(t),a=0;a<o.length;a++){var l=o[a];(n?t[l]!=null:r[l]==null)&&(r[l]=t[l])}return r}var createCanvas=platformApi.createCanvas;function indexOf(r,t){if(r){if(r.indexOf)return r.indexOf(t);for(var n=0,o=r.length;n<o;n++)if(r[n]===t)return n}return-1}function inherits(r,t){var n=r.prototype;function o(){}o.prototype=t.prototype,r.prototype=new o;for(var a in n)n.hasOwnProperty(a)&&(r.prototype[a]=n[a]);r.prototype.constructor=r,r.superClass=t}function mixin(r,t,n){if(r="prototype"in r?r.prototype:r,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var o=Object.getOwnPropertyNames(t),a=0;a<o.length;a++){var l=o[a];l!=="constructor"&&(n?t[l]!=null:r[l]==null)&&(r[l]=t[l])}else defaults(r,t,n)}function isArrayLike(r){return!r||typeof r=="string"?!1:typeof r.length=="number"}function each$f(r,t,n){if(r&&t)if(r.forEach&&r.forEach===nativeForEach)r.forEach(t,n);else if(r.length===+r.length)for(var o=0,a=r.length;o<a;o++)t.call(n,r[o],o,r);else for(var l in r)r.hasOwnProperty(l)&&t.call(n,r[l],l,r)}function map$1(r,t,n){if(!r)return[];if(!t)return slice(r);if(r.map&&r.map===nativeMap)return r.map(t,n);for(var o=[],a=0,l=r.length;a<l;a++)o.push(t.call(n,r[a],a,r));return o}function reduce(r,t,n,o){if(r&&t){for(var a=0,l=r.length;a<l;a++)n=t.call(o,n,r[a],a,r);return n}}function filter(r,t,n){if(!r)return[];if(!t)return slice(r);if(r.filter&&r.filter===nativeFilter)return r.filter(t,n);for(var o=[],a=0,l=r.length;a<l;a++)t.call(n,r[a],a,r)&&o.push(r[a]);return o}function find(r,t,n){if(r&&t){for(var o=0,a=r.length;o<a;o++)if(t.call(n,r[o],o,r))return r[o]}}function keys(r){if(!r)return[];if(Object.keys)return Object.keys(r);var t=[];for(var n in r)r.hasOwnProperty(n)&&t.push(n);return t}function bindPolyfill(r,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return function(){return r.apply(t,n.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return r.apply(this,t.concat(nativeSlice.call(arguments)))}}function isArray$1(r){return Array.isArray?Array.isArray(r):objToString.call(r)==="[object Array]"}function isFunction(r){return typeof r=="function"}function isString(r){return typeof r=="string"}function isStringSafe(r){return objToString.call(r)==="[object String]"}function isNumber(r){return typeof r=="number"}function isObject$3(r){var t=typeof r;return t==="function"||!!r&&t==="object"}function isBuiltInObject(r){return!!BUILTIN_OBJECT[objToString.call(r)]}function isTypedArray(r){return!!TYPED_ARRAY[objToString.call(r)]}function isDom(r){return typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.ownerDocument=="object"}function isGradientObject(r){return r.colorStops!=null}function isImagePatternObject(r){return r.image!=null}function isRegExp(r){return objToString.call(r)==="[object RegExp]"}function eqNaN(r){return r!==r}function retrieve(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,o=r.length;n<o;n++)if(r[n]!=null)return r[n]}function retrieve2(r,t){return r??t}function retrieve3(r,t,n){return r??t??n}function slice(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return nativeSlice.apply(r,t)}function normalizeCssArray$1(r){if(typeof r=="number")return[r,r,r,r];var t=r.length;return t===2?[r[0],r[1],r[0],r[1]]:t===3?[r[0],r[1],r[2],r[1]]:r}function assert(r,t){if(!r)throw new Error(t)}function trim$1(r){return r==null?null:typeof r.trim=="function"?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(r){r[primitiveKey]=!0}function isPrimitive(r){return r[primitiveKey]}var MapPolyfill=function(){function r(){this.data={}}return r.prototype.delete=function(t){var n=this.has(t);return n&&delete this.data[t],n},r.prototype.has=function(t){return this.data.hasOwnProperty(t)},r.prototype.get=function(t){return this.data[t]},r.prototype.set=function(t,n){return this.data[t]=n,this},r.prototype.keys=function(){return keys(this.data)},r.prototype.forEach=function(t){var n=this.data;for(var o in n)n.hasOwnProperty(o)&&t(n[o],o)},r}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function r(t){var n=isArray$1(t);this.data=maybeNativeMap();var o=this;t instanceof r?t.each(a):t&&each$f(t,a);function a(l,d){n?o.set(l,d):o.set(d,l)}}return r.prototype.hasKey=function(t){return this.data.has(t)},r.prototype.get=function(t){return this.data.get(t)},r.prototype.set=function(t,n){return this.data.set(t,n),n},r.prototype.each=function(t,n){this.data.forEach(function(o,a){t.call(n,o,a)})},r.prototype.keys=function(){var t=this.data.keys();return isNativeMapSupported?Array.from(t):t},r.prototype.removeKey=function(t){this.data.delete(t)},r}();function createHashMap(r){return new HashMap(r)}function concatArray(r,t){for(var n=new r.constructor(r.length+t.length),o=0;o<r.length;o++)n[o]=r[o];for(var a=r.length,o=0;o<t.length;o++)n[o+a]=t[o];return n}function createObject(r,t){var n;if(Object.create)n=Object.create(r);else{var o=function(){};o.prototype=r,n=new o}return t&&extend(n,t),n}function disableUserSelect(r){var t=r.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function hasOwn(r,t){return r.hasOwnProperty(t)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString,isStringSafe,isTypedArray,keys,logError,map:map$1,merge,mergeAll,mixin,noop,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));function create$2(r,t){return r==null&&(r=0),t==null&&(t=0),[r,t]}function copy$1(r,t){return r[0]=t[0],r[1]=t[1],r}function clone$3(r){return[r[0],r[1]]}function set$1(r,t,n){return r[0]=t,r[1]=n,r}function add(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r}function scaleAndAdd$1(r,t,n,o){return r[0]=t[0]+n[0]*o,r[1]=t[1]+n[1]*o,r}function sub(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r}function len(r){return Math.sqrt(lenSquare(r))}var length=len;function lenSquare(r){return r[0]*r[0]+r[1]*r[1]}var lengthSquare=lenSquare;function mul$1(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r}function div(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r}function dot(r,t){return r[0]*t[0]+r[1]*t[1]}function scale$2(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r}function normalize$3(r,t){var n=len(t);return n===0?(r[0]=0,r[1]=0):(r[0]=t[0]/n,r[1]=t[1]/n),r}function distance(r,t){return Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1]))}var dist$1=distance;function distanceSquare(r,t){return(r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1])}var distSquare=distanceSquare;function negate(r,t){return r[0]=-t[0],r[1]=-t[1],r}function lerp$1(r,t,n,o){return r[0]=t[0]+o*(n[0]-t[0]),r[1]=t[1]+o*(n[1]-t[1]),r}function applyTransform$1(r,t,n){var o=t[0],a=t[1];return r[0]=n[0]*o+n[2]*a+n[4],r[1]=n[1]*o+n[3]*a+n[5],r}function min$1(r,t,n){return r[0]=Math.min(t[0],n[0]),r[1]=Math.min(t[1],n[1]),r}function max$1(r,t,n){return r[0]=Math.max(t[0],n[0]),r[1]=Math.max(t[1],n[1]),r}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){function r(t,n){this.target=t,this.topTarget=n&&n.topTarget}return r}(),Draggable=function(){function r(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return r.prototype._dragStart=function(t){for(var n=t.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Param(n,t),"dragstart",t.event))},r.prototype._drag=function(t){var n=this._draggingTarget;if(n){var o=t.offsetX,a=t.offsetY,l=o-this._x,d=a-this._y;this._x=o,this._y=a,n.drift(l,d,t),this.handler.dispatchToElement(new Param(n,t),"drag",t.event);var g=this.handler.findHover(o,a,n).target,y=this._dropTarget;this._dropTarget=g,n!==g&&(y&&g!==y&&this.handler.dispatchToElement(new Param(y,t),"dragleave",t.event),g&&g!==y&&this.handler.dispatchToElement(new Param(g,t),"dragenter",t.event))}},r.prototype._dragEnd=function(t){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Param(n,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},r}();const Draggable$1=Draggable;var Eventful=function(){function r(t){t&&(this._$eventProcessor=t)}return r.prototype.on=function(t,n,o,a){this._$handlers||(this._$handlers={});var l=this._$handlers;if(typeof n=="function"&&(a=o,o=n,n=null),!o||!t)return this;var d=this._$eventProcessor;n!=null&&d&&d.normalizeQuery&&(n=d.normalizeQuery(n)),l[t]||(l[t]=[]);for(var g=0;g<l[t].length;g++)if(l[t][g].h===o)return this;var y={h:o,query:n,ctx:a||this,callAtLast:o.zrEventfulCallAtLast},S=l[t].length-1,x=l[t][S];return x&&x.callAtLast?l[t].splice(S,0,y):l[t].push(y),this},r.prototype.isSilent=function(t){var n=this._$handlers;return!n||!n[t]||!n[t].length},r.prototype.off=function(t,n){var o=this._$handlers;if(!o)return this;if(!t)return this._$handlers={},this;if(n){if(o[t]){for(var a=[],l=0,d=o[t].length;l<d;l++)o[t][l].h!==n&&a.push(o[t][l]);o[t]=a}o[t]&&o[t].length===0&&delete o[t]}else delete o[t];return this},r.prototype.trigger=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!this._$handlers)return this;var a=this._$handlers[t],l=this._$eventProcessor;if(a)for(var d=n.length,g=a.length,y=0;y<g;y++){var S=a[y];if(!(l&&l.filter&&S.query!=null&&!l.filter(t,S.query)))switch(d){case 0:S.h.call(S.ctx);break;case 1:S.h.call(S.ctx,n[0]);break;case 2:S.h.call(S.ctx,n[0],n[1]);break;default:S.h.apply(S.ctx,n);break}}return l&&l.afterTrigger&&l.afterTrigger(t),this},r.prototype.triggerWithContext=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!this._$handlers)return this;var a=this._$handlers[t],l=this._$eventProcessor;if(a)for(var d=n.length,g=n[d-1],y=a.length,S=0;S<y;S++){var x=a[S];if(!(l&&l.filter&&x.query!=null&&!l.filter(t,x.query)))switch(d){case 0:x.h.call(g);break;case 1:x.h.call(g,n[0]);break;case 2:x.h.call(g,n[0],n[1]);break;default:x.h.apply(g,n.slice(1,d-1));break}}return l&&l.afterTrigger&&l.afterTrigger(t),this},r}();const Eventful$1=Eventful;var LN2=Math.log(2);function determinant(r,t,n,o,a,l){var d=o+"-"+a,g=r.length;if(l.hasOwnProperty(d))return l[d];if(t===1){var y=Math.round(Math.log((1<<g)-1&~a)/LN2);return r[n][y]}for(var S=o|1<<n,x=n+1;o&1<<x;)x++;for(var w=0,c=0,A=0;c<g;c++){var R=1<<c;R&a||(w+=(A%2?-1:1)*r[n][c]*determinant(r,t-1,x,S,a|R,l),A++)}return l[d]=w,w}function buildTransformer(r,t){var n=[[r[0],r[1],1,0,0,0,-t[0]*r[0],-t[0]*r[1]],[0,0,0,r[0],r[1],1,-t[1]*r[0],-t[1]*r[1]],[r[2],r[3],1,0,0,0,-t[2]*r[2],-t[2]*r[3]],[0,0,0,r[2],r[3],1,-t[3]*r[2],-t[3]*r[3]],[r[4],r[5],1,0,0,0,-t[4]*r[4],-t[4]*r[5]],[0,0,0,r[4],r[5],1,-t[5]*r[4],-t[5]*r[5]],[r[6],r[7],1,0,0,0,-t[6]*r[6],-t[6]*r[7]],[0,0,0,r[6],r[7],1,-t[7]*r[6],-t[7]*r[7]]],o={},a=determinant(n,8,0,0,0,o);if(a!==0){for(var l=[],d=0;d<8;d++)for(var g=0;g<8;g++)l[g]==null&&(l[g]=0),l[g]+=((d+g)%2?-1:1)*determinant(n,7,d===0?1:0,1<<d,1<<g,o)/a*t[d];return function(y,S,x){var w=S*l[6]+x*l[7]+1;y[0]=(S*l[0]+x*l[1]+l[2])/w,y[1]=(S*l[3]+x*l[4]+l[5])/w}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(r,t,n,o,a){return transformCoordWithViewport(_calcOut$1,t,o,a,!0)&&transformCoordWithViewport(r,n,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(r,t,n,o,a){if(t.getBoundingClientRect&&env$1.domSupported&&!isCanvasEl(t)){var l=t[EVENT_SAVED_PROP]||(t[EVENT_SAVED_PROP]={}),d=prepareCoordMarkers(t,l),g=preparePointerTransformer(d,l,a);if(g)return g(r,n,o),!0}return!1}function prepareCoordMarkers(r,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var o=["left","right"],a=["top","bottom"],l=0;l<4;l++){var d=document.createElement("div"),g=d.style,y=l%2,S=(l>>1)%2;g.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[y]+":0",a[S]+":0",o[1-y]+":auto",a[1-S]+":auto",""].join("!important;"),r.appendChild(d),n.push(d)}return n}function preparePointerTransformer(r,t,n){for(var o=n?"invTrans":"trans",a=t[o],l=t.srcCoords,d=[],g=[],y=!0,S=0;S<4;S++){var x=r[S].getBoundingClientRect(),w=2*S,c=x.left,A=x.top;d.push(c,A),y=y&&l&&c===l[w]&&A===l[w+1],g.push(r[S].offsetLeft,r[S].offsetTop)}return y&&a?a:(t.srcCoords=d,t[o]=n?buildTransformer(g,d):buildTransformer(d,g))}function isCanvasEl(r){return r.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(r){return r==null?"":(r+"").replace(replaceReg,function(t,n){return replaceMap[n]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env$1.browser.firefox&&+env$1.browser.version.split(".")[0]<39;function clientToLocal(r,t,n,o){return n=n||{},o?calculateZrXY(r,t,n):firefoxNotSupportOffsetXY&&t.layerX!=null&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):t.offsetX!=null?(n.zrX=t.offsetX,n.zrY=t.offsetY):calculateZrXY(r,t,n),n}function calculateZrXY(r,t,n){if(env$1.domSupported&&r.getBoundingClientRect){var o=t.clientX,a=t.clientY;if(isCanvasEl(r)){var l=r.getBoundingClientRect();n.zrX=o-l.left,n.zrY=a-l.top;return}else if(transformCoordWithViewport(_calcOut,r,o,a)){n.zrX=_calcOut[0],n.zrY=_calcOut[1];return}}n.zrX=n.zrY=0}function getNativeEvent(r){return r||window.event}function normalizeEvent(r,t,n){if(t=getNativeEvent(t),t.zrX!=null)return t;var o=t.type,a=o&&o.indexOf("touch")>=0;if(a){var d=o!=="touchend"?t.targetTouches[0]:t.changedTouches[0];d&&clientToLocal(r,d,t,n)}else{clientToLocal(r,t,t,n);var l=getWheelDeltaMayPolyfill(t);t.zrDelta=l?l/120:-(t.detail||0)/3}var g=t.button;return t.which==null&&g!==void 0&&MOUSE_EVENT_REG.test(t.type)&&(t.which=g&1?1:g&2?3:g&4?2:0),t}function getWheelDeltaMayPolyfill(r){var t=r.wheelDelta;if(t)return t;var n=r.deltaX,o=r.deltaY;if(n==null||o==null)return t;var a=Math.abs(o!==0?o:n),l=o>0?-1:o<0?1:n>0?-1:1;return 3*a*l}function addEventListener(r,t,n,o){r.addEventListener(t,n,o)}function removeEventListener$1(r,t,n,o){r.removeEventListener(t,n,o)}var stop=function(r){r.preventDefault(),r.stopPropagation(),r.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(r){return r.which===2||r.which===3}var GestureMgr=function(){function r(){this._track=[]}return r.prototype.recognize=function(t,n,o){return this._doTrack(t,n,o),this._recognize(t)},r.prototype.clear=function(){return this._track.length=0,this},r.prototype._doTrack=function(t,n,o){var a=t.touches;if(a){for(var l={points:[],touches:[],target:n,event:t},d=0,g=a.length;d<g;d++){var y=a[d],S=clientToLocal(o,y,{});l.points.push([S.zrX,S.zrY]),l.touches.push(y)}this._track.push(l)}},r.prototype._recognize=function(t){for(var n in recognizers)if(recognizers.hasOwnProperty(n)){var o=recognizers[n](this._track,t);if(o)return o}},r}();function dist(r){var t=r[1][0]-r[0][0],n=r[1][1]-r[0][1];return Math.sqrt(t*t+n*n)}function center$1(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}var recognizers={pinch:function(r,t){var n=r.length;if(n){var o=(r[n-1]||{}).points,a=(r[n-2]||{}).points||o;if(a&&a.length>1&&o&&o.length>1){var l=dist(o)/dist(a);!isFinite(l)&&(l=1),t.pinchScale=l;var d=center$1(o);return t.pinchX=d[0],t.pinchY=d[1],{type:"pinch",target:r[0].target,event:t}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function copy(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function mul(r,t,n){var o=t[0]*n[0]+t[2]*n[1],a=t[1]*n[0]+t[3]*n[1],l=t[0]*n[2]+t[2]*n[3],d=t[1]*n[2]+t[3]*n[3],g=t[0]*n[4]+t[2]*n[5]+t[4],y=t[1]*n[4]+t[3]*n[5]+t[5];return r[0]=o,r[1]=a,r[2]=l,r[3]=d,r[4]=g,r[5]=y,r}function translate(r,t,n){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]+n[0],r[5]=t[5]+n[1],r}function rotate(r,t,n){var o=t[0],a=t[2],l=t[4],d=t[1],g=t[3],y=t[5],S=Math.sin(n),x=Math.cos(n);return r[0]=o*x+d*S,r[1]=-o*S+d*x,r[2]=a*x+g*S,r[3]=-a*S+x*g,r[4]=x*l+S*y,r[5]=x*y-S*l,r}function scale$1(r,t,n){var o=n[0],a=n[1];return r[0]=t[0]*o,r[1]=t[1]*a,r[2]=t[2]*o,r[3]=t[3]*a,r[4]=t[4]*o,r[5]=t[5]*a,r}function invert(r,t){var n=t[0],o=t[2],a=t[4],l=t[1],d=t[3],g=t[5],y=n*d-l*o;return y?(y=1/y,r[0]=d*y,r[1]=-l*y,r[2]=-o*y,r[3]=n*y,r[4]=(o*g-d*a)*y,r[5]=(l*a-n*g)*y,r):null}function clone$2(r){var t=create$1();return copy(t,r),t}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function r(t,n){this.x=t||0,this.y=n||0}return r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(t,n){return this.x=t,this.y=n,this},r.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.scale=function(t){this.x*=t,this.y*=t},r.prototype.scaleAndAdd=function(t,n){this.x+=t.x*n,this.y+=t.y*n},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},r.prototype.distance=function(t){var n=this.x-t.x,o=this.y-t.y;return Math.sqrt(n*n+o*o)},r.prototype.distanceSquare=function(t){var n=this.x-t.x,o=this.y-t.y;return n*n+o*o},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(t){if(t){var n=this.x,o=this.y;return this.x=t[0]*n+t[2]*o+t[4],this.y=t[1]*n+t[3]*o+t[5],this}},r.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},r.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},r.set=function(t,n,o){t.x=n,t.y=o},r.copy=function(t,n){t.x=n.x,t.y=n.y},r.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.lenSquare=function(t){return t.x*t.x+t.y*t.y},r.dot=function(t,n){return t.x*n.x+t.y*n.y},r.add=function(t,n,o){t.x=n.x+o.x,t.y=n.y+o.y},r.sub=function(t,n,o){t.x=n.x-o.x,t.y=n.y-o.y},r.scale=function(t,n,o){t.x=n.x*o,t.y=n.y*o},r.scaleAndAdd=function(t,n,o,a){t.x=n.x+o.x*a,t.y=n.y+o.y*a},r.lerp=function(t,n,o,a){var l=1-a;t.x=l*n.x+a*o.x,t.y=l*n.y+a*o.y},r}();const Point$1=Point;var mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point$1,rb=new Point$1,lb=new Point$1,rt=new Point$1,minTv$1=new Point$1,maxTv$1=new Point$1,BoundingRect=function(){function r(t,n,o,a){o<0&&(t=t+o,o=-o),a<0&&(n=n+a,a=-a),this.x=t,this.y=n,this.width=o,this.height=a}return r.prototype.union=function(t){var n=mathMin$a(t.x,this.x),o=mathMin$a(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(t.x+t.width,this.x+this.width)-n:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(t.y+t.height,this.y+this.height)-o:this.height=t.height,this.x=n,this.y=o},r.prototype.applyTransform=function(t){r.applyTransform(this,this,t)},r.prototype.calculateTransform=function(t){var n=this,o=t.width/n.width,a=t.height/n.height,l=create$1();return translate(l,l,[-n.x,-n.y]),scale$1(l,l,[o,a]),translate(l,l,[t.x,t.y]),l},r.prototype.intersect=function(t,n){if(!t)return!1;t instanceof r||(t=r.create(t));var o=this,a=o.x,l=o.x+o.width,d=o.y,g=o.y+o.height,y=t.x,S=t.x+t.width,x=t.y,w=t.y+t.height,c=!(l<y||S<a||g<x||w<d);if(n){var A=1/0,R=0,L=Math.abs(l-y),$=Math.abs(S-a),O=Math.abs(g-x),z=Math.abs(w-d),V=Math.min(L,$),j=Math.min(O,z);l<y||S<a?V>R&&(R=V,L<$?Point$1.set(maxTv$1,-L,0):Point$1.set(maxTv$1,$,0)):V<A&&(A=V,L<$?Point$1.set(minTv$1,L,0):Point$1.set(minTv$1,-$,0)),g<x||w<d?j>R&&(R=j,O<z?Point$1.set(maxTv$1,0,-O):Point$1.set(maxTv$1,0,z)):V<A&&(A=V,O<z?Point$1.set(minTv$1,0,O):Point$1.set(minTv$1,0,-z))}return n&&Point$1.copy(n,c?minTv$1:maxTv$1),c},r.prototype.contain=function(t,n){var o=this;return t>=o.x&&t<=o.x+o.width&&n>=o.y&&n<=o.y+o.height},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(t){r.copy(this,t)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return this.width===0||this.height===0},r.create=function(t){return new r(t.x,t.y,t.width,t.height)},r.copy=function(t,n){t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height},r.applyTransform=function(t,n,o){if(!o){t!==n&&r.copy(t,n);return}if(o[1]<1e-5&&o[1]>-1e-5&&o[2]<1e-5&&o[2]>-1e-5){var a=o[0],l=o[3],d=o[4],g=o[5];t.x=n.x*a+d,t.y=n.y*l+g,t.width=n.width*a,t.height=n.height*l,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}lt.x=lb.x=n.x,lt.y=rt.y=n.y,rb.x=rt.x=n.x+n.width,rb.y=lb.y=n.y+n.height,lt.transform(o),rt.transform(o),rb.transform(o),lb.transform(o),t.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),t.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var y=mathMax$a(lt.x,rb.x,lb.x,rt.x),S=mathMax$a(lt.y,rb.y,lb.y,rt.y);t.width=y-t.x,t.height=S-t.y},r}();const BoundingRect$1=BoundingRect;var SILENT="silent";function makeEventPacket(r,t,n){return{type:r,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.handler=null,n}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Eventful$1),HoveredResult=function(){function r(t,n){this.x=t,this.y=n}return r}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect$1(0,0,0,0),Handler=function(r){__extends(t,r);function t(n,o,a,l,d){var g=r.call(this)||this;return g._hovered=new HoveredResult(0,0),g.storage=n,g.painter=o,g.painterRoot=l,g._pointerSize=d,a=a||new EmptyProxy,g.proxy=null,g.setHandlerProxy(a),g._draggingMgr=new Draggable$1(g),g}return t.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(each$f(handlerNames,function(o){n.on&&n.on(o,this[o],this)},this),n.handler=this),this.proxy=n},t.prototype.mousemove=function(n){var o=n.zrX,a=n.zrY,l=isOutsideBoundary(this,o,a),d=this._hovered,g=d.target;g&&!g.__zr&&(d=this.findHover(d.x,d.y),g=d.target);var y=this._hovered=l?new HoveredResult(o,a):this.findHover(o,a),S=y.target,x=this.proxy;x.setCursor&&x.setCursor(S?S.cursor:"default"),g&&S!==g&&this.dispatchToElement(d,"mouseout",n),this.dispatchToElement(y,"mousemove",n),S&&S!==g&&this.dispatchToElement(y,"mouseover",n)},t.prototype.mouseout=function(n){var o=n.zrEventControl;o!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),o!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},t.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},t.prototype.dispatch=function(n,o){var a=this[n];a&&a.call(this,o)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(n){var o=this.proxy;o.setCursor&&o.setCursor(n)},t.prototype.dispatchToElement=function(n,o,a){n=n||{};var l=n.target;if(!(l&&l.silent)){for(var d="on"+o,g=makeEventPacket(o,n,a);l&&(l[d]&&(g.cancelBubble=!!l[d].call(l,g)),l.trigger(o,g),l=l.__hostTarget?l.__hostTarget:l.parent,!g.cancelBubble););g.cancelBubble||(this.trigger(o,g),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(y){typeof y[d]=="function"&&y[d].call(y,g),y.trigger&&y.trigger(o,g)}))}},t.prototype.findHover=function(n,o,a){var l=this.storage.getDisplayList(),d=new HoveredResult(n,o);if(setHoverTarget(l,d,n,o,a),this._pointerSize&&!d.target){for(var g=[],y=this._pointerSize,S=y/2,x=new BoundingRect$1(n-S,o-S,y,y),w=l.length-1;w>=0;w--){var c=l[w];c!==a&&!c.ignore&&!c.ignoreCoarsePointer&&(!c.parent||!c.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(c.getBoundingRect()),c.transform&&tmpRect$1.applyTransform(c.transform),tmpRect$1.intersect(x)&&g.push(c))}if(g.length)for(var A=4,R=Math.PI/12,L=Math.PI*2,$=0;$<S;$+=A)for(var O=0;O<L;O+=R){var z=n+$*Math.cos(O),V=o+$*Math.sin(O);if(setHoverTarget(g,d,z,V,a),d.target)return d}}return d},t.prototype.processGesture=function(n,o){this._gestureMgr||(this._gestureMgr=new GestureMgr);var a=this._gestureMgr;o==="start"&&a.clear();var l=a.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(o==="end"&&a.clear(),l){var d=l.type;n.gestureEvent=d;var g=new HoveredResult;g.target=l.target,this.dispatchToElement(g,d,l.event)}},t}(Eventful$1);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(r){Handler.prototype[r]=function(t){var n=t.zrX,o=t.zrY,a=isOutsideBoundary(this,n,o),l,d;if((r!=="mouseup"||!a)&&(l=this.findHover(n,o),d=l.target),r==="mousedown")this._downEl=d,this._downPoint=[t.zrX,t.zrY],this._upEl=d;else if(r==="mouseup")this._upEl=d;else if(r==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(l,r,t)}});function isHover(r,t,n){if(r[r.rectHover?"rectContain":"contain"](t,n)){for(var o=r,a=void 0,l=!1;o;){if(o.ignoreClip&&(l=!0),!l){var d=o.getClipPath();if(d&&!d.contain(t,n))return!1;o.silent&&(a=!0)}var g=o.__hostTarget;o=g||o.parent}return a?SILENT:!0}return!1}function setHoverTarget(r,t,n,o,a){for(var l=r.length-1;l>=0;l--){var d=r[l],g=void 0;if(d!==a&&!d.ignore&&(g=isHover(d,n,o))&&(!t.topTarget&&(t.topTarget=d),g!==SILENT)){t.target=d;break}}}function isOutsideBoundary(r,t,n){var o=r.painter;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}const Handler$1=Handler;var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(r){for(var t=0;r>=DEFAULT_MIN_MERGE;)t|=r&1,r>>=1;return r+t}function makeAscendingRun(r,t,n,o){var a=t+1;if(a===n)return 1;if(o(r[a++],r[t])<0){for(;a<n&&o(r[a],r[a-1])<0;)a++;reverseRun(r,t,a)}else for(;a<n&&o(r[a],r[a-1])>=0;)a++;return a-t}function reverseRun(r,t,n){for(n--;t<n;){var o=r[t];r[t++]=r[n],r[n--]=o}}function binaryInsertionSort(r,t,n,o,a){for(o===t&&o++;o<n;o++){for(var l=r[o],d=t,g=o,y;d<g;)y=d+g>>>1,a(l,r[y])<0?g=y:d=y+1;var S=o-d;switch(S){case 3:r[d+3]=r[d+2];case 2:r[d+2]=r[d+1];case 1:r[d+1]=r[d];break;default:for(;S>0;)r[d+S]=r[d+S-1],S--}r[d]=l}}function gallopLeft(r,t,n,o,a,l){var d=0,g=0,y=1;if(l(r,t[n+a])>0){for(g=o-a;y<g&&l(r,t[n+a+y])>0;)d=y,y=(y<<1)+1,y<=0&&(y=g);y>g&&(y=g),d+=a,y+=a}else{for(g=a+1;y<g&&l(r,t[n+a-y])<=0;)d=y,y=(y<<1)+1,y<=0&&(y=g);y>g&&(y=g);var S=d;d=a-y,y=a-S}for(d++;d<y;){var x=d+(y-d>>>1);l(r,t[n+x])>0?d=x+1:y=x}return y}function gallopRight(r,t,n,o,a,l){var d=0,g=0,y=1;if(l(r,t[n+a])<0){for(g=a+1;y<g&&l(r,t[n+a-y])<0;)d=y,y=(y<<1)+1,y<=0&&(y=g);y>g&&(y=g);var S=d;d=a-y,y=a-S}else{for(g=o-a;y<g&&l(r,t[n+a+y])>=0;)d=y,y=(y<<1)+1,y<=0&&(y=g);y>g&&(y=g),d+=a,y+=a}for(d++;d<y;){var x=d+(y-d>>>1);l(r,t[n+x])<0?y=x:d=x+1}return y}function TimSort(r,t){var n=DEFAULT_MIN_GALLOPING,o,a,l=0;r.length;var d=[];o=[],a=[];function g(A,R){o[l]=A,a[l]=R,l+=1}function y(){for(;l>1;){var A=l-2;if(A>=1&&a[A-1]<=a[A]+a[A+1]||A>=2&&a[A-2]<=a[A]+a[A-1])a[A-1]<a[A+1]&&A--;else if(a[A]>a[A+1])break;x(A)}}function S(){for(;l>1;){var A=l-2;A>0&&a[A-1]<a[A+1]&&A--,x(A)}}function x(A){var R=o[A],L=a[A],$=o[A+1],O=a[A+1];a[A]=L+O,A===l-3&&(o[A+1]=o[A+2],a[A+1]=a[A+2]),l--;var z=gallopRight(r[$],r,R,L,0,t);R+=z,L-=z,L!==0&&(O=gallopLeft(r[R+L-1],r,$,O,O-1,t),O!==0&&(L<=O?w(R,L,$,O):c(R,L,$,O)))}function w(A,R,L,$){var O=0;for(O=0;O<R;O++)d[O]=r[A+O];var z=0,V=L,j=A;if(r[j++]=r[V++],--$===0){for(O=0;O<R;O++)r[j+O]=d[z+O];return}if(R===1){for(O=0;O<$;O++)r[j+O]=r[V+O];r[j+$]=d[z];return}for(var K=n,Z,q,ie;;){Z=0,q=0,ie=!1;do if(t(r[V],d[z])<0){if(r[j++]=r[V++],q++,Z=0,--$===0){ie=!0;break}}else if(r[j++]=d[z++],Z++,q=0,--R===1){ie=!0;break}while((Z|q)<K);if(ie)break;do{if(Z=gallopRight(r[V],d,z,R,0,t),Z!==0){for(O=0;O<Z;O++)r[j+O]=d[z+O];if(j+=Z,z+=Z,R-=Z,R<=1){ie=!0;break}}if(r[j++]=r[V++],--$===0){ie=!0;break}if(q=gallopLeft(d[z],r,V,$,0,t),q!==0){for(O=0;O<q;O++)r[j+O]=r[V+O];if(j+=q,V+=q,$-=q,$===0){ie=!0;break}}if(r[j++]=d[z++],--R===1){ie=!0;break}K--}while(Z>=DEFAULT_MIN_GALLOPING||q>=DEFAULT_MIN_GALLOPING);if(ie)break;K<0&&(K=0),K+=2}if(n=K,n<1&&(n=1),R===1){for(O=0;O<$;O++)r[j+O]=r[V+O];r[j+$]=d[z]}else{if(R===0)throw new Error;for(O=0;O<R;O++)r[j+O]=d[z+O]}}function c(A,R,L,$){var O=0;for(O=0;O<$;O++)d[O]=r[L+O];var z=A+R-1,V=$-1,j=L+$-1,K=0,Z=0;if(r[j--]=r[z--],--R===0){for(K=j-($-1),O=0;O<$;O++)r[K+O]=d[O];return}if($===1){for(j-=R,z-=R,Z=j+1,K=z+1,O=R-1;O>=0;O--)r[Z+O]=r[K+O];r[j]=d[V];return}for(var q=n;;){var ie=0,te=0,oe=!1;do if(t(d[V],r[z])<0){if(r[j--]=r[z--],ie++,te=0,--R===0){oe=!0;break}}else if(r[j--]=d[V--],te++,ie=0,--$===1){oe=!0;break}while((ie|te)<q);if(oe)break;do{if(ie=R-gallopRight(d[V],r,A,R,R-1,t),ie!==0){for(j-=ie,z-=ie,R-=ie,Z=j+1,K=z+1,O=ie-1;O>=0;O--)r[Z+O]=r[K+O];if(R===0){oe=!0;break}}if(r[j--]=d[V--],--$===1){oe=!0;break}if(te=$-gallopLeft(r[z],d,0,$,$-1,t),te!==0){for(j-=te,V-=te,$-=te,Z=j+1,K=V+1,O=0;O<te;O++)r[Z+O]=d[K+O];if($<=1){oe=!0;break}}if(r[j--]=r[z--],--R===0){oe=!0;break}q--}while(ie>=DEFAULT_MIN_GALLOPING||te>=DEFAULT_MIN_GALLOPING);if(oe)break;q<0&&(q=0),q+=2}if(n=q,n<1&&(n=1),$===1){for(j-=R,z-=R,Z=j+1,K=z+1,O=R-1;O>=0;O--)r[Z+O]=r[K+O];r[j]=d[V]}else{if($===0)throw new Error;for(K=j-($-1),O=0;O<$;O++)r[K+O]=d[O]}}return{mergeRuns:y,forceMergeRuns:S,pushRun:g}}function sort$2(r,t,n,o){n||(n=0),o||(o=r.length);var a=o-n;if(!(a<2)){var l=0;if(a<DEFAULT_MIN_MERGE){l=makeAscendingRun(r,n,o,t),binaryInsertionSort(r,n,o,n+l,t);return}var d=TimSort(r,t),g=minRunLength(a);do{if(l=makeAscendingRun(r,n,o,t),l<g){var y=a;y>g&&(y=g),binaryInsertionSort(r,n,n+y,n+l,t),l=y}d.pushRun(n,l),d.mergeRuns(),a-=l,n+=l}while(a!==0);d.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(r,t){return r.zlevel===t.zlevel?r.z===t.z?r.z2-t.z2:r.z-t.z:r.zlevel-t.zlevel}var Storage=function(){function r(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return r.prototype.traverse=function(t,n){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(t,n)},r.prototype.getDisplayList=function(t,n){n=n||!1;var o=this._displayList;return(t||!o.length)&&this.updateDisplayList(n),o},r.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var n=this._roots,o=this._displayList,a=0,l=n.length;a<l;a++)this._updateAndAddDisplayable(n[a],null,t);o.length=this._displayListLen,sort$2(o,shapeCompareFunc)},r.prototype._updateAndAddDisplayable=function(t,n,o){if(!(t.ignore&&!o)){t.beforeUpdate(),t.update(),t.afterUpdate();var a=t.getClipPath();if(t.ignoreClip)n=null;else if(a){n?n=n.slice():n=[];for(var l=a,d=t;l;)l.parent=d,l.updateTransform(),n.push(l),d=l,l=l.getClipPath()}if(t.childrenRef){for(var g=t.childrenRef(),y=0;y<g.length;y++){var S=g[y];t.__dirty&&(S.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(S,n,o)}t.__dirty=0}else{var x=t;n&&n.length?x.__clipPaths=n:x.__clipPaths&&x.__clipPaths.length>0&&(x.__clipPaths=[]),isNaN(x.z)&&(logInvalidZError(),x.z=0),isNaN(x.z2)&&(logInvalidZError(),x.z2=0),isNaN(x.zlevel)&&(logInvalidZError(),x.zlevel=0),this._displayList[this._displayListLen++]=x}var w=t.getDecalElement&&t.getDecalElement();w&&this._updateAndAddDisplayable(w,n,o);var c=t.getTextGuideLine();c&&this._updateAndAddDisplayable(c,n,o);var A=t.getTextContent();A&&this._updateAndAddDisplayable(A,n,o)}},r.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},r.prototype.delRoot=function(t){if(t instanceof Array){for(var n=0,o=t.length;n<o;n++)this.delRoot(t[n]);return}var a=indexOf(this._roots,t);a>=0&&this._roots.splice(a,1)},r.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},r.prototype.getRoots=function(){return this._roots},r.prototype.dispose=function(){this._displayList=null,this._roots=null},r}();const Storage$1=Storage;var requestAnimationFrame$1;requestAnimationFrame$1=env$1.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(r){return setTimeout(r,16)};const requestAnimationFrame$2=requestAnimationFrame$1;var easingFuncs={linear:function(r){return r},quadraticIn:function(r){return r*r},quadraticOut:function(r){return r*(2-r)},quadraticInOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},cubicIn:function(r){return r*r*r},cubicOut:function(r){return--r*r*r+1},cubicInOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},quarticIn:function(r){return r*r*r*r},quarticOut:function(r){return 1- --r*r*r*r},quarticInOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)},quinticIn:function(r){return r*r*r*r*r},quinticOut:function(r){return--r*r*r*r*r+1},quinticInOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)},sinusoidalIn:function(r){return 1-Math.cos(r*Math.PI/2)},sinusoidalOut:function(r){return Math.sin(r*Math.PI/2)},sinusoidalInOut:function(r){return .5*(1-Math.cos(Math.PI*r))},exponentialIn:function(r){return r===0?0:Math.pow(1024,r-1)},exponentialOut:function(r){return r===1?1:1-Math.pow(2,-10*r)},exponentialInOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)},circularIn:function(r){return 1-Math.sqrt(1-r*r)},circularOut:function(r){return Math.sqrt(1- --r*r)},circularInOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)},elasticIn:function(r){var t,n=.1,o=.4;return r===0?0:r===1?1:(!n||n<1?(n=1,t=o/4):t=o*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/o)))},elasticOut:function(r){var t,n=.1,o=.4;return r===0?0:r===1?1:(!n||n<1?(n=1,t=o/4):t=o*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*r)*Math.sin((r-t)*(2*Math.PI)/o)+1)},elasticInOut:function(r){var t,n=.1,o=.4;return r===0?0:r===1?1:(!n||n<1?(n=1,t=o/4):t=o*Math.asin(1/n)/(2*Math.PI),(r*=2)<1?-.5*(n*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/o)):n*Math.pow(2,-10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/o)*.5+1)},backIn:function(r){var t=1.70158;return r*r*((t+1)*r-t)},backOut:function(r){var t=1.70158;return--r*r*((t+1)*r+t)+1},backInOut:function(r){var t=2.5949095;return(r*=2)<1?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)},bounceIn:function(r){return 1-easingFuncs.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},bounceInOut:function(r){return r<.5?easingFuncs.bounceIn(r*2)*.5:easingFuncs.bounceOut(r*2-1)*.5+.5}};const easingFuncs$1=easingFuncs;var mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(r){return r>-EPSILON$4&&r<EPSILON$4}function isNotAroundZero$1(r){return r>EPSILON$4||r<-EPSILON$4}function cubicAt(r,t,n,o,a){var l=1-a;return l*l*(l*r+3*a*t)+a*a*(a*o+3*l*n)}function cubicDerivativeAt(r,t,n,o,a){var l=1-a;return 3*(((t-r)*l+2*(n-t)*a)*l+(o-n)*a*a)}function cubicRootAt(r,t,n,o,a,l){var d=o+3*(t-n)-r,g=3*(n-t*2+r),y=3*(t-r),S=r-a,x=g*g-3*d*y,w=g*y-9*d*S,c=y*y-3*g*S,A=0;if(isAroundZero$1(x)&&isAroundZero$1(w))if(isAroundZero$1(g))l[0]=0;else{var R=-y/g;R>=0&&R<=1&&(l[A++]=R)}else{var L=w*w-4*x*c;if(isAroundZero$1(L)){var $=w/x,R=-g/d+$,O=-$/2;R>=0&&R<=1&&(l[A++]=R),O>=0&&O<=1&&(l[A++]=O)}else if(L>0){var z=mathSqrt$3(L),V=x*g+1.5*d*(-w+z),j=x*g+1.5*d*(-w-z);V<0?V=-mathPow$2(-V,ONE_THIRD):V=mathPow$2(V,ONE_THIRD),j<0?j=-mathPow$2(-j,ONE_THIRD):j=mathPow$2(j,ONE_THIRD);var R=(-g-(V+j))/(3*d);R>=0&&R<=1&&(l[A++]=R)}else{var K=(2*x*g-3*d*w)/(2*mathSqrt$3(x*x*x)),Z=Math.acos(K)/3,q=mathSqrt$3(x),ie=Math.cos(Z),R=(-g-2*q*ie)/(3*d),O=(-g+q*(ie+THREE_SQRT*Math.sin(Z)))/(3*d),te=(-g+q*(ie-THREE_SQRT*Math.sin(Z)))/(3*d);R>=0&&R<=1&&(l[A++]=R),O>=0&&O<=1&&(l[A++]=O),te>=0&&te<=1&&(l[A++]=te)}}return A}function cubicExtrema(r,t,n,o,a){var l=6*n-12*t+6*r,d=9*t+3*o-3*r-9*n,g=3*t-3*r,y=0;if(isAroundZero$1(d)){if(isNotAroundZero$1(l)){var S=-g/l;S>=0&&S<=1&&(a[y++]=S)}}else{var x=l*l-4*d*g;if(isAroundZero$1(x))a[0]=-l/(2*d);else if(x>0){var w=mathSqrt$3(x),S=(-l+w)/(2*d),c=(-l-w)/(2*d);S>=0&&S<=1&&(a[y++]=S),c>=0&&c<=1&&(a[y++]=c)}}return y}function cubicSubdivide(r,t,n,o,a,l){var d=(t-r)*a+r,g=(n-t)*a+t,y=(o-n)*a+n,S=(g-d)*a+d,x=(y-g)*a+g,w=(x-S)*a+S;l[0]=r,l[1]=d,l[2]=S,l[3]=w,l[4]=w,l[5]=x,l[6]=y,l[7]=o}function cubicProjectPoint(r,t,n,o,a,l,d,g,y,S,x){var w,c=.005,A=1/0,R,L,$,O;_v0[0]=y,_v0[1]=S;for(var z=0;z<1;z+=.05)_v1[0]=cubicAt(r,n,a,d,z),_v1[1]=cubicAt(t,o,l,g,z),$=distSquare(_v0,_v1),$<A&&(w=z,A=$);A=1/0;for(var V=0;V<32&&!(c<EPSILON_NUMERIC);V++)R=w-c,L=w+c,_v1[0]=cubicAt(r,n,a,d,R),_v1[1]=cubicAt(t,o,l,g,R),$=distSquare(_v1,_v0),R>=0&&$<A?(w=R,A=$):(_v2[0]=cubicAt(r,n,a,d,L),_v2[1]=cubicAt(t,o,l,g,L),O=distSquare(_v2,_v0),L<=1&&O<A?(w=L,A=O):c*=.5);return x&&(x[0]=cubicAt(r,n,a,d,w),x[1]=cubicAt(t,o,l,g,w)),mathSqrt$3(A)}function cubicLength(r,t,n,o,a,l,d,g,y){for(var S=r,x=t,w=0,c=1/y,A=1;A<=y;A++){var R=A*c,L=cubicAt(r,n,a,d,R),$=cubicAt(t,o,l,g,R),O=L-S,z=$-x;w+=Math.sqrt(O*O+z*z),S=L,x=$}return w}function quadraticAt$1(r,t,n,o){var a=1-o;return a*(a*r+2*o*t)+o*o*n}function quadraticDerivativeAt(r,t,n,o){return 2*((1-o)*(t-r)+o*(n-t))}function quadraticRootAt(r,t,n,o,a){var l=r-2*t+n,d=2*(t-r),g=r-o,y=0;if(isAroundZero$1(l)){if(isNotAroundZero$1(d)){var S=-g/d;S>=0&&S<=1&&(a[y++]=S)}}else{var x=d*d-4*l*g;if(isAroundZero$1(x)){var S=-d/(2*l);S>=0&&S<=1&&(a[y++]=S)}else if(x>0){var w=mathSqrt$3(x),S=(-d+w)/(2*l),c=(-d-w)/(2*l);S>=0&&S<=1&&(a[y++]=S),c>=0&&c<=1&&(a[y++]=c)}}return y}function quadraticExtremum(r,t,n){var o=r+n-2*t;return o===0?.5:(r-t)/o}function quadraticSubdivide(r,t,n,o,a){var l=(t-r)*o+r,d=(n-t)*o+t,g=(d-l)*o+l;a[0]=r,a[1]=l,a[2]=g,a[3]=g,a[4]=d,a[5]=n}function quadraticProjectPoint(r,t,n,o,a,l,d,g,y){var S,x=.005,w=1/0;_v0[0]=d,_v0[1]=g;for(var c=0;c<1;c+=.05){_v1[0]=quadraticAt$1(r,n,a,c),_v1[1]=quadraticAt$1(t,o,l,c);var A=distSquare(_v0,_v1);A<w&&(S=c,w=A)}w=1/0;for(var R=0;R<32&&!(x<EPSILON_NUMERIC);R++){var L=S-x,$=S+x;_v1[0]=quadraticAt$1(r,n,a,L),_v1[1]=quadraticAt$1(t,o,l,L);var A=distSquare(_v1,_v0);if(L>=0&&A<w)S=L,w=A;else{_v2[0]=quadraticAt$1(r,n,a,$),_v2[1]=quadraticAt$1(t,o,l,$);var O=distSquare(_v2,_v0);$<=1&&O<w?(S=$,w=O):x*=.5}}return y&&(y[0]=quadraticAt$1(r,n,a,S),y[1]=quadraticAt$1(t,o,l,S)),mathSqrt$3(w)}function quadraticLength(r,t,n,o,a,l,d){for(var g=r,y=t,S=0,x=1/d,w=1;w<=d;w++){var c=w*x,A=quadraticAt$1(r,n,a,c),R=quadraticAt$1(t,o,l,c),L=A-g,$=R-y;S+=Math.sqrt(L*L+$*$),g=A,y=R}return S}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(r){var t=r&&regexp.exec(r);if(t){var n=t[1].split(","),o=+trim$1(n[0]),a=+trim$1(n[1]),l=+trim$1(n[2]),d=+trim$1(n[3]);if(isNaN(o+a+l+d))return;var g=[];return function(y){return y<=0?0:y>=1?1:cubicRootAt(0,o,l,1,y,g)&&cubicAt(0,a,d,1,g[0])}}}var Clip=function(){function r(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||noop,this.ondestroy=t.ondestroy||noop,this.onrestart=t.onrestart||noop,t.easing&&this.setEasing(t.easing)}return r.prototype.step=function(t,n){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var o=this._life,a=t-this._startTime-this._pausedTime,l=a/o;l<0&&(l=0),l=Math.min(l,1);var d=this.easingFunc,g=d?d(l):l;if(this.onframe(g),l===1)if(this.loop){var y=a%o;this._startTime=t-y,this._pausedTime=0,this.onrestart()}else return!0;return!1},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.prototype.setEasing=function(t){this.easing=t,this.easingFunc=isFunction(t)?t:easingFuncs$1[t]||createCubicEasingFunc(t)},r}();const Clip$1=Clip;var Entry=function(){function r(t){this.value=t}return r}(),LinkedList=function(){function r(){this._len=0}return r.prototype.insert=function(t){var n=new Entry(t);return this.insertEntry(n),n},r.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},r.prototype.remove=function(t){var n=t.prev,o=t.next;n?n.next=o:this.head=o,o?o.prev=n:this.tail=n,t.next=t.prev=null,this._len--},r.prototype.len=function(){return this._len},r.prototype.clear=function(){this.head=this.tail=null,this._len=0},r}(),LRU=function(){function r(t){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=t}return r.prototype.put=function(t,n){var o=this._list,a=this._map,l=null;if(a[t]==null){var d=o.len(),g=this._lastRemovedEntry;if(d>=this._maxSize&&d>0){var y=o.head;o.remove(y),delete a[y.key],l=y.value,this._lastRemovedEntry=y}g?g.value=n:g=new Entry(n),g.key=t,o.insertEntry(g),a[t]=g}return l},r.prototype.get=function(t){var n=this._map[t],o=this._list;if(n!=null)return n!==o.tail&&(o.remove(n),o.insertEntry(n)),n.value},r.prototype.clear=function(){this._list.clear(),this._map={}},r.prototype.len=function(){return this._list.len()},r}();const LRU$1=LRU;var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(r){return r=Math.round(r),r<0?0:r>255?255:r}function clampCssAngle(r){return r=Math.round(r),r<0?0:r>360?360:r}function clampCssFloat(r){return r<0?0:r>1?1:r}function parseCssInt(r){var t=r;return t.length&&t.charAt(t.length-1)==="%"?clampCssByte(parseFloat(t)/100*255):clampCssByte(parseInt(t,10))}function parseCssFloat(r){var t=r;return t.length&&t.charAt(t.length-1)==="%"?clampCssFloat(parseFloat(t)/100):clampCssFloat(parseFloat(t))}function cssHueToRgb(r,t,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?r+(t-r)*n*6:n*2<1?t:n*3<2?r+(t-r)*(2/3-n)*6:r}function lerpNumber(r,t,n){return r+(t-r)*n}function setRgba(r,t,n,o,a){return r[0]=t,r[1]=n,r[2]=o,r[3]=a,r}function copyRgba(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}var colorCache=new LRU$1(20),lastRemovedArr=null;function putToCache(r,t){lastRemovedArr&&copyRgba(lastRemovedArr,t),lastRemovedArr=colorCache.put(r,lastRemovedArr||t.slice())}function parse(r,t){if(r){t=t||[];var n=colorCache.get(r);if(n)return copyRgba(t,n);r=r+"";var o=r.replace(/ /g,"").toLowerCase();if(o in kCSSColorTable)return copyRgba(t,kCSSColorTable[o]),putToCache(r,t),t;var a=o.length;if(o.charAt(0)==="#"){if(a===4||a===5){var l=parseInt(o.slice(1,4),16);if(!(l>=0&&l<=4095)){setRgba(t,0,0,0,1);return}return setRgba(t,(l&3840)>>4|(l&3840)>>8,l&240|(l&240)>>4,l&15|(l&15)<<4,a===5?parseInt(o.slice(4),16)/15:1),putToCache(r,t),t}else if(a===7||a===9){var l=parseInt(o.slice(1,7),16);if(!(l>=0&&l<=16777215)){setRgba(t,0,0,0,1);return}return setRgba(t,(l&16711680)>>16,(l&65280)>>8,l&255,a===9?parseInt(o.slice(7),16)/255:1),putToCache(r,t),t}return}var d=o.indexOf("("),g=o.indexOf(")");if(d!==-1&&g+1===a){var y=o.substr(0,d),S=o.substr(d+1,g-(d+1)).split(","),x=1;switch(y){case"rgba":if(S.length!==4)return S.length===3?setRgba(t,+S[0],+S[1],+S[2],1):setRgba(t,0,0,0,1);x=parseCssFloat(S.pop());case"rgb":if(S.length>=3)return setRgba(t,parseCssInt(S[0]),parseCssInt(S[1]),parseCssInt(S[2]),S.length===3?x:parseCssFloat(S[3])),putToCache(r,t),t;setRgba(t,0,0,0,1);return;case"hsla":if(S.length!==4){setRgba(t,0,0,0,1);return}return S[3]=parseCssFloat(S[3]),hsla2rgba(S,t),putToCache(r,t),t;case"hsl":if(S.length!==3){setRgba(t,0,0,0,1);return}return hsla2rgba(S,t),putToCache(r,t),t;default:return}}setRgba(t,0,0,0,1)}}function hsla2rgba(r,t){var n=(parseFloat(r[0])%360+360)%360/360,o=parseCssFloat(r[1]),a=parseCssFloat(r[2]),l=a<=.5?a*(o+1):a+o-a*o,d=a*2-l;return t=t||[],setRgba(t,clampCssByte(cssHueToRgb(d,l,n+1/3)*255),clampCssByte(cssHueToRgb(d,l,n)*255),clampCssByte(cssHueToRgb(d,l,n-1/3)*255),1),r.length===4&&(t[3]=r[3]),t}function rgba2hsla(r){if(r){var t=r[0]/255,n=r[1]/255,o=r[2]/255,a=Math.min(t,n,o),l=Math.max(t,n,o),d=l-a,g=(l+a)/2,y,S;if(d===0)y=0,S=0;else{g<.5?S=d/(l+a):S=d/(2-l-a);var x=((l-t)/6+d/2)/d,w=((l-n)/6+d/2)/d,c=((l-o)/6+d/2)/d;t===l?y=c-w:n===l?y=1/3+x-c:o===l&&(y=2/3+w-x),y<0&&(y+=1),y>1&&(y-=1)}var A=[y*360,S,g];return r[3]!=null&&A.push(r[3]),A}}function lift(r,t){var n=parse(r);if(n){for(var o=0;o<3;o++)t<0?n[o]=n[o]*(1-t)|0:n[o]=(255-n[o])*t+n[o]|0,n[o]>255?n[o]=255:n[o]<0&&(n[o]=0);return stringify(n,n.length===4?"rgba":"rgb")}}function toHex(r){var t=parse(r);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function fastLerp(r,t,n){if(!(!(t&&t.length)||!(r>=0&&r<=1))){n=n||[];var o=r*(t.length-1),a=Math.floor(o),l=Math.ceil(o),d=t[a],g=t[l],y=o-a;return n[0]=clampCssByte(lerpNumber(d[0],g[0],y)),n[1]=clampCssByte(lerpNumber(d[1],g[1],y)),n[2]=clampCssByte(lerpNumber(d[2],g[2],y)),n[3]=clampCssFloat(lerpNumber(d[3],g[3],y)),n}}var fastMapToColor=fastLerp;function lerp(r,t,n){if(!(!(t&&t.length)||!(r>=0&&r<=1))){var o=r*(t.length-1),a=Math.floor(o),l=Math.ceil(o),d=parse(t[a]),g=parse(t[l]),y=o-a,S=stringify([clampCssByte(lerpNumber(d[0],g[0],y)),clampCssByte(lerpNumber(d[1],g[1],y)),clampCssByte(lerpNumber(d[2],g[2],y)),clampCssFloat(lerpNumber(d[3],g[3],y))],"rgba");return n?{color:S,leftIndex:a,rightIndex:l,value:o}:S}}var mapToColor=lerp;function modifyHSL(r,t,n,o){var a=parse(r);if(r)return a=rgba2hsla(a),t!=null&&(a[0]=clampCssAngle(t)),n!=null&&(a[1]=parseCssFloat(n)),o!=null&&(a[2]=parseCssFloat(o)),stringify(hsla2rgba(a),"rgba")}function modifyAlpha(r,t){var n=parse(r);if(n&&t!=null)return n[3]=clampCssFloat(t),stringify(n,"rgba")}function stringify(r,t){if(!(!r||!r.length)){var n=r[0]+","+r[1]+","+r[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(n+=","+r[3]),t+"("+n+")"}}function lum(r,t){var n=parse(r);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*t:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(r){var t;if(!r||r==="transparent")r="none";else if(typeof r=="string"&&r.indexOf("rgba")>-1){var n=parse(r);n&&(r="rgb("+n[0]+","+n[1]+","+n[2]+")",t=n[3])}return{color:r,opacity:t??1}}var EPSILON$3=1e-4;function isAroundZero(r){return r<EPSILON$3&&r>-EPSILON$3}function round3(r){return mathRound$1(r*1e3)/1e3}function round4(r){return mathRound$1(r*1e4)/1e4}function getMatrixStr(r){return"matrix("+round3(r[0])+","+round3(r[1])+","+round3(r[2])+","+round3(r[3])+","+round4(r[4])+","+round4(r[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(r,t,n){return n==="top"?r+=t/2:n==="bottom"&&(r-=t/2),r}function hasShadow(r){return r&&(r.shadowBlur||r.shadowOffsetX||r.shadowOffsetY)}function getShadowKey(r){var t=r.style,n=r.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function isImagePattern(r){return r&&!!r.image}function isSVGPattern(r){return r&&!!r.svgElement}function isPattern(r){return isImagePattern(r)||isSVGPattern(r)}function isLinearGradient(r){return r.type==="linear"}function isRadialGradient(r){return r.type==="radial"}function isGradient(r){return r&&(r.type==="linear"||r.type==="radial")}function getIdURL(r){return"url(#"+r+")"}function getPathPrecision(r){var t=r.getGlobalScale(),n=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function getSRTTransformString(r){var t=r.x||0,n=r.y||0,o=(r.rotation||0)*RADIAN_TO_DEGREE,a=retrieve2(r.scaleX,1),l=retrieve2(r.scaleY,1),d=r.skewX||0,g=r.skewY||0,y=[];return(t||n)&&y.push("translate("+t+"px,"+n+"px)"),o&&y.push("rotate("+o+")"),(a!==1||l!==1)&&y.push("scale("+a+","+l+")"),(d||g)&&y.push("skew("+mathRound$1(d*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(g*RADIAN_TO_DEGREE)+"deg)"),y.join(" ")}var encodeBase64=function(){return env$1.hasGlobalWindow&&isFunction(window.btoa)?function(r){return window.btoa(unescape(encodeURIComponent(r)))}:typeof Buffer<"u"?function(r){return Buffer.from(r).toString("base64")}:function(r){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(r,t,n){return(t-r)*n+r}function interpolate1DArray(r,t,n,o){for(var a=t.length,l=0;l<a;l++)r[l]=interpolateNumber$1(t[l],n[l],o);return r}function interpolate2DArray(r,t,n,o){for(var a=t.length,l=a&&t[0].length,d=0;d<a;d++){r[d]||(r[d]=[]);for(var g=0;g<l;g++)r[d][g]=interpolateNumber$1(t[d][g],n[d][g],o)}return r}function add1DArray(r,t,n,o){for(var a=t.length,l=0;l<a;l++)r[l]=t[l]+n[l]*o;return r}function add2DArray(r,t,n,o){for(var a=t.length,l=a&&t[0].length,d=0;d<a;d++){r[d]||(r[d]=[]);for(var g=0;g<l;g++)r[d][g]=t[d][g]+n[d][g]*o}return r}function fillColorStops(r,t){for(var n=r.length,o=t.length,a=n>o?t:r,l=Math.min(n,o),d=a[l-1]||{color:[0,0,0,0],offset:0},g=l;g<Math.max(n,o);g++)a.push({offset:d.offset,color:d.color.slice()})}function fillArray(r,t,n){var o=r,a=t;if(!(!o.push||!a.push)){var l=o.length,d=a.length;if(l!==d){var g=l>d;if(g)o.length=d;else for(var y=l;y<d;y++)o.push(n===1?a[y]:arraySlice.call(a[y]))}for(var S=o[0]&&o[0].length,y=0;y<o.length;y++)if(n===1)isNaN(o[y])&&(o[y]=a[y]);else for(var x=0;x<S;x++)isNaN(o[y][x])&&(o[y][x]=a[y][x])}}function cloneValue(r){if(isArrayLike(r)){var t=r.length;if(isArrayLike(r[0])){for(var n=[],o=0;o<t;o++)n.push(arraySlice.call(r[o]));return n}return arraySlice.call(r)}return r}function rgba2String(r){return r[0]=Math.floor(r[0])||0,r[1]=Math.floor(r[1])||0,r[2]=Math.floor(r[2])||0,r[3]=r[3]==null?1:r[3],"rgba("+r.join(",")+")"}function guessArrayDim(r){return isArrayLike(r&&r[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(r){return r===VALUE_TYPE_LINEAR_GRADIENT||r===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(r){return r===VALUE_TYPE_1D_ARRAY||r===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function r(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return r.prototype.isFinished=function(){return this._finished},r.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},r.prototype.needsAnimate=function(){return this.keyframes.length>=1},r.prototype.getAdditiveTrack=function(){return this._additiveTrack},r.prototype.addKeyframe=function(t,n,o){this._needsSort=!0;var a=this.keyframes,l=a.length,d=!1,g=VALUE_TYPE_UNKOWN,y=n;if(isArrayLike(n)){var S=guessArrayDim(n);g=S,(S===1&&!isNumber(n[0])||S===2&&!isNumber(n[0][0]))&&(d=!0)}else if(isNumber(n)&&!eqNaN(n))g=VALUE_TYPE_NUMBER;else if(isString(n))if(!isNaN(+n))g=VALUE_TYPE_NUMBER;else{var x=parse(n);x&&(y=x,g=VALUE_TYPE_COLOR)}else if(isGradientObject(n)){var w=extend({},y);w.colorStops=map$1(n.colorStops,function(A){return{offset:A.offset,color:parse(A.color)}}),isLinearGradient(n)?g=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(n)&&(g=VALUE_TYPE_RADIAL_GRADIENT),y=w}l===0?this.valType=g:(g!==this.valType||g===VALUE_TYPE_UNKOWN)&&(d=!0),this.discrete=this.discrete||d;var c={time:t,value:y,rawValue:n,percent:0};return o&&(c.easing=o,c.easingFunc=isFunction(o)?o:easingFuncs$1[o]||createCubicEasingFunc(o)),a.push(c),c},r.prototype.prepare=function(t,n){var o=this.keyframes;this._needsSort&&o.sort(function(L,$){return L.time-$.time});for(var a=this.valType,l=o.length,d=o[l-1],g=this.discrete,y=isArrayValueType(a),S=isGradientValueType(a),x=0;x<l;x++){var w=o[x],c=w.value,A=d.value;w.percent=w.time/t,g||(y&&x!==l-1?fillArray(c,A,a):S&&fillColorStops(c.colorStops,A.colorStops))}if(!g&&a!==VALUE_TYPE_RADIAL_GRADIENT&&n&&this.needsAnimate()&&n.needsAnimate()&&a===n.valType&&!n._finished){this._additiveTrack=n;for(var R=o[0].value,x=0;x<l;x++)a===VALUE_TYPE_NUMBER?o[x].additiveValue=o[x].value-R:a===VALUE_TYPE_COLOR?o[x].additiveValue=add1DArray([],o[x].value,R,-1):isArrayValueType(a)&&(o[x].additiveValue=a===VALUE_TYPE_1D_ARRAY?add1DArray([],o[x].value,R,-1):add2DArray([],o[x].value,R,-1))}},r.prototype.step=function(t,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var o=this._additiveTrack!=null,a=o?"additiveValue":"value",l=this.valType,d=this.keyframes,g=d.length,y=this.propName,S=l===VALUE_TYPE_COLOR,x,w=this._lastFr,c=Math.min,A,R;if(g===1)A=R=d[0];else{if(n<0)x=0;else if(n<this._lastFrP){var L=c(w+1,g-1);for(x=L;x>=0&&!(d[x].percent<=n);x--);x=c(x,g-2)}else{for(x=w;x<g&&!(d[x].percent>n);x++);x=c(x-1,g-2)}R=d[x+1],A=d[x]}if(A&&R){this._lastFr=x,this._lastFrP=n;var $=R.percent-A.percent,O=$===0?1:c((n-A.percent)/$,1);R.easingFunc&&(O=R.easingFunc(O));var z=o?this._additiveValue:S?tmpRgba:t[y];if((isArrayValueType(l)||S)&&!z&&(z=this._additiveValue=[]),this.discrete)t[y]=O<1?A.rawValue:R.rawValue;else if(isArrayValueType(l))l===VALUE_TYPE_1D_ARRAY?interpolate1DArray(z,A[a],R[a],O):interpolate2DArray(z,A[a],R[a],O);else if(isGradientValueType(l)){var V=A[a],j=R[a],K=l===VALUE_TYPE_LINEAR_GRADIENT;t[y]={type:K?"linear":"radial",x:interpolateNumber$1(V.x,j.x,O),y:interpolateNumber$1(V.y,j.y,O),colorStops:map$1(V.colorStops,function(q,ie){var te=j.colorStops[ie];return{offset:interpolateNumber$1(q.offset,te.offset,O),color:rgba2String(interpolate1DArray([],q.color,te.color,O))}}),global:j.global},K?(t[y].x2=interpolateNumber$1(V.x2,j.x2,O),t[y].y2=interpolateNumber$1(V.y2,j.y2,O)):t[y].r=interpolateNumber$1(V.r,j.r,O)}else if(S)interpolate1DArray(z,A[a],R[a],O),o||(t[y]=rgba2String(z));else{var Z=interpolateNumber$1(A[a],R[a],O);o?this._additiveValue=Z:t[y]=Z}o&&this._addToTarget(t)}}},r.prototype._addToTarget=function(t){var n=this.valType,o=this.propName,a=this._additiveValue;n===VALUE_TYPE_NUMBER?t[o]=t[o]+a:n===VALUE_TYPE_COLOR?(parse(t[o],tmpRgba),add1DArray(tmpRgba,tmpRgba,a,1),t[o]=rgba2String(tmpRgba)):n===VALUE_TYPE_1D_ARRAY?add1DArray(t[o],t[o],a,1):n===VALUE_TYPE_2D_ARRAY&&add2DArray(t[o],t[o],a,1)},r}(),Animator=function(){function r(t,n,o,a){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=n,n&&a){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=a,this._allowDiscrete=o}return r.prototype.getMaxTime=function(){return this._maxTime},r.prototype.getDelay=function(){return this._delay},r.prototype.getLoop=function(){return this._loop},r.prototype.getTarget=function(){return this._target},r.prototype.changeTarget=function(t){this._target=t},r.prototype.when=function(t,n,o){return this.whenWithKeys(t,n,keys(n),o)},r.prototype.whenWithKeys=function(t,n,o,a){for(var l=this._tracks,d=0;d<o.length;d++){var g=o[d],y=l[g];if(!y){y=l[g]=new Track(g);var S=void 0,x=this._getAdditiveTrack(g);if(x){var w=x.keyframes,c=w[w.length-1];S=c&&c.value,x.valType===VALUE_TYPE_COLOR&&S&&(S=rgba2String(S))}else S=this._target[g];if(S==null)continue;t>0&&y.addKeyframe(0,cloneValue(S),a),this._trackKeys.push(g)}y.addKeyframe(t,cloneValue(n[g]),a)}return this._maxTime=Math.max(this._maxTime,t),this},r.prototype.pause=function(){this._clip.pause(),this._paused=!0},r.prototype.resume=function(){this._clip.resume(),this._paused=!1},r.prototype.isPaused=function(){return!!this._paused},r.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},r.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var n=t.length,o=0;o<n;o++)t[o].call(this)},r.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,n=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,n)for(var o=0;o<n.length;o++)n[o].call(this)},r.prototype._setTracksFinished=function(){for(var t=this._tracks,n=this._trackKeys,o=0;o<n.length;o++)t[n[o]].setFinished()},r.prototype._getAdditiveTrack=function(t){var n,o=this._additiveAnimators;if(o)for(var a=0;a<o.length;a++){var l=o[a].getTrack(t);l&&(n=l)}return n},r.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var n=this,o=[],a=this._maxTime||0,l=0;l<this._trackKeys.length;l++){var d=this._trackKeys[l],g=this._tracks[d],y=this._getAdditiveTrack(d),S=g.keyframes,x=S.length;if(g.prepare(a,y),g.needsAnimate())if(!this._allowDiscrete&&g.discrete){var w=S[x-1];w&&(n._target[g.propName]=w.rawValue),g.setFinished()}else o.push(g)}if(o.length||this._force){var c=new Clip$1({life:a,loop:this._loop,delay:this._delay||0,onframe:function(A){n._started=2;var R=n._additiveAnimators;if(R){for(var L=!1,$=0;$<R.length;$++)if(R[$]._clip){L=!0;break}L||(n._additiveAnimators=null)}for(var $=0;$<o.length;$++)o[$].step(n._target,A);var O=n._onframeCbs;if(O)for(var $=0;$<O.length;$++)O[$](n._target,A)},ondestroy:function(){n._doneCallback()}});this._clip=c,this.animation&&this.animation.addClip(c),t&&c.setEasing(t)}else this._doneCallback();return this}},r.prototype.stop=function(t){if(this._clip){var n=this._clip;t&&n.onframe(1),this._abortedCallback()}},r.prototype.delay=function(t){return this._delay=t,this},r.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},r.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},r.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},r.prototype.getClip=function(){return this._clip},r.prototype.getTrack=function(t){return this._tracks[t]},r.prototype.getTracks=function(){var t=this;return map$1(this._trackKeys,function(n){return t._tracks[n]})},r.prototype.stopTracks=function(t,n){if(!t.length||!this._clip)return!0;for(var o=this._tracks,a=this._trackKeys,l=0;l<t.length;l++){var d=o[t[l]];d&&!d.isFinished()&&(n?d.step(this._target,1):this._started===1&&d.step(this._target,0),d.setFinished())}for(var g=!0,l=0;l<a.length;l++)if(!o[a[l]].isFinished()){g=!1;break}return g&&this._abortedCallback(),g},r.prototype.saveTo=function(t,n,o){if(t){n=n||this._trackKeys;for(var a=0;a<n.length;a++){var l=n[a],d=this._tracks[l];if(!(!d||d.isFinished())){var g=d.keyframes,y=g[o?0:g.length-1];y&&(t[l]=cloneValue(y.rawValue))}}}},r.prototype.__changeFinalValue=function(t,n){n=n||keys(t);for(var o=0;o<n.length;o++){var a=n[o],l=this._tracks[a];if(l){var d=l.keyframes;if(d.length>1){var g=d.pop();l.addKeyframe(g.time,t[a]),l.prepare(this._maxTime,l.getAdditiveTrack())}}}},r}();const Animator$1=Animator;function getTime(){return new Date().getTime()}var Animation=function(r){__extends(t,r);function t(n){var o=r.call(this)||this;return o._running=!1,o._time=0,o._pausedTime=0,o._pauseStart=0,o._paused=!1,n=n||{},o.stage=n.stage||{},o}return t.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},t.prototype.addAnimator=function(n){n.animation=this;var o=n.getClip();o&&this.addClip(o)},t.prototype.removeClip=function(n){if(n.animation){var o=n.prev,a=n.next;o?o.next=a:this._head=a,a?a.prev=o:this._tail=o,n.next=n.prev=n.animation=null}},t.prototype.removeAnimator=function(n){var o=n.getClip();o&&this.removeClip(o),n.animation=null},t.prototype.update=function(n){for(var o=getTime()-this._pausedTime,a=o-this._time,l=this._head;l;){var d=l.next,g=l.step(o,a);g&&(l.ondestroy(),this.removeClip(l)),l=d}this._time=o,n||(this.trigger("frame",a),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var n=this;this._running=!0;function o(){n._running&&(requestAnimationFrame$2(o),!n._paused&&n.update())}requestAnimationFrame$2(o)},t.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var n=this._head;n;){var o=n.next;n.prev=n.next=n.animation=null,n=o}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(n,o){o=o||{},this.start();var a=new Animator$1(n,o.loop);return this.addAnimator(a),a},t}(Eventful$1);const Animation$1=Animation;var TOUCH_CLICK_DELAY=300,globalEventSupported=env$1.domSupported,localNativeListenerNames=function(){var r=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},o=map$1(r,function(a){var l=a.replace("mouse","pointer");return n.hasOwnProperty(l)?l:a});return{mouse:r,touch:t,pointer:o}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(r){var t=r.pointerType;return t==="pen"||t==="touch"}function setTouchTimer(r){r.touching=!0,r.touchTimer!=null&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout(function(){r.touching=!1,r.touchTimer=null},700)}function markTouch(r){r&&(r.zrByTouch=!0)}function normalizeGlobalEvent(r,t){return normalizeEvent(r.dom,new FakeGlobalEvent(r,t),!0)}function isLocalEl(r,t){for(var n=t,o=!1;n&&n.nodeType!==9&&!(o=n.domBelongToZr||n!==t&&n===r.painterRoot);)n=n.parentNode;return o}var FakeGlobalEvent=function(){function r(t,n){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=n.type,this.target=this.currentTarget=t.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return r}(),localDOMHandlers={mousedown:function(r){r=normalizeEvent(this.dom,r),this.__mayPointerCapture=[r.zrX,r.zrY],this.trigger("mousedown",r)},mousemove:function(r){r=normalizeEvent(this.dom,r);var t=this.__mayPointerCapture;t&&(r.zrX!==t[0]||r.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",r)},mouseup:function(r){r=normalizeEvent(this.dom,r),this.__togglePointerCapture(!1),this.trigger("mouseup",r)},mouseout:function(r){r=normalizeEvent(this.dom,r);var t=r.toElement||r.relatedTarget;isLocalEl(this,t)||(this.__pointerCapturing&&(r.zrEventControl="no_globalout"),this.trigger("mouseout",r))},wheel:function(r){wheelEventSupported=!0,r=normalizeEvent(this.dom,r),this.trigger("mousewheel",r)},mousewheel:function(r){wheelEventSupported||(r=normalizeEvent(this.dom,r),this.trigger("mousewheel",r))},touchstart:function(r){r=normalizeEvent(this.dom,r),markTouch(r),this.__lastTouchMoment=new Date,this.handler.processGesture(r,"start"),localDOMHandlers.mousemove.call(this,r),localDOMHandlers.mousedown.call(this,r)},touchmove:function(r){r=normalizeEvent(this.dom,r),markTouch(r),this.handler.processGesture(r,"change"),localDOMHandlers.mousemove.call(this,r)},touchend:function(r){r=normalizeEvent(this.dom,r),markTouch(r),this.handler.processGesture(r,"end"),localDOMHandlers.mouseup.call(this,r),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,r)},pointerdown:function(r){localDOMHandlers.mousedown.call(this,r)},pointermove:function(r){isPointerFromTouch(r)||localDOMHandlers.mousemove.call(this,r)},pointerup:function(r){localDOMHandlers.mouseup.call(this,r)},pointerout:function(r){isPointerFromTouch(r)||localDOMHandlers.mouseout.call(this,r)}};each$f(["click","dblclick","contextmenu"],function(r){localDOMHandlers[r]=function(t){t=normalizeEvent(this.dom,t),this.trigger(r,t)}});var globalDOMHandlers={pointermove:function(r){isPointerFromTouch(r)||globalDOMHandlers.mousemove.call(this,r)},pointerup:function(r){globalDOMHandlers.mouseup.call(this,r)},mousemove:function(r){this.trigger("mousemove",r)},mouseup:function(r){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",r),t&&(r.zrEventControl="only_globalout",this.trigger("mouseout",r))}};function mountLocalDOMEventListeners(r,t){var n=t.domHandlers;env$1.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(o){mountSingleDOMEventListener(t,o,function(a){n[o].call(r,a)})}):(env$1.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(o){mountSingleDOMEventListener(t,o,function(a){n[o].call(r,a),setTouchTimer(t)})}),each$f(localNativeListenerNames.mouse,function(o){mountSingleDOMEventListener(t,o,function(a){a=getNativeEvent(a),t.touching||n[o].call(r,a)})}))}function mountGlobalDOMEventListeners(r,t){env$1.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,n):env$1.touchEventsSupported||each$f(globalNativeListenerNames.mouse,n);function n(o){function a(l){l=getNativeEvent(l),isLocalEl(r,l.target)||(l=normalizeGlobalEvent(r,l),t.domHandlers[o].call(r,l))}mountSingleDOMEventListener(t,o,a,{capture:!0})}}function mountSingleDOMEventListener(r,t,n,o){r.mounted[t]=n,r.listenerOpts[t]=o,addEventListener(r.domTarget,t,n,o)}function unmountDOMEventListeners(r){var t=r.mounted;for(var n in t)t.hasOwnProperty(n)&&removeEventListener$1(r.domTarget,n,t[n],r.listenerOpts[n]);r.mounted={}}var DOMHandlerScope=function(){function r(t,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=n}return r}(),HandlerDomProxy=function(r){__extends(t,r);function t(n,o){var a=r.call(this)||this;return a.__pointerCapturing=!1,a.dom=n,a.painterRoot=o,a._localHandlerScope=new DOMHandlerScope(n,localDOMHandlers),globalEventSupported&&(a._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(a,a._localHandlerScope),a}return t.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},t.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},t.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var o=this._globalHandlerScope;n?mountGlobalDOMEventListeners(this,o):unmountDOMEventListeners(o)}},t}(Eventful$1);const HandlerProxy=HandlerDomProxy;var dpr=1;env$1.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(r){return r>EPSILON$2||r<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function r(){}return r.prototype.getLocalTransform=function(t){return r.getLocalTransform(this,t)},r.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},r.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},r.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},r.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},r.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},r.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,n=this.needLocalTransform(),o=this.transform;if(!(n||t)){o&&(mIdentity(o),this.invTransform=null);return}o=o||create$1(),n?this.getLocalTransform(o):mIdentity(o),t&&(n?mul(o,t,o):copy(o,t)),this.transform=o,this._resolveGlobalScaleRatio(o)},r.prototype._resolveGlobalScaleRatio=function(t){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(scaleTmp);var o=scaleTmp[0]<0?-1:1,a=scaleTmp[1]<0?-1:1,l=((scaleTmp[0]-o)*n+o)/scaleTmp[0]||0,d=((scaleTmp[1]-a)*n+a)/scaleTmp[1]||0;t[0]*=l,t[1]*=l,t[2]*=d,t[3]*=d}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,t)},r.prototype.getComputedTransform=function(){for(var t=this,n=[];t;)n.push(t),t=t.parent;for(;t=n.pop();)t.updateTransform();return this.transform},r.prototype.setLocalTransform=function(t){if(t){var n=t[0]*t[0]+t[1]*t[1],o=t[2]*t[2]+t[3]*t[3],a=Math.atan2(t[1],t[0]),l=Math.PI/2+a-Math.atan2(t[3],t[2]);o=Math.sqrt(o)*Math.cos(l),n=Math.sqrt(n),this.skewX=l,this.skewY=0,this.rotation=-a,this.x=+t[4],this.y=+t[5],this.scaleX=n,this.scaleY=o,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,n=this.transform;t&&t.transform&&(mul(tmpTransform,t.invTransform,n),n=tmpTransform);var o=this.originX,a=this.originY;(o||a)&&(originTransform[4]=o,originTransform[5]=a,mul(tmpTransform,n,originTransform),tmpTransform[4]-=o,tmpTransform[5]-=a,n=tmpTransform),this.setLocalTransform(n)}},r.prototype.getGlobalScale=function(t){var n=this.transform;return t=t||[],n?(t[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),t[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(t[0]=-t[0]),n[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},r.prototype.transformCoordToLocal=function(t,n){var o=[t,n],a=this.invTransform;return a&&applyTransform$1(o,o,a),o},r.prototype.transformCoordToGlobal=function(t,n){var o=[t,n],a=this.transform;return a&&applyTransform$1(o,o,a),o},r.prototype.getLineScale=function(){var t=this.transform;return t&&abs(t[0]-1)>1e-10&&abs(t[3]-1)>1e-10?Math.sqrt(abs(t[0]*t[3]-t[2]*t[1])):1},r.prototype.copyTransform=function(t){copyTransform(this,t)},r.getLocalTransform=function(t,n){n=n||[];var o=t.originX||0,a=t.originY||0,l=t.scaleX,d=t.scaleY,g=t.anchorX,y=t.anchorY,S=t.rotation||0,x=t.x,w=t.y,c=t.skewX?Math.tan(t.skewX):0,A=t.skewY?Math.tan(-t.skewY):0;if(o||a||g||y){var R=o+g,L=a+y;n[4]=-R*l-c*L*d,n[5]=-L*d-A*R*l}else n[4]=n[5]=0;return n[0]=l,n[3]=d,n[1]=A*l,n[2]=c*d,S&&rotate(n,n,S),n[4]+=o+x,n[5]+=a+w,n},r.initDefaultProps=function(){var t=r.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),r}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(r,t){for(var n=0;n<TRANSFORMABLE_PROPS.length;n++){var o=TRANSFORMABLE_PROPS[n];r[o]=t[o]}}const Transformable$1=Transformable;var textWidthCache={};function getWidth(r,t){t=t||DEFAULT_FONT;var n=textWidthCache[t];n||(n=textWidthCache[t]=new LRU$1(500));var o=n.get(r);return o==null&&(o=platformApi.measureText(r,t).width,n.put(r,o)),o}function innerGetBoundingRect(r,t,n,o){var a=getWidth(r,t),l=getLineHeight(t),d=adjustTextX(0,a,n),g=adjustTextY(0,l,o),y=new BoundingRect$1(d,g,a,l);return y}function getBoundingRect(r,t,n,o){var a=((r||"")+"").split(`
`),l=a.length;if(l===1)return innerGetBoundingRect(a[0],t,n,o);for(var d=new BoundingRect$1(0,0,0,0),g=0;g<a.length;g++){var y=innerGetBoundingRect(a[g],t,n,o);g===0?d.copy(y):d.union(y)}return d}function adjustTextX(r,t,n){return n==="right"?r-=t:n==="center"&&(r-=t/2),r}function adjustTextY(r,t,n){return n==="middle"?r-=t/2:n==="bottom"&&(r-=t),r}function getLineHeight(r){return getWidth("国",r)}function parsePercent$1(r,t){return typeof r=="string"?r.lastIndexOf("%")>=0?parseFloat(r)/100*t:parseFloat(r):r}function calculateTextPosition(r,t,n){var o=t.position||"inside",a=t.distance!=null?t.distance:5,l=n.height,d=n.width,g=l/2,y=n.x,S=n.y,x="left",w="top";if(o instanceof Array)y+=parsePercent$1(o[0],n.width),S+=parsePercent$1(o[1],n.height),x=null,w=null;else switch(o){case"left":y-=a,S+=g,x="right",w="middle";break;case"right":y+=a+d,S+=g,w="middle";break;case"top":y+=d/2,S-=a,x="center",w="bottom";break;case"bottom":y+=d/2,S+=l+a,x="center";break;case"inside":y+=d/2,S+=g,x="center",w="middle";break;case"insideLeft":y+=a,S+=g,w="middle";break;case"insideRight":y+=d-a,S+=g,x="right",w="middle";break;case"insideTop":y+=d/2,S+=a,x="center";break;case"insideBottom":y+=d/2,S+=l-a,x="center",w="bottom";break;case"insideTopLeft":y+=a,S+=a;break;case"insideTopRight":y+=d-a,S+=a,x="right";break;case"insideBottomLeft":y+=a,S+=l-a,w="bottom";break;case"insideBottomRight":y+=d-a,S+=l-a,x="right",w="bottom";break}return r=r||{},r.x=y,r.y=S,r.align=x,r.verticalAlign=w,r}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(r,t){return r[t]=!0,r},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect$1(0,0,0,0),Element$1=function(){function r(t){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return r.prototype._init=function(t){this.attr(t)},r.prototype.drift=function(t,n,o){switch(this.draggable){case"horizontal":n=0;break;case"vertical":t=0;break}var a=this.transform;a||(a=this.transform=[1,0,0,1,0,0]),a[4]+=t,a[5]+=n,this.decomposeTransform(),this.markRedraw()},r.prototype.beforeUpdate=function(){},r.prototype.afterUpdate=function(){},r.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},r.prototype.updateInnerText=function(t){var n=this._textContent;if(n&&(!n.ignore||t)){this.textConfig||(this.textConfig={});var o=this.textConfig,a=o.local,l=n.innerTransformable,d=void 0,g=void 0,y=!1;l.parent=a?this:null;var S=!1;if(l.copyTransform(n),o.position!=null){var x=tmpBoundingRect;o.layoutRect?x.copy(o.layoutRect):x.copy(this.getBoundingRect()),a||x.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,o,x):calculateTextPosition(tmpTextPosCalcRes,o,x),l.x=tmpTextPosCalcRes.x,l.y=tmpTextPosCalcRes.y,d=tmpTextPosCalcRes.align,g=tmpTextPosCalcRes.verticalAlign;var w=o.origin;if(w&&o.rotation!=null){var c=void 0,A=void 0;w==="center"?(c=x.width*.5,A=x.height*.5):(c=parsePercent$1(w[0],x.width),A=parsePercent$1(w[1],x.height)),S=!0,l.originX=-l.x+c+(a?0:x.x),l.originY=-l.y+A+(a?0:x.y)}}o.rotation!=null&&(l.rotation=o.rotation);var R=o.offset;R&&(l.x+=R[0],l.y+=R[1],S||(l.originX=-R[0],l.originY=-R[1]));var L=o.inside==null?typeof o.position=="string"&&o.position.indexOf("inside")>=0:o.inside,$=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),O=void 0,z=void 0,V=void 0;L&&this.canBeInsideText()?(O=o.insideFill,z=o.insideStroke,(O==null||O==="auto")&&(O=this.getInsideTextFill()),(z==null||z==="auto")&&(z=this.getInsideTextStroke(O),V=!0)):(O=o.outsideFill,z=o.outsideStroke,(O==null||O==="auto")&&(O=this.getOutsideFill()),(z==null||z==="auto")&&(z=this.getOutsideStroke(O),V=!0)),O=O||"#000",(O!==$.fill||z!==$.stroke||V!==$.autoStroke||d!==$.align||g!==$.verticalAlign)&&(y=!0,$.fill=O,$.stroke=z,$.autoStroke=V,$.align=d,$.verticalAlign=g,n.setDefaultTextStyle($)),n.__dirty|=REDRAW_BIT,y&&n.dirtyStyle(!0)}},r.prototype.canBeInsideText=function(){return!0},r.prototype.getInsideTextFill=function(){return"#fff"},r.prototype.getInsideTextStroke=function(t){return"#000"},r.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},r.prototype.getOutsideStroke=function(t){var n=this.__zr&&this.__zr.getBackgroundColor(),o=typeof n=="string"&&parse(n);o||(o=[255,255,255,1]);for(var a=o[3],l=this.__zr.isDarkMode(),d=0;d<3;d++)o[d]=o[d]*a+(l?0:255)*(1-a);return o[3]=1,stringify(o,"rgba")},r.prototype.traverse=function(t,n){},r.prototype.attrKV=function(t,n){t==="textConfig"?this.setTextConfig(n):t==="textContent"?this.setTextContent(n):t==="clipPath"?this.setClipPath(n):t==="extra"?(this.extra=this.extra||{},extend(this.extra,n)):this[t]=n},r.prototype.hide=function(){this.ignore=!0,this.markRedraw()},r.prototype.show=function(){this.ignore=!1,this.markRedraw()},r.prototype.attr=function(t,n){if(typeof t=="string")this.attrKV(t,n);else if(isObject$3(t))for(var o=t,a=keys(o),l=0;l<a.length;l++){var d=a[l];this.attrKV(d,t[d])}return this.markRedraw(),this},r.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var n=this._normalState,o=0;o<this.animators.length;o++){var a=this.animators[o],l=a.__fromStateTransition;if(!(a.getLoop()||l&&l!==PRESERVED_NORMAL_STATE)){var d=a.targetName,g=d?n[d]:n;a.saveTo(g)}}},r.prototype._innerSaveToNormal=function(t){var n=this._normalState;n||(n=this._normalState={}),t.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(t,n,PRIMARY_STATES_KEYS$1)},r.prototype._savePrimaryToNormal=function(t,n,o){for(var a=0;a<o.length;a++){var l=o[a];t[l]!=null&&!(l in n)&&(n[l]=this[l])}},r.prototype.hasState=function(){return this.currentStates.length>0},r.prototype.getState=function(t){return this.states[t]},r.prototype.ensureState=function(t){var n=this.states;return n[t]||(n[t]={}),n[t]},r.prototype.clearStates=function(t){this.useState(PRESERVED_NORMAL_STATE,!1,t)},r.prototype.useState=function(t,n,o,a){var l=t===PRESERVED_NORMAL_STATE,d=this.hasState();if(!(!d&&l)){var g=this.currentStates,y=this.stateTransition;if(!(indexOf(g,t)>=0&&(n||g.length===1))){var S;if(this.stateProxy&&!l&&(S=this.stateProxy(t)),S||(S=this.states&&this.states[t]),!S&&!l){logError("State "+t+" not exists.");return}l||this.saveCurrentToNormalState(S);var x=!!(S&&S.hoverLayer||a);x&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,S,this._normalState,n,!o&&!this.__inHover&&y&&y.duration>0,y);var w=this._textContent,c=this._textGuide;return w&&w.useState(t,n,o,x),c&&c.useState(t,n,o,x),l?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!x&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),S}}},r.prototype.useStates=function(t,n,o){if(!t.length)this.clearStates();else{var a=[],l=this.currentStates,d=t.length,g=d===l.length;if(g){for(var y=0;y<d;y++)if(t[y]!==l[y]){g=!1;break}}if(g)return;for(var y=0;y<d;y++){var S=t[y],x=void 0;this.stateProxy&&(x=this.stateProxy(S,t)),x||(x=this.states[S]),x&&a.push(x)}var w=a[d-1],c=!!(w&&w.hoverLayer||o);c&&this._toggleHoverLayerFlag(!0);var A=this._mergeStates(a),R=this.stateTransition;this.saveCurrentToNormalState(A),this._applyStateObj(t.join(","),A,this._normalState,!1,!n&&!this.__inHover&&R&&R.duration>0,R);var L=this._textContent,$=this._textGuide;L&&L.useStates(t,n,c),$&&$.useStates(t,n,c),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},r.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var n=this.animators[t];n.targetName&&n.changeTarget(this[n.targetName])}},r.prototype.removeState=function(t){var n=indexOf(this.currentStates,t);if(n>=0){var o=this.currentStates.slice();o.splice(n,1),this.useStates(o)}},r.prototype.replaceState=function(t,n,o){var a=this.currentStates.slice(),l=indexOf(a,t),d=indexOf(a,n)>=0;l>=0?d?a.splice(l,1):a[l]=n:o&&!d&&a.push(n),this.useStates(a)},r.prototype.toggleState=function(t,n){n?this.useState(t,!0):this.removeState(t)},r.prototype._mergeStates=function(t){for(var n={},o,a=0;a<t.length;a++){var l=t[a];extend(n,l),l.textConfig&&(o=o||{},extend(o,l.textConfig))}return o&&(n.textConfig=o),n},r.prototype._applyStateObj=function(t,n,o,a,l,d){var g=!(n&&a);n&&n.textConfig?(this.textConfig=extend({},a?this.textConfig:o.textConfig),extend(this.textConfig,n.textConfig)):g&&o.textConfig&&(this.textConfig=o.textConfig);for(var y={},S=!1,x=0;x<PRIMARY_STATES_KEYS$1.length;x++){var w=PRIMARY_STATES_KEYS$1[x],c=l&&DEFAULT_ANIMATABLE_MAP[w];n&&n[w]!=null?c?(S=!0,y[w]=n[w]):this[w]=n[w]:g&&o[w]!=null&&(c?(S=!0,y[w]=o[w]):this[w]=o[w])}if(!l)for(var x=0;x<this.animators.length;x++){var A=this.animators[x],R=A.targetName;A.getLoop()||A.__changeFinalValue(R?(n||o)[R]:n||o)}S&&this._transitionState(t,y,d)},r.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var n=this.__zr;n&&t.addSelfToZr(n),t.__zr=n,t.__hostTarget=this}},r.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},r.prototype.getClipPath=function(){return this._clipPath},r.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},r.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},r.prototype.getTextContent=function(){return this._textContent},r.prototype.setTextContent=function(t){var n=this._textContent;n!==t&&(n&&n!==t&&this.removeTextContent(),t.innerTransformable=new Transformable$1,this._attachComponent(t),this._textContent=t,this.markRedraw())},r.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),extend(this.textConfig,t),this.markRedraw()},r.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},r.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},r.prototype.getTextGuideLine=function(){return this._textGuide},r.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},r.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},r.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},r.prototype.dirty=function(){this.markRedraw()},r.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var n=this._textContent,o=this._textGuide;n&&(n.__inHover=t),o&&(o.__inHover=t)},r.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var n=this.animators;if(n)for(var o=0;o<n.length;o++)t.animation.addAnimator(n[o]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},r.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var o=0;o<n.length;o++)t.animation.removeAnimator(n[o]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},r.prototype.animate=function(t,n,o){var a=t?this[t]:this,l=new Animator$1(a,n,o);return t&&(l.targetName=t),this.addAnimator(l,t),l},r.prototype.addAnimator=function(t,n){var o=this.__zr,a=this;t.during(function(){a.updateDuringAnimation(n)}).done(function(){var l=a.animators,d=indexOf(l,t);d>=0&&l.splice(d,1)}),this.animators.push(t),o&&o.animation.addAnimator(t),o&&o.wakeUp()},r.prototype.updateDuringAnimation=function(t){this.markRedraw()},r.prototype.stopAnimation=function(t,n){for(var o=this.animators,a=o.length,l=[],d=0;d<a;d++){var g=o[d];!t||t===g.scope?g.stop(n):l.push(g)}return this.animators=l,this},r.prototype.animateTo=function(t,n,o){animateTo(this,t,n,o)},r.prototype.animateFrom=function(t,n,o){animateTo(this,t,n,o,!0)},r.prototype._transitionState=function(t,n,o,a){for(var l=animateTo(this,n,o,a),d=0;d<l.length;d++)l[d].__fromStateTransition=t},r.prototype.getBoundingRect=function(){return null},r.prototype.getPaintRect=function(){return null},r.initDefaultProps=function(){var t=r.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=REDRAW_BIT;function n(o,a,l,d){Object.defineProperty(t,o,{get:function(){if(!this[a]){var y=this[a]=[];g(this,y)}return this[a]},set:function(y){this[l]=y[0],this[d]=y[1],this[a]=y,g(this,y)}});function g(y,S){Object.defineProperty(S,0,{get:function(){return y[l]},set:function(x){y[l]=x}}),Object.defineProperty(S,1,{get:function(){return y[d]},set:function(x){y[d]=x}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),r}();mixin(Element$1,Eventful$1);mixin(Element$1,Transformable$1);function animateTo(r,t,n,o,a){n=n||{};var l=[];animateToShallow(r,"",r,t,n,o,l,a);var d=l.length,g=!1,y=n.done,S=n.aborted,x=function(){g=!0,d--,d<=0&&(g?y&&y():S&&S())},w=function(){d--,d<=0&&(g?y&&y():S&&S())};d||y&&y(),l.length>0&&n.during&&l[0].during(function(R,L){n.during(L)});for(var c=0;c<l.length;c++){var A=l[c];x&&A.done(x),w&&A.aborted(w),n.force&&A.duration(n.duration),A.start(n.easing)}return l}function copyArrShallow(r,t,n){for(var o=0;o<n;o++)r[o]=t[o]}function is2DArray(r){return isArrayLike(r[0])}function copyValue(r,t,n){if(isArrayLike(t[n]))if(isArrayLike(r[n])||(r[n]=[]),isTypedArray(t[n])){var o=t[n].length;r[n].length!==o&&(r[n]=new t[n].constructor(o),copyArrShallow(r[n],t[n],o))}else{var a=t[n],l=r[n],d=a.length;if(is2DArray(a))for(var g=a[0].length,y=0;y<d;y++)l[y]?copyArrShallow(l[y],a[y],g):l[y]=Array.prototype.slice.call(a[y]);else copyArrShallow(l,a,d);l.length=a.length}else r[n]=t[n]}function isValueSame(r,t){return r===t||isArrayLike(r)&&isArrayLike(t)&&is1DArraySame(r,t)}function is1DArraySame(r,t){var n=r.length;if(n!==t.length)return!1;for(var o=0;o<n;o++)if(r[o]!==t[o])return!1;return!0}function animateToShallow(r,t,n,o,a,l,d,g){for(var y=keys(o),S=a.duration,x=a.delay,w=a.additive,c=a.setToFinal,A=!isObject$3(l),R=r.animators,L=[],$=0;$<y.length;$++){var O=y[$],z=o[O];if(z!=null&&n[O]!=null&&(A||l[O]))if(isObject$3(z)&&!isArrayLike(z)&&!isGradientObject(z)){if(t){g||(n[O]=z,r.updateDuringAnimation(t));continue}animateToShallow(r,O,n[O],z,a,l&&l[O],d,g)}else L.push(O);else g||(n[O]=z,r.updateDuringAnimation(t),L.push(O))}var V=L.length;if(!w&&V)for(var j=0;j<R.length;j++){var K=R[j];if(K.targetName===t){var Z=K.stopTracks(L);if(Z){var q=indexOf(R,K);R.splice(q,1)}}}if(a.force||(L=filter(L,function(re){return!isValueSame(o[re],n[re])}),V=L.length),V>0||a.force&&!d.length){var ie=void 0,te=void 0,oe=void 0;if(g){te={},c&&(ie={});for(var j=0;j<V;j++){var O=L[j];te[O]=n[O],c?ie[O]=o[O]:n[O]=o[O]}}else if(c){oe={};for(var j=0;j<V;j++){var O=L[j];oe[O]=cloneValue(n[O]),copyValue(n,o,O)}}var K=new Animator$1(n,!1,!1,w?filter(R,function(he){return he.targetName===t}):null);K.targetName=t,a.scope&&(K.scope=a.scope),c&&ie&&K.whenWithKeys(0,ie,L),oe&&K.whenWithKeys(0,oe,L),K.whenWithKeys(S??500,g?te:o,L).delay(x||0),r.addAnimator(K,t),d.push(K)}}const Element$2=Element$1;var Group$3=function(r){__extends(t,r);function t(n){var o=r.call(this)||this;return o.isGroup=!0,o._children=[],o.attr(n),o}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(n){return this._children[n]},t.prototype.childOfName=function(n){for(var o=this._children,a=0;a<o.length;a++)if(o[a].name===n)return o[a]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},t.prototype.addBefore=function(n,o){if(n&&n!==this&&n.parent!==this&&o&&o.parent===this){var a=this._children,l=a.indexOf(o);l>=0&&(a.splice(l,0,n),this._doAdd(n))}return this},t.prototype.replace=function(n,o){var a=indexOf(this._children,n);return a>=0&&this.replaceAt(o,a),this},t.prototype.replaceAt=function(n,o){var a=this._children,l=a[o];if(n&&n!==this&&n.parent!==this&&n!==l){a[o]=n,l.parent=null;var d=this.__zr;d&&l.removeSelfFromZr(d),this._doAdd(n)}return this},t.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var o=this.__zr;o&&o!==n.__zr&&n.addSelfToZr(o),o&&o.refresh()},t.prototype.remove=function(n){var o=this.__zr,a=this._children,l=indexOf(a,n);return l<0?this:(a.splice(l,1),n.parent=null,o&&n.removeSelfFromZr(o),o&&o.refresh(),this)},t.prototype.removeAll=function(){for(var n=this._children,o=this.__zr,a=0;a<n.length;a++){var l=n[a];o&&l.removeSelfFromZr(o),l.parent=null}return n.length=0,this},t.prototype.eachChild=function(n,o){for(var a=this._children,l=0;l<a.length;l++){var d=a[l];n.call(o,d,l)}return this},t.prototype.traverse=function(n,o){for(var a=0;a<this._children.length;a++){var l=this._children[a],d=n.call(o,l);l.isGroup&&!d&&l.traverse(n,o)}return this},t.prototype.addSelfToZr=function(n){r.prototype.addSelfToZr.call(this,n);for(var o=0;o<this._children.length;o++){var a=this._children[o];a.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){r.prototype.removeSelfFromZr.call(this,n);for(var o=0;o<this._children.length;o++){var a=this._children[o];a.removeSelfFromZr(n)}},t.prototype.getBoundingRect=function(n){for(var o=new BoundingRect$1(0,0,0,0),a=n||this._children,l=[],d=null,g=0;g<a.length;g++){var y=a[g];if(!(y.ignore||y.invisible)){var S=y.getBoundingRect(),x=y.getLocalTransform(l);x?(BoundingRect$1.applyTransform(o,S,x),d=d||o.clone(),d.union(o)):(d=d||S.clone(),d.union(S))}}return d||o},t}(Element$2);Group$3.prototype.type="group";const Group$4=Group$3;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(r){delete instances$1[r]}function isDarkMode(r){if(!r)return!1;if(typeof r=="string")return lum(r,1)<DARK_MODE_THRESHOLD;if(r.colorStops){for(var t=r.colorStops,n=0,o=t.length,a=0;a<o;a++)n+=lum(t[a].color,1);return n/=o,n<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function r(t,n,o){var a=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,o=o||{},this.dom=n,this.id=t;var l=new Storage$1,d=o.renderer||"canvas";painterCtors[d]||(d=keys(painterCtors)[0]),o.useDirtyRect=o.useDirtyRect==null?!1:o.useDirtyRect;var g=new painterCtors[d](n,l,o,t),y=o.ssr||g.ssrOnly;this.storage=l,this.painter=g;var S=!env$1.node&&!env$1.worker&&!y?new HandlerProxy(g.getViewportRoot(),g.root):null,x=o.useCoarsePointer,w=x==null||x==="auto"?env$1.touchEventsSupported:!!x,c=44,A;w&&(A=retrieve2(o.pointerSize,c)),this.handler=new Handler$1(l,g,S,g.root,A),this.animation=new Animation$1({stage:{update:y?null:function(){return a._flush(!0)}}}),y||this.animation.start()}return r.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},r.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},r.prototype.configLayer=function(t,n){this.painter.configLayer&&this.painter.configLayer(t,n),this.refresh()},r.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=isDarkMode(t)},r.prototype.getBackgroundColor=function(){return this._backgroundColor},r.prototype.setDarkMode=function(t){this._darkMode=t},r.prototype.isDarkMode=function(){return this._darkMode},r.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},r.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},r.prototype.flush=function(){this._flush(!1)},r.prototype._flush=function(t){var n,o=getTime();this._needsRefresh&&(n=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var a=getTime();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:a-o})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},r.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},r.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},r.prototype.refreshHover=function(){this._needsRefreshHover=!0},r.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},r.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},r.prototype.clearAnimation=function(){this.animation.clear()},r.prototype.getWidth=function(){return this.painter.getWidth()},r.prototype.getHeight=function(){return this.painter.getHeight()},r.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},r.prototype.findHover=function(t,n){return this.handler.findHover(t,n)},r.prototype.on=function(t,n,o){return this.handler.on(t,n,o),this},r.prototype.off=function(t,n){this.handler.off(t,n)},r.prototype.trigger=function(t,n){this.handler.trigger(t,n)},r.prototype.clear=function(){for(var t=this.storage.getRoots(),n=0;n<t.length;n++)t[n]instanceof Group$4&&t[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},r.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,delInstance(this.id)},r}();function init$2(r,t){var n=new ZRender(guid(),r,t);return instances$1[n.id]=n,n}function dispose$1(r){r.dispose()}function disposeAll(){for(var r in instances$1)instances$1.hasOwnProperty(r)&&instances$1[r].dispose();instances$1={}}function getInstance(r){return instances$1[r]}function registerPainter(r,t){painterCtors[r]=t}var version$1="5.4.4";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getInstance,init:init$2,registerPainter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(r){return r.replace(/^\s+|\s+$/g,"")}function linearMap$2(r,t,n,o){var a=t[0],l=t[1],d=n[0],g=n[1],y=l-a,S=g-d;if(y===0)return S===0?d:(d+g)/2;if(o)if(y>0){if(r<=a)return d;if(r>=l)return g}else{if(r>=a)return d;if(r<=l)return g}else{if(r===a)return d;if(r===l)return g}return(r-a)/y*S+d}function parsePercent(r,t){switch(r){case"center":case"middle":r="50%";break;case"left":case"top":r="0%";break;case"right":case"bottom":r="100%";break}return isString(r)?_trim(r).match(/%$/)?parseFloat(r)/100*t:parseFloat(r):r==null?NaN:+r}function round$3(r,t,n){return t==null&&(t=10),t=Math.min(Math.max(0,t),ROUND_SUPPORTED_PRECISION_MAX),r=(+r).toFixed(t),n?r:+r}function asc$2(r){return r.sort(function(t,n){return t-n}),r}function getPrecision(r){if(r=+r,isNaN(r))return 0;if(r>1e-14){for(var t=1,n=0;n<15;n++,t*=10)if(Math.round(r*t)/t===r)return n}return getPrecisionSafe(r)}function getPrecisionSafe(r){var t=r.toString().toLowerCase(),n=t.indexOf("e"),o=n>0?+t.slice(n+1):0,a=n>0?n:t.length,l=t.indexOf("."),d=l<0?0:a-1-l;return Math.max(0,d-o)}function getPixelPrecision(r,t){var n=Math.log,o=Math.LN10,a=Math.floor(n(r[1]-r[0])/o),l=Math.round(n(Math.abs(t[1]-t[0]))/o),d=Math.min(Math.max(-a+l,0),20);return isFinite(d)?d:20}function getPercentWithPrecision(r,t,n){if(!r[t])return 0;var o=getPercentSeats(r,n);return o[t]||0}function getPercentSeats(r,t){var n=reduce(r,function(A,R){return A+(isNaN(R)?0:R)},0);if(n===0)return[];for(var o=Math.pow(10,t),a=map$1(r,function(A){return(isNaN(A)?0:A)/n*o*100}),l=o*100,d=map$1(a,function(A){return Math.floor(A)}),g=reduce(d,function(A,R){return A+R},0),y=map$1(a,function(A,R){return A-d[R]});g<l;){for(var S=Number.NEGATIVE_INFINITY,x=null,w=0,c=y.length;w<c;++w)y[w]>S&&(S=y[w],x=w);++d[x],y[x]=0,++g}return map$1(d,function(A){return A/o})}function addSafe(r,t){var n=Math.max(getPrecision(r),getPrecision(t)),o=r+t;return n>ROUND_SUPPORTED_PRECISION_MAX?o:round$3(o,n)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(r){var t=Math.PI*2;return(r%t+t)%t}function isRadianAroundZero(r){return r>-RADIAN_EPSILON&&r<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(r){if(r instanceof Date)return r;if(isString(r)){var t=TIME_REG.exec(r);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(n-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(r==null)return new Date(NaN);return new Date(Math.round(r))}function quantity(r){return Math.pow(10,quantityExponent(r))}function quantityExponent(r){if(r===0)return 0;var t=Math.floor(Math.log(r)/Math.LN10);return r/Math.pow(10,t)>=10&&t++,t}function nice(r,t){var n=quantityExponent(r),o=Math.pow(10,n),a=r/o,l;return t?a<1.5?l=1:a<2.5?l=2:a<4?l=3:a<7?l=5:l=10:a<1?l=1:a<2?l=2:a<3?l=3:a<5?l=5:l=10,r=l*o,n>=-20?+r.toFixed(n<0?-n:0):r}function quantile(r,t){var n=(r.length-1)*t+1,o=Math.floor(n),a=+r[o-1],l=n-o;return l?a+l*(r[o]-a):a}function reformIntervals(r){r.sort(function(y,S){return g(y,S,0)?-1:1});for(var t=-1/0,n=1,o=0;o<r.length;){for(var a=r[o].interval,l=r[o].close,d=0;d<2;d++)a[d]<=t&&(a[d]=t,l[d]=d?1:1-n),t=a[d],n=l[d];a[0]===a[1]&&l[0]*l[1]!==1?r.splice(o,1):o++}return r;function g(y,S,x){return y.interval[x]<S.interval[x]||y.interval[x]===S.interval[x]&&(y.close[x]-S.close[x]===(x?-1:1)||!x&&g(y,S,1))}}function numericToNumber(r){var t=parseFloat(r);return t==r&&(t!==0||!isString(r)||r.indexOf("x")<=0)?t:NaN}function isNumeric(r){return!isNaN(numericToNumber(r))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(r,t){return t===0?r:getGreatestCommonDividor(t,r%t)}function getLeastCommonMultiple(r,t){return r==null?t:t==null?r:r*t/getGreatestCommonDividor(r,t)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(r,t,n){if(hasConsole){if(n){if(storedLogs[t])return;storedLogs[t]=!0}console[r](ECHARTS_PREFIX+t)}}function warn(r,t){outputLog("warn",r,t)}function throwError(r){throw new Error(r)}function interpolateNumber(r,t,n){return(t-r)*n+r}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(r){return r instanceof Array?r:r==null?[]:[r]}function defaultEmphasis(r,t,n){if(r){r[t]=r[t]||{},r.emphasis=r.emphasis||{},r.emphasis[t]=r.emphasis[t]||{};for(var o=0,a=n.length;o<a;o++){var l=n[o];!r.emphasis[t].hasOwnProperty(l)&&r[t].hasOwnProperty(l)&&(r.emphasis[t][l]=r[t][l])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(r){return isObject$3(r)&&!isArray$1(r)&&!(r instanceof Date)?r.value:r}function isDataItemOption(r){return isObject$3(r)&&!(r instanceof Array)}function mappingToExists(r,t,n){var o=n==="normalMerge",a=n==="replaceMerge",l=n==="replaceAll";r=r||[],t=(t||[]).slice();var d=createHashMap();each$f(t,function(y,S){if(!isObject$3(y)){t[S]=null;return}});var g=prepareResult(r,d,n);return(o||a)&&mappingById(g,r,d,t),o&&mappingByName(g,t),o||a?mappingByIndex(g,t,a):l&&mappingInReplaceAllMode(g,t),makeIdAndName(g),g}function prepareResult(r,t,n){var o=[];if(n==="replaceAll")return o;for(var a=0;a<r.length;a++){var l=r[a];l&&l.id!=null&&t.set(l.id,a),o.push({existing:n==="replaceMerge"||isComponentIdInternal(l)?null:l,newOption:null,keyInfo:null,brandNew:null})}return o}function mappingById(r,t,n,o){each$f(o,function(a,l){if(!(!a||a.id==null)){var d=makeComparableKey(a.id),g=n.get(d);if(g!=null){var y=r[g];assert(!y.newOption,'Duplicated option on id "'+d+'".'),y.newOption=a,y.existing=t[g],o[l]=null}}})}function mappingByName(r,t){each$f(t,function(n,o){if(!(!n||n.name==null))for(var a=0;a<r.length;a++){var l=r[a].existing;if(!r[a].newOption&&l&&(l.id==null||n.id==null)&&!isComponentIdInternal(n)&&!isComponentIdInternal(l)&&keyExistAndEqual("name",l,n)){r[a].newOption=n,t[o]=null;return}}})}function mappingByIndex(r,t,n){each$f(t,function(o){if(o){for(var a,l=0;(a=r[l])&&(a.newOption||isComponentIdInternal(a.existing)||a.existing&&o.id!=null&&!keyExistAndEqual("id",o,a.existing));)l++;a?(a.newOption=o,a.brandNew=n):r.push({newOption:o,brandNew:n,existing:null,keyInfo:null}),l++}})}function mappingInReplaceAllMode(r,t){each$f(t,function(n){r.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(r){var t=createHashMap();each$f(r,function(n){var o=n.existing;o&&t.set(o.id,n)}),each$f(r,function(n){var o=n.newOption;assert(!o||o.id==null||!t.get(o.id)||t.get(o.id)===n,"id duplicates: "+(o&&o.id)),o&&o.id!=null&&t.set(o.id,n),!n.keyInfo&&(n.keyInfo={})}),each$f(r,function(n,o){var a=n.existing,l=n.newOption,d=n.keyInfo;if(isObject$3(l)){if(d.name=l.name!=null?makeComparableKey(l.name):a?a.name:DUMMY_COMPONENT_NAME_PREFIX+o,a)d.id=makeComparableKey(a.id);else if(l.id!=null)d.id=makeComparableKey(l.id);else{var g=0;do d.id="\0"+d.name+"\0"+g++;while(t.get(d.id))}t.set(d.id,n)}})}function keyExistAndEqual(r,t,n){var o=convertOptionIdName(t[r],null),a=convertOptionIdName(n[r],null);return o!=null&&a!=null&&o===a}function makeComparableKey(r){return convertOptionIdName(r,"")}function convertOptionIdName(r,t){return r==null?t:isString(r)?r:isNumber(r)||isStringSafe(r)?r+"":t}function isNameSpecified(r){var t=r.name;return!!(t&&t.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(r){return r&&r.id!=null&&makeComparableKey(r.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(r){return INTERNAL_COMPONENT_ID_PREFIX+r}function setComponentTypeToKeyInfo(r,t,n){each$f(r,function(o){var a=o.newOption;isObject$3(a)&&(o.keyInfo.mainType=t,o.keyInfo.subType=determineSubType(t,a,o.existing,n))})}function determineSubType(r,t,n,o){var a=t.type?t.type:n?n.subType:o.determineSubType(r,t);return a}function compressBatches(r,t){var n={},o={};return a(r||[],n),a(t||[],o,n),[l(n),l(o)];function a(d,g,y){for(var S=0,x=d.length;S<x;S++){var w=convertOptionIdName(d[S].seriesId,null);if(w==null)return;for(var c=normalizeToArray(d[S].dataIndex),A=y&&y[w],R=0,L=c.length;R<L;R++){var $=c[R];A&&A[$]?A[$]=null:(g[w]||(g[w]={}))[$]=1}}}function l(d,g){var y=[];for(var S in d)if(d.hasOwnProperty(S)&&d[S]!=null)if(g)y.push(+S);else{var x=l(d[S],!0);x.length&&y.push({seriesId:S,dataIndex:x})}return y}}function queryDataIndex(r,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return isArray$1(t.dataIndex)?map$1(t.dataIndex,function(n){return r.indexOfRawIndex(n)}):r.indexOfRawIndex(t.dataIndex);if(t.name!=null)return isArray$1(t.name)?map$1(t.name,function(n){return r.indexOfName(n)}):r.indexOfName(t.name)}function makeInner(){var r="__ec_inner_"+innerUniqueIndex++;return function(t){return t[r]||(t[r]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(r,t,n){var o=preParseFinder(t,n),a=o.mainTypeSpecified,l=o.queryOptionMap,d=o.others,g=d,y=n?n.defaultMainType:null;return!a&&y&&l.set(y,{}),l.each(function(S,x){var w=queryReferringComponents(r,x,S,{useDefault:y===x,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});g[x+"Models"]=w.models,g[x+"Model"]=w.models[0]}),g}function preParseFinder(r,t){var n;if(isString(r)){var o={};o[r+"Index"]=0,n=o}else n=r;var a=createHashMap(),l={},d=!1;return each$f(n,function(g,y){if(y==="dataIndex"||y==="dataIndexInside"){l[y]=g;return}var S=y.match(/^(\w+)(Index|Id|Name)$/)||[],x=S[1],w=(S[2]||"").toLowerCase();if(!(!x||!w||t&&t.includeMainTypes&&indexOf(t.includeMainTypes,x)<0)){d=d||!!x;var c=a.get(x)||a.set(x,{});c[w]=g}}),{mainTypeSpecified:d,queryOptionMap:a,others:l}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(r,t,n,o){o=o||SINGLE_REFERRING;var a=n.index,l=n.id,d=n.name,g={models:null,specified:a!=null||l!=null||d!=null};if(!g.specified){var y=void 0;return g.models=o.useDefault&&(y=r.getComponent(t))?[y]:[],g}return a==="none"||a===!1?(assert(o.enableNone,'`"none"` or `false` is not a valid value on index option.'),g.models=[],g):(a==="all"&&(assert(o.enableAll,'`"all"` is not a valid value on index option.'),a=l=d=null),g.models=r.queryComponents({mainType:t,index:a,id:l,name:d}),g)}function setAttribute(r,t,n){r.setAttribute?r.setAttribute(t,n):r[t]=n}function getAttribute(r,t){return r.getAttribute?r.getAttribute(t):r[t]}function getTooltipRenderMode(r){return r==="auto"?env$1.domSupported?"html":"richText":r||"html"}function groupData(r,t){var n=createHashMap(),o=[];return each$f(r,function(a){var l=t(a);(n.get(l)||(o.push(l),n.set(l,[]))).push(a)}),{keys:o,buckets:n}}function interpolateRawValues(r,t,n,o,a){var l=t==null||t==="auto";if(o==null)return o;if(isNumber(o)){var d=interpolateNumber(n||0,o,a);return round$3(d,l?Math.max(getPrecision(n||0),getPrecision(o)):t)}else{if(isString(o))return a<1?n:o;for(var g=[],y=n,S=o,x=Math.max(y?y.length:0,S.length),w=0;w<x;++w){var c=r.getDimensionInfo(w);if(c&&c.type==="ordinal")g[w]=(a<1&&y?y:S)[w];else{var A=y&&y[w]?y[w]:0,R=S[w],d=interpolateNumber(A,R,a);g[w]=round$3(d,l?Math.max(getPrecision(A),getPrecision(R)):t)}}return g}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(r){var t={main:"",sub:""};if(r){var n=r.split(TYPE_DELIMITER);t.main=n[0]||"",t.sub=n[1]||""}return t}function checkClassType(r){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function isExtendedClass(r){return!!(r&&r[IS_EXTENDED_CLASS])}function enableClassExtend(r,t){r.$constructor=r,r.extend=function(n){var o=this,a;return isESClass(o)?a=function(l){__extends(d,l);function d(){return l.apply(this,arguments)||this}return d}(o):(a=function(){(n.$constructor||o).apply(this,arguments)},inherits(a,this)),extend(a.prototype,n),a[IS_EXTENDED_CLASS]=!0,a.extend=this.extend,a.superCall=superCall,a.superApply=superApply,a.superClass=o,a}}function isESClass(r){return isFunction(r)&&/^class\s/.test(Function.prototype.toString.call(r))}function mountExtend(r,t){r.extend=t.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(r){var t=["__\0is_clz",classBase++].join("_");r.prototype[t]=!0,r.isInstance=function(n){return!!(n&&n[t])}}function superCall(r,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return this.superClass.prototype[t].apply(r,n)}function superApply(r,t,n){return this.superClass.prototype[t].apply(r,n)}function enableClassManagement(r){var t={};r.registerClass=function(o){var a=o.type||o.prototype.type;if(a){checkClassType(a),o.prototype.type=a;var l=parseClassType(a);if(!l.sub)t[l.main]=o;else if(l.sub!==IS_CONTAINER){var d=n(l);d[l.sub]=o}}return o},r.getClass=function(o,a,l){var d=t[o];if(d&&d[IS_CONTAINER]&&(d=a?d[a]:null),l&&!d)throw new Error(a?"Component "+o+"."+(a||"")+" is used but not imported.":o+".type should be specified.");return d},r.getClassesByMainType=function(o){var a=parseClassType(o),l=[],d=t[a.main];return d&&d[IS_CONTAINER]?each$f(d,function(g,y){y!==IS_CONTAINER&&l.push(g)}):l.push(d),l},r.hasClass=function(o){var a=parseClassType(o);return!!t[a.main]},r.getAllClassMainTypes=function(){var o=[];return each$f(t,function(a,l){o.push(l)}),o},r.hasSubTypes=function(o){var a=parseClassType(o),l=t[a.main];return l&&l[IS_CONTAINER]};function n(o){var a=t[o.main];return(!a||!a[IS_CONTAINER])&&(a=t[o.main]={},a[IS_CONTAINER]=!0),a}}function makeStyleMapper(r,t){for(var n=0;n<r.length;n++)r[n][1]||(r[n][1]=r[n][0]);return t=t||!1,function(o,a,l){for(var d={},g=0;g<r.length;g++){var y=r[g][1];if(!(a&&indexOf(a,y)>=0||l&&indexOf(l,y)<0)){var S=o.getShallow(y,t);S!=null&&(d[r[g][0]]=S)}}return d}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function r(){}return r.prototype.getAreaStyle=function(t,n){return getAreaStyle(this,t,n)},r}(),globalImageCache=new LRU$1(50);function findExistImage(r){if(typeof r=="string"){var t=globalImageCache.get(r);return t&&t.image}else return r}function createOrUpdateImage(r,t,n,o,a){if(r)if(typeof r=="string"){if(t&&t.__zrImageSrc===r||!n)return t;var l=globalImageCache.get(r),d={hostEl:n,cb:o,cbPayload:a};return l?(t=l.image,!isImageReady(t)&&l.pending.push(d)):(t=platformApi.loadImage(r,imageOnLoad,imageOnLoad),t.__zrImageSrc=r,globalImageCache.put(r,t.__cachedImgObj={image:t,pending:[d]})),t}else return r;else return t}function imageOnLoad(){var r=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<r.pending.length;t++){var n=r.pending[t],o=n.cb;o&&o(this,n.cbPayload),n.hostEl.dirty()}r.pending.length=0}function isImageReady(r){return r&&r.width&&r.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(r,t,n,o,a){if(!t)return"";var l=(r+"").split(`
`);a=prepareTruncateOptions(t,n,o,a);for(var d=0,g=l.length;d<g;d++)l[d]=truncateSingleLine(l[d],a);return l.join(`
`)}function prepareTruncateOptions(r,t,n,o){o=o||{};var a=extend({},o);a.font=t,n=retrieve2(n,"..."),a.maxIterations=retrieve2(o.maxIterations,2);var l=a.minChar=retrieve2(o.minChar,0);a.cnCharWidth=getWidth("国",t);var d=a.ascCharWidth=getWidth("a",t);a.placeholder=retrieve2(o.placeholder,"");for(var g=r=Math.max(0,r-1),y=0;y<l&&g>=d;y++)g-=d;var S=getWidth(n,t);return S>g&&(n="",S=0),g=r-S,a.ellipsis=n,a.ellipsisWidth=S,a.contentWidth=g,a.containerWidth=r,a}function truncateSingleLine(r,t){var n=t.containerWidth,o=t.font,a=t.contentWidth;if(!n)return"";var l=getWidth(r,o);if(l<=n)return r;for(var d=0;;d++){if(l<=a||d>=t.maxIterations){r+=t.ellipsis;break}var g=d===0?estimateLength(r,a,t.ascCharWidth,t.cnCharWidth):l>0?Math.floor(r.length*a/l):0;r=r.substr(0,g),l=getWidth(r,o)}return r===""&&(r=t.placeholder),r}function estimateLength(r,t,n,o){for(var a=0,l=0,d=r.length;l<d&&a<t;l++){var g=r.charCodeAt(l);a+=0<=g&&g<=127?n:o}return l}function parsePlainText(r,t){r!=null&&(r+="");var n=t.overflow,o=t.padding,a=t.font,l=n==="truncate",d=getLineHeight(a),g=retrieve2(t.lineHeight,d),y=!!t.backgroundColor,S=t.lineOverflow==="truncate",x=t.width,w;x!=null&&(n==="break"||n==="breakAll")?w=r?wrapText(r,t.font,x,n==="breakAll",0).lines:[]:w=r?r.split(`
`):[];var c=w.length*g,A=retrieve2(t.height,c);if(c>A&&S){var R=Math.floor(A/g);w=w.slice(0,R)}if(r&&l&&x!=null)for(var L=prepareTruncateOptions(x,a,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),$=0;$<w.length;$++)w[$]=truncateSingleLine(w[$],L);for(var O=A,z=0,$=0;$<w.length;$++)z=Math.max(getWidth(w[$],a),z);x==null&&(x=z);var V=z;return o&&(O+=o[0]+o[2],V+=o[1]+o[3],x+=o[1]+o[3]),y&&(V=x),{lines:w,height:A,outerWidth:V,outerHeight:O,lineHeight:g,calculatedLineHeight:d,contentWidth:z,contentHeight:c,width:x}}var RichTextToken=function(){function r(){}return r}(),RichTextLine=function(){function r(t){this.tokens=[],t&&(this.tokens=t)}return r}(),RichTextContentBlock=function(){function r(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return r}();function parseRichText(r,t){var n=new RichTextContentBlock;if(r!=null&&(r+=""),!r)return n;for(var o=t.width,a=t.height,l=t.overflow,d=(l==="break"||l==="breakAll")&&o!=null?{width:o,accumWidth:0,breakAll:l==="breakAll"}:null,g=STYLE_REG.lastIndex=0,y;(y=STYLE_REG.exec(r))!=null;){var S=y.index;S>g&&pushTokens(n,r.substring(g,S),t,d),pushTokens(n,y[2],t,d,y[1]),g=STYLE_REG.lastIndex}g<r.length&&pushTokens(n,r.substring(g,r.length),t,d);var x=[],w=0,c=0,A=t.padding,R=l==="truncate",L=t.lineOverflow==="truncate";function $(Ee,Ge,it){Ee.width=Ge,Ee.lineHeight=it,w+=it,c=Math.max(c,Ge)}e:for(var O=0;O<n.lines.length;O++){for(var z=n.lines[O],V=0,j=0,K=0;K<z.tokens.length;K++){var Z=z.tokens[K],q=Z.styleName&&t.rich[Z.styleName]||{},ie=Z.textPadding=q.padding,te=ie?ie[1]+ie[3]:0,oe=Z.font=q.font||t.font;Z.contentHeight=getLineHeight(oe);var re=retrieve2(q.height,Z.contentHeight);if(Z.innerHeight=re,ie&&(re+=ie[0]+ie[2]),Z.height=re,Z.lineHeight=retrieve3(q.lineHeight,t.lineHeight,re),Z.align=q&&q.align||t.align,Z.verticalAlign=q&&q.verticalAlign||"middle",L&&a!=null&&w+Z.lineHeight>a){K>0?(z.tokens=z.tokens.slice(0,K),$(z,j,V),n.lines=n.lines.slice(0,O+1)):n.lines=n.lines.slice(0,O);break e}var he=q.width,_e=he==null||he==="auto";if(typeof he=="string"&&he.charAt(he.length-1)==="%")Z.percentWidth=he,x.push(Z),Z.contentWidth=getWidth(Z.text,oe);else{if(_e){var me=q.backgroundColor,be=me&&me.image;be&&(be=findExistImage(be),isImageReady(be)&&(Z.width=Math.max(Z.width,be.width*re/be.height)))}var Q=R&&o!=null?o-j:null;Q!=null&&Q<Z.width?!_e||Q<te?(Z.text="",Z.width=Z.contentWidth=0):(Z.text=truncateText(Z.text,Q-te,oe,t.ellipsis,{minChar:t.truncateMinChar}),Z.width=Z.contentWidth=getWidth(Z.text,oe)):Z.contentWidth=getWidth(Z.text,oe)}Z.width+=te,j+=Z.width,q&&(V=Math.max(V,Z.lineHeight))}$(z,j,V)}n.outerWidth=n.width=retrieve2(o,c),n.outerHeight=n.height=retrieve2(a,w),n.contentHeight=w,n.contentWidth=c,A&&(n.outerWidth+=A[1]+A[3],n.outerHeight+=A[0]+A[2]);for(var O=0;O<x.length;O++){var Z=x[O],Ne=Z.percentWidth;Z.width=parseInt(Ne,10)/100*n.width}return n}function pushTokens(r,t,n,o,a){var l=t==="",d=a&&n.rich[a]||{},g=r.lines,y=d.font||n.font,S=!1,x,w;if(o){var c=d.padding,A=c?c[1]+c[3]:0;if(d.width!=null&&d.width!=="auto"){var R=parsePercent$1(d.width,o.width)+A;g.length>0&&R+o.accumWidth>o.width&&(x=t.split(`
`),S=!0),o.accumWidth=R}else{var L=wrapText(t,y,o.width,o.breakAll,o.accumWidth);o.accumWidth=L.accumWidth+A,w=L.linesWidths,x=L.lines}}else x=t.split(`
`);for(var $=0;$<x.length;$++){var O=x[$],z=new RichTextToken;if(z.styleName=a,z.text=O,z.isLineHolder=!O&&!l,typeof d.width=="number"?z.width=d.width:z.width=w?w[$]:getWidth(O,y),!$&&!S){var V=(g[g.length-1]||(g[0]=new RichTextLine)).tokens,j=V.length;j===1&&V[0].isLineHolder?V[0]=z:(O||!j||l)&&V.push(z)}else g.push(new RichTextLine([z]))}}function isAlphabeticLetter(r){var t=r.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(r,t){return r[t]=!0,r},{});function isWordBreakChar(r){return isAlphabeticLetter(r)?!!breakCharMap[r]:!0}function wrapText(r,t,n,o,a){for(var l=[],d=[],g="",y="",S=0,x=0,w=0;w<r.length;w++){var c=r.charAt(w);if(c===`
`){y&&(g+=y,x+=S),l.push(g),d.push(x),g="",y="",S=0,x=0;continue}var A=getWidth(c,t),R=o?!1:!isWordBreakChar(c);if(l.length?x+A>n:a+x+A>n){x?(g||y)&&(R?(g||(g=y,y="",S=0,x=S),l.push(g),d.push(x-S),y+=c,S+=A,g="",x=S):(y&&(g+=y,y="",S=0),l.push(g),d.push(x),g=c,x=A)):R?(l.push(y),d.push(S),y=c,S=A):(l.push(c),d.push(A));continue}x+=A,R?(y+=c,S+=A):(y&&(g+=y,y="",S=0),g+=c)}return!l.length&&!g&&(g=r,y="",S=0),y&&(g+=y),g&&(l.push(g),d.push(x)),l.length===1&&(x+=a),{accumWidth:x,lines:l,linesWidths:d}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype._init=function(n){for(var o=keys(n),a=0;a<o.length;a++){var l=o[a];l==="style"?this.useStyle(n[l]):r.prototype.attrKV.call(this,l,n[l])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(n,o,a,l){var d=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,n,o)||d&&!d[0]&&!d[3])return!1;if(a&&this.__clipPaths){for(var g=0;g<this.__clipPaths.length;++g)if(this.__clipPaths[g].isZeroArea())return!1}if(l&&this.parent)for(var y=this.parent;y;){if(y.ignore)return!1;y=y.parent}return!0},t.prototype.contain=function(n,o){return this.rectContain(n,o)},t.prototype.traverse=function(n,o){n.call(o,this)},t.prototype.rectContain=function(n,o){var a=this.transformCoordToLocal(n,o),l=this.getBoundingRect();return l.contain(a[0],a[1])},t.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,a=this.getBoundingRect(),l=this.style,d=l.shadowBlur||0,g=l.shadowOffsetX||0,y=l.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new BoundingRect$1(0,0,0,0)),o?BoundingRect$1.applyTransform(n,a,o):n.copy(a),(d||g||y)&&(n.width+=d*2+Math.abs(g),n.height+=d*2+Math.abs(y),n.x=Math.min(n.x,n.x+g-d),n.y=Math.min(n.y,n.y+y-d));var S=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-S),n.y=Math.floor(n.y-S),n.width=Math.ceil(n.width+1+S*2),n.height=Math.ceil(n.height+1+S*2))}return n},t.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new BoundingRect$1(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(n){return this.animate("style",n)},t.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(n,o){n!=="style"?r.prototype.attrKV.call(this,n,o):this.style?this.setStyle(o):this.useStyle(o)},t.prototype.setStyle=function(n,o){return typeof n=="string"?this.style[n]=o:extend(this.style,n),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},t.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},t.prototype.createStyle=function(n){return createObject(DEFAULT_COMMON_STYLE,n)},t.prototype.useStyle=function(n){n[STYLE_MAGIC_KEY]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},t.prototype.isStyleObject=function(n){return n[STYLE_MAGIC_KEY]},t.prototype._innerSaveToNormal=function(n){r.prototype._innerSaveToNormal.call(this,n);var o=this._normalState;n.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,o,PRIMARY_STATES_KEYS)},t.prototype._applyStateObj=function(n,o,a,l,d,g){r.prototype._applyStateObj.call(this,n,o,a,l,d,g);var y=!(o&&l),S;if(o&&o.style?d?l?S=o.style:(S=this._mergeStyle(this.createStyle(),a.style),this._mergeStyle(S,o.style)):(S=this._mergeStyle(this.createStyle(),l?this.style:a.style),this._mergeStyle(S,o.style)):y&&(S=a.style),S)if(d){var x=this.style;if(this.style=this.createStyle(y?{}:x),y)for(var w=keys(x),c=0;c<w.length;c++){var A=w[c];A in S&&(S[A]=S[A],this.style[A]=x[A])}for(var R=keys(S),c=0;c<R.length;c++){var A=R[c];this.style[A]=this.style[A]}this._transitionState(n,{style:S},g,this.getAnimationStyleProps())}else this.useStyle(S);for(var L=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,c=0;c<L.length;c++){var A=L[c];o&&o[A]!=null?this[A]=o[A]:y&&a[A]!=null&&(this[A]=a[A])}},t.prototype._mergeStates=function(n){for(var o=r.prototype._mergeStates.call(this,n),a,l=0;l<n.length;l++){var d=n[l];d.style&&(a=a||{},this._mergeStyle(a,d.style))}return a&&(o.style=a),o},t.prototype._mergeStyle=function(n,o){return extend(n,o),n},t.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},t.initDefaultProps=function(){var n=t.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),t}(Element$2),tmpRect=new BoundingRect$1(0,0,0,0),viewRect=new BoundingRect$1(0,0,0,0);function isDisplayableCulled(r,t,n){return tmpRect.copy(r.getBoundingRect()),r.transform&&tmpRect.applyTransform(r.transform),viewRect.width=t,viewRect.height=n,!tmpRect.intersect(viewRect)}const Displayable$1=Displayable;var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(r,t,n){if(r.length!==0){for(var o=r[0],a=o[0],l=o[0],d=o[1],g=o[1],y=1;y<r.length;y++)o=r[y],a=mathMin$9(a,o[0]),l=mathMax$9(l,o[0]),d=mathMin$9(d,o[1]),g=mathMax$9(g,o[1]);t[0]=a,t[1]=d,n[0]=l,n[1]=g}}function fromLine(r,t,n,o,a,l){a[0]=mathMin$9(r,n),a[1]=mathMin$9(t,o),l[0]=mathMax$9(r,n),l[1]=mathMax$9(t,o)}var xDim=[],yDim=[];function fromCubic(r,t,n,o,a,l,d,g,y,S){var x=cubicExtrema,w=cubicAt,c=x(r,n,a,d,xDim);y[0]=1/0,y[1]=1/0,S[0]=-1/0,S[1]=-1/0;for(var A=0;A<c;A++){var R=w(r,n,a,d,xDim[A]);y[0]=mathMin$9(R,y[0]),S[0]=mathMax$9(R,S[0])}c=x(t,o,l,g,yDim);for(var A=0;A<c;A++){var L=w(t,o,l,g,yDim[A]);y[1]=mathMin$9(L,y[1]),S[1]=mathMax$9(L,S[1])}y[0]=mathMin$9(r,y[0]),S[0]=mathMax$9(r,S[0]),y[0]=mathMin$9(d,y[0]),S[0]=mathMax$9(d,S[0]),y[1]=mathMin$9(t,y[1]),S[1]=mathMax$9(t,S[1]),y[1]=mathMin$9(g,y[1]),S[1]=mathMax$9(g,S[1])}function fromQuadratic(r,t,n,o,a,l,d,g){var y=quadraticExtremum,S=quadraticAt$1,x=mathMax$9(mathMin$9(y(r,n,a),1),0),w=mathMax$9(mathMin$9(y(t,o,l),1),0),c=S(r,n,a,x),A=S(t,o,l,w);d[0]=mathMin$9(r,a,c),d[1]=mathMin$9(t,l,A),g[0]=mathMax$9(r,a,c),g[1]=mathMax$9(t,l,A)}function fromArc(r,t,n,o,a,l,d,g,y){var S=min$1,x=max$1,w=Math.abs(a-l);if(w%PI2$8<1e-4&&w>1e-4){g[0]=r-n,g[1]=t-o,y[0]=r+n,y[1]=t+o;return}if(start[0]=mathCos$4(a)*n+r,start[1]=mathSin$4(a)*o+t,end[0]=mathCos$4(l)*n+r,end[1]=mathSin$4(l)*o+t,S(g,start,end),x(y,start,end),a=a%PI2$8,a<0&&(a=a+PI2$8),l=l%PI2$8,l<0&&(l=l+PI2$8),a>l&&!d?l+=PI2$8:a<l&&d&&(a+=PI2$8),d){var c=l;l=a,a=c}for(var A=0;A<l;A+=Math.PI/2)A>a&&(extremity[0]=mathCos$4(A)*n+r,extremity[1]=mathSin$4(A)*o+t,S(g,extremity,g),x(y,extremity,y))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(r){var t=Math.round(r/PI$8*1e8)/1e8;return t%2*PI$8}function normalizeArcAngles(r,t){var n=modPI2(r[0]);n<0&&(n+=PI2$7);var o=n-r[0],a=r[1];a+=o,!t&&a-n>=PI2$7?a=n+PI2$7:t&&n-a>=PI2$7?a=n-PI2$7:!t&&n>a?a=n+(PI2$7-modPI2(n-a)):t&&n<a&&(a=n-(PI2$7-modPI2(a-n))),r[0]=n,r[1]=a}var PathProxy=function(){function r(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(t,n,o){o=o||0,o>0&&(this._ux=mathAbs$2(o/devicePixelRatio/t)||0,this._uy=mathAbs$2(o/devicePixelRatio/n)||0)},r.prototype.setDPR=function(t){this.dpr=t},r.prototype.setContext=function(t){this._ctx=t},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(t,n){return this._drawPendingPt(),this.addData(CMD$4.M,t,n),this._ctx&&this._ctx.moveTo(t,n),this._x0=t,this._y0=n,this._xi=t,this._yi=n,this},r.prototype.lineTo=function(t,n){var o=mathAbs$2(t-this._xi),a=mathAbs$2(n-this._yi),l=o>this._ux||a>this._uy;if(this.addData(CMD$4.L,t,n),this._ctx&&l&&this._ctx.lineTo(t,n),l)this._xi=t,this._yi=n,this._pendingPtDist=0;else{var d=o*o+a*a;d>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=n,this._pendingPtDist=d)}return this},r.prototype.bezierCurveTo=function(t,n,o,a,l,d){return this._drawPendingPt(),this.addData(CMD$4.C,t,n,o,a,l,d),this._ctx&&this._ctx.bezierCurveTo(t,n,o,a,l,d),this._xi=l,this._yi=d,this},r.prototype.quadraticCurveTo=function(t,n,o,a){return this._drawPendingPt(),this.addData(CMD$4.Q,t,n,o,a),this._ctx&&this._ctx.quadraticCurveTo(t,n,o,a),this._xi=o,this._yi=a,this},r.prototype.arc=function(t,n,o,a,l,d){this._drawPendingPt(),tmpAngles[0]=a,tmpAngles[1]=l,normalizeArcAngles(tmpAngles,d),a=tmpAngles[0],l=tmpAngles[1];var g=l-a;return this.addData(CMD$4.A,t,n,o,o,a,g,0,d?0:1),this._ctx&&this._ctx.arc(t,n,o,a,l,d),this._xi=mathCos$3(l)*o+t,this._yi=mathSin$3(l)*o+n,this},r.prototype.arcTo=function(t,n,o,a,l){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,n,o,a,l),this},r.prototype.rect=function(t,n,o,a){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,n,o,a),this.addData(CMD$4.R,t,n,o,a),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var t=this._ctx,n=this._x0,o=this._y0;return t&&t.closePath(),this._xi=n,this._yi=o,this},r.prototype.fill=function(t){t&&t.fill(),this.toStatic()},r.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(t){var n=t.length;!(this.data&&this.data.length===n)&&hasTypedArray&&(this.data=new Float32Array(n));for(var o=0;o<n;o++)this.data[o]=t[o];this._len=n},r.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var n=t.length,o=0,a=this._len,l=0;l<n;l++)o+=t[l].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(a+o));for(var l=0;l<n;l++)for(var d=t[l].data,g=0;g<d.length;g++)this.data[a++]=d[g];this._len=a},r.prototype.addData=function(t,n,o,a,l,d,g,y,S){if(this._saveData){var x=this.data;this._len+arguments.length>x.length&&(this._expandData(),x=this.data);for(var w=0;w<arguments.length;w++)x[this._len++]=arguments[w]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],n=0;n<this._len;n++)t[n]=this.data[n];this.data=t}},r.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(t)))}},r.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var t=this.data,n=0,o=0,a=0,l=0,d;for(d=0;d<this._len;){var g=t[d++],y=d===1;switch(y&&(n=t[d],o=t[d+1],a=n,l=o),g){case CMD$4.M:n=a=t[d++],o=l=t[d++],min2[0]=a,min2[1]=l,max2[0]=a,max2[1]=l;break;case CMD$4.L:fromLine(n,o,t[d],t[d+1],min2,max2),n=t[d++],o=t[d++];break;case CMD$4.C:fromCubic(n,o,t[d++],t[d++],t[d++],t[d++],t[d],t[d+1],min2,max2),n=t[d++],o=t[d++];break;case CMD$4.Q:fromQuadratic(n,o,t[d++],t[d++],t[d],t[d+1],min2,max2),n=t[d++],o=t[d++];break;case CMD$4.A:var S=t[d++],x=t[d++],w=t[d++],c=t[d++],A=t[d++],R=t[d++]+A;d+=1;var L=!t[d++];y&&(a=mathCos$3(A)*w+S,l=mathSin$3(A)*c+x),fromArc(S,x,w,c,A,R,L,min2,max2),n=mathCos$3(R)*w+S,o=mathSin$3(R)*c+x;break;case CMD$4.R:a=n=t[d++],l=o=t[d++];var $=t[d++],O=t[d++];fromLine(a,l,a+$,l+O,min2,max2);break;case CMD$4.Z:n=a,o=l;break}min$1(min,min,min2),max$1(max,max,max2)}return d===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect$1(min[0],min[1],max[0]-min[0],max[1]-min[1])},r.prototype._calculateLength=function(){var t=this.data,n=this._len,o=this._ux,a=this._uy,l=0,d=0,g=0,y=0;this._pathSegLen||(this._pathSegLen=[]);for(var S=this._pathSegLen,x=0,w=0,c=0;c<n;){var A=t[c++],R=c===1;R&&(l=t[c],d=t[c+1],g=l,y=d);var L=-1;switch(A){case CMD$4.M:l=g=t[c++],d=y=t[c++];break;case CMD$4.L:{var $=t[c++],O=t[c++],z=$-l,V=O-d;(mathAbs$2(z)>o||mathAbs$2(V)>a||c===n-1)&&(L=Math.sqrt(z*z+V*V),l=$,d=O);break}case CMD$4.C:{var j=t[c++],K=t[c++],$=t[c++],O=t[c++],Z=t[c++],q=t[c++];L=cubicLength(l,d,j,K,$,O,Z,q,10),l=Z,d=q;break}case CMD$4.Q:{var j=t[c++],K=t[c++],$=t[c++],O=t[c++];L=quadraticLength(l,d,j,K,$,O,10),l=$,d=O;break}case CMD$4.A:var ie=t[c++],te=t[c++],oe=t[c++],re=t[c++],he=t[c++],_e=t[c++],me=_e+he;c+=1,t[c++],R&&(g=mathCos$3(he)*oe+ie,y=mathSin$3(he)*re+te),L=mathMax$8(oe,re)*mathMin$8(PI2$7,Math.abs(_e)),l=mathCos$3(me)*oe+ie,d=mathSin$3(me)*re+te;break;case CMD$4.R:{g=l=t[c++],y=d=t[c++];var be=t[c++],Q=t[c++];L=be*2+Q*2;break}case CMD$4.Z:{var z=g-l,V=y-d;L=Math.sqrt(z*z+V*V),l=g,d=y;break}}L>=0&&(S[w++]=L,x+=L)}return this._pathLen=x,x},r.prototype.rebuildPath=function(t,n){var o=this.data,a=this._ux,l=this._uy,d=this._len,g,y,S,x,w,c,A=n<1,R,L,$=0,O=0,z,V=0,j,K;if(!(A&&(this._pathSegLen||this._calculateLength(),R=this._pathSegLen,L=this._pathLen,z=n*L,!z)))e:for(var Z=0;Z<d;){var q=o[Z++],ie=Z===1;switch(ie&&(S=o[Z],x=o[Z+1],g=S,y=x),q!==CMD$4.L&&V>0&&(t.lineTo(j,K),V=0),q){case CMD$4.M:g=S=o[Z++],y=x=o[Z++],t.moveTo(S,x);break;case CMD$4.L:{w=o[Z++],c=o[Z++];var te=mathAbs$2(w-S),oe=mathAbs$2(c-x);if(te>a||oe>l){if(A){var re=R[O++];if($+re>z){var he=(z-$)/re;t.lineTo(S*(1-he)+w*he,x*(1-he)+c*he);break e}$+=re}t.lineTo(w,c),S=w,x=c,V=0}else{var _e=te*te+oe*oe;_e>V&&(j=w,K=c,V=_e)}break}case CMD$4.C:{var me=o[Z++],be=o[Z++],Q=o[Z++],Ne=o[Z++],Ee=o[Z++],Ge=o[Z++];if(A){var re=R[O++];if($+re>z){var he=(z-$)/re;cubicSubdivide(S,me,Q,Ee,he,tmpOutX),cubicSubdivide(x,be,Ne,Ge,he,tmpOutY),t.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}$+=re}t.bezierCurveTo(me,be,Q,Ne,Ee,Ge),S=Ee,x=Ge;break}case CMD$4.Q:{var me=o[Z++],be=o[Z++],Q=o[Z++],Ne=o[Z++];if(A){var re=R[O++];if($+re>z){var he=(z-$)/re;quadraticSubdivide(S,me,Q,he,tmpOutX),quadraticSubdivide(x,be,Ne,he,tmpOutY),t.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}$+=re}t.quadraticCurveTo(me,be,Q,Ne),S=Q,x=Ne;break}case CMD$4.A:var it=o[Z++],Te=o[Z++],Ke=o[Z++],Tt=o[Z++],Lt=o[Z++],Qt=o[Z++],Xe=o[Z++],Be=!o[Z++],ue=Ke>Tt?Ke:Tt,Dt=mathAbs$2(Ke-Tt)>.001,Rt=Lt+Qt,Bt=!1;if(A){var re=R[O++];$+re>z&&(Rt=Lt+Qt*(z-$)/re,Bt=!0),$+=re}if(Dt&&t.ellipse?t.ellipse(it,Te,Ke,Tt,Xe,Lt,Rt,Be):t.arc(it,Te,ue,Lt,Rt,Be),Bt)break e;ie&&(g=mathCos$3(Lt)*Ke+it,y=mathSin$3(Lt)*Tt+Te),S=mathCos$3(Rt)*Ke+it,x=mathSin$3(Rt)*Tt+Te;break;case CMD$4.R:g=S=o[Z],y=x=o[Z+1],w=o[Z++],c=o[Z++];var Se=o[Z++],Ye=o[Z++];if(A){var re=R[O++];if($+re>z){var $e=z-$;t.moveTo(w,c),t.lineTo(w+mathMin$8($e,Se),c),$e-=Se,$e>0&&t.lineTo(w+Se,c+mathMin$8($e,Ye)),$e-=Ye,$e>0&&t.lineTo(w+mathMax$8(Se-$e,0),c+Ye),$e-=Se,$e>0&&t.lineTo(w,c+mathMax$8(Ye-$e,0));break e}$+=re}t.rect(w,c,Se,Ye);break;case CMD$4.Z:if(A){var re=R[O++];if($+re>z){var he=(z-$)/re;t.lineTo(S*(1-he)+g*he,x*(1-he)+y*he);break e}$+=re}t.closePath(),S=g,x=y}}},r.prototype.clone=function(){var t=new r,n=this.data;return t.data=n.slice?n.slice():Array.prototype.slice.call(n),t._len=this._len,t},r.CMD=CMD$4,r.initDefaultProps=function(){var t=r.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),r}();const PathProxy$1=PathProxy;function containStroke$4(r,t,n,o,a,l,d){if(a===0)return!1;var g=a,y=0,S=r;if(d>t+g&&d>o+g||d<t-g&&d<o-g||l>r+g&&l>n+g||l<r-g&&l<n-g)return!1;if(r!==n)y=(t-o)/(r-n),S=(r*o-n*t)/(r-n);else return Math.abs(l-r)<=g/2;var x=y*l-d+S,w=x*x/(y*y+1);return w<=g/2*g/2}function containStroke$3(r,t,n,o,a,l,d,g,y,S,x){if(y===0)return!1;var w=y;if(x>t+w&&x>o+w&&x>l+w&&x>g+w||x<t-w&&x<o-w&&x<l-w&&x<g-w||S>r+w&&S>n+w&&S>a+w&&S>d+w||S<r-w&&S<n-w&&S<a-w&&S<d-w)return!1;var c=cubicProjectPoint(r,t,n,o,a,l,d,g,S,x,null);return c<=w/2}function containStroke$2(r,t,n,o,a,l,d,g,y){if(d===0)return!1;var S=d;if(y>t+S&&y>o+S&&y>l+S||y<t-S&&y<o-S&&y<l-S||g>r+S&&g>n+S&&g>a+S||g<r-S&&g<n-S&&g<a-S)return!1;var x=quadraticProjectPoint(r,t,n,o,a,l,g,y,null);return x<=S/2}var PI2$6=Math.PI*2;function normalizeRadian(r){return r%=PI2$6,r<0&&(r+=PI2$6),r}var PI2$5=Math.PI*2;function containStroke$1(r,t,n,o,a,l,d,g,y){if(d===0)return!1;var S=d;g-=r,y-=t;var x=Math.sqrt(g*g+y*y);if(x-S>n||x+S<n)return!1;if(Math.abs(o-a)%PI2$5<1e-4)return!0;if(l){var w=o;o=normalizeRadian(a),a=normalizeRadian(w)}else o=normalizeRadian(o),a=normalizeRadian(a);o>a&&(a+=PI2$5);var c=Math.atan2(y,g);return c<0&&(c+=PI2$5),c>=o&&c<=a||c+PI2$5>=o&&c+PI2$5<=a}function windingLine(r,t,n,o,a,l){if(l>t&&l>o||l<t&&l<o||o===t)return 0;var d=(l-t)/(o-t),g=o<t?1:-1;(d===1||d===0)&&(g=o<t?.5:-.5);var y=d*(n-r)+r;return y===a?1/0:y>a?g:0}var CMD$3=PathProxy$1.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(r,t){return Math.abs(r-t)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var r=extrema[0];extrema[0]=extrema[1],extrema[1]=r}function windingCubic(r,t,n,o,a,l,d,g,y,S){if(S>t&&S>o&&S>l&&S>g||S<t&&S<o&&S<l&&S<g)return 0;var x=cubicRootAt(t,o,l,g,S,roots);if(x===0)return 0;for(var w=0,c=-1,A=void 0,R=void 0,L=0;L<x;L++){var $=roots[L],O=$===0||$===1?.5:1,z=cubicAt(r,n,a,d,$);z<y||(c<0&&(c=cubicExtrema(t,o,l,g,extrema),extrema[1]<extrema[0]&&c>1&&swapExtrema(),A=cubicAt(t,o,l,g,extrema[0]),c>1&&(R=cubicAt(t,o,l,g,extrema[1]))),c===2?$<extrema[0]?w+=A<t?O:-O:$<extrema[1]?w+=R<A?O:-O:w+=g<R?O:-O:$<extrema[0]?w+=A<t?O:-O:w+=g<A?O:-O)}return w}function windingQuadratic(r,t,n,o,a,l,d,g){if(g>t&&g>o&&g>l||g<t&&g<o&&g<l)return 0;var y=quadraticRootAt(t,o,l,g,roots);if(y===0)return 0;var S=quadraticExtremum(t,o,l);if(S>=0&&S<=1){for(var x=0,w=quadraticAt$1(t,o,l,S),c=0;c<y;c++){var A=roots[c]===0||roots[c]===1?.5:1,R=quadraticAt$1(r,n,a,roots[c]);R<d||(roots[c]<S?x+=w<t?A:-A:x+=l<w?A:-A)}return x}else{var A=roots[0]===0||roots[0]===1?.5:1,R=quadraticAt$1(r,n,a,roots[0]);return R<d?0:l<t?A:-A}}function windingArc(r,t,n,o,a,l,d,g){if(g-=t,g>n||g<-n)return 0;var y=Math.sqrt(n*n-g*g);roots[0]=-y,roots[1]=y;var S=Math.abs(o-a);if(S<1e-4)return 0;if(S>=PI2$4-1e-4){o=0,a=PI2$4;var x=l?1:-1;return d>=roots[0]+r&&d<=roots[1]+r?x:0}if(o>a){var w=o;o=a,a=w}o<0&&(o+=PI2$4,a+=PI2$4);for(var c=0,A=0;A<2;A++){var R=roots[A];if(R+r>d){var L=Math.atan2(g,R),x=l?1:-1;L<0&&(L=PI2$4+L),(L>=o&&L<=a||L+PI2$4>=o&&L+PI2$4<=a)&&(L>Math.PI/2&&L<Math.PI*1.5&&(x=-x),c+=x)}}return c}function containPath(r,t,n,o,a){for(var l=r.data,d=r.len(),g=0,y=0,S=0,x=0,w=0,c,A,R=0;R<d;){var L=l[R++],$=R===1;switch(L===CMD$3.M&&R>1&&(n||(g+=windingLine(y,S,x,w,o,a))),$&&(y=l[R],S=l[R+1],x=y,w=S),L){case CMD$3.M:x=l[R++],w=l[R++],y=x,S=w;break;case CMD$3.L:if(n){if(containStroke$4(y,S,l[R],l[R+1],t,o,a))return!0}else g+=windingLine(y,S,l[R],l[R+1],o,a)||0;y=l[R++],S=l[R++];break;case CMD$3.C:if(n){if(containStroke$3(y,S,l[R++],l[R++],l[R++],l[R++],l[R],l[R+1],t,o,a))return!0}else g+=windingCubic(y,S,l[R++],l[R++],l[R++],l[R++],l[R],l[R+1],o,a)||0;y=l[R++],S=l[R++];break;case CMD$3.Q:if(n){if(containStroke$2(y,S,l[R++],l[R++],l[R],l[R+1],t,o,a))return!0}else g+=windingQuadratic(y,S,l[R++],l[R++],l[R],l[R+1],o,a)||0;y=l[R++],S=l[R++];break;case CMD$3.A:var O=l[R++],z=l[R++],V=l[R++],j=l[R++],K=l[R++],Z=l[R++];R+=1;var q=!!(1-l[R++]);c=Math.cos(K)*V+O,A=Math.sin(K)*j+z,$?(x=c,w=A):g+=windingLine(y,S,c,A,o,a);var ie=(o-O)*j/V+O;if(n){if(containStroke$1(O,z,j,K,K+Z,q,t,ie,a))return!0}else g+=windingArc(O,z,j,K,K+Z,q,ie,a);y=Math.cos(K+Z)*V+O,S=Math.sin(K+Z)*j+z;break;case CMD$3.R:x=y=l[R++],w=S=l[R++];var te=l[R++],oe=l[R++];if(c=x+te,A=w+oe,n){if(containStroke$4(x,w,c,w,t,o,a)||containStroke$4(c,w,c,A,t,o,a)||containStroke$4(c,A,x,A,t,o,a)||containStroke$4(x,A,x,w,t,o,a))return!0}else g+=windingLine(c,w,c,A,o,a),g+=windingLine(x,A,x,w,o,a);break;case CMD$3.Z:if(n){if(containStroke$4(y,S,x,w,t,o,a))return!0}else g+=windingLine(y,S,x,w,o,a);y=x,S=w;break}}return!n&&!isAroundEqual$1(S,w)&&(g+=windingLine(y,S,x,w,o,a)||0),g!==0}function contain$2(r,t,n){return containPath(r,0,!1,t,n)}function containStroke(r,t,n,o){return containPath(r,t,!0,n,o)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.update=function(){var n=this;r.prototype.update.call(this);var o=this.style;if(o.decal){var a=this._decalEl=this._decalEl||new t;a.buildPath===t.prototype.buildPath&&(a.buildPath=function(y){n.buildPath(y,n.shape)}),a.silent=!0;var l=a.style;for(var d in o)l[d]!==o[d]&&(l[d]=o[d]);l.fill=o.fill?o.decal:null,l.decal=null,l.shadowColor=null,o.strokeFirst&&(l.stroke=null);for(var g=0;g<pathCopyParams.length;++g)a[pathCopyParams[g]]=this[pathCopyParams[g]];a.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(n){var o=keys(n);this.shape=this.getDefaultShape();var a=this.getDefaultStyle();a&&this.useStyle(a);for(var l=0;l<o.length;l++){var d=o[l],g=n[d];d==="style"?this.style?extend(this.style,g):this.useStyle(g):d==="shape"?extend(this.shape,g):r.prototype.attrKV.call(this,d,g)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(isString(n)){var o=lum(n,0);return o>.5?DARK_LABEL_COLOR:o>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(n)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},t.prototype.getInsideTextStroke=function(n){var o=this.style.fill;if(isString(o)){var a=this.__zr,l=!!(a&&a.isDarkMode()),d=lum(n,0)<DARK_MODE_THRESHOLD;if(l===d)return o}},t.prototype.buildPath=function(n,o,a){},t.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},t.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},t.prototype.createPathProxy=function(){this.path=new PathProxy$1(!1)},t.prototype.hasStroke=function(){var n=this.style,o=n.stroke;return!(o==null||o==="none"||!(n.lineWidth>0))},t.prototype.hasFill=function(){var n=this.style,o=n.fill;return o!=null&&o!=="none"},t.prototype.getBoundingRect=function(){var n=this._rect,o=this.style,a=!n;if(a){var l=!1;this.path||(l=!0,this.createPathProxy());var d=this.path;(l||this.__dirty&SHAPE_CHANGED_BIT)&&(d.beginPath(),this.buildPath(d,this.shape,!1),this.pathUpdated()),n=d.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var g=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||a){g.copy(n);var y=o.strokeNoScale?this.getLineScale():1,S=o.lineWidth;if(!this.hasFill()){var x=this.strokeContainThreshold;S=Math.max(S,x??4)}y>1e-10&&(g.width+=S/y,g.height+=S/y,g.x-=S/y/2,g.y-=S/y/2)}return g}return n},t.prototype.contain=function(n,o){var a=this.transformCoordToLocal(n,o),l=this.getBoundingRect(),d=this.style;if(n=a[0],o=a[1],l.contain(n,o)){var g=this.path;if(this.hasStroke()){var y=d.lineWidth,S=d.strokeNoScale?this.getLineScale():1;if(S>1e-10&&(this.hasFill()||(y=Math.max(y,this.strokeContainThreshold)),containStroke(g,y/S,n,o)))return!0}if(this.hasFill())return contain$2(g,n,o)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(n){return this.animate("shape",n)},t.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(n,o){n==="shape"?this.setShape(o):r.prototype.attrKV.call(this,n,o)},t.prototype.setShape=function(n,o){var a=this.shape;return a||(a=this.shape={}),typeof n=="string"?a[n]=o:extend(a,n),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},t.prototype.createStyle=function(n){return createObject(DEFAULT_PATH_STYLE,n)},t.prototype._innerSaveToNormal=function(n){r.prototype._innerSaveToNormal.call(this,n);var o=this._normalState;n.shape&&!o.shape&&(o.shape=extend({},this.shape))},t.prototype._applyStateObj=function(n,o,a,l,d,g){r.prototype._applyStateObj.call(this,n,o,a,l,d,g);var y=!(o&&l),S;if(o&&o.shape?d?l?S=o.shape:(S=extend({},a.shape),extend(S,o.shape)):(S=extend({},l?this.shape:a.shape),extend(S,o.shape)):y&&(S=a.shape),S)if(d){this.shape=extend({},this.shape);for(var x={},w=keys(S),c=0;c<w.length;c++){var A=w[c];typeof S[A]=="object"?this.shape[A]=S[A]:x[A]=S[A]}this._transitionState(n,{shape:x},g)}else this.shape=S,this.dirtyShape()},t.prototype._mergeStates=function(n){for(var o=r.prototype._mergeStates.call(this,n),a,l=0;l<n.length;l++){var d=n[l];d.shape&&(a=a||{},this._mergeStyle(a,d.shape))}return a&&(o.shape=a),o},t.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},t.prototype.isZeroArea=function(){return!1},t.extend=function(n){var o=function(l){__extends(d,l);function d(g){var y=l.call(this,g)||this;return n.init&&n.init.call(y,g),y}return d.prototype.getDefaultStyle=function(){return clone$4(n.style)},d.prototype.getDefaultShape=function(){return clone$4(n.shape)},d}(t);for(var a in n)typeof n[a]=="function"&&(o.prototype[a]=n[a]);return o},t.initDefaultProps=function(){var n=t.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),t}(Displayable$1);const Path$1=Path;var DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var n=this.style,o=n.stroke;return o!=null&&o!=="none"&&n.lineWidth>0},t.prototype.hasFill=function(){var n=this.style,o=n.fill;return o!=null&&o!=="none"},t.prototype.createStyle=function(n){return createObject(DEFAULT_TSPAN_STYLE,n)},t.prototype.setBoundingRect=function(n){this._rect=n},t.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var o=n.text;o!=null?o+="":o="";var a=getBoundingRect(o,n.font,n.textAlign,n.textBaseline);if(a.x+=n.x||0,a.y+=n.y||0,this.hasStroke()){var l=n.lineWidth;a.x-=l/2,a.y-=l/2,a.width+=l,a.height+=l}this._rect=a}return this._rect},t.initDefaultProps=function(){var n=t.prototype;n.dirtyRectTolerance=10}(),t}(Displayable$1);TSpan.prototype.type="tspan";const TSpan$1=TSpan;var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(r){return!!(r&&typeof r!="string"&&r.width&&r.height)}var ZRImage=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createStyle=function(n){return createObject(DEFAULT_IMAGE_STYLE,n)},t.prototype._getSize=function(n){var o=this.style,a=o[n];if(a!=null)return a;var l=isImageLike$1(o.image)?o.image:this.__image;if(!l)return 0;var d=n==="width"?"height":"width",g=o[d];return g==null?l[n]:l[n]/l[d]*g},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},t.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new BoundingRect$1(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Displayable$1);ZRImage.prototype.type="image";const ZRImage$1=ZRImage;function buildPath$2(r,t){var n=t.x,o=t.y,a=t.width,l=t.height,d=t.r,g,y,S,x;a<0&&(n=n+a,a=-a),l<0&&(o=o+l,l=-l),typeof d=="number"?g=y=S=x=d:d instanceof Array?d.length===1?g=y=S=x=d[0]:d.length===2?(g=S=d[0],y=x=d[1]):d.length===3?(g=d[0],y=x=d[1],S=d[2]):(g=d[0],y=d[1],S=d[2],x=d[3]):g=y=S=x=0;var w;g+y>a&&(w=g+y,g*=a/w,y*=a/w),S+x>a&&(w=S+x,S*=a/w,x*=a/w),y+S>l&&(w=y+S,y*=l/w,S*=l/w),g+x>l&&(w=g+x,g*=l/w,x*=l/w),r.moveTo(n+g,o),r.lineTo(n+a-y,o),y!==0&&r.arc(n+a-y,o+y,y,-Math.PI/2,0),r.lineTo(n+a,o+l-S),S!==0&&r.arc(n+a-S,o+l-S,S,0,Math.PI/2),r.lineTo(n+x,o+l),x!==0&&r.arc(n+x,o+l-x,x,Math.PI/2,Math.PI),r.lineTo(n,o+g),g!==0&&r.arc(n+g,o+g,g,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(r,t,n){if(t){var o=t.x1,a=t.x2,l=t.y1,d=t.y2;r.x1=o,r.x2=a,r.y1=l,r.y2=d;var g=n&&n.lineWidth;return g&&(round$2(o*2)===round$2(a*2)&&(r.x1=r.x2=subPixelOptimize$1(o,g,!0)),round$2(l*2)===round$2(d*2)&&(r.y1=r.y2=subPixelOptimize$1(l,g,!0))),r}}function subPixelOptimizeRect$1(r,t,n){if(t){var o=t.x,a=t.y,l=t.width,d=t.height;r.x=o,r.y=a,r.width=l,r.height=d;var g=n&&n.lineWidth;return g&&(r.x=subPixelOptimize$1(o,g,!0),r.y=subPixelOptimize$1(a,g,!0),r.width=Math.max(subPixelOptimize$1(o+l,g,!1)-r.x,l===0?0:1),r.height=Math.max(subPixelOptimize$1(a+d,g,!1)-r.y,d===0?0:1)),r}}function subPixelOptimize$1(r,t,n){if(!t)return r;var o=round$2(r*2);return(o+round$2(t))%2===0?o/2:(o+(n?1:-1))/2}var RectShape=function(){function r(){this.x=0,this.y=0,this.width=0,this.height=0}return r}(),subPixelOptimizeOutputShape$1={},Rect$2=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new RectShape},t.prototype.buildPath=function(n,o){var a,l,d,g;if(this.subPixelOptimize){var y=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,o,this.style);a=y.x,l=y.y,d=y.width,g=y.height,y.r=o.r,o=y}else a=o.x,l=o.y,d=o.width,g=o.height;o.r?buildPath$2(n,o):n.rect(a,l,d,g)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Path$1);Rect$2.prototype.type="rect";const Rect$3=Rect$2;var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(r){__extends(t,r);function t(n){var o=r.call(this)||this;return o.type="text",o._children=[],o._defaultStyle=DEFAULT_RICH_TEXT_COLOR,o.attr(n),o}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){r.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var o=this._children[n];o.zlevel=this.zlevel,o.z=this.z,o.z2=this.z2,o.culling=this.culling,o.cursor=this.cursor,o.invisible=this.invisible}},t.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):r.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(n){var o=this.innerTransformable;return o?o.getLocalTransform(n):r.prototype.getLocalTransform.call(this,n)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),r.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(n){r.prototype.addSelfToZr.call(this,n);for(var o=0;o<this._children.length;o++)this._children[o].__zr=n},t.prototype.removeSelfFromZr=function(n){r.prototype.removeSelfFromZr.call(this,n);for(var o=0;o<this._children.length;o++)this._children[o].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new BoundingRect$1(0,0,0,0),o=this._children,a=[],l=null,d=0;d<o.length;d++){var g=o[d],y=g.getBoundingRect(),S=g.getLocalTransform(a);S?(n.copy(y),n.applyTransform(S),l=l||n.clone(),l.union(n)):(l=l||y.clone(),l.union(y))}this._rect=l||n}return this._rect},t.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||DEFAULT_RICH_TEXT_COLOR},t.prototype.setTextContent=function(n){},t.prototype._mergeStyle=function(n,o){if(!o)return n;var a=o.rich,l=n.rich||a&&{};return extend(n,o),a&&l?(this._mergeRich(l,a),n.rich=l):l&&(n.rich=l),n},t.prototype._mergeRich=function(n,o){for(var a=keys(o),l=0;l<a.length;l++){var d=a[l];n[d]=n[d]||{},extend(n[d],o[d])}},t.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},t.prototype._getOrCreateChild=function(n){var o=this._children[this._childCursor];return(!o||!(o instanceof n))&&(o=new n),this._children[this._childCursor++]=o,o.__zr=this.__zr,o.parent=this,o},t.prototype._updatePlainTexts=function(){var n=this.style,o=n.font||DEFAULT_FONT,a=n.padding,l=getStyleText(n),d=parsePlainText(l,n),g=needDrawBackground(n),y=!!n.backgroundColor,S=d.outerHeight,x=d.outerWidth,w=d.contentWidth,c=d.lines,A=d.lineHeight,R=this._defaultStyle,L=n.x||0,$=n.y||0,O=n.align||R.align||"left",z=n.verticalAlign||R.verticalAlign||"top",V=L,j=adjustTextY($,d.contentHeight,z);if(g||a){var K=adjustTextX(L,x,O),Z=adjustTextY($,S,z);g&&this._renderBackground(n,n,K,Z,x,S)}j+=A/2,a&&(V=getTextXForPadding(L,O,a),z==="top"?j+=a[0]:z==="bottom"&&(j-=a[2]));for(var q=0,ie=!1,te=getFill("fill"in n?n.fill:(ie=!0,R.fill)),oe=getStroke("stroke"in n?n.stroke:!y&&(!R.autoStroke||ie)?(q=DEFAULT_STROKE_LINE_WIDTH,R.stroke):null),re=n.textShadowBlur>0,he=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),_e=d.calculatedLineHeight,me=0;me<c.length;me++){var be=this._getOrCreateChild(TSpan$1),Q=be.createStyle();be.useStyle(Q),Q.text=c[me],Q.x=V,Q.y=j,O&&(Q.textAlign=O),Q.textBaseline="middle",Q.opacity=n.opacity,Q.strokeFirst=!0,re&&(Q.shadowBlur=n.textShadowBlur||0,Q.shadowColor=n.textShadowColor||"transparent",Q.shadowOffsetX=n.textShadowOffsetX||0,Q.shadowOffsetY=n.textShadowOffsetY||0),Q.stroke=oe,Q.fill=te,oe&&(Q.lineWidth=n.lineWidth||q,Q.lineDash=n.lineDash,Q.lineDashOffset=n.lineDashOffset||0),Q.font=o,setSeparateFont(Q,n),j+=A,he&&be.setBoundingRect(new BoundingRect$1(adjustTextX(Q.x,n.width,Q.textAlign),adjustTextY(Q.y,_e,Q.textBaseline),w,_e))}},t.prototype._updateRichTexts=function(){var n=this.style,o=getStyleText(n),a=parseRichText(o,n),l=a.width,d=a.outerWidth,g=a.outerHeight,y=n.padding,S=n.x||0,x=n.y||0,w=this._defaultStyle,c=n.align||w.align,A=n.verticalAlign||w.verticalAlign,R=adjustTextX(S,d,c),L=adjustTextY(x,g,A),$=R,O=L;y&&($+=y[3],O+=y[0]);var z=$+l;needDrawBackground(n)&&this._renderBackground(n,n,R,L,d,g);for(var V=!!n.backgroundColor,j=0;j<a.lines.length;j++){for(var K=a.lines[j],Z=K.tokens,q=Z.length,ie=K.lineHeight,te=K.width,oe=0,re=$,he=z,_e=q-1,me=void 0;oe<q&&(me=Z[oe],!me.align||me.align==="left");)this._placeToken(me,n,ie,O,re,"left",V),te-=me.width,re+=me.width,oe++;for(;_e>=0&&(me=Z[_e],me.align==="right");)this._placeToken(me,n,ie,O,he,"right",V),te-=me.width,he-=me.width,_e--;for(re+=(l-(re-$)-(z-he)-te)/2;oe<=_e;)me=Z[oe],this._placeToken(me,n,ie,O,re+me.width/2,"center",V),re+=me.width,oe++;O+=ie}},t.prototype._placeToken=function(n,o,a,l,d,g,y){var S=o.rich[n.styleName]||{};S.text=n.text;var x=n.verticalAlign,w=l+a/2;x==="top"?w=l+n.height/2:x==="bottom"&&(w=l+a-n.height/2);var c=!n.isLineHolder&&needDrawBackground(S);c&&this._renderBackground(S,o,g==="right"?d-n.width:g==="center"?d-n.width/2:d,w-n.height/2,n.width,n.height);var A=!!S.backgroundColor,R=n.textPadding;R&&(d=getTextXForPadding(d,g,R),w-=n.height/2-R[0]-n.innerHeight/2);var L=this._getOrCreateChild(TSpan$1),$=L.createStyle();L.useStyle($);var O=this._defaultStyle,z=!1,V=0,j=getFill("fill"in S?S.fill:"fill"in o?o.fill:(z=!0,O.fill)),K=getStroke("stroke"in S?S.stroke:"stroke"in o?o.stroke:!A&&!y&&(!O.autoStroke||z)?(V=DEFAULT_STROKE_LINE_WIDTH,O.stroke):null),Z=S.textShadowBlur>0||o.textShadowBlur>0;$.text=n.text,$.x=d,$.y=w,Z&&($.shadowBlur=S.textShadowBlur||o.textShadowBlur||0,$.shadowColor=S.textShadowColor||o.textShadowColor||"transparent",$.shadowOffsetX=S.textShadowOffsetX||o.textShadowOffsetX||0,$.shadowOffsetY=S.textShadowOffsetY||o.textShadowOffsetY||0),$.textAlign=g,$.textBaseline="middle",$.font=n.font||DEFAULT_FONT,$.opacity=retrieve3(S.opacity,o.opacity,1),setSeparateFont($,S),K&&($.lineWidth=retrieve3(S.lineWidth,o.lineWidth,V),$.lineDash=retrieve2(S.lineDash,o.lineDash),$.lineDashOffset=o.lineDashOffset||0,$.stroke=K),j&&($.fill=j);var q=n.contentWidth,ie=n.contentHeight;L.setBoundingRect(new BoundingRect$1(adjustTextX($.x,q,$.textAlign),adjustTextY($.y,ie,$.textBaseline),q,ie))},t.prototype._renderBackground=function(n,o,a,l,d,g){var y=n.backgroundColor,S=n.borderWidth,x=n.borderColor,w=y&&y.image,c=y&&!w,A=n.borderRadius,R=this,L,$;if(c||n.lineHeight||S&&x){L=this._getOrCreateChild(Rect$3),L.useStyle(L.createStyle()),L.style.fill=null;var O=L.shape;O.x=a,O.y=l,O.width=d,O.height=g,O.r=A,L.dirtyShape()}if(c){var z=L.style;z.fill=y||null,z.fillOpacity=retrieve2(n.fillOpacity,1)}else if(w){$=this._getOrCreateChild(ZRImage$1),$.onload=function(){R.dirtyStyle()};var V=$.style;V.image=y.image,V.x=a,V.y=l,V.width=d,V.height=g}if(S&&x){var z=L.style;z.lineWidth=S,z.stroke=x,z.strokeOpacity=retrieve2(n.strokeOpacity,1),z.lineDash=n.borderDash,z.lineDashOffset=n.borderDashOffset||0,L.strokeContainThreshold=0,L.hasFill()&&L.hasStroke()&&(z.strokeFirst=!0,z.lineWidth*=2)}var j=(L||$).style;j.shadowBlur=n.shadowBlur||0,j.shadowColor=n.shadowColor||"transparent",j.shadowOffsetX=n.shadowOffsetX||0,j.shadowOffsetY=n.shadowOffsetY||0,j.opacity=retrieve3(n.opacity,o.opacity,1)},t.makeFont=function(n){var o="";return hasSeparateFont(n)&&(o=[n.fontStyle,n.fontWeight,parseFontSize(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),o&&trim$1(o)||n.textFont||n.font},t}(Displayable$1),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(r){return typeof r=="string"&&(r.indexOf("px")!==-1||r.indexOf("rem")!==-1||r.indexOf("em")!==-1)?r:isNaN(+r)?DEFAULT_FONT_SIZE+"px":r+"px"}function setSeparateFont(r,t){for(var n=0;n<FONT_PARTS.length;n++){var o=FONT_PARTS[n],a=t[o];a!=null&&(r[o]=a)}}function hasSeparateFont(r){return r.fontSize!=null||r.fontFamily||r.fontWeight}function normalizeTextStyle(r){return normalizeStyle(r),each$f(r.rich,normalizeStyle),r}function normalizeStyle(r){if(r){r.font=ZRText.makeFont(r);var t=r.align;t==="middle"&&(t="center"),r.align=t==null||VALID_TEXT_ALIGN[t]?t:"left";var n=r.verticalAlign;n==="center"&&(n="middle"),r.verticalAlign=n==null||VALID_TEXT_VERTICAL_ALIGN[n]?n:"top";var o=r.padding;o&&(r.padding=normalizeCssArray$1(r.padding))}}function getStroke(r,t){return r==null||t<=0||r==="transparent"||r==="none"?null:r.image||r.colorStops?"#000":r}function getFill(r){return r==null||r==="none"?null:r.image||r.colorStops?"#000":r}function getTextXForPadding(r,t,n){return t==="right"?r-n[1]:t==="center"?r+n[3]/2-n[1]/2:r+n[3]}function getStyleText(r){var t=r.text;return t!=null&&(t+=""),t}function needDrawBackground(r){return!!(r.backgroundColor||r.lineHeight||r.borderWidth&&r.borderColor)}const ZRText$1=ZRText;var getECData=makeInner(),setCommonECData=function(r,t,n,o){if(o){var a=getECData(o);a.dataIndex=n,a.dataType=t,a.seriesIndex=r,o.type==="group"&&o.traverse(function(l){var d=getECData(l);d.seriesIndex=r,d.dataIndex=n,d.dataType=t})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(r){return r!=null&&r!=="none"}var liftedColorCache=new LRU$1(100);function liftColor(r){if(isString(r)){var t=liftedColorCache.get(r);return t||(t=lift(r,-.1),liftedColorCache.put(r,t)),t}else if(isGradientObject(r)){var n=extend({},r);return n.colorStops=map$1(r.colorStops,function(o){return{offset:o.offset,color:lift(o.color,-.1)}}),n}return r}function doChangeHoverState(r,t,n){r.onHoverStateChange&&(r.hoverState||0)!==n&&r.onHoverStateChange(t),r.hoverState=n}function singleEnterEmphasis(r){doChangeHoverState(r,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(r){r.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(r,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(r){doChangeHoverState(r,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(r){r.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(r,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(r){r.selected=!0}function singleLeaveSelect(r){r.selected=!1}function updateElementState(r,t,n){t(r,n)}function traverseUpdateState(r,t,n){updateElementState(r,t,n),r.isGroup&&r.traverse(function(o){updateElementState(o,t,n)})}function setStatesFlag(r,t){switch(t){case"emphasis":r.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":r.hoverState=HOVER_STATE_NORMAL;break;case"blur":r.hoverState=HOVER_STATE_BLUR;break;case"select":r.selected=!0}}function getFromStateStyle(r,t,n,o){for(var a=r.style,l={},d=0;d<t.length;d++){var g=t[d],y=a[g];l[g]=y??(o&&o[g])}for(var d=0;d<r.animators.length;d++){var S=r.animators[d];S.__fromStateTransition&&S.__fromStateTransition.indexOf(n)<0&&S.targetName==="style"&&S.saveTo(l,t)}return l}function createEmphasisDefaultState(r,t,n,o){var a=n&&indexOf(n,"select")>=0,l=!1;if(r instanceof Path$1){var d=getSavedStates(r),g=a&&d.selectFill||d.normalFill,y=a&&d.selectStroke||d.normalStroke;if(hasFillOrStroke(g)||hasFillOrStroke(y)){o=o||{};var S=o.style||{};S.fill==="inherit"?(l=!0,o=extend({},o),S=extend({},S),S.fill=g):!hasFillOrStroke(S.fill)&&hasFillOrStroke(g)?(l=!0,o=extend({},o),S=extend({},S),S.fill=liftColor(g)):!hasFillOrStroke(S.stroke)&&hasFillOrStroke(y)&&(l||(o=extend({},o),S=extend({},S)),S.stroke=liftColor(y)),o.style=S}}if(o&&o.z2==null){l||(o=extend({},o));var x=r.z2EmphasisLift;o.z2=r.z2+(x??Z2_EMPHASIS_LIFT)}return o}function createSelectDefaultState(r,t,n){if(n&&n.z2==null){n=extend({},n);var o=r.z2SelectLift;n.z2=r.z2+(o??Z2_SELECT_LIFT)}return n}function createBlurDefaultState(r,t,n){var o=indexOf(r.currentStates,t)>=0,a=r.style.opacity,l=o?null:getFromStateStyle(r,["opacity"],t,{opacity:1});n=n||{};var d=n.style||{};return d.opacity==null&&(n=extend({},n),d=extend({opacity:o?a:l.opacity*.1},d),n.style=d),n}function elementStateProxy(r,t){var n=this.states[r];if(this.style){if(r==="emphasis")return createEmphasisDefaultState(this,r,t,n);if(r==="blur")return createBlurDefaultState(this,r,n);if(r==="select")return createSelectDefaultState(this,r,n)}return n}function setDefaultStateProxy(r){r.stateProxy=elementStateProxy;var t=r.getTextContent(),n=r.getTextGuideLine();t&&(t.stateProxy=elementStateProxy),n&&(n.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(r,t){!shouldSilent(r,t)&&!r.__highByOuter&&traverseUpdateState(r,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(r,t){!shouldSilent(r,t)&&!r.__highByOuter&&traverseUpdateState(r,singleLeaveEmphasis)}function enterEmphasis(r,t){r.__highByOuter|=1<<(t||0),traverseUpdateState(r,singleEnterEmphasis)}function leaveEmphasis(r,t){!(r.__highByOuter&=~(1<<(t||0)))&&traverseUpdateState(r,singleLeaveEmphasis)}function enterBlur(r){traverseUpdateState(r,singleEnterBlur)}function leaveBlur(r){traverseUpdateState(r,singleLeaveBlur)}function enterSelect(r){traverseUpdateState(r,singleEnterSelect)}function leaveSelect(r){traverseUpdateState(r,singleLeaveSelect)}function shouldSilent(r,t){return r.__highDownSilentOnTouch&&t.zrByTouch}function allLeaveBlur(r){var t=r.getModel(),n=[],o=[];t.eachComponent(function(a,l){var d=getComponentStates(l),g=a==="series",y=g?r.getViewOfSeriesModel(l):r.getViewOfComponentModel(l);!g&&o.push(y),d.isBlured&&(y.group.traverse(function(S){singleLeaveBlur(S)}),g&&n.push(l)),d.isBlured=!1}),each$f(o,function(a){a&&a.toggleBlurSeries&&a.toggleBlurSeries(n,!1,t)})}function blurSeries(r,t,n,o){var a=o.getModel();n=n||"coordinateSystem";function l(S,x){for(var w=0;w<x.length;w++){var c=S.getItemGraphicEl(x[w]);c&&leaveBlur(c)}}if(r!=null&&!(!t||t==="none")){var d=a.getSeriesByIndex(r),g=d.coordinateSystem;g&&g.master&&(g=g.master);var y=[];a.eachSeries(function(S){var x=d===S,w=S.coordinateSystem;w&&w.master&&(w=w.master);var c=w&&g?w===g:x;if(!(n==="series"&&!x||n==="coordinateSystem"&&!c||t==="series"&&x)){var A=o.getViewOfSeriesModel(S);if(A.group.traverse(function($){$.__highByOuter&&x&&t==="self"||singleEnterBlur($)}),isArrayLike(t))l(S.getData(),t);else if(isObject$3(t))for(var R=keys(t),L=0;L<R.length;L++)l(S.getData(R[L]),t[R[L]]);y.push(S),getComponentStates(S).isBlured=!0}}),a.eachComponent(function(S,x){if(S!=="series"){var w=o.getViewOfComponentModel(x);w&&w.toggleBlurSeries&&w.toggleBlurSeries(y,!0,a)}})}}function blurComponent(r,t,n){if(!(r==null||t==null)){var o=n.getModel().getComponent(r,t);if(o){getComponentStates(o).isBlured=!0;var a=n.getViewOfComponentModel(o);!a||!a.focusBlurEnabled||a.group.traverse(function(l){singleEnterBlur(l)})}}}function blurSeriesFromHighlightPayload(r,t,n){var o=r.seriesIndex,a=r.getData(t.dataType);if(a){var l=queryDataIndex(a,t);l=(isArray$1(l)?l[0]:l)||0;var d=a.getItemGraphicEl(l);if(!d)for(var g=a.count(),y=0;!d&&y<g;)d=a.getItemGraphicEl(y++);if(d){var S=getECData(d);blurSeries(o,S.focus,S.blurScope,n)}else{var x=r.get(["emphasis","focus"]),w=r.get(["emphasis","blurScope"]);x!=null&&blurSeries(o,x,w,n)}}}function findComponentHighDownDispatchers(r,t,n,o){var a={focusSelf:!1,dispatchers:null};if(r==null||r==="series"||t==null||n==null)return a;var l=o.getModel().getComponent(r,t);if(!l)return a;var d=o.getViewOfComponentModel(l);if(!d||!d.findHighDownDispatchers)return a;for(var g=d.findHighDownDispatchers(n),y,S=0;S<g.length;S++)if(getECData(g[S]).focus==="self"){y=!0;break}return{focusSelf:y,dispatchers:g}}function handleGlobalMouseOverForHighDown(r,t,n){var o=getECData(r),a=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,n),l=a.dispatchers,d=a.focusSelf;l?(d&&blurComponent(o.componentMainType,o.componentIndex,n),each$f(l,function(g){return enterEmphasisWhenMouseOver(g,t)})):(blurSeries(o.seriesIndex,o.focus,o.blurScope,n),o.focus==="self"&&blurComponent(o.componentMainType,o.componentIndex,n),enterEmphasisWhenMouseOver(r,t))}function handleGlobalMouseOutForHighDown(r,t,n){allLeaveBlur(n);var o=getECData(r),a=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,n).dispatchers;a?each$f(a,function(l){return leaveEmphasisWhenMouseOut(l,t)}):leaveEmphasisWhenMouseOut(r,t)}function toggleSelectionFromPayload(r,t,n){if(isSelectChangePayload(t)){var o=t.dataType,a=r.getData(o),l=queryDataIndex(a,t);isArray$1(l)||(l=[l]),r[t.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":t.type===SELECT_ACTION_TYPE?"select":"unselect"](l,o)}}function updateSeriesElementSelection(r){var t=r.getAllData();each$f(t,function(n){var o=n.data,a=n.type;o.eachItemGraphicEl(function(l,d){r.isSelected(d,a)?enterSelect(l):leaveSelect(l)})})}function getAllSelectedIndices(r){var t=[];return r.eachSeries(function(n){var o=n.getAllData();each$f(o,function(a){a.data;var l=a.type,d=n.getSelectedDataIndices();if(d.length>0){var g={dataIndex:d,seriesIndex:n.seriesIndex};l!=null&&(g.dataType=l),t.push(g)}})}),t}function enableHoverEmphasis(r,t,n){setAsHighDownDispatcher(r,!0),traverseUpdateState(r,setDefaultStateProxy),enableHoverFocus(r,t,n)}function disableHoverEmphasis(r){setAsHighDownDispatcher(r,!1)}function toggleHoverEmphasis(r,t,n,o){o?disableHoverEmphasis(r):enableHoverEmphasis(r,t,n)}function enableHoverFocus(r,t,n){var o=getECData(r);t!=null?(o.focus=t,o.blurScope=n):o.focus&&(o.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(r,t,n,o){n=n||"itemStyle";for(var a=0;a<OTHER_STATES.length;a++){var l=OTHER_STATES[a],d=t.getModel([l,n]),g=r.ensureState(l);g.style=o?o(d):d[defaultStyleGetterMap[n]]()}}function setAsHighDownDispatcher(r,t){var n=t===!1,o=r;r.highDownSilentOnTouch&&(o.__highDownSilentOnTouch=r.highDownSilentOnTouch),(!n||o.__highDownDispatcher)&&(o.__highByOuter=o.__highByOuter||0,o.__highDownDispatcher=!n)}function isHighDownDispatcher(r){return!!(r&&r.__highDownDispatcher)}function enableComponentHighDownFeatures(r,t,n){var o=getECData(r);o.componentMainType=t.mainType,o.componentIndex=t.componentIndex,o.componentHighDownName=n}function getHighlightDigit(r){var t=_highlightKeyMap[r];return t==null&&_highlightNextDigit<=32&&(t=_highlightKeyMap[r]=_highlightNextDigit++),t}function isSelectChangePayload(r){var t=r.type;return t===SELECT_ACTION_TYPE||t===UNSELECT_ACTION_TYPE||t===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(r){var t=r.type;return t===HIGHLIGHT_ACTION_TYPE||t===DOWNPLAY_ACTION_TYPE}function savePathStates(r){var t=getSavedStates(r);t.normalFill=r.style.fill,t.normalStroke=r.style.stroke;var n=r.states.select||{};t.selectFill=n.style&&n.style.fill||null,t.selectStroke=n.style&&n.style.stroke||null}var CMD$2=PathProxy$1.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(r,t){if(t){var n=r.data,o=r.len(),a,l,d,g,y,S,x=CMD$2.M,w=CMD$2.C,c=CMD$2.L,A=CMD$2.R,R=CMD$2.A,L=CMD$2.Q;for(d=0,g=0;d<o;){switch(a=n[d++],g=d,l=0,a){case x:l=1;break;case c:l=1;break;case w:l=3;break;case L:l=2;break;case R:var $=t[4],O=t[5],z=mathSqrt$2(t[0]*t[0]+t[1]*t[1]),V=mathSqrt$2(t[2]*t[2]+t[3]*t[3]),j=mathAtan2(-t[1]/V,t[0]/z);n[d]*=z,n[d++]+=$,n[d]*=V,n[d++]+=O,n[d++]*=z,n[d++]*=V,n[d++]+=j,n[d++]+=j,d+=2,g=d;break;case A:S[0]=n[d++],S[1]=n[d++],applyTransform$1(S,S,t),n[g++]=S[0],n[g++]=S[1],S[0]+=n[d++],S[1]+=n[d++],applyTransform$1(S,S,t),n[g++]=S[0],n[g++]=S[1]}for(y=0;y<l;y++){var K=points$2[y];K[0]=n[d++],K[1]=n[d++],applyTransform$1(K,K,t),n[g++]=K[0],n[g++]=K[1]}}r.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function vRatio(r,t){return(r[0]*t[0]+r[1]*t[1])/(vMag(r)*vMag(t))}function vAngle(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(vRatio(r,t))}function processArc(r,t,n,o,a,l,d,g,y,S,x){var w=y*(PI$7/180),c=mathCos$2(w)*(r-n)/2+mathSin$2(w)*(t-o)/2,A=-1*mathSin$2(w)*(r-n)/2+mathCos$2(w)*(t-o)/2,R=c*c/(d*d)+A*A/(g*g);R>1&&(d*=mathSqrt$1(R),g*=mathSqrt$1(R));var L=(a===l?-1:1)*mathSqrt$1((d*d*(g*g)-d*d*(A*A)-g*g*(c*c))/(d*d*(A*A)+g*g*(c*c)))||0,$=L*d*A/g,O=L*-g*c/d,z=(r+n)/2+mathCos$2(w)*$-mathSin$2(w)*O,V=(t+o)/2+mathSin$2(w)*$+mathCos$2(w)*O,j=vAngle([1,0],[(c-$)/d,(A-O)/g]),K=[(c-$)/d,(A-O)/g],Z=[(-1*c-$)/d,(-1*A-O)/g],q=vAngle(K,Z);if(vRatio(K,Z)<=-1&&(q=PI$7),vRatio(K,Z)>=1&&(q=0),q<0){var ie=Math.round(q/PI$7*1e6)/1e6;q=PI$7*2+ie%2*PI$7}x.addData(S,z,V,d,g,j,q,w,l)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(r){var t=new PathProxy$1;if(!r)return t;var n=0,o=0,a=n,l=o,d,g=PathProxy$1.CMD,y=r.match(commandReg);if(!y)return t;for(var S=0;S<y.length;S++){for(var x=y[S],w=x.charAt(0),c=void 0,A=x.match(numberReg$1)||[],R=A.length,L=0;L<R;L++)A[L]=parseFloat(A[L]);for(var $=0;$<R;){var O=void 0,z=void 0,V=void 0,j=void 0,K=void 0,Z=void 0,q=void 0,ie=n,te=o,oe=void 0,re=void 0;switch(w){case"l":n+=A[$++],o+=A[$++],c=g.L,t.addData(c,n,o);break;case"L":n=A[$++],o=A[$++],c=g.L,t.addData(c,n,o);break;case"m":n+=A[$++],o+=A[$++],c=g.M,t.addData(c,n,o),a=n,l=o,w="l";break;case"M":n=A[$++],o=A[$++],c=g.M,t.addData(c,n,o),a=n,l=o,w="L";break;case"h":n+=A[$++],c=g.L,t.addData(c,n,o);break;case"H":n=A[$++],c=g.L,t.addData(c,n,o);break;case"v":o+=A[$++],c=g.L,t.addData(c,n,o);break;case"V":o=A[$++],c=g.L,t.addData(c,n,o);break;case"C":c=g.C,t.addData(c,A[$++],A[$++],A[$++],A[$++],A[$++],A[$++]),n=A[$-2],o=A[$-1];break;case"c":c=g.C,t.addData(c,A[$++]+n,A[$++]+o,A[$++]+n,A[$++]+o,A[$++]+n,A[$++]+o),n+=A[$-2],o+=A[$-1];break;case"S":O=n,z=o,oe=t.len(),re=t.data,d===g.C&&(O+=n-re[oe-4],z+=o-re[oe-3]),c=g.C,ie=A[$++],te=A[$++],n=A[$++],o=A[$++],t.addData(c,O,z,ie,te,n,o);break;case"s":O=n,z=o,oe=t.len(),re=t.data,d===g.C&&(O+=n-re[oe-4],z+=o-re[oe-3]),c=g.C,ie=n+A[$++],te=o+A[$++],n+=A[$++],o+=A[$++],t.addData(c,O,z,ie,te,n,o);break;case"Q":ie=A[$++],te=A[$++],n=A[$++],o=A[$++],c=g.Q,t.addData(c,ie,te,n,o);break;case"q":ie=A[$++]+n,te=A[$++]+o,n+=A[$++],o+=A[$++],c=g.Q,t.addData(c,ie,te,n,o);break;case"T":O=n,z=o,oe=t.len(),re=t.data,d===g.Q&&(O+=n-re[oe-4],z+=o-re[oe-3]),n=A[$++],o=A[$++],c=g.Q,t.addData(c,O,z,n,o);break;case"t":O=n,z=o,oe=t.len(),re=t.data,d===g.Q&&(O+=n-re[oe-4],z+=o-re[oe-3]),n+=A[$++],o+=A[$++],c=g.Q,t.addData(c,O,z,n,o);break;case"A":V=A[$++],j=A[$++],K=A[$++],Z=A[$++],q=A[$++],ie=n,te=o,n=A[$++],o=A[$++],c=g.A,processArc(ie,te,n,o,Z,q,V,j,K,c,t);break;case"a":V=A[$++],j=A[$++],K=A[$++],Z=A[$++],q=A[$++],ie=n,te=o,n+=A[$++],o+=A[$++],c=g.A,processArc(ie,te,n,o,Z,q,V,j,K,c,t);break}}(w==="z"||w==="Z")&&(c=g.Z,t.addData(c),n=a,o=l),d=c}return t.toStatic(),t}var SVGPath=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.applyTransform=function(n){},t}(Path$1);function isPathProxy(r){return r.setData!=null}function createPathOptions(r,t){var n=createPathProxyFromString(r),o=extend({},t);return o.buildPath=function(a){if(isPathProxy(a)){a.setData(n.data);var l=a.getContext();l&&a.rebuildPath(l,1)}else{var l=a;n.rebuildPath(l,1)}},o.applyTransform=function(a){transformPath(n,a),this.dirtyShape()},o}function createFromString(r,t){return new SVGPath(createPathOptions(r,t))}function extendFromString(r,t){var n=createPathOptions(r,t),o=function(a){__extends(l,a);function l(d){var g=a.call(this,d)||this;return g.applyTransform=n.applyTransform,g.buildPath=n.buildPath,g}return l}(SVGPath);return o}function mergePath$1(r,t){for(var n=[],o=r.length,a=0;a<o;a++){var l=r[a];n.push(l.getUpdatedPathProxy(!0))}var d=new Path$1(t);return d.createPathProxy(),d.buildPath=function(g){if(isPathProxy(g)){g.appendPath(n);var y=g.getContext();y&&g.rebuildPath(y,1)}},d}function clonePath(r,t){t=t||{};var n=new Path$1;return r.shape&&n.setShape(r.shape),n.setStyle(r.style),t.bakeTransform?transformPath(n.path,r.getComputedTransform()):t.toLocal?n.setLocalTransform(r.getComputedTransform()):n.copyTransform(r),n.buildPath=r.buildPath,n.applyTransform=n.applyTransform,n.z=r.z,n.z2=r.z2,n.zlevel=r.zlevel,n}var CircleShape=function(){function r(){this.cx=0,this.cy=0,this.r=0}return r}(),Circle=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new CircleShape},t.prototype.buildPath=function(n,o){n.moveTo(o.cx+o.r,o.cy),n.arc(o.cx,o.cy,o.r,0,Math.PI*2)},t}(Path$1);Circle.prototype.type="circle";const Circle$1=Circle;var EllipseShape=function(){function r(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return r}(),Ellipse=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new EllipseShape},t.prototype.buildPath=function(n,o){var a=.5522848,l=o.cx,d=o.cy,g=o.rx,y=o.ry,S=g*a,x=y*a;n.moveTo(l-g,d),n.bezierCurveTo(l-g,d-x,l-S,d-y,l,d-y),n.bezierCurveTo(l+S,d-y,l+g,d-x,l+g,d),n.bezierCurveTo(l+g,d+x,l+S,d+y,l,d+y),n.bezierCurveTo(l-S,d+y,l-g,d+x,l-g,d),n.closePath()},t}(Path$1);Ellipse.prototype.type="ellipse";const Ellipse$1=Ellipse;var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(r,t,n,o,a,l,d,g){var y=n-r,S=o-t,x=d-a,w=g-l,c=w*y-x*S;if(!(c*c<e))return c=(x*(t-l)-w*(r-a))/c,[r+c*y,t+c*S]}function computeCornerTangents(r,t,n,o,a,l,d){var g=r-n,y=t-o,S=(d?l:-l)/mathSqrt(g*g+y*y),x=S*y,w=-S*g,c=r+x,A=t+w,R=n+x,L=o+w,$=(c+R)/2,O=(A+L)/2,z=R-c,V=L-A,j=z*z+V*V,K=a-l,Z=c*L-R*A,q=(V<0?-1:1)*mathSqrt(mathMax$7(0,K*K*j-Z*Z)),ie=(Z*V-z*q)/j,te=(-Z*z-V*q)/j,oe=(Z*V+z*q)/j,re=(-Z*z+V*q)/j,he=ie-$,_e=te-O,me=oe-$,be=re-O;return he*he+_e*_e>me*me+be*be&&(ie=oe,te=re),{cx:ie,cy:te,x0:-x,y0:-w,x1:ie*(a/K-1),y1:te*(a/K-1)}}function normalizeCornerRadius(r){var t;if(isArray$1(r)){var n=r.length;if(!n)return r;n===1?t=[r[0],r[0],0,0]:n===2?t=[r[0],r[0],r[1],r[1]]:n===3?t=r.concat(r[2]):t=r}else t=[r,r,r,r];return t}function buildPath$1(r,t){var n,o=mathMax$7(t.r,0),a=mathMax$7(t.r0||0,0),l=o>0,d=a>0;if(!(!l&&!d)){if(l||(o=a,a=0),a>o){var g=o;o=a,a=g}var y=t.startAngle,S=t.endAngle;if(!(isNaN(y)||isNaN(S))){var x=t.cx,w=t.cy,c=!!t.clockwise,A=mathAbs$1(S-y),R=A>PI2$3&&A%PI2$3;if(R>e&&(A=R),!(o>e))r.moveTo(x,w);else if(A>PI2$3-e)r.moveTo(x+o*mathCos$1(y),w+o*mathSin$1(y)),r.arc(x,w,o,y,S,!c),a>e&&(r.moveTo(x+a*mathCos$1(S),w+a*mathSin$1(S)),r.arc(x,w,a,S,y,c));else{var L=void 0,$=void 0,O=void 0,z=void 0,V=void 0,j=void 0,K=void 0,Z=void 0,q=void 0,ie=void 0,te=void 0,oe=void 0,re=void 0,he=void 0,_e=void 0,me=void 0,be=o*mathCos$1(y),Q=o*mathSin$1(y),Ne=a*mathCos$1(S),Ee=a*mathSin$1(S),Ge=A>e;if(Ge){var it=t.cornerRadius;it&&(n=normalizeCornerRadius(it),L=n[0],$=n[1],O=n[2],z=n[3]);var Te=mathAbs$1(o-a)/2;if(V=mathMin$7(Te,O),j=mathMin$7(Te,z),K=mathMin$7(Te,L),Z=mathMin$7(Te,$),te=q=mathMax$7(V,j),oe=ie=mathMax$7(K,Z),(q>e||ie>e)&&(re=o*mathCos$1(S),he=o*mathSin$1(S),_e=a*mathCos$1(y),me=a*mathSin$1(y),A<PI$6)){var Ke=intersect(be,Q,_e,me,re,he,Ne,Ee);if(Ke){var Tt=be-Ke[0],Lt=Q-Ke[1],Qt=re-Ke[0],Xe=he-Ke[1],Be=1/mathSin$1(mathACos((Tt*Qt+Lt*Xe)/(mathSqrt(Tt*Tt+Lt*Lt)*mathSqrt(Qt*Qt+Xe*Xe)))/2),ue=mathSqrt(Ke[0]*Ke[0]+Ke[1]*Ke[1]);te=mathMin$7(q,(o-ue)/(Be+1)),oe=mathMin$7(ie,(a-ue)/(Be-1))}}}if(!Ge)r.moveTo(x+be,w+Q);else if(te>e){var Dt=mathMin$7(O,te),Rt=mathMin$7(z,te),Bt=computeCornerTangents(_e,me,be,Q,o,Dt,c),Se=computeCornerTangents(re,he,Ne,Ee,o,Rt,c);r.moveTo(x+Bt.cx+Bt.x0,w+Bt.cy+Bt.y0),te<q&&Dt===Rt?r.arc(x+Bt.cx,w+Bt.cy,te,mathATan2(Bt.y0,Bt.x0),mathATan2(Se.y0,Se.x0),!c):(Dt>0&&r.arc(x+Bt.cx,w+Bt.cy,Dt,mathATan2(Bt.y0,Bt.x0),mathATan2(Bt.y1,Bt.x1),!c),r.arc(x,w,o,mathATan2(Bt.cy+Bt.y1,Bt.cx+Bt.x1),mathATan2(Se.cy+Se.y1,Se.cx+Se.x1),!c),Rt>0&&r.arc(x+Se.cx,w+Se.cy,Rt,mathATan2(Se.y1,Se.x1),mathATan2(Se.y0,Se.x0),!c))}else r.moveTo(x+be,w+Q),r.arc(x,w,o,y,S,!c);if(!(a>e)||!Ge)r.lineTo(x+Ne,w+Ee);else if(oe>e){var Dt=mathMin$7(L,oe),Rt=mathMin$7($,oe),Bt=computeCornerTangents(Ne,Ee,re,he,a,-Rt,c),Se=computeCornerTangents(be,Q,_e,me,a,-Dt,c);r.lineTo(x+Bt.cx+Bt.x0,w+Bt.cy+Bt.y0),oe<ie&&Dt===Rt?r.arc(x+Bt.cx,w+Bt.cy,oe,mathATan2(Bt.y0,Bt.x0),mathATan2(Se.y0,Se.x0),!c):(Rt>0&&r.arc(x+Bt.cx,w+Bt.cy,Rt,mathATan2(Bt.y0,Bt.x0),mathATan2(Bt.y1,Bt.x1),!c),r.arc(x,w,a,mathATan2(Bt.cy+Bt.y1,Bt.cx+Bt.x1),mathATan2(Se.cy+Se.y1,Se.cx+Se.x1),c),Dt>0&&r.arc(x+Se.cx,w+Se.cy,Dt,mathATan2(Se.y1,Se.x1),mathATan2(Se.y0,Se.x0),!c))}else r.lineTo(x+Ne,w+Ee),r.arc(x,w,a,S,y,c)}r.closePath()}}}var SectorShape=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return r}(),Sector=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new SectorShape},t.prototype.buildPath=function(n,o){buildPath$1(n,o)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Path$1);Sector.prototype.type="sector";const Sector$1=Sector;var RingShape=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return r}(),Ring=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new RingShape},t.prototype.buildPath=function(n,o){var a=o.cx,l=o.cy,d=Math.PI*2;n.moveTo(a+o.r,l),n.arc(a,l,o.r,0,d,!1),n.moveTo(a+o.r0,l),n.arc(a,l,o.r0,0,d,!0)},t}(Path$1);Ring.prototype.type="ring";const Ring$1=Ring;function smoothBezier(r,t,n,o){var a=[],l=[],d=[],g=[],y,S,x,w;if(o){x=[1/0,1/0],w=[-1/0,-1/0];for(var c=0,A=r.length;c<A;c++)min$1(x,x,r[c]),max$1(w,w,r[c]);min$1(x,x,o[0]),max$1(w,w,o[1])}for(var c=0,A=r.length;c<A;c++){var R=r[c];if(n)y=r[c?c-1:A-1],S=r[(c+1)%A];else if(c===0||c===A-1){a.push(clone$3(r[c]));continue}else y=r[c-1],S=r[c+1];sub(l,S,y),scale$2(l,l,t);var L=distance(R,y),$=distance(R,S),O=L+$;O!==0&&(L/=O,$/=O),scale$2(d,l,-L),scale$2(g,l,$);var z=add([],R,d),V=add([],R,g);o&&(max$1(z,z,x),min$1(z,z,w),max$1(V,V,x),min$1(V,V,w)),a.push(z),a.push(V)}return n&&a.push(a.shift()),a}function buildPath(r,t,n){var o=t.smooth,a=t.points;if(a&&a.length>=2){if(o){var l=smoothBezier(a,o,n,t.smoothConstraint);r.moveTo(a[0][0],a[0][1]);for(var d=a.length,g=0;g<(n?d:d-1);g++){var y=l[g*2],S=l[g*2+1],x=a[(g+1)%d];r.bezierCurveTo(y[0],y[1],S[0],S[1],x[0],x[1])}}else{r.moveTo(a[0][0],a[0][1]);for(var g=1,w=a.length;g<w;g++)r.lineTo(a[g][0],a[g][1])}n&&r.closePath()}}var PolygonShape=function(){function r(){this.points=null,this.smooth=0,this.smoothConstraint=null}return r}(),Polygon=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new PolygonShape},t.prototype.buildPath=function(n,o){buildPath(n,o,!0)},t}(Path$1);Polygon.prototype.type="polygon";const Polygon$1=Polygon;var PolylineShape=function(){function r(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return r}(),Polyline$2=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new PolylineShape},t.prototype.buildPath=function(n,o){buildPath(n,o,!1)},t}(Path$1);Polyline$2.prototype.type="polyline";const Polyline$3=Polyline$2;var subPixelOptimizeOutputShape={},LineShape=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}(),Line$2=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LineShape},t.prototype.buildPath=function(n,o){var a,l,d,g;if(this.subPixelOptimize){var y=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,o,this.style);a=y.x1,l=y.y1,d=y.x2,g=y.y2}else a=o.x1,l=o.y1,d=o.x2,g=o.y2;var S=o.percent;S!==0&&(n.moveTo(a,l),S<1&&(d=a*(1-S)+d*S,g=l*(1-S)+g*S),n.lineTo(d,g))},t.prototype.pointAt=function(n){var o=this.shape;return[o.x1*(1-n)+o.x2*n,o.y1*(1-n)+o.y2*n]},t}(Path$1);Line$2.prototype.type="line";const Line$3=Line$2;var out=[],BezierCurveShape=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return r}();function someVectorAt(r,t,n){var o=r.cpx2,a=r.cpy2;return o!=null||a!=null?[(n?cubicDerivativeAt:cubicAt)(r.x1,r.cpx1,r.cpx2,r.x2,t),(n?cubicDerivativeAt:cubicAt)(r.y1,r.cpy1,r.cpy2,r.y2,t)]:[(n?quadraticDerivativeAt:quadraticAt$1)(r.x1,r.cpx1,r.x2,t),(n?quadraticDerivativeAt:quadraticAt$1)(r.y1,r.cpy1,r.y2,t)]}var BezierCurve=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BezierCurveShape},t.prototype.buildPath=function(n,o){var a=o.x1,l=o.y1,d=o.x2,g=o.y2,y=o.cpx1,S=o.cpy1,x=o.cpx2,w=o.cpy2,c=o.percent;c!==0&&(n.moveTo(a,l),x==null||w==null?(c<1&&(quadraticSubdivide(a,y,d,c,out),y=out[1],d=out[2],quadraticSubdivide(l,S,g,c,out),S=out[1],g=out[2]),n.quadraticCurveTo(y,S,d,g)):(c<1&&(cubicSubdivide(a,y,x,d,c,out),y=out[1],x=out[2],d=out[3],cubicSubdivide(l,S,w,g,c,out),S=out[1],w=out[2],g=out[3]),n.bezierCurveTo(y,S,x,w,d,g)))},t.prototype.pointAt=function(n){return someVectorAt(this.shape,n,!1)},t.prototype.tangentAt=function(n){var o=someVectorAt(this.shape,n,!0);return normalize$3(o,o)},t}(Path$1);BezierCurve.prototype.type="bezier-curve";const BezierCurve$1=BezierCurve;var ArcShape=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),Arc=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ArcShape},t.prototype.buildPath=function(n,o){var a=o.cx,l=o.cy,d=Math.max(o.r,0),g=o.startAngle,y=o.endAngle,S=o.clockwise,x=Math.cos(g),w=Math.sin(g);n.moveTo(x*d+a,w*d+l),n.arc(a,l,d,g,y,!S)},t}(Path$1);Arc.prototype.type="arc";const Arc$1=Arc;var CompoundPath=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="compound",n}return t.prototype._updatePathDirty=function(){for(var n=this.shape.paths,o=this.shapeChanged(),a=0;a<n.length;a++)o=o||n[a].shapeChanged();o&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],o=this.getGlobalScale(),a=0;a<n.length;a++)n[a].path||n[a].createPathProxy(),n[a].path.setScale(o[0],o[1],n[a].segmentIgnoreThreshold)},t.prototype.buildPath=function(n,o){for(var a=o.paths||[],l=0;l<a.length;l++)a[l].buildPath(n,a[l].shape,!0)},t.prototype.afterBrush=function(){for(var n=this.shape.paths||[],o=0;o<n.length;o++)n[o].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path$1.prototype.getBoundingRect.call(this)},t}(Path$1);const CompoundPath$1=CompoundPath;var Gradient=function(){function r(t){this.colorStops=t||[]}return r.prototype.addColorStop=function(t,n){this.colorStops.push({offset:t,color:n})},r}();const Gradient$1=Gradient;var LinearGradient=function(r){__extends(t,r);function t(n,o,a,l,d,g){var y=r.call(this,d)||this;return y.x=n??0,y.y=o??0,y.x2=a??1,y.y2=l??0,y.type="linear",y.global=g||!1,y}return t}(Gradient$1);const LinearGradient$1=LinearGradient;var RadialGradient=function(r){__extends(t,r);function t(n,o,a,l,d){var g=r.call(this,l)||this;return g.x=n??.5,g.y=o??.5,g.r=a??.5,g.type="radial",g.global=d||!1,g}return t}(Gradient$1);const RadialGradient$1=RadialGradient;var extent=[0,0],extent2=[0,0],minTv=new Point$1,maxTv=new Point$1,OrientedBoundingRect=function(){function r(t,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var o=0;o<4;o++)this._corners[o]=new Point$1;for(var o=0;o<2;o++)this._axes[o]=new Point$1;t&&this.fromBoundingRect(t,n)}return r.prototype.fromBoundingRect=function(t,n){var o=this._corners,a=this._axes,l=t.x,d=t.y,g=l+t.width,y=d+t.height;if(o[0].set(l,d),o[1].set(g,d),o[2].set(g,y),o[3].set(l,y),n)for(var S=0;S<4;S++)o[S].transform(n);Point$1.sub(a[0],o[1],o[0]),Point$1.sub(a[1],o[3],o[0]),a[0].normalize(),a[1].normalize();for(var S=0;S<2;S++)this._origin[S]=a[S].dot(o[0])},r.prototype.intersect=function(t,n){var o=!0,a=!n;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,t,minTv,maxTv,a,1)&&(o=!1,a)||!this._intersectCheckOneSide(t,this,minTv,maxTv,a,-1)&&(o=!1,a)||a||Point$1.copy(n,o?minTv:maxTv),o},r.prototype._intersectCheckOneSide=function(t,n,o,a,l,d){for(var g=!0,y=0;y<2;y++){var S=this._axes[y];if(this._getProjMinMaxOnAxis(y,t._corners,extent),this._getProjMinMaxOnAxis(y,n._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(g=!1,l)return g;var x=Math.abs(extent2[0]-extent[1]),w=Math.abs(extent[0]-extent2[1]);Math.min(x,w)>a.len()&&(x<w?Point$1.scale(a,S,-x*d):Point$1.scale(a,S,w*d))}else if(o){var x=Math.abs(extent2[0]-extent[1]),w=Math.abs(extent[0]-extent2[1]);Math.min(x,w)<o.len()&&(x<w?Point$1.scale(o,S,x*d):Point$1.scale(o,S,-w*d))}}return g},r.prototype._getProjMinMaxOnAxis=function(t,n,o){for(var a=this._axes[t],l=this._origin,d=n[0].dot(a)+l[t],g=d,y=d,S=1;S<n.length;S++){var x=n[S].dot(a)+l[t];g=Math.min(x,g),y=Math.max(x,y)}o[0]=g,o[1]=y},r}();const OrientedBoundingRect$1=OrientedBoundingRect;var m=[],IncrementalDisplayable=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return t.prototype.traverse=function(n,o){n.call(o,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(n,o){o?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},t.prototype.addDisplayables=function(n,o){o=o||!1;for(var a=0;a<n.length;a++)this.addDisplayable(n[a],o)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(n){for(var o=this._cursor;o<this._displayables.length;o++)n&&n(this._displayables[o]);for(var o=0;o<this._temporaryDisplayables.length;o++)n&&n(this._temporaryDisplayables[o])},t.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var o=this._displayables[n];o.parent=this,o.update(),o.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var o=this._temporaryDisplayables[n];o.parent=this,o.update(),o.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new BoundingRect$1(1/0,1/0,-1/0,-1/0),o=0;o<this._displayables.length;o++){var a=this._displayables[o],l=a.getBoundingRect().clone();a.needLocalTransform()&&l.applyTransform(a.getLocalTransform(m)),n.union(l)}this._rect=n}return this._rect},t.prototype.contain=function(n,o){var a=this.transformCoordToLocal(n,o),l=this.getBoundingRect();if(l.contain(a[0],a[1]))for(var d=0;d<this._displayables.length;d++){var g=this._displayables[d];if(g.contain(n,o))return!0}return!1},t}(Displayable$1);const IncrementalDisplayable$1=IncrementalDisplayable;var transitionStore=makeInner();function getAnimationConfig(r,t,n,o,a){var l;if(t&&t.ecModel){var d=t.ecModel.getUpdatePayload();l=d&&d.animation}var g=t&&t.isAnimationEnabled(),y=r==="update";if(g){var S=void 0,x=void 0,w=void 0;o?(S=retrieve2(o.duration,200),x=retrieve2(o.easing,"cubicOut"),w=0):(S=t.getShallow(y?"animationDurationUpdate":"animationDuration"),x=t.getShallow(y?"animationEasingUpdate":"animationEasing"),w=t.getShallow(y?"animationDelayUpdate":"animationDelay")),l&&(l.duration!=null&&(S=l.duration),l.easing!=null&&(x=l.easing),l.delay!=null&&(w=l.delay)),isFunction(w)&&(w=w(n,a)),isFunction(S)&&(S=S(n));var c={duration:S||0,delay:w,easing:x};return c}else return null}function animateOrSetProps(r,t,n,o,a,l,d){var g=!1,y;isFunction(a)?(d=l,l=a,a=null):isObject$3(a)&&(l=a.cb,d=a.during,g=a.isFrom,y=a.removeOpt,a=a.dataIndex);var S=r==="leave";S||t.stopAnimation("leave");var x=getAnimationConfig(r,o,a,S?y||{}:null,o&&o.getAnimationDelayParams?o.getAnimationDelayParams(t,a):null);if(x&&x.duration>0){var w=x.duration,c=x.delay,A=x.easing,R={duration:w,delay:c||0,easing:A,done:l,force:!!l||!!d,setToFinal:!S,scope:r,during:d};g?t.animateFrom(n,R):t.animateTo(n,R)}else t.stopAnimation(),!g&&t.attr(n),d&&d(1),l&&l()}function updateProps$1(r,t,n,o,a,l){animateOrSetProps("update",r,t,n,o,a,l)}function initProps(r,t,n,o,a,l){animateOrSetProps("enter",r,t,n,o,a,l)}function isElementRemoved(r){if(!r.__zr)return!0;for(var t=0;t<r.animators.length;t++){var n=r.animators[t];if(n.scope==="leave")return!0}return!1}function removeElement(r,t,n,o,a,l){isElementRemoved(r)||animateOrSetProps("leave",r,t,n,o,a,l)}function fadeOutDisplayable(r,t,n,o){r.removeTextContent(),r.removeTextGuideLine(),removeElement(r,{style:{opacity:0}},t,n,o)}function removeElementWithFadeOut(r,t,n){function o(){r.parent&&r.parent.remove(r)}r.isGroup?r.traverse(function(a){a.isGroup||fadeOutDisplayable(a,t,n,o)}):fadeOutDisplayable(r,t,n,o)}function saveOldStyle(r){transitionStore(r).oldStyle=r.style}function getOldStyle(r){return transitionStore(r).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(r){return Path$1.extend(r)}var extendPathFromString=extendFromString;function extendPath(r,t){return extendPathFromString(r,t)}function registerShape(r,t){_customShapeMap[r]=t}function getShapeClass(r){if(_customShapeMap.hasOwnProperty(r))return _customShapeMap[r]}function makePath(r,t,n,o){var a=createFromString(r,t);return n&&(o==="center"&&(n=centerGraphic(n,a.getBoundingRect())),resizePath(a,n)),a}function makeImage(r,t,n){var o=new ZRImage$1({style:{image:r,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(a){if(n==="center"){var l={width:a.width,height:a.height};o.setStyle(centerGraphic(t,l))}}});return o}function centerGraphic(r,t){var n=t.width/t.height,o=r.height*n,a;o<=r.width?a=r.height:(o=r.width,a=o/n);var l=r.x+r.width/2,d=r.y+r.height/2;return{x:l-o/2,y:d-a/2,width:o,height:a}}var mergePath=mergePath$1;function resizePath(r,t){if(r.applyTransform){var n=r.getBoundingRect(),o=n.calculateTransform(t);r.applyTransform(o)}}function subPixelOptimizeLine(r,t){return subPixelOptimizeLine$1(r,r,{lineWidth:t}),r}function subPixelOptimizeRect(r){return subPixelOptimizeRect$1(r.shape,r.shape,r.style),r}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(r,t){for(var n=identity([]);r&&r!==t;)mul(n,r.getLocalTransform(),n),r=r.parent;return n}function applyTransform(r,t,n){return t&&!isArrayLike(t)&&(t=Transformable$1.getLocalTransform(t)),n&&(t=invert([],t)),applyTransform$1([],r,t)}function transformDirection(r,t,n){var o=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),a=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),l=[r==="left"?-o:r==="right"?o:0,r==="top"?-a:r==="bottom"?a:0];return l=applyTransform(l,t,n),Math.abs(l[0])>Math.abs(l[1])?l[0]>0?"right":"left":l[1]>0?"bottom":"top"}function isNotGroup(r){return!r.isGroup}function isPath$1(r){return r.shape!=null}function groupTransition(r,t,n){if(!r||!t)return;function o(d){var g={};return d.traverse(function(y){isNotGroup(y)&&y.anid&&(g[y.anid]=y)}),g}function a(d){var g={x:d.x,y:d.y,rotation:d.rotation};return isPath$1(d)&&(g.shape=extend({},d.shape)),g}var l=o(r);t.traverse(function(d){if(isNotGroup(d)&&d.anid){var g=l[d.anid];if(g){var y=a(d);d.attr(a(g)),updateProps$1(d,y,n,getECData(d).dataIndex)}}})}function clipPointsByRect(r,t){return map$1(r,function(n){var o=n[0];o=mathMax$6(o,t.x),o=mathMin$6(o,t.x+t.width);var a=n[1];return a=mathMax$6(a,t.y),a=mathMin$6(a,t.y+t.height),[o,a]})}function clipRectByRect(r,t){var n=mathMax$6(r.x,t.x),o=mathMin$6(r.x+r.width,t.x+t.width),a=mathMax$6(r.y,t.y),l=mathMin$6(r.y+r.height,t.y+t.height);if(o>=n&&l>=a)return{x:n,y:a,width:o-n,height:l-a}}function createIcon(r,t,n){var o=extend({rectHover:!0},t),a=o.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},r)return r.indexOf("image://")===0?(a.image=r.slice(8),defaults(a,n),new ZRImage$1(o)):makePath(r.replace("path://",""),o,n,"center")}function linePolygonIntersect(r,t,n,o,a){for(var l=0,d=a[a.length-1];l<a.length;l++){var g=a[l];if(lineLineIntersect$1(r,t,n,o,g[0],g[1],d[0],d[1]))return!0;d=g}}function lineLineIntersect$1(r,t,n,o,a,l,d,g){var y=n-r,S=o-t,x=d-a,w=g-l,c=crossProduct2d$1(x,w,y,S);if(nearZero(c))return!1;var A=r-a,R=t-l,L=crossProduct2d$1(A,R,y,S)/c;if(L<0||L>1)return!1;var $=crossProduct2d$1(A,R,x,w)/c;return!($<0||$>1)}function crossProduct2d$1(r,t,n,o){return r*o-n*t}function nearZero(r){return r<=1e-6&&r>=-1e-6}function setTooltipConfig(r){var t=r.itemTooltipOption,n=r.componentModel,o=r.itemName,a=isString(t)?{formatter:t}:t,l=n.mainType,d=n.componentIndex,g={componentType:l,name:o,$vars:["name"]};g[l+"Index"]=d;var y=r.formatterParamsExtra;y&&each$f(keys(y),function(x){hasOwn(g,x)||(g[x]=y[x],g.$vars.push(x))});var S=getECData(r.el);S.componentMainType=l,S.componentIndex=d,S.tooltipConfig={name:o,option:defaults({content:o,formatterParams:g},a)}}function traverseElement(r,t){var n;r.isGroup&&(n=t(r)),n||r.traverse(t)}function traverseElements(r,t){if(r)if(isArray$1(r))for(var n=0;n<r.length;n++)traverseElement(r[n],t);else traverseElement(r,t)}registerShape("circle",Circle$1);registerShape("ellipse",Ellipse$1);registerShape("sector",Sector$1);registerShape("ring",Ring$1);registerShape("polygon",Polygon$1);registerShape("polyline",Polyline$3);registerShape("rect",Rect$3);registerShape("line",Line$3);registerShape("bezierCurve",BezierCurve$1);registerShape("arc",Arc$1);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc:Arc$1,BezierCurve:BezierCurve$1,BoundingRect:BoundingRect$1,Circle:Circle$1,CompoundPath:CompoundPath$1,Ellipse:Ellipse$1,Group:Group$4,Image:ZRImage$1,IncrementalDisplayable:IncrementalDisplayable$1,Line:Line$3,LinearGradient:LinearGradient$1,OrientedBoundingRect:OrientedBoundingRect$1,Path:Path$1,Point:Point$1,Polygon:Polygon$1,Polyline:Polyline$3,RadialGradient:RadialGradient$1,Rect:Rect$3,Ring:Ring$1,Sector:Sector$1,Text:ZRText$1,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(r,t){for(var n=0;n<SPECIAL_STATES.length;n++){var o=SPECIAL_STATES[n],a=t[o],l=r.ensureState(o);l.style=l.style||{},l.style.text=a}var d=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:t.normal}),r.useStates(d,!0)}function getLabelText(r,t,n){var o=r.labelFetcher,a=r.labelDataIndex,l=r.labelDimIndex,d=t.normal,g;o&&(g=o.getFormattedLabel(a,"normal",null,l,d&&d.get("formatter"),n!=null?{interpolatedValue:n}:null)),g==null&&(g=isFunction(r.defaultText)?r.defaultText(a,r,n):r.defaultText);for(var y={normal:g},S=0;S<SPECIAL_STATES.length;S++){var x=SPECIAL_STATES[S],w=t[x];y[x]=retrieve2(o?o.getFormattedLabel(a,x,null,l,w&&w.get("formatter")):null,g)}return y}function setLabelStyle(r,t,n,o){n=n||EMPTY_OBJ;for(var a=r instanceof ZRText$1,l=!1,d=0;d<DISPLAY_STATES.length;d++){var g=t[DISPLAY_STATES[d]];if(g&&g.getShallow("show")){l=!0;break}}var y=a?r:r.getTextContent();if(l){a||(y||(y=new ZRText$1,r.setTextContent(y)),r.stateProxy&&(y.stateProxy=r.stateProxy));var S=getLabelText(n,t),x=t.normal,w=!!x.getShallow("show"),c=createTextStyle$1(x,o&&o.normal,n,!1,!a);c.text=S.normal,a||r.setTextConfig(createTextConfig(x,n,!1));for(var d=0;d<SPECIAL_STATES.length;d++){var A=SPECIAL_STATES[d],g=t[A];if(g){var R=y.ensureState(A),L=!!retrieve2(g.getShallow("show"),w);if(L!==w&&(R.ignore=!L),R.style=createTextStyle$1(g,o&&o[A],n,!0,!a),R.style.text=S[A],!a){var $=r.ensureState(A);$.textConfig=createTextConfig(g,n,!0)}}}y.silent=!!x.getShallow("silent"),y.style.x!=null&&(c.x=y.style.x),y.style.y!=null&&(c.y=y.style.y),y.ignore=!w,y.useStyle(c),y.dirty(),n.enableTextSetter&&(labelInner(y).setLabelText=function(O){var z=getLabelText(n,t,O);setLabelText(y,z)})}else y&&(y.ignore=!0);r.dirty()}function getLabelStatesModels(r,t){t=t||"label";for(var n={normal:r.getModel(t)},o=0;o<SPECIAL_STATES.length;o++){var a=SPECIAL_STATES[o];n[a]=r.getModel([a,t])}return n}function createTextStyle$1(r,t,n,o,a){var l={};return setTextStyleCommon(l,r,n,o,a),t&&extend(l,t),l}function createTextConfig(r,t,n){t=t||{};var o={},a,l=r.getShallow("rotate"),d=retrieve2(r.getShallow("distance"),n?null:5),g=r.getShallow("offset");return a=r.getShallow("position")||(n?null:"inside"),a==="outside"&&(a=t.defaultOutsidePosition||"top"),a!=null&&(o.position=a),g!=null&&(o.offset=g),l!=null&&(l*=Math.PI/180,o.rotation=l),d!=null&&(o.distance=d),o.outsideFill=r.get("color")==="inherit"?t.inheritColor||null:"auto",o}function setTextStyleCommon(r,t,n,o,a){n=n||EMPTY_OBJ;var l=t.ecModel,d=l&&l.option.textStyle,g=getRichItemNames(t),y;if(g){y={};for(var S in g)if(g.hasOwnProperty(S)){var x=t.getModel(["rich",S]);setTokenTextStyle(y[S]={},x,d,n,o,a,!1,!0)}}y&&(r.rich=y);var w=t.get("overflow");w&&(r.overflow=w);var c=t.get("minMargin");c!=null&&(r.margin=c),setTokenTextStyle(r,t,d,n,o,a,!0,!1)}function getRichItemNames(r){for(var t;r&&r!==r.ecModel;){var n=(r.option||EMPTY_OBJ).rich;if(n){t=t||{};for(var o=keys(n),a=0;a<o.length;a++){var l=o[a];t[l]=1}}r=r.parentModel}return t}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(r,t,n,o,a,l,d,g){n=!a&&n||EMPTY_OBJ;var y=o&&o.inheritColor,S=t.getShallow("color"),x=t.getShallow("textBorderColor"),w=retrieve2(t.getShallow("opacity"),n.opacity);(S==="inherit"||S==="auto")&&(y?S=y:S=null),(x==="inherit"||x==="auto")&&(y?x=y:x=null),l||(S=S||n.color,x=x||n.textBorderColor),S!=null&&(r.fill=S),x!=null&&(r.stroke=x);var c=retrieve2(t.getShallow("textBorderWidth"),n.textBorderWidth);c!=null&&(r.lineWidth=c);var A=retrieve2(t.getShallow("textBorderType"),n.textBorderType);A!=null&&(r.lineDash=A);var R=retrieve2(t.getShallow("textBorderDashOffset"),n.textBorderDashOffset);R!=null&&(r.lineDashOffset=R),!a&&w==null&&!g&&(w=o&&o.defaultOpacity),w!=null&&(r.opacity=w),!a&&!l&&r.fill==null&&o.inheritColor&&(r.fill=o.inheritColor);for(var L=0;L<TEXT_PROPS_WITH_GLOBAL.length;L++){var $=TEXT_PROPS_WITH_GLOBAL[L],O=retrieve2(t.getShallow($),n[$]);O!=null&&(r[$]=O)}for(var L=0;L<TEXT_PROPS_SELF.length;L++){var $=TEXT_PROPS_SELF[L],O=t.getShallow($);O!=null&&(r[$]=O)}if(r.verticalAlign==null){var z=t.getShallow("baseline");z!=null&&(r.verticalAlign=z)}if(!d||!o.disableBox){for(var L=0;L<TEXT_PROPS_BOX.length;L++){var $=TEXT_PROPS_BOX[L],O=t.getShallow($);O!=null&&(r[$]=O)}var V=t.getShallow("borderType");V!=null&&(r.borderDash=V),(r.backgroundColor==="auto"||r.backgroundColor==="inherit")&&y&&(r.backgroundColor=y),(r.borderColor==="auto"||r.borderColor==="inherit")&&y&&(r.borderColor=y)}}function getFont(r,t){var n=t&&t.getModel("textStyle");return trim$1([r.fontStyle||n&&n.getShallow("fontStyle")||"",r.fontWeight||n&&n.getShallow("fontWeight")||"",(r.fontSize||n&&n.getShallow("fontSize")||12)+"px",r.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(r,t,n,o){if(r){var a=labelInner(r);a.prevValue=a.value,a.value=n;var l=t.normal;a.valueAnimation=l.get("valueAnimation"),a.valueAnimation&&(a.precision=l.get("precision"),a.defaultInterpolatedText=o,a.statesModels=t)}}function animateLabelValue(r,t,n,o,a){var l=labelInner(r);if(!l.valueAnimation||l.prevValue===l.value)return;var d=l.defaultInterpolatedText,g=retrieve2(l.interpolatedValue,l.prevValue),y=l.value;function S(x){var w=interpolateRawValues(n,l.precision,g,y,x);l.interpolatedValue=x===1?null:w;var c=getLabelText({labelDataIndex:t,labelFetcher:a,defaultText:d?d(w):w+""},l.statesModels,w);setLabelText(r,c)}r.percent=0,(l.prevValue==null?initProps:updateProps$1)(r,{percent:1},o,t,null,S)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText$1,TextStyleMixin=function(){function r(){}return r.prototype.getTextColor=function(t){var n=this.ecModel;return this.getShallow("color")||(!t&&n?n.get(PATH_COLOR):null)},r.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},r.prototype.getTextRect=function(t){for(var n={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},o=0;o<textStyleParams.length;o++)n[textStyleParams[o]]=this.getShallow(textStyleParams[o]);return tmpText.useStyle(n),tmpText.update(),tmpText.getBoundingRect()},r}();const TextStyleMixin$1=TextStyleMixin;var LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function r(){}return r.prototype.getLineStyle=function(t){return getLineStyle(this,t)},r}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function r(){}return r.prototype.getItemStyle=function(t,n){return getItemStyle(this,t,n)},r}(),Model=function(){function r(t,n,o){this.parentModel=n,this.ecModel=o,this.option=t}return r.prototype.init=function(t,n,o){},r.prototype.mergeOption=function(t,n){merge(this.option,t,!0)},r.prototype.get=function(t,n){return t==null?this.option:this._doGet(this.parsePath(t),!n&&this.parentModel)},r.prototype.getShallow=function(t,n){var o=this.option,a=o==null?o:o[t];if(a==null&&!n){var l=this.parentModel;l&&(a=l.getShallow(t))}return a},r.prototype.getModel=function(t,n){var o=t!=null,a=o?this.parsePath(t):null,l=o?this._doGet(a):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(a)),new r(l,n,this.ecModel)},r.prototype.isEmpty=function(){return this.option==null},r.prototype.restoreData=function(){},r.prototype.clone=function(){var t=this.constructor;return new t(clone$4(this.option))},r.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},r.prototype.resolveParentPath=function(t){return t},r.prototype.isAnimationEnabled=function(){if(!env$1.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.prototype._doGet=function(t,n){var o=this.option;if(!t)return o;for(var a=0;a<t.length&&!(t[a]&&(o=o&&typeof o=="object"?o[t[a]]:null,o==null));a++);return o==null&&n&&(o=n._doGet(this.resolveParentPath(t),n.parentModel)),o},r}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin$1);const Model$1=Model;var base=Math.round(Math.random()*10);function getUID(r){return[r||"",base++].join("_")}function enableSubTypeDefaulter(r){var t={};r.registerSubTypeDefaulter=function(n,o){var a=parseClassType(n);t[a.main]=o},r.determineSubType=function(n,o){var a=o.type;if(!a){var l=parseClassType(n).main;r.hasSubTypes(n)&&t[l]&&(a=t[l](o))}return a}}function enableTopologicalTravel(r,t){r.topologicalTravel=function(l,d,g,y){if(!l.length)return;var S=n(d),x=S.graph,w=S.noEntryList,c={};for(each$f(l,function(z){c[z]=!0});w.length;){var A=w.pop(),R=x[A],L=!!c[A];L&&(g.call(y,A,R.originalDeps.slice()),delete c[A]),each$f(R.successor,L?O:$)}each$f(c,function(){var z="";throw new Error(z)});function $(z){x[z].entryCount--,x[z].entryCount===0&&w.push(z)}function O(z){c[z]=!0,$(z)}};function n(l){var d={},g=[];return each$f(l,function(y){var S=o(d,y),x=S.originalDeps=t(y),w=a(x,l);S.entryCount=w.length,S.entryCount===0&&g.push(y),each$f(w,function(c){indexOf(S.predecessor,c)<0&&S.predecessor.push(c);var A=o(d,c);indexOf(A.successor,c)<0&&A.successor.push(y)})}),{graph:d,noEntryList:g}}function o(l,d){return l[d]||(l[d]={predecessor:[],successor:[]}),l[d]}function a(l,d){var g=[];return each$f(l,function(y){indexOf(d,y)>=0&&g.push(y)}),g}}function inheritDefaultOption(r,t){return merge(merge({},r,!0),t,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env$1.domSupported?function(){var r=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return r.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(r,t){r=r.toUpperCase(),localeModels[r]=new Model$1(t),localeStorage[r]=t}function createLocaleObject(r){if(isString(r)){var t=localeStorage[r.toUpperCase()]||{};return r===LOCALE_ZH||r===LOCALE_EN?clone$4(t):merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(r),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(r){return localeModels[r]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(r,t){return r+="","0000".substr(0,t-r.length)+r}function getPrimaryTimeUnit(r){switch(r){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return r}}function isPrimaryTimeUnit(r){return r===getPrimaryTimeUnit(r)}function getDefaultFormatPrecisionOfInterval(r){switch(r){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(r,t,n,o){var a=parseDate(r),l=a[fullYearGetterName(n)](),d=a[monthGetterName(n)]()+1,g=Math.floor((d-1)/3)+1,y=a[dateGetterName(n)](),S=a["get"+(n?"UTC":"")+"Day"](),x=a[hoursGetterName(n)](),w=(x-1)%12+1,c=a[minutesGetterName(n)](),A=a[secondsGetterName(n)](),R=a[millisecondsGetterName(n)](),L=o instanceof Model$1?o:getLocaleModel(o||SYSTEM_LANG)||getDefaultLocaleModel(),$=L.getModel("time"),O=$.get("month"),z=$.get("monthAbbr"),V=$.get("dayOfWeek"),j=$.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,l+"").replace(/{yy}/g,pad(l%100+"",2)).replace(/{Q}/g,g+"").replace(/{MMMM}/g,O[d-1]).replace(/{MMM}/g,z[d-1]).replace(/{MM}/g,pad(d,2)).replace(/{M}/g,d+"").replace(/{dd}/g,pad(y,2)).replace(/{d}/g,y+"").replace(/{eeee}/g,V[S]).replace(/{ee}/g,j[S]).replace(/{e}/g,S+"").replace(/{HH}/g,pad(x,2)).replace(/{H}/g,x+"").replace(/{hh}/g,pad(w+"",2)).replace(/{h}/g,w+"").replace(/{mm}/g,pad(c,2)).replace(/{m}/g,c+"").replace(/{ss}/g,pad(A,2)).replace(/{s}/g,A+"").replace(/{SSS}/g,pad(R,3)).replace(/{S}/g,R+"")}function leveledFormat(r,t,n,o,a){var l=null;if(isString(n))l=n;else if(isFunction(n))l=n(r.value,t,{level:r.level});else{var d=extend({},defaultLeveledFormatter);if(r.level>0)for(var g=0;g<primaryTimeUnits.length;++g)d[primaryTimeUnits[g]]="{primary|"+d[primaryTimeUnits[g]]+"}";var y=n?n.inherit===!1?n:defaults(n,d):d,S=getUnitFromValue(r.value,a);if(y[S])l=y[S];else if(y.inherit){for(var x=timeUnits.indexOf(S),g=x-1;g>=0;--g)if(y[S]){l=y[S];break}l=l||d.none}if(isArray$1(l)){var w=r.level==null?0:r.level>=0?r.level:l.length+r.level;w=Math.min(w,l.length-1),l=l[w]}}return format$1(new Date(r.value),l,a,o)}function getUnitFromValue(r,t){var n=parseDate(r),o=n[monthGetterName(t)]()+1,a=n[dateGetterName(t)](),l=n[hoursGetterName(t)](),d=n[minutesGetterName(t)](),g=n[secondsGetterName(t)](),y=n[millisecondsGetterName(t)](),S=y===0,x=S&&g===0,w=x&&d===0,c=w&&l===0,A=c&&a===1,R=A&&o===1;return R?"year":A?"month":c?"day":w?"hour":x?"minute":S?"second":"millisecond"}function getUnitValue(r,t,n){var o=isNumber(r)?parseDate(r):r;switch(t=t||getUnitFromValue(r,n),t){case"year":return o[fullYearGetterName(n)]();case"half-year":return o[monthGetterName(n)]()>=6?1:0;case"quarter":return Math.floor((o[monthGetterName(n)]()+1)/4);case"month":return o[monthGetterName(n)]();case"day":return o[dateGetterName(n)]();case"half-day":return o[hoursGetterName(n)]()/24;case"hour":return o[hoursGetterName(n)]();case"minute":return o[minutesGetterName(n)]();case"second":return o[secondsGetterName(n)]();case"millisecond":return o[millisecondsGetterName(n)]()}}function fullYearGetterName(r){return r?"getUTCFullYear":"getFullYear"}function monthGetterName(r){return r?"getUTCMonth":"getMonth"}function dateGetterName(r){return r?"getUTCDate":"getDate"}function hoursGetterName(r){return r?"getUTCHours":"getHours"}function minutesGetterName(r){return r?"getUTCMinutes":"getMinutes"}function secondsGetterName(r){return r?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(r){return r?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(r){return r?"setUTCFullYear":"setFullYear"}function monthSetterName(r){return r?"setUTCMonth":"setMonth"}function dateSetterName(r){return r?"setUTCDate":"setDate"}function hoursSetterName(r){return r?"setUTCHours":"setHours"}function minutesSetterName(r){return r?"setUTCMinutes":"setMinutes"}function secondsSetterName(r){return r?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(r){return r?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(r,t,n,o,a,l,d,g){var y=new ZRText$1({style:{text:r,font:t,align:n,verticalAlign:o,padding:a,rich:l,overflow:d?"truncate":null,lineHeight:g}});return y.getBoundingRect()}function addCommas(r){if(!isNumeric(r))return isString(r)?r:"-";var t=(r+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function toCamelCase(r,t){return r=(r||"").toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()}),t&&r&&(r=r.charAt(0).toUpperCase()+r.slice(1)),r}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(r,t,n){var o="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function a(x){return x&&trim$1(x)?x:"-"}function l(x){return!!(x!=null&&!isNaN(x)&&isFinite(x))}var d=t==="time",g=r instanceof Date;if(d||g){var y=d?parseDate(r):r;if(isNaN(+y)){if(g)return"-"}else return format$1(y,o,n)}if(t==="ordinal")return isStringSafe(r)?a(r):isNumber(r)&&l(r)?r+"":"-";var S=numericToNumber(r);return l(S)?addCommas(S):isStringSafe(r)?a(r):typeof r=="boolean"?r+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(r,t){return"{"+r+(t??"")+"}"};function formatTpl(r,t,n){isArray$1(t)||(t=[t]);var o=t.length;if(!o)return"";for(var a=t[0].$vars||[],l=0;l<a.length;l++){var d=TPL_VAR_ALIAS[l];r=r.replace(wrapVar(d),wrapVar(d,0))}for(var g=0;g<o;g++)for(var y=0;y<a.length;y++){var S=t[g][a[y]];r=r.replace(wrapVar(TPL_VAR_ALIAS[y],g),n?encodeHTML(S):S)}return r}function formatTplSimple(r,t,n){return each$f(t,function(o,a){r=r.replace("{"+a+"}",n?encodeHTML(o):o)}),r}function getTooltipMarker(r,t){var n=isString(r)?{color:r,extraCssText:t}:r||{},o=n.color,a=n.type;t=n.extraCssText;var l=n.renderMode||"html";if(!o)return"";if(l==="html")return a==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(o)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(o)+";"+(t||"")+'"></span>';var d=n.markerId||"markerX";return{renderMode:l,content:"{"+d+"|}  ",style:a==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:o}:{width:10,height:10,borderRadius:5,backgroundColor:o}}}function formatTime(r,t,n){(r==="week"||r==="month"||r==="quarter"||r==="half-year"||r==="year")&&(r=`MM-dd
yyyy`);var o=parseDate(t),a=n?"getUTC":"get",l=o[a+"FullYear"](),d=o[a+"Month"]()+1,g=o[a+"Date"](),y=o[a+"Hours"](),S=o[a+"Minutes"](),x=o[a+"Seconds"](),w=o[a+"Milliseconds"]();return r=r.replace("MM",pad(d,2)).replace("M",d).replace("yyyy",l).replace("yy",pad(l%100+"",2)).replace("dd",pad(g,2)).replace("d",g).replace("hh",pad(y,2)).replace("h",y).replace("mm",pad(S,2)).replace("m",S).replace("ss",pad(x,2)).replace("s",x).replace("SSS",pad(w,3)),r}function capitalFirst(r){return r&&r.charAt(0).toUpperCase()+r.substr(1)}function convertToColorString(r,t){return t=t||"transparent",isString(r)?r:isObject$3(r)&&r.colorStops&&(r.colorStops[0]||{}).color||t}function windowOpen(r,t){if(t==="_blank"||t==="blank"){var n=window.open();n.opener=null,n.location.href=r}else window.open(r,t)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(r,t,n,o,a){var l=0,d=0;o==null&&(o=1/0),a==null&&(a=1/0);var g=0;t.eachChild(function(y,S){var x=y.getBoundingRect(),w=t.childAt(S+1),c=w&&w.getBoundingRect(),A,R;if(r==="horizontal"){var L=x.width+(c?-c.x+x.x:0);A=l+L,A>o||y.newline?(l=0,A=L,d+=g+n,g=x.height):g=Math.max(g,x.height)}else{var $=x.height+(c?-c.y+x.y:0);R=d+$,R>a||y.newline?(l+=g+n,d=0,R=$,g=x.width):g=Math.max(g,x.width)}y.newline||(y.x=l,y.y=d,y.markRedraw(),r==="horizontal"?l=A+n:d=R+n)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(r,t,n){var o=t.width,a=t.height,l=parsePercent(r.left,o),d=parsePercent(r.top,a),g=parsePercent(r.right,o),y=parsePercent(r.bottom,a);return(isNaN(l)||isNaN(parseFloat(r.left)))&&(l=0),(isNaN(g)||isNaN(parseFloat(r.right)))&&(g=o),(isNaN(d)||isNaN(parseFloat(r.top)))&&(d=0),(isNaN(y)||isNaN(parseFloat(r.bottom)))&&(y=a),n=normalizeCssArray(n||0),{width:Math.max(g-l-n[1]-n[3],0),height:Math.max(y-d-n[0]-n[2],0)}}function getLayoutRect(r,t,n){n=normalizeCssArray(n||0);var o=t.width,a=t.height,l=parsePercent(r.left,o),d=parsePercent(r.top,a),g=parsePercent(r.right,o),y=parsePercent(r.bottom,a),S=parsePercent(r.width,o),x=parsePercent(r.height,a),w=n[2]+n[0],c=n[1]+n[3],A=r.aspect;switch(isNaN(S)&&(S=o-g-c-l),isNaN(x)&&(x=a-y-w-d),A!=null&&(isNaN(S)&&isNaN(x)&&(A>o/a?S=o*.8:x=a*.8),isNaN(S)&&(S=A*x),isNaN(x)&&(x=S/A)),isNaN(l)&&(l=o-g-S-c),isNaN(d)&&(d=a-y-x-w),r.left||r.right){case"center":l=o/2-S/2-n[3];break;case"right":l=o-S-c;break}switch(r.top||r.bottom){case"middle":case"center":d=a/2-x/2-n[0];break;case"bottom":d=a-x-w;break}l=l||0,d=d||0,isNaN(S)&&(S=o-c-l-(g||0)),isNaN(x)&&(x=a-w-d-(y||0));var R=new BoundingRect$1(l+n[3],d+n[0],S,x);return R.margin=n,R}function positionElement(r,t,n,o,a,l){var d=!a||!a.hv||a.hv[0],g=!a||!a.hv||a.hv[1],y=a&&a.boundingMode||"all";if(l=l||r,l.x=r.x,l.y=r.y,!d&&!g)return!1;var S;if(y==="raw")S=r.type==="group"?new BoundingRect$1(0,0,+t.width||0,+t.height||0):r.getBoundingRect();else if(S=r.getBoundingRect(),r.needLocalTransform()){var x=r.getLocalTransform();S=S.clone(),S.applyTransform(x)}var w=getLayoutRect(defaults({width:S.width,height:S.height},t),n,o),c=d?w.x-S.x:0,A=g?w.y-S.y:0;return y==="raw"?(l.x=c,l.y=A):(l.x+=c,l.y+=A),l===r&&r.markRedraw(),!0}function sizeCalculable(r,t){return r[HV_NAMES[t][0]]!=null||r[HV_NAMES[t][1]]!=null&&r[HV_NAMES[t][2]]!=null}function fetchLayoutMode(r){var t=r.layoutMode||r.constructor.layoutMode;return isObject$3(t)?t:t?{type:t}:null}function mergeLayoutParam(r,t,n){var o=n&&n.ignoreSize;!isArray$1(o)&&(o=[o,o]);var a=d(HV_NAMES[0],0),l=d(HV_NAMES[1],1);S(HV_NAMES[0],r,a),S(HV_NAMES[1],r,l);function d(x,w){var c={},A=0,R={},L=0,$=2;if(each$e(x,function(V){R[V]=r[V]}),each$e(x,function(V){g(t,V)&&(c[V]=R[V]=t[V]),y(c,V)&&A++,y(R,V)&&L++}),o[w])return y(t,x[1])?R[x[2]]=null:y(t,x[2])&&(R[x[1]]=null),R;if(L===$||!A)return R;if(A>=$)return c;for(var O=0;O<x.length;O++){var z=x[O];if(!g(c,z)&&g(r,z)){c[z]=r[z];break}}return c}function g(x,w){return x.hasOwnProperty(w)}function y(x,w){return x[w]!=null&&x[w]!=="auto"}function S(x,w,c){each$e(x,function(A){w[A]=c[A]})}}function getLayoutParams(r){return copyLayoutParams({},r)}function copyLayoutParams(r,t){return t&&r&&each$e(LOCATION_PARAMS,function(n){t.hasOwnProperty(n)&&(r[n]=t[n])}),r}var inner$l=makeInner(),ComponentModel=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this,n,o,a)||this;return l.uid=getUID("ec_cpt_model"),l}return t.prototype.init=function(n,o,a){this.mergeDefaultAndTheme(n,a)},t.prototype.mergeDefaultAndTheme=function(n,o){var a=fetchLayoutMode(this),l=a?getLayoutParams(n):{},d=o.getTheme();merge(n,d.get(this.mainType)),merge(n,this.getDefaultOption()),a&&mergeLayoutParam(n,l,a)},t.prototype.mergeOption=function(n,o){merge(this.option,n,!0);var a=fetchLayoutMode(this);a&&mergeLayoutParam(this.option,n,a)},t.prototype.optionUpdated=function(n,o){},t.prototype.getDefaultOption=function(){var n=this.constructor;if(!isExtendedClass(n))return n.defaultOption;var o=inner$l(this);if(!o.defaultOption){for(var a=[],l=n;l;){var d=l.prototype.defaultOption;d&&a.push(d),l=l.superClass}for(var g={},y=a.length-1;y>=0;y--)g=merge(g,a[y],!0);o.defaultOption=g}return o.defaultOption},t.prototype.getReferringComponents=function(n,o){var a=n+"Index",l=n+"Id";return queryReferringComponents(this.ecModel,n,{index:this.get(a,!0),id:this.get(l,!0)},o)},t.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(n){this.option.zlevel=n},t.protoInitialize=function(){var n=t.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),t}(Model$1);mountExtend(ComponentModel,Model$1);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(r){var t=[];return each$f(ComponentModel.getClassesByMainType(r),function(n){t=t.concat(n.dependencies||n.prototype.dependencies||[])}),t=map$1(t,function(n){return parseClassType(n).main}),r!=="dataset"&&indexOf(t,"dataset")<=0&&t.unshift("dataset"),t}const ComponentModel$1=ComponentModel;var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(r){innerGlobalModel(r).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(r,t,n){var o={},a=querySeriesUpstreamDatasetModel(t);if(!a||!r)return o;var l=[],d=[],g=t.ecModel,y=innerGlobalModel(g).datasetMap,S=a.uid+"_"+n.seriesLayoutBy,x,w;r=r.slice(),each$f(r,function(L,$){var O=isObject$3(L)?L:r[$]={name:L};O.type==="ordinal"&&x==null&&(x=$,w=R(O)),o[O.name]=[]});var c=y.get(S)||y.set(S,{categoryWayDim:w,valueWayDim:0});each$f(r,function(L,$){var O=L.name,z=R(L);if(x==null){var V=c.valueWayDim;A(o[O],V,z),A(d,V,z),c.valueWayDim+=z}else if(x===$)A(o[O],0,z),A(l,0,z);else{var V=c.categoryWayDim;A(o[O],V,z),A(d,V,z),c.categoryWayDim+=z}});function A(L,$,O){for(var z=0;z<O;z++)L.push($+z)}function R(L){var $=L.dimsDef;return $?$.length:1}return l.length&&(o.itemName=l),d.length&&(o.seriesName=d),o}function makeSeriesEncodeForNameBased(r,t,n){var o={},a=querySeriesUpstreamDatasetModel(r);if(!a)return o;var l=t.sourceFormat,d=t.dimensionsDefine,g;(l===SOURCE_FORMAT_OBJECT_ROWS||l===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(d,function(x,w){(isObject$3(x)?x.name:x)==="name"&&(g=w)});var y=function(){for(var x={},w={},c=[],A=0,R=Math.min(5,n);A<R;A++){var L=doGuessOrdinal(t.data,l,t.seriesLayoutBy,d,t.startIndex,A);c.push(L);var $=L===BE_ORDINAL.Not;if($&&x.v==null&&A!==g&&(x.v=A),(x.n==null||x.n===x.v||!$&&c[x.n]===BE_ORDINAL.Not)&&(x.n=A),O(x)&&c[x.n]!==BE_ORDINAL.Not)return x;$||(L===BE_ORDINAL.Might&&w.v==null&&A!==g&&(w.v=A),(w.n==null||w.n===w.v)&&(w.n=A))}function O(z){return z.v!=null&&z.n!=null}return O(x)?x:O(w)?w:null}();if(y){o.value=[y.v];var S=g??y.n;o.itemName=[S],o.seriesName=[S]}return o}function querySeriesUpstreamDatasetModel(r){var t=r.get("data",!0);if(!t)return queryReferringComponents(r.ecModel,"dataset",{index:r.get("datasetIndex",!0),id:r.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(r){return!r.get("transform",!0)&&!r.get("fromTransformResult",!0)?[]:queryReferringComponents(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(r,t){return doGuessOrdinal(r.data,r.sourceFormat,r.seriesLayoutBy,r.dimensionsDefine,r.startIndex,t)}function doGuessOrdinal(r,t,n,o,a,l){var d,g=5;if(isTypedArray(r))return BE_ORDINAL.Not;var y,S;if(o){var x=o[l];isObject$3(x)?(y=x.name,S=x.type):isString(x)&&(y=x)}if(S!=null)return S==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(t===SOURCE_FORMAT_ARRAY_ROWS){var w=r;if(n===SERIES_LAYOUT_BY_ROW){for(var c=w[l],A=0;A<(c||[]).length&&A<g;A++)if((d=j(c[a+A]))!=null)return d}else for(var A=0;A<w.length&&A<g;A++){var R=w[a+A];if(R&&(d=j(R[l]))!=null)return d}}else if(t===SOURCE_FORMAT_OBJECT_ROWS){var L=r;if(!y)return BE_ORDINAL.Not;for(var A=0;A<L.length&&A<g;A++){var $=L[A];if($&&(d=j($[y]))!=null)return d}}else if(t===SOURCE_FORMAT_KEYED_COLUMNS){var O=r;if(!y)return BE_ORDINAL.Not;var c=O[y];if(!c||isTypedArray(c))return BE_ORDINAL.Not;for(var A=0;A<c.length&&A<g;A++)if((d=j(c[A]))!=null)return d}else if(t===SOURCE_FORMAT_ORIGINAL)for(var z=r,A=0;A<z.length&&A<g;A++){var $=z[A],V=getDataItemValue($);if(!isArray$1(V))return BE_ORDINAL.Not;if((d=j(V[l]))!=null)return d}function j(K){var Z=isString(K);if(K!=null&&isFinite(K)&&K!=="")return Z?BE_ORDINAL.Might:BE_ORDINAL.Not;if(Z&&K!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(r,t){assert(internalOptionCreatorMap.get(r)==null&&t),internalOptionCreatorMap.set(r,t)}function concatInternalOptions(r,t,n){var o=internalOptionCreatorMap.get(t);if(!o)return n;var a=o(r);return a?n.concat(a):n}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function r(){}return r.prototype.getColorFromPalette=function(t,n,o){var a=normalizeToArray(this.get("color",!0)),l=this.get("colorLayer",!0);return getFromPalette(this,innerColor,a,l,t,n,o)},r.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},r}();function getDecalFromPalette(r,t,n,o){var a=normalizeToArray(r.get(["aria","decal","decals"]));return getFromPalette(r,innerDecal,a,null,t,n,o)}function getNearestPalette(r,t){for(var n=r.length,o=0;o<n;o++)if(r[o].length>t)return r[o];return r[n-1]}function getFromPalette(r,t,n,o,a,l,d){l=l||r;var g=t(l),y=g.paletteIdx||0,S=g.paletteNameMap=g.paletteNameMap||{};if(S.hasOwnProperty(a))return S[a];var x=d==null||!o?n:getNearestPalette(o,d);if(x=x||n,!(!x||!x.length)){var w=x[y];return a&&(S[a]=w),g.paletteIdx=(y+1)%x.length,w}}function clearPalette(r,t){t(r).paletteIdx=0,t(r).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(n,o,a,l,d,g){l=l||{},this.option=null,this._theme=new Model$1(l),this._locale=new Model$1(d),this._optionManager=g},t.prototype.setOption=function(n,o,a){var l=normalizeSetOptionInput(o);this._optionManager.setOption(n,a,l),this._resetOption(null,l)},t.prototype.resetOption=function(n,o){return this._resetOption(n,normalizeSetOptionInput(o))},t.prototype._resetOption=function(n,o){var a=!1,l=this._optionManager;if(!n||n==="recreate"){var d=l.mountOption(n==="recreate");!this.option||n==="recreate"?initBase(this,d):(this.restoreData(),this._mergeOption(d,o)),a=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var g=l.getTimelineOption(this);g&&(a=!0,this._mergeOption(g,o))}if(!n||n==="recreate"||n==="media"){var y=l.getMediaOption(this);y.length&&each$f(y,function(S){a=!0,this._mergeOption(S,o)},this)}return a},t.prototype.mergeOption=function(n){this._mergeOption(n,null)},t.prototype._mergeOption=function(n,o){var a=this.option,l=this._componentsMap,d=this._componentsCount,g=[],y=createHashMap(),S=o&&o.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(n,function(w,c){w!=null&&(ComponentModel$1.hasClass(c)?c&&(g.push(c),y.set(c,!0)):a[c]=a[c]==null?clone$4(w):merge(a[c],w,!0))}),S&&S.each(function(w,c){ComponentModel$1.hasClass(c)&&!y.get(c)&&(g.push(c),y.set(c,!0))}),ComponentModel$1.topologicalTravel(g,ComponentModel$1.getAllClassMainTypes(),x,this);function x(w){var c=concatInternalOptions(this,w,normalizeToArray(n[w])),A=l.get(w),R=A?S&&S.get(w)?"replaceMerge":"normalMerge":"replaceAll",L=mappingToExists(A,c,R);setComponentTypeToKeyInfo(L,w,ComponentModel$1),a[w]=null,l.set(w,null),d.set(w,0);var $=[],O=[],z=0,V;each$f(L,function(j,K){var Z=j.existing,q=j.newOption;if(!q)Z&&(Z.mergeOption({},this),Z.optionUpdated({},!1));else{var ie=w==="series",te=ComponentModel$1.getClass(w,j.keyInfo.subType,!ie);if(!te)return;if(w==="tooltip"){if(V)return;V=!0}if(Z&&Z.constructor===te)Z.name=j.keyInfo.name,Z.mergeOption(q,this),Z.optionUpdated(q,!1);else{var oe=extend({componentIndex:K},j.keyInfo);Z=new te(q,this,this,oe),extend(Z,oe),j.brandNew&&(Z.__requireNewView=!0),Z.init(q,this,this),Z.optionUpdated(null,!0)}}Z?($.push(Z.option),O.push(Z),z++):($.push(void 0),O.push(void 0))},this),a[w]=$,l.set(w,O),d.set(w,z),w==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},t.prototype.getOption=function(){var n=clone$4(this.option);return each$f(n,function(o,a){if(ComponentModel$1.hasClass(a)){for(var l=normalizeToArray(o),d=l.length,g=!1,y=d-1;y>=0;y--)l[y]&&!isComponentIdInternal(l[y])?g=!0:(l[y]=null,!g&&d--);l.length=d,n[a]=l}}),delete n[OPTION_INNER_KEY],n},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(n){this._payload=n},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(n,o){var a=this._componentsMap.get(n);if(a){var l=a[o||0];if(l)return l;if(o==null){for(var d=0;d<a.length;d++)if(a[d])return a[d]}}},t.prototype.queryComponents=function(n){var o=n.mainType;if(!o)return[];var a=n.index,l=n.id,d=n.name,g=this._componentsMap.get(o);if(!g||!g.length)return[];var y;return a!=null?(y=[],each$f(normalizeToArray(a),function(S){g[S]&&y.push(g[S])})):l!=null?y=queryByIdOrName("id",l,g):d!=null?y=queryByIdOrName("name",d,g):y=filter(g,function(S){return!!S}),filterBySubType(y,n)},t.prototype.findComponents=function(n){var o=n.query,a=n.mainType,l=g(o),d=l?this.queryComponents(l):filter(this._componentsMap.get(a),function(S){return!!S});return y(filterBySubType(d,n));function g(S){var x=a+"Index",w=a+"Id",c=a+"Name";return S&&(S[x]!=null||S[w]!=null||S[c]!=null)?{mainType:a,index:S[x],id:S[w],name:S[c]}:null}function y(S){return n.filter?filter(S,n.filter):S}},t.prototype.eachComponent=function(n,o,a){var l=this._componentsMap;if(isFunction(n)){var d=o,g=n;l.each(function(w,c){for(var A=0;w&&A<w.length;A++){var R=w[A];R&&g.call(d,c,R,R.componentIndex)}})}else for(var y=isString(n)?l.get(n):isObject$3(n)?this.findComponents(n):null,S=0;y&&S<y.length;S++){var x=y[S];x&&o.call(a,x,x.componentIndex)}},t.prototype.getSeriesByName=function(n){var o=convertOptionIdName(n,null);return filter(this._componentsMap.get("series"),function(a){return!!a&&o!=null&&a.name===o})},t.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},t.prototype.getSeriesByType=function(n){return filter(this._componentsMap.get("series"),function(o){return!!o&&o.subType===n})},t.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(n){return!!n})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(n,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(a){var l=this._componentsMap.get("series")[a];n.call(o,l,a)},this)},t.prototype.eachRawSeries=function(n,o){each$f(this._componentsMap.get("series"),function(a){a&&n.call(o,a,a.componentIndex)})},t.prototype.eachSeriesByType=function(n,o,a){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var d=this._componentsMap.get("series")[l];d.subType===n&&o.call(a,d,l)},this)},t.prototype.eachRawSeriesByType=function(n,o,a){return each$f(this.getSeriesByType(n),o,a)},t.prototype.isSeriesFiltered=function(n){return assertSeriesInitialized(this),this._seriesIndicesMap.get(n.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(n,o){assertSeriesInitialized(this);var a=[];each$f(this._seriesIndices,function(l){var d=this._componentsMap.get("series")[l];n.call(o,d,l)&&a.push(l)},this),this._seriesIndices=a,this._seriesIndicesMap=createHashMap(a)},t.prototype.restoreData=function(n){reCreateSeriesIndices(this);var o=this._componentsMap,a=[];o.each(function(l,d){ComponentModel$1.hasClass(d)&&a.push(d)}),ComponentModel$1.topologicalTravel(a,ComponentModel$1.getAllClassMainTypes(),function(l){each$f(o.get(l),function(d){d&&(l!=="series"||!isNotTargetSeries(d,n))&&d.restoreData()})})},t.internalField=function(){reCreateSeriesIndices=function(n){var o=n._seriesIndices=[];each$f(n._componentsMap.get("series"),function(a){a&&o.push(a.componentIndex)}),n._seriesIndicesMap=createHashMap(o)},assertSeriesInitialized=function(n){},initBase=function(n,o){n.option={},n.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,n._componentsMap=createHashMap({series:[]}),n._componentsCount=createHashMap();var a=o.aria;isObject$3(a)&&a.enabled==null&&(a.enabled=!0),mergeTheme(o,n._theme.option),merge(o,globalDefault,!1),n._mergeOption(o,null)}}(),t}(Model$1);function isNotTargetSeries(r,t){if(t){var n=t.seriesIndex,o=t.seriesId,a=t.seriesName;return n!=null&&r.componentIndex!==n||o!=null&&r.id!==o||a!=null&&r.name!==a}}function mergeTheme(r,t){var n=r.color&&!r.colorLayer;each$f(t,function(o,a){a==="colorLayer"&&n||ComponentModel$1.hasClass(a)||(typeof o=="object"?r[a]=r[a]?merge(r[a],o,!1):clone$4(o):r[a]==null&&(r[a]=o))})}function queryByIdOrName(r,t,n){if(isArray$1(t)){var o=createHashMap();return each$f(t,function(l){if(l!=null){var d=convertOptionIdName(l,null);d!=null&&o.set(l,!0)}}),filter(n,function(l){return l&&o.get(l[r])})}else{var a=convertOptionIdName(t,null);return filter(n,function(l){return l&&a!=null&&l[r]===a})}}function filterBySubType(r,t){return t.hasOwnProperty("subType")?filter(r,function(n){return n&&n.subType===t.subType}):r}function normalizeSetOptionInput(r){var t=createHashMap();return r&&each$f(normalizeToArray(r.replaceMerge),function(n){t.set(n,!0)}),{replaceMergeMainTypeMap:t}}mixin(GlobalModel,PaletteMixin);const GlobalModel$1=GlobalModel;var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function r(t){each$f(availableMethods,function(n){this[n]=bind$1(t[n],t)},this)}return r}();const ExtensionAPI$1=ExtensionAPI;var coordinateSystemCreators={},CoordinateSystemManager=function(){function r(){this._coordinateSystems=[]}return r.prototype.create=function(t,n){var o=[];each$f(coordinateSystemCreators,function(a,l){var d=a.create(t,n);o=o.concat(d||[])}),this._coordinateSystems=o},r.prototype.update=function(t,n){each$f(this._coordinateSystems,function(o){o.update&&o.update(t,n)})},r.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},r.register=function(t,n){coordinateSystemCreators[t]=n},r.get=function(t){return coordinateSystemCreators[t]},r}();const CoordinateSystem=CoordinateSystemManager;var QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function r(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return r.prototype.setOption=function(t,n,o){t&&(each$f(normalizeToArray(t.series),function(d){d&&d.data&&isTypedArray(d.data)&&setAsPrimitive(d.data)}),each$f(normalizeToArray(t.dataset),function(d){d&&d.source&&isTypedArray(d.source)&&setAsPrimitive(d.source)})),t=clone$4(t);var a=this._optionBackup,l=parseRawOption(t,n,!a);this._newBaseOption=l.baseOption,a?(l.timelineOptions.length&&(a.timelineOptions=l.timelineOptions),l.mediaList.length&&(a.mediaList=l.mediaList),l.mediaDefault&&(a.mediaDefault=l.mediaDefault)):this._optionBackup=l},r.prototype.mountOption=function(t){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],clone$4(t?n.baseOption:this._newBaseOption)},r.prototype.getTimelineOption=function(t){var n,o=this._timelineOptions;if(o.length){var a=t.getComponent("timeline");a&&(n=clone$4(o[a.getCurrentIndex()]))}return n},r.prototype.getMediaOption=function(t){var n=this._api.getWidth(),o=this._api.getHeight(),a=this._mediaList,l=this._mediaDefault,d=[],g=[];if(!a.length&&!l)return g;for(var y=0,S=a.length;y<S;y++)applyMediaQuery(a[y].query,n,o)&&d.push(y);return!d.length&&l&&(d=[-1]),d.length&&!indicesEquals(d,this._currentMediaIndices)&&(g=map$1(d,function(x){return clone$4(x===-1?l.option:a[x].option)})),this._currentMediaIndices=d,g},r}();function parseRawOption(r,t,n){var o=[],a,l,d=r.baseOption,g=r.timeline,y=r.options,S=r.media,x=!!r.media,w=!!(y||g||d&&d.timeline);d?(l=d,l.timeline||(l.timeline=g)):((w||x)&&(r.options=r.media=null),l=r),x&&isArray$1(S)&&each$f(S,function(A){A&&A.option&&(A.query?o.push(A):a||(a=A))}),c(l),each$f(y,function(A){return c(A)}),each$f(o,function(A){return c(A.option)});function c(A){each$f(t,function(R){R(A,n)})}return{baseOption:l,timelineOptions:y||[],mediaDefault:a,mediaList:o}}function applyMediaQuery(r,t,n){var o={width:t,height:n,aspectratio:t/n},a=!0;return each$f(r,function(l,d){var g=d.match(QUERY_REG);if(!(!g||!g[1]||!g[2])){var y=g[1],S=g[2].toLowerCase();compare(o[S],l,y)||(a=!1)}}),a}function compare(r,t,n){return n==="min"?r>=t:n==="max"?r<=t:r===t}function indicesEquals(r,t){return r.join(",")===t.join(",")}const OptionManager$1=OptionManager;var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(r){var t=r&&r.itemStyle;if(t)for(var n=0,o=POSSIBLE_STYLES.length;n<o;n++){var a=POSSIBLE_STYLES[n],l=t.normal,d=t.emphasis;l&&l[a]&&(r[a]=r[a]||{},r[a].normal?merge(r[a].normal,l[a]):r[a].normal=l[a],l[a]=null),d&&d[a]&&(r[a]=r[a]||{},r[a].emphasis?merge(r[a].emphasis,d[a]):r[a].emphasis=d[a],d[a]=null)}}function convertNormalEmphasis(r,t,n){if(r&&r[t]&&(r[t].normal||r[t].emphasis)){var o=r[t].normal,a=r[t].emphasis;o&&(n?(r[t].normal=r[t].emphasis=null,defaults(r[t],o)):r[t]=o),a&&(r.emphasis=r.emphasis||{},r.emphasis[t]=a,a.focus&&(r.emphasis.focus=a.focus),a.blurScope&&(r.emphasis.blurScope=a.blurScope))}}function removeEC3NormalStatus(r){convertNormalEmphasis(r,"itemStyle"),convertNormalEmphasis(r,"lineStyle"),convertNormalEmphasis(r,"areaStyle"),convertNormalEmphasis(r,"label"),convertNormalEmphasis(r,"labelLine"),convertNormalEmphasis(r,"upperLabel"),convertNormalEmphasis(r,"edgeLabel")}function compatTextStyle(r,t){var n=isObject$2(r)&&r[t],o=isObject$2(n)&&n.textStyle;if(o)for(var a=0,l=TEXT_STYLE_OPTIONS.length;a<l;a++){var d=TEXT_STYLE_OPTIONS[a];o.hasOwnProperty(d)&&(n[d]=o[d])}}function compatEC3CommonStyles(r){r&&(removeEC3NormalStatus(r),compatTextStyle(r,"label"),r.emphasis&&compatTextStyle(r.emphasis,"label"))}function processSeries(r){if(isObject$2(r)){compatEC2ItemStyle(r),removeEC3NormalStatus(r),compatTextStyle(r,"label"),compatTextStyle(r,"upperLabel"),compatTextStyle(r,"edgeLabel"),r.emphasis&&(compatTextStyle(r.emphasis,"label"),compatTextStyle(r.emphasis,"upperLabel"),compatTextStyle(r.emphasis,"edgeLabel"));var t=r.markPoint;t&&(compatEC2ItemStyle(t),compatEC3CommonStyles(t));var n=r.markLine;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var o=r.markArea;o&&compatEC3CommonStyles(o);var a=r.data;if(r.type==="graph"){a=a||r.nodes;var l=r.links||r.edges;if(l&&!isTypedArray(l))for(var d=0;d<l.length;d++)compatEC3CommonStyles(l[d]);each$f(r.categories,function(S){removeEC3NormalStatus(S)})}if(a&&!isTypedArray(a))for(var d=0;d<a.length;d++)compatEC3CommonStyles(a[d]);if(t=r.markPoint,t&&t.data)for(var g=t.data,d=0;d<g.length;d++)compatEC3CommonStyles(g[d]);if(n=r.markLine,n&&n.data)for(var y=n.data,d=0;d<y.length;d++)isArray$1(y[d])?(compatEC3CommonStyles(y[d][0]),compatEC3CommonStyles(y[d][1])):compatEC3CommonStyles(y[d]);r.type==="gauge"?(compatTextStyle(r,"axisLabel"),compatTextStyle(r,"title"),compatTextStyle(r,"detail")):r.type==="treemap"?(convertNormalEmphasis(r.breadcrumb,"itemStyle"),each$f(r.levels,function(S){removeEC3NormalStatus(S)})):r.type==="tree"&&removeEC3NormalStatus(r.leaves)}}function toArr(r){return isArray$1(r)?r:r?[r]:[]}function toObj(r){return(isArray$1(r)?r[0]:r)||{}}function globalCompatStyle(r,t){each$d(toArr(r.series),function(o){isObject$2(o)&&processSeries(o)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(n,function(o){each$d(toArr(r[o]),function(a){a&&(compatTextStyle(a,"axisLabel"),compatTextStyle(a.axisPointer,"label"))})}),each$d(toArr(r.parallel),function(o){var a=o&&o.parallelAxisDefault;compatTextStyle(a,"axisLabel"),compatTextStyle(a&&a.axisPointer,"label")}),each$d(toArr(r.calendar),function(o){convertNormalEmphasis(o,"itemStyle"),compatTextStyle(o,"dayLabel"),compatTextStyle(o,"monthLabel"),compatTextStyle(o,"yearLabel")}),each$d(toArr(r.radar),function(o){compatTextStyle(o,"name"),o.name&&o.axisName==null&&(o.axisName=o.name,delete o.name),o.nameGap!=null&&o.axisNameGap==null&&(o.axisNameGap=o.nameGap,delete o.nameGap)}),each$d(toArr(r.geo),function(o){isObject$2(o)&&(compatEC3CommonStyles(o),each$d(toArr(o.regions),function(a){compatEC3CommonStyles(a)}))}),each$d(toArr(r.timeline),function(o){compatEC3CommonStyles(o),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"controlStyle",!0);var a=o.data;isArray$1(a)&&each$f(a,function(l){isObject$3(l)&&(convertNormalEmphasis(l,"label"),convertNormalEmphasis(l,"itemStyle"))})}),each$d(toArr(r.toolbox),function(o){convertNormalEmphasis(o,"iconStyle"),each$d(o.feature,function(a){convertNormalEmphasis(a,"iconStyle")})}),compatTextStyle(toObj(r.axisPointer),"label"),compatTextStyle(toObj(r.tooltip).axisPointer,"label")}function get(r,t){for(var n=t.split(","),o=r,a=0;a<n.length&&(o=o&&o[n[a]],o!=null);a++);return o}function set(r,t,n,o){for(var a=t.split(","),l=r,d,g=0;g<a.length-1;g++)d=a[g],l[d]==null&&(l[d]={}),l=l[d];(o||l[a[g]]==null)&&(l[a[g]]=n)}function compatLayoutProperties(r){r&&each$f(LAYOUT_PROPERTIES,function(t){t[0]in r&&!(t[1]in r)&&(r[t[1]]=r[t[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(r){var t=r&&r.itemStyle;if(t)for(var n=0;n<BAR_ITEM_STYLE_MAP.length;n++){var o=BAR_ITEM_STYLE_MAP[n][1],a=BAR_ITEM_STYLE_MAP[n][0];t[o]!=null&&(t[a]=t[o])}}function compatPieLabel(r){r&&r.alignTo==="edge"&&r.margin!=null&&r.edgeDistance==null&&(r.edgeDistance=r.margin)}function compatSunburstState(r){r&&r.downplay&&!r.blur&&(r.blur=r.downplay)}function compatGraphFocus(r){r&&r.focusNodeAdjacency!=null&&(r.emphasis=r.emphasis||{},r.emphasis.focus==null&&(r.emphasis.focus="adjacency"))}function traverseTree(r,t){if(r)for(var n=0;n<r.length;n++)t(r[n]),r[n]&&traverseTree(r[n].children,t)}function globalBackwardCompat(r,t){globalCompatStyle(r,t),r.series=normalizeToArray(r.series),each$f(r.series,function(n){if(isObject$3(n)){var o=n.type;if(o==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(o==="pie"||o==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),compatPieLabel(n.label);var a=n.data;if(a&&!isTypedArray(a))for(var l=0;l<a.length;l++)compatPieLabel(a[l]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(o==="gauge"){var d=get(n,"pointer.color");d!=null&&set(n,"itemStyle.color",d)}else if(o==="bar"){compatBarItemStyle(n),compatBarItemStyle(n.backgroundStyle),compatBarItemStyle(n.emphasis);var a=n.data;if(a&&!isTypedArray(a))for(var l=0;l<a.length;l++)typeof a[l]=="object"&&(compatBarItemStyle(a[l]),compatBarItemStyle(a[l]&&a[l].emphasis))}else if(o==="sunburst"){var g=n.highlightPolicy;g&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=g)),compatSunburstState(n),traverseTree(n.data,compatSunburstState)}else o==="graph"||o==="sankey"?compatGraphFocus(n):o==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&defaults(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),compatLayoutProperties(n)}}),r.dataRange&&(r.visualMap=r.dataRange),each$f(COMPATITABLE_COMPONENTS,function(n){var o=r[n];o&&(isArray$1(o)||(o=[o]),each$f(o,function(a){compatLayoutProperties(a)}))})}function dataStack$1(r){var t=createHashMap();r.eachSeries(function(n){var o=n.get("stack");if(o){var a=t.get(o)||t.set(o,[]),l=n.getData(),d={stackResultDimension:l.getCalculationInfo("stackResultDimension"),stackedOverDimension:l.getCalculationInfo("stackedOverDimension"),stackedDimension:l.getCalculationInfo("stackedDimension"),stackedByDimension:l.getCalculationInfo("stackedByDimension"),isStackedByIndex:l.getCalculationInfo("isStackedByIndex"),data:l,seriesModel:n};if(!d.stackedDimension||!(d.isStackedByIndex||d.stackedByDimension))return;a.length&&l.setCalculationInfo("stackedOnSeries",a[a.length-1].seriesModel),a.push(d)}}),t.each(calculateStack)}function calculateStack(r){each$f(r,function(t,n){var o=[],a=[NaN,NaN],l=[t.stackResultDimension,t.stackedOverDimension],d=t.data,g=t.isStackedByIndex,y=t.seriesModel.get("stackStrategy")||"samesign";d.modify(l,function(S,x,w){var c=d.get(t.stackedDimension,w);if(isNaN(c))return a;var A,R;g?R=d.getRawIndex(w):A=d.get(t.stackedByDimension,w);for(var L=NaN,$=n-1;$>=0;$--){var O=r[$];if(g||(R=O.data.rawIndexOf(O.stackedByDimension,A)),R>=0){var z=O.data.getByRawIndex(O.stackResultDimension,R);if(y==="all"||y==="positive"&&z>0||y==="negative"&&z<0||y==="samesign"&&c>=0&&z>0||y==="samesign"&&c<=0&&z<0){c=addSafe(c,z),L=z;break}}}return o[0]=c,o[1]=L,o})})}var SourceImpl=function(){function r(t){this.data=t.data||(t.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=t.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=t.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var n=this.dimensionsDefine=t.dimensionsDefine;if(n)for(var o=0;o<n.length;o++){var a=n[o];a.type==null&&guessOrdinal(this,o)===BE_ORDINAL.Must&&(a.type="ordinal")}}return r}();function isSourceInstance(r){return r instanceof SourceImpl}function createSource(r,t,n){n=n||detectSourceFormat(r);var o=t.seriesLayoutBy,a=determineSourceDimensions(r,n,o,t.sourceHeader,t.dimensions),l=new SourceImpl({data:r,sourceFormat:n,seriesLayoutBy:o,dimensionsDefine:a.dimensionsDefine,startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount,metaRawOption:clone$4(t)});return l}function createSourceFromSeriesDataOption(r){return new SourceImpl({data:r,sourceFormat:isTypedArray(r)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(r){return new SourceImpl({data:r.data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:clone$4(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})}function detectSourceFormat(r){var t=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(r))t=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(r)){r.length===0&&(t=SOURCE_FORMAT_ARRAY_ROWS);for(var n=0,o=r.length;n<o;n++){var a=r[n];if(a!=null){if(isArray$1(a)){t=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(a)){t=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(r)){for(var l in r)if(hasOwn(r,l)&&isArrayLike(r[l])){t=SOURCE_FORMAT_KEYED_COLUMNS;break}}return t}function determineSourceDimensions(r,t,n,o,a){var l,d;if(!r)return{dimensionsDefine:normalizeDimensionsOption(a),startIndex:d,dimensionsDetectedCount:l};if(t===SOURCE_FORMAT_ARRAY_ROWS){var g=r;o==="auto"||o==null?arrayRowsTravelFirst(function(S){S!=null&&S!=="-"&&(isString(S)?d==null&&(d=1):d=0)},n,g,10):d=isNumber(o)?o:o?1:0,!a&&d===1&&(a=[],arrayRowsTravelFirst(function(S,x){a[x]=S!=null?S+"":""},n,g,1/0)),l=a?a.length:n===SERIES_LAYOUT_BY_ROW?g.length:g[0]?g[0].length:null}else if(t===SOURCE_FORMAT_OBJECT_ROWS)a||(a=objectRowsCollectDimensions(r));else if(t===SOURCE_FORMAT_KEYED_COLUMNS)a||(a=[],each$f(r,function(S,x){a.push(x)}));else if(t===SOURCE_FORMAT_ORIGINAL){var y=getDataItemValue(r[0]);l=isArray$1(y)&&y.length||1}return{startIndex:d,dimensionsDefine:normalizeDimensionsOption(a),dimensionsDetectedCount:l}}function objectRowsCollectDimensions(r){for(var t=0,n;t<r.length&&!(n=r[t++]););if(n)return keys(n)}function normalizeDimensionsOption(r){if(r){var t=createHashMap();return map$1(r,function(n,o){n=isObject$3(n)?n:{name:n};var a={name:n.name,displayName:n.displayName,type:n.type};if(a.name==null)return a;a.name+="",a.displayName==null&&(a.displayName=a.name);var l=t.get(a.name);return l?a.name+="-"+l.count++:t.set(a.name,{count:1}),a})}}function arrayRowsTravelFirst(r,t,n,o){if(t===SERIES_LAYOUT_BY_ROW)for(var a=0;a<n.length&&a<o;a++)r(n[a]?n[a][0]:null,a);else for(var l=n[0]||[],a=0;a<l.length&&a<o;a++)r(l[a],a)}function shouldRetrieveDataByName(r){var t=r.sourceFormat;return t===SOURCE_FORMAT_OBJECT_ROWS||t===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function r(t,n){var o=isSourceInstance(t)?t:createSourceFromSeriesDataOption(t);this._source=o;var a=this._data=o.data;o.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=n,this._data=a),mountMethods(this,a,o)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(t,n){},r.prototype.appendData=function(t){},r.prototype.clean=function(){},r.protoInitialize=function(){var t=r.prototype;t.pure=!1,t.persistent=!0}(),r.internalField=function(){var t;mountMethods=function(d,g,y){var S=y.sourceFormat,x=y.seriesLayoutBy,w=y.startIndex,c=y.dimensionsDefine,A=providerMethods[getMethodMapKey(S,x)];if(extend(d,A),S===SOURCE_FORMAT_TYPED_ARRAY)d.getItem=n,d.count=a,d.fillStorage=o;else{var R=getRawSourceItemGetter(S,x);d.getItem=bind$1(R,null,g,w,c);var L=getRawSourceDataCounter(S,x);d.count=bind$1(L,null,g,w,c)}};var n=function(d,g){d=d-this._offset,g=g||[];for(var y=this._data,S=this._dimSize,x=S*d,w=0;w<S;w++)g[w]=y[x+w];return g},o=function(d,g,y,S){for(var x=this._data,w=this._dimSize,c=0;c<w;c++){for(var A=S[c],R=A[0]==null?1/0:A[0],L=A[1]==null?-1/0:A[1],$=g-d,O=y[c],z=0;z<$;z++){var V=x[z*w+c];O[d+z]=V,V<R&&(R=V),V>L&&(L=V)}A[0]=R,A[1]=L}},a=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(t={},t[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:l},t[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:l},t[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(d){var g=this._data;each$f(d,function(y,S){for(var x=g[S]||(g[S]=[]),w=0;w<(y||[]).length;w++)x.push(y[w])})}},t[SOURCE_FORMAT_ORIGINAL]={appendData:l},t[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(d){this._data=d},clean:function(){this._offset+=this.count(),this._data=null}},t);function l(d){for(var g=0;g<d.length;g++)this._data.push(d[g])}}(),r}(),getItemSimply=function(r,t,n,o){return r[o]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(r,t,n,o){return r[o+t]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(r,t,n,o,a){o+=t;for(var l=a||[],d=r,g=0;g<d.length;g++){var y=d[g];l[g]=y?y[o]:null}return l},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(r,t,n,o,a){for(var l=a||[],d=0;d<n.length;d++){var g=n[d].name,y=r[g];l[d]=y?y[o]:null}return l},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(r,t){var n=rawSourceItemGetterMap[getMethodMapKey(r,t)];return n}var countSimply=function(r,t,n){return r.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(r,t,n){return Math.max(0,r.length-t)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(r,t,n){var o=r[0];return o?Math.max(0,o.length-t):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(r,t,n){var o=n[0].name,a=r[o];return a?a.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(r,t){var n=rawSourceDataCounterMap[getMethodMapKey(r,t)];return n}var getRawValueSimply=function(r,t,n){return r[t]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(r,t,n){return r[n]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(r,t,n){var o=getDataItemValue(r);return o instanceof Array?o[t]:o},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(r){var t=rawSourceValueGetterMap[r];return t}function getMethodMapKey(r,t){return r===SOURCE_FORMAT_ARRAY_ROWS?r+"_"+t:r}function retrieveRawValue(r,t,n){if(r){var o=r.getRawDataItem(t);if(o!=null){var a=r.getStore(),l=a.getSource().sourceFormat;if(n!=null){var d=r.getDimensionIndex(n),g=a.getDimensionProperty(d);return getRawSourceValueGetter(l)(o,d,g)}else{var y=o;return l===SOURCE_FORMAT_ORIGINAL&&(y=getDataItemValue(o)),y}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function r(){}return r.prototype.getDataParams=function(t,n){var o=this.getData(n),a=this.getRawValue(t,n),l=o.getRawIndex(t),d=o.getName(t),g=o.getRawDataItem(t),y=o.getItemVisual(t,"style"),S=y&&y[o.getItemVisual(t,"drawType")||"fill"],x=y&&y.stroke,w=this.mainType,c=w==="series",A=o.userOutput&&o.userOutput.get();return{componentType:w,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:c?this.subType:null,seriesIndex:this.seriesIndex,seriesId:c?this.id:null,seriesName:c?this.name:null,name:d,dataIndex:l,data:g,dataType:n,value:a,color:S,borderColor:x,dimensionNames:A?A.fullDimensions:null,encode:A?A.encode:null,$vars:["seriesName","name","value"]}},r.prototype.getFormattedLabel=function(t,n,o,a,l,d){n=n||"normal";var g=this.getData(o),y=this.getDataParams(t,o);if(d&&(y.value=d.interpolatedValue),a!=null&&isArray$1(y.value)&&(y.value=y.value[a]),!l){var S=g.getItemModel(t);l=S.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(isFunction(l))return y.status=n,y.dimensionIndex=a,l(y);if(isString(l)){var x=formatTpl(l,y);return x.replace(DIMENSION_LABEL_REG,function(w,c){var A=c.length,R=c;R.charAt(0)==="["&&R.charAt(A-1)==="]"&&(R=+R.slice(1,A-1));var L=retrieveRawValue(g,t,R);if(d&&isArray$1(d.interpolatedValue)){var $=g.getDimensionIndex(R);$>=0&&(L=d.interpolatedValue[$])}return L!=null?L+"":""})}},r.prototype.getRawValue=function(t,n){return retrieveRawValue(this.getData(n),t)},r.prototype.formatTooltip=function(t,n,o){},r}();function normalizeTooltipFormatResult(r){var t,n;return isObject$3(r)?r.type&&(n=r):t=r,{text:t,frag:n}}function createTask(r){return new Task(r)}var Task=function(){function r(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return r.prototype.perform=function(t){var n=this._upstream,o=t&&t.skip;if(this._dirty&&n){var a=this.context;a.data=a.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var l;this._plan&&!o&&(l=this._plan(this.context));var d=x(this._modBy),g=this._modDataCount||0,y=x(t&&t.modBy),S=t&&t.modDataCount||0;(d!==y||g!==S)&&(l="reset");function x(z){return!(z>=1)&&(z=1),z}var w;(this._dirty||l==="reset")&&(this._dirty=!1,w=this._doReset(o)),this._modBy=y,this._modDataCount=S;var c=t&&t.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var A=this._dueIndex,R=Math.min(c!=null?this._dueIndex+c:1/0,this._dueEnd);if(!o&&(w||A<R)){var L=this._progress;if(isArray$1(L))for(var $=0;$<L.length;$++)this._doProgress(L[$],A,R,y,S);else this._doProgress(L,A,R,y,S)}this._dueIndex=R;var O=this._settedOutputEnd!=null?this._settedOutputEnd:R;this._outputDueEnd=O}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},r.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},r.prototype._doProgress=function(t,n,o,a,l){iterator.reset(n,o,a,l),this._callingProgress=t,this._callingProgress({start:n,end:o,count:o-n,next:iterator.next},this.context)},r.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,o;!t&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(o=n.forceFirstProgress,n=n.progress),isArray$1(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var a=this._downstream;return a&&a.dirty(),o},r.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},r.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},r.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},r.prototype.getUpstream=function(){return this._upstream},r.prototype.getDownstream=function(){return this._downstream},r.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},r}(),iterator=function(){var r,t,n,o,a,l={reset:function(y,S,x,w){t=y,r=S,n=x,o=w,a=Math.ceil(o/n),l.next=n>1&&o>0?g:d}};return l;function d(){return t<r?t++:null}function g(){var y=t%a*n+Math.ceil(t/a),S=t>=r?null:y<o?y:t;return t++,S}}();function parseDataValue(r,t){var n=t&&t.type;return n==="ordinal"?r:(n==="time"&&!isNumber(r)&&r!=null&&r!=="-"&&(r=+parseDate(r)),r==null||r===""?NaN:+r)}var valueParserMap=createHashMap({number:function(r){return parseFloat(r)},time:function(r){return+parseDate(r)},trim:function(r){return isString(r)?trim$1(r):r}});function getRawValueParser(r){return valueParserMap.get(r)}var ORDER_COMPARISON_OP_MAP={lt:function(r,t){return r<t},lte:function(r,t){return r<=t},gt:function(r,t){return r>t},gte:function(r,t){return r>=t}},FilterOrderComparator=function(){function r(t,n){if(!isNumber(n)){var o="";throwError(o)}this._opFn=ORDER_COMPARISON_OP_MAP[t],this._rvalFloat=numericToNumber(n)}return r.prototype.evaluate=function(t){return isNumber(t)?this._opFn(t,this._rvalFloat):this._opFn(numericToNumber(t),this._rvalFloat)},r}(),SortOrderComparator=function(){function r(t,n){var o=t==="desc";this._resultLT=o?1:-1,n==null&&(n=o?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return r.prototype.evaluate=function(t,n){var o=isNumber(t)?t:numericToNumber(t),a=isNumber(n)?n:numericToNumber(n),l=isNaN(o),d=isNaN(a);if(l&&(o=this._incomparable),d&&(a=this._incomparable),l&&d){var g=isString(t),y=isString(n);g&&(o=y?t:0),y&&(a=g?n:0)}return o<a?this._resultLT:o>a?-this._resultLT:0},r}(),FilterEqualityComparator=function(){function r(t,n){this._rval=n,this._isEQ=t,this._rvalTypeof=typeof n,this._rvalFloat=numericToNumber(n)}return r.prototype.evaluate=function(t){var n=t===this._rval;if(!n){var o=typeof t;o!==this._rvalTypeof&&(o==="number"||this._rvalTypeof==="number")&&(n=numericToNumber(t)===this._rvalFloat)}return this._isEQ?n:!n},r}();function createFilterComparator(r,t){return r==="eq"||r==="ne"?new FilterEqualityComparator(r==="eq",t):hasOwn(ORDER_COMPARISON_OP_MAP,r)?new FilterOrderComparator(r,t):null}var ExternalSource=function(){function r(){}return r.prototype.getRawData=function(){throw new Error("not supported")},r.prototype.getRawDataItem=function(t){throw new Error("not supported")},r.prototype.cloneRawData=function(){},r.prototype.getDimensionInfo=function(t){},r.prototype.cloneAllDimensionInfo=function(){},r.prototype.count=function(){},r.prototype.retrieveValue=function(t,n){},r.prototype.retrieveValueFromItem=function(t,n){},r.prototype.convertValue=function(t,n){return parseDataValue(t,n)},r}();function createExternalSource(r,t){var n=new ExternalSource,o=r.data,a=n.sourceFormat=r.sourceFormat,l=r.startIndex,d="";r.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(d);var g=[],y={},S=r.dimensionsDefine;if(S)each$f(S,function(L,$){var O=L.name,z={index:$,name:O,displayName:L.displayName};if(g.push(z),O!=null){var V="";hasOwn(y,O)&&throwError(V),y[O]=z}});else for(var x=0;x<r.dimensionsDetectedCount;x++)g.push({index:x});var w=getRawSourceItemGetter(a,SERIES_LAYOUT_BY_COLUMN);t.__isBuiltIn&&(n.getRawDataItem=function(L){return w(o,l,g,L)},n.getRawData=bind$1(getRawData,null,r)),n.cloneRawData=bind$1(cloneRawData,null,r);var c=getRawSourceDataCounter(a,SERIES_LAYOUT_BY_COLUMN);n.count=bind$1(c,null,o,l,g);var A=getRawSourceValueGetter(a);n.retrieveValue=function(L,$){var O=w(o,l,g,L);return R(O,$)};var R=n.retrieveValueFromItem=function(L,$){if(L!=null){var O=g[$];if(O)return A(L,$,O.name)}};return n.getDimensionInfo=bind$1(getDimensionInfo,null,g,y),n.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,g),n}function getRawData(r){var t=r.sourceFormat;if(!isSupportedSourceFormat(t)){var n="";throwError(n)}return r.data}function cloneRawData(r){var t=r.sourceFormat,n=r.data;if(!isSupportedSourceFormat(t)){var o="";throwError(o)}if(t===SOURCE_FORMAT_ARRAY_ROWS){for(var a=[],l=0,d=n.length;l<d;l++)a.push(n[l].slice());return a}else if(t===SOURCE_FORMAT_OBJECT_ROWS){for(var a=[],l=0,d=n.length;l<d;l++)a.push(extend({},n[l]));return a}}function getDimensionInfo(r,t,n){if(n!=null){if(isNumber(n)||!isNaN(n)&&!hasOwn(t,n))return r[n];if(hasOwn(t,n))return t[n]}}function cloneAllDimensionInfo(r){return clone$4(r)}var externalTransformMap=createHashMap();function registerExternalTransform(r){r=clone$4(r);var t=r.type,n="";t||throwError(n);var o=t.split(":");o.length!==2&&throwError(n);var a=!1;o[0]==="echarts"&&(t=o[1],a=!0),r.__isBuiltIn=a,externalTransformMap.set(t,r)}function applyDataTransform(r,t,n){var o=normalizeToArray(r),a=o.length,l="";a||throwError(l);for(var d=0,g=a;d<g;d++){var y=o[d];t=applySingleDataTransform(y,t),d!==g-1&&(t.length=Math.max(t.length,1))}return t}function applySingleDataTransform(r,t,n,o){var a="";t.length||throwError(a),isObject$3(r)||throwError(a);var l=r.type,d=externalTransformMap.get(l);d||throwError(a);var g=map$1(t,function(S){return createExternalSource(S,d)}),y=normalizeToArray(d.transform({upstream:g[0],upstreamList:g,config:clone$4(r.config)}));return map$1(y,function(S,x){var w="";isObject$3(S)||throwError(w),S.data||throwError(w);var c=detectSourceFormat(S.data);isSupportedSourceFormat(c)||throwError(w);var A,R=t[0];if(R&&x===0&&!S.dimensions){var L=R.startIndex;L&&(S.data=R.data.slice(0,L).concat(S.data)),A={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:L,dimensions:R.metaRawOption.dimensions}}else A={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:S.dimensions};return createSource(S.data,A,null)})}function isSupportedSourceFormat(r){return r===SOURCE_FORMAT_ARRAY_ROWS||r===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(r){return r>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(r){var t=r.constructor;return t===Array?r.slice():new t(r)}function prepareStore(r,t,n,o,a){var l=dataCtors[n||"float"];if(a){var d=r[t],g=d&&d.length;if(g!==o){for(var y=new l(o),S=0;S<g;S++)y[S]=d[S];r[t]=y}}else r[t]=new l(o)}var DataStore=function(){function r(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return r.prototype.initData=function(t,n,o){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var a=t.getSource(),l=this.defaultDimValueGetter=defaultDimValueGetters[a.sourceFormat];this._dimValueGetter=o||l,this._rawExtent=[],shouldRetrieveDataByName(a),this._dimensions=map$1(n,function(d){return{type:d.type,property:d.property}}),this._initDataFromProvider(0,t.count())},r.prototype.getProvider=function(){return this._provider},r.prototype.getSource=function(){return this._provider.getSource()},r.prototype.ensureCalculationDimension=function(t,n){var o=this._calcDimNameToIdx,a=this._dimensions,l=o.get(t);if(l!=null){if(a[l].type===n)return l}else l=a.length;return a[l]={type:n},o.set(t,l),this._chunks[l]=new dataCtors[n||"float"](this._rawCount),this._rawExtent[l]=getInitialExtent(),l},r.prototype.collectOrdinalMeta=function(t,n){var o=this._chunks[t],a=this._dimensions[t],l=this._rawExtent,d=a.ordinalOffset||0,g=o.length;d===0&&(l[t]=getInitialExtent());for(var y=l[t],S=d;S<g;S++){var x=o[S]=n.parseAndCollect(o[S]);isNaN(x)||(y[0]=Math.min(x,y[0]),y[1]=Math.max(x,y[1]))}a.ordinalMeta=n,a.ordinalOffset=g,a.type="ordinal"},r.prototype.getOrdinalMeta=function(t){var n=this._dimensions[t],o=n.ordinalMeta;return o},r.prototype.getDimensionProperty=function(t){var n=this._dimensions[t];return n&&n.property},r.prototype.appendData=function(t){var n=this._provider,o=this.count();n.appendData(t);var a=n.count();return n.persistent||(a+=o),o<a&&this._initDataFromProvider(o,a,!0),[o,a]},r.prototype.appendValues=function(t,n){for(var o=this._chunks,a=this._dimensions,l=a.length,d=this._rawExtent,g=this.count(),y=g+Math.max(t.length,n||0),S=0;S<l;S++){var x=a[S];prepareStore(o,S,x.type,y,!0)}for(var w=[],c=g;c<y;c++)for(var A=c-g,R=0;R<l;R++){var x=a[R],L=defaultDimValueGetters.arrayRows.call(this,t[A]||w,x.property,A,R);o[R][c]=L;var $=d[R];L<$[0]&&($[0]=L),L>$[1]&&($[1]=L)}return this._rawCount=this._count=y,{start:g,end:y}},r.prototype._initDataFromProvider=function(t,n,o){for(var a=this._provider,l=this._chunks,d=this._dimensions,g=d.length,y=this._rawExtent,S=map$1(d,function(z){return z.property}),x=0;x<g;x++){var w=d[x];y[x]||(y[x]=getInitialExtent()),prepareStore(l,x,w.type,n,o)}if(a.fillStorage)a.fillStorage(t,n,l,y);else for(var c=[],A=t;A<n;A++){c=a.getItem(A,c);for(var R=0;R<g;R++){var L=l[R],$=this._dimValueGetter(c,S[R],A,R);L[A]=$;var O=y[R];$<O[0]&&(O[0]=$),$>O[1]&&(O[1]=$)}}!a.persistent&&a.clean&&a.clean(),this._rawCount=this._count=n,this._extent=[]},r.prototype.count=function(){return this._count},r.prototype.get=function(t,n){if(!(n>=0&&n<this._count))return NaN;var o=this._chunks[t];return o?o[this.getRawIndex(n)]:NaN},r.prototype.getValues=function(t,n){var o=[],a=[];if(n==null){n=t,t=[];for(var l=0;l<this._dimensions.length;l++)a.push(l)}else a=t;for(var l=0,d=a.length;l<d;l++)o.push(this.get(a[l],n));return o},r.prototype.getByRawIndex=function(t,n){if(!(n>=0&&n<this._rawCount))return NaN;var o=this._chunks[t];return o?o[n]:NaN},r.prototype.getSum=function(t){var n=this._chunks[t],o=0;if(n)for(var a=0,l=this.count();a<l;a++){var d=this.get(t,a);isNaN(d)||(o+=d)}return o},r.prototype.getMedian=function(t){var n=[];this.each([t],function(l){isNaN(l)||n.push(l)});var o=n.sort(function(l,d){return l-d}),a=this.count();return a===0?0:a%2===1?o[(a-1)/2]:(o[a/2]+o[a/2-1])/2},r.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var n=this._indices,o=n[t];if(o!=null&&o<this._count&&o===t)return t;for(var a=0,l=this._count-1;a<=l;){var d=(a+l)/2|0;if(n[d]<t)a=d+1;else if(n[d]>t)l=d-1;else return d}return-1},r.prototype.indicesOfNearest=function(t,n,o){var a=this._chunks,l=a[t],d=[];if(!l)return d;o==null&&(o=1/0);for(var g=1/0,y=-1,S=0,x=0,w=this.count();x<w;x++){var c=this.getRawIndex(x),A=n-l[c],R=Math.abs(A);R<=o&&((R<g||R===g&&A>=0&&y<0)&&(g=R,y=A,S=0),A===y&&(d[S++]=x))}return d.length=S,d},r.prototype.getIndices=function(){var t,n=this._indices;if(n){var o=n.constructor,a=this._count;if(o===Array){t=new o(a);for(var l=0;l<a;l++)t[l]=n[l]}else t=new o(n.buffer,0,a)}else{var o=getIndicesCtor(this._rawCount);t=new o(this.count());for(var l=0;l<t.length;l++)t[l]=l}return t},r.prototype.filter=function(t,n){if(!this._count)return this;for(var o=this.clone(),a=o.count(),l=getIndicesCtor(o._rawCount),d=new l(a),g=[],y=t.length,S=0,x=t[0],w=o._chunks,c=0;c<a;c++){var A=void 0,R=o.getRawIndex(c);if(y===0)A=n(c);else if(y===1){var L=w[x][R];A=n(L,c)}else{for(var $=0;$<y;$++)g[$]=w[t[$]][R];g[$]=c,A=n.apply(null,g)}A&&(d[S++]=R)}return S<a&&(o._indices=d),o._count=S,o._extent=[],o._updateGetRawIdx(),o},r.prototype.selectRange=function(t){var n=this.clone(),o=n._count;if(!o)return this;var a=keys(t),l=a.length;if(!l)return this;var d=n.count(),g=getIndicesCtor(n._rawCount),y=new g(d),S=0,x=a[0],w=t[x][0],c=t[x][1],A=n._chunks,R=!1;if(!n._indices){var L=0;if(l===1){for(var $=A[a[0]],O=0;O<o;O++){var z=$[O];(z>=w&&z<=c||isNaN(z))&&(y[S++]=L),L++}R=!0}else if(l===2){for(var $=A[a[0]],V=A[a[1]],j=t[a[1]][0],K=t[a[1]][1],O=0;O<o;O++){var z=$[O],Z=V[O];(z>=w&&z<=c||isNaN(z))&&(Z>=j&&Z<=K||isNaN(Z))&&(y[S++]=L),L++}R=!0}}if(!R)if(l===1)for(var O=0;O<d;O++){var q=n.getRawIndex(O),z=A[a[0]][q];(z>=w&&z<=c||isNaN(z))&&(y[S++]=q)}else for(var O=0;O<d;O++){for(var ie=!0,q=n.getRawIndex(O),te=0;te<l;te++){var oe=a[te],z=A[oe][q];(z<t[oe][0]||z>t[oe][1])&&(ie=!1)}ie&&(y[S++]=n.getRawIndex(O))}return S<d&&(n._indices=y),n._count=S,n._extent=[],n._updateGetRawIdx(),n},r.prototype.map=function(t,n){var o=this.clone(t);return this._updateDims(o,t,n),o},r.prototype.modify=function(t,n){this._updateDims(this,t,n)},r.prototype._updateDims=function(t,n,o){for(var a=t._chunks,l=[],d=n.length,g=t.count(),y=[],S=t._rawExtent,x=0;x<n.length;x++)S[n[x]]=getInitialExtent();for(var w=0;w<g;w++){for(var c=t.getRawIndex(w),A=0;A<d;A++)y[A]=a[n[A]][c];y[d]=w;var R=o&&o.apply(null,y);if(R!=null){typeof R!="object"&&(l[0]=R,R=l);for(var x=0;x<R.length;x++){var L=n[x],$=R[x],O=S[L],z=a[L];z&&(z[c]=$),$<O[0]&&(O[0]=$),$>O[1]&&(O[1]=$)}}}},r.prototype.lttbDownSample=function(t,n){var o=this.clone([t],!0),a=o._chunks,l=a[t],d=this.count(),g=0,y=Math.floor(1/n),S=this.getRawIndex(0),x,w,c,A=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(d/y)+2)*2,d));A[g++]=S;for(var R=1;R<d-1;R+=y){for(var L=Math.min(R+y,d-1),$=Math.min(R+y*2,d),O=($+L)/2,z=0,V=L;V<$;V++){var j=this.getRawIndex(V),K=l[j];isNaN(K)||(z+=K)}z/=$-L;var Z=R,q=Math.min(R+y,d),ie=R-1,te=l[S];x=-1,c=Z;for(var oe=-1,re=0,V=Z;V<q;V++){var j=this.getRawIndex(V),K=l[j];if(isNaN(K)){re++,oe<0&&(oe=j);continue}w=Math.abs((ie-O)*(K-te)-(ie-V)*(z-te)),w>x&&(x=w,c=j)}re>0&&re<q-Z&&(A[g++]=Math.min(oe,c),c=Math.max(oe,c)),A[g++]=c,S=c}return A[g++]=this.getRawIndex(d-1),o._count=g,o._indices=A,o.getRawIndex=this._getRawIdx,o},r.prototype.downSample=function(t,n,o,a){for(var l=this.clone([t],!0),d=l._chunks,g=[],y=Math.floor(1/n),S=d[t],x=this.count(),w=l._rawExtent[t]=getInitialExtent(),c=new(getIndicesCtor(this._rawCount))(Math.ceil(x/y)),A=0,R=0;R<x;R+=y){y>x-R&&(y=x-R,g.length=y);for(var L=0;L<y;L++){var $=this.getRawIndex(R+L);g[L]=S[$]}var O=o(g),z=this.getRawIndex(Math.min(R+a(g,O)||0,x-1));S[z]=O,O<w[0]&&(w[0]=O),O>w[1]&&(w[1]=O),c[A++]=z}return l._count=A,l._indices=c,l._updateGetRawIdx(),l},r.prototype.each=function(t,n){if(this._count)for(var o=t.length,a=this._chunks,l=0,d=this.count();l<d;l++){var g=this.getRawIndex(l);switch(o){case 0:n(l);break;case 1:n(a[t[0]][g],l);break;case 2:n(a[t[0]][g],a[t[1]][g],l);break;default:for(var y=0,S=[];y<o;y++)S[y]=a[t[y]][g];S[y]=l,n.apply(null,S)}}},r.prototype.getDataExtent=function(t){var n=this._chunks[t],o=getInitialExtent();if(!n)return o;var a=this.count(),l=!this._indices,d;if(l)return this._rawExtent[t].slice();if(d=this._extent[t],d)return d.slice();d=o;for(var g=d[0],y=d[1],S=0;S<a;S++){var x=this.getRawIndex(S),w=n[x];w<g&&(g=w),w>y&&(y=w)}return d=[g,y],this._extent[t]=d,d},r.prototype.getRawDataItem=function(t){var n=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(n);for(var o=[],a=this._chunks,l=0;l<a.length;l++)o.push(a[l][n]);return o},r.prototype.clone=function(t,n){var o=new r,a=this._chunks,l=t&&reduce(t,function(g,y){return g[y]=!0,g},{});if(l)for(var d=0;d<a.length;d++)o._chunks[d]=l[d]?cloneChunk(a[d]):a[d];else o._chunks=a;return this._copyCommonProps(o),n||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},r.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=clone$4(this._extent),t._rawExtent=clone$4(this._rawExtent)},r.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,n=void 0;if(t===Array){var o=this._indices.length;n=new t(o);for(var a=0;a<o;a++)n[a]=this._indices[a]}else n=new t(this._indices);return n}return null},r.prototype._getRawIdxIdentity=function(t){return t},r.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},r.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},r.internalField=function(){function t(n,o,a,l){return parseDataValue(n[l],this._dimensions[l])}defaultDimValueGetters={arrayRows:t,objectRows:function(n,o,a,l){return parseDataValue(n[o],this._dimensions[l])},keyedColumns:t,original:function(n,o,a,l){var d=n&&(n.value==null?n:n.value);return parseDataValue(d instanceof Array?d[l]:d,this._dimensions[l])},typedArray:function(n,o,a,l){return n[l]}}}(),r}();const DataStore$1=DataStore;var SourceManager=function(){function r(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return r.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},r.prototype._setLocalSource=function(t,n){this._sourceList=t,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},r.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},r.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},r.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,n=this._getUpstreamSourceManagers(),o=!!n.length,a,l;if(isSeries(t)){var d=t,g=void 0,y=void 0,S=void 0;if(o){var x=n[0];x.prepareSource(),S=x.getSource(),g=S.data,y=S.sourceFormat,l=[x._getVersionSign()]}else g=d.get("data",!0),y=isTypedArray(g)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,l=[];var w=this._getSourceMetaRawOption()||{},c=S&&S.metaRawOption||{},A=retrieve2(w.seriesLayoutBy,c.seriesLayoutBy)||null,R=retrieve2(w.sourceHeader,c.sourceHeader),L=retrieve2(w.dimensions,c.dimensions),$=A!==c.seriesLayoutBy||!!R!=!!c.sourceHeader||L;a=$?[createSource(g,{seriesLayoutBy:A,sourceHeader:R,dimensions:L},y)]:[]}else{var O=t;if(o){var z=this._applyTransform(n);a=z.sourceList,l=z.upstreamSignList}else{var V=O.get("source",!0);a=[createSource(V,this._getSourceMetaRawOption(),null)],l=[]}}this._setLocalSource(a,l)},r.prototype._applyTransform=function(t){var n=this._sourceHost,o=n.get("transform",!0),a=n.get("fromTransformResult",!0);if(a!=null){var l="";t.length!==1&&doThrow(l)}var d,g=[],y=[];return each$f(t,function(S){S.prepareSource();var x=S.getSource(a||0),w="";a!=null&&!x&&doThrow(w),g.push(x),y.push(S._getVersionSign())}),o?d=applyDataTransform(o,g,{datasetIndex:n.componentIndex}):a!=null&&(d=[cloneSourceShallow(g[0])]),{sourceList:d,upstreamSignList:y}},r.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),n=0;n<t.length;n++){var o=t[n];if(o._isDirty()||this._upstreamSignList[n]!==o._getVersionSign())return!0}},r.prototype.getSource=function(t){t=t||0;var n=this._sourceList[t];if(!n){var o=this._getUpstreamSourceManagers();return o[0]&&o[0].getSource(t)}return n},r.prototype.getSharedDataStore=function(t){var n=t.makeStoreSchema();return this._innerGetDataStore(n.dimensions,t.source,n.hash)},r.prototype._innerGetDataStore=function(t,n,o){var a=0,l=this._storeList,d=l[a];d||(d=l[a]={});var g=d[o];if(!g){var y=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&y?g=y._innerGetDataStore(t,n,o):(g=new DataStore$1,g.initData(new DefaultDataProvider(n,t.length),t)),d[o]=g}return g},r.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(isSeries(t)){var n=querySeriesUpstreamDatasetModel(t);return n?[n.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(t),function(o){return o.getSourceManager()})},r.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,n,o,a;if(isSeries(t))n=t.get("seriesLayoutBy",!0),o=t.get("sourceHeader",!0),a=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var l=t;n=l.get("seriesLayoutBy",!0),o=l.get("sourceHeader",!0),a=l.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:o,dimensions:a}},r}();function disableTransformOptionMerge(r){var t=r.option.transform;t&&setAsPrimitive(r.option.transform)}function isSeries(r){return r.mainType==="series"}function doThrow(r){throw new Error(r)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipTextStyle(r,t){var n=r.color||"#6e7079",o=r.fontSize||12,a=r.fontWeight||"400",l=r.color||"#464646",d=r.fontSize||14,g=r.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+encodeHTML(o+"")+"px;color:"+encodeHTML(n)+";font-weight:"+encodeHTML(a+""),valueStyle:"font-size:"+encodeHTML(d+"")+"px;color:"+encodeHTML(l)+";font-weight:"+encodeHTML(g+"")}:{nameStyle:{fontSize:o,fill:n,fontWeight:a},valueStyle:{fontSize:d,fill:l,fontWeight:g}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(r,t){return t.type=r,t}function isSectionFragment(r){return r.type==="section"}function getBuilder(r){return isSectionFragment(r)?buildSection:buildNameValue}function getBlockGapLevel(r){if(isSectionFragment(r)){var t=0,n=r.blocks.length,o=n>1||n>0&&!r.noHeader;return each$f(r.blocks,function(a){var l=getBlockGapLevel(a);l>=t&&(t=l+ +(o&&(!l||isSectionFragment(a)&&!a.noHeader)))}),t}return 0}function buildSection(r,t,n,o){var a=t.noHeader,l=getGap(getBlockGapLevel(t)),d=[],g=t.blocks||[];assert(!g||isArray$1(g)),g=g||[];var y=r.orderMode;if(t.sortBlocks&&y){g=g.slice();var S={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(S,y)){var x=new SortOrderComparator(S[y],null);g.sort(function(R,L){return x.evaluate(R.sortParam,L.sortParam)})}else y==="seriesDesc"&&g.reverse()}each$f(g,function(R,L){var $=t.valueFormatter,O=getBuilder(R)($?extend(extend({},r),{valueFormatter:$}):r,R,L>0?l.html:0,o);O!=null&&d.push(O)});var w=r.renderMode==="richText"?d.join(l.richText):wrapBlockHTML(d.join(""),a?n:l.html);if(a)return w;var c=makeValueReadable(t.header,"ordinal",r.useUTC),A=getTooltipTextStyle(o,r.renderMode).nameStyle;return r.renderMode==="richText"?wrapInlineNameRichText(r,c,A)+l.richText+w:wrapBlockHTML('<div style="'+A+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+encodeHTML(c)+"</div>"+w,n)}function buildNameValue(r,t,n,o){var a=r.renderMode,l=t.noName,d=t.noValue,g=!t.markerType,y=t.name,S=r.useUTC,x=t.valueFormatter||r.valueFormatter||function(j){return j=isArray$1(j)?j:[j],map$1(j,function(K,Z){return makeValueReadable(K,isArray$1(A)?A[Z]:A,S)})};if(!(l&&d)){var w=g?"":r.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",a),c=l?"":makeValueReadable(y,"ordinal",S),A=t.valueType,R=d?[]:x(t.value),L=!g||!l,$=!g&&l,O=getTooltipTextStyle(o,a),z=O.nameStyle,V=O.valueStyle;return a==="richText"?(g?"":w)+(l?"":wrapInlineNameRichText(r,c,z))+(d?"":wrapInlineValueRichText(r,R,L,$,V)):wrapBlockHTML((g?"":w)+(l?"":wrapInlineNameHTML(c,!g,z))+(d?"":wrapInlineValueHTML(R,L,$,V)),n)}}function buildTooltipMarkup(r,t,n,o,a,l){if(r){var d=getBuilder(r),g={useUTC:a,renderMode:n,orderMode:o,markupStyleCreator:t,valueFormatter:r.valueFormatter};return d(g,r,0,l)}}function getGap(r){return{html:HTML_GAPS[r],richText:RICH_TEXT_GAPS[r]}}function wrapBlockHTML(r,t){var n='<div style="clear:both"></div>',o="margin: "+t+"px 0 0";return'<div style="'+o+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+r+n+"</div>"}function wrapInlineNameHTML(r,t,n){var o=t?"margin-left:2px":"";return'<span style="'+n+";"+o+'">'+encodeHTML(r)+"</span>"}function wrapInlineValueHTML(r,t,n,o){var a=n?"10px":"20px",l=t?"float:right;margin-left:"+a:"";return r=isArray$1(r)?r:[r],'<span style="'+l+";"+o+'">'+map$1(r,function(d){return encodeHTML(d)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(r,t,n){return r.markupStyleCreator.wrapRichTextStyle(t,n)}function wrapInlineValueRichText(r,t,n,o,a){var l=[a],d=o?10:20;return n&&l.push({padding:[0,0,0,d],align:"right"}),r.markupStyleCreator.wrapRichTextStyle(isArray$1(t)?t.join("  "):t,l)}function retrieveVisualColorForTooltipMarker(r,t){var n=r.getData().getItemVisual(t,"style"),o=n[r.visualDrawType];return convertToColorString(o)}function getPaddingFromTooltipModel(r,t){var n=r.get("padding");return n??(t==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function r(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return r.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},r.prototype.makeTooltipMarker=function(t,n,o){var a=o==="richText"?this._generateStyleName():null,l=getTooltipMarker({color:n,type:t,renderMode:o,markerId:a});return isString(l)?l:(this.richTextStyles[a]=l.style,l.content)},r.prototype.wrapRichTextStyle=function(t,n){var o={};isArray$1(n)?each$f(n,function(l){return extend(o,l)}):extend(o,n);var a=this._generateStyleName();return this.richTextStyles[a]=o,"{"+a+"|"+t+"}"},r}();function defaultSeriesFormatTooltip(r){var t=r.series,n=r.dataIndex,o=r.multipleSeries,a=t.getData(),l=a.mapDimensionsAll("defaultedTooltip"),d=l.length,g=t.getRawValue(n),y=isArray$1(g),S=retrieveVisualColorForTooltipMarker(t,n),x,w,c,A;if(d>1||y&&!d){var R=formatTooltipArrayValue(g,t,n,l,S);x=R.inlineValues,w=R.inlineValueTypes,c=R.blocks,A=R.inlineValues[0]}else if(d){var L=a.getDimensionInfo(l[0]);A=x=retrieveRawValue(a,n,l[0]),w=L.type}else A=x=y?g[0]:g;var $=isNameSpecified(t),O=$&&t.name||"",z=a.getName(n),V=o?O:z;return createTooltipMarkup("section",{header:O,noHeader:o||!$,sortParam:A,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:S,name:V,noName:!trim$1(V),value:x,valueType:w})].concat(c||[])})}function formatTooltipArrayValue(r,t,n,o,a){var l=t.getData(),d=reduce(r,function(w,c,A){var R=l.getDimensionInfo(A);return w=w||R&&R.tooltip!==!1&&R.displayName!=null},!1),g=[],y=[],S=[];o.length?each$f(o,function(w){x(retrieveRawValue(l,n,w),w)}):each$f(r,x);function x(w,c){var A=l.getDimensionInfo(c);!A||A.otherDims.tooltip===!1||(d?S.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:a,name:A.displayName,value:w,valueType:A.type})):(g.push(w),y.push(A.type)))}return{inlineValues:g,inlineValueTypes:y,blocks:S}}var inner$k=makeInner();function getSelectionKey(r,t){return r.getName(t)||r.getId(t)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return t.prototype.init=function(n,o,a){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,a);var l=inner$k(this).sourceManager=new SourceManager(this);l.prepareSource();var d=this.getInitialData(n,a);wrapData(d,this),this.dataTask.context.data=d,inner$k(this).dataBeforeProcessed=d,autoSeriesName(this),this._initSelectedMapFromData(d)},t.prototype.mergeDefaultAndTheme=function(n,o){var a=fetchLayoutMode(this),l=a?getLayoutParams(n):{},d=this.subType;ComponentModel$1.hasClass(d)&&(d+="Series"),merge(n,o.getTheme().get(this.subType)),merge(n,this.getDefaultOption()),defaultEmphasis(n,"label",["show"]),this.fillDataTextStyle(n.data),a&&mergeLayoutParam(n,l,a)},t.prototype.mergeOption=function(n,o){n=merge(this.option,n,!0),this.fillDataTextStyle(n.data);var a=fetchLayoutMode(this);a&&mergeLayoutParam(this.option,n,a);var l=inner$k(this).sourceManager;l.dirty(),l.prepareSource();var d=this.getInitialData(n,o);wrapData(d,this),this.dataTask.dirty(),this.dataTask.context.data=d,inner$k(this).dataBeforeProcessed=d,autoSeriesName(this),this._initSelectedMapFromData(d)},t.prototype.fillDataTextStyle=function(n){if(n&&!isTypedArray(n))for(var o=["show"],a=0;a<n.length;a++)n[a]&&n[a].label&&defaultEmphasis(n[a],"label",o)},t.prototype.getInitialData=function(n,o){},t.prototype.appendData=function(n){var o=this.getRawData();o.appendData(n.data)},t.prototype.getData=function(n){var o=getCurrentTask(this);if(o){var a=o.context.data;return n==null?a:a.getLinkedData(n)}else return inner$k(this).data},t.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},t.prototype.setData=function(n){var o=getCurrentTask(this);if(o){var a=o.context;a.outputData=n,o!==this.dataTask&&(a.data=n)}inner$k(this).data=n},t.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return createHashMap(n)},t.prototype.getSourceManager=function(){return inner$k(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},t.prototype.formatTooltip=function(n,o,a){return defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:o})},t.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(env$1.node&&!(n&&n.ssr))return!1;var o=this.getShallow("animation");return o&&this.getData().count()>this.getShallow("animationThreshold")&&(o=!1),!!o},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(n,o,a){var l=this.ecModel,d=PaletteMixin.prototype.getColorFromPalette.call(this,n,o,a);return d||(d=l.getColorFromPalette(n,o,a)),d},t.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(n,o){this._innerSelect(this.getData(o),n)},t.prototype.unselect=function(n,o){var a=this.option.selectedMap;if(a){var l=this.option.selectedMode,d=this.getData(o);if(l==="series"||a==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var g=0;g<n.length;g++){var y=n[g],S=getSelectionKey(d,y);a[S]=!1,this._selectedDataIndicesMap[S]=-1}}},t.prototype.toggleSelect=function(n,o){for(var a=[],l=0;l<n.length;l++)a[0]=n[l],this.isSelected(n[l],o)?this.unselect(a,o):this.select(a,o)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,o=keys(n),a=[],l=0;l<o.length;l++){var d=n[o[l]];d>=0&&a.push(d)}return a},t.prototype.isSelected=function(n,o){var a=this.option.selectedMap;if(!a)return!1;var l=this.getData(o);return(a==="all"||a[getSelectionKey(l,n)])&&!l.getItemModel(n).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},t.prototype._innerSelect=function(n,o){var a,l,d=this.option,g=d.selectedMode,y=o.length;if(!(!g||!y)){if(g==="series")d.selectedMap="all";else if(g==="multiple"){isObject$3(d.selectedMap)||(d.selectedMap={});for(var S=d.selectedMap,x=0;x<y;x++){var w=o[x],c=getSelectionKey(n,w);S[c]=!0,this._selectedDataIndicesMap[c]=n.getRawIndex(w)}}else if(g==="single"||g===!0){var A=o[y-1],c=getSelectionKey(n,A);d.selectedMap=(a={},a[c]=!0,a),this._selectedDataIndicesMap=(l={},l[c]=n.getRawIndex(A),l)}}},t.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var o=[];n.hasItemOption&&n.each(function(a){var l=n.getRawDataItem(a);l&&l.selected&&o.push(a)}),o.length>0&&this._innerSelect(n,o)}},t.registerClass=function(n){return ComponentModel$1.registerClass(n)},t.protoInitialize=function(){var n=t.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),t}(ComponentModel$1);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel$1);function autoSeriesName(r){var t=r.name;isNameSpecified(r)||(r.name=getSeriesAutoName(r)||t)}function getSeriesAutoName(r){var t=r.getRawData(),n=t.mapDimensionsAll("seriesName"),o=[];return each$f(n,function(a){var l=t.getDimensionInfo(a);l.displayName&&o.push(l.displayName)}),o.join(" ")}function dataTaskCount(r){return r.model.getRawData().count()}function dataTaskReset(r){var t=r.model;return t.setData(t.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(r,t){t.outputData&&r.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function wrapData(r,t){each$f(concatArray(r.CHANGABLE_METHODS,r.DOWNSAMPLE_METHODS),function(n){r.wrapMethod(n,curry$1(onDataChange,t))})}function onDataChange(r,t){var n=getCurrentTask(r);return n&&n.setOutputEnd((t||this).count()),t}function getCurrentTask(r){var t=(r.ecModel||{}).scheduler,n=t&&t.getPipeline(r.uid);if(n){var o=n.currentTask;if(o){var a=o.agentStubMap;a&&(o=a.get(r.uid))}return o}}const SeriesModel$1=SeriesModel;var ComponentView=function(){function r(){this.group=new Group$4,this.uid=getUID("viewComponent")}return r.prototype.init=function(t,n){},r.prototype.render=function(t,n,o,a){},r.prototype.dispose=function(t,n){},r.prototype.updateView=function(t,n,o,a){},r.prototype.updateLayout=function(t,n,o,a){},r.prototype.updateVisual=function(t,n,o,a){},r.prototype.toggleBlurSeries=function(t,n,o){},r.prototype.eachRendered=function(t){var n=this.group;n&&n.traverse(t)},r}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);const ComponentView$1=ComponentView;function createRenderPlanner(){var r=makeInner();return function(t){var n=r(t),o=t.pipelineContext,a=!!n.large,l=!!n.progressiveRender,d=n.large=!!(o&&o.large),g=n.progressiveRender=!!(o&&o.progressiveRender);return(a!==d||l!==g)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function r(){this.group=new Group$4,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return r.prototype.init=function(t,n){},r.prototype.render=function(t,n,o,a){},r.prototype.highlight=function(t,n,o,a){var l=t.getData(a&&a.dataType);l&&toggleHighlight(l,a,"emphasis")},r.prototype.downplay=function(t,n,o,a){var l=t.getData(a&&a.dataType);l&&toggleHighlight(l,a,"normal")},r.prototype.remove=function(t,n){this.group.removeAll()},r.prototype.dispose=function(t,n){},r.prototype.updateView=function(t,n,o,a){this.render(t,n,o,a)},r.prototype.updateLayout=function(t,n,o,a){this.render(t,n,o,a)},r.prototype.updateVisual=function(t,n,o,a){this.render(t,n,o,a)},r.prototype.eachRendered=function(t){traverseElements(this.group,t)},r.markUpdateMethod=function(t,n){inner$j(t).updateMethod=n},r.protoInitialize=function(){var t=r.prototype;t.type="chart"}(),r}();function elSetState(r,t,n){r&&isHighDownDispatcher(r)&&(t==="emphasis"?enterEmphasis:leaveEmphasis)(r,n)}function toggleHighlight(r,t,n){var o=queryDataIndex(r,t),a=t&&t.highlightKey!=null?getHighlightDigit(t.highlightKey):null;o!=null?each$f(normalizeToArray(o),function(l){elSetState(r.getItemGraphicEl(l),n,a)}):r.eachItemGraphicEl(function(l){elSetState(l,n,a)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(r){return renderPlanner(r.model)}function renderTaskReset(r){var t=r.model,n=r.ecModel,o=r.api,a=r.payload,l=t.pipelineContext.progressiveRender,d=r.view,g=a&&inner$j(a).updateMethod,y=l?"incrementalPrepareRender":g&&d[g]?g:"render";return y!=="render"&&d[y](t,n,o,a),progressMethodMap[y]}var progressMethodMap={incrementalPrepareRender:{progress:function(r,t){t.view.incrementalRender(r,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(r,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const ChartView$1=ChartView;var ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(r,t,n){var o,a=0,l=0,d=null,g,y,S,x;t=t||0;function w(){l=new Date().getTime(),d=null,r.apply(y,S||[])}var c=function(){for(var A=[],R=0;R<arguments.length;R++)A[R]=arguments[R];o=new Date().getTime(),y=this,S=A;var L=x||t,$=x||n;x=null,g=o-($?a:l)-L,clearTimeout(d),$?d=setTimeout(w,L):g>=0?w():d=setTimeout(w,-g),a=o};return c.clear=function(){d&&(clearTimeout(d),d=null)},c.debounceNextCall=function(A){x=A},c}function createOrUpdate(r,t,n,o){var a=r[t];if(a){var l=a[ORIGIN_METHOD]||a,d=a[THROTTLE_TYPE],g=a[RATE];if(g!==n||d!==o){if(n==null||!o)return r[t]=l;a=r[t]=throttle(l,n,o==="debounce"),a[ORIGIN_METHOD]=l,a[THROTTLE_TYPE]=o,a[RATE]=n}return a}}function clear$1(r,t){var n=r[t];n&&n[ORIGIN_METHOD]&&(n.clear&&n.clear(),r[t]=n[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(r,t){var n=r.visualStyleMapper||defaultStyleMappers[t];return n||(console.warn("Unknown style type '"+t+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(r,t){var n=r.visualDrawType||defaultColorKey[t];return n||(console.warn("Unknown style type '"+t+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){var n=r.getData(),o=r.visualStyleAccessPath||"itemStyle",a=r.getModel(o),l=getStyleMapper(r,o),d=l(a),g=a.getShallow("decal");g&&(n.setVisual("decal",g),g.dirty=!0);var y=getDefaultColorKey(r,o),S=d[y],x=isFunction(S)?S:null,w=d.fill==="auto"||d.stroke==="auto";if(!d[y]||x||w){var c=r.getColorFromPalette(r.name,null,t.getSeriesCount());d[y]||(d[y]=c,n.setVisual("colorFromPalette",!0)),d.fill=d.fill==="auto"||isFunction(d.fill)?c:d.fill,d.stroke=d.stroke==="auto"||isFunction(d.stroke)?c:d.stroke}if(n.setVisual("style",d),n.setVisual("drawType",y),!t.isSeriesFiltered(r)&&x)return n.setVisual("colorFromPalette",!1),{dataEach:function(A,R){var L=r.getDataParams(R),$=extend({},d);$[y]=x(L),A.setItemVisual(R,"style",$)}}}},sharedModel=new Model$1,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){if(!(r.ignoreStyleOnData||t.isSeriesFiltered(r))){var n=r.getData(),o=r.visualStyleAccessPath||"itemStyle",a=getStyleMapper(r,o),l=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(d,g){var y=d.getRawDataItem(g);if(y&&y[o]){sharedModel.option=y[o];var S=a(sharedModel),x=d.ensureUniqueItemVisual(g,"style");extend(x,S),sharedModel.option.decal&&(d.setItemVisual(g,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),l in S&&d.setItemVisual(g,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(r){var t=createHashMap();r.eachSeries(function(n){var o=n.getColorBy();if(!n.isColorBySeries()){var a=n.type+"-"+o,l=t.get(a);l||(l={},t.set(a,l)),inner$i(n).scope=l}}),r.eachSeries(function(n){if(!(n.isColorBySeries()||r.isSeriesFiltered(n))){var o=n.getRawData(),a={},l=n.getData(),d=inner$i(n).scope,g=n.visualStyleAccessPath||"itemStyle",y=getDefaultColorKey(n,g);l.each(function(S){var x=l.getRawIndex(S);a[x]=S}),o.each(function(S){var x=a[S],w=l.getItemVisual(x,"colorFromPalette");if(w){var c=l.ensureUniqueItemVisual(x,"style"),A=o.getName(S)||S+"",R=o.count();c[y]=n.getColorFromPalette(A,d,R)}})}})}},PI$5=Math.PI;function defaultLoading(r,t){t=t||{},defaults(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Group$4,o=new Rect$3({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(o);var a=new ZRText$1({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),l=new Rect$3({style:{fill:"none"},textContent:a,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});n.add(l);var d;return t.showSpinner&&(d=new Arc$1({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),d.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),d.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),n.add(d)),n.resize=function(){var g=a.getBoundingRect().width,y=t.showSpinner?t.spinnerRadius:0,S=(r.getWidth()-y*2-(t.showSpinner&&g?10:0)-g)/2-(t.showSpinner&&g?0:5+g/2)+(t.showSpinner?0:g/2)+(g?0:y),x=r.getHeight()/2;t.showSpinner&&d.setShape({cx:S,cy:x}),l.setShape({x:S-y,y:x-y,width:y*2,height:y*2}),o.setShape({x:0,y:0,width:r.getWidth(),height:r.getHeight()})},n.resize(),n}var Scheduler=function(){function r(t,n,o,a){this._stageTaskMap=createHashMap(),this.ecInstance=t,this.api=n,o=this._dataProcessorHandlers=o.slice(),a=this._visualHandlers=a.slice(),this._allHandlers=o.concat(a)}return r.prototype.restoreData=function(t,n){t.restoreData(n),this._stageTaskMap.each(function(o){var a=o.overallTask;a&&a.dirty()})},r.prototype.getPerformArgs=function(t,n){if(t.__pipeline){var o=this._pipelineMap.get(t.__pipeline.id),a=o.context,l=!n&&o.progressiveEnabled&&(!a||a.progressiveRender)&&t.__idxInPipeline>o.blockIndex,d=l?o.step:null,g=a&&a.modDataCount,y=g!=null?Math.ceil(g/d):null;return{step:d,modBy:y,modDataCount:g}}},r.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},r.prototype.updateStreamModes=function(t,n){var o=this._pipelineMap.get(t.uid),a=t.getData(),l=a.count(),d=o.progressiveEnabled&&n.incrementalPrepareRender&&l>=o.threshold,g=t.get("large")&&l>=t.get("largeThreshold"),y=t.get("progressiveChunkMode")==="mod"?l:null;t.pipelineContext=o.context={progressiveRender:d,modDataCount:y,large:g}},r.prototype.restorePipelines=function(t){var n=this,o=n._pipelineMap=createHashMap();t.eachSeries(function(a){var l=a.getProgressive(),d=a.uid;o.set(d,{id:d,head:null,tail:null,threshold:a.getProgressiveThreshold(),progressiveEnabled:l&&!(a.preventIncremental&&a.preventIncremental()),blockIndex:-1,step:Math.round(l||700),count:0}),n._pipe(a,a.dataTask)})},r.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,n=this.api.getModel(),o=this.api;each$f(this._allHandlers,function(a){var l=t.get(a.uid)||t.set(a.uid,{}),d="";assert(!(a.reset&&a.overallReset),d),a.reset&&this._createSeriesStageTask(a,l,n,o),a.overallReset&&this._createOverallStageTask(a,l,n,o)},this)},r.prototype.prepareView=function(t,n,o,a){var l=t.renderTask,d=l.context;d.model=n,d.ecModel=o,d.api=a,l.__block=!t.incrementalPrepareRender,this._pipe(n,l)},r.prototype.performDataProcessorTasks=function(t,n){this._performStageTasks(this._dataProcessorHandlers,t,n,{block:!0})},r.prototype.performVisualTasks=function(t,n,o){this._performStageTasks(this._visualHandlers,t,n,o)},r.prototype._performStageTasks=function(t,n,o,a){a=a||{};var l=!1,d=this;each$f(t,function(y,S){if(!(a.visualType&&a.visualType!==y.visualType)){var x=d._stageTaskMap.get(y.uid),w=x.seriesTaskMap,c=x.overallTask;if(c){var A,R=c.agentStubMap;R.each(function($){g(a,$)&&($.dirty(),A=!0)}),A&&c.dirty(),d.updatePayload(c,o);var L=d.getPerformArgs(c,a.block);R.each(function($){$.perform(L)}),c.perform(L)&&(l=!0)}else w&&w.each(function($,O){g(a,$)&&$.dirty();var z=d.getPerformArgs($,a.block);z.skip=!y.performRawSeries&&n.isSeriesFiltered($.context.model),d.updatePayload($,o),$.perform(z)&&(l=!0)})}});function g(y,S){return y.setDirty&&(!y.dirtyMap||y.dirtyMap.get(S.__pipeline.id))}this.unfinished=l||this.unfinished},r.prototype.performSeriesTasks=function(t){var n;t.eachSeries(function(o){n=o.dataTask.perform()||n}),this.unfinished=n||this.unfinished},r.prototype.plan=function(){this._pipelineMap.each(function(t){var n=t.tail;do{if(n.__block){t.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},r.prototype.updatePayload=function(t,n){n!=="remain"&&(t.context.payload=n)},r.prototype._createSeriesStageTask=function(t,n,o,a){var l=this,d=n.seriesTaskMap,g=n.seriesTaskMap=createHashMap(),y=t.seriesType,S=t.getTargetSeries;t.createOnAllSeries?o.eachRawSeries(x):y?o.eachRawSeriesByType(y,x):S&&S(o,a).each(x);function x(w){var c=w.uid,A=g.set(c,d&&d.get(c)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));A.context={model:w,ecModel:o,api:a,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:l},l._pipe(w,A)}},r.prototype._createOverallStageTask=function(t,n,o,a){var l=this,d=n.overallTask=n.overallTask||createTask({reset:overallTaskReset});d.context={ecModel:o,api:a,overallReset:t.overallReset,scheduler:l};var g=d.agentStubMap,y=d.agentStubMap=createHashMap(),S=t.seriesType,x=t.getTargetSeries,w=!0,c=!1,A="";assert(!t.createOnAllSeries,A),S?o.eachRawSeriesByType(S,R):x?x(o,a).each(R):(w=!1,each$f(o.getSeries(),R));function R(L){var $=L.uid,O=y.set($,g&&g.get($)||(c=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));O.context={model:L,overallProgress:w},O.agent=d,O.__block=w,l._pipe(L,O)}c&&d.dirty()},r.prototype._pipe=function(t,n){var o=t.uid,a=this._pipelineMap.get(o);!a.head&&(a.head=n),a.tail&&a.tail.pipe(n),a.tail=n,n.__idxInPipeline=a.count++,n.__pipeline=a},r.wrapStageHandler=function(t,n){return isFunction(t)&&(t={overallReset:t,seriesType:detectSeriseType(t)}),t.uid=getUID("stageHandler"),n&&(t.visualType=n),t},r}();function overallTaskReset(r){r.overallReset(r.ecModel,r.api,r.payload)}function stubReset(r){return r.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(r){return r.plan?r.plan(r.model,r.ecModel,r.api,r.payload):null}function seriesTaskReset(r){r.useClearVisual&&r.data.clearAllVisual();var t=r.resetDefines=normalizeToArray(r.reset(r.model,r.ecModel,r.api,r.payload));return t.length>1?map$1(t,function(n,o){return makeSeriesTaskProgress(o)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(r){return function(t,n){var o=n.data,a=n.resetDefines[r];if(a&&a.dataEach)for(var l=t.start;l<t.end;l++)a.dataEach(o,l);else a&&a.progress&&a.progress(t,o)}}function seriesTaskCount(r){return r.data.count()}function detectSeriseType(r){seriesType=null;try{r(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel$1);mockMethods(apiMock,ExtensionAPI$1);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(r){seriesType=r};ecModelMock.eachComponent=function(r){r.mainType==="series"&&r.subType&&(seriesType=r.subType)};function mockMethods(r,t){for(var n in t.prototype)r[n]=noop}const Scheduler$1=Scheduler;var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;const darkTheme=theme;var ECEventProcessor=function(){function r(){}return r.prototype.normalizeQuery=function(t){var n={},o={},a={};if(isString(t)){var l=parseClassType(t);n.mainType=l.main||null,n.subType=l.sub||null}else{var d=["Index","Name","Id"],g={name:1,dataIndex:1,dataType:1};each$f(t,function(y,S){for(var x=!1,w=0;w<d.length;w++){var c=d[w],A=S.lastIndexOf(c);if(A>0&&A===S.length-c.length){var R=S.slice(0,A);R!=="data"&&(n.mainType=R,n[c.toLowerCase()]=y,x=!0)}}g.hasOwnProperty(S)&&(o[S]=y,x=!0),x||(a[S]=y)})}return{cptQuery:n,dataQuery:o,otherQuery:a}},r.prototype.filter=function(t,n){var o=this.eventInfo;if(!o)return!0;var a=o.targetEl,l=o.packedEvent,d=o.model,g=o.view;if(!d||!g)return!0;var y=n.cptQuery,S=n.dataQuery;return x(y,d,"mainType")&&x(y,d,"subType")&&x(y,d,"index","componentIndex")&&x(y,d,"name")&&x(y,d,"id")&&x(S,l,"name")&&x(S,l,"dataIndex")&&x(S,l,"dataType")&&(!g.filterForExposedEvent||g.filterForExposedEvent(t,n.otherQuery,a,l));function x(w,c,A,R){return w[A]==null||c[R||A]===w[A]}},r.prototype.afterTrigger=function(){this.eventInfo=null},r}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){var n=r.getData();if(r.legendIcon&&n.setVisual("legendIcon",r.legendIcon),!r.hasSymbolVisual)return;for(var o={},a={},l=!1,d=0;d<SYMBOL_PROPS_WITH_CB.length;d++){var g=SYMBOL_PROPS_WITH_CB[d],y=r.get(g);isFunction(y)?(l=!0,a[g]=y):o[g]=y}if(o.symbol=o.symbol||r.defaultSymbol,n.setVisual(extend({legendIcon:r.legendIcon||o.symbol,symbolKeepAspect:r.get("symbolKeepAspect")},o)),t.isSeriesFiltered(r))return;var S=keys(a);function x(w,c){for(var A=r.getRawValue(c),R=r.getDataParams(c),L=0;L<S.length;L++){var $=S[L];w.setItemVisual(c,$,a[$](A,R))}}return{dataEach:l?x:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){if(!r.hasSymbolVisual||t.isSeriesFiltered(r))return;var n=r.getData();function o(a,l){for(var d=a.getItemModel(l),g=0;g<SYMBOL_PROPS.length;g++){var y=SYMBOL_PROPS[g],S=d.getShallow(y,!0);S!=null&&a.setItemVisual(l,y,S)}}return{dataEach:n.hasItemOption?o:null}}};function getItemVisualFromData(r,t,n){switch(n){case"color":var o=r.getItemVisual(t,"style");return o[r.getVisual("drawType")];case"opacity":return r.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getItemVisual(t,n)}}function getVisualFromData(r,t){switch(t){case"color":var n=r.getVisual("style");return n[r.getVisual("drawType")];case"opacity":return r.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getVisual(t)}}function setItemVisualFromData(r,t,n,o){switch(n){case"color":var a=r.ensureUniqueItemVisual(t,"style");a[r.getVisual("drawType")]=o,r.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":r.ensureUniqueItemVisual(t,"style").opacity=o;break;case"symbol":case"symbolSize":case"liftZ":r.setItemVisual(t,n,o);break}}function createLegacyDataSelectAction(r,t){function n(o,a){var l=[];return o.eachComponent({mainType:"series",subType:r,query:a},function(d){l.push(d.seriesIndex)}),l}each$f([[r+"ToggleSelect","toggleSelect"],[r+"Select","select"],[r+"UnSelect","unselect"]],function(o){t(o[0],function(a,l,d){a=extend({},a),d.dispatchAction(extend(a,{type:o[1],seriesIndex:n(l,a)}))})})}function handleSeriesLegacySelectEvents(r,t,n,o,a){var l=r+t;n.isSilent(l)||o.eachComponent({mainType:"series",subType:"pie"},function(d){for(var g=d.seriesIndex,y=d.option.selectedMap,S=a.selected,x=0;x<S.length;x++)if(S[x].seriesIndex===g){var w=d.getData(),c=queryDataIndex(w,a.fromActionPayload);n.trigger(l,{type:l,seriesId:d.id,name:isArray$1(c)?w.getName(c[0]):w.getName(c),selected:isString(y)?y:extend({},y)})}})}function handleLegacySelectEvents(r,t,n){r.on("selectchanged",function(o){var a=n.getModel();o.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",t,a,o),handleSeriesLegacySelectEvents("pie","selectchanged",t,a,o)):o.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",t,a,o),handleSeriesLegacySelectEvents("pie","selected",t,a,o)):o.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",t,a,o),handleSeriesLegacySelectEvents("pie","unselected",t,a,o))})}function findEventDispatcher(r,t,n){for(var o;r&&!(t(r)&&(o=r,n));)r=r.__hostTarget||r.parent;return o}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function r(){this._id="__ec_inner_"+wmUniqueIndex++}return r.prototype.get=function(t){return this._guard(t)[this._id]},r.prototype.set=function(t,n){var o=this._guard(t);return supportDefineProperty?Object.defineProperty(o,this._id,{value:n,enumerable:!1,configurable:!0}):o[this._id]=n,this},r.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},r.prototype.has=function(t){return!!this._guard(t)[this._id]},r.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},r}();const WeakMap$2=WeakMap$1;var Triangle=Path$1.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,t){var n=t.cx,o=t.cy,a=t.width/2,l=t.height/2;r.moveTo(n,o-l),r.lineTo(n+a,o+l),r.lineTo(n-a,o+l),r.closePath()}}),Diamond=Path$1.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,t){var n=t.cx,o=t.cy,a=t.width/2,l=t.height/2;r.moveTo(n,o-l),r.lineTo(n+a,o),r.lineTo(n,o+l),r.lineTo(n-a,o),r.closePath()}}),Pin=Path$1.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,t){var n=t.x,o=t.y,a=t.width/5*3,l=Math.max(a,t.height),d=a/2,g=d*d/(l-d),y=o-l+d+g,S=Math.asin(g/d),x=Math.cos(S)*d,w=Math.sin(S),c=Math.cos(S),A=d*.6,R=d*.7;r.moveTo(n-x,y+g),r.arc(n,y,d,Math.PI-S,Math.PI*2+S),r.bezierCurveTo(n+x-w*A,y+g+c*A,n,o-R,n,o),r.bezierCurveTo(n,o-R,n-x+w*A,y+g+c*A,n-x,y+g),r.closePath()}}),Arrow=Path$1.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,t){var n=t.height,o=t.width,a=t.x,l=t.y,d=o/3*2;r.moveTo(a,l),r.lineTo(a+d,l+n),r.lineTo(a,l+n/4*3),r.lineTo(a-d,l+n),r.lineTo(a,l),r.closePath()}}),symbolCtors={line:Line$3,rect:Rect$3,roundRect:Rect$3,square:Rect$3,circle:Circle$1,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(r,t,n,o,a){a.x1=r,a.y1=t+o/2,a.x2=r+n,a.y2=t+o/2},rect:function(r,t,n,o,a){a.x=r,a.y=t,a.width=n,a.height=o},roundRect:function(r,t,n,o,a){a.x=r,a.y=t,a.width=n,a.height=o,a.r=Math.min(n,o)/4},square:function(r,t,n,o,a){var l=Math.min(n,o);a.x=r,a.y=t,a.width=l,a.height=l},circle:function(r,t,n,o,a){a.cx=r+n/2,a.cy=t+o/2,a.r=Math.min(n,o)/2},diamond:function(r,t,n,o,a){a.cx=r+n/2,a.cy=t+o/2,a.width=n,a.height=o},pin:function(r,t,n,o,a){a.x=r+n/2,a.y=t+o/2,a.width=n,a.height=o},arrow:function(r,t,n,o,a){a.x=r+n/2,a.y=t+o/2,a.width=n,a.height=o},triangle:function(r,t,n,o,a){a.cx=r+n/2,a.cy=t+o/2,a.width=n,a.height=o}},symbolBuildProxies={};each$f(symbolCtors,function(r,t){symbolBuildProxies[t]=new r});var SymbolClz$1=Path$1.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(r,t,n){var o=calculateTextPosition(r,t,n),a=this.shape;return a&&a.symbolType==="pin"&&t.position==="inside"&&(o.y=n.y+n.height*.4),o},buildPath:function(r,t,n){var o=t.symbolType;if(o!=="none"){var a=symbolBuildProxies[o];a||(o="rect",a=symbolBuildProxies[o]),symbolShapeMakers[o](t.x,t.y,t.width,t.height,a.shape),a.buildPath(r,a.shape,n)}}});function symbolPathSetColor(r,t){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=r,n.fill=t||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=r:n.fill=r,this.markRedraw()}}function createSymbol$1(r,t,n,o,a,l,d){var g=r.indexOf("empty")===0;g&&(r=r.substr(5,1).toLowerCase()+r.substr(6));var y;return r.indexOf("image://")===0?y=makeImage(r.slice(8),new BoundingRect$1(t,n,o,a),d?"center":"cover"):r.indexOf("path://")===0?y=makePath(r.slice(7),{},new BoundingRect$1(t,n,o,a),d?"center":"cover"):y=new SymbolClz$1({shape:{symbolType:r,x:t,y:n,width:o,height:a}}),y.__isEmptyBrush=g,y.setColor=symbolPathSetColor,l&&y.setColor(l),y}function normalizeSymbolSize(r){return isArray$1(r)||(r=[+r,+r]),[r[0]||0,r[1]||0]}function normalizeSymbolOffset(r,t){if(r!=null)return isArray$1(r)||(r=[r,r]),[parsePercent(r[0],t[0])||0,parsePercent(retrieve2(r[1],r[0]),t[1])||0]}function isSafeNum(r){return isFinite(r)}function createLinearGradient(r,t,n){var o=t.x==null?0:t.x,a=t.x2==null?1:t.x2,l=t.y==null?0:t.y,d=t.y2==null?0:t.y2;t.global||(o=o*n.width+n.x,a=a*n.width+n.x,l=l*n.height+n.y,d=d*n.height+n.y),o=isSafeNum(o)?o:0,a=isSafeNum(a)?a:1,l=isSafeNum(l)?l:0,d=isSafeNum(d)?d:0;var g=r.createLinearGradient(o,l,a,d);return g}function createRadialGradient(r,t,n){var o=n.width,a=n.height,l=Math.min(o,a),d=t.x==null?.5:t.x,g=t.y==null?.5:t.y,y=t.r==null?.5:t.r;t.global||(d=d*o+n.x,g=g*a+n.y,y=y*l),d=isSafeNum(d)?d:.5,g=isSafeNum(g)?g:.5,y=y>=0&&isSafeNum(y)?y:.5;var S=r.createRadialGradient(d,g,0,d,g,y);return S}function getCanvasGradient(r,t,n){for(var o=t.type==="radial"?createRadialGradient(r,t,n):createLinearGradient(r,t,n),a=t.colorStops,l=0;l<a.length;l++)o.addColorStop(a[l].offset,a[l].color);return o}function isClipPathChanged(r,t){if(r===t||!r&&!t)return!1;if(!r||!t||r.length!==t.length)return!0;for(var n=0;n<r.length;n++)if(r[n]!==t[n])return!0;return!1}function parseInt10(r){return parseInt(r,10)}function getSize$1(r,t,n){var o=["width","height"][t],a=["clientWidth","clientHeight"][t],l=["paddingLeft","paddingTop"][t],d=["paddingRight","paddingBottom"][t];if(n[o]!=null&&n[o]!=="auto")return parseFloat(n[o]);var g=document.defaultView.getComputedStyle(r);return(r[a]||parseInt10(g[o])||parseInt10(r.style[o]))-(parseInt10(g[l])||0)-(parseInt10(g[d])||0)|0}function normalizeLineDash(r,t){return!r||r==="solid"||!(t>0)?null:r==="dashed"?[4*t,2*t]:r==="dotted"?[t]:isNumber(r)?[r]:isArray$1(r)?r:null}function getLineDash(r){var t=r.style,n=t.lineDash&&t.lineWidth>0&&normalizeLineDash(t.lineDash,t.lineWidth),o=t.lineDashOffset;if(n){var a=t.strokeNoScale&&r.getLineScale?r.getLineScale():1;a&&a!==1&&(n=map$1(n,function(l){return l/a}),o/=a)}return[n,o]}var pathProxyForDraw=new PathProxy$1(!0);function styleHasStroke(r){var t=r.stroke;return!(t==null||t==="none"||!(r.lineWidth>0))}function isValidStrokeFillStyle(r){return typeof r=="string"&&r!=="none"}function styleHasFill(r){var t=r.fill;return t!=null&&t!=="none"}function doFillPath(r,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var n=r.globalAlpha;r.globalAlpha=t.fillOpacity*t.opacity,r.fill(),r.globalAlpha=n}else r.fill()}function doStrokePath(r,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var n=r.globalAlpha;r.globalAlpha=t.strokeOpacity*t.opacity,r.stroke(),r.globalAlpha=n}else r.stroke()}function createCanvasPattern(r,t,n){var o=createOrUpdateImage(t.image,t.__image,n);if(isImageReady(o)){var a=r.createPattern(o,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&a&&a.setTransform){var l=new DOMMatrix;l.translateSelf(t.x||0,t.y||0),l.rotateSelf(0,0,(t.rotation||0)*RADIAN_TO_DEGREE),l.scaleSelf(t.scaleX||1,t.scaleY||1),a.setTransform(l)}return a}}function brushPath(r,t,n,o){var a,l=styleHasStroke(n),d=styleHasFill(n),g=n.strokePercent,y=g<1,S=!t.path;(!t.silent||y)&&S&&t.createPathProxy();var x=t.path||pathProxyForDraw,w=t.__dirty;if(!o){var c=n.fill,A=n.stroke,R=d&&!!c.colorStops,L=l&&!!A.colorStops,$=d&&!!c.image,O=l&&!!A.image,z=void 0,V=void 0,j=void 0,K=void 0,Z=void 0;(R||L)&&(Z=t.getBoundingRect()),R&&(z=w?getCanvasGradient(r,c,Z):t.__canvasFillGradient,t.__canvasFillGradient=z),L&&(V=w?getCanvasGradient(r,A,Z):t.__canvasStrokeGradient,t.__canvasStrokeGradient=V),$&&(j=w||!t.__canvasFillPattern?createCanvasPattern(r,c,t):t.__canvasFillPattern,t.__canvasFillPattern=j),O&&(K=w||!t.__canvasStrokePattern?createCanvasPattern(r,A,t):t.__canvasStrokePattern,t.__canvasStrokePattern=j),R?r.fillStyle=z:$&&(j?r.fillStyle=j:d=!1),L?r.strokeStyle=V:O&&(K?r.strokeStyle=K:l=!1)}var q=t.getGlobalScale();x.setScale(q[0],q[1],t.segmentIgnoreThreshold);var ie,te;r.setLineDash&&n.lineDash&&(a=getLineDash(t),ie=a[0],te=a[1]);var oe=!0;(S||w&SHAPE_CHANGED_BIT)&&(x.setDPR(r.dpr),y?x.setContext(null):(x.setContext(r),oe=!1),x.reset(),t.buildPath(x,t.shape,o),x.toStatic(),t.pathUpdated()),oe&&x.rebuildPath(r,y?g:1),ie&&(r.setLineDash(ie),r.lineDashOffset=te),o||(n.strokeFirst?(l&&doStrokePath(r,n),d&&doFillPath(r,n)):(d&&doFillPath(r,n),l&&doStrokePath(r,n))),ie&&r.setLineDash([])}function brushImage(r,t,n){var o=t.__image=createOrUpdateImage(n.image,t.__image,t,t.onload);if(!(!o||!isImageReady(o))){var a=n.x||0,l=n.y||0,d=t.getWidth(),g=t.getHeight(),y=o.width/o.height;if(d==null&&g!=null?d=g*y:g==null&&d!=null?g=d/y:d==null&&g==null&&(d=o.width,g=o.height),n.sWidth&&n.sHeight){var S=n.sx||0,x=n.sy||0;r.drawImage(o,S,x,n.sWidth,n.sHeight,a,l,d,g)}else if(n.sx&&n.sy){var S=n.sx,x=n.sy,w=d-S,c=g-x;r.drawImage(o,S,x,w,c,a,l,d,g)}else r.drawImage(o,a,l,d,g)}}function brushText(r,t,n){var o,a=n.text;if(a!=null&&(a+=""),a){r.font=n.font||DEFAULT_FONT,r.textAlign=n.textAlign,r.textBaseline=n.textBaseline;var l=void 0,d=void 0;r.setLineDash&&n.lineDash&&(o=getLineDash(t),l=o[0],d=o[1]),l&&(r.setLineDash(l),r.lineDashOffset=d),n.strokeFirst?(styleHasStroke(n)&&r.strokeText(a,n.x,n.y),styleHasFill(n)&&r.fillText(a,n.x,n.y)):(styleHasFill(n)&&r.fillText(a,n.x,n.y),styleHasStroke(n)&&r.strokeText(a,n.x,n.y)),l&&r.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(r,t,n,o,a){var l=!1;if(!o&&(n=n||{},t===n))return!1;if(o||t.opacity!==n.opacity){flushPathDrawn(r,a),l=!0;var d=Math.max(Math.min(t.opacity,1),0);r.globalAlpha=isNaN(d)?DEFAULT_COMMON_STYLE.opacity:d}(o||t.blend!==n.blend)&&(l||(flushPathDrawn(r,a),l=!0),r.globalCompositeOperation=t.blend||DEFAULT_COMMON_STYLE.blend);for(var g=0;g<SHADOW_NUMBER_PROPS.length;g++){var y=SHADOW_NUMBER_PROPS[g];(o||t[y]!==n[y])&&(l||(flushPathDrawn(r,a),l=!0),r[y]=r.dpr*(t[y]||0))}return(o||t.shadowColor!==n.shadowColor)&&(l||(flushPathDrawn(r,a),l=!0),r.shadowColor=t.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),l}function bindPathAndTextCommonStyle(r,t,n,o,a){var l=getStyle(t,a.inHover),d=o?null:n&&getStyle(n,a.inHover)||{};if(l===d)return!1;var g=bindCommonProps(r,l,d,o,a);if((o||l.fill!==d.fill)&&(g||(flushPathDrawn(r,a),g=!0),isValidStrokeFillStyle(l.fill)&&(r.fillStyle=l.fill)),(o||l.stroke!==d.stroke)&&(g||(flushPathDrawn(r,a),g=!0),isValidStrokeFillStyle(l.stroke)&&(r.strokeStyle=l.stroke)),(o||l.opacity!==d.opacity)&&(g||(flushPathDrawn(r,a),g=!0),r.globalAlpha=l.opacity==null?1:l.opacity),t.hasStroke()){var y=l.lineWidth,S=y/(l.strokeNoScale&&t.getLineScale?t.getLineScale():1);r.lineWidth!==S&&(g||(flushPathDrawn(r,a),g=!0),r.lineWidth=S)}for(var x=0;x<STROKE_PROPS.length;x++){var w=STROKE_PROPS[x],c=w[0];(o||l[c]!==d[c])&&(g||(flushPathDrawn(r,a),g=!0),r[c]=l[c]||w[1])}return g}function bindImageStyle(r,t,n,o,a){return bindCommonProps(r,getStyle(t,a.inHover),n&&getStyle(n,a.inHover),o,a)}function setContextTransform(r,t){var n=t.transform,o=r.dpr||1;n?r.setTransform(o*n[0],o*n[1],o*n[2],o*n[3],o*n[4],o*n[5]):r.setTransform(o,0,0,o,0,0)}function updateClipStatus(r,t,n){for(var o=!1,a=0;a<r.length;a++){var l=r[a];o=o||l.isZeroArea(),setContextTransform(t,l),t.beginPath(),l.buildPath(t,l.shape),t.clip()}n.allClipped=o}function isTransformChanged(r,t){return r&&t?r[0]!==t[0]||r[1]!==t[1]||r[2]!==t[2]||r[3]!==t[3]||r[4]!==t[4]||r[5]!==t[5]:!(!r&&!t)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(r){var t=styleHasFill(r),n=styleHasStroke(r);return!(r.lineDash||!(+t^+n)||t&&typeof r.fill!="string"||n&&typeof r.stroke!="string"||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1)}function flushPathDrawn(r,t){t.batchFill&&r.fill(),t.batchStroke&&r.stroke(),t.batchFill="",t.batchStroke=""}function getStyle(r,t){return t&&r.__hoverStyle||r.style}function brushSingle(r,t){brush$1(r,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(r,t,n,o){var a=t.transform;if(!t.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){t.__dirty&=~REDRAW_BIT,t.__isRendered=!1;return}var l=t.__clipPaths,d=n.prevElClipPaths,g=!1,y=!1;if((!d||isClipPathChanged(l,d))&&(d&&d.length&&(flushPathDrawn(r,n),r.restore(),y=g=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),l&&l.length&&(flushPathDrawn(r,n),r.save(),updateClipStatus(l,r,n),g=!0),n.prevElClipPaths=l),n.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var S=n.prevEl;S||(y=g=!0);var x=t instanceof Path$1&&t.autoBatch&&canPathBatch(t.style);g||isTransformChanged(a,S.transform)?(flushPathDrawn(r,n),setContextTransform(r,t)):x||flushPathDrawn(r,n);var w=getStyle(t,n.inHover);t instanceof Path$1?(n.lastDrawType!==DRAW_TYPE_PATH&&(y=!0,n.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(r,t,S,y,n),(!x||!n.batchFill&&!n.batchStroke)&&r.beginPath(),brushPath(r,t,w,x),x&&(n.batchFill=w.fill||"",n.batchStroke=w.stroke||"")):t instanceof TSpan$1?(n.lastDrawType!==DRAW_TYPE_TEXT&&(y=!0,n.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(r,t,S,y,n),brushText(r,t,w)):t instanceof ZRImage$1?(n.lastDrawType!==DRAW_TYPE_IMAGE&&(y=!0,n.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(r,t,S,y,n),brushImage(r,t,w)):t.getTemporalDisplayables&&(n.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(y=!0,n.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(r,t,n)),x&&o&&flushPathDrawn(r,n),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),n.prevEl=t,t.__dirty=0,t.__isRendered=!0}function brushIncremental(r,t,n){var o=t.getDisplayables(),a=t.getTemporalDisplayables();r.save();var l={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},d,g;for(d=t.getCursor(),g=o.length;d<g;d++){var y=o[d];y.beforeBrush&&y.beforeBrush(),y.innerBeforeBrush(),brush$1(r,y,l,d===g-1),y.innerAfterBrush(),y.afterBrush&&y.afterBrush(),l.prevEl=y}for(var S=0,x=a.length;S<x;S++){var y=a[S];y.beforeBrush&&y.beforeBrush(),y.innerBeforeBrush(),brush$1(r,y,l,S===x-1),y.innerAfterBrush(),y.afterBrush&&y.afterBrush(),l.prevEl=y}t.clearTemporalDisplayables(),t.notClear=!0,r.restore()}var decalMap=new WeakMap$2,decalCache=new LRU$1(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(r,t){if(r==="none")return null;var n=t.getDevicePixelRatio(),o=t.getZr(),a=o.painter.type==="svg";r.dirty&&decalMap.delete(r);var l=decalMap.get(r);if(l)return l;var d=defaults(r,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});d.backgroundColor==="none"&&(d.backgroundColor=null);var g={repeat:"repeat"};return y(g),g.rotation=d.rotation,g.scaleX=g.scaleY=a?1:1/n,decalMap.set(r,g),r.dirty=!1,g;function y(S){for(var x=[n],w=!0,c=0;c<decalKeys.length;++c){var A=d[decalKeys[c]];if(A!=null&&!isArray$1(A)&&!isString(A)&&!isNumber(A)&&typeof A!="boolean"){w=!1;break}x.push(A)}var R;if(w){R=x.join(",")+(a?"-svg":"");var L=decalCache.get(R);L&&(a?S.svgElement=L:S.image=L)}var $=normalizeDashArrayX(d.dashArrayX),O=normalizeDashArrayY(d.dashArrayY),z=normalizeSymbolArray(d.symbol),V=getLineBlockLengthX($),j=getLineBlockLengthY(O),K=!a&&platformApi.createCanvas(),Z=a&&{tag:"g",attrs:{},key:"dcl",children:[]},q=te(),ie;K&&(K.width=q.width*n,K.height=q.height*n,ie=K.getContext("2d")),oe(),w&&decalCache.put(R,K||Z),S.image=K,S.svgElement=Z,S.svgWidth=q.width,S.svgHeight=q.height;function te(){for(var re=1,he=0,_e=V.length;he<_e;++he)re=getLeastCommonMultiple(re,V[he]);for(var me=1,he=0,_e=z.length;he<_e;++he)me=getLeastCommonMultiple(me,z[he].length);re*=me;var be=j*V.length*z.length;return{width:Math.max(1,Math.min(re,d.maxTileWidth)),height:Math.max(1,Math.min(be,d.maxTileHeight))}}function oe(){ie&&(ie.clearRect(0,0,K.width,K.height),d.backgroundColor&&(ie.fillStyle=d.backgroundColor,ie.fillRect(0,0,K.width,K.height)));for(var re=0,he=0;he<O.length;++he)re+=O[he];if(re<=0)return;for(var _e=-j,me=0,be=0,Q=0;_e<q.height;){if(me%2===0){for(var Ne=be/2%z.length,Ee=0,Ge=0,it=0;Ee<q.width*2;){for(var Te=0,he=0;he<$[Q].length;++he)Te+=$[Q][he];if(Te<=0)break;if(Ge%2===0){var Ke=(1-d.symbolSize)*.5,Tt=Ee+$[Q][Ge]*Ke,Lt=_e+O[me]*Ke,Qt=$[Q][Ge]*d.symbolSize,Xe=O[me]*d.symbolSize,Be=it/2%z[Ne].length;ue(Tt,Lt,Qt,Xe,z[Ne][Be])}Ee+=$[Q][Ge],++it,++Ge,Ge===$[Q].length&&(Ge=0)}++Q,Q===$.length&&(Q=0)}_e+=O[me],++be,++me,me===O.length&&(me=0)}function ue(Dt,Rt,Bt,Se,Ye){var $e=a?1:n,st=createSymbol$1(Ye,Dt*$e,Rt*$e,Bt*$e,Se*$e,d.color,d.symbolKeepAspect);if(a){var et=o.painter.renderOneToVNode(st);et&&Z.children.push(et)}else brushSingle(ie,st)}}}}function normalizeSymbolArray(r){if(!r||r.length===0)return[["rect"]];if(isString(r))return[[r]];for(var t=!0,n=0;n<r.length;++n)if(!isString(r[n])){t=!1;break}if(t)return normalizeSymbolArray([r]);for(var o=[],n=0;n<r.length;++n)isString(r[n])?o.push([r[n]]):o.push(r[n]);return o}function normalizeDashArrayX(r){if(!r||r.length===0)return[[0,0]];if(isNumber(r)){var t=Math.ceil(r);return[[t,t]]}for(var n=!0,o=0;o<r.length;++o)if(!isNumber(r[o])){n=!1;break}if(n)return normalizeDashArrayX([r]);for(var a=[],o=0;o<r.length;++o)if(isNumber(r[o])){var t=Math.ceil(r[o]);a.push([t,t])}else{var t=map$1(r[o],function(g){return Math.ceil(g)});t.length%2===1?a.push(t.concat(t)):a.push(t)}return a}function normalizeDashArrayY(r){if(!r||typeof r=="object"&&r.length===0)return[0,0];if(isNumber(r)){var t=Math.ceil(r);return[t,t]}var n=map$1(r,function(o){return Math.ceil(o)});return r.length%2?n.concat(n):n}function getLineBlockLengthX(r){return map$1(r,function(t){return getLineBlockLengthY(t)})}function getLineBlockLengthY(r){for(var t=0,n=0;n<r.length;++n)t+=r[n];return r.length%2===1?t*2:t}function decalVisual(r,t){r.eachRawSeries(function(n){if(!r.isSeriesFiltered(n)){var o=n.getData();o.hasItemVisual()&&o.each(function(d){var g=o.getItemVisual(d,"decal");if(g){var y=o.ensureUniqueItemVisual(d,"style");y.decal=createOrUpdatePatternFromDecal(g,t)}});var a=o.getVisual("decal");if(a){var l=o.getVisual("style");l.decal=createOrUpdatePatternFromDecal(a,t)}}})}var lifecycle=new Eventful$1;const lifecycle$1=lifecycle;var implsStore={};function registerImpl(r,t){implsStore[r]=t}function getImpl(r){return implsStore[r]}var version="5.4.3",dependencies={zrender:"5.4.4"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(r){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,r,t)}}function createRegisterEventWithLowercaseMessageCenter(r){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return toLowercaseNameAndCallEventful(this,r,t)}}function toLowercaseNameAndCallEventful(r,t,n){return n[0]=n[0]&&n[0].toLowerCase(),Eventful$1.prototype[t].apply(r,n)}var MessageCenter=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Eventful$1),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this,new ECEventProcessor)||this;l._chartsViews=[],l._chartsMap={},l._componentsViews=[],l._componentsMap={},l._pendingActions=[],a=a||{},isString(o)&&(o=themeStorage[o]),l._dom=n;var d="canvas",g="auto",y=!1,S=l._zr=init$2(n,{renderer:a.renderer||d,devicePixelRatio:a.devicePixelRatio,width:a.width,height:a.height,ssr:a.ssr,useDirtyRect:retrieve2(a.useDirtyRect,y),useCoarsePointer:retrieve2(a.useCoarsePointer,g),pointerSize:a.pointerSize});l._ssr=a.ssr,l._throttledZrFlush=throttle(bind$1(S.flush,S),17),o=clone$4(o),o&&globalBackwardCompat(o,!0),l._theme=o,l._locale=createLocaleObject(a.locale||SYSTEM_LANG),l._coordSysMgr=new CoordinateSystem;var x=l._api=createExtensionAPI(l);function w(c,A){return c.__prio-A.__prio}return sort$2(visualFuncs,w),sort$2(dataProcessorFuncs,w),l._scheduler=new Scheduler$1(l,x,dataProcessorFuncs,visualFuncs),l._messageCenter=new MessageCenter,l._initEvents(),l.resize=bind$1(l.resize,l),S.animation.on("frame",l._onframe,l),bindRenderedEvent(S,l),bindMouseEvent(S,l),setAsPrimitive(l),l}return t.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var n=this._scheduler;if(this[PENDING_UPDATE]){var o=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(y){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,y}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}else if(n.unfinished){var a=TEST_FRAME_REMAIN_TIME,l=this._model,d=this._api;n.unfinished=!1;do{var g=+new Date;n.performSeriesTasks(l),n.performDataProcessorTasks(l),updateStreamModes(this,l),n.performVisualTasks(l),renderSeries(this,this._model,d,"remain",{}),a-=+new Date-g}while(a>0&&n.unfinished);n.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(n,o,a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var l,d,g;if(isObject$3(o)&&(a=o.lazyUpdate,l=o.silent,d=o.replaceMerge,g=o.transition,o=o.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||o){var y=new OptionManager$1(this._api),S=this._theme,x=this._model=new GlobalModel$1;x.scheduler=this._scheduler,x.ssr=this._ssr,x.init(null,null,null,S,this._locale,y)}this._model.setOption(n,{replaceMerge:d},optionPreprocessorFuncs);var w={seriesTransition:g,optionChanged:!0};if(a)this[PENDING_UPDATE]={silent:l,updateParams:w},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,w)}catch(c){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,c}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env$1.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},t.prototype.renderToCanvas=function(n){n=n||{};var o=this._zr.painter;return o.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(n){n=n||{};var o=this._zr.painter;return o.renderToString({useViewBox:n.useViewBox})},t.prototype.getSvgDataURL=function(){if(env$1.svgSupported){var n=this._zr,o=n.storage.getDisplayList();return each$f(o,function(a){a.stopAnimation(null,!0)}),n.painter.toDataURL()}},t.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var o=n.excludeComponents,a=this._model,l=[],d=this;each$f(o,function(y){a.eachComponent({mainType:y},function(S){var x=d._componentsMap[S.__viewId];x.group.ignore||(l.push(x),x.group.ignore=!0)})});var g=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return each$f(l,function(y){y.group.ignore=!1}),g},t.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var o=n.type==="svg",a=this.group,l=Math.min,d=Math.max,g=1/0;if(connectedGroups[a]){var y=g,S=g,x=-g,w=-g,c=[],A=n&&n.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(V,j){if(V.group===a){var K=o?V.getZr().painter.getSvgDom().innerHTML:V.renderToCanvas(clone$4(n)),Z=V.getDom().getBoundingClientRect();y=l(Z.left,y),S=l(Z.top,S),x=d(Z.right,x),w=d(Z.bottom,w),c.push({dom:K,left:Z.left,top:Z.top})}}),y*=A,S*=A,x*=A,w*=A;var R=x-y,L=w-S,$=platformApi.createCanvas(),O=init$2($,{renderer:o?"svg":"canvas"});if(O.resize({width:R,height:L}),o){var z="";return each$f(c,function(V){var j=V.left-y,K=V.top-S;z+='<g transform="translate('+j+","+K+')">'+V.dom+"</g>"}),O.painter.getSvgRoot().innerHTML=z,n.connectedBackgroundColor&&O.painter.setBackgroundColor(n.connectedBackgroundColor),O.refreshImmediately(),O.painter.toDataURL()}else return n.connectedBackgroundColor&&O.add(new Rect$3({shape:{x:0,y:0,width:R,height:L},style:{fill:n.connectedBackgroundColor}})),each$f(c,function(V){var j=new ZRImage$1({style:{x:V.left*A-y,y:V.top*A-S,image:V.dom}});O.add(j)}),O.refreshImmediately(),$.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},t.prototype.convertToPixel=function(n,o){return doConvertPixel(this,"convertToPixel",n,o)},t.prototype.convertFromPixel=function(n,o){return doConvertPixel(this,"convertFromPixel",n,o)},t.prototype.containPixel=function(n,o){if(this._disposed){this.id;return}var a=this._model,l,d=parseFinder$1(a,n);return each$f(d,function(g,y){y.indexOf("Models")>=0&&each$f(g,function(S){var x=S.coordinateSystem;if(x&&x.containPoint)l=l||!!x.containPoint(o);else if(y==="seriesModels"){var w=this._chartsMap[S.__viewId];w&&w.containPoint&&(l=l||w.containPoint(o,S))}},this)},this),!!l},t.prototype.getVisual=function(n,o){var a=this._model,l=parseFinder$1(a,n,{defaultMainType:"series"}),d=l.seriesModel,g=d.getData(),y=l.hasOwnProperty("dataIndexInside")?l.dataIndexInside:l.hasOwnProperty("dataIndex")?g.indexOfRawIndex(l.dataIndex):null;return y!=null?getItemVisualFromData(g,y,o):getVisualFromData(g,o)},t.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},t.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},t.prototype._initEvents=function(){var n=this;each$f(MOUSE_EVENT_NAMES,function(o){var a=function(l){var d=n.getModel(),g=l.target,y,S=o==="globalout";if(S?y={}:g&&findEventDispatcher(g,function(R){var L=getECData(R);if(L&&L.dataIndex!=null){var $=L.dataModel||d.getSeriesByIndex(L.seriesIndex);return y=$&&$.getDataParams(L.dataIndex,L.dataType,g)||{},!0}else if(L.eventData)return y=extend({},L.eventData),!0},!0),y){var x=y.componentType,w=y.componentIndex;(x==="markLine"||x==="markPoint"||x==="markArea")&&(x="series",w=y.seriesIndex);var c=x&&w!=null&&d.getComponent(x,w),A=c&&n[c.mainType==="series"?"_chartsMap":"_componentsMap"][c.__viewId];y.event=l,y.type=o,n._$eventProcessor.eventInfo={targetEl:g,packedEvent:y,model:c,view:A},n.trigger(o,y)}};a.zrEventfulCallAtLast=!0,n._zr.on(o,a,n)}),each$f(eventActionMap,function(o,a){n._messageCenter.on(a,function(l){this.trigger(a,l)},n)}),each$f(["selectchanged"],function(o){n._messageCenter.on(o,function(a){this.trigger(o,a)},n)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var o=this,a=o._api,l=o._model;each$f(o._componentsViews,function(d){d.dispose(l,a)}),each$f(o._chartsViews,function(d){d.dispose(l,a)}),o._zr.dispose(),o._dom=o._model=o._chartsMap=o._componentsMap=o._chartsViews=o._componentsViews=o._scheduler=o._api=o._zr=o._throttledZrFlush=o._theme=o._coordSysMgr=o._messageCenter=null,delete instances[o.id]},t.prototype.resize=function(n){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(n);var o=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!o){var a=o.resetOption("media"),l=n&&n.silent;this[PENDING_UPDATE]&&(l==null&&(l=this[PENDING_UPDATE].silent),a=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{a&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},n&&n.animation)})}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,d}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},t.prototype.showLoading=function(n,o){if(this._disposed){this.id;return}if(isObject$3(n)&&(o=n,n=""),n=n||"default",this.hideLoading(),!!loadingEffects[n]){var a=loadingEffects[n](this._api,o),l=this._zr;this._loadingFX=a,l.add(a)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(n){var o=extend({},n);return o.type=eventActionMap[n.type],o},t.prototype.dispatchAction=function(n,o){if(this._disposed){this.id;return}if(isObject$3(o)||(o={silent:!!o}),!!actions[n.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(n);return}var a=o.silent;doDispatchAction.call(this,n,a);var l=o.flush;l?this._zr.flush():l!==!1&&env$1.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,a),triggerUpdatedEvent.call(this,a)}},t.prototype.updateLabelLayout=function(){lifecycle$1.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(n){if(this._disposed){this.id;return}var o=n.seriesIndex,a=this.getModel(),l=a.getSeriesByIndex(o);l.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){prepare=function(w){var c=w._scheduler;c.restorePipelines(w._model),c.prepareStageTasks(),prepareView(w,!0),prepareView(w,!1),c.plan()},prepareView=function(w,c){for(var A=w._model,R=w._scheduler,L=c?w._componentsViews:w._chartsViews,$=c?w._componentsMap:w._chartsMap,O=w._zr,z=w._api,V=0;V<L.length;V++)L[V].__alive=!1;c?A.eachComponent(function(Z,q){Z!=="series"&&j(q)}):A.eachSeries(j);function j(Z){var q=Z.__requireNewView;Z.__requireNewView=!1;var ie="_ec_"+Z.id+"_"+Z.type,te=!q&&$[ie];if(!te){var oe=parseClassType(Z.type),re=c?ComponentView$1.getClass(oe.main,oe.sub):ChartView$1.getClass(oe.sub);te=new re,te.init(A,z),$[ie]=te,L.push(te),O.add(te.group)}Z.__viewId=te.__id=ie,te.__alive=!0,te.__model=Z,te.group.__ecComponentInfo={mainType:Z.mainType,index:Z.componentIndex},!c&&R.prepareView(te,Z,A,z)}for(var V=0;V<L.length;){var K=L[V];K.__alive?V++:(!c&&K.renderTask.dispose(),O.remove(K.group),K.dispose(A,z),L.splice(V,1),$[K.__id]===K&&delete $[K.__id],K.__id=K.group.__ecComponentInfo=null)}},updateDirectly=function(w,c,A,R,L){var $=w._model;if($.setUpdatePayload(A),!R){each$f([].concat(w._componentsViews).concat(w._chartsViews),K);return}var O={};O[R+"Id"]=A[R+"Id"],O[R+"Index"]=A[R+"Index"],O[R+"Name"]=A[R+"Name"];var z={mainType:R,query:O};L&&(z.subType=L);var V=A.excludeSeriesId,j;V!=null&&(j=createHashMap(),each$f(normalizeToArray(V),function(Z){var q=convertOptionIdName(Z,null);q!=null&&j.set(q,!0)})),$&&$.eachComponent(z,function(Z){var q=j&&j.get(Z.id)!=null;if(!q)if(isHighDownPayload(A))if(Z instanceof SeriesModel$1)A.type===HIGHLIGHT_ACTION_TYPE&&!A.notBlur&&!Z.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(Z,A,w._api);else{var ie=findComponentHighDownDispatchers(Z.mainType,Z.componentIndex,A.name,w._api),te=ie.focusSelf,oe=ie.dispatchers;A.type===HIGHLIGHT_ACTION_TYPE&&te&&!A.notBlur&&blurComponent(Z.mainType,Z.componentIndex,w._api),oe&&each$f(oe,function(re){A.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(re):leaveEmphasis(re)})}else isSelectChangePayload(A)&&Z instanceof SeriesModel$1&&(toggleSelectionFromPayload(Z,A,w._api),updateSeriesElementSelection(Z),markStatusToUpdate(w))},w),$&&$.eachComponent(z,function(Z){var q=j&&j.get(Z.id)!=null;q||K(w[R==="series"?"_chartsMap":"_componentsMap"][Z.__viewId])},w);function K(Z){Z&&Z.__alive&&Z[c]&&Z[c](Z.__model,$,w._api,A)}},updateMethods={prepareAndUpdate:function(w){prepare(this),updateMethods.update.call(this,w,{optionChanged:w.newOption!=null})},update:function(w,c){var A=this._model,R=this._api,L=this._zr,$=this._coordSysMgr,O=this._scheduler;if(A){A.setUpdatePayload(w),O.restoreData(A,w),O.performSeriesTasks(A),$.create(A,R),O.performDataProcessorTasks(A,w),updateStreamModes(this,A),$.update(A,R),n(A),O.performVisualTasks(A,w),render(this,A,R,w,c);var z=A.get("backgroundColor")||"transparent",V=A.get("darkMode");L.setBackgroundColor(z),V!=null&&V!=="auto"&&L.setDarkMode(V),lifecycle$1.trigger("afterupdate",A,R)}},updateTransform:function(w){var c=this,A=this._model,R=this._api;if(A){A.setUpdatePayload(w);var L=[];A.eachComponent(function(O,z){if(O!=="series"){var V=c.getViewOfComponentModel(z);if(V&&V.__alive)if(V.updateTransform){var j=V.updateTransform(z,A,R,w);j&&j.update&&L.push(V)}else L.push(V)}});var $=createHashMap();A.eachSeries(function(O){var z=c._chartsMap[O.__viewId];if(z.updateTransform){var V=z.updateTransform(O,A,R,w);V&&V.update&&$.set(O.uid,1)}else $.set(O.uid,1)}),n(A),this._scheduler.performVisualTasks(A,w,{setDirty:!0,dirtyMap:$}),renderSeries(this,A,R,w,{},$),lifecycle$1.trigger("afterupdate",A,R)}},updateView:function(w){var c=this._model;c&&(c.setUpdatePayload(w),ChartView$1.markUpdateMethod(w,"updateView"),n(c),this._scheduler.performVisualTasks(c,w,{setDirty:!0}),render(this,c,this._api,w,{}),lifecycle$1.trigger("afterupdate",c,this._api))},updateVisual:function(w){var c=this,A=this._model;A&&(A.setUpdatePayload(w),A.eachSeries(function(R){R.getData().clearAllVisual()}),ChartView$1.markUpdateMethod(w,"updateVisual"),n(A),this._scheduler.performVisualTasks(A,w,{visualType:"visual",setDirty:!0}),A.eachComponent(function(R,L){if(R!=="series"){var $=c.getViewOfComponentModel(L);$&&$.__alive&&$.updateVisual(L,A,c._api,w)}}),A.eachSeries(function(R){var L=c._chartsMap[R.__viewId];L.updateVisual(R,A,c._api,w)}),lifecycle$1.trigger("afterupdate",A,this._api))},updateLayout:function(w){updateMethods.update.call(this,w)}},doConvertPixel=function(w,c,A,R){if(w._disposed){w.id;return}for(var L=w._model,$=w._coordSysMgr.getCoordinateSystems(),O,z=parseFinder$1(L,A),V=0;V<$.length;V++){var j=$[V];if(j[c]&&(O=j[c](L,z,R))!=null)return O}},updateStreamModes=function(w,c){var A=w._chartsMap,R=w._scheduler;c.eachSeries(function(L){R.updateStreamModes(L,A[L.__viewId])})},doDispatchAction=function(w,c){var A=this,R=this.getModel(),L=w.type,$=w.escapeConnect,O=actions[L],z=O.actionInfo,V=(z.update||"update").split(":"),j=V.pop(),K=V[0]!=null&&parseClassType(V[0]);this[IN_MAIN_PROCESS_KEY]=!0;var Z=[w],q=!1;w.batch&&(q=!0,Z=map$1(w.batch,function(me){return me=defaults(extend({},me),w),me.batch=null,me}));var ie=[],te,oe=isSelectChangePayload(w),re=isHighDownPayload(w);if(re&&allLeaveBlur(this._api),each$f(Z,function(me){if(te=O.action(me,A._model,A._api),te=te||extend({},me),te.type=z.event||te.type,ie.push(te),re){var be=preParseFinder(w),Q=be.queryOptionMap,Ne=be.mainTypeSpecified,Ee=Ne?Q.keys()[0]:"series";updateDirectly(A,j,me,Ee),markStatusToUpdate(A)}else oe?(updateDirectly(A,j,me,"series"),markStatusToUpdate(A)):K&&updateDirectly(A,j,me,K.main,K.sub)}),j!=="none"&&!re&&!oe&&!K)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,w),this[PENDING_UPDATE]=null):updateMethods[j].call(this,w)}catch(me){throw this[IN_MAIN_PROCESS_KEY]=!1,me}if(q?te={type:z.event||L,escapeConnect:$,batch:ie}:te=ie[0],this[IN_MAIN_PROCESS_KEY]=!1,!c){var he=this._messageCenter;if(he.trigger(te.type,te),oe){var _e={type:"selectchanged",escapeConnect:$,selected:getAllSelectedIndices(R),isFromClick:w.isFromClick||!1,fromAction:w.type,fromActionPayload:w};he.trigger(_e.type,_e)}}},flushPendingActions=function(w){for(var c=this._pendingActions;c.length;){var A=c.shift();doDispatchAction.call(this,A,w)}},triggerUpdatedEvent=function(w){!w&&this.trigger("updated")},bindRenderedEvent=function(w,c){w.on("rendered",function(A){c.trigger("rendered",A),w.animation.isFinished()&&!c[PENDING_UPDATE]&&!c._scheduler.unfinished&&!c._pendingActions.length&&c.trigger("finished")})},bindMouseEvent=function(w,c){w.on("mouseover",function(A){var R=A.target,L=findEventDispatcher(R,isHighDownDispatcher);L&&(handleGlobalMouseOverForHighDown(L,A,c._api),markStatusToUpdate(c))}).on("mouseout",function(A){var R=A.target,L=findEventDispatcher(R,isHighDownDispatcher);L&&(handleGlobalMouseOutForHighDown(L,A,c._api),markStatusToUpdate(c))}).on("click",function(A){var R=A.target,L=findEventDispatcher(R,function(z){return getECData(z).dataIndex!=null},!0);if(L){var $=L.selected?"unselect":"select",O=getECData(L);c._api.dispatchAction({type:$,dataType:O.dataType,dataIndexInside:O.dataIndex,seriesIndex:O.seriesIndex,isFromClick:!0})}})};function n(w){w.clearColorPalette(),w.eachSeries(function(c){c.clearColorPalette()})}function o(w){var c=[],A=[],R=!1;if(w.eachComponent(function(z,V){var j=V.get("zlevel")||0,K=V.get("z")||0,Z=V.getZLevelKey();R=R||!!Z,(z==="series"?A:c).push({zlevel:j,z:K,idx:V.componentIndex,type:z,key:Z})}),R){var L=c.concat(A),$,O;sort$2(L,function(z,V){return z.zlevel===V.zlevel?z.z-V.z:z.zlevel-V.zlevel}),each$f(L,function(z){var V=w.getComponent(z.type,z.idx),j=z.zlevel,K=z.key;$!=null&&(j=Math.max($,j)),K?(j===$&&K!==O&&j++,O=K):O&&(j===$&&j++,O=""),$=j,V.setZLevel(j)})}}render=function(w,c,A,R,L){o(c),renderComponents(w,c,A,R,L),each$f(w._chartsViews,function($){$.__alive=!1}),renderSeries(w,c,A,R,L),each$f(w._chartsViews,function($){$.__alive||$.remove(c,A)})},renderComponents=function(w,c,A,R,L,$){each$f($||w._componentsViews,function(O){var z=O.__model;S(z,O),O.render(z,c,A,R),g(z,O),x(z,O)})},renderSeries=function(w,c,A,R,L,$){var O=w._scheduler;L=extend(L||{},{updatedSeries:c.getSeries()}),lifecycle$1.trigger("series:beforeupdate",c,A,L);var z=!1;c.eachSeries(function(V){var j=w._chartsMap[V.__viewId];j.__alive=!0;var K=j.renderTask;O.updatePayload(K,R),S(V,j),$&&$.get(V.uid)&&K.dirty(),K.perform(O.getPerformArgs(K))&&(z=!0),j.group.silent=!!V.get("silent"),d(V,j),updateSeriesElementSelection(V)}),O.unfinished=z||O.unfinished,lifecycle$1.trigger("series:layoutlabels",c,A,L),lifecycle$1.trigger("series:transition",c,A,L),c.eachSeries(function(V){var j=w._chartsMap[V.__viewId];g(V,j),x(V,j)}),l(w,c),lifecycle$1.trigger("series:afterupdate",c,A,L)},markStatusToUpdate=function(w){w[STATUS_NEEDS_UPDATE_KEY]=!0,w.getZr().wakeUp()},applyChangedStates=function(w){w[STATUS_NEEDS_UPDATE_KEY]&&(w.getZr().storage.traverse(function(c){isElementRemoved(c)||a(c)}),w[STATUS_NEEDS_UPDATE_KEY]=!1)};function a(w){for(var c=[],A=w.currentStates,R=0;R<A.length;R++){var L=A[R];L==="emphasis"||L==="blur"||L==="select"||c.push(L)}w.selected&&w.states.select&&c.push("select"),w.hoverState===HOVER_STATE_EMPHASIS&&w.states.emphasis?c.push("emphasis"):w.hoverState===HOVER_STATE_BLUR&&w.states.blur&&c.push("blur"),w.useStates(c)}function l(w,c){var A=w._zr,R=A.storage,L=0;R.traverse(function($){$.isGroup||L++}),L>c.get("hoverLayerThreshold")&&!env$1.node&&!env$1.worker&&c.eachSeries(function($){if(!$.preventUsingHoverLayer){var O=w._chartsMap[$.__viewId];O.__alive&&O.eachRendered(function(z){z.states.emphasis&&(z.states.emphasis.hoverLayer=!0)})}})}function d(w,c){var A=w.get("blendMode")||null;c.eachRendered(function(R){R.isGroup||(R.style.blend=A)})}function g(w,c){if(!w.preventAutoZ){var A=w.get("z")||0,R=w.get("zlevel")||0;c.eachRendered(function(L){return y(L,A,R,-1/0),!0})}}function y(w,c,A,R){var L=w.getTextContent(),$=w.getTextGuideLine(),O=w.isGroup;if(O)for(var z=w.childrenRef(),V=0;V<z.length;V++)R=Math.max(y(z[V],c,A,R),R);else w.z=c,w.zlevel=A,R=Math.max(w.z2,R);if(L&&(L.z=c,L.zlevel=A,isFinite(R)&&(L.z2=R+2)),$){var j=w.textGuideLineConfig;$.z=c,$.zlevel=A,isFinite(R)&&($.z2=R+(j&&j.showAbove?1:-1))}return R}function S(w,c){c.eachRendered(function(A){if(!isElementRemoved(A)){var R=A.getTextContent(),L=A.getTextGuideLine();A.stateTransition&&(A.stateTransition=null),R&&R.stateTransition&&(R.stateTransition=null),L&&L.stateTransition&&(L.stateTransition=null),A.hasState()?(A.prevStates=A.currentStates,A.clearStates()):A.prevStates&&(A.prevStates=null)}})}function x(w,c){var A=w.getModel("stateAnimation"),R=w.isAnimationEnabled(),L=A.get("duration"),$=L>0?{duration:L,delay:A.get("delay"),easing:A.get("easing")}:null;c.eachRendered(function(O){if(O.states&&O.states.emphasis){if(isElementRemoved(O))return;if(O instanceof Path$1&&savePathStates(O),O.__dirty){var z=O.prevStates;z&&O.useStates(z)}if(R){O.stateTransition=$;var V=O.getTextContent(),j=O.getTextGuideLine();V&&(V.stateTransition=$),j&&(j.stateTransition=$)}O.__dirty&&a(O)}})}createExtensionAPI=function(w){return new(function(c){__extends(A,c);function A(){return c!==null&&c.apply(this,arguments)||this}return A.prototype.getCoordinateSystems=function(){return w._coordSysMgr.getCoordinateSystems()},A.prototype.getComponentByElement=function(R){for(;R;){var L=R.__ecComponentInfo;if(L!=null)return w._model.getComponent(L.mainType,L.index);R=R.parent}},A.prototype.enterEmphasis=function(R,L){enterEmphasis(R,L),markStatusToUpdate(w)},A.prototype.leaveEmphasis=function(R,L){leaveEmphasis(R,L),markStatusToUpdate(w)},A.prototype.enterBlur=function(R){enterBlur(R),markStatusToUpdate(w)},A.prototype.leaveBlur=function(R){leaveBlur(R),markStatusToUpdate(w)},A.prototype.enterSelect=function(R){enterSelect(R),markStatusToUpdate(w)},A.prototype.leaveSelect=function(R){leaveSelect(R),markStatusToUpdate(w)},A.prototype.getModel=function(){return w.getModel()},A.prototype.getViewOfComponentModel=function(R){return w.getViewOfComponentModel(R)},A.prototype.getViewOfSeriesModel=function(R){return w.getViewOfSeriesModel(R)},A}(ExtensionAPI$1))(w)},enableConnect=function(w){function c(A,R){for(var L=0;L<A.length;L++){var $=A[L];$[CONNECT_STATUS_KEY]=R}}each$f(eventActionMap,function(A,R){w._messageCenter.on(R,function(L){if(connectedGroups[w.group]&&w[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(L&&L.escapeConnect)return;var $=w.makeActionFromEvent(L),O=[];each$f(instances,function(z){z!==w&&z.group===w.group&&O.push(z)}),c(O,CONNECT_STATUS_PENDING),each$f(O,function(z){z[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&z.dispatchAction($)}),c(O,CONNECT_STATUS_UPDATED)}})})}}(),t}(Eventful$1),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(r,t,n){var o=this;function a(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];t&&t.apply&&t.apply(this,l),o.off(r,a)}this.on.call(this,r,a,n)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(r){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(r,t,n){var o=!(n&&n.ssr);if(o){var a=getInstanceByDom(r);if(a)return a}var l=new ECharts(r,t,n);return l.id="ec_"+idBase++,instances[l.id]=l,o&&setAttribute(r,DOM_ATTRIBUTE_KEY,l.id),enableConnect(l),lifecycle$1.trigger("afterinit",l),l}function connect(r){if(isArray$1(r)){var t=r;r=null,each$f(t,function(n){n.group!=null&&(r=n.group)}),r=r||"g_"+groupIdBase++,each$f(t,function(n){n.group=r})}return connectedGroups[r]=!0,r}function disconnect(r){connectedGroups[r]=!1}var disConnect=disconnect;function dispose(r){isString(r)?r=instances[r]:r instanceof ECharts||(r=getInstanceByDom(r)),r instanceof ECharts&&!r.isDisposed()&&r.dispose()}function getInstanceByDom(r){return instances[getAttribute(r,DOM_ATTRIBUTE_KEY)]}function getInstanceById(r){return instances[r]}function registerTheme(r,t){themeStorage[r]=t}function registerPreprocessor(r){indexOf(optionPreprocessorFuncs,r)<0&&optionPreprocessorFuncs.push(r)}function registerProcessor(r,t){normalizeRegister(dataProcessorFuncs,r,t,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(r){registerUpdateLifecycle("afterinit",r)}function registerPostUpdate(r){registerUpdateLifecycle("afterupdate",r)}function registerUpdateLifecycle(r,t){lifecycle$1.on(r,t)}function registerAction(r,t,n){isFunction(t)&&(n=t,t="");var o=isObject$3(r)?r.type:[r,r={event:t}][0];r.event=(r.event||o).toLowerCase(),t=r.event,!eventActionMap[t]&&(assert(ACTION_REG.test(o)&&ACTION_REG.test(t)),actions[o]||(actions[o]={action:n,actionInfo:r}),eventActionMap[t]=o)}function registerCoordinateSystem(r,t){CoordinateSystem.register(r,t)}function getCoordinateSystemDimensions(r){var t=CoordinateSystem.get(r);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()}function registerLayout(r,t){normalizeRegister(visualFuncs,r,t,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(r,t){normalizeRegister(visualFuncs,r,t,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(r,t,n,o,a){if((isFunction(t)||isObject$3(t))&&(n=t,t=o),!(indexOf(registeredTasks,n)>=0)){registeredTasks.push(n);var l=Scheduler$1.wrapStageHandler(n,a);l.__prio=t,l.__raw=n,r.push(l)}}function registerLoading(r,t){loadingEffects[r]=t}function setCanvasCreator(r){setPlatformAPI({createCanvas:r})}function registerMap$1(r,t,n){var o=getImpl("registerMap");o&&o(r,t,n)}function getMap(r){var t=getImpl("getMap");return t&&t(r)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",darkTheme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,SeriesModel:SeriesModel$1,ChartView:ChartView$1,registerComponentModel:function(r){ComponentModel$1.registerClass(r)},registerComponentView:function(r){ComponentView$1.registerClass(r)},registerSeriesModel:function(r){SeriesModel$1.registerClass(r)},registerChartView:function(r){ChartView$1.registerClass(r)},registerSubTypeDefaulter:function(r,t){ComponentModel$1.registerSubTypeDefaulter(r,t)},registerPainter:function(r,t){registerPainter(r,t)}};function use(r){if(isArray$1(r)){each$f(r,function(t){use(t)});return}indexOf(extensions,r)>=0||(extensions.push(r),isFunction(r)&&(r={install:r}),r.install(extensionRegisters))}function dataIndexMapValueLength(r){return r==null?0:r.length||1}function defaultKeyGetter(r){return r}var DataDiffer=function(){function r(t,n,o,a,l,d){this._old=t,this._new=n,this._oldKeyGetter=o||defaultKeyGetter,this._newKeyGetter=a||defaultKeyGetter,this.context=l,this._diffModeMultiple=d==="multiple"}return r.prototype.add=function(t){return this._add=t,this},r.prototype.update=function(t){return this._update=t,this},r.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},r.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},r.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},r.prototype.remove=function(t){return this._remove=t,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var t=this._old,n=this._new,o={},a=new Array(t.length),l=new Array(n.length);this._initIndexMap(t,null,a,"_oldKeyGetter"),this._initIndexMap(n,o,l,"_newKeyGetter");for(var d=0;d<t.length;d++){var g=a[d],y=o[g],S=dataIndexMapValueLength(y);if(S>1){var x=y.shift();y.length===1&&(o[g]=y[0]),this._update&&this._update(x,d)}else S===1?(o[g]=null,this._update&&this._update(y,d)):this._remove&&this._remove(d)}this._performRestAdd(l,o)},r.prototype._executeMultiple=function(){var t=this._old,n=this._new,o={},a={},l=[],d=[];this._initIndexMap(t,o,l,"_oldKeyGetter"),this._initIndexMap(n,a,d,"_newKeyGetter");for(var g=0;g<l.length;g++){var y=l[g],S=o[y],x=a[y],w=dataIndexMapValueLength(S),c=dataIndexMapValueLength(x);if(w>1&&c===1)this._updateManyToOne&&this._updateManyToOne(x,S),a[y]=null;else if(w===1&&c>1)this._updateOneToMany&&this._updateOneToMany(x,S),a[y]=null;else if(w===1&&c===1)this._update&&this._update(x,S),a[y]=null;else if(w>1&&c>1)this._updateManyToMany&&this._updateManyToMany(x,S),a[y]=null;else if(w>1)for(var A=0;A<w;A++)this._remove&&this._remove(S[A]);else this._remove&&this._remove(S)}this._performRestAdd(d,a)},r.prototype._performRestAdd=function(t,n){for(var o=0;o<t.length;o++){var a=t[o],l=n[a],d=dataIndexMapValueLength(l);if(d>1)for(var g=0;g<d;g++)this._add&&this._add(l[g]);else d===1&&this._add&&this._add(l);n[a]=null}},r.prototype._initIndexMap=function(t,n,o,a){for(var l=this._diffModeMultiple,d=0;d<t.length;d++){var g="_ec_"+this[a](t[d],d);if(l||(o[d]=g),!!n){var y=n[g],S=dataIndexMapValueLength(y);S===0?(n[g]=d,l&&o.push(g)):S===1?n[g]=[y,d]:y.push(d)}}},r}();const DataDiffer$1=DataDiffer;var DimensionUserOuput=function(){function r(t,n){this._encode=t,this._schema=n}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r}();function summarizeDimensions(r,t){var n={},o=n.encode={},a=createHashMap(),l=[],d=[],g={};each$f(r.dimensions,function(c){var A=r.getDimensionInfo(c),R=A.coordDim;if(R){var L=A.coordDimIndex;getOrCreateEncodeArr(o,R)[L]=c,A.isExtraCoord||(a.set(R,1),mayLabelDimType(A.type)&&(l[0]=c),getOrCreateEncodeArr(g,R)[L]=r.getDimensionIndex(A.name)),A.defaultTooltip&&d.push(c)}VISUAL_DIMENSIONS.each(function($,O){var z=getOrCreateEncodeArr(o,O),V=A.otherDims[O];V!=null&&V!==!1&&(z[V]=A.name)})});var y=[],S={};a.each(function(c,A){var R=o[A];S[A]=R[0],y=y.concat(R)}),n.dataDimsOnCoord=y,n.dataDimIndicesOnCoord=map$1(y,function(c){return r.getDimensionInfo(c).storeDimIndex}),n.encodeFirstDimNotExtra=S;var x=o.label;x&&x.length&&(l=x.slice());var w=o.tooltip;return w&&w.length?d=w.slice():d.length||(d=l.slice()),o.defaultedLabel=l,o.defaultedTooltip=d,n.userOutput=new DimensionUserOuput(g,t),n}function getOrCreateEncodeArr(r,t){return r.hasOwnProperty(t)||(r[t]=[]),r[t]}function getDimensionTypeByAxis(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function mayLabelDimType(r){return!(r==="ordinal"||r==="time")}var SeriesDimensionDefine=function(){function r(t){this.otherDims={},t!=null&&extend(this,t)}return r}();const SeriesDimensionDefine$1=SeriesDimensionDefine;var inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function r(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},r.prototype.getSourceDimensionIndex=function(t){return retrieve2(this._dimNameMap.get(t),-1)},r.prototype.getSourceDimension=function(t){var n=this.source.dimensionsDefine;if(n)return n[t]},r.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,n=shouldRetrieveDataByName(this.source),o=!shouldOmitUnusedDimensions(t),a="",l=[],d=0,g=0;d<t;d++){var y=void 0,S=void 0,x=void 0,w=this.dimensions[g];if(w&&w.storeDimIndex===d)y=n?w.name:null,S=w.type,x=w.ordinalMeta,g++;else{var c=this.getSourceDimension(d);c&&(y=n?c.name:null,S=c.type)}l.push({property:y,type:S,ordinalMeta:x}),n&&y!=null&&(!w||!w.isCalculationCoord)&&(a+=o?y.replace(/\`/g,"`1").replace(/\$/g,"`2"):y),a+="$",a+=dimTypeShort[S]||"f",x&&(a+=x.uid),a+="$"}var A=this.source,R=[A.seriesLayoutBy,A.startIndex,a].join("$$");return{dimensions:l,hash:R}},r.prototype.makeOutputDimensionNames=function(){for(var t=[],n=0,o=0;n<this._fullDimCount;n++){var a=void 0,l=this.dimensions[o];if(l&&l.storeDimIndex===n)l.isCalculationCoord||(a=l.name),o++;else{var d=this.getSourceDimension(n);d&&(a=d.name)}t.push(a)}return t},r.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r}();function isSeriesDataSchema(r){return r instanceof SeriesDataSchema}function createDimNameMap(r){for(var t=createHashMap(),n=0;n<(r||[]).length;n++){var o=r[n],a=isObject$3(o)?o.name:o;a!=null&&t.get(a)==null&&t.set(a,n)}return t}function ensureSourceDimNameMap(r){var t=inner$h(r);return t.dimNameMap||(t.dimNameMap=createDimNameMap(r.dimensionsDefine))}function shouldOmitUnusedDimensions(r){return r>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function r(t,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var o,a=!1;isSeriesDataSchema(t)?(o=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(a=!0,o=t),o=o||["x","y"];for(var l={},d=[],g={},y=!1,S={},x=0;x<o.length;x++){var w=o[x],c=isString(w)?new SeriesDimensionDefine$1({name:w}):w instanceof SeriesDimensionDefine$1?w:new SeriesDimensionDefine$1(w),A=c.name;c.type=c.type||"float",c.coordDim||(c.coordDim=A,c.coordDimIndex=0);var R=c.otherDims=c.otherDims||{};d.push(A),l[A]=c,S[A]!=null&&(y=!0),c.createInvertedIndices&&(g[A]=[]),R.itemName===0&&(this._nameDimIdx=x),R.itemId===0&&(this._idDimIdx=x),a&&(c.storeDimIndex=x)}if(this.dimensions=d,this._dimInfos=l,this._initGetDimensionInfo(y),this.hostModel=n,this._invertedIndicesMap=g,this._dimOmitted){var L=this._dimIdxToName=createHashMap();each$f(d,function($){L.set(l[$].storeDimIndex,$)})}}return r.prototype.getDimension=function(t){var n=this._recognizeDimIndex(t);if(n==null)return t;if(n=t,!this._dimOmitted)return this.dimensions[n];var o=this._dimIdxToName.get(n);if(o!=null)return o;var a=this._schema.getSourceDimension(n);if(a)return a.name},r.prototype.getDimensionIndex=function(t){var n=this._recognizeDimIndex(t);if(n!=null)return n;if(t==null)return-1;var o=this._getDimInfo(t);return o?o.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},r.prototype._recognizeDimIndex=function(t){if(isNumber(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},r.prototype._getStoreDimIndex=function(t){var n=this.getDimensionIndex(t);return n},r.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},r.prototype._initGetDimensionInfo=function(t){var n=this._dimInfos;this._getDimInfo=t?function(o){return n.hasOwnProperty(o)?n[o]:void 0}:function(o){return n[o]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(t,n){var o=this._dimSummary;if(n==null)return o.encodeFirstDimNotExtra[t];var a=o.encode[t];return a?a[n]:null},r.prototype.mapDimensionsAll=function(t){var n=this._dimSummary,o=n.encode[t];return(o||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(t,n,o){var a=this,l;if(t instanceof DataStore$1&&(l=t),!l){var d=this.dimensions,g=isSourceInstance(t)||isArrayLike(t)?new DefaultDataProvider(t,d.length):t;l=new DataStore$1;var y=map(d,function(S){return{type:a._dimInfos[S].type,property:S}});l.initData(g,y,o)}this._store=l,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,l.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(t){var n=this._store.appendData(t);this._doInit(n[0],n[1])},r.prototype.appendValues=function(t,n){var o=this._store.appendValues(t,n.length),a=o.start,l=o.end,d=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var g=a;g<l;g++){var y=g-a;this._nameList[g]=n[y],d&&makeIdFromName(this,g)}},r.prototype._updateOrdinalMeta=function(){for(var t=this._store,n=this.dimensions,o=0;o<n.length;o++){var a=this._dimInfos[n[o]];a.ordinalMeta&&t.collectOrdinalMeta(a.storeDimIndex,a.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!t.fillStorage},r.prototype._doInit=function(t,n){if(!(t>=n)){var o=this._store,a=o.getProvider();this._updateOrdinalMeta();var l=this._nameList,d=this._idList,g=a.getSource().sourceFormat,y=g===SOURCE_FORMAT_ORIGINAL;if(y&&!a.pure)for(var S=[],x=t;x<n;x++){var w=a.getItem(x,S);if(!this.hasItemOption&&isDataItemOption(w)&&(this.hasItemOption=!0),w){var c=w.name;l[x]==null&&c!=null&&(l[x]=convertOptionIdName(c,null));var A=w.id;d[x]==null&&A!=null&&(d[x]=convertOptionIdName(A,null))}}if(this._shouldMakeIdFromName())for(var x=t;x<n;x++)makeIdFromName(this,x);prepareInvertedIndex(this)}},r.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.setApproximateExtent=function(t,n){n=this.getDimension(n),this._approximateExtent[n]=t.slice()},r.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},r.prototype.setCalculationInfo=function(t,n){isObject$1(t)?extend(this._calculationInfo,t):this._calculationInfo[t]=n},r.prototype.getName=function(t){var n=this.getRawIndex(t),o=this._nameList[n];return o==null&&this._nameDimIdx!=null&&(o=getIdNameFromStore(this,this._nameDimIdx,n)),o==null&&(o=""),o},r.prototype._getCategory=function(t,n){var o=this._store.get(t,n),a=this._store.getOrdinalMeta(t);return a?a.categories[o]:o},r.prototype.getId=function(t){return getId(this,this.getRawIndex(t))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(t,n){var o=this._store,a=this._dimInfos[t];if(a)return o.get(a.storeDimIndex,n)},r.prototype.getByRawIndex=function(t,n){var o=this._store,a=this._dimInfos[t];if(a)return o.getByRawIndex(a.storeDimIndex,n)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},r.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},r.prototype.getValues=function(t,n){var o=this,a=this._store;return isArray$1(t)?a.getValues(map(t,function(l){return o._getStoreDimIndex(l)}),n):a.getValues(t)},r.prototype.hasValue=function(t){for(var n=this._dimSummary.dataDimIndicesOnCoord,o=0,a=n.length;o<a;o++)if(isNaN(this._store.get(n[o],t)))return!1;return!0},r.prototype.indexOfName=function(t){for(var n=0,o=this._store.count();n<o;n++)if(this.getName(n)===t)return n;return-1},r.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},r.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},r.prototype.rawIndexOf=function(t,n){var o=t&&this._invertedIndicesMap[t],a=o[n];return a==null||isNaN(a)?INDEX_NOT_FOUND:a},r.prototype.indicesOfNearest=function(t,n,o){return this._store.indicesOfNearest(this._getStoreDimIndex(t),n,o)},r.prototype.each=function(t,n,o){isFunction(t)&&(o=n,n=t,t=[]);var a=o||this,l=map(normalizeDimensions(t),this._getStoreDimIndex,this);this._store.each(l,a?bind$1(n,a):n)},r.prototype.filterSelf=function(t,n,o){isFunction(t)&&(o=n,n=t,t=[]);var a=o||this,l=map(normalizeDimensions(t),this._getStoreDimIndex,this);return this._store=this._store.filter(l,a?bind$1(n,a):n),this},r.prototype.selectRange=function(t){var n=this,o={},a=keys(t);return each$f(a,function(l){var d=n._getStoreDimIndex(l);o[d]=t[l]}),this._store=this._store.selectRange(o),this},r.prototype.mapArray=function(t,n,o){isFunction(t)&&(o=n,n=t,t=[]),o=o||this;var a=[];return this.each(t,function(){a.push(n&&n.apply(this,arguments))},o),a},r.prototype.map=function(t,n,o,a){var l=o||a||this,d=map(normalizeDimensions(t),this._getStoreDimIndex,this),g=cloneListForMapAndSample(this);return g._store=this._store.map(d,l?bind$1(n,l):n),g},r.prototype.modify=function(t,n,o,a){var l=o||a||this,d=map(normalizeDimensions(t),this._getStoreDimIndex,this);this._store.modify(d,l?bind$1(n,l):n)},r.prototype.downSample=function(t,n,o,a){var l=cloneListForMapAndSample(this);return l._store=this._store.downSample(this._getStoreDimIndex(t),n,o,a),l},r.prototype.lttbDownSample=function(t,n){var o=cloneListForMapAndSample(this);return o._store=this._store.lttbDownSample(this._getStoreDimIndex(t),n),o},r.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},r.prototype.getItemModel=function(t){var n=this.hostModel,o=this.getRawDataItem(t);return new Model$1(o,n,n&&n.ecModel)},r.prototype.diff=function(t){var n=this;return new DataDiffer$1(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(o){return getId(t,o)},function(o){return getId(n,o)})},r.prototype.getVisual=function(t){var n=this._visual;return n&&n[t]},r.prototype.setVisual=function(t,n){this._visual=this._visual||{},isObject$1(t)?extend(this._visual,t):this._visual[t]=n},r.prototype.getItemVisual=function(t,n){var o=this._itemVisuals[t],a=o&&o[n];return a??this.getVisual(n)},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(t,n){var o=this._itemVisuals,a=o[t];a||(a=o[t]={});var l=a[n];return l==null&&(l=this.getVisual(n),isArray$1(l)?l=l.slice():isObject$1(l)&&(l=extend({},l)),a[n]=l),l},r.prototype.setItemVisual=function(t,n,o){var a=this._itemVisuals[t]||{};this._itemVisuals[t]=a,isObject$1(n)?extend(a,n):a[n]=o},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(t,n){isObject$1(t)?extend(this._layout,t):this._layout[t]=n},r.prototype.getLayout=function(t){return this._layout[t]},r.prototype.getItemLayout=function(t){return this._itemLayouts[t]},r.prototype.setItemLayout=function(t,n,o){this._itemLayouts[t]=o?extend(this._itemLayouts[t]||{},n):n},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(t,n){var o=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(o,this.dataType,t,n),this._graphicEls[t]=n},r.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},r.prototype.eachItemGraphicEl=function(t,n){each$f(this._graphicEls,function(o,a){o&&t&&t.call(n,o,a)})},r.prototype.cloneShallow=function(t){return t||(t=new r(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(t,this),t._store=this._store,t},r.prototype.wrapMethod=function(t,n){var o=this[t];isFunction(o)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var a=o.apply(this,arguments);return n.apply(this,[a].concat(slice(arguments)))})},r.internalField=function(){prepareInvertedIndex=function(t){var n=t._invertedIndicesMap;each$f(n,function(o,a){var l=t._dimInfos[a],d=l.ordinalMeta,g=t._store;if(d){o=n[a]=new CtorInt32Array(d.categories.length);for(var y=0;y<o.length;y++)o[y]=INDEX_NOT_FOUND;for(var y=0;y<g.count();y++)o[g.get(l.storeDimIndex,y)]=y}})},getIdNameFromStore=function(t,n,o){return convertOptionIdName(t._getCategory(n,o),null)},getId=function(t,n){var o=t._idList[n];return o==null&&t._idDimIdx!=null&&(o=getIdNameFromStore(t,t._idDimIdx,n)),o==null&&(o=ID_PREFIX+n),o},normalizeDimensions=function(t){return isArray$1(t)||(t=t!=null?[t]:[]),t},cloneListForMapAndSample=function(t){var n=new r(t._schema?t._schema:map(t.dimensions,t._getDimInfo,t),t.hostModel);return transferProperties(n,t),n},transferProperties=function(t,n){each$f(TRANSFERABLE_PROPERTIES.concat(n.__wrappedMethods||[]),function(o){n.hasOwnProperty(o)&&(t[o]=n[o])}),t.__wrappedMethods=n.__wrappedMethods,each$f(CLONE_PROPERTIES,function(o){t[o]=clone$4(n[o])}),t._calculationInfo=extend({},n._calculationInfo)},makeIdFromName=function(t,n){var o=t._nameList,a=t._idList,l=t._nameDimIdx,d=t._idDimIdx,g=o[n],y=a[n];if(g==null&&l!=null&&(o[n]=g=getIdNameFromStore(t,l,n)),y==null&&d!=null&&(a[n]=y=getIdNameFromStore(t,d,n)),y==null&&g!=null){var S=t._nameRepeatCount,x=S[g]=(S[g]||0)+1;y=g,x>1&&(y+="__ec__"+x),a[n]=y}}}(),r}();const SeriesData$1=SeriesData;function createDimensions(r,t){return prepareSeriesDataSchema(r,t).dimensions}function prepareSeriesDataSchema(r,t){isSourceInstance(r)||(r=createSourceFromSeriesDataOption(r)),t=t||{};var n=t.coordDimensions||[],o=t.dimensionsDefine||r.dimensionsDefine||[],a=createHashMap(),l=[],d=getDimCount(r,n,o,t.dimensionsCount),g=t.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(d),y=o===r.dimensionsDefine,S=y?ensureSourceDimNameMap(r):createDimNameMap(o),x=t.encodeDefine;!x&&t.encodeDefaulter&&(x=t.encodeDefaulter(r,d));for(var w=createHashMap(x),c=new CtorInt32Array$1(d),A=0;A<c.length;A++)c[A]=-1;function R(te){var oe=c[te];if(oe<0){var re=o[te],he=isObject$3(re)?re:{name:re},_e=new SeriesDimensionDefine$1,me=he.name;me!=null&&S.get(me)!=null&&(_e.name=_e.displayName=me),he.type!=null&&(_e.type=he.type),he.displayName!=null&&(_e.displayName=he.displayName);var be=l.length;return c[te]=be,_e.storeDimIndex=te,l.push(_e),_e}return l[oe]}if(!g)for(var A=0;A<d;A++)R(A);w.each(function(te,oe){var re=normalizeToArray(te).slice();if(re.length===1&&!isString(re[0])&&re[0]<0){w.set(oe,!1);return}var he=w.set(oe,[]);each$f(re,function(_e,me){var be=isString(_e)?S.get(_e):_e;be!=null&&be<d&&(he[me]=be,$(R(be),oe,me))})});var L=0;each$f(n,function(te){var oe,re,he,_e;if(isString(te))oe=te,_e={};else{_e=te,oe=_e.name;var me=_e.ordinalMeta;_e.ordinalMeta=null,_e=extend({},_e),_e.ordinalMeta=me,re=_e.dimsDef,he=_e.otherDims,_e.name=_e.coordDim=_e.coordDimIndex=_e.dimsDef=_e.otherDims=null}var be=w.get(oe);if(be!==!1){if(be=normalizeToArray(be),!be.length)for(var Q=0;Q<(re&&re.length||1);Q++){for(;L<d&&R(L).coordDim!=null;)L++;L<d&&be.push(L++)}each$f(be,function(Ne,Ee){var Ge=R(Ne);if(y&&_e.type!=null&&(Ge.type=_e.type),$(defaults(Ge,_e),oe,Ee),Ge.name==null&&re){var it=re[Ee];!isObject$3(it)&&(it={name:it}),Ge.name=Ge.displayName=it.name,Ge.defaultTooltip=it.defaultTooltip}he&&defaults(Ge.otherDims,he)})}});function $(te,oe,re){VISUAL_DIMENSIONS.get(oe)!=null?te.otherDims[oe]=re:(te.coordDim=oe,te.coordDimIndex=re,a.set(oe,!0))}var O=t.generateCoord,z=t.generateCoordCount,V=z!=null;z=O?z||1:0;var j=O||"value";function K(te){te.name==null&&(te.name=te.coordDim)}if(g)each$f(l,function(te){K(te)}),l.sort(function(te,oe){return te.storeDimIndex-oe.storeDimIndex});else for(var Z=0;Z<d;Z++){var q=R(Z),ie=q.coordDim;ie==null&&(q.coordDim=genCoordDimName(j,a,V),q.coordDimIndex=0,(!O||z<=0)&&(q.isExtraCoord=!0),z--),K(q),q.type==null&&(guessOrdinal(r,Z)===BE_ORDINAL.Must||q.isExtraCoord&&(q.otherDims.itemName!=null||q.otherDims.seriesName!=null))&&(q.type="ordinal")}return removeDuplication(l),new SeriesDataSchema({source:r,dimensions:l,fullDimensionCount:d,dimensionOmitted:g})}function removeDuplication(r){for(var t=createHashMap(),n=0;n<r.length;n++){var o=r[n],a=o.name,l=t.get(a)||0;l>0&&(o.name=a+(l-1)),l++,t.set(a,l)}}function getDimCount(r,t,n,o){var a=Math.max(r.dimensionsDetectedCount||1,t.length,n.length,o||0);return each$f(t,function(l){var d;isObject$3(l)&&(d=l.dimsDef)&&(a=Math.max(a,d.length))}),a}function genCoordDimName(r,t,n){if(n||t.hasKey(r)){for(var o=0;t.hasKey(r+o);)o++;r+=o}return t.set(r,!0),r}var CoordSysInfo=function(){function r(t){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=t}return r}();function getCoordSysInfoBySeries(r){var t=r.get("coordinateSystem"),n=new CoordSysInfo(t),o=fetchers[t];if(o)return o(r,n,n.axisMap,n.categoryAxisMap),n}var fetchers={cartesian2d:function(r,t,n,o){var a=r.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=r.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];t.coordSysDims=["x","y"],n.set("x",a),n.set("y",l),isCategory(a)&&(o.set("x",a),t.firstCategoryDimIndex=0),isCategory(l)&&(o.set("y",l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(r,t,n,o){var a=r.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];t.coordSysDims=["single"],n.set("single",a),isCategory(a)&&(o.set("single",a),t.firstCategoryDimIndex=0)},polar:function(r,t,n,o){var a=r.getReferringComponents("polar",SINGLE_REFERRING).models[0],l=a.findAxisModel("radiusAxis"),d=a.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",d),isCategory(l)&&(o.set("radius",l),t.firstCategoryDimIndex=0),isCategory(d)&&(o.set("angle",d),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(r,t,n,o){t.coordSysDims=["lng","lat"]},parallel:function(r,t,n,o){var a=r.ecModel,l=a.getComponent("parallel",r.get("parallelIndex")),d=t.coordSysDims=l.dimensions.slice();each$f(l.parallelAxisIndex,function(g,y){var S=a.getComponent("parallelAxis",g),x=d[y];n.set(x,S),isCategory(S)&&(o.set(x,S),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=y))})}};function isCategory(r){return r.get("type")==="category"}function enableDataStack(r,t,n){n=n||{};var o=n.byIndex,a=n.stackedCoordDimension,l,d,g;isLegacyDimensionsInput(t)?l=t:(d=t.schema,l=d.dimensions,g=t.store);var y=!!(r&&r.get("stack")),S,x,w,c;if(each$f(l,function(z,V){isString(z)&&(l[V]=z={name:z}),y&&!z.isExtraCoord&&(!o&&!S&&z.ordinalMeta&&(S=z),!x&&z.type!=="ordinal"&&z.type!=="time"&&(!a||a===z.coordDim)&&(x=z))}),x&&!o&&!S&&(o=!0),x){w="__\0ecstackresult_"+r.id,c="__\0ecstackedover_"+r.id,S&&(S.createInvertedIndices=!0);var A=x.coordDim,R=x.type,L=0;each$f(l,function(z){z.coordDim===A&&L++});var $={name:w,coordDim:A,coordDimIndex:L,type:R,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:l.length},O={name:c,coordDim:c,coordDimIndex:L+1,type:R,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:l.length+1};d?(g&&($.storeDimIndex=g.ensureCalculationDimension(c,R),O.storeDimIndex=g.ensureCalculationDimension(w,R)),d.appendCalculationDimension($),d.appendCalculationDimension(O)):(l.push($),l.push(O))}return{stackedDimension:x&&x.name,stackedByDimension:S&&S.name,isStackedByIndex:o,stackedOverDimension:c,stackResultDimension:w}}function isLegacyDimensionsInput(r){return!isSeriesDataSchema(r.schema)}function isDimensionStacked(r,t){return!!t&&t===r.getCalculationInfo("stackedDimension")}function getStackedDimension(r,t){return isDimensionStacked(r,t)?r.getCalculationInfo("stackResultDimension"):t}function getCoordSysDimDefs(r,t){var n=r.get("coordinateSystem"),o=CoordinateSystem.get(n),a;return t&&t.coordSysDims&&(a=map$1(t.coordSysDims,function(l){var d={name:l},g=t.axisMap.get(l);if(g){var y=g.get("type");d.type=getDimensionTypeByAxis(y)}return d})),a||(a=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),a}function injectOrdinalMeta(r,t,n){var o,a;return n&&each$f(r,function(l,d){var g=l.coordDim,y=n.categoryAxisMap.get(g);y&&(o==null&&(o=d),l.ordinalMeta=y.getOrdinalMeta(),t&&(l.createInvertedIndices=!0)),l.otherDims.itemName!=null&&(a=!0)}),!a&&o!=null&&(r[o].otherDims.itemName=0),o}function createSeriesData(r,t,n){n=n||{};var o=t.getSourceManager(),a,l=!1;r?(l=!0,a=createSourceFromSeriesDataOption(r)):(a=o.getSource(),l=a.sourceFormat===SOURCE_FORMAT_ORIGINAL);var d=getCoordSysInfoBySeries(t),g=getCoordSysDimDefs(t,d),y=n.useEncodeDefaulter,S=isFunction(y)?y:y?curry$1(makeSeriesEncodeForAxisCoordSys,g,t):null,x={coordDimensions:g,generateCoord:n.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:S,canOmitUnusedDimensions:!l},w=prepareSeriesDataSchema(a,x),c=injectOrdinalMeta(w.dimensions,n.createInvertedIndices,d),A=l?null:o.getSharedDataStore(w),R=enableDataStack(t,{schema:w,store:A}),L=new SeriesData$1(w,t);L.setCalculationInfo(R);var $=c!=null&&isNeedCompleteOrdinalData(a)?function(O,z,V,j){return j===c?V:this.defaultDimValueGetter(O,z,V,j)}:null;return L.hasItemOption=!1,L.initData(l?a:A,null,$),L}function isNeedCompleteOrdinalData(r){if(r.sourceFormat===SOURCE_FORMAT_ORIGINAL){var t=firstDataNotNull(r.data||[]);return!isArray$1(getDataItemValue(t))}}function firstDataNotNull(r){for(var t=0;t<r.length&&r[t]==null;)t++;return r[t]}var Scale=function(){function r(t){this._setting=t||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(t){return this._setting[t]},r.prototype.unionExtent=function(t){var n=this._extent;t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1])},r.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,n){var o=this._extent;isNaN(t)||(o[0]=t),isNaN(n)||(o[1]=n)},r.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},r}();enableClassManagement(Scale);const Scale$1=Scale;var uidBase=0,OrdinalMeta=function(){function r(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++uidBase}return r.createByAxisModel=function(t){var n=t.option,o=n.data,a=o&&map$1(o,getName);return new r({categories:a,needCollect:!a,deduplication:n.dedplication!==!1})},r.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},r.prototype.parseAndCollect=function(t){var n,o=this._needCollect;if(!isString(t)&&!o)return t;if(o&&!this._deduplication)return n=this.categories.length,this.categories[n]=t,n;var a=this._getOrCreateMap();return n=a.get(t),n==null&&(o?(n=this.categories.length,this.categories[n]=t,a.set(t,n)):n=NaN),n},r.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},r}();function getName(r){return isObject$3(r)&&r.value!=null?r.value:r+""}const OrdinalMeta$1=OrdinalMeta;function isIntervalOrLogScale(r){return r.type==="interval"||r.type==="log"}function intervalScaleNiceTicks(r,t,n,o){var a={},l=r[1]-r[0],d=a.interval=nice(l/t,!0);n!=null&&d<n&&(d=a.interval=n),o!=null&&d>o&&(d=a.interval=o);var g=a.intervalPrecision=getIntervalPrecision(d),y=a.niceTickExtent=[round$3(Math.ceil(r[0]/d)*d,g),round$3(Math.floor(r[1]/d)*d,g)];return fixExtent(y,r),a}function increaseInterval(r){var t=Math.pow(10,quantityExponent(r)),n=r/t;return n?n===2?n=3:n===3?n=5:n*=2:n=1,round$3(n*t)}function getIntervalPrecision(r){return getPrecision(r)+2}function clamp(r,t,n){r[t]=Math.max(Math.min(r[t],n[1]),n[0])}function fixExtent(r,t){!isFinite(r[0])&&(r[0]=t[0]),!isFinite(r[1])&&(r[1]=t[1]),clamp(r,0,t),clamp(r,1,t),r[0]>r[1]&&(r[0]=r[1])}function contain$1(r,t){return r>=t[0]&&r<=t[1]}function normalize$2(r,t){return t[1]===t[0]?.5:(r-t[0])/(t[1]-t[0])}function scale(r,t){return r*(t[1]-t[0])+t[0]}var OrdinalScale=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;o.type="ordinal";var a=o.getSetting("ordinalMeta");return a||(a=new OrdinalMeta$1({})),isArray$1(a)&&(a=new OrdinalMeta$1({categories:map$1(a,function(l){return isObject$3(l)?l.value:l})})),o._ordinalMeta=a,o._extent=o.getSetting("extent")||[0,a.categories.length-1],o}return t.prototype.parse=function(n){return n==null?NaN:isString(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},t.prototype.contain=function(n){return n=this.parse(n),contain$1(n,this._extent)&&this._ordinalMeta.categories[n]!=null},t.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),normalize$2(n,this._extent)},t.prototype.scale=function(n){return n=Math.round(scale(n,this._extent)),this.getRawOrdinalNumber(n)},t.prototype.getTicks=function(){for(var n=[],o=this._extent,a=o[0];a<=o[1];)n.push({value:a}),a++;return n},t.prototype.getMinorTicks=function(n){},t.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var o=n.ordinalNumbers,a=this._ordinalNumbersByTick=[],l=this._ticksByOrdinalNumber=[],d=0,g=this._ordinalMeta.categories.length,y=Math.min(g,o.length);d<y;++d){var S=o[d];a[d]=S,l[S]=d}for(var x=0;d<g;++d){for(;l[x]!=null;)x++;a.push(x),l[x]=d}},t.prototype._getTickNumber=function(n){var o=this._ticksByOrdinalNumber;return o&&n>=0&&n<o.length?o[n]:n},t.prototype.getRawOrdinalNumber=function(n){var o=this._ordinalNumbersByTick;return o&&n>=0&&n<o.length?o[n]:n},t.prototype.getLabel=function(n){if(!this.isBlank()){var o=this.getRawOrdinalNumber(n.value),a=this._ordinalMeta.categories[o];return a==null?"":a+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(n,o){this.unionExtent(n.getApproximateExtent(o))},t.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Scale$1);Scale$1.registerClass(OrdinalScale);const OrdinalScale$1=OrdinalScale;var roundNumber=round$3,IntervalScale=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return t.prototype.parse=function(n){return n},t.prototype.contain=function(n){return contain$1(n,this._extent)},t.prototype.normalize=function(n){return normalize$2(n,this._extent)},t.prototype.scale=function(n){return scale(n,this._extent)},t.prototype.setExtent=function(n,o){var a=this._extent;isNaN(n)||(a[0]=parseFloat(n)),isNaN(o)||(a[1]=parseFloat(o))},t.prototype.unionExtent=function(n){var o=this._extent;n[0]<o[0]&&(o[0]=n[0]),n[1]>o[1]&&(o[1]=n[1]),this.setExtent(o[0],o[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(n)},t.prototype.getTicks=function(n){var o=this._interval,a=this._extent,l=this._niceExtent,d=this._intervalPrecision,g=[];if(!o)return g;var y=1e4;a[0]<l[0]&&(n?g.push({value:roundNumber(l[0]-o,d)}):g.push({value:a[0]}));for(var S=l[0];S<=l[1]&&(g.push({value:S}),S=roundNumber(S+o,d),S!==g[g.length-1].value);)if(g.length>y)return[];var x=g.length?g[g.length-1].value:l[1];return a[1]>x&&(n?g.push({value:roundNumber(x+o,d)}):g.push({value:a[1]})),g},t.prototype.getMinorTicks=function(n){for(var o=this.getTicks(!0),a=[],l=this.getExtent(),d=1;d<o.length;d++){for(var g=o[d],y=o[d-1],S=0,x=[],w=g.value-y.value,c=w/n;S<n-1;){var A=roundNumber(y.value+(S+1)*c);A>l[0]&&A<l[1]&&x.push(A),S++}a.push(x)}return a},t.prototype.getLabel=function(n,o){if(n==null)return"";var a=o&&o.precision;a==null?a=getPrecision(n.value)||0:a==="auto"&&(a=this._intervalPrecision);var l=roundNumber(n.value,a,!0);return addCommas(l)},t.prototype.calcNiceTicks=function(n,o,a){n=n||5;var l=this._extent,d=l[1]-l[0];if(isFinite(d)){d<0&&(d=-d,l.reverse());var g=intervalScaleNiceTicks(l,n,o,a);this._intervalPrecision=g.intervalPrecision,this._interval=g.interval,this._niceExtent=g.niceTickExtent}},t.prototype.calcNiceExtent=function(n){var o=this._extent;if(o[0]===o[1])if(o[0]!==0){var a=Math.abs(o[0]);n.fixMax||(o[1]+=a/2),o[0]-=a/2}else o[1]=1;var l=o[1]-o[0];isFinite(l)||(o[0]=0,o[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var d=this._interval;n.fixMin||(o[0]=roundNumber(Math.floor(o[0]/d)*d)),n.fixMax||(o[1]=roundNumber(Math.ceil(o[1]/d)*d))},t.prototype.setNiceExtent=function(n,o){this._niceExtent=[n,o]},t.type="interval",t}(Scale$1);Scale$1.registerClass(IntervalScale);const IntervalScale$1=IntervalScale;var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(r){return isArray$1(r)?supportFloat32Array?new Float32Array(r):r:new Float32ArrayCtor(r)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(r){return r.get("stack")||STACK_PREFIX+r.seriesIndex}function getAxisKey$1(r){return r.dim+r.index}function getLayoutOnAxis(r){var t=[],n=r.axis,o="axis0";if(n.type==="category"){for(var a=n.getBandWidth(),l=0;l<r.count;l++)t.push(defaults({bandWidth:a,axisKey:o,stackId:STACK_PREFIX+l},r));for(var d=doCalBarWidthAndOffset(t),g=[],l=0;l<r.count;l++){var y=d[o][STACK_PREFIX+l];y.offsetCenter=y.offset+y.width/2,g.push(y)}return g}}function prepareLayoutBarSeries(r,t){var n=[];return t.eachSeriesByType(r,function(o){isOnCartesian(o)&&n.push(o)}),n}function getValueAxesMinGaps(r){var t={};each$f(r,function(y){var S=y.coordinateSystem,x=S.getBaseAxis();if(!(x.type!=="time"&&x.type!=="value"))for(var w=y.getData(),c=x.dim+"_"+x.index,A=w.getDimensionIndex(w.mapDimension(x.dim)),R=w.getStore(),L=0,$=R.count();L<$;++L){var O=R.get(A,L);t[c]?t[c].push(O):t[c]=[O]}});var n={};for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];if(a){a.sort(function(y,S){return y-S});for(var l=null,d=1;d<a.length;++d){var g=a[d]-a[d-1];g>0&&(l=l===null?g:Math.min(l,g))}n[o]=l}}return n}function makeColumnLayout(r){var t=getValueAxesMinGaps(r),n=[];return each$f(r,function(o){var a=o.coordinateSystem,l=a.getBaseAxis(),d=l.getExtent(),g;if(l.type==="category")g=l.getBandWidth();else if(l.type==="value"||l.type==="time"){var y=l.dim+"_"+l.index,S=t[y],x=Math.abs(d[1]-d[0]),w=l.scale.getExtent(),c=Math.abs(w[1]-w[0]);g=S?x/c*S:x}else{var A=o.getData();g=Math.abs(d[1]-d[0])/A.count()}var R=parsePercent(o.get("barWidth"),g),L=parsePercent(o.get("barMaxWidth"),g),$=parsePercent(o.get("barMinWidth")||(isInLargeMode(o)?.5:1),g),O=o.get("barGap"),z=o.get("barCategoryGap");n.push({bandWidth:g,barWidth:R,barMaxWidth:L,barMinWidth:$,barGap:O,barCategoryGap:z,axisKey:getAxisKey$1(l),stackId:getSeriesStackId$1(o)})}),doCalBarWidthAndOffset(n)}function doCalBarWidthAndOffset(r){var t={};each$f(r,function(o,a){var l=o.axisKey,d=o.bandWidth,g=t[l]||{bandWidth:d,remainedWidth:d,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},y=g.stacks;t[l]=g;var S=o.stackId;y[S]||g.autoWidthCount++,y[S]=y[S]||{width:0,maxWidth:0};var x=o.barWidth;x&&!y[S].width&&(y[S].width=x,x=Math.min(g.remainedWidth,x),g.remainedWidth-=x);var w=o.barMaxWidth;w&&(y[S].maxWidth=w);var c=o.barMinWidth;c&&(y[S].minWidth=c);var A=o.barGap;A!=null&&(g.gap=A);var R=o.barCategoryGap;R!=null&&(g.categoryGap=R)});var n={};return each$f(t,function(o,a){n[a]={};var l=o.stacks,d=o.bandWidth,g=o.categoryGap;if(g==null){var y=keys(l).length;g=Math.max(35-y*4,15)+"%"}var S=parsePercent(g,d),x=parsePercent(o.gap,1),w=o.remainedWidth,c=o.autoWidthCount,A=(w-S)/(c+(c-1)*x);A=Math.max(A,0),each$f(l,function(O){var z=O.maxWidth,V=O.minWidth;if(O.width){var j=O.width;z&&(j=Math.min(j,z)),V&&(j=Math.max(j,V)),O.width=j,w-=j+x*j,c--}else{var j=A;z&&z<j&&(j=Math.min(z,w)),V&&V>j&&(j=V),j!==A&&(O.width=j,w-=j+x*j,c--)}}),A=(w-S)/(c+(c-1)*x),A=Math.max(A,0);var R=0,L;each$f(l,function(O,z){O.width||(O.width=A),L=O,R+=O.width*(1+x)}),L&&(R-=L.width*x);var $=-R/2;each$f(l,function(O,z){n[a][z]=n[a][z]||{bandWidth:d,offset:$,width:O.width},$+=O.width*(1+x)})}),n}function retrieveColumnLayout(r,t,n){if(r&&t){var o=r[getAxisKey$1(t)];return o!=null&&n!=null?o[getSeriesStackId$1(n)]:o}}function layout$3(r,t){var n=prepareLayoutBarSeries(r,t),o=makeColumnLayout(n);each$f(n,function(a){var l=a.getData(),d=a.coordinateSystem,g=d.getBaseAxis(),y=getSeriesStackId$1(a),S=o[getAxisKey$1(g)][y],x=S.offset,w=S.width;l.setLayout({bandWidth:S.bandWidth,offset:x,size:w})})}function createProgressiveLayout(r){return{seriesType:r,plan:createRenderPlanner(),reset:function(t){if(isOnCartesian(t)){var n=t.getData(),o=t.coordinateSystem,a=o.getBaseAxis(),l=o.getOtherAxis(a),d=n.getDimensionIndex(n.mapDimension(l.dim)),g=n.getDimensionIndex(n.mapDimension(a.dim)),y=t.get("showBackground",!0),S=n.mapDimension(l.dim),x=n.getCalculationInfo("stackResultDimension"),w=isDimensionStacked(n,S)&&!!n.getCalculationInfo("stackedOnSeries"),c=l.isHorizontal(),A=getValueAxisStart(a,l),R=isInLargeMode(t),L=t.get("barMinHeight")||0,$=x&&n.getDimensionIndex(x),O=n.getLayout("size"),z=n.getLayout("offset");return{progress:function(V,j){for(var K=V.count,Z=R&&createFloat32Array(K*3),q=R&&y&&createFloat32Array(K*3),ie=R&&createFloat32Array(K),te=o.master.getRect(),oe=c?te.width:te.height,re,he=j.getStore(),_e=0;(re=V.next())!=null;){var me=he.get(w?$:d,re),be=he.get(g,re),Q=A,Ne=void 0;w&&(Ne=+me-he.get(d,re));var Ee=void 0,Ge=void 0,it=void 0,Te=void 0;if(c){var Ke=o.dataToPoint([me,be]);if(w){var Tt=o.dataToPoint([Ne,be]);Q=Tt[0]}Ee=Q,Ge=Ke[1]+z,it=Ke[0]-Q,Te=O,Math.abs(it)<L&&(it=(it<0?-1:1)*L)}else{var Ke=o.dataToPoint([be,me]);if(w){var Tt=o.dataToPoint([be,Ne]);Q=Tt[1]}Ee=Ke[0]+z,Ge=Q,it=O,Te=Ke[1]-Q,Math.abs(Te)<L&&(Te=(Te<=0?-1:1)*L)}R?(Z[_e]=Ee,Z[_e+1]=Ge,Z[_e+2]=c?it:Te,q&&(q[_e]=c?te.x:Ee,q[_e+1]=c?Ge:te.y,q[_e+2]=oe),ie[re]=re):j.setItemLayout(re,{x:Ee,y:Ge,width:it,height:Te}),_e+=3}R&&j.setLayout({largePoints:Z,largeDataIndices:ie,largeBackgroundPoints:q,valueAxisHorizontal:c})}}}}}}function isOnCartesian(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function isInLargeMode(r){return r.pipelineContext&&r.pipelineContext.large}function getValueAxisStart(r,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var bisect=function(r,t,n,o){for(;n<o;){var a=n+o>>>1;r[a][1]<t?n=a+1:o=a}return n},TimeScale=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="time",o}return t.prototype.getLabel=function(n){var o=this.getSetting("useUTC");return format$1(n.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,o,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(n,o,a){var l=this.getSetting("useUTC"),d=this.getSetting("locale");return leveledFormat(n,o,a,d,l)},t.prototype.getTicks=function(){var n=this._interval,o=this._extent,a=[];if(!n)return a;a.push({value:o[0],level:0});var l=this.getSetting("useUTC"),d=getIntervalTicks(this._minLevelUnit,this._approxInterval,l,o);return a=a.concat(d),a.push({value:o[1],level:0}),a},t.prototype.calcNiceExtent=function(n){var o=this._extent;if(o[0]===o[1]&&(o[0]-=ONE_DAY,o[1]+=ONE_DAY),o[1]===-1/0&&o[0]===1/0){var a=new Date;o[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),o[0]=o[1]-ONE_DAY}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},t.prototype.calcNiceTicks=function(n,o,a){n=n||10;var l=this._extent,d=l[1]-l[0];this._approxInterval=d/n,o!=null&&this._approxInterval<o&&(this._approxInterval=o),a!=null&&this._approxInterval>a&&(this._approxInterval=a);var g=scaleIntervals.length,y=Math.min(bisect(scaleIntervals,this._approxInterval,0,g),g-1);this._interval=scaleIntervals[y][1],this._minLevelUnit=scaleIntervals[Math.max(y-1,0)][0]},t.prototype.parse=function(n){return isNumber(n)?n:+parseDate(n)},t.prototype.contain=function(n){return contain$1(this.parse(n),this._extent)},t.prototype.normalize=function(n){return normalize$2(this.parse(n),this._extent)},t.prototype.scale=function(n){return scale(n,this._extent)},t.type="time",t}(IntervalScale$1),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(r,t,n,o){var a=parseDate(t),l=parseDate(n),d=function(R){return getUnitValue(a,R,o)===getUnitValue(l,R,o)},g=function(){return d("year")},y=function(){return g()&&d("month")},S=function(){return y()&&d("day")},x=function(){return S()&&d("hour")},w=function(){return x()&&d("minute")},c=function(){return w()&&d("second")},A=function(){return c()&&d("millisecond")};switch(r){case"year":return g();case"month":return y();case"day":return S();case"hour":return x();case"minute":return w();case"second":return c();case"millisecond":return A()}}function getDateInterval(r,t){return r/=ONE_DAY,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function getMonthInterval(r){var t=30*ONE_DAY;return r/=t,r>6?6:r>3?3:r>2?2:1}function getHourInterval(r){return r/=ONE_HOUR,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function getMinutesAndSecondsInterval(r,t){return r/=t?ONE_MINUTE:ONE_SECOND,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function getMillisecondsInterval(r){return nice(r,!0)}function getFirstTimestampOfUnit(r,t,n){var o=new Date(r);switch(getPrimaryTimeUnit(t)){case"year":case"month":o[monthSetterName(n)](0);case"day":o[dateSetterName(n)](1);case"hour":o[hoursSetterName(n)](0);case"minute":o[minutesSetterName(n)](0);case"second":o[secondsSetterName(n)](0),o[millisecondsSetterName(n)](0)}return o.getTime()}function getIntervalTicks(r,t,n,o){var a=1e4,l=timeUnits,d=0;function g(oe,re,he,_e,me,be,Q){for(var Ne=new Date(re),Ee=re,Ge=Ne[_e]();Ee<he&&Ee<=o[1];)Q.push({value:Ee}),Ge+=oe,Ne[me](Ge),Ee=Ne.getTime();Q.push({value:Ee,notAdd:!0})}function y(oe,re,he){var _e=[],me=!re.length;if(!isUnitValueSame(getPrimaryTimeUnit(oe),o[0],o[1],n)){me&&(re=[{value:getFirstTimestampOfUnit(new Date(o[0]),oe,n)},{value:o[1]}]);for(var be=0;be<re.length-1;be++){var Q=re[be].value,Ne=re[be+1].value;if(Q!==Ne){var Ee=void 0,Ge=void 0,it=void 0,Te=!1;switch(oe){case"year":Ee=Math.max(1,Math.round(t/ONE_DAY/365)),Ge=fullYearGetterName(n),it=fullYearSetterName(n);break;case"half-year":case"quarter":case"month":Ee=getMonthInterval(t),Ge=monthGetterName(n),it=monthSetterName(n);break;case"week":case"half-week":case"day":Ee=getDateInterval(t),Ge=dateGetterName(n),it=dateSetterName(n),Te=!0;break;case"half-day":case"quarter-day":case"hour":Ee=getHourInterval(t),Ge=hoursGetterName(n),it=hoursSetterName(n);break;case"minute":Ee=getMinutesAndSecondsInterval(t,!0),Ge=minutesGetterName(n),it=minutesSetterName(n);break;case"second":Ee=getMinutesAndSecondsInterval(t,!1),Ge=secondsGetterName(n),it=secondsSetterName(n);break;case"millisecond":Ee=getMillisecondsInterval(t),Ge=millisecondsGetterName(n),it=millisecondsSetterName(n);break}g(Ee,Q,Ne,Ge,it,Te,_e),oe==="year"&&he.length>1&&be===0&&he.unshift({value:he[0].value-Ee})}}for(var be=0;be<_e.length;be++)he.push(_e[be]);return _e}}for(var S=[],x=[],w=0,c=0,A=0;A<l.length&&d++<a;++A){var R=getPrimaryTimeUnit(l[A]);if(isPrimaryTimeUnit(l[A])){y(l[A],S[S.length-1]||[],x);var L=l[A+1]?getPrimaryTimeUnit(l[A+1]):null;if(R!==L){if(x.length){c=w,x.sort(function(oe,re){return oe.value-re.value});for(var $=[],O=0;O<x.length;++O){var z=x[O].value;(O===0||x[O-1].value!==z)&&($.push(x[O]),z>=o[0]&&z<=o[1]&&w++)}var V=(o[1]-o[0])/t;if(w>V*1.5&&c>V/1.5||(S.push($),w>V||r===l[A]))break}x=[]}}}for(var j=filter(map$1(S,function(oe){return filter(oe,function(re){return re.value>=o[0]&&re.value<=o[1]&&!re.notAdd})}),function(oe){return oe.length>0}),K=[],Z=j.length-1,A=0;A<j.length;++A)for(var q=j[A],ie=0;ie<q.length;++ie)K.push({value:q[ie].value,level:Z-A});K.sort(function(oe,re){return oe.value-re.value});for(var te=[],A=0;A<K.length;++A)(A===0||K[A].value!==K[A-1].value)&&te.push(K[A]);return te}Scale$1.registerClass(TimeScale);const TimeScale$1=TimeScale;var scaleProto=Scale$1.prototype,intervalScaleProto=IntervalScale$1.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new IntervalScale$1,n._interval=0,n}return t.prototype.getTicks=function(n){var o=this._originalScale,a=this._extent,l=o.getExtent(),d=intervalScaleProto.getTicks.call(this,n);return map$1(d,function(g){var y=g.value,S=round$3(mathPow$1(this.base,y));return S=y===a[0]&&this._fixMin?fixRoundingError(S,l[0]):S,S=y===a[1]&&this._fixMax?fixRoundingError(S,l[1]):S,{value:S}},this)},t.prototype.setExtent=function(n,o){var a=mathLog$1(this.base);n=mathLog$1(Math.max(0,n))/a,o=mathLog$1(Math.max(0,o))/a,intervalScaleProto.setExtent.call(this,n,o)},t.prototype.getExtent=function(){var n=this.base,o=scaleProto.getExtent.call(this);o[0]=mathPow$1(n,o[0]),o[1]=mathPow$1(n,o[1]);var a=this._originalScale,l=a.getExtent();return this._fixMin&&(o[0]=fixRoundingError(o[0],l[0])),this._fixMax&&(o[1]=fixRoundingError(o[1],l[1])),o},t.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var o=this.base;n[0]=mathLog$1(n[0])/mathLog$1(o),n[1]=mathLog$1(n[1])/mathLog$1(o),scaleProto.unionExtent.call(this,n)},t.prototype.unionExtentFromData=function(n,o){this.unionExtent(n.getApproximateExtent(o))},t.prototype.calcNiceTicks=function(n){n=n||10;var o=this._extent,a=o[1]-o[0];if(!(a===1/0||a<=0)){var l=quantity(a),d=n/a*l;for(d<=.5&&(l*=10);!isNaN(l)&&Math.abs(l)<1&&Math.abs(l)>0;)l*=10;var g=[round$3(mathCeil$1(o[0]/l)*l),round$3(mathFloor$1(o[1]/l)*l)];this._interval=l,this._niceExtent=g}},t.prototype.calcNiceExtent=function(n){intervalScaleProto.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},t.prototype.parse=function(n){return n},t.prototype.contain=function(n){return n=mathLog$1(n)/mathLog$1(this.base),contain$1(n,this._extent)},t.prototype.normalize=function(n){return n=mathLog$1(n)/mathLog$1(this.base),normalize$2(n,this._extent)},t.prototype.scale=function(n){return n=scale(n,this._extent),mathPow$1(this.base,n)},t.type="log",t}(Scale$1),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(r,t){return roundingErrorFix(r,getPrecision(t))}Scale$1.registerClass(LogScale);const LogScale$1=LogScale;var ScaleRawExtentInfo=function(){function r(t,n,o){this._prepareParams(t,n,o)}return r.prototype._prepareParams=function(t,n,o){o[1]<o[0]&&(o=[NaN,NaN]),this._dataMin=o[0],this._dataMax=o[1];var a=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var l=this._modelMinRaw=n.get("min",!0);isFunction(l)?this._modelMinNum=parseAxisModelMinMax(t,l({min:o[0],max:o[1]})):l!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(t,l));var d=this._modelMaxRaw=n.get("max",!0);if(isFunction(d)?this._modelMaxNum=parseAxisModelMinMax(t,d({min:o[0],max:o[1]})):d!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(t,d)),a)this._axisDataLen=n.getCategories().length;else{var g=n.get("boundaryGap"),y=isArray$1(g)?g:[g||0,g||0];typeof y[0]=="boolean"||typeof y[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(y[0],1),parsePercent$1(y[1],1)]}},r.prototype.calculate=function(){var t=this._isOrdinal,n=this._dataMin,o=this._dataMax,a=this._axisDataLen,l=this._boundaryGapInner,d=t?null:o-n||Math.abs(n),g=this._modelMinRaw==="dataMin"?n:this._modelMinNum,y=this._modelMaxRaw==="dataMax"?o:this._modelMaxNum,S=g!=null,x=y!=null;g==null&&(g=t?a?0:NaN:n-l[0]*d),y==null&&(y=t?a?a-1:NaN:o+l[1]*d),(g==null||!isFinite(g))&&(g=NaN),(y==null||!isFinite(y))&&(y=NaN);var w=eqNaN(g)||eqNaN(y)||t&&!a;this._needCrossZero&&(g>0&&y>0&&!S&&(g=0),g<0&&y<0&&!x&&(y=0));var c=this._determinedMin,A=this._determinedMax;return c!=null&&(g=c,S=!0),A!=null&&(y=A,x=!0),{min:g,max:y,minFixed:S,maxFixed:x,isBlank:w}},r.prototype.modifyDataMinMax=function(t,n){this[DATA_MIN_MAX_ATTR[t]]=n},r.prototype.setDeterminedMinMax=function(t,n){var o=DETERMINED_MIN_MAX_ATTR[t];this[o]=n},r.prototype.freeze=function(){this.frozen=!0},r}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(r,t,n){var o=r.rawExtentInfo;return o||(o=new ScaleRawExtentInfo(r,t,n),r.rawExtentInfo=o,o)}function parseAxisModelMinMax(r,t){return t==null?null:eqNaN(t)?NaN:r.parse(t)}function getScaleExtent(r,t){var n=r.type,o=ensureScaleRawExtentInfo(r,t,r.getExtent()).calculate();r.setBlank(o.isBlank);var a=o.min,l=o.max,d=t.ecModel;if(d&&n==="time"){var g=prepareLayoutBarSeries("bar",d),y=!1;if(each$f(g,function(w){y=y||w.getBaseAxis()===t.axis}),y){var S=makeColumnLayout(g),x=adjustScaleForOverflow(a,l,t,S);a=x.min,l=x.max}}return{extent:[a,l],fixMin:o.minFixed,fixMax:o.maxFixed}}function adjustScaleForOverflow(r,t,n,o){var a=n.axis.getExtent(),l=a[1]-a[0],d=retrieveColumnLayout(o,n.axis);if(d===void 0)return{min:r,max:t};var g=1/0;each$f(d,function(A){g=Math.min(A.offset,g)});var y=-1/0;each$f(d,function(A){y=Math.max(A.offset+A.width,y)}),g=Math.abs(g),y=Math.abs(y);var S=g+y,x=t-r,w=1-(g+y)/l,c=x/w-x;return t+=c*(y/S),r-=c*(g/S),{min:r,max:t}}function niceScaleExtent(r,t){var n=t,o=getScaleExtent(r,n),a=o.extent,l=n.get("splitNumber");r instanceof LogScale$1&&(r.base=n.get("logBase"));var d=r.type,g=n.get("interval"),y=d==="interval"||d==="time";r.setExtent(a[0],a[1]),r.calcNiceExtent({splitNumber:l,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:y?n.get("minInterval"):null,maxInterval:y?n.get("maxInterval"):null}),g!=null&&r.setInterval&&r.setInterval(g)}function createScaleByModel$1(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new OrdinalScale$1({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(Scale$1.getClass(t)||IntervalScale$1)}}function ifAxisCrossZero(r){var t=r.scale.getExtent(),n=t[0],o=t[1];return!(n>0&&o>0||n<0&&o<0)}function makeLabelFormatter(r){var t=r.getLabelModel().get("formatter"),n=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(o){return function(a,l){return r.scale.getFormattedLabel(a,l,o)}}(t):isString(t)?function(o){return function(a){var l=r.scale.getLabel(a),d=o.replace("{value}",l??"");return d}}(t):isFunction(t)?function(o){return function(a,l){return n!=null&&(l=a.value-n),o(getAxisRawValue(r,a),l,a.level!=null?{level:a.level}:null)}}(t):function(o){return r.scale.getLabel(o)}}function getAxisRawValue(r,t){return r.type==="category"?r.scale.getLabel(t):t.value}function estimateLabelUnionRect(r){var t=r.model,n=r.scale;if(!(!t.get(["axisLabel","show"])||n.isBlank())){var o,a,l=n.getExtent();n instanceof OrdinalScale$1?a=n.count():(o=n.getTicks(),a=o.length);var d=r.getLabelModel(),g=makeLabelFormatter(r),y,S=1;a>40&&(S=Math.ceil(a/40));for(var x=0;x<a;x+=S){var w=o?o[x]:{value:l[0]+x},c=g(w,x),A=d.getTextRect(c),R=rotateTextRect(A,d.get("rotate")||0);y?y.union(R):y=R}return y}}function rotateTextRect(r,t){var n=t*Math.PI/180,o=r.width,a=r.height,l=o*Math.abs(Math.cos(n))+Math.abs(a*Math.sin(n)),d=o*Math.abs(Math.sin(n))+Math.abs(a*Math.cos(n)),g=new BoundingRect$1(r.x,r.y,l,d);return g}function getOptionCategoryInterval(r){var t=r.get("interval");return t??"auto"}function shouldShowAllLabels(r){return r.type==="category"&&getOptionCategoryInterval(r.getLabelModel())===0}function getDataDimensionsOnAxis(r,t){var n={};return each$f(r.mapDimensionsAll(t),function(o){n[getStackedDimension(r,o)]=!0}),keys(n)}function unionAxisExtentFromData(r,t,n){t&&each$f(getDataDimensionsOnAxis(t,n),function(o){var a=t.getApproximateExtent(o);a[0]<r[0]&&(r[0]=a[0]),a[1]>r[1]&&(r[1]=a[1])})}var AxisModelCommonMixin=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},r.prototype.getCoordSysModel=function(){},r}();function createList$2(r){return createSeriesData(null,r)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(r,t){var n=t;t instanceof Model$1||(n=new Model$1(t));var o=createScaleByModel$1(n);return o.setExtent(r[0],r[1]),niceScaleExtent(o,n),o}function mixinAxisModelCommonMethods(r){mixin(r,AxisModelCommonMixin)}function createTextStyle(r,t){return t=t||{},createTextStyle$1(r,null,null,t.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(r,t){return Math.abs(r-t)<EPSILON}function contain(r,t,n){var o=0,a=r[0];if(!a)return!1;for(var l=1;l<r.length;l++){var d=r[l];o+=windingLine(a[0],a[1],d[0],d[1],t,n),a=d}var g=r[0];return(!isAroundEqual(a[0],g[0])||!isAroundEqual(a[1],g[1]))&&(o+=windingLine(a[0],a[1],g[0],g[1],t,n)),o!==0}var TMP_TRANSFORM=[];function transformPoints(r,t){for(var n=0;n<r.length;n++)applyTransform$1(r[n],r[n],t)}function updateBBoxFromPoints(r,t,n,o){for(var a=0;a<r.length;a++){var l=r[a];o&&(l=o.project(l)),l&&isFinite(l[0])&&isFinite(l[1])&&(min$1(t,t,l),max$1(n,n,l))}}function centroid$1(r){for(var t=0,n=0,o=0,a=r.length,l=r[a-1][0],d=r[a-1][1],g=0;g<a;g++){var y=r[g][0],S=r[g][1],x=l*S-y*d;t+=x,n+=(l+y)*x,o+=(d+S)*x,l=y,d=S}return t?[n/t/3,o/t/3,t]:[r[0][0]||0,r[0][1]||0]}var Region=function(){function r(t){this.name=t}return r.prototype.setCenter=function(t){this._center=t},r.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},r}(),GeoJSONPolygonGeometry=function(){function r(t,n){this.type="polygon",this.exterior=t,this.interiors=n}return r}(),GeoJSONLineStringGeometry=function(){function r(t){this.type="linestring",this.points=t}return r}(),GeoJSONRegion=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this,n)||this;return l.type="geoJSON",l.geometries=o,l._center=a&&[a[0],a[1]],l}return t.prototype.calcCenter=function(){for(var n=this.geometries,o,a=0,l=0;l<n.length;l++){var d=n[l],g=d.exterior,y=g&&g.length;y>a&&(o=d,a=y)}if(o)return centroid$1(o.exterior);var S=this.getBoundingRect();return[S.x+S.width/2,S.y+S.height/2]},t.prototype.getBoundingRect=function(n){var o=this._rect;if(o&&!n)return o;var a=[1/0,1/0],l=[-1/0,-1/0],d=this.geometries;return each$f(d,function(g){g.type==="polygon"?updateBBoxFromPoints(g.exterior,a,l,n):each$f(g.points,function(y){updateBBoxFromPoints(y,a,l,n)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])||(a[0]=a[1]=l[0]=l[1]=0),o=new BoundingRect$1(a[0],a[1],l[0]-a[0],l[1]-a[1]),n||(this._rect=o),o},t.prototype.contain=function(n){var o=this.getBoundingRect(),a=this.geometries;if(!o.contain(n[0],n[1]))return!1;e:for(var l=0,d=a.length;l<d;l++){var g=a[l];if(g.type==="polygon"){var y=g.exterior,S=g.interiors;if(contain(y,n[0],n[1])){for(var x=0;x<(S?S.length:0);x++)if(contain(S[x],n[0],n[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(n,o,a,l){var d=this.getBoundingRect(),g=d.width/d.height;a?l||(l=a/g):a=g*l;for(var y=new BoundingRect$1(n,o,a,l),S=d.calculateTransform(y),x=this.geometries,w=0;w<x.length;w++){var c=x[w];c.type==="polygon"?(transformPoints(c.exterior,S),each$f(c.interiors,function(A){transformPoints(A,S)})):each$f(c.points,function(A){transformPoints(A,S)})}d=this._rect,d.copy(y),this._center=[d.x+d.width/2,d.y+d.height/2]},t.prototype.cloneShallow=function(n){n==null&&(n=this.name);var o=new t(n,this.geometries,this._center);return o._rect=this._rect,o.transformTo=null,o},t}(Region),GeoSVGRegion=function(r){__extends(t,r);function t(n,o){var a=r.call(this,n)||this;return a.type="geoSVG",a._elOnlyForCalculate=o,a}return t.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,o=n.getBoundingRect(),a=[o.x+o.width/2,o.y+o.height/2],l=identity(TMP_TRANSFORM),d=n;d&&!d.isGeoSVGGraphicRoot;)mul(l,d.getLocalTransform(),l),d=d.parent;return invert(l,l),applyTransform$1(a,a,l),a},t}(Region);function decode(r){if(!r.UTF8Encoding)return r;var t=r,n=t.UTF8Scale;n==null&&(n=1024);var o=t.features;return each$f(o,function(a){var l=a.geometry,d=l.encodeOffsets,g=l.coordinates;if(d)switch(l.type){case"LineString":l.coordinates=decodeRing(g,d,n);break;case"Polygon":decodeRings(g,d,n);break;case"MultiLineString":decodeRings(g,d,n);break;case"MultiPolygon":each$f(g,function(y,S){return decodeRings(y,d[S],n)})}}),t.UTF8Encoding=!1,t}function decodeRings(r,t,n){for(var o=0;o<r.length;o++)r[o]=decodeRing(r[o],t[o],n)}function decodeRing(r,t,n){for(var o=[],a=t[0],l=t[1],d=0;d<r.length;d+=2){var g=r.charCodeAt(d)-64,y=r.charCodeAt(d+1)-64;g=g>>1^-(g&1),y=y>>1^-(y&1),g+=a,y+=l,a=g,l=y,o.push([g/n,y/n])}return o}function parseGeoJSON(r,t){return r=decode(r),map$1(filter(r.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var o=n.properties,a=n.geometry,l=[];switch(a.type){case"Polygon":var d=a.coordinates;l.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)));break;case"MultiPolygon":each$f(a.coordinates,function(y){y[0]&&l.push(new GeoJSONPolygonGeometry(y[0],y.slice(1)))});break;case"LineString":l.push(new GeoJSONLineStringGeometry([a.coordinates]));break;case"MultiLineString":l.push(new GeoJSONLineStringGeometry(a.coordinates))}var g=new GeoJSONRegion(o[t||"name"],l,o.cp);return g.properties=o,g})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc:Arc$1,BezierCurve:BezierCurve$1,BoundingRect:BoundingRect$1,Circle:Circle$1,CompoundPath:CompoundPath$1,Ellipse:Ellipse$1,Group:Group$4,Image:ZRImage$1,IncrementalDisplayable:IncrementalDisplayable$1,Line:Line$3,LinearGradient:LinearGradient$1,Polygon:Polygon$1,Polyline:Polyline$3,RadialGradient:RadialGradient$1,Rect:Rect$3,Ring:Ring$1,Sector:Sector$1,Text:ZRText$1,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction,isObject:isObject$3,isString,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function createAxisLabels(r){return r.type==="category"?makeCategoryLabels(r):makeRealNumberLabels(r)}function createAxisTicks(r,t){return r.type==="category"?makeCategoryTicks(r,t):{ticks:map$1(r.scale.getTicks(),function(n){return n.value})}}function makeCategoryLabels(r){var t=r.getLabelModel(),n=makeCategoryLabelsActually(r,t);return!t.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function makeCategoryLabelsActually(r,t){var n=getListCache(r,"labels"),o=getOptionCategoryInterval(t),a=listCacheGet(n,o);if(a)return a;var l,d;return isFunction(o)?l=makeLabelsByCustomizedCategoryInterval(r,o):(d=o==="auto"?makeAutoCategoryInterval(r):o,l=makeLabelsByNumericCategoryInterval(r,d)),listCacheSet(n,o,{labels:l,labelCategoryInterval:d})}function makeCategoryTicks(r,t){var n=getListCache(r,"ticks"),o=getOptionCategoryInterval(t),a=listCacheGet(n,o);if(a)return a;var l,d;if((!t.get("show")||r.scale.isBlank())&&(l=[]),isFunction(o))l=makeLabelsByCustomizedCategoryInterval(r,o,!0);else if(o==="auto"){var g=makeCategoryLabelsActually(r,r.getLabelModel());d=g.labelCategoryInterval,l=map$1(g.labels,function(y){return y.tickValue})}else d=o,l=makeLabelsByNumericCategoryInterval(r,d,!0);return listCacheSet(n,o,{ticks:l,tickCategoryInterval:d})}function makeRealNumberLabels(r){var t=r.scale.getTicks(),n=makeLabelFormatter(r);return{labels:map$1(t,function(o,a){return{level:o.level,formattedLabel:n(o,a),rawLabel:r.scale.getLabel(o),tickValue:o.value}})}}function getListCache(r,t){return inner$g(r)[t]||(inner$g(r)[t]=[])}function listCacheGet(r,t){for(var n=0;n<r.length;n++)if(r[n].key===t)return r[n].value}function listCacheSet(r,t,n){return r.push({key:t,value:n}),n}function makeAutoCategoryInterval(r){var t=inner$g(r).autoInterval;return t??(inner$g(r).autoInterval=r.calculateCategoryInterval())}function calculateCategoryInterval(r){var t=fetchAutoCategoryIntervalCalculationParams(r),n=makeLabelFormatter(r),o=(t.axisRotate-t.labelRotate)/180*Math.PI,a=r.scale,l=a.getExtent(),d=a.count();if(l[1]-l[0]<1)return 0;var g=1;d>40&&(g=Math.max(1,Math.floor(d/40)));for(var y=l[0],S=r.dataToCoord(y+1)-r.dataToCoord(y),x=Math.abs(S*Math.cos(o)),w=Math.abs(S*Math.sin(o)),c=0,A=0;y<=l[1];y+=g){var R=0,L=0,$=getBoundingRect(n({value:y}),t.font,"center","top");R=$.width*1.3,L=$.height*1.3,c=Math.max(c,R,7),A=Math.max(A,L,7)}var O=c/x,z=A/w;isNaN(O)&&(O=1/0),isNaN(z)&&(z=1/0);var V=Math.max(0,Math.floor(Math.min(O,z))),j=inner$g(r.model),K=r.getExtent(),Z=j.lastAutoInterval,q=j.lastTickCount;return Z!=null&&q!=null&&Math.abs(Z-V)<=1&&Math.abs(q-d)<=1&&Z>V&&j.axisExtent0===K[0]&&j.axisExtent1===K[1]?V=Z:(j.lastTickCount=d,j.lastAutoInterval=V,j.axisExtent0=K[0],j.axisExtent1=K[1]),V}function fetchAutoCategoryIntervalCalculationParams(r){var t=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function makeLabelsByNumericCategoryInterval(r,t,n){var o=makeLabelFormatter(r),a=r.scale,l=a.getExtent(),d=r.getLabelModel(),g=[],y=Math.max((t||0)+1,1),S=l[0],x=a.count();S!==0&&y>1&&x/y>2&&(S=Math.round(Math.ceil(S/y)*y));var w=shouldShowAllLabels(r),c=d.get("showMinLabel")||w,A=d.get("showMaxLabel")||w;c&&S!==l[0]&&L(l[0]);for(var R=S;R<=l[1];R+=y)L(R);A&&R-y!==l[1]&&L(l[1]);function L($){var O={value:$};g.push(n?$:{formattedLabel:o(O),rawLabel:a.getLabel(O),tickValue:$})}return g}function makeLabelsByCustomizedCategoryInterval(r,t,n){var o=r.scale,a=makeLabelFormatter(r),l=[];return each$f(o.getTicks(),function(d){var g=o.getLabel(d),y=d.value;t(d.value,g)&&l.push(n?y:{formattedLabel:a(d),rawLabel:g,tickValue:y})}),l}var NORMALIZED_EXTENT=[0,1],Axis=function(){function r(t,n,o){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=n,this._extent=o||[0,0]}return r.prototype.contain=function(t){var n=this._extent,o=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return t>=o&&t<=a},r.prototype.containData=function(t){return this.scale.contain(t)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(t){return getPixelPrecision(t||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(t,n){var o=this._extent;o[0]=t,o[1]=n},r.prototype.dataToCoord=function(t,n){var o=this._extent,a=this.scale;return t=a.normalize(t),this.onBand&&a.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,a.count())),linearMap$2(t,NORMALIZED_EXTENT,o,n)},r.prototype.coordToData=function(t,n){var o=this._extent,a=this.scale;this.onBand&&a.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,a.count()));var l=linearMap$2(t,o,NORMALIZED_EXTENT,n);return this.scale.scale(l)},r.prototype.pointToData=function(t,n){},r.prototype.getTicksCoords=function(t){t=t||{};var n=t.tickModel||this.getTickModel(),o=createAxisTicks(this,n),a=o.ticks,l=map$1(a,function(g){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(g):g),tickValue:g}},this),d=n.get("alignWithLabel");return fixOnBandTicksCoords(this,l,d,t.clamp),l},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),n=t.get("splitNumber");n>0&&n<100||(n=5);var o=this.scale.getMinorTicks(n),a=map$1(o,function(l){return map$1(l,function(d){return{coord:this.dataToCoord(d),tickValue:d}},this)},this);return a},r.prototype.getViewLabels=function(){return createAxisLabels(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var t=this._extent,n=this.scale.getExtent(),o=n[1]-n[0]+(this.onBand?1:0);o===0&&(o=1);var a=Math.abs(t[1]-t[0]);return Math.abs(a)/o},r.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},r}();function fixExtentWithBands(r,t){var n=r[1]-r[0],o=t,a=n/o/2;r[0]+=a,r[1]-=a}function fixOnBandTicksCoords(r,t,n,o){var a=t.length;if(!r.onBand||n||!a)return;var l=r.getExtent(),d,g;if(a===1)t[0].coord=l[0],d=t[1]={coord:l[1]};else{var y=t[a-1].tickValue-t[0].tickValue,S=(t[a-1].coord-t[0].coord)/y;each$f(t,function(A){A.coord-=S/2});var x=r.scale.getExtent();g=1+x[1]-t[a-1].tickValue,d={coord:t[a-1].coord+S*g},t.push(d)}var w=l[0]>l[1];c(t[0].coord,l[0])&&(o?t[0].coord=l[0]:t.shift()),o&&c(l[0],t[0].coord)&&t.unshift({coord:l[0]}),c(l[1],d.coord)&&(o?d.coord=l[1]:t.pop()),o&&c(d.coord,l[1])&&t.push({coord:l[1]});function c(A,R){return A=round$3(A),R=round$3(R),w?A>R:A<R}}const Axis$1=Axis;function extendComponentModel(r){var t=ComponentModel$1.extend(r);return ComponentModel$1.registerClass(t),t}function extendComponentView(r){var t=ComponentView$1.extend(r);return ComponentView$1.registerClass(t),t}function extendSeriesModel(r){var t=SeriesModel$1.extend(r);return SeriesModel$1.registerClass(t),t}function extendChartView(r){var t=ChartView$1.extend(r);return ChartView$1.registerClass(t),t}var PI2$2=Math.PI*2,CMD$1=PathProxy$1.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(r,t,n,o,a){var l=n.width,d=n.height;switch(r){case"top":o.set(n.x+l/2,n.y-t),a.set(0,-1);break;case"bottom":o.set(n.x+l/2,n.y+d+t),a.set(0,1);break;case"left":o.set(n.x-t,n.y+d/2),a.set(-1,0);break;case"right":o.set(n.x+l+t,n.y+d/2),a.set(1,0);break}}function projectPointToArc(r,t,n,o,a,l,d,g,y){d-=r,g-=t;var S=Math.sqrt(d*d+g*g);d/=S,g/=S;var x=d*n+r,w=g*n+t;if(Math.abs(o-a)%PI2$2<1e-4)return y[0]=x,y[1]=w,S-n;if(l){var c=o;o=normalizeRadian(a),a=normalizeRadian(c)}else o=normalizeRadian(o),a=normalizeRadian(a);o>a&&(a+=PI2$2);var A=Math.atan2(g,d);if(A<0&&(A+=PI2$2),A>=o&&A<=a||A+PI2$2>=o&&A+PI2$2<=a)return y[0]=x,y[1]=w,S-n;var R=n*Math.cos(o)+r,L=n*Math.sin(o)+t,$=n*Math.cos(a)+r,O=n*Math.sin(a)+t,z=(R-d)*(R-d)+(L-g)*(L-g),V=($-d)*($-d)+(O-g)*(O-g);return z<V?(y[0]=R,y[1]=L,Math.sqrt(z)):(y[0]=$,y[1]=O,Math.sqrt(V))}function projectPointToLine(r,t,n,o,a,l,d,g){var y=a-r,S=l-t,x=n-r,w=o-t,c=Math.sqrt(x*x+w*w);x/=c,w/=c;var A=y*x+S*w,R=A/c;g&&(R=Math.min(Math.max(R,0),1)),R*=c;var L=d[0]=r+R*x,$=d[1]=t+R*w;return Math.sqrt((L-a)*(L-a)+($-l)*($-l))}function projectPointToRect(r,t,n,o,a,l,d){n<0&&(r=r+n,n=-n),o<0&&(t=t+o,o=-o);var g=r+n,y=t+o,S=d[0]=Math.min(Math.max(a,r),g),x=d[1]=Math.min(Math.max(l,t),y);return Math.sqrt((S-a)*(S-a)+(x-l)*(x-l))}var tmpPt=[];function nearestPointOnRect(r,t,n){var o=projectPointToRect(t.x,t.y,t.width,t.height,r.x,r.y,tmpPt);return n.set(tmpPt[0],tmpPt[1]),o}function nearestPointOnPath(r,t,n){for(var o=0,a=0,l=0,d=0,g,y,S=1/0,x=t.data,w=r.x,c=r.y,A=0;A<x.length;){var R=x[A++];A===1&&(o=x[A],a=x[A+1],l=o,d=a);var L=S;switch(R){case CMD$1.M:l=x[A++],d=x[A++],o=l,a=d;break;case CMD$1.L:L=projectPointToLine(o,a,x[A],x[A+1],w,c,tmpPt,!0),o=x[A++],a=x[A++];break;case CMD$1.C:L=cubicProjectPoint(o,a,x[A++],x[A++],x[A++],x[A++],x[A],x[A+1],w,c,tmpPt),o=x[A++],a=x[A++];break;case CMD$1.Q:L=quadraticProjectPoint(o,a,x[A++],x[A++],x[A],x[A+1],w,c,tmpPt),o=x[A++],a=x[A++];break;case CMD$1.A:var $=x[A++],O=x[A++],z=x[A++],V=x[A++],j=x[A++],K=x[A++];A+=1;var Z=!!(1-x[A++]);g=Math.cos(j)*z+$,y=Math.sin(j)*V+O,A<=1&&(l=g,d=y);var q=(w-$)*V/z+$;L=projectPointToArc($,O,V,j,j+K,Z,q,c,tmpPt),o=Math.cos(j+K)*z+$,a=Math.sin(j+K)*V+O;break;case CMD$1.R:l=o=x[A++],d=a=x[A++];var ie=x[A++],te=x[A++];L=projectPointToRect(l,d,ie,te,w,c,tmpPt);break;case CMD$1.Z:L=projectPointToLine(o,a,l,d,w,c,tmpPt,!0),o=l,a=d;break}L<S&&(S=L,n.set(tmpPt[0],tmpPt[1]))}return S}var pt0=new Point$1,pt1=new Point$1,pt2=new Point$1,dir=new Point$1,dir2=new Point$1;function updateLabelLinePoints(r,t){if(r){var n=r.getTextGuideLine(),o=r.getTextContent();if(o&&n){var a=r.textGuideLineConfig||{},l=[[0,0],[0,0],[0,0]],d=a.candidates||DEFAULT_SEARCH_SPACE,g=o.getBoundingRect().clone();g.applyTransform(o.getComputedTransform());var y=1/0,S=a.anchor,x=r.getComputedTransform(),w=x&&invert([],x),c=t.get("length2")||0;S&&pt2.copy(S);for(var A=0;A<d.length;A++){var R=d[A];getCandidateAnchor(R,0,g,pt0,dir),Point$1.scaleAndAdd(pt1,pt0,dir,c),pt1.transform(w);var L=r.getBoundingRect(),$=S?S.distance(pt1):r instanceof Path$1?nearestPointOnPath(pt1,r.path,pt2):nearestPointOnRect(pt1,L,pt2);$<y&&(y=$,pt1.transform(x),pt2.transform(x),pt2.toArray(l[0]),pt1.toArray(l[1]),pt0.toArray(l[2]))}limitTurnAngle(l,t.get("minTurnAngle")),n.setShape({points:l})}}}var tmpArr=[],tmpProjPoint=new Point$1;function limitTurnAngle(r,t){if(t<=180&&t>0){t=t/180*Math.PI,pt0.fromArray(r[0]),pt1.fromArray(r[1]),pt2.fromArray(r[2]),Point$1.sub(dir,pt0,pt1),Point$1.sub(dir2,pt2,pt1);var n=dir.len(),o=dir2.len();if(!(n<.001||o<.001)){dir.scale(1/n),dir2.scale(1/o);var a=dir.dot(dir2),l=Math.cos(t);if(l<a){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI-t));var g=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(g))return;g<0?Point$1.copy(tmpProjPoint,pt1):g>1&&Point$1.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(r[1])}}}}function limitSurfaceAngle(r,t,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(r[0]),pt1.fromArray(r[1]),pt2.fromArray(r[2]),Point$1.sub(dir,pt1,pt0),Point$1.sub(dir2,pt2,pt1);var o=dir.len(),a=dir2.len();if(!(o<.001||a<.001)){dir.scale(1/o),dir2.scale(1/a);var l=dir.dot(t),d=Math.cos(n);if(l<d){var g=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var y=Math.PI/2,S=Math.acos(dir2.dot(t)),x=y+S-n;if(x>=y)Point$1.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,g/Math.tan(Math.PI/2-x));var w=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(w))return;w<0?Point$1.copy(tmpProjPoint,pt1):w>1&&Point$1.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(r[1])}}}}function setLabelLineState(r,t,n,o){var a=n==="normal",l=a?r:r.ensureState(n);l.ignore=t;var d=o.get("smooth");d&&d===!0&&(d=.3),l.shape=l.shape||{},d>0&&(l.shape.smooth=d);var g=o.getModel("lineStyle").getLineStyle();a?r.useStyle(g):l.style=g}function buildLabelLinePath(r,t){var n=t.smooth,o=t.points;if(o)if(r.moveTo(o[0][0],o[0][1]),n>0&&o.length>=3){var a=dist$1(o[0],o[1]),l=dist$1(o[1],o[2]);if(!a||!l){r.lineTo(o[1][0],o[1][1]),r.lineTo(o[2][0],o[2][1]);return}var d=Math.min(a,l)*n,g=lerp$1([],o[1],o[0],d/a),y=lerp$1([],o[1],o[2],d/l),S=lerp$1([],g,y,.5);r.bezierCurveTo(g[0],g[1],g[0],g[1],S[0],S[1]),r.bezierCurveTo(y[0],y[1],y[0],y[1],o[2][0],o[2][1])}else for(var x=1;x<o.length;x++)r.lineTo(o[x][0],o[x][1])}function setLabelLineStyle(r,t,n){var o=r.getTextGuideLine(),a=r.getTextContent();if(!a){o&&r.removeTextGuideLine();return}for(var l=t.normal,d=l.get("show"),g=a.ignore,y=0;y<DISPLAY_STATES.length;y++){var S=DISPLAY_STATES[y],x=t[S],w=S==="normal";if(x){var c=x.get("show"),A=w?g:retrieve2(a.states[S]&&a.states[S].ignore,g);if(A||!retrieve2(c,d)){var R=w?o:o&&o.states[S];R&&(R.ignore=!0);continue}o||(o=new Polyline$3,r.setTextGuideLine(o),!w&&(g||!d)&&setLabelLineState(o,!0,"normal",t.normal),r.stateProxy&&(o.stateProxy=r.stateProxy)),setLabelLineState(o,!1,S,x)}}if(o){defaults(o.style,n),o.style.fill=null;var L=l.get("showAbove"),$=r.textGuideLineConfig=r.textGuideLineConfig||{};$.showAbove=L||!1,o.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(r,t){t=t||"labelLine";for(var n={normal:r.getModel(t)},o=0;o<SPECIAL_STATES.length;o++){var a=SPECIAL_STATES[o];n[a]=r.getModel([a,t])}return n}function prepareLayoutList(r){for(var t=[],n=0;n<r.length;n++){var o=r[n];if(!o.defaultAttr.ignore){var a=o.label,l=a.getComputedTransform(),d=a.getBoundingRect(),g=!l||l[1]<1e-5&&l[2]<1e-5,y=a.style.margin||0,S=d.clone();S.applyTransform(l),S.x-=y/2,S.y-=y/2,S.width+=y,S.height+=y;var x=g?new OrientedBoundingRect$1(d,l):null;t.push({label:a,labelLine:o.labelLine,rect:S,localRect:d,obb:x,priority:o.priority,defaultAttr:o.defaultAttr,layoutOption:o.computedLayoutOption,axisAligned:g,transform:l})}}return t}function shiftLayout(r,t,n,o,a,l){var d=r.length;if(d<2)return;r.sort(function(ie,te){return ie.rect[t]-te.rect[t]});for(var g=0,y,S=!1,x=0,w=0;w<d;w++){var c=r[w],A=c.rect;y=A[t]-g,y<0&&(A[t]-=y,c.label[t]-=y,S=!0);var R=Math.max(-y,0);x+=R,g=A[t]+A[n]}x>0&&l&&K(-x/d,0,d);var L=r[0],$=r[d-1],O,z;V(),O<0&&Z(-O,.8),z<0&&Z(z,.8),V(),j(O,z,1),j(z,O,-1),V(),O<0&&q(-O),z<0&&q(z);function V(){O=L.rect[t]-o,z=a-$.rect[t]-$.rect[n]}function j(ie,te,oe){if(ie<0){var re=Math.min(te,-ie);if(re>0){K(re*oe,0,d);var he=re+ie;he<0&&Z(-he*oe,1)}else Z(-ie*oe,1)}}function K(ie,te,oe){ie!==0&&(S=!0);for(var re=te;re<oe;re++){var he=r[re],_e=he.rect;_e[t]+=ie,he.label[t]+=ie}}function Z(ie,te){for(var oe=[],re=0,he=1;he<d;he++){var _e=r[he-1].rect,me=Math.max(r[he].rect[t]-_e[t]-_e[n],0);oe.push(me),re+=me}if(re){var be=Math.min(Math.abs(ie)/re,te);if(ie>0)for(var he=0;he<d-1;he++){var Q=oe[he]*be;K(Q,0,he+1)}else for(var he=d-1;he>0;he--){var Q=oe[he-1]*be;K(-Q,he,d)}}}function q(ie){var te=ie<0?-1:1;ie=Math.abs(ie);for(var oe=Math.ceil(ie/(d-1)),re=0;re<d-1;re++)if(te>0?K(oe,0,re+1):K(-oe,d-re-1,d),ie-=oe,ie<=0)return}return S}function shiftLayoutOnX(r,t,n,o){return shiftLayout(r,"x","width",t,n,o)}function shiftLayoutOnY(r,t,n,o){return shiftLayout(r,"y","height",t,n,o)}function hideOverlap(r){var t=[];r.sort(function(L,$){return $.priority-L.priority});var n=new BoundingRect$1(0,0,0,0);function o(L){if(!L.ignore){var $=L.ensureState("emphasis");$.ignore==null&&($.ignore=!1)}L.ignore=!0}for(var a=0;a<r.length;a++){var l=r[a],d=l.axisAligned,g=l.localRect,y=l.transform,S=l.label,x=l.labelLine;n.copy(l.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var w=l.obb,c=!1,A=0;A<t.length;A++){var R=t[A];if(n.intersect(R.rect)){if(d&&R.axisAligned){c=!0;break}if(R.obb||(R.obb=new OrientedBoundingRect$1(R.localRect,R.transform)),w||(w=new OrientedBoundingRect$1(g,y)),w.intersect(R.obb)){c=!0;break}}}c?(o(S),x&&o(x)):(S.attr("ignore",l.defaultAttr.ignore),x&&x.attr("ignore",l.defaultAttr.labelGuideIgnore),t.push(l))}}function cloneArr(r){if(r){for(var t=[],n=0;n<r.length;n++)t.push(r[n].slice());return t}}function prepareLayoutCallbackParams(r,t){var n=r.label,o=t&&t.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:cloneArr(o&&o.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable$1,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(r,t,n){for(var o=0;o<n.length;o++){var a=n[o];t[a]!=null&&(r[a]=t[a])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(t,n,o,a,l){var d=a.style,g=a.__hostTarget,y=g.textConfig||{},S=a.getComputedTransform(),x=a.getBoundingRect().plain();BoundingRect$1.applyTransform(x,x,S),S?dummyTransformable.setLocalTransform(S):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var w=a.__hostTarget,c;if(w){c=w.getBoundingRect().plain();var A=w.getComputedTransform();BoundingRect$1.applyTransform(c,c,A)}var R=c&&w.getTextGuideLine();this._labelList.push({label:a,labelLine:R,seriesModel:o,dataIndex:t,dataType:n,layoutOption:l,computedLayoutOption:null,rect:x,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:R&&R.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:d.x,y:d.y,align:d.align,verticalAlign:d.verticalAlign,width:d.width,height:d.height,fontSize:d.fontSize},cursor:a.cursor,attachedPos:y.position,attachedRot:y.rotation}})},r.prototype.addLabelsOfSeries=function(t){var n=this;this._chartViewList.push(t);var o=t.__model,a=o.get("labelLayout");(isFunction(a)||keys(a).length)&&t.group.traverse(function(l){if(l.ignore)return!0;var d=l.getTextContent(),g=getECData(l);d&&!d.disableLabelLayout&&n._addLabel(g.dataIndex,g.dataType,o,d,a)})},r.prototype.updateLayoutConfig=function(t){var n=t.getWidth(),o=t.getHeight();function a(V,j){return function(){updateLabelLinePoints(V,j)}}for(var l=0;l<this._labelList.length;l++){var d=this._labelList[l],g=d.label,y=g.__hostTarget,S=d.defaultAttr,x=void 0;isFunction(d.layoutOption)?x=d.layoutOption(prepareLayoutCallbackParams(d,y)):x=d.layoutOption,x=x||{},d.computedLayoutOption=x;var w=Math.PI/180;y&&y.setTextConfig({local:!1,position:x.x!=null||x.y!=null?null:S.attachedPos,rotation:x.rotate!=null?x.rotate*w:S.attachedRot,offset:[x.dx||0,x.dy||0]});var c=!1;if(x.x!=null?(g.x=parsePercent(x.x,n),g.setStyle("x",0),c=!0):(g.x=S.x,g.setStyle("x",S.style.x)),x.y!=null?(g.y=parsePercent(x.y,o),g.setStyle("y",0),c=!0):(g.y=S.y,g.setStyle("y",S.style.y)),x.labelLinePoints){var A=y.getTextGuideLine();A&&(A.setShape({points:x.labelLinePoints}),c=!1)}var R=labelLayoutInnerStore(g);R.needsUpdateLabelLine=c,g.rotation=x.rotate!=null?x.rotate*w:S.rotation,g.scaleX=S.scaleX,g.scaleY=S.scaleY;for(var L=0;L<LABEL_OPTION_TO_STYLE_KEYS.length;L++){var $=LABEL_OPTION_TO_STYLE_KEYS[L];g.setStyle($,x[$]!=null?x[$]:S.style[$])}if(x.draggable){if(g.draggable=!0,g.cursor="move",y){var O=d.seriesModel;if(d.dataIndex!=null){var z=d.seriesModel.getData(d.dataType);O=z.getItemModel(d.dataIndex)}g.on("drag",a(y,O.getModel("labelLine")))}}else g.off("drag"),g.cursor=S.cursor}},r.prototype.layout=function(t){var n=t.getWidth(),o=t.getHeight(),a=prepareLayoutList(this._labelList),l=filter(a,function(y){return y.layoutOption.moveOverlap==="shiftX"}),d=filter(a,function(y){return y.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(l,0,n),shiftLayoutOnY(d,0,o);var g=filter(a,function(y){return y.layoutOption.hideOverlap});hideOverlap(g)},r.prototype.processLabelsOverall=function(){var t=this;each$f(this._chartViewList,function(n){var o=n.__model,a=n.ignoreLabelLineUpdate,l=o.isAnimationEnabled();n.group.traverse(function(d){if(d.ignore&&!d.forceLabelAnimation)return!0;var g=!a,y=d.getTextContent();!g&&y&&(g=labelLayoutInnerStore(y).needsUpdateLabelLine),g&&t._updateLabelLine(d,o),l&&t._animateLabels(d,o)})})},r.prototype._updateLabelLine=function(t,n){var o=t.getTextContent(),a=getECData(t),l=a.dataIndex;if(o&&l!=null){var d=n.getData(a.dataType),g=d.getItemModel(l),y={},S=d.getItemVisual(l,"style");if(S){var x=d.getVisual("drawType");y.stroke=S[x]}var w=g.getModel("labelLine");setLabelLineStyle(t,getLabelLineStatesModels(g),y),updateLabelLinePoints(t,w)}},r.prototype._animateLabels=function(t,n){var o=t.getTextContent(),a=t.getTextGuideLine();if(o&&(t.forceLabelAnimation||!o.ignore&&!o.invisible&&!t.disableLabelAnimation&&!isElementRemoved(t))){var l=labelLayoutInnerStore(o),d=l.oldLayout,g=getECData(t),y=g.dataIndex,S={x:o.x,y:o.y,rotation:o.rotation},x=n.getData(g.dataType);if(d){o.attr(d);var c=t.prevStates;c&&(indexOf(c,"select")>=0&&o.attr(l.oldLayoutSelect),indexOf(c,"emphasis")>=0&&o.attr(l.oldLayoutEmphasis)),updateProps$1(o,S,n,y)}else if(o.attr(S),!labelInner(o).valueAnimation){var w=retrieve2(o.style.opacity,1);o.style.opacity=0,initProps(o,{style:{opacity:w}},n,y)}if(l.oldLayout=S,o.states.select){var A=l.oldLayoutSelect={};extendWithKeys(A,S,LABEL_LAYOUT_PROPS),extendWithKeys(A,o.states.select,LABEL_LAYOUT_PROPS)}if(o.states.emphasis){var R=l.oldLayoutEmphasis={};extendWithKeys(R,S,LABEL_LAYOUT_PROPS),extendWithKeys(R,o.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(o,y,x,n,n)}if(a&&!a.ignore&&!a.invisible){var l=labelLineAnimationStore(a),d=l.oldLayout,L={points:a.shape.points};d?(a.attr({shape:d}),updateProps$1(a,{shape:L},n)):(a.setShape(L),a.style.strokePercent=0,initProps(a,{style:{strokePercent:1}},n)),l.oldLayout=L}},r}();const LabelManager$1=LabelManager;var getLabelManager=makeInner();function installLabelLayout(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,n,o){var a=getLabelManager(n).labelManager;a||(a=getLabelManager(n).labelManager=new LabelManager$1),a.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(t,n,o){var a=getLabelManager(n).labelManager;o.updatedSeries.forEach(function(l){a.addLabelsOfSeries(n.getViewOfSeriesModel(l))}),a.updateLayoutConfig(n),a.layout(n),a.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function r(){}return r.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},r.prototype.moveTo=function(t,n){this._add("M",t,n)},r.prototype.lineTo=function(t,n){this._add("L",t,n)},r.prototype.bezierCurveTo=function(t,n,o,a,l,d){this._add("C",t,n,o,a,l,d)},r.prototype.quadraticCurveTo=function(t,n,o,a){this._add("Q",t,n,o,a)},r.prototype.arc=function(t,n,o,a,l,d){this.ellipse(t,n,o,o,0,a,l,d)},r.prototype.ellipse=function(t,n,o,a,l,d,g,y){var S=g-d,x=!y,w=Math.abs(S),c=isAroundZero(w-PI2$1)||(x?S>=PI2$1:-S>=PI2$1),A=S>0?S%PI2$1:S%PI2$1+PI2$1,R=!1;c?R=!0:isAroundZero(w)?R=!1:R=A>=PI$4==!!x;var L=t+o*mathCos(d),$=n+a*mathSin(d);this._start&&this._add("M",L,$);var O=Math.round(l*degree);if(c){var z=1/this._p,V=(x?1:-1)*(PI2$1-z);this._add("A",o,a,O,1,+x,t+o*mathCos(d+V),n+a*mathSin(d+V)),z>.01&&this._add("A",o,a,O,0,+x,L,$)}else{var j=t+o*mathCos(g),K=n+a*mathSin(g);this._add("A",o,a,O,+R,+x,j,K)}},r.prototype.rect=function(t,n,o,a){this._add("M",t,n),this._add("l",o,0),this._add("l",0,a),this._add("l",-o,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(t,n,o,a,l,d,g,y,S){for(var x=[],w=this._p,c=1;c<arguments.length;c++){var A=arguments[c];if(isNaN(A)){this._invalid=!0;return}x.push(Math.round(A*w)/w)}this._d.push(t+x.join(" ")),this._start=t==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}();const SVGPathRebuilder$1=SVGPathRebuilder;var NONE="none",mathRound=Math.round;function pathHasFill(r){var t=r.fill;return t!=null&&t!==NONE}function pathHasStroke(r){var t=r.stroke;return t!=null&&t!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(r){return"stroke-"+r.toLowerCase()});function mapStyleToAttrs(r,t,n,o){var a=t.opacity==null?1:t.opacity;if(n instanceof ZRImage$1){r("opacity",a);return}if(pathHasFill(t)){var l=normalizeColor(t.fill);r("fill",l.color);var d=t.fillOpacity!=null?t.fillOpacity*l.opacity*a:l.opacity*a;(o||d<1)&&r("fill-opacity",d)}else r("fill",NONE);if(pathHasStroke(t)){var g=normalizeColor(t.stroke);r("stroke",g.color);var y=t.strokeNoScale?n.getLineScale():1,S=y?(t.lineWidth||0)/y:0,x=t.strokeOpacity!=null?t.strokeOpacity*g.opacity*a:g.opacity*a,w=t.strokeFirst;if((o||S!==1)&&r("stroke-width",S),(o||w)&&r("paint-order",w?"stroke":"fill"),(o||x<1)&&r("stroke-opacity",x),t.lineDash){var c=getLineDash(n),A=c[0],R=c[1];A&&(R=mathRound(R||0),r("stroke-dasharray",A.join(",")),(R||o)&&r("stroke-dashoffset",R))}else o&&r("stroke-dasharray",NONE);for(var L=0;L<strokeProps.length;L++){var $=strokeProps[L];if(o||t[$]!==DEFAULT_PATH_STYLE[$]){var O=t[$]||DEFAULT_PATH_STYLE[$];O&&r(svgStrokeProps[L],O)}}}else o&&r("stroke",NONE)}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace";function createElement(r){return document.createElementNS(SVGNS,r)}function createVNode(r,t,n,o,a){return{tag:r,attrs:n||{},children:o,text:a,key:t}}function createElementOpen(r,t){var n=[];if(t)for(var o in t){var a=t[o],l=o;a!==!1&&(a!==!0&&a!=null&&(l+='="'+a+'"'),n.push(l))}return"<"+r+" "+n.join(" ")+">"}function createElementClose(r){return"</"+r+">"}function vNodeToString(r,t){t=t||{};var n=t.newline?`
`:"";function o(a){var l=a.children,d=a.tag,g=a.attrs,y=a.text;return createElementOpen(d,g)+(d!=="style"?encodeHTML(y):y||"")+(l?""+n+map$1(l,function(S){return o(S)}).join(n)+n:"")+createElementClose(d)}return o(r)}function getCssString(r,t,n){n=n||{};var o=n.newline?`
`:"",a=" {"+o,l=o+"}",d=map$1(keys(r),function(y){return y+a+map$1(keys(r[y]),function(S){return S+":"+r[y][S]+";"}).join(o)+l}).join(o),g=map$1(keys(t),function(y){return"@keyframes "+y+a+map$1(keys(t[y]),function(S){return S+a+map$1(keys(t[y][S]),function(x){var w=t[y][S][x];return x==="d"&&(w='path("'+w+'")'),x+":"+w+";"}).join(o)+l}).join(o)+l}).join(o);return!d&&!g?"":["<![CDATA[",d,g,"]]>"].join(o)}function createBrushScope(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(r,t,n,o){return createVNode("svg","root",{width:r,height:t,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:o?"0 0 "+r+" "+t:!1},n)}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(r,t,n){var o=extend({},r.shape);extend(o,t),r.buildPath(n,o);var a=new SVGPathRebuilder$1;return a.reset(getPathPrecision(r)),n.rebuildPath(a,1),a.generateStr(),a.getStr()}function setTransformOrigin(r,t){var n=t.originX,o=t.originY;(n||o)&&(r[transformOriginKey]=n+"px "+o+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(r,t){var n=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[n]=r,n}function createCompoundPathCSSAnimation(r,t,n){var o=r.shape.paths,a={},l,d;if(each$f(o,function(y){var S=createBrushScope(n.zrId);S.animation=!0,createCSSAnimation(y,{},S,!0);var x=S.cssAnims,w=S.cssNodes,c=keys(x),A=c.length;if(A){d=c[A-1];var R=x[d];for(var L in R){var $=R[L];a[L]=a[L]||{d:""},a[L].d+=$.d||""}for(var O in w){var z=w[O].animation;z.indexOf(d)>=0&&(l=z)}}}),!!l){t.d=!1;var g=addAnimation(a,n);return l.replace(d,g)}}function getEasingFunc(r){return isString(r)?EASING_MAP[r]?"cubic-bezier("+EASING_MAP[r]+")":createCubicEasingFunc(r)?r:"":""}function createCSSAnimation(r,t,n,o){var a=r.animators,l=a.length,d=[];if(r instanceof CompoundPath$1){var g=createCompoundPathCSSAnimation(r,t,n);if(g)d.push(g);else if(!l)return}else if(!l)return;for(var y={},S=0;S<l;S++){var x=a[S],w=[x.getMaxTime()/1e3+"s"],c=getEasingFunc(x.getClip().easing),A=x.getDelay();c?w.push(c):w.push("linear"),A&&w.push(A/1e3+"s"),x.getLoop()&&w.push("infinite");var R=w.join(" ");y[R]=y[R]||[R,[]],y[R][1].push(x)}function L(z){var V=z[1],j=V.length,K={},Z={},q={},ie="animation-timing-function";function te(ue,Dt,Rt){for(var Bt=ue.getTracks(),Se=ue.getMaxTime(),Ye=0;Ye<Bt.length;Ye++){var $e=Bt[Ye];if($e.needsAnimate()){var st=$e.keyframes,et=$e.propName;if(Rt&&(et=Rt(et)),et)for(var Fe=0;Fe<st.length;Fe++){var tn=st[Fe],Gt=Math.round(tn.time/Se*100)+"%",mt=getEasingFunc(tn.easing),en=tn.rawValue;(isString(en)||isNumber(en))&&(Dt[Gt]=Dt[Gt]||{},Dt[Gt][et]=tn.rawValue,mt&&(Dt[Gt][ie]=mt))}}}}for(var oe=0;oe<j;oe++){var re=V[oe],he=re.targetName;he?he==="shape"&&te(re,Z):!o&&te(re,K)}for(var _e in K){var me={};copyTransform(me,r),extend(me,K[_e]);var be=getSRTTransformString(me),Q=K[_e][ie];q[_e]=be?{transform:be}:{},setTransformOrigin(q[_e],me),Q&&(q[_e][ie]=Q)}var Ne,Ee=!0;for(var _e in Z){q[_e]=q[_e]||{};var Ge=!Ne,Q=Z[_e][ie];Ge&&(Ne=new PathProxy$1);var it=Ne.len();Ne.reset(),q[_e].d=buildPathString(r,Z[_e],Ne);var Te=Ne.len();if(!Ge&&it!==Te){Ee=!1;break}Q&&(q[_e][ie]=Q)}if(!Ee)for(var _e in q)delete q[_e].d;if(!o)for(var oe=0;oe<j;oe++){var re=V[oe],he=re.targetName;he==="style"&&te(re,q,function(Bt){return ANIMATE_STYLE_MAP[Bt]})}for(var Ke=keys(q),Tt=!0,Lt,oe=1;oe<Ke.length;oe++){var Qt=Ke[oe-1],Xe=Ke[oe];if(q[Qt][transformOriginKey]!==q[Xe][transformOriginKey]){Tt=!1;break}Lt=q[Qt][transformOriginKey]}if(Tt&&Lt){for(var _e in q)q[_e][transformOriginKey]&&delete q[_e][transformOriginKey];t[transformOriginKey]=Lt}if(filter(Ke,function(ue){return keys(q[ue]).length>0}).length){var Be=addAnimation(q,n);return Be+" "+z[0]+" both"}}for(var $ in y){var g=L(y[$]);g&&d.push(g)}if(d.length){var O=n.zrId+"-cls-"+n.cssClassIdx++;n.cssNodes["."+O]={animation:d.join(",")},t.class=O}}var round$1=Math.round;function isImageLike(r){return r&&isString(r.src)}function isCanvasLike(r){return r&&isFunction(r.toDataURL)}function setStyleAttrs(r,t,n,o){mapStyleToAttrs(function(a,l){var d=a==="fill"||a==="stroke";d&&isGradient(l)?setGradient(t,r,a,o):d&&isPattern(l)?setPattern(n,r,a,o):r[a]=l},t,n,!1),setShadow(n,r,o)}function noRotateScale(r){return isAroundZero(r[0]-1)&&isAroundZero(r[1])&&isAroundZero(r[2])&&isAroundZero(r[3]-1)}function noTranslate(r){return isAroundZero(r[4])&&isAroundZero(r[5])}function setTransform(r,t,n){if(t&&!(noTranslate(t)&&noRotateScale(t))){var o=n?10:1e4;r.transform=noRotateScale(t)?"translate("+round$1(t[4]*o)/o+" "+round$1(t[5]*o)/o+")":getMatrixStr(t)}}function convertPolyShape(r,t,n){for(var o=r.points,a=[],l=0;l<o.length;l++)a.push(round$1(o[l][0]*n)/n),a.push(round$1(o[l][1]*n)/n);t.points=a.join(" ")}function validatePolyShape(r){return!r.smooth}function createAttrsConvert(r){var t=map$1(r,function(n){return typeof n=="string"?[n,n]:n});return function(n,o,a){for(var l=0;l<t.length;l++){var d=t[l],g=n[d[0]];g!=null&&(o[d[1]]=round$1(g*a)/a)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(r){for(var t=r.animators,n=0;n<t.length;n++)if(t[n].targetName==="shape")return!0;return!1}function brushSVGPath(r,t){var n=r.style,o=r.shape,a=builtinShapesDef[r.type],l={},d=t.animation,g="path",y=r.style.strokePercent,S=t.compress&&getPathPrecision(r)||4;if(a&&!t.willUpdate&&!(a[1]&&!a[1](o))&&!(d&&hasShapeAnimation(r))&&!(y<1)){g=r.type;var x=Math.pow(10,S);a[0](o,l,x)}else{var w=!r.path||r.shapeChanged();r.path||r.createPathProxy();var c=r.path;w&&(c.beginPath(),r.buildPath(c,r.shape),r.pathUpdated());var A=c.getVersion(),R=r,L=R.__svgPathBuilder;(R.__svgPathVersion!==A||!L||y!==R.__svgPathStrokePercent)&&(L||(L=R.__svgPathBuilder=new SVGPathRebuilder$1),L.reset(S),c.rebuildPath(L,y),L.generateStr(),R.__svgPathVersion=A,R.__svgPathStrokePercent=y),l.d=L.getStr()}return setTransform(l,r.transform),setStyleAttrs(l,n,r,t),t.animation&&createCSSAnimation(r,l,t),createVNode(g,r.id+"",l)}function brushSVGImage(r,t){var n=r.style,o=n.image;if(o&&!isString(o)&&(isImageLike(o)?o=o.src:isCanvasLike(o)&&(o=o.toDataURL())),!!o){var a=n.x||0,l=n.y||0,d=n.width,g=n.height,y={href:o,width:d,height:g};return a&&(y.x=a),l&&(y.y=l),setTransform(y,r.transform),setStyleAttrs(y,n,r,t),t.animation&&createCSSAnimation(r,y,t),createVNode("image",r.id+"",y)}}function brushSVGTSpan(r,t){var n=r.style,o=n.text;if(o!=null&&(o+=""),!(!o||isNaN(n.x)||isNaN(n.y))){var a=n.font||DEFAULT_FONT,l=n.x||0,d=adjustTextY$1(n.y||0,getLineHeight(a),n.textBaseline),g=TEXT_ALIGN_TO_ANCHOR[n.textAlign]||n.textAlign,y={"dominant-baseline":"central","text-anchor":g};if(hasSeparateFont(n)){var S="",x=n.fontStyle,w=parseFontSize(n.fontSize);if(!parseFloat(w))return;var c=n.fontFamily||DEFAULT_FONT_FAMILY,A=n.fontWeight;S+="font-size:"+w+";font-family:"+c+";",x&&x!=="normal"&&(S+="font-style:"+x+";"),A&&A!=="normal"&&(S+="font-weight:"+A+";"),y.style=S}else y.style="font: "+a;return o.match(/\s/)&&(y["xml:space"]="preserve"),l&&(y.x=l),d&&(y.y=d),setTransform(y,r.transform),setStyleAttrs(y,n,r,t),t.animation&&createCSSAnimation(r,y,t),createVNode("text",r.id+"",y,void 0,o)}}function brush(r,t){if(r instanceof Path$1)return brushSVGPath(r,t);if(r instanceof ZRImage$1)return brushSVGImage(r,t);if(r instanceof TSpan$1)return brushSVGTSpan(r,t)}function setShadow(r,t,n){var o=r.style;if(hasShadow(o)){var a=getShadowKey(r),l=n.shadowCache,d=l[a];if(!d){var g=r.getGlobalScale(),y=g[0],S=g[1];if(!y||!S)return;var x=o.shadowOffsetX||0,w=o.shadowOffsetY||0,c=o.shadowBlur,A=normalizeColor(o.shadowColor),R=A.opacity,L=A.color,$=c/2/y,O=c/2/S,z=$+" "+O;d=n.zrId+"-s"+n.shadowIdx++,n.defs[d]=createVNode("filter",d,{id:d,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:x/y,dy:w/S,stdDeviation:z,"flood-color":L,"flood-opacity":R})]),l[a]=d}t.filter=getIdURL(d)}}function setGradient(r,t,n,o){var a=r[n],l,d={gradientUnits:a.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(a))l="linearGradient",d.x1=a.x,d.y1=a.y,d.x2=a.x2,d.y2=a.y2;else if(isRadialGradient(a))l="radialGradient",d.cx=retrieve2(a.x,.5),d.cy=retrieve2(a.y,.5),d.r=retrieve2(a.r,.5);else return;for(var g=a.colorStops,y=[],S=0,x=g.length;S<x;++S){var w=round4(g[S].offset)*100+"%",c=g[S].color,A=normalizeColor(c),R=A.color,L=A.opacity,$={offset:w};$["stop-color"]=R,L<1&&($["stop-opacity"]=L),y.push(createVNode("stop",S+"",$))}var O=createVNode(l,"",d,y),z=vNodeToString(O),V=o.gradientCache,j=V[z];j||(j=o.zrId+"-g"+o.gradientIdx++,V[z]=j,d.id=j,o.defs[j]=createVNode(l,j,d,y)),t[n]=getIdURL(j)}function setPattern(r,t,n,o){var a=r.style[n],l=r.getBoundingRect(),d={},g=a.repeat,y=g==="no-repeat",S=g==="repeat-x",x=g==="repeat-y",w;if(isImagePattern(a)){var c=a.imageWidth,A=a.imageHeight,R=void 0,L=a.image;if(isString(L)?R=L:isImageLike(L)?R=L.src:isCanvasLike(L)&&(R=L.toDataURL()),typeof Image>"u"){var $="Image width/height must been given explictly in svg-ssr renderer.";assert(c,$),assert(A,$)}else if(c==null||A==null){var O=function(oe,re){if(oe){var he=oe.elm,_e=c||re.width,me=A||re.height;oe.tag==="pattern"&&(S?(me=1,_e/=l.width):x&&(_e=1,me/=l.height)),oe.attrs.width=_e,oe.attrs.height=me,he&&(he.setAttribute("width",_e),he.setAttribute("height",me))}},z=createOrUpdateImage(R,null,r,function(oe){y||O(Z,oe),O(w,oe)});z&&z.width&&z.height&&(c=c||z.width,A=A||z.height)}w=createVNode("image","img",{href:R,width:c,height:A}),d.width=c,d.height=A}else a.svgElement&&(w=clone$4(a.svgElement),d.width=a.svgWidth,d.height=a.svgHeight);if(w){var V,j;y?V=j=1:S?(j=1,V=d.width/l.width):x?(V=1,j=d.height/l.height):d.patternUnits="userSpaceOnUse",V!=null&&!isNaN(V)&&(d.width=V),j!=null&&!isNaN(j)&&(d.height=j);var K=getSRTTransformString(a);K&&(d.patternTransform=K);var Z=createVNode("pattern","",d,[w]),q=vNodeToString(Z),ie=o.patternCache,te=ie[q];te||(te=o.zrId+"-p"+o.patternIdx++,ie[q]=te,d.id=te,Z=o.defs[te]=createVNode("pattern",te,d,[w])),t[n]=getIdURL(te)}}function setClipPath(r,t,n){var o=n.clipPathCache,a=n.defs,l=o[r.id];if(!l){l=n.zrId+"-c"+n.clipPathIdx++;var d={id:l};o[r.id]=l,a[l]=createVNode("clipPath",l,d,[brushSVGPath(r,n)])}t["clip-path"]=getIdURL(l)}function createTextNode(r){return document.createTextNode(r)}function insertBefore(r,t,n){r.insertBefore(t,n)}function removeChild(r,t){r.removeChild(t)}function appendChild(r,t){r.appendChild(t)}function parentNode(r){return r.parentNode}function nextSibling(r){return r.nextSibling}function setTextContent(r,t){r.textContent=t}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(r){return r===void 0}function isDef(r){return r!==void 0}function createKeyToOldIdx(r,t,n){for(var o={},a=t;a<=n;++a){var l=r[a].key;l!==void 0&&(o[l]=a)}return o}function sameVnode(r,t){var n=r.key===t.key,o=r.tag===t.tag;return o&&n}function createElm(r){var t,n=r.children,o=r.tag;if(isDef(o)){var a=r.elm=createElement(o);if(updateAttrs(emptyNode,r),isArray$1(n))for(t=0;t<n.length;++t){var l=n[t];l!=null&&appendChild(a,createElm(l))}else isDef(r.text)&&!isObject$3(r.text)&&appendChild(a,createTextNode(r.text))}else r.elm=createTextNode(r.text);return r.elm}function addVnodes(r,t,n,o,a){for(;o<=a;++o){var l=n[o];l!=null&&insertBefore(r,createElm(l),t)}}function removeVnodes(r,t,n,o){for(;n<=o;++n){var a=t[n];if(a!=null)if(isDef(a.tag)){var l=parentNode(a.elm);removeChild(l,a.elm)}else removeChild(r,a.elm)}}function updateAttrs(r,t){var n,o=t.elm,a=r&&r.attrs||{},l=t.attrs||{};if(a!==l){for(n in l){var d=l[n],g=a[n];g!==d&&(d===!0?o.setAttribute(n,""):d===!1?o.removeAttribute(n):n.charCodeAt(0)!==xChar?o.setAttribute(n,d):n==="xmlns:xlink"||n==="xmlns"?o.setAttributeNS(XMLNS,n,d):n.charCodeAt(3)===colonChar?o.setAttributeNS(XML_NAMESPACE,n,d):n.charCodeAt(5)===colonChar?o.setAttributeNS(XLINKNS,n,d):o.setAttribute(n,d))}for(n in a)n in l||o.removeAttribute(n)}}function updateChildren(r,t,n){for(var o=0,a=0,l=t.length-1,d=t[0],g=t[l],y=n.length-1,S=n[0],x=n[y],w,c,A,R;o<=l&&a<=y;)d==null?d=t[++o]:g==null?g=t[--l]:S==null?S=n[++a]:x==null?x=n[--y]:sameVnode(d,S)?(patchVnode(d,S),d=t[++o],S=n[++a]):sameVnode(g,x)?(patchVnode(g,x),g=t[--l],x=n[--y]):sameVnode(d,x)?(patchVnode(d,x),insertBefore(r,d.elm,nextSibling(g.elm)),d=t[++o],x=n[--y]):sameVnode(g,S)?(patchVnode(g,S),insertBefore(r,g.elm,d.elm),g=t[--l],S=n[++a]):(isUndef(w)&&(w=createKeyToOldIdx(t,o,l)),c=w[S.key],isUndef(c)?insertBefore(r,createElm(S),d.elm):(A=t[c],A.tag!==S.tag?insertBefore(r,createElm(S),d.elm):(patchVnode(A,S),t[c]=void 0,insertBefore(r,A.elm,d.elm))),S=n[++a]);(o<=l||a<=y)&&(o>l?(R=n[y+1]==null?null:n[y+1].elm,addVnodes(r,R,n,a,y)):removeVnodes(r,t,o,l))}function patchVnode(r,t){var n=t.elm=r.elm,o=r.children,a=t.children;r!==t&&(updateAttrs(r,t),isUndef(t.text)?isDef(o)&&isDef(a)?o!==a&&updateChildren(n,o,a):isDef(a)?(isDef(r.text)&&setTextContent(n,""),addVnodes(n,null,a,0,a.length-1)):isDef(o)?removeVnodes(n,o,0,o.length-1):isDef(r.text)&&setTextContent(n,""):r.text!==t.text&&(isDef(o)&&removeVnodes(n,o,0,o.length-1),setTextContent(n,t.text)))}function patch(r,t){if(sameVnode(r,t))patchVnode(r,t);else{var n=r.elm,o=parentNode(n);createElm(t),o!==null&&(insertBefore(o,t.elm,nextSibling(n)),removeVnodes(o,[r],0,0))}return t}var svgId=0,SVGPainter=function(){function r(t,n,o){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=n,this._opts=o=extend({},o),this.root=t,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(o.width,o.height),t&&!o.ssr){var a=this._viewport=document.createElement("div");a.style.cssText="position:relative;overflow:hidden";var l=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),a.appendChild(l),t.appendChild(a)}this.resize(o.width,o.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,t),this._oldVNode=t}},r.prototype.renderOneToVNode=function(t){return brush(t,createBrushScope(this._id))},r.prototype.renderToVNode=function(t){t=t||{};var n=this.storage.getDisplayList(!0),o=this._width,a=this._height,l=createBrushScope(this._id);l.animation=t.animation,l.willUpdate=t.willUpdate,l.compress=t.compress;var d=[],g=this._bgVNode=createBackgroundVNode(o,a,this._backgroundColor,l);g&&d.push(g);var y=t.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(n,l,y?y.children:d),y&&d.push(y);var S=map$1(keys(l.defs),function(c){return l.defs[c]});if(S.length&&d.push(createVNode("defs","defs",{},S)),t.animation){var x=getCssString(l.cssNodes,l.cssAnims,{newline:!0});if(x){var w=createVNode("style","stl",{},[],x);d.push(w)}}return createSVGVNode(o,a,d,t.useViewBox)},r.prototype.renderToString=function(t){return t=t||{},vNodeToString(this.renderToVNode({animation:retrieve2(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(t.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(t,n,o){for(var a=t.length,l=[],d=0,g,y,S=0,x=0;x<a;x++){var w=t[x];if(!w.invisible){var c=w.__clipPaths,A=c&&c.length||0,R=y&&y.length||0,L=void 0;for(L=Math.max(A-1,R-1);L>=0&&!(c&&y&&c[L]===y[L]);L--);for(var $=R-1;$>L;$--)d--,g=l[d-1];for(var O=L+1;O<A;O++){var z={};setClipPath(c[O],z,n);var V=createVNode("g","clip-g-"+S++,z,[]);(g?g.children:o).push(V),l[d++]=V,g=V}y=c;var j=brush(w,n);j&&(g?g.children:o).push(j)}}},r.prototype.resize=function(t,n){var o=this._opts,a=this.root,l=this._viewport;if(t!=null&&(o.width=t),n!=null&&(o.height=n),a&&l&&(l.style.display="none",t=getSize$1(a,0,o),n=getSize$1(a,1,o),l.style.display=""),this._width!==t||this._height!==n){if(this._width=t,this._height=n,l){var d=l.style;d.width=t+"px",d.height=n+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var g=this._svgDom;g&&(g.setAttribute("width",t),g.setAttribute("height",n));var y=this._bgVNode&&this._bgVNode.elm;y&&(y.setAttribute("width",t),y.setAttribute("height",n))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(t){var n=this.renderToString(),o="data:image/svg+xml;";return t?(n=encodeBase64(n),n&&o+"base64,"+n):o+"charset=UTF-8,"+encodeURIComponent(n)},r}();function createMethodNotSupport(r){return function(){}}function createBackgroundVNode(r,t,n,o){var a;if(n&&n!=="none")if(a=createVNode("rect","bg",{width:r,height:t,x:"0",y:"0",id:"0"}),isGradient(n))setGradient({fill:n},a.attrs,"fill",o);else if(isPattern(n))setPattern({style:{fill:n},dirty:noop,getBoundingRect:function(){return{width:r,height:t}}},a.attrs,"fill",o);else{var l=normalizeColor(n),d=l.color,g=l.opacity;a.attrs.fill=d,g<1&&(a.attrs["fill-opacity"]=g)}return a}const SVGPainter$1=SVGPainter;function install$S(r){r.registerPainter("svg",SVGPainter$1)}function createDom(r,t,n){var o=platformApi.createCanvas(),a=t.getWidth(),l=t.getHeight(),d=o.style;return d&&(d.position="absolute",d.left="0",d.top="0",d.width=a+"px",d.height=l+"px",o.setAttribute("data-zr-dom-id",r)),o.width=a*n,o.height=l*n,o}var Layer=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this)||this;l.motionBlur=!1,l.lastFrameAlpha=.7,l.dpr=1,l.virtual=!1,l.config={},l.incremental=!1,l.zlevel=0,l.maxRepaintRectCount=5,l.__dirty=!0,l.__firstTimePaint=!0,l.__used=!1,l.__drawIndex=0,l.__startIndex=0,l.__endIndex=0,l.__prevStartIndex=null,l.__prevEndIndex=null;var d;a=a||devicePixelRatio,typeof n=="string"?d=createDom(n,o,a):isObject$3(n)&&(d=n,n=d.id),l.id=n,l.dom=d;var g=d.style;return g&&(disableUserSelect(d),d.onselectstart=function(){return!1},g.padding="0",g.margin="0",g.borderWidth="0"),l.painter=o,l.dpr=a,l}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},t.prototype.createRepaintRects=function(n,o,a,l){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var d=[],g=this.maxRepaintRectCount,y=!1,S=new BoundingRect$1(0,0,0,0);function x(z){if(!(!z.isFinite()||z.isZero()))if(d.length===0){var V=new BoundingRect$1(0,0,0,0);V.copy(z),d.push(V)}else{for(var j=!1,K=1/0,Z=0,q=0;q<d.length;++q){var ie=d[q];if(ie.intersect(z)){var te=new BoundingRect$1(0,0,0,0);te.copy(ie),te.union(z),d[q]=te,j=!0;break}else if(y){S.copy(z),S.union(ie);var oe=z.width*z.height,re=ie.width*ie.height,he=S.width*S.height,_e=he-oe-re;_e<K&&(K=_e,Z=q)}}if(y&&(d[Z].union(z),j=!0),!j){var V=new BoundingRect$1(0,0,0,0);V.copy(z),d.push(V)}y||(y=d.length>=g)}}for(var w=this.__startIndex;w<this.__endIndex;++w){var c=n[w];if(c){var A=c.shouldBePainted(a,l,!0,!0),R=c.__isRendered&&(c.__dirty&REDRAW_BIT||!A)?c.getPrevPaintRect():null;R&&x(R);var L=A&&(c.__dirty&REDRAW_BIT||!c.__isRendered)?c.getPaintRect():null;L&&x(L)}}for(var w=this.__prevStartIndex;w<this.__prevEndIndex;++w){var c=o[w],A=c.shouldBePainted(a,l,!0,!0);if(c&&(!A||!c.__zr)&&c.__isRendered){var R=c.getPrevPaintRect();R&&x(R)}}var $;do{$=!1;for(var w=0;w<d.length;){if(d[w].isZero()){d.splice(w,1);continue}for(var O=w+1;O<d.length;)d[w].intersect(d[O])?($=!0,d[w].union(d[O]),d.splice(O,1)):O++;w++}}while($);return this._paintRects=d,d},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(n,o){var a=this.dpr,l=this.dom,d=l.style,g=this.domBack;d&&(d.width=n+"px",d.height=o+"px"),l.width=n*a,l.height=o*a,g&&(g.width=n*a,g.height=o*a,a!==1&&this.ctxBack.scale(a,a))},t.prototype.clear=function(n,o,a){var l=this.dom,d=this.ctx,g=l.width,y=l.height;o=o||this.clearColor;var S=this.motionBlur&&!n,x=this.lastFrameAlpha,w=this.dpr,c=this;S&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(l,0,0,g/w,y/w));var A=this.domBack;function R(L,$,O,z){if(d.clearRect(L,$,O,z),o&&o!=="transparent"){var V=void 0;if(isGradientObject(o)){var j=o.global||o.__width===O&&o.__height===z;V=j&&o.__canvasGradient||getCanvasGradient(d,o,{x:0,y:0,width:O,height:z}),o.__canvasGradient=V,o.__width=O,o.__height=z}else isImagePatternObject(o)&&(o.scaleX=o.scaleX||w,o.scaleY=o.scaleY||w,V=createCanvasPattern(d,o,{dirty:function(){c.setUnpainted(),c.__painter.refresh()}}));d.save(),d.fillStyle=V||o,d.fillRect(L,$,O,z),d.restore()}S&&(d.save(),d.globalAlpha=x,d.drawImage(A,L,$,O,z),d.restore())}!a||S?R(0,0,g,y):a.length&&each$f(a,function(L){R(L.x*w,L.y*w,L.width*w,L.height*w)})},t}(Eventful$1);const Layer$1=Layer;var HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function createRoot(r,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+r+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var CanvasPainter=function(){function r(t,n,o,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var l=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=o=extend({},o||{}),this.dpr=o.devicePixelRatio||devicePixelRatio,this._singleCanvas=l,this.root=t;var d=t.style;d&&(disableUserSelect(t),t.innerHTML=""),this.storage=n;var g=this._zlevelList;this._prevDisplayList=[];var y=this._layers;if(l){var x=t,w=x.width,c=x.height;o.width!=null&&(w=o.width),o.height!=null&&(c=o.height),this.dpr=o.devicePixelRatio||1,x.width=w*this.dpr,x.height=c*this.dpr,this._width=w,this._height=c;var A=new Layer$1(x,this,this.dpr);A.__builtin__=!0,A.initContext(),y[CANVAS_ZLEVEL]=A,A.zlevel=CANVAS_ZLEVEL,g.push(CANVAS_ZLEVEL),this._domRoot=t}else{this._width=getSize$1(t,0,o),this._height=getSize$1(t,1,o);var S=this._domRoot=createRoot(this._width,this._height);t.appendChild(S)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.refresh=function(t){var n=this.storage.getDisplayList(!0),o=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,o,t,this._redrawId);for(var l=0;l<a.length;l++){var d=a[l],g=this._layers[d];if(!g.__builtin__&&g.refresh){var y=l===0?this._backgroundColor:null;g.refresh(y)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(t){var n=t.length,o=this._hoverlayer;if(o&&o.clear(),!!n){for(var a={inHover:!0,viewWidth:this._width,viewHeight:this._height},l,d=0;d<n;d++){var g=t[d];g.__inHover&&(o||(o=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),l||(l=o.ctx,l.save()),brush$1(l,g,a,d===n-1))}l&&l.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},r.prototype.paintOne=function(t,n){brushSingle(t,n)},r.prototype._paintList=function(t,n,o,a){if(this._redrawId===a){o=o||!1,this._updateLayerStatus(t);var l=this._doPaintList(t,n,o),d=l.finished,g=l.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),g&&this._paintHoverList(t),d)this.eachLayer(function(S){S.afterBrush&&S.afterBrush()});else{var y=this;requestAnimationFrame$2(function(){y._paintList(t,n,o,a)})}}},r.prototype._compositeManually=function(){var t=this.getLayer(CANVAS_ZLEVEL).ctx,n=this._domRoot.width,o=this._domRoot.height;t.clearRect(0,0,n,o),this.eachBuiltinLayer(function(a){a.virtual&&t.drawImage(a.dom,0,0,n,o)})},r.prototype._doPaintList=function(t,n,o){for(var a=this,l=[],d=this._opts.useDirtyRect,g=0;g<this._zlevelList.length;g++){var y=this._zlevelList[g],S=this._layers[y];S.__builtin__&&S!==this._hoverlayer&&(S.__dirty||o)&&l.push(S)}for(var x=!0,w=!1,c=function(L){var $=l[L],O=$.ctx,z=d&&$.createRepaintRects(t,n,A._width,A._height),V=o?$.__startIndex:$.__drawIndex,j=!o&&$.incremental&&Date.now,K=j&&Date.now(),Z=$.zlevel===A._zlevelList[0]?A._backgroundColor:null;if($.__startIndex===$.__endIndex)$.clear(!1,Z,z);else if(V===$.__startIndex){var q=t[V];(!q.incremental||!q.notClear||o)&&$.clear(!1,Z,z)}V===-1&&(console.error("For some unknown reason. drawIndex is -1"),V=$.__startIndex);var ie,te=function(_e){var me={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(ie=V;ie<$.__endIndex;ie++){var be=t[ie];if(be.__inHover&&(w=!0),a._doPaintEl(be,$,d,_e,me,ie===$.__endIndex-1),j){var Q=Date.now()-K;if(Q>15)break}}me.prevElClipPaths&&O.restore()};if(z)if(z.length===0)ie=$.__endIndex;else for(var oe=A.dpr,re=0;re<z.length;++re){var he=z[re];O.save(),O.beginPath(),O.rect(he.x*oe,he.y*oe,he.width*oe,he.height*oe),O.clip(),te(he),O.restore()}else O.save(),te(),O.restore();$.__drawIndex=ie,$.__drawIndex<$.__endIndex&&(x=!1)},A=this,R=0;R<l.length;R++)c(R);return env$1.wxa&&each$f(this._layers,function(L){L&&L.ctx&&L.ctx.draw&&L.ctx.draw()}),{finished:x,needsRefreshHover:w}},r.prototype._doPaintEl=function(t,n,o,a,l,d){var g=n.ctx;if(o){var y=t.getPaintRect();(!a||y&&y.intersect(a))&&(brush$1(g,t,l,d),t.setPrevPaintRect(y))}else brush$1(g,t,l,d)},r.prototype.getLayer=function(t,n){this._singleCanvas&&!this._needsManuallyCompositing&&(t=CANVAS_ZLEVEL);var o=this._layers[t];return o||(o=new Layer$1("zr_"+t,this,this.dpr),o.zlevel=t,o.__builtin__=!0,this._layerConfig[t]?merge(o,this._layerConfig[t],!0):this._layerConfig[t-EL_AFTER_INCREMENTAL_INC]&&merge(o,this._layerConfig[t-EL_AFTER_INCREMENTAL_INC],!0),n&&(o.virtual=n),this.insertLayer(t,o),o.initContext()),o},r.prototype.insertLayer=function(t,n){var o=this._layers,a=this._zlevelList,l=a.length,d=this._domRoot,g=null,y=-1;if(!o[t]&&isLayerValid(n)){if(l>0&&t>a[0]){for(y=0;y<l-1&&!(a[y]<t&&a[y+1]>t);y++);g=o[a[y]]}if(a.splice(y+1,0,t),o[t]=n,!n.virtual)if(g){var S=g.dom;S.nextSibling?d.insertBefore(n.dom,S.nextSibling):d.appendChild(n.dom)}else d.firstChild?d.insertBefore(n.dom,d.firstChild):d.appendChild(n.dom);n.__painter=this}},r.prototype.eachLayer=function(t,n){for(var o=this._zlevelList,a=0;a<o.length;a++){var l=o[a];t.call(n,this._layers[l],l)}},r.prototype.eachBuiltinLayer=function(t,n){for(var o=this._zlevelList,a=0;a<o.length;a++){var l=o[a],d=this._layers[l];d.__builtin__&&t.call(n,d,l)}},r.prototype.eachOtherLayer=function(t,n){for(var o=this._zlevelList,a=0;a<o.length;a++){var l=o[a],d=this._layers[l];d.__builtin__||t.call(n,d,l)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(w,c){w.__dirty=w.__used=!1});function n(w){l&&(l.__endIndex!==w&&(l.__dirty=!0),l.__endIndex=w)}if(this._singleCanvas)for(var o=1;o<t.length;o++){var a=t[o];if(a.zlevel!==t[o-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var l=null,d=0,g,y;for(y=0;y<t.length;y++){var a=t[y],S=a.zlevel,x=void 0;g!==S&&(g=S,d=0),a.incremental?(x=this.getLayer(S+INCREMENTAL_INC,this._needsManuallyCompositing),x.incremental=!0,d=1):x=this.getLayer(S+(d>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),x.__builtin__||logError("ZLevel "+S+" has been used by unkown layer "+x.id),x!==l&&(x.__used=!0,x.__startIndex!==y&&(x.__dirty=!0),x.__startIndex=y,x.incremental?x.__drawIndex=-1:x.__drawIndex=y,n(y),l=x),a.__dirty&REDRAW_BIT&&!a.__inHover&&(x.__dirty=!0,x.incremental&&x.__drawIndex<0&&(x.__drawIndex=y))}n(y),this.eachBuiltinLayer(function(w,c){!w.__used&&w.getElementCount()>0&&(w.__dirty=!0,w.__startIndex=w.__endIndex=w.__drawIndex=0),w.__dirty&&w.__drawIndex<0&&(w.__drawIndex=w.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(t){t.clear()},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t,each$f(this._layers,function(n){n.setUnpainted()})},r.prototype.configLayer=function(t,n){if(n){var o=this._layerConfig;o[t]?merge(o[t],n,!0):o[t]=n;for(var a=0;a<this._zlevelList.length;a++){var l=this._zlevelList[a];if(l===t||l===t+EL_AFTER_INCREMENTAL_INC){var d=this._layers[l];merge(d,o[t],!0)}}}},r.prototype.delLayer=function(t){var n=this._layers,o=this._zlevelList,a=n[t];a&&(a.dom.parentNode.removeChild(a.dom),delete n[t],o.splice(indexOf(o,t),1))},r.prototype.resize=function(t,n){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var a=this._opts,l=this.root;if(t!=null&&(a.width=t),n!=null&&(a.height=n),t=getSize$1(l,0,a),n=getSize$1(l,1,a),o.style.display="",this._width!==t||n!==this._height){o.style.width=t+"px",o.style.height=n+"px";for(var d in this._layers)this._layers.hasOwnProperty(d)&&this._layers[d].resize(t,n);this.refresh(!0)}this._width=t,this._height=n}else{if(t==null||n==null)return;this._width=t,this._height=n,this.getLayer(CANVAS_ZLEVEL).resize(t,n)}return this},r.prototype.clearLayer=function(t){var n=this._layers[t];n&&n.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var n=new Layer$1("image",this,t.pixelRatio||this.dpr);n.initContext(),n.clear(!1,t.backgroundColor||this._backgroundColor);var o=n.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var a=n.dom.width,l=n.dom.height;this.eachLayer(function(w){w.__builtin__?o.drawImage(w.dom,0,0,a,l):w.renderToCanvas&&(o.save(),w.renderToCanvas(o),o.restore())})}else for(var d={inHover:!1,viewWidth:this._width,viewHeight:this._height},g=this.storage.getDisplayList(!0),y=0,S=g.length;y<S;y++){var x=g[y];brush$1(o,x,d,y===S-1)}return n.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();const CanvasPainter$1=CanvasPainter;function install$R(r){r.registerPainter("canvas",CanvasPainter$1)}var LineSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(n){var o=new Group$4,a=createSymbol$1("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);o.add(a),a.setStyle(n.lineStyle);var l=this.getData().getVisual("symbol"),d=this.getData().getVisual("symbolRotate"),g=l==="none"?"circle":l,y=n.itemHeight*.8,S=createSymbol$1(g,(n.itemWidth-y)/2,(n.itemHeight-y)/2,y,y,n.itemStyle.fill);o.add(S),S.setStyle(n.itemStyle);var x=n.iconRotate==="inherit"?d:n.iconRotate||0;return S.rotation=x*Math.PI/180,S.setOrigin([n.itemWidth/2,n.itemHeight/2]),g.indexOf("empty")>-1&&(S.style.stroke=S.style.fill,S.style.fill="#fff",S.style.lineWidth=2),o},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(SeriesModel$1);const LineSeries=LineSeriesModel;function getDefaultLabel(r,t){var n=r.mapDimensionsAll("defaultedLabel"),o=n.length;if(o===1){var a=retrieveRawValue(r,t,n[0]);return a!=null?a+"":null}else if(o){for(var l=[],d=0;d<n.length;d++)l.push(retrieveRawValue(r,t,n[d]));return l.join(" ")}}function getDefaultInterpolatedLabel(r,t){var n=r.mapDimensionsAll("defaultedLabel");if(!isArray$1(t))return t+"";for(var o=[],a=0;a<n.length;a++){var l=r.getDimensionIndex(n[a]);l>=0&&o.push(t[l])}return o.join(" ")}var Symbol$1=function(r){__extends(t,r);function t(n,o,a,l){var d=r.call(this)||this;return d.updateData(n,o,a,l),d}return t.prototype._createSymbol=function(n,o,a,l,d){this.removeAll();var g=createSymbol$1(n,-1,-1,2,2,null,d);g.attr({z2:100,culling:!0,scaleX:l[0]/2,scaleY:l[1]/2}),g.drift=driftSymbol,this._symbolType=n,this.add(g)},t.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){enterEmphasis(this.childAt(0))},t.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},t.prototype.setZ=function(n,o){var a=this.childAt(0);a.zlevel=n,a.z=o},t.prototype.setDraggable=function(n,o){var a=this.childAt(0);a.draggable=n,a.cursor=!o&&n?"move":a.cursor},t.prototype.updateData=function(n,o,a,l){this.silent=!1;var d=n.getItemVisual(o,"symbol")||"circle",g=n.hostModel,y=t.getSymbolSize(n,o),S=d!==this._symbolType,x=l&&l.disableAnimation;if(S){var w=n.getItemVisual(o,"symbolKeepAspect");this._createSymbol(d,n,o,y,w)}else{var c=this.childAt(0);c.silent=!1;var A={scaleX:y[0]/2,scaleY:y[1]/2};x?c.attr(A):updateProps$1(c,A,g,o),saveOldStyle(c)}if(this._updateCommon(n,o,y,a,l),S){var c=this.childAt(0);if(!x){var A={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,initProps(c,A,g,o)}}x&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(n,o,a,l,d){var g=this.childAt(0),y=n.hostModel,S,x,w,c,A,R,L,$,O;if(l&&(S=l.emphasisItemStyle,x=l.blurItemStyle,w=l.selectItemStyle,c=l.focus,A=l.blurScope,L=l.labelStatesModels,$=l.hoverScale,O=l.cursorStyle,R=l.emphasisDisabled),!l||n.hasItemOption){var z=l&&l.itemModel?l.itemModel:n.getItemModel(o),V=z.getModel("emphasis");S=V.getModel("itemStyle").getItemStyle(),w=z.getModel(["select","itemStyle"]).getItemStyle(),x=z.getModel(["blur","itemStyle"]).getItemStyle(),c=V.get("focus"),A=V.get("blurScope"),R=V.get("disabled"),L=getLabelStatesModels(z),$=V.getShallow("scale"),O=z.getShallow("cursor")}var j=n.getItemVisual(o,"symbolRotate");g.attr("rotation",(j||0)*Math.PI/180||0);var K=normalizeSymbolOffset(n.getItemVisual(o,"symbolOffset"),a);K&&(g.x=K[0],g.y=K[1]),O&&g.attr("cursor",O);var Z=n.getItemVisual(o,"style"),q=Z.fill;if(g instanceof ZRImage$1){var ie=g.style;g.useStyle(extend({image:ie.image,x:ie.x,y:ie.y,width:ie.width,height:ie.height},Z))}else g.__isEmptyBrush?g.useStyle(extend({},Z)):g.useStyle(Z),g.style.decal=null,g.setColor(q,d&&d.symbolInnerColor),g.style.strokeNoScale=!0;var te=n.getItemVisual(o,"liftZ"),oe=this._z2;te!=null?oe==null&&(this._z2=g.z2,g.z2+=te):oe!=null&&(g.z2=oe,this._z2=null);var re=d&&d.useNameLabel;setLabelStyle(g,L,{labelFetcher:y,labelDataIndex:o,defaultText:he,inheritColor:q,defaultOpacity:Z.opacity});function he(be){return re?n.getName(be):getDefaultLabel(n,be)}this._sizeX=a[0]/2,this._sizeY=a[1]/2;var _e=g.ensureState("emphasis");_e.style=S,g.ensureState("select").style=w,g.ensureState("blur").style=x;var me=$==null||$===!0?Math.max(1.1,3/this._sizeY):isFinite($)&&$>0?+$:1;_e.scaleX=this._sizeX*me,_e.scaleY=this._sizeY*me,this.setSymbolScale(1),toggleHoverEmphasis(this,c,A,R)},t.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},t.prototype.fadeOut=function(n,o,a){var l=this.childAt(0),d=getECData(this).dataIndex,g=a&&a.animation;if(this.silent=l.silent=!0,a&&a.fadeLabel){var y=l.getTextContent();y&&removeElement(y,{style:{opacity:0}},o,{dataIndex:d,removeOpt:g,cb:function(){l.removeTextContent()}})}else l.removeTextContent();removeElement(l,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:d,cb:n,removeOpt:g})},t.getSymbolSize=function(n,o){return normalizeSymbolSize(n.getItemVisual(o,"symbolSize"))},t}(Group$4);function driftSymbol(r,t){this.parent.drift(r,t)}const SymbolClz=Symbol$1;function symbolNeedsDraw$1(r,t,n,o){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(o.isIgnore&&o.isIgnore(n))&&!(o.clipShape&&!o.clipShape.contain(t[0],t[1]))&&r.getItemVisual(n,"symbol")!=="none"}function normalizeUpdateOpt(r){return r!=null&&!isObject$3(r)&&(r={isIgnore:r}),r||{}}function makeSeriesScope$2(r){var t=r.hostModel,n=t.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:getLabelStatesModels(t),cursorStyle:t.get("cursor")}}var SymbolDraw=function(){function r(t){this.group=new Group$4,this._SymbolCtor=t||SymbolClz}return r.prototype.updateData=function(t,n){this._progressiveEls=null,n=normalizeUpdateOpt(n);var o=this.group,a=t.hostModel,l=this._data,d=this._SymbolCtor,g=n.disableAnimation,y=makeSeriesScope$2(t),S={disableAnimation:g},x=n.getSymbolPoint||function(w){return t.getItemLayout(w)};l||o.removeAll(),t.diff(l).add(function(w){var c=x(w);if(symbolNeedsDraw$1(t,c,w,n)){var A=new d(t,w,y,S);A.setPosition(c),t.setItemGraphicEl(w,A),o.add(A)}}).update(function(w,c){var A=l.getItemGraphicEl(c),R=x(w);if(!symbolNeedsDraw$1(t,R,w,n)){o.remove(A);return}var L=t.getItemVisual(w,"symbol")||"circle",$=A&&A.getSymbolType&&A.getSymbolType();if(!A||$&&$!==L)o.remove(A),A=new d(t,w,y,S),A.setPosition(R);else{A.updateData(t,w,y,S);var O={x:R[0],y:R[1]};g?A.attr(O):updateProps$1(A,O,a)}o.add(A),t.setItemGraphicEl(w,A)}).remove(function(w){var c=l.getItemGraphicEl(w);c&&c.fadeOut(function(){o.remove(c)},a)}).execute(),this._getSymbolPoint=x,this._data=t},r.prototype.updateLayout=function(){var t=this,n=this._data;n&&n.eachItemGraphicEl(function(o,a){var l=t._getSymbolPoint(a);o.setPosition(l),o.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=makeSeriesScope$2(t),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,n,o){this._progressiveEls=[],o=normalizeUpdateOpt(o);function a(y){y.isGroup||(y.incremental=!0,y.ensureState("emphasis").hoverLayer=!0)}for(var l=t.start;l<t.end;l++){var d=n.getItemLayout(l);if(symbolNeedsDraw$1(n,d,l,o)){var g=new this._SymbolCtor(n,l,this._seriesScope);g.traverse(a),g.setPosition(d),this.group.add(g),n.setItemGraphicEl(l,g),this._progressiveEls.push(g)}}},r.prototype.eachRendered=function(t){traverseElements(this._progressiveEls||this.group,t)},r.prototype.remove=function(t){var n=this.group,o=this._data;o&&t?o.eachItemGraphicEl(function(a){a.fadeOut(function(){n.remove(a)},o.hostModel)}):n.removeAll()},r}();const SymbolDraw$1=SymbolDraw;function prepareDataCoordInfo(r,t,n){var o=r.getBaseAxis(),a=r.getOtherAxis(o),l=getValueStart(a,n),d=o.dim,g=a.dim,y=t.mapDimension(g),S=t.mapDimension(d),x=g==="x"||g==="radius"?1:0,w=map$1(r.dimensions,function(R){return t.mapDimension(R)}),c=!1,A=t.getCalculationInfo("stackResultDimension");return isDimensionStacked(t,w[0])&&(c=!0,w[0]=A),isDimensionStacked(t,w[1])&&(c=!0,w[1]=A),{dataDimsForPoint:w,valueStart:l,valueAxisDim:g,baseAxisDim:d,stacked:!!c,valueDim:y,baseDim:S,baseDataOffset:x,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function getValueStart(r,t){var n=0,o=r.scale.getExtent();return t==="start"?n=o[0]:t==="end"?n=o[1]:isNumber(t)&&!isNaN(t)?n=t:o[0]>0?n=o[0]:o[1]<0&&(n=o[1]),n}function getStackedOnPoint(r,t,n,o){var a=NaN;r.stacked&&(a=n.get(n.getCalculationInfo("stackedOverDimension"),o)),isNaN(a)&&(a=r.valueStart);var l=r.baseDataOffset,d=[];return d[l]=n.get(r.baseDim,o),d[1-l]=a,t.dataToPoint(d)}function diffData(r,t){var n=[];return t.diff(r).add(function(o){n.push({cmd:"+",idx:o})}).update(function(o,a){n.push({cmd:"=",idx:a,idx1:o})}).remove(function(o){n.push({cmd:"-",idx:o})}).execute(),n}function lineAnimationDiff(r,t,n,o,a,l,d,g){for(var y=diffData(r,t),S=[],x=[],w=[],c=[],A=[],R=[],L=[],$=prepareDataCoordInfo(a,t,d),O=r.getLayout("points")||[],z=t.getLayout("points")||[],V=0;V<y.length;V++){var j=y[V],K=!0,Z=void 0,q=void 0;switch(j.cmd){case"=":Z=j.idx*2,q=j.idx1*2;var ie=O[Z],te=O[Z+1],oe=z[q],re=z[q+1];(isNaN(ie)||isNaN(te))&&(ie=oe,te=re),S.push(ie,te),x.push(oe,re),w.push(n[Z],n[Z+1]),c.push(o[q],o[q+1]),L.push(t.getRawIndex(j.idx1));break;case"+":var he=j.idx,_e=$.dataDimsForPoint,me=a.dataToPoint([t.get(_e[0],he),t.get(_e[1],he)]);q=he*2,S.push(me[0],me[1]),x.push(z[q],z[q+1]);var be=getStackedOnPoint($,a,t,he);w.push(be[0],be[1]),c.push(o[q],o[q+1]),L.push(t.getRawIndex(he));break;case"-":K=!1}K&&(A.push(j),R.push(R.length))}R.sort(function(Qt,Xe){return L[Qt]-L[Xe]});for(var Q=S.length,Ne=createFloat32Array(Q),Ee=createFloat32Array(Q),Ge=createFloat32Array(Q),it=createFloat32Array(Q),Te=[],V=0;V<R.length;V++){var Ke=R[V],Tt=V*2,Lt=Ke*2;Ne[Tt]=S[Lt],Ne[Tt+1]=S[Lt+1],Ee[Tt]=x[Lt],Ee[Tt+1]=x[Lt+1],Ge[Tt]=w[Lt],Ge[Tt+1]=w[Lt+1],it[Tt]=c[Lt],it[Tt+1]=c[Lt+1],Te[V]=A[Ke]}return{current:Ne,next:Ee,stackedOnCurrent:Ge,stackedOnNext:it,status:Te}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(r,t){return isNaN(r)||isNaN(t)}function drawSegment(r,t,n,o,a,l,d,g,y){for(var S,x,w,c,A,R,L=n,$=0;$<o;$++){var O=t[L*2],z=t[L*2+1];if(L>=a||L<0)break;if(isPointNull$1(O,z)){if(y){L+=l;continue}break}if(L===n)r[l>0?"moveTo":"lineTo"](O,z),w=O,c=z;else{var V=O-S,j=z-x;if(V*V+j*j<.5){L+=l;continue}if(d>0){for(var K=L+l,Z=t[K*2],q=t[K*2+1];Z===O&&q===z&&$<o;)$++,K+=l,L+=l,Z=t[K*2],q=t[K*2+1],O=t[L*2],z=t[L*2+1],V=O-S,j=z-x;var ie=$+1;if(y)for(;isPointNull$1(Z,q)&&ie<o;)ie++,K+=l,Z=t[K*2],q=t[K*2+1];var te=.5,oe=0,re=0,he=void 0,_e=void 0;if(ie>=o||isPointNull$1(Z,q))A=O,R=z;else{oe=Z-S,re=q-x;var me=O-S,be=Z-O,Q=z-x,Ne=q-z,Ee=void 0,Ge=void 0;if(g==="x"){Ee=Math.abs(me),Ge=Math.abs(be);var it=oe>0?1:-1;A=O-it*Ee*d,R=z,he=O+it*Ge*d,_e=z}else if(g==="y"){Ee=Math.abs(Q),Ge=Math.abs(Ne);var Te=re>0?1:-1;A=O,R=z-Te*Ee*d,he=O,_e=z+Te*Ge*d}else Ee=Math.sqrt(me*me+Q*Q),Ge=Math.sqrt(be*be+Ne*Ne),te=Ge/(Ge+Ee),A=O-oe*d*(1-te),R=z-re*d*(1-te),he=O+oe*d*te,_e=z+re*d*te,he=mathMin$5(he,mathMax$5(Z,O)),_e=mathMin$5(_e,mathMax$5(q,z)),he=mathMax$5(he,mathMin$5(Z,O)),_e=mathMax$5(_e,mathMin$5(q,z)),oe=he-O,re=_e-z,A=O-oe*Ee/Ge,R=z-re*Ee/Ge,A=mathMin$5(A,mathMax$5(S,O)),R=mathMin$5(R,mathMax$5(x,z)),A=mathMax$5(A,mathMin$5(S,O)),R=mathMax$5(R,mathMin$5(x,z)),oe=O-A,re=z-R,he=O+oe*Ge/Ee,_e=z+re*Ge/Ee}r.bezierCurveTo(w,c,A,R,O,z),w=he,c=_e}else r.lineTo(O,z)}S=O,x=z,L+=l}return $}var ECPolylineShape=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),ECPolyline=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="ec-polyline",o}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ECPolylineShape},t.prototype.buildPath=function(n,o){var a=o.points,l=0,d=a.length/2;if(o.connectNulls){for(;d>0&&isPointNull$1(a[d*2-2],a[d*2-1]);d--);for(;l<d&&isPointNull$1(a[l*2],a[l*2+1]);l++);}for(;l<d;)l+=drawSegment(n,a,l,d,d,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},t.prototype.getPointOn=function(n,o){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var a=this.path,l=a.data,d=PathProxy$1.CMD,g,y,S=o==="x",x=[],w=0;w<l.length;){var c=l[w++],A=void 0,R=void 0,L=void 0,$=void 0,O=void 0,z=void 0,V=void 0;switch(c){case d.M:g=l[w++],y=l[w++];break;case d.L:if(A=l[w++],R=l[w++],V=S?(n-g)/(A-g):(n-y)/(R-y),V<=1&&V>=0){var j=S?(R-y)*V+y:(A-g)*V+g;return S?[n,j]:[j,n]}g=A,y=R;break;case d.C:A=l[w++],R=l[w++],L=l[w++],$=l[w++],O=l[w++],z=l[w++];var K=S?cubicRootAt(g,A,L,O,n,x):cubicRootAt(y,R,$,z,n,x);if(K>0)for(var Z=0;Z<K;Z++){var q=x[Z];if(q<=1&&q>=0){var j=S?cubicAt(y,R,$,z,q):cubicAt(g,A,L,O,q);return S?[n,j]:[j,n]}}g=O,y=z;break}}},t}(Path$1),ECPolygonShape=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(ECPolylineShape),ECPolygon=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="ec-polygon",o}return t.prototype.getDefaultShape=function(){return new ECPolygonShape},t.prototype.buildPath=function(n,o){var a=o.points,l=o.stackedOnPoints,d=0,g=a.length/2,y=o.smoothMonotone;if(o.connectNulls){for(;g>0&&isPointNull$1(a[g*2-2],a[g*2-1]);g--);for(;d<g&&isPointNull$1(a[d*2],a[d*2+1]);d++);}for(;d<g;){var S=drawSegment(n,a,d,g,g,1,o.smooth,y,o.connectNulls);drawSegment(n,l,d+S-1,S,g,-1,o.stackedOnSmooth,y,o.connectNulls),d+=S+1,n.closePath()}},t}(Path$1);function createGridClipPath(r,t,n,o,a){var l=r.getArea(),d=l.x,g=l.y,y=l.width,S=l.height,x=n.get(["lineStyle","width"])||2;d-=x/2,g-=x/2,y+=x,S+=x,d=Math.floor(d),y=Math.round(y);var w=new Rect$3({shape:{x:d,y:g,width:y,height:S}});if(t){var c=r.getBaseAxis(),A=c.isHorizontal(),R=c.inverse;A?(R&&(w.shape.x+=y),w.shape.width=0):(R||(w.shape.y+=S),w.shape.height=0);var L=isFunction(a)?function($){a($,w)}:null;initProps(w,{shape:{width:y,height:S,x:d,y:g}},n,null,o,L)}return w}function createPolarClipPath(r,t,n){var o=r.getArea(),a=round$3(o.r0,1),l=round$3(o.r,1),d=new Sector$1({shape:{cx:round$3(r.cx,1),cy:round$3(r.cy,1),r0:a,r:l,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});if(t){var g=r.getBaseAxis().dim==="angle";g?d.shape.endAngle=o.startAngle:d.shape.r=a,initProps(d,{shape:{endAngle:o.endAngle,r:l}},n)}return d}function createClipPath(r,t,n,o,a){if(r){if(r.type==="polar")return createPolarClipPath(r,t,n);if(r.type==="cartesian2d")return createGridClipPath(r,t,n,o,a)}else return null;return null}function isCoordinateSystemType(r,t){return r.type===t}function isPointsSame(r,t){if(r.length===t.length){for(var n=0;n<r.length;n++)if(r[n]!==t[n])return;return!0}}function bboxFromPoints(r){for(var t=1/0,n=1/0,o=-1/0,a=-1/0,l=0;l<r.length;){var d=r[l++],g=r[l++];isNaN(d)||(t=Math.min(d,t),o=Math.max(d,o)),isNaN(g)||(n=Math.min(g,n),a=Math.max(g,a))}return[[t,n],[o,a]]}function getBoundingDiff(r,t){var n=bboxFromPoints(r),o=n[0],a=n[1],l=bboxFromPoints(t),d=l[0],g=l[1];return Math.max(Math.abs(o[0]-d[0]),Math.abs(o[1]-d[1]),Math.abs(a[0]-g[0]),Math.abs(a[1]-g[1]))}function getSmooth(r){return isNumber(r)?r:r?.5:0}function getStackedOnPoints(r,t,n){if(!n.valueDim)return[];for(var o=t.count(),a=createFloat32Array(o*2),l=0;l<o;l++){var d=getStackedOnPoint(n,r,t,l);a[l*2]=d[0],a[l*2+1]=d[1]}return a}function turnPointsIntoStep(r,t,n,o){var a=t.getBaseAxis(),l=a.dim==="x"||a.dim==="radius"?0:1,d=[],g=0,y=[],S=[],x=[],w=[];if(o){for(g=0;g<r.length;g+=2)!isNaN(r[g])&&!isNaN(r[g+1])&&w.push(r[g],r[g+1]);r=w}for(g=0;g<r.length-2;g+=2)switch(x[0]=r[g+2],x[1]=r[g+3],S[0]=r[g],S[1]=r[g+1],d.push(S[0],S[1]),n){case"end":y[l]=x[l],y[1-l]=S[1-l],d.push(y[0],y[1]);break;case"middle":var c=(S[l]+x[l])/2,A=[];y[l]=A[l]=c,y[1-l]=S[1-l],A[1-l]=x[1-l],d.push(y[0],y[1]),d.push(A[0],A[1]);break;default:y[l]=S[l],y[1-l]=x[1-l],d.push(y[0],y[1])}return d.push(r[g++],r[g++]),d}function clipColorStops(r,t){var n=[],o=r.length,a,l;function d(x,w,c){var A=x.coord,R=(c-A)/(w.coord-A),L=lerp(R,[x.color,w.color]);return{coord:c,color:L}}for(var g=0;g<o;g++){var y=r[g],S=y.coord;if(S<0)a=y;else if(S>t){l?n.push(d(l,y,t)):a&&n.push(d(a,y,0),d(a,y,t));break}else a&&(n.push(d(a,y,0)),a=null),n.push(y),l=y}return n}function getVisualGradient(r,t,n){var o=r.getVisual("visualMeta");if(!(!o||!o.length||!r.count())&&t.type==="cartesian2d"){for(var a,l,d=o.length-1;d>=0;d--){var g=r.getDimensionInfo(o[d].dimension);if(a=g&&g.coordDim,a==="x"||a==="y"){l=o[d];break}}if(l){var y=t.getAxis(a),S=map$1(l.stops,function(V){return{coord:y.toGlobalCoord(y.dataToCoord(V.value)),color:V.color}}),x=S.length,w=l.outerColors.slice();x&&S[0].coord>S[x-1].coord&&(S.reverse(),w.reverse());var c=clipColorStops(S,a==="x"?n.getWidth():n.getHeight()),A=c.length;if(!A&&x)return S[0].coord<0?w[1]?w[1]:S[x-1].color:w[0]?w[0]:S[0].color;var R=10,L=c[0].coord-R,$=c[A-1].coord+R,O=$-L;if(O<.001)return"transparent";each$f(c,function(V){V.offset=(V.coord-L)/O}),c.push({offset:A?c[A-1].offset:.5,color:w[1]||"transparent"}),c.unshift({offset:A?c[0].offset:.5,color:w[0]||"transparent"});var z=new LinearGradient$1(0,0,0,0,c,!0);return z[a]=L,z[a+"2"]=$,z}}}function getIsIgnoreFunc(r,t,n){var o=r.get("showAllSymbol"),a=o==="auto";if(!(o&&!a)){var l=n.getAxesByScale("ordinal")[0];if(l&&!(a&&canShowAllSymbolForCategory(l,t))){var d=t.mapDimension(l.dim),g={};return each$f(l.getViewLabels(),function(y){var S=l.scale.getRawOrdinalNumber(y.tickValue);g[S]=1}),function(y){return!g.hasOwnProperty(t.get(d,y))}}}}function canShowAllSymbolForCategory(r,t){var n=r.getExtent(),o=Math.abs(n[1]-n[0])/r.scale.count();isNaN(o)&&(o=0);for(var a=t.count(),l=Math.max(1,Math.round(a/5)),d=0;d<a;d+=l)if(SymbolClz.getSymbolSize(t,d)[r.isHorizontal()?1:0]*1.5>o)return!1;return!0}function isPointNull(r,t){return isNaN(r)||isNaN(t)}function getLastIndexNotNull(r){for(var t=r.length/2;t>0&&isPointNull(r[t*2-2],r[t*2-1]);t--);return t-1}function getPointAtIndex(r,t){return[r[t*2],r[t*2+1]]}function getIndexRange(r,t,n){for(var o=r.length/2,a=n==="x"?0:1,l,d,g=0,y=-1,S=0;S<o;S++)if(d=r[S*2+a],!(isNaN(d)||isNaN(r[S*2+1-a]))){if(S===0){l=d;continue}if(l<=t&&d>=t||l>=t&&d<=t){y=S;break}g=S,l=d}return{range:[g,y],t:(t-l)/(d-l)}}function anyStateShowEndLabel(r){if(r.get(["endLabel","show"]))return!0;for(var t=0;t<SPECIAL_STATES.length;t++)if(r.get([SPECIAL_STATES[t],"endLabel","show"]))return!0;return!1}function createLineClipPath(r,t,n,o){if(isCoordinateSystemType(t,"cartesian2d")){var a=o.getModel("endLabel"),l=a.get("valueAnimation"),d=o.getData(),g={lastFrameIndex:0},y=anyStateShowEndLabel(o)?function(A,R){r._endLabelOnDuring(A,R,d,g,l,a,t)}:null,S=t.getBaseAxis().isHorizontal(),x=createGridClipPath(t,n,o,function(){var A=r._endLabel;A&&n&&g.originalX!=null&&A.attr({x:g.originalX,y:g.originalY})},y);if(!o.get("clip",!0)){var w=x.shape,c=Math.max(w.width,w.height);S?(w.y-=c,w.height+=c*2):(w.x-=c,w.width+=c*2)}return y&&y(1,x),x}else return createPolarClipPath(t,n,o)}function getEndLabelStateSpecified(r,t){var n=t.getBaseAxis(),o=n.isHorizontal(),a=n.inverse,l=o?a?"right":"left":"center",d=o?"middle":a?"top":"bottom";return{normal:{align:r.get("align")||l,verticalAlign:r.get("verticalAlign")||d}}}var LineView=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var n=new Group$4,o=new SymbolDraw$1;this.group.add(o.group),this._symbolDraw=o,this._lineGroup=n},t.prototype.render=function(n,o,a){var l=this,d=n.coordinateSystem,g=this.group,y=n.getData(),S=n.getModel("lineStyle"),x=n.getModel("areaStyle"),w=y.getLayout("points")||[],c=d.type==="polar",A=this._coordSys,R=this._symbolDraw,L=this._polyline,$=this._polygon,O=this._lineGroup,z=!o.ssr&&n.isAnimationEnabled(),V=!x.isEmpty(),j=x.get("origin"),K=prepareDataCoordInfo(d,y,j),Z=V&&getStackedOnPoints(d,y,K),q=n.get("showSymbol"),ie=n.get("connectNulls"),te=q&&!c&&getIsIgnoreFunc(n,y,d),oe=this._data;oe&&oe.eachItemGraphicEl(function(Xe,Be){Xe.__temp&&(g.remove(Xe),oe.setItemGraphicEl(Be,null))}),q||R.remove(),g.add(O);var re=c?!1:n.get("step"),he;d&&d.getArea&&n.get("clip",!0)&&(he=d.getArea(),he.width!=null?(he.x-=.1,he.y-=.1,he.width+=.2,he.height+=.2):he.r0&&(he.r0-=.5,he.r+=.5)),this._clipShapeForSymbol=he;var _e=getVisualGradient(y,d,a)||y.getVisual("style")[y.getVisual("drawType")];if(!(L&&A.type===d.type&&re===this._step))q&&R.updateData(y,{isIgnore:te,clipShape:he,disableAnimation:!0,getSymbolPoint:function(Xe){return[w[Xe*2],w[Xe*2+1]]}}),z&&this._initSymbolLabelAnimation(y,d,he),re&&(w=turnPointsIntoStep(w,d,re,ie),Z&&(Z=turnPointsIntoStep(Z,d,re,ie))),L=this._newPolyline(w),V?$=this._newPolygon(w,Z):$&&(O.remove($),$=this._polygon=null),c||this._initOrUpdateEndLabel(n,d,convertToColorString(_e)),O.setClipPath(createLineClipPath(this,d,!0,n));else{V&&!$?$=this._newPolygon(w,Z):$&&!V&&(O.remove($),$=this._polygon=null),c||this._initOrUpdateEndLabel(n,d,convertToColorString(_e));var me=O.getClipPath();if(me){var be=createLineClipPath(this,d,!1,n);initProps(me,{shape:be.shape},n)}else O.setClipPath(createLineClipPath(this,d,!0,n));q&&R.updateData(y,{isIgnore:te,clipShape:he,disableAnimation:!0,getSymbolPoint:function(Xe){return[w[Xe*2],w[Xe*2+1]]}}),(!isPointsSame(this._stackedOnPoints,Z)||!isPointsSame(this._points,w))&&(z?this._doUpdateAnimation(y,Z,d,a,re,j,ie):(re&&(w=turnPointsIntoStep(w,d,re,ie),Z&&(Z=turnPointsIntoStep(Z,d,re,ie))),L.setShape({points:w}),$&&$.setShape({points:w,stackedOnPoints:Z})))}var Q=n.getModel("emphasis"),Ne=Q.get("focus"),Ee=Q.get("blurScope"),Ge=Q.get("disabled");if(L.useStyle(defaults(S.getLineStyle(),{fill:"none",stroke:_e,lineJoin:"bevel"})),setStatesStylesFromModel(L,n,"lineStyle"),L.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var it=L.getState("emphasis").style;it.lineWidth=+L.style.lineWidth+1}getECData(L).seriesIndex=n.seriesIndex,toggleHoverEmphasis(L,Ne,Ee,Ge);var Te=getSmooth(n.get("smooth")),Ke=n.get("smoothMonotone");if(L.setShape({smooth:Te,smoothMonotone:Ke,connectNulls:ie}),$){var Tt=y.getCalculationInfo("stackedOnSeries"),Lt=0;$.useStyle(defaults(x.getAreaStyle(),{fill:_e,opacity:.7,lineJoin:"bevel",decal:y.getVisual("style").decal})),Tt&&(Lt=getSmooth(Tt.get("smooth"))),$.setShape({smooth:Te,stackedOnSmooth:Lt,smoothMonotone:Ke,connectNulls:ie}),setStatesStylesFromModel($,n,"areaStyle"),getECData($).seriesIndex=n.seriesIndex,toggleHoverEmphasis($,Ne,Ee,Ge)}var Qt=function(Xe){l._changePolyState(Xe)};y.eachItemGraphicEl(function(Xe){Xe&&(Xe.onHoverStateChange=Qt)}),this._polyline.onHoverStateChange=Qt,this._data=y,this._coordSys=d,this._stackedOnPoints=Z,this._points=w,this._step=re,this._valueOrigin=j,n.get("triggerLineEvent")&&(this.packEventData(n,L),$&&this.packEventData(n,$))},t.prototype.packEventData=function(n,o){getECData(o).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},t.prototype.highlight=function(n,o,a,l){var d=n.getData(),g=queryDataIndex(d,l);if(this._changePolyState("emphasis"),!(g instanceof Array)&&g!=null&&g>=0){var y=d.getLayout("points"),S=d.getItemGraphicEl(g);if(!S){var x=y[g*2],w=y[g*2+1];if(isNaN(x)||isNaN(w)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(x,w))return;var c=n.get("zlevel")||0,A=n.get("z")||0;S=new SymbolClz(d,g),S.x=x,S.y=w,S.setZ(c,A);var R=S.getSymbolPath().getTextContent();R&&(R.zlevel=c,R.z=A,R.z2=this._polyline.z2+1),S.__temp=!0,d.setItemGraphicEl(g,S),S.stopSymbolAnimation(!0),this.group.add(S)}S.highlight()}else ChartView$1.prototype.highlight.call(this,n,o,a,l)},t.prototype.downplay=function(n,o,a,l){var d=n.getData(),g=queryDataIndex(d,l);if(this._changePolyState("normal"),g!=null&&g>=0){var y=d.getItemGraphicEl(g);y&&(y.__temp?(d.setItemGraphicEl(g,null),this.group.remove(y)):y.downplay())}else ChartView$1.prototype.downplay.call(this,n,o,a,l)},t.prototype._changePolyState=function(n){var o=this._polygon;setStatesFlag(this._polyline,n),o&&setStatesFlag(o,n)},t.prototype._newPolyline=function(n){var o=this._polyline;return o&&this._lineGroup.remove(o),o=new ECPolyline({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(o),this._polyline=o,o},t.prototype._newPolygon=function(n,o){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new ECPolygon({shape:{points:n,stackedOnPoints:o},segmentIgnoreThreshold:2}),this._lineGroup.add(a),this._polygon=a,a},t.prototype._initSymbolLabelAnimation=function(n,o,a){var l,d,g=o.getBaseAxis(),y=g.inverse;o.type==="cartesian2d"?(l=g.isHorizontal(),d=!1):o.type==="polar"&&(l=g.dim==="angle",d=!0);var S=n.hostModel,x=S.get("animationDuration");isFunction(x)&&(x=x(null));var w=S.get("animationDelay")||0,c=isFunction(w)?w(null):w;n.eachItemGraphicEl(function(A,R){var L=A;if(L){var $=[A.x,A.y],O=void 0,z=void 0,V=void 0;if(a)if(d){var j=a,K=o.pointToCoord($);l?(O=j.startAngle,z=j.endAngle,V=-K[1]/180*Math.PI):(O=j.r0,z=j.r,V=K[0])}else{var Z=a;l?(O=Z.x,z=Z.x+Z.width,V=A.x):(O=Z.y+Z.height,z=Z.y,V=A.y)}var q=z===O?0:(V-O)/(z-O);y&&(q=1-q);var ie=isFunction(w)?w(R):x*q+c,te=L.getSymbolPath(),oe=te.getTextContent();L.attr({scaleX:0,scaleY:0}),L.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:ie}),oe&&oe.animateFrom({style:{opacity:0}},{duration:300,delay:ie}),te.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(n,o,a){var l=n.getModel("endLabel");if(anyStateShowEndLabel(n)){var d=n.getData(),g=this._polyline,y=d.getLayout("points");if(!y){g.removeTextContent(),this._endLabel=null;return}var S=this._endLabel;S||(S=this._endLabel=new ZRText$1({z2:200}),S.ignoreClip=!0,g.setTextContent(this._endLabel),g.disableLabelAnimation=!0);var x=getLastIndexNotNull(y);x>=0&&(setLabelStyle(g,getLabelStatesModels(n,"endLabel"),{inheritColor:a,labelFetcher:n,labelDataIndex:x,defaultText:function(w,c,A){return A!=null?getDefaultInterpolatedLabel(d,A):getDefaultLabel(d,w)},enableTextSetter:!0},getEndLabelStateSpecified(l,o)),g.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(n,o,a,l,d,g,y){var S=this._endLabel,x=this._polyline;if(S){n<1&&l.originalX==null&&(l.originalX=S.x,l.originalY=S.y);var w=a.getLayout("points"),c=a.hostModel,A=c.get("connectNulls"),R=g.get("precision"),L=g.get("distance")||0,$=y.getBaseAxis(),O=$.isHorizontal(),z=$.inverse,V=o.shape,j=z?O?V.x:V.y+V.height:O?V.x+V.width:V.y,K=(O?L:0)*(z?-1:1),Z=(O?0:-L)*(z?-1:1),q=O?"x":"y",ie=getIndexRange(w,j,q),te=ie.range,oe=te[1]-te[0],re=void 0;if(oe>=1){if(oe>1&&!A){var he=getPointAtIndex(w,te[0]);S.attr({x:he[0]+K,y:he[1]+Z}),d&&(re=c.getRawValue(te[0]))}else{var he=x.getPointOn(j,q);he&&S.attr({x:he[0]+K,y:he[1]+Z});var _e=c.getRawValue(te[0]),me=c.getRawValue(te[1]);d&&(re=interpolateRawValues(a,R,_e,me,ie.t))}l.lastFrameIndex=te[0]}else{var be=n===1||l.lastFrameIndex>0?te[0]:0,he=getPointAtIndex(w,be);d&&(re=c.getRawValue(be)),S.attr({x:he[0]+K,y:he[1]+Z})}if(d){var Q=labelInner(S);typeof Q.setLabelText=="function"&&Q.setLabelText(re)}}},t.prototype._doUpdateAnimation=function(n,o,a,l,d,g,y){var S=this._polyline,x=this._polygon,w=n.hostModel,c=lineAnimationDiff(this._data,n,this._stackedOnPoints,o,this._coordSys,a,this._valueOrigin),A=c.current,R=c.stackedOnCurrent,L=c.next,$=c.stackedOnNext;if(d&&(A=turnPointsIntoStep(c.current,a,d,y),R=turnPointsIntoStep(c.stackedOnCurrent,a,d,y),L=turnPointsIntoStep(c.next,a,d,y),$=turnPointsIntoStep(c.stackedOnNext,a,d,y)),getBoundingDiff(A,L)>3e3||x&&getBoundingDiff(R,$)>3e3){S.stopAnimation(),S.setShape({points:L}),x&&(x.stopAnimation(),x.setShape({points:L,stackedOnPoints:$}));return}S.shape.__points=c.current,S.shape.points=A;var O={shape:{points:L}};c.current!==A&&(O.shape.__points=c.next),S.stopAnimation(),updateProps$1(S,O,w),x&&(x.setShape({points:A,stackedOnPoints:R}),x.stopAnimation(),updateProps$1(x,{shape:{stackedOnPoints:$}},w),S.shape.points!==x.shape.points&&(x.shape.points=S.shape.points));for(var z=[],V=c.status,j=0;j<V.length;j++){var K=V[j].cmd;if(K==="="){var Z=n.getItemGraphicEl(V[j].idx1);Z&&z.push({el:Z,ptIdx:j})}}S.animators&&S.animators.length&&S.animators[0].during(function(){x&&x.dirtyShape();for(var q=S.shape.__points,ie=0;ie<z.length;ie++){var te=z[ie].el,oe=z[ie].ptIdx*2;te.x=q[oe],te.y=q[oe+1],te.markRedraw()}})},t.prototype.remove=function(n){var o=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(l,d){l.__temp&&(o.remove(l),a.setItemGraphicEl(d,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ChartView$1);const LineView$1=LineView;function pointsLayout(r,t){return{seriesType:r,plan:createRenderPlanner(),reset:function(n){var o=n.getData(),a=n.coordinateSystem,l=n.pipelineContext,d=t||l.large;if(a){var g=map$1(a.dimensions,function(A){return o.mapDimension(A)}).slice(0,2),y=g.length,S=o.getCalculationInfo("stackResultDimension");isDimensionStacked(o,g[0])&&(g[0]=S),isDimensionStacked(o,g[1])&&(g[1]=S);var x=o.getStore(),w=o.getDimensionIndex(g[0]),c=o.getDimensionIndex(g[1]);return y&&{progress:function(A,R){for(var L=A.end-A.start,$=d&&createFloat32Array(L*y),O=[],z=[],V=A.start,j=0;V<A.end;V++){var K=void 0;if(y===1){var Z=x.get(w,V);K=a.dataToPoint(Z,null,z)}else O[0]=x.get(w,V),O[1]=x.get(c,V),K=a.dataToPoint(O,null,z);d?($[j++]=K[0],$[j++]=K[1]):R.setItemLayout(V,K.slice())}d&&R.setLayout("points",$)}}}}}}var samplers={average:function(r){for(var t=0,n=0,o=0;o<r.length;o++)isNaN(r[o])||(t+=r[o],n++);return n===0?NaN:t/n},sum:function(r){for(var t=0,n=0;n<r.length;n++)t+=r[n]||0;return t},max:function(r){for(var t=-1/0,n=0;n<r.length;n++)r[n]>t&&(t=r[n]);return isFinite(t)?t:NaN},min:function(r){for(var t=1/0,n=0;n<r.length;n++)r[n]<t&&(t=r[n]);return isFinite(t)?t:NaN},nearest:function(r){return r[0]}},indexSampler=function(r){return Math.round(r.length/2)};function dataSample(r){return{seriesType:r,reset:function(t,n,o){var a=t.getData(),l=t.get("sampling"),d=t.coordinateSystem,g=a.count();if(g>10&&d.type==="cartesian2d"&&l){var y=d.getBaseAxis(),S=d.getOtherAxis(y),x=y.getExtent(),w=o.getDevicePixelRatio(),c=Math.abs(x[1]-x[0])*(w||1),A=Math.round(g/c);if(isFinite(A)&&A>1){l==="lttb"&&t.setData(a.lttbDownSample(a.mapDimension(S.dim),1/A));var R=void 0;isString(l)?R=samplers[l]:isFunction(l)&&(R=l),R&&t.setData(a.downSample(a.mapDimension(S.dim),1/A,R,indexSampler))}}}}}function install$Q(r){r.registerChartView(LineView$1),r.registerSeriesModel(LineSeries),r.registerLayout(pointsLayout("line",!0)),r.registerVisual({seriesType:"line",reset:function(t){var n=t.getData(),o=t.getModel("lineStyle").getLineStyle();o&&!o.stroke&&(o.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",o)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(n,o,a){var l=this.coordinateSystem;if(l&&l.clampData){var d=l.clampData(n),g=l.dataToPoint(d);if(a)each$f(l.getAxes(),function(c,A){if(c.type==="category"&&o!=null){var R=c.getTicksCoords(),L=d[A],$=o[A]==="x1"||o[A]==="y1";if($&&(L+=1),R.length<2)return;if(R.length===2){g[A]=c.toGlobalCoord(c.getExtent()[$?1:0]);return}for(var O=void 0,z=void 0,V=1,j=0;j<R.length;j++){var K=R[j].coord,Z=j===R.length-1?R[j-1].tickValue+V:R[j].tickValue;if(Z===L){z=K;break}else if(Z<L)O=K;else if(O!=null&&Z>L){z=(K+O)/2;break}j===1&&(V=Z-R[0].tickValue)}z==null&&(O?O&&(z=R[R.length-1].coord):z=R[0].coord),g[A]=c.toGlobalCoord(z)}});else{var y=this.getData(),S=y.getLayout("offset"),x=y.getLayout("size"),w=l.getBaseAxis().isHorizontal()?0:1;g[w]+=S+x/2}return g}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(SeriesModel$1);SeriesModel$1.registerClass(BaseBarSeriesModel);const BaseBarSeriesModel$1=BaseBarSeriesModel;var BarSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),o=this.get("largeThreshold");return o>n&&(n=o),n},t.prototype.brushSelector=function(n,o,a){return a.rect(o.getItemLayout(n))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(BaseBarSeriesModel$1);const BarSeries=BarSeriesModel;var SausageShape=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),SausagePath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="sausage",o}return t.prototype.getDefaultShape=function(){return new SausageShape},t.prototype.buildPath=function(n,o){var a=o.cx,l=o.cy,d=Math.max(o.r0||0,0),g=Math.max(o.r,0),y=(g-d)*.5,S=d+y,x=o.startAngle,w=o.endAngle,c=o.clockwise,A=Math.PI*2,R=c?w-x<A:x-w<A;R||(x=w-(c?A:-A));var L=Math.cos(x),$=Math.sin(x),O=Math.cos(w),z=Math.sin(w);R?(n.moveTo(L*d+a,$*d+l),n.arc(L*S+a,$*S+l,y,-Math.PI+x,x,!c)):n.moveTo(L*g+a,$*g+l),n.arc(a,l,g,x,w,!c),n.arc(O*S+a,z*S+l,y,w-Math.PI*2,w-Math.PI,!c),d!==0&&n.arc(a,l,d,w,x,c)},t}(Path$1);const Sausage=SausagePath;function createSectorCalculateTextPosition(r,t){t=t||{};var n=t.isRoundCap;return function(o,a,l){var d=a.position;if(!d||d instanceof Array)return calculateTextPosition(o,a,l);var g=r(d),y=a.distance!=null?a.distance:5,S=this.shape,x=S.cx,w=S.cy,c=S.r,A=S.r0,R=(c+A)/2,L=S.startAngle,$=S.endAngle,O=(L+$)/2,z=n?Math.abs(c-A)/2:0,V=Math.cos,j=Math.sin,K=x+c*V(L),Z=w+c*j(L),q="left",ie="top";switch(g){case"startArc":K=x+(A-y)*V(O),Z=w+(A-y)*j(O),q="center",ie="top";break;case"insideStartArc":K=x+(A+y)*V(O),Z=w+(A+y)*j(O),q="center",ie="bottom";break;case"startAngle":K=x+R*V(L)+adjustAngleDistanceX(L,y+z,!1),Z=w+R*j(L)+adjustAngleDistanceY(L,y+z,!1),q="right",ie="middle";break;case"insideStartAngle":K=x+R*V(L)+adjustAngleDistanceX(L,-y+z,!1),Z=w+R*j(L)+adjustAngleDistanceY(L,-y+z,!1),q="left",ie="middle";break;case"middle":K=x+R*V(O),Z=w+R*j(O),q="center",ie="middle";break;case"endArc":K=x+(c+y)*V(O),Z=w+(c+y)*j(O),q="center",ie="bottom";break;case"insideEndArc":K=x+(c-y)*V(O),Z=w+(c-y)*j(O),q="center",ie="top";break;case"endAngle":K=x+R*V($)+adjustAngleDistanceX($,y+z,!0),Z=w+R*j($)+adjustAngleDistanceY($,y+z,!0),q="left",ie="middle";break;case"insideEndAngle":K=x+R*V($)+adjustAngleDistanceX($,-y+z,!0),Z=w+R*j($)+adjustAngleDistanceY($,-y+z,!0),q="right",ie="middle";break;default:return calculateTextPosition(o,a,l)}return o=o||{},o.x=K,o.y=Z,o.align=q,o.verticalAlign=ie,o}}function setSectorTextRotation(r,t,n,o){if(isNumber(o)){r.setTextConfig({rotation:o});return}else if(isArray$1(t)){r.setTextConfig({rotation:0});return}var a=r.shape,l=a.clockwise?a.startAngle:a.endAngle,d=a.clockwise?a.endAngle:a.startAngle,g=(l+d)/2,y,S=n(t);switch(S){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":y=g;break;case"startAngle":case"insideStartAngle":y=l;break;case"endAngle":case"insideEndAngle":y=d;break;default:r.setTextConfig({rotation:0});return}var x=Math.PI*1.5-y;S==="middle"&&x>Math.PI/2&&x<Math.PI*1.5&&(x-=Math.PI),r.setTextConfig({rotation:x})}function adjustAngleDistanceX(r,t,n){return t*Math.sin(r)*(n?-1:1)}function adjustAngleDistanceY(r,t,n){return t*Math.cos(r)*(n?1:-1)}function getSectorCornerRadius(r,t,n){var o=r.get("borderRadius");if(o==null)return n?{cornerRadius:0}:null;isArray$1(o)||(o=[o,o,o,o]);var a=Math.abs(t.r||0-t.r0||0);return{cornerRadius:map$1(o,function(l){return parsePercent$1(l,a)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(r,t){var n=r.getArea&&r.getArea();if(isCoordinateSystemType(r,"cartesian2d")){var o=r.getBaseAxis();if(o.type!=="category"||!o.onBand){var a=t.getLayout("bandWidth");o.isHorizontal()?(n.x-=a,n.width+=a*2):(n.y-=a,n.height+=a*2)}}return n}var BarView=function(r){__extends(t,r);function t(){var n=r.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return t.prototype.render=function(n,o,a,l){this._model=n,this._removeOnRenderedListener(a),this._updateDrawMode(n);var d=n.get("coordinateSystem");(d==="cartesian2d"||d==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,o,a):this._renderNormal(n,o,a,l))},t.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},t.prototype.incrementalRender=function(n,o){this._progressiveEls=[],this._incrementalRenderLarge(n,o)},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._updateDrawMode=function(n){var o=n.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},t.prototype._renderNormal=function(n,o,a,l){var d=this.group,g=n.getData(),y=this._data,S=n.coordinateSystem,x=S.getBaseAxis(),w;S.type==="cartesian2d"?w=x.isHorizontal():S.type==="polar"&&(w=x.dim==="angle");var c=n.isAnimationEnabled()?n:null,A=shouldRealtimeSort(n,S);A&&this._enableRealtimeSort(A,g,a);var R=n.get("clip",!0)||A,L=getClipArea(S,g);d.removeClipPath();var $=n.get("roundCap",!0),O=n.get("showBackground",!0),z=n.getModel("backgroundStyle"),V=z.get("borderRadius")||0,j=[],K=this._backgroundEls,Z=l&&l.isInitSort,q=l&&l.type==="changeAxisOrder";function ie(re){var he=getLayout[S.type](g,re),_e=createBackgroundEl(S,w,he);return _e.useStyle(z.getItemStyle()),S.type==="cartesian2d"?_e.setShape("r",V):_e.setShape("cornerRadius",V),j[re]=_e,_e}g.diff(y).add(function(re){var he=g.getItemModel(re),_e=getLayout[S.type](g,re,he);if(O&&ie(re),!(!g.hasValue(re)||!isValidLayout[S.type](_e))){var me=!1;R&&(me=clip[S.type](L,_e));var be=elementCreator[S.type](n,g,re,_e,w,c,x.model,!1,$);A&&(be.forceLabelAnimation=!0),updateStyle(be,g,re,he,_e,n,w,S.type==="polar"),Z?be.attr({shape:_e}):A?updateRealtimeAnimation(A,c,be,_e,re,w,!1,!1):initProps(be,{shape:_e},n,re),g.setItemGraphicEl(re,be),d.add(be),be.ignore=me}}).update(function(re,he){var _e=g.getItemModel(re),me=getLayout[S.type](g,re,_e);if(O){var be=void 0;K.length===0?be=ie(he):(be=K[he],be.useStyle(z.getItemStyle()),S.type==="cartesian2d"?be.setShape("r",V):be.setShape("cornerRadius",V),j[re]=be);var Q=getLayout[S.type](g,re),Ne=createBackgroundShape(w,Q,S);updateProps$1(be,{shape:Ne},c,re)}var Ee=y.getItemGraphicEl(he);if(!g.hasValue(re)||!isValidLayout[S.type](me)){d.remove(Ee);return}var Ge=!1;if(R&&(Ge=clip[S.type](L,me),Ge&&d.remove(Ee)),Ee?saveOldStyle(Ee):Ee=elementCreator[S.type](n,g,re,me,w,c,x.model,!!Ee,$),A&&(Ee.forceLabelAnimation=!0),q){var it=Ee.getTextContent();if(it){var Te=labelInner(it);Te.prevValue!=null&&(Te.prevValue=Te.value)}}else updateStyle(Ee,g,re,_e,me,n,w,S.type==="polar");Z?Ee.attr({shape:me}):A?updateRealtimeAnimation(A,c,Ee,me,re,w,!0,q):updateProps$1(Ee,{shape:me},n,re,null),g.setItemGraphicEl(re,Ee),Ee.ignore=Ge,d.add(Ee)}).remove(function(re){var he=y.getItemGraphicEl(re);he&&removeElementWithFadeOut(he,n,re)}).execute();var te=this._backgroundGroup||(this._backgroundGroup=new Group$4);te.removeAll();for(var oe=0;oe<j.length;++oe)te.add(j[oe]);d.add(te),this._backgroundEls=j,this._data=g},t.prototype._renderLarge=function(n,o,a){this._clear(),createLarge$1(n,this.group),this._updateLargeClip(n)},t.prototype._incrementalRenderLarge=function(n,o){this._removeBackground(),createLarge$1(o,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(n){var o=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n),a=this.group;o?a.setClipPath(o):a.removeClipPath()},t.prototype._enableRealtimeSort=function(n,o,a){var l=this;if(o.count()){var d=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(o,n,a),this._isFirstFrame=!1;else{var g=function(y){var S=o.getItemGraphicEl(y),x=S&&S.shape;return x&&Math.abs(d.isHorizontal()?x.height:x.width)||0};this._onRendered=function(){l._updateSortWithinSameData(o,g,d,a)},a.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(n,o,a){var l=[];return n.each(n.mapDimension(o.dim),function(d,g){var y=a(g);y=y??NaN,l.push({dataIndex:g,mappedValue:y,ordinalNumber:d})}),l.sort(function(d,g){return g.mappedValue-d.mappedValue}),{ordinalNumbers:map$1(l,function(d){return d.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(n,o,a){for(var l=a.scale,d=n.mapDimension(a.dim),g=Number.MAX_VALUE,y=0,S=l.getOrdinalMeta().categories.length;y<S;++y){var x=n.rawIndexOf(d,l.getRawOrdinalNumber(y)),w=x<0?Number.MIN_VALUE:o(n.indexOfRawIndex(x));if(w>g)return!0;g=w}return!1},t.prototype._isOrderDifferentInView=function(n,o){for(var a=o.scale,l=a.getExtent(),d=Math.max(0,l[0]),g=Math.min(l[1],a.getOrdinalMeta().categories.length-1);d<=g;++d)if(n.ordinalNumbers[d]!==a.getRawOrdinalNumber(d))return!0},t.prototype._updateSortWithinSameData=function(n,o,a,l){if(this._isOrderChangedWithinSameData(n,o,a)){var d=this._dataSort(n,a,o);this._isOrderDifferentInView(d,a)&&(this._removeOnRenderedListener(l),l.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:d}))}},t.prototype._dispatchInitSort=function(n,o,a){var l=o.baseAxis,d=this._dataSort(n,l,function(g){return n.get(n.mapDimension(o.otherAxis.dim),g)});a.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",isInitSort:!0,axisId:l.index,sortInfo:d})},t.prototype.remove=function(n,o){this._clear(this._model),this._removeOnRenderedListener(o)},t.prototype.dispose=function(n,o){this._removeOnRenderedListener(o)},t.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(n){var o=this.group,a=this._data;n&&n.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(l){removeElementWithFadeOut(l,n,getECData(l).dataIndex)})):o.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ChartView$1),clip={cartesian2d:function(r,t){var n=t.width<0?-1:1,o=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),o<0&&(t.y+=t.height,t.height=-t.height);var a=r.x+r.width,l=r.y+r.height,d=mathMax$4(t.x,r.x),g=mathMin$4(t.x+t.width,a),y=mathMax$4(t.y,r.y),S=mathMin$4(t.y+t.height,l),x=g<d,w=S<y;return t.x=x&&d>a?g:d,t.y=w&&y>l?S:y,t.width=x?0:g-d,t.height=w?0:S-y,n<0&&(t.x+=t.width,t.width=-t.width),o<0&&(t.y+=t.height,t.height=-t.height),x||w},polar:function(r,t){var n=t.r0<=t.r?1:-1;if(n<0){var o=t.r;t.r=t.r0,t.r0=o}var a=mathMin$4(t.r,r.r),l=mathMax$4(t.r0,r.r0);t.r=a,t.r0=l;var d=a-l<0;if(n<0){var o=t.r;t.r=t.r0,t.r0=o}return d}},elementCreator={cartesian2d:function(r,t,n,o,a,l,d,g,y){var S=new Rect$3({shape:extend({},o),z2:1});if(S.__dataIndex=n,S.name="item",l){var x=S.shape,w=a?"height":"width";x[w]=0}return S},polar:function(r,t,n,o,a,l,d,g,y){var S=!a&&y?Sausage:Sector$1,x=new S({shape:o,z2:1});x.name="item";var w=createPolarPositionMapping(a);if(x.calculateTextPosition=createSectorCalculateTextPosition(w,{isRoundCap:S===Sausage}),l){var c=x.shape,A=a?"r":"endAngle",R={};c[A]=a?o.r0:o.startAngle,R[A]=o[A],(g?updateProps$1:initProps)(x,{shape:R},l)}return x}};function shouldRealtimeSort(r,t){var n=r.get("realtimeSort",!0),o=t.getBaseAxis();if(n&&o.type==="category"&&t.type==="cartesian2d")return{baseAxis:o,otherAxis:t.getOtherAxis(o)}}function updateRealtimeAnimation(r,t,n,o,a,l,d,g){var y,S;l?(S={x:o.x,width:o.width},y={y:o.y,height:o.height}):(S={y:o.y,height:o.height},y={x:o.x,width:o.width}),g||(d?updateProps$1:initProps)(n,{shape:y},t,a,null);var x=t?r.baseAxis.model:null;(d?updateProps$1:initProps)(n,{shape:S},x,a)}function checkPropertiesNotValid(r,t){for(var n=0;n<t.length;n++)if(!isFinite(r[t[n]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(r){return!checkPropertiesNotValid(r,rectPropties)},polar:function(r){return!checkPropertiesNotValid(r,polarPropties)}},getLayout={cartesian2d:function(r,t,n){var o=r.getItemLayout(t),a=n?getLineWidth(n,o):0,l=o.width>0?1:-1,d=o.height>0?1:-1;return{x:o.x+l*a/2,y:o.y+d*a/2,width:o.width-l*a,height:o.height-d*a}},polar:function(r,t,n){var o=r.getItemLayout(t);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}}};function isZeroOnPolar(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function createPolarPositionMapping(r){return function(t){var n=t?"Arc":"Angle";return function(o){switch(o){case"start":case"insideStart":case"end":case"insideEnd":return o+n;default:return o}}}(r)}function updateStyle(r,t,n,o,a,l,d,g){var y=t.getItemVisual(n,"style");if(g){if(!l.get("roundCap")){var x=r.shape,w=getSectorCornerRadius(o.getModel("itemStyle"),x,!0);extend(x,w),r.setShape(x)}}else{var S=o.get(["itemStyle","borderRadius"])||0;r.setShape("r",S)}r.useStyle(y);var c=o.getShallow("cursor");c&&r.attr("cursor",c);var A=g?d?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":d?a.height>=0?"bottom":"top":a.width>=0?"right":"left",R=getLabelStatesModels(o);setLabelStyle(r,R,{labelFetcher:l,labelDataIndex:n,defaultText:getDefaultLabel(l.getData(),n),inheritColor:y.fill,defaultOpacity:y.opacity,defaultOutsidePosition:A});var L=r.getTextContent();if(g&&L){var $=o.get(["label","position"]);r.textConfig.inside=$==="middle"?!0:null,setSectorTextRotation(r,$==="outside"?A:$,createPolarPositionMapping(d),o.get(["label","rotate"]))}setLabelValueAnimation(L,R,l.getRawValue(n),function(z){return getDefaultInterpolatedLabel(t,z)});var O=o.getModel(["emphasis"]);toggleHoverEmphasis(r,O.get("focus"),O.get("blurScope"),O.get("disabled")),setStatesStylesFromModel(r,o),isZeroOnPolar(a)&&(r.style.fill="none",r.style.stroke="none",each$f(r.states,function(z){z.style&&(z.style.fill=z.style.stroke="none")}))}function getLineWidth(r,t){var n=r.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var o=r.get(["itemStyle","borderWidth"])||0,a=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),l=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(o,a,l)}var LagePathShape=function(){function r(){}return r}(),LargePath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="largeBar",o}return t.prototype.getDefaultShape=function(){return new LagePathShape},t.prototype.buildPath=function(n,o){for(var a=o.points,l=this.baseDimIdx,d=1-this.baseDimIdx,g=[],y=[],S=this.barWidth,x=0;x<a.length;x+=3)y[l]=S,y[d]=a[x+2],g[l]=a[x+l],g[d]=a[x+d],n.rect(g[0],g[1],y[0],y[1])},t}(Path$1);function createLarge$1(r,t,n,o){var a=r.getData(),l=a.getLayout("valueAxisHorizontal")?1:0,d=a.getLayout("largeDataIndices"),g=a.getLayout("size"),y=r.getModel("backgroundStyle"),S=a.getLayout("largeBackgroundPoints");if(S){var x=new LargePath({shape:{points:S},incremental:!!o,silent:!0,z2:0});x.baseDimIdx=l,x.largeDataIndices=d,x.barWidth=g,x.useStyle(y.getItemStyle()),t.add(x),n&&n.push(x)}var w=new LargePath({shape:{points:a.getLayout("largePoints")},incremental:!!o,ignoreCoarsePointer:!0,z2:1});w.baseDimIdx=l,w.largeDataIndices=d,w.barWidth=g,t.add(w),w.useStyle(a.getVisual("style")),getECData(w).seriesIndex=r.seriesIndex,r.get("silent")||(w.on("mousedown",largePathUpdateDataIndex),w.on("mousemove",largePathUpdateDataIndex)),n&&n.push(w)}var largePathUpdateDataIndex=throttle(function(r){var t=this,n=largePathFindDataIndex(t,r.offsetX,r.offsetY);getECData(t).dataIndex=n>=0?n:null},30,!1);function largePathFindDataIndex(r,t,n){for(var o=r.baseDimIdx,a=1-o,l=r.shape.points,d=r.largeDataIndices,g=[],y=[],S=r.barWidth,x=0,w=l.length/3;x<w;x++){var c=x*3;if(y[o]=S,y[a]=l[c+2],g[o]=l[c+o],g[a]=l[c+a],y[a]<0&&(g[a]+=y[a],y[a]=-y[a]),t>=g[0]&&t<=g[0]+y[0]&&n>=g[1]&&n<=g[1]+y[1])return d[x]}return-1}function createBackgroundShape(r,t,n){if(isCoordinateSystemType(n,"cartesian2d")){var o=t,a=n.getArea();return{x:r?o.x:a.x,y:r?a.y:o.y,width:r?o.width:a.width,height:r?a.height:o.height}}else{var a=n.getArea(),l=t;return{cx:a.cx,cy:a.cy,r0:r?a.r0:l.r0,r:r?a.r:l.r,startAngle:r?l.startAngle:0,endAngle:r?l.endAngle:Math.PI*2}}}function createBackgroundEl(r,t,n){var o=r.type==="polar"?Sector$1:Rect$3;return new o({shape:createBackgroundShape(t,n,r),silent:!0,z2:0})}const BarView$1=BarView;function install$P(r){r.registerChartView(BarView$1),r.registerSeriesModel(BarSeries),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,n){var o=t.componentType||"series";n.eachComponent({mainType:o,query:t},function(a){t.sortInfo&&a.axis.setCategorySortInfo(t.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(r,t){return getLayoutRect(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function getBasicPieLayout(r,t){var n=getViewRect$5(r,t),o=r.get("center"),a=r.get("radius");isArray$1(a)||(a=[0,a]);var l=parsePercent(n.width,t.getWidth()),d=parsePercent(n.height,t.getHeight()),g=Math.min(l,d),y=parsePercent(a[0],g/2),S=parsePercent(a[1],g/2),x,w,c=r.coordinateSystem;if(c){var A=c.dataToPoint(o);x=A[0]||0,w=A[1]||0}else isArray$1(o)||(o=[o,o]),x=parsePercent(o[0],l)+n.x,w=parsePercent(o[1],d)+n.y;return{cx:x,cy:w,r0:y,r:S}}function pieLayout(r,t,n){t.eachSeriesByType(r,function(o){var a=o.getData(),l=a.mapDimension("value"),d=getViewRect$5(o,n),g=getBasicPieLayout(o,n),y=g.cx,S=g.cy,x=g.r,w=g.r0,c=-o.get("startAngle")*RADIAN$2,A=o.get("minAngle")*RADIAN$2,R=0;a.each(l,function(oe){!isNaN(oe)&&R++});var L=a.getSum(l),$=Math.PI/(L||R)*2,O=o.get("clockwise"),z=o.get("roseType"),V=o.get("stillShowZeroSum"),j=a.getDataExtent(l);j[0]=0;var K=PI2,Z=0,q=c,ie=O?1:-1;if(a.setLayout({viewRect:d,r:x}),a.each(l,function(oe,re){var he;if(isNaN(oe)){a.setItemLayout(re,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:O,cx:y,cy:S,r0:w,r:z?NaN:x});return}z!=="area"?he=L===0&&V?$:oe*$:he=PI2/R,he<A?(he=A,K-=A):Z+=oe;var _e=q+ie*he;a.setItemLayout(re,{angle:he,startAngle:q,endAngle:_e,clockwise:O,cx:y,cy:S,r0:w,r:z?linearMap$2(oe,j,[w,x]):x}),q=_e}),K<PI2&&R)if(K<=.001){var te=PI2/R;a.each(l,function(oe,re){if(!isNaN(oe)){var he=a.getItemLayout(re);he.angle=te,he.startAngle=c+ie*re*te,he.endAngle=c+ie*(re+1)*te}})}else $=K/Z,q=c,a.each(l,function(oe,re){if(!isNaN(oe)){var he=a.getItemLayout(re),_e=he.angle===A?A:oe*$;he.startAngle=q,he.endAngle=q+ie*_e,q+=ie*_e}})})}function dataFilter$1(r){return{seriesType:r,reset:function(t,n){var o=n.findComponents({mainType:"legend"});if(!(!o||!o.length)){var a=t.getData();a.filterSelf(function(l){for(var d=a.getName(l),g=0;g<o.length;g++)if(!o[g].isSelected(d))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(r,t,n,o,a,l,d,g,y,S){if(r.length<2)return;function x(L){for(var $=L.rB,O=$*$,z=0;z<L.list.length;z++){var V=L.list[z],j=Math.abs(V.label.y-n),K=o+V.len,Z=K*K,q=Math.sqrt((1-Math.abs(j*j/O))*Z),ie=t+(q+V.len2)*a,te=ie-V.label.x,oe=V.targetTextWidth-te*a;constrainTextWidth(V,oe,!0),V.label.x=ie}}function w(L){for(var $={list:[],maxY:0},O={list:[],maxY:0},z=0;z<L.length;z++)if(L[z].labelAlignTo==="none"){var V=L[z],j=V.label.y>n?O:$,K=Math.abs(V.label.y-n);if(K>=j.maxY){var Z=V.label.x-t-V.len2*a,q=o+V.len,ie=Math.abs(Z)<q?Math.sqrt(K*K/(1-Z*Z/q/q)):q;j.rB=ie,j.maxY=K}j.list.push(V)}x($),x(O)}for(var c=r.length,A=0;A<c;A++)if(r[A].position==="outer"&&r[A].labelAlignTo==="labelLine"){var R=r[A].label.x-S;r[A].linePoints[1][0]+=R,r[A].label.x=S}shiftLayoutOnY(r,y,y+d)&&w(r)}function avoidOverlap(r,t,n,o,a,l,d,g){for(var y=[],S=[],x=Number.MAX_VALUE,w=-Number.MAX_VALUE,c=0;c<r.length;c++){var A=r[c].label;isPositionCenter(r[c])||(A.x<t?(x=Math.min(x,A.x),y.push(r[c])):(w=Math.max(w,A.x),S.push(r[c])))}for(var c=0;c<r.length;c++){var R=r[c];if(!isPositionCenter(R)&&R.linePoints){if(R.labelStyleWidth!=null)continue;var A=R.label,L=R.linePoints,$=void 0;R.labelAlignTo==="edge"?A.x<t?$=L[2][0]-R.labelDistance-d-R.edgeDistance:$=d+a-R.edgeDistance-L[2][0]-R.labelDistance:R.labelAlignTo==="labelLine"?A.x<t?$=x-d-R.bleedMargin:$=d+a-w-R.bleedMargin:A.x<t?$=A.x-d-R.bleedMargin:$=d+a-A.x-R.bleedMargin,R.targetTextWidth=$,constrainTextWidth(R,$)}}adjustSingleSide(S,t,n,o,1,a,l,d,g,w),adjustSingleSide(y,t,n,o,-1,a,l,d,g,x);for(var c=0;c<r.length;c++){var R=r[c];if(!isPositionCenter(R)&&R.linePoints){var A=R.label,L=R.linePoints,O=R.labelAlignTo==="edge",z=A.style.padding,V=z?z[1]+z[3]:0,j=A.style.backgroundColor?0:V,K=R.rect.width+j,Z=L[1][0]-L[2][0];O?A.x<t?L[2][0]=d+R.edgeDistance+K+R.labelDistance:L[2][0]=d+a-R.edgeDistance-K-R.labelDistance:(A.x<t?L[2][0]=A.x+R.labelDistance:L[2][0]=A.x-R.labelDistance,L[1][0]=L[2][0]+Z),L[1][1]=L[2][1]=A.y}}}function constrainTextWidth(r,t,n){if(n===void 0&&(n=!1),r.labelStyleWidth==null){var o=r.label,a=o.style,l=r.rect,d=a.backgroundColor,g=a.padding,y=g?g[1]+g[3]:0,S=a.overflow,x=l.width+(d?0:y);if(t<x||n){var w=l.height;if(S&&S.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",t-y);var c=o.getBoundingRect();o.setStyle("width",Math.ceil(c.width)),o.setStyle("backgroundColor",d)}else{var A=t-y,R=t<x?A:n?A>r.unconstrainedWidth?null:A:null;o.setStyle("width",R)}var L=o.getBoundingRect();l.width=L.width;var $=(o.style.margin||0)+2.1;l.height=L.height+$,l.y-=(l.height-w)/2}}}function isPositionCenter(r){return r.position==="center"}function pieLabelLayout(r){var t=r.getData(),n=[],o,a,l=!1,d=(r.get("minShowLabelAngle")||0)*RADIAN$1,g=t.getLayout("viewRect"),y=t.getLayout("r"),S=g.width,x=g.x,w=g.y,c=g.height;function A(Z){Z.ignore=!0}function R(Z){if(!Z.ignore)return!0;for(var q in Z.states)if(Z.states[q].ignore===!1)return!0;return!1}t.each(function(Z){var q=t.getItemGraphicEl(Z),ie=q.shape,te=q.getTextContent(),oe=q.getTextGuideLine(),re=t.getItemModel(Z),he=re.getModel("label"),_e=he.get("position")||re.get(["emphasis","label","position"]),me=he.get("distanceToLabelLine"),be=he.get("alignTo"),Q=parsePercent(he.get("edgeDistance"),S),Ne=he.get("bleedMargin"),Ee=re.getModel("labelLine"),Ge=Ee.get("length");Ge=parsePercent(Ge,S);var it=Ee.get("length2");if(it=parsePercent(it,S),Math.abs(ie.endAngle-ie.startAngle)<d){each$f(te.states,A),te.ignore=!0,oe&&(each$f(oe.states,A),oe.ignore=!0);return}if(R(te)){var Te=(ie.startAngle+ie.endAngle)/2,Ke=Math.cos(Te),Tt=Math.sin(Te),Lt,Qt,Xe,Be;o=ie.cx,a=ie.cy;var ue=_e==="inside"||_e==="inner";if(_e==="center")Lt=ie.cx,Qt=ie.cy,Be="center";else{var Dt=(ue?(ie.r+ie.r0)/2*Ke:ie.r*Ke)+o,Rt=(ue?(ie.r+ie.r0)/2*Tt:ie.r*Tt)+a;if(Lt=Dt+Ke*3,Qt=Rt+Tt*3,!ue){var Bt=Dt+Ke*(Ge+y-ie.r),Se=Rt+Tt*(Ge+y-ie.r),Ye=Bt+(Ke<0?-1:1)*it,$e=Se;be==="edge"?Lt=Ke<0?x+Q:x+S-Q:Lt=Ye+(Ke<0?-me:me),Qt=$e,Xe=[[Dt,Rt],[Bt,Se],[Ye,$e]]}Be=ue?"center":be==="edge"?Ke>0?"right":"left":Ke>0?"left":"right"}var st=Math.PI,et=0,Fe=he.get("rotate");if(isNumber(Fe))et=Fe*(st/180);else if(_e==="center")et=0;else if(Fe==="radial"||Fe===!0){var tn=Ke<0?-Te+st:-Te;et=tn}else if(Fe==="tangential"&&_e!=="outside"&&_e!=="outer"){var Gt=Math.atan2(Ke,Tt);Gt<0&&(Gt=st*2+Gt);var mt=Tt>0;mt&&(Gt=st+Gt),et=Gt-st}if(l=!!et,te.x=Lt,te.y=Qt,te.rotation=et,te.setStyle({verticalAlign:"middle"}),ue){te.setStyle({align:Be});var Le=te.states.select;Le&&(Le.x+=te.x,Le.y+=te.y)}else{var en=te.getBoundingRect().clone();en.applyTransform(te.getComputedTransform());var Bn=(te.style.margin||0)+2.1;en.y-=Bn/2,en.height+=Bn,n.push({label:te,labelLine:oe,position:_e,len:Ge,len2:it,minTurnAngle:Ee.get("minTurnAngle"),maxSurfaceAngle:Ee.get("maxSurfaceAngle"),surfaceNormal:new Point$1(Ke,Tt),linePoints:Xe,textAlign:Be,labelDistance:me,labelAlignTo:be,edgeDistance:Q,bleedMargin:Ne,rect:en,unconstrainedWidth:en.width,labelStyleWidth:te.style.width})}q.setTextConfig({inside:ue})}}),!l&&r.get("avoidLabelOverlap")&&avoidOverlap(n,o,a,y,S,c,x,w);for(var L=0;L<n.length;L++){var $=n[L],O=$.label,z=$.labelLine,V=isNaN(O.x)||isNaN(O.y);if(O){O.setStyle({align:$.textAlign}),V&&(each$f(O.states,A),O.ignore=!0);var j=O.states.select;j&&(j.x+=O.x,j.y+=O.y)}if(z){var K=$.linePoints;V||!K?(each$f(z.states,A),z.ignore=!0):(limitTurnAngle(K,$.minTurnAngle),limitSurfaceAngle(K,$.surfaceNormal,$.maxSurfaceAngle),z.setShape({points:K}),O.__hostTarget.textGuideLineConfig={anchor:new Point$1(K[0][0],K[0][1])})}}}var PiePiece=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this)||this;l.z2=2;var d=new ZRText$1;return l.setTextContent(d),l.updateData(n,o,a,!0),l}return t.prototype.updateData=function(n,o,a,l){var d=this,g=n.hostModel,y=n.getItemModel(o),S=y.getModel("emphasis"),x=n.getItemLayout(o),w=extend(getSectorCornerRadius(y.getModel("itemStyle"),x,!0),x);if(isNaN(w.startAngle)){d.setShape(w);return}if(l){d.setShape(w);var c=g.getShallow("animationType");g.ecModel.ssr?(initProps(d,{scaleX:0,scaleY:0},g,{dataIndex:o,isFrom:!0}),d.originX=w.cx,d.originY=w.cy):c==="scale"?(d.shape.r=x.r0,initProps(d,{shape:{r:x.r}},g,o)):a!=null?(d.setShape({startAngle:a,endAngle:a}),initProps(d,{shape:{startAngle:x.startAngle,endAngle:x.endAngle}},g,o)):(d.shape.endAngle=x.startAngle,updateProps$1(d,{shape:{endAngle:x.endAngle}},g,o))}else saveOldStyle(d),updateProps$1(d,{shape:w},g,o);d.useStyle(n.getItemVisual(o,"style")),setStatesStylesFromModel(d,y);var A=(x.startAngle+x.endAngle)/2,R=g.get("selectedOffset"),L=Math.cos(A)*R,$=Math.sin(A)*R,O=y.getShallow("cursor");O&&d.attr("cursor",O),this._updateLabel(g,n,o),d.ensureState("emphasis").shape=extend({r:x.r+(S.get("scale")&&S.get("scaleSize")||0)},getSectorCornerRadius(S.getModel("itemStyle"),x)),extend(d.ensureState("select"),{x:L,y:$,shape:getSectorCornerRadius(y.getModel(["select","itemStyle"]),x)}),extend(d.ensureState("blur"),{shape:getSectorCornerRadius(y.getModel(["blur","itemStyle"]),x)});var z=d.getTextGuideLine(),V=d.getTextContent();z&&extend(z.ensureState("select"),{x:L,y:$}),extend(V.ensureState("select"),{x:L,y:$}),toggleHoverEmphasis(this,S.get("focus"),S.get("blurScope"),S.get("disabled"))},t.prototype._updateLabel=function(n,o,a){var l=this,d=o.getItemModel(a),g=d.getModel("labelLine"),y=o.getItemVisual(a,"style"),S=y&&y.fill,x=y&&y.opacity;setLabelStyle(l,getLabelStatesModels(d),{labelFetcher:o.hostModel,labelDataIndex:a,inheritColor:S,defaultOpacity:x,defaultText:n.getFormattedLabel(a,"normal")||o.getName(a)});var w=l.getTextContent();l.setTextConfig({position:null,rotation:null}),w.attr({z2:10});var c=n.get(["label","position"]);if(c!=="outside"&&c!=="outer")l.removeTextGuideLine();else{var A=this.getTextGuideLine();A||(A=new Polyline$3,this.setTextGuideLine(A)),setLabelLineStyle(this,getLabelLineStatesModels(d),{stroke:S,opacity:retrieve3(g.get(["lineStyle","opacity"]),x,1)})}},t}(Sector$1),PieView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return t.prototype.render=function(n,o,a,l){var d=n.getData(),g=this._data,y=this.group,S;if(!g&&d.count()>0){for(var x=d.getItemLayout(0),w=1;isNaN(x&&x.startAngle)&&w<d.count();++w)x=d.getItemLayout(w);x&&(S=x.startAngle)}if(this._emptyCircleSector&&y.remove(this._emptyCircleSector),d.count()===0&&n.get("showEmptyCircle")){var c=new Sector$1({shape:getBasicPieLayout(n,a)});c.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,y.add(c)}d.diff(g).add(function(A){var R=new PiePiece(d,A,S);d.setItemGraphicEl(A,R),y.add(R)}).update(function(A,R){var L=g.getItemGraphicEl(R);L.updateData(d,A,S),L.off("click"),y.add(L),d.setItemGraphicEl(A,L)}).remove(function(A){var R=g.getItemGraphicEl(A);removeElementWithFadeOut(R,n,A)}).execute(),pieLabelLayout(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=d)},t.prototype.dispose=function(){},t.prototype.containPoint=function(n,o){var a=o.getData(),l=a.getItemLayout(0);if(l){var d=n[0]-l.cx,g=n[1]-l.cy,y=Math.sqrt(d*d+g*g);return y<=l.r&&y>=l.r0}},t.type="pie",t}(ChartView$1);const PieView$1=PieView;function createSeriesDataSimply(r,t,n){t=isArray$1(t)&&{coordDimensions:t}||extend({encodeDefine:r.getEncode()},t);var o=r.getSource(),a=prepareSeriesDataSchema(o,t).dimensions,l=new SeriesData$1(a,r);return l.initData(o,n),l}var LegendVisualProvider=function(){function r(t,n){this._getDataWithEncodedVisual=t,this._getRawData=n}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var n=this._getRawData();return n.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var n=this._getDataWithEncodedVisual();return n.indexOfName(t)},r.prototype.getItemVisual=function(t,n){var o=this._getDataWithEncodedVisual();return o.getItemVisual(t,n)},r}();const LegendVisualProvider$1=LegendVisualProvider;var innerData=makeInner(),PieSeriesModel=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(n){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},t.prototype.getDataParams=function(n){var o=this.getData(),a=innerData(o),l=a.seats;if(!l){var d=[];o.each(o.mapDimension("value"),function(y){d.push(y)}),l=a.seats=getPercentSeats(d,o.hostModel.get("percentPrecision"))}var g=r.prototype.getDataParams.call(this,n);return g.percent=l[n]||0,g.$vars.push("percent"),g},t.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var o=n.labelLine,a=n.emphasis.labelLine;o.show=o.show&&n.label.show,a.show=a.show&&n.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(SeriesModel$1);const PieSeriesModel$1=PieSeriesModel;function negativeDataFilter(r){return{seriesType:r,reset:function(t,n){var o=t.getData();o.filterSelf(function(a){var l=o.mapDimension("value"),d=o.get(l,a);return!(isNumber(d)&&!isNaN(d)&&d<0)})}}}function install$O(r){r.registerChartView(PieView$1),r.registerSeriesModel(PieSeriesModel$1),createLegacyDataSelectAction("pie",r.registerAction),r.registerLayout(curry$1(pieLayout,"pie")),r.registerProcessor(dataFilter$1("pie")),r.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(n,o,a){return a.point(o.getItemLayout(n))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(SeriesModel$1);const ScatterSeriesModel$1=ScatterSeriesModel;var BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function r(){}return r}(),LargeSymbolPath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o._off=0,o.hoverDataIdx=-1,o}return t.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(n,o){var a=o.points,l=o.size,d=this.symbolProxy,g=d.shape,y=n.getContext?n.getContext():n,S=y&&l[0]<BOOST_SIZE_THRESHOLD,x=this.softClipShape,w;if(S){this._ctx=y;return}for(this._ctx=null,w=this._off;w<a.length;){var c=a[w++],A=a[w++];isNaN(c)||isNaN(A)||x&&!x.contain(c,A)||(g.x=c-l[0]/2,g.y=A-l[1]/2,g.width=l[0],g.height=l[1],d.buildPath(n,g,!0))}this.incremental&&(this._off=w,this.notClear=!0)},t.prototype.afterBrush=function(){var n=this.shape,o=n.points,a=n.size,l=this._ctx,d=this.softClipShape,g;if(l){for(g=this._off;g<o.length;){var y=o[g++],S=o[g++];isNaN(y)||isNaN(S)||d&&!d.contain(y,S)||l.fillRect(y-a[0]/2,S-a[1]/2,a[0],a[1])}this.incremental&&(this._off=g,this.notClear=!0)}},t.prototype.findDataIndex=function(n,o){for(var a=this.shape,l=a.points,d=a.size,g=Math.max(d[0],4),y=Math.max(d[1],4),S=l.length/2-1;S>=0;S--){var x=S*2,w=l[x]-g/2,c=l[x+1]-y/2;if(n>=w&&o>=c&&n<=w+g&&o<=c+y)return S}return-1},t.prototype.contain=function(n,o){var a=this.transformCoordToLocal(n,o),l=this.getBoundingRect();if(n=a[0],o=a[1],l.contain(n,o)){var d=this.hoverDataIdx=this.findDataIndex(n,o);return d>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var o=this.shape,a=o.points,l=o.size,d=l[0],g=l[1],y=1/0,S=1/0,x=-1/0,w=-1/0,c=0;c<a.length;){var A=a[c++],R=a[c++];y=Math.min(A,y),x=Math.max(A,x),S=Math.min(R,S),w=Math.max(R,w)}n=this._rect=new BoundingRect$1(y-d/2,S-g/2,x-y+d,w-S+g)}return n},t}(Path$1),LargeSymbolDraw=function(){function r(){this.group=new Group$4}return r.prototype.updateData=function(t,n){this._clear();var o=this._create();o.setShape({points:t.getLayout("points")}),this._setCommon(o,t,n)},r.prototype.updateLayout=function(t){var n=t.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var a=(o.endIndex-o.startIndex)*2,l=o.startIndex*4*2;n=new Float32Array(n.buffer,l,a)}o.setShape("points",n),o.reset()})},r.prototype.incrementalPrepareUpdate=function(t){this._clear()},r.prototype.incrementalUpdate=function(t,n,o){var a=this._newAdded[0],l=n.getLayout("points"),d=a&&a.shape.points;if(d&&d.length<2e4){var g=d.length,y=new Float32Array(g+l.length);y.set(d),y.set(l,g),a.endIndex=t.end,a.setShape({points:y})}else{this._newAdded=[];var S=this._create();S.startIndex=t.start,S.endIndex=t.end,S.incremental=!0,S.setShape({points:l}),this._setCommon(S,n,o)}},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new LargeSymbolPath({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},r.prototype._setCommon=function(t,n,o){var a=n.hostModel;o=o||{};var l=n.getVisual("symbolSize");t.setShape("size",l instanceof Array?l:[l,l]),t.softClipShape=o.clipShape||null,t.symbolProxy=createSymbol$1(n.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var d=t.shape.size[0]<BOOST_SIZE_THRESHOLD;t.useStyle(a.getModel("itemStyle").getItemStyle(d?["color","shadowBlur","shadowColor"]:["color"]));var g=n.getVisual("style"),y=g&&g.fill;y&&t.setColor(y);var S=getECData(t);S.seriesIndex=a.seriesIndex,t.on("mousemove",function(x){S.dataIndex=null;var w=t.hoverDataIdx;w>=0&&(S.dataIndex=w+(t.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}();const LargeSymbolDraw$1=LargeSymbolDraw;var ScatterView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=n.getData(),d=this._updateSymbolDraw(l,n);d.updateData(l,{clipShape:this._getClipShape(n)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(n,o,a){var l=n.getData(),d=this._updateSymbolDraw(l,n);d.incrementalPrepareUpdate(l),this._finished=!1},t.prototype.incrementalRender=function(n,o,a){this._symbolDraw.incrementalUpdate(n,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=n.end===o.getData().count()},t.prototype.updateTransform=function(n,o,a){var l=n.getData();if(this.group.dirty(),!this._finished||l.count()>1e4)return{update:!0};var d=pointsLayout("").reset(n,o,a);d.progress&&d.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout(l)},t.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},t.prototype._getClipShape=function(n){var o=n.coordinateSystem,a=o&&o.getArea&&o.getArea();return n.get("clip",!0)?a:null},t.prototype._updateSymbolDraw=function(n,o){var a=this._symbolDraw,l=o.pipelineContext,d=l.large;return(!a||d!==this._isLargeDraw)&&(a&&a.remove(),a=this._symbolDraw=d?new LargeSymbolDraw$1:new SymbolDraw$1,this._isLargeDraw=d,this.group.removeAll()),this.group.add(a.group),a},t.prototype.remove=function(n,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ChartView$1);const ScatterView$1=ScatterView;var GridModel=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(ComponentModel$1);const GridModel$1=GridModel;var CartesianAxisModel=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},t.type="cartesian2dAxis",t}(ComponentModel$1);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(r,t,n,o){each$f(AXIS_TYPES,function(a,l){var d=merge(merge({},axisDefault[l],!0),o,!0),g=function(y){__extends(S,y);function S(){var x=y!==null&&y.apply(this,arguments)||this;return x.type=t+"Axis."+l,x}return S.prototype.mergeDefaultAndTheme=function(x,w){var c=fetchLayoutMode(this),A=c?getLayoutParams(x):{},R=w.getTheme();merge(x,R.get(l+"Axis")),merge(x,this.getDefaultOption()),x.type=getAxisType(x),c&&mergeLayoutParam(x,A,c)},S.prototype.optionUpdated=function(){var x=this.option;x.type==="category"&&(this.__ordinalMeta=OrdinalMeta$1.createByAxisModel(this))},S.prototype.getCategories=function(x){var w=this.option;if(w.type==="category")return x?w.data:this.__ordinalMeta.categories},S.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},S.type=t+"Axis."+l,S.defaultOption=d,S}(n);r.registerComponentModel(g)}),r.registerSubTypeDefaulter(t+"Axis",getAxisType)}function getAxisType(r){return r.type||(r.data?"category":"value")}var Cartesian=function(){function r(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return r.prototype.getAxis=function(t){return this._axes[t]},r.prototype.getAxes=function(){return map$1(this._dimList,function(t){return this._axes[t]},this)},r.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),filter(this.getAxes(),function(n){return n.scale.type===t})},r.prototype.addAxis=function(t){var n=t.dim;this._axes[n]=t,this._dimList.push(n)},r}();const Cartesian$1=Cartesian;var cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(r){return r.type==="interval"||r.type==="time"}var Cartesian2D=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=cartesian2DDimensions,n}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,o=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(n)||!canCalculateAffineTransform(o))){var a=n.getExtent(),l=o.getExtent(),d=this.dataToPoint([a[0],l[0]]),g=this.dataToPoint([a[1],l[1]]),y=a[1]-a[0],S=l[1]-l[0];if(!(!y||!S)){var x=(g[0]-d[0])/y,w=(g[1]-d[1])/S,c=d[0]-a[0]*x,A=d[1]-l[0]*w,R=this._transform=[x,0,0,w,c,A];this._invTransform=invert([],R)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(n){var o=this.getAxis("x"),a=this.getAxis("y");return o.contain(o.toLocalCoord(n[0]))&&a.contain(a.toLocalCoord(n[1]))},t.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},t.prototype.containZone=function(n,o){var a=this.dataToPoint(n),l=this.dataToPoint(o),d=this.getArea(),g=new BoundingRect$1(a[0],a[1],l[0]-a[0],l[1]-a[1]);return d.intersect(g)},t.prototype.dataToPoint=function(n,o,a){a=a||[];var l=n[0],d=n[1];if(this._transform&&l!=null&&isFinite(l)&&d!=null&&isFinite(d))return applyTransform$1(a,n,this._transform);var g=this.getAxis("x"),y=this.getAxis("y");return a[0]=g.toGlobalCoord(g.dataToCoord(l,o)),a[1]=y.toGlobalCoord(y.dataToCoord(d,o)),a},t.prototype.clampData=function(n,o){var a=this.getAxis("x").scale,l=this.getAxis("y").scale,d=a.getExtent(),g=l.getExtent(),y=a.parse(n[0]),S=l.parse(n[1]);return o=o||[],o[0]=Math.min(Math.max(Math.min(d[0],d[1]),y),Math.max(d[0],d[1])),o[1]=Math.min(Math.max(Math.min(g[0],g[1]),S),Math.max(g[0],g[1])),o},t.prototype.pointToData=function(n,o){var a=[];if(this._invTransform)return applyTransform$1(a,n,this._invTransform);var l=this.getAxis("x"),d=this.getAxis("y");return a[0]=l.coordToData(l.toLocalCoord(n[0]),o),a[1]=d.coordToData(d.toLocalCoord(n[1]),o),a},t.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},t.prototype.getArea=function(){var n=this.getAxis("x").getGlobalExtent(),o=this.getAxis("y").getGlobalExtent(),a=Math.min(n[0],n[1]),l=Math.min(o[0],o[1]),d=Math.max(n[0],n[1])-a,g=Math.max(o[0],o[1])-l;return new BoundingRect$1(a,l,d,g)},t}(Cartesian$1),Axis2D=function(r){__extends(t,r);function t(n,o,a,l,d){var g=r.call(this,n,o,a)||this;return g.index=0,g.type=l||"value",g.position=d||"bottom",g}return t.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},t.prototype.getGlobalExtent=function(n){var o=this.getExtent();return o[0]=this.toGlobalCoord(o[0]),o[1]=this.toGlobalCoord(o[1]),n&&o[0]>o[1]&&o.reverse(),o},t.prototype.pointToData=function(n,o){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),o)},t.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},t}(Axis$1);const Axis2D$1=Axis2D;function layout$2(r,t,n){n=n||{};var o=r.coordinateSystem,a=t.axis,l={},d=a.getAxesOnZeroOf()[0],g=a.position,y=d?"onZero":g,S=a.dim,x=o.getRect(),w=[x.x,x.x+x.width,x.y,x.y+x.height],c={left:0,right:1,top:0,bottom:1,onZero:2},A=t.get("offset")||0,R=S==="x"?[w[2]-A,w[3]+A]:[w[0]-A,w[1]+A];if(d){var L=d.toGlobalCoord(d.dataToCoord(0));R[c.onZero]=Math.max(Math.min(L,R[1]),R[0])}l.position=[S==="y"?R[c[y]]:w[0],S==="x"?R[c[y]]:w[3]],l.rotation=Math.PI/2*(S==="x"?0:1);var $={top:-1,bottom:1,left:-1,right:1};l.labelDirection=l.tickDirection=l.nameDirection=$[g],l.labelOffset=d?R[c[g]]-R[c.onZero]:0,t.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(n.labelInside,t.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var O=t.get(["axisLabel","rotate"]);return l.labelRotate=y==="top"?-O:O,l.z2=1,l}function isCartesian2DSeries(r){return r.get("coordinateSystem")==="cartesian2d"}function findAxisModels(r){var t={xAxisModel:null,yAxisModel:null};return each$f(t,function(n,o){var a=o.replace(/Model$/,""),l=r.getReferringComponents(a,SINGLE_REFERRING).models[0];t[o]=l}),t}var mathLog=Math.log;function alignScaleTicks(r,t,n){var o=IntervalScale$1.prototype,a=o.getTicks.call(n),l=o.getTicks.call(n,!0),d=a.length-1,g=o.getInterval.call(n),y=getScaleExtent(r,t),S=y.extent,x=y.fixMin,w=y.fixMax;if(r.type==="log"){var c=mathLog(r.base);S=[mathLog(S[0])/c,mathLog(S[1])/c]}r.setExtent(S[0],S[1]),r.calcNiceExtent({splitNumber:d,fixMin:x,fixMax:w});var A=o.getExtent.call(r);x&&(S[0]=A[0]),w&&(S[1]=A[1]);var R=o.getInterval.call(r),L=S[0],$=S[1];if(x&&w)R=($-L)/d;else if(x)for($=S[0]+R*d;$<S[1]&&isFinite($)&&isFinite(S[1]);)R=increaseInterval(R),$=S[0]+R*d;else if(w)for(L=S[1]-R*d;L>S[0]&&isFinite(L)&&isFinite(S[0]);)R=increaseInterval(R),L=S[1]-R*d;else{var O=r.getTicks().length-1;O>d&&(R=increaseInterval(R));var z=R*d;$=Math.ceil(S[1]/R)*R,L=round$3($-z),L<0&&S[0]>=0?(L=0,$=round$3(z)):$>0&&S[1]<=0&&($=0,L=-round$3(z))}var V=(a[0].value-l[0].value)/g,j=(a[d].value-l[d].value)/g;o.setExtent.call(r,L+R*V,$+R*j),o.setInterval.call(r,R),(V||j)&&o.setNiceExtent.call(r,L+R,$-R)}var Grid=function(){function r(t,n,o){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(t,n,o),this.model=t}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(t,n){var o=this._axesMap;this._updateScale(t,this.model);function a(d){var g,y=keys(d),S=y.length;if(S){for(var x=[],w=S-1;w>=0;w--){var c=+y[w],A=d[c],R=A.model,L=A.scale;isIntervalOrLogScale(L)&&R.get("alignTicks")&&R.get("interval")==null?x.push(A):(niceScaleExtent(L,R),isIntervalOrLogScale(L)&&(g=A))}x.length&&(g||(g=x.pop(),niceScaleExtent(g.scale,g.model)),each$f(x,function($){alignScaleTicks($.scale,$.model,g.scale)}))}}a(o.x),a(o.y);var l={};each$f(o.x,function(d){fixAxisOnZero(o,"y",d,l)}),each$f(o.y,function(d){fixAxisOnZero(o,"x",d,l)}),this.resize(this.model,n)},r.prototype.resize=function(t,n,o){var a=t.getBoxLayoutParams(),l=!o&&t.get("containLabel"),d=getLayoutRect(a,{width:n.getWidth(),height:n.getHeight()});this._rect=d;var g=this._axesList;y(),l&&(each$f(g,function(S){if(!S.model.get(["axisLabel","inside"])){var x=estimateLabelUnionRect(S);if(x){var w=S.isHorizontal()?"height":"width",c=S.model.get(["axisLabel","margin"]);d[w]-=x[w]+c,S.position==="top"?d.y+=x.height+c:S.position==="left"&&(d.x+=x.width+c)}}}),y()),each$f(this._coordsList,function(S){S.calcAffineTransform()});function y(){each$f(g,function(S){var x=S.isHorizontal(),w=x?[0,d.width]:[0,d.height],c=S.inverse?1:0;S.setExtent(w[c],w[1-c]),updateAxisTransform(S,x?d.x:d.y)})}},r.prototype.getAxis=function(t,n){var o=this._axesMap[t];if(o!=null)return o[n||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(t,n){if(t!=null&&n!=null){var o="x"+t+"y"+n;return this._coordsMap[o]}isObject$3(t)&&(n=t.yAxisIndex,t=t.xAxisIndex);for(var a=0,l=this._coordsList;a<l.length;a++)if(l[a].getAxis("x").index===t||l[a].getAxis("y").index===n)return l[a]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(t,n,o){var a=this._findConvertTarget(n);return a.cartesian?a.cartesian.dataToPoint(o):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(o)):null},r.prototype.convertFromPixel=function(t,n,o){var a=this._findConvertTarget(n);return a.cartesian?a.cartesian.pointToData(o):a.axis?a.axis.coordToData(a.axis.toLocalCoord(o)):null},r.prototype._findConvertTarget=function(t){var n=t.seriesModel,o=t.xAxisModel||n&&n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],a=t.yAxisModel||n&&n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],l=t.gridModel,d=this._coordsList,g,y;if(n)g=n.coordinateSystem,indexOf(d,g)<0&&(g=null);else if(o&&a)g=this.getCartesian(o.componentIndex,a.componentIndex);else if(o)y=this.getAxis("x",o.componentIndex);else if(a)y=this.getAxis("y",a.componentIndex);else if(l){var S=l.coordinateSystem;S===this&&(g=this._coordsList[0])}return{cartesian:g,axis:y}},r.prototype.containPoint=function(t){var n=this._coordsList[0];if(n)return n.containPoint(t)},r.prototype._initCartesian=function(t,n,o){var a=this,l=this,d={left:!1,right:!1,top:!1,bottom:!1},g={x:{},y:{}},y={x:0,y:0};if(n.eachComponent("xAxis",S("x"),this),n.eachComponent("yAxis",S("y"),this),!y.x||!y.y){this._axesMap={},this._axesList=[];return}this._axesMap=g,each$f(g.x,function(x,w){each$f(g.y,function(c,A){var R="x"+w+"y"+A,L=new Cartesian2D(R);L.master=a,L.model=t,a._coordsMap[R]=L,a._coordsList.push(L),L.addAxis(x),L.addAxis(c)})});function S(x){return function(w,c){if(isAxisUsedInTheGrid(w,t)){var A=w.get("position");x==="x"?A!=="top"&&A!=="bottom"&&(A=d.bottom?"top":"bottom"):A!=="left"&&A!=="right"&&(A=d.left?"right":"left"),d[A]=!0;var R=new Axis2D$1(x,createScaleByModel$1(w),[0,0],w.get("type"),A),L=R.type==="category";R.onBand=L&&w.get("boundaryGap"),R.inverse=w.get("inverse"),w.axis=R,R.model=w,R.grid=l,R.index=c,l._axesList.push(R),g[x][c]=R,y[x]++}}}},r.prototype._updateScale=function(t,n){each$f(this._axesList,function(a){if(a.scale.setExtent(1/0,-1/0),a.type==="category"){var l=a.model.get("categorySortInfo");a.scale.setSortInfo(l)}}),t.eachSeries(function(a){if(isCartesian2DSeries(a)){var l=findAxisModels(a),d=l.xAxisModel,g=l.yAxisModel;if(!isAxisUsedInTheGrid(d,n)||!isAxisUsedInTheGrid(g,n))return;var y=this.getCartesian(d.componentIndex,g.componentIndex),S=a.getData(),x=y.getAxis("x"),w=y.getAxis("y");o(S,x),o(S,w)}},this);function o(a,l){each$f(getDataDimensionsOnAxis(a,l.dim),function(d){l.scale.unionExtentFromData(a,d)})}},r.prototype.getTooltipAxes=function(t){var n=[],o=[];return each$f(this.getCartesians(),function(a){var l=t!=null&&t!=="auto"?a.getAxis(t):a.getBaseAxis(),d=a.getOtherAxis(l);indexOf(n,l)<0&&n.push(l),indexOf(o,d)<0&&o.push(d)}),{baseAxes:n,otherAxes:o}},r.create=function(t,n){var o=[];return t.eachComponent("grid",function(a,l){var d=new r(a,t,n);d.name="grid_"+l,d.resize(a,n,!0),a.coordinateSystem=d,o.push(d)}),t.eachSeries(function(a){if(isCartesian2DSeries(a)){var l=findAxisModels(a),d=l.xAxisModel,g=l.yAxisModel,y=d.getCoordSysModel(),S=y.coordinateSystem;a.coordinateSystem=S.getCartesian(d.componentIndex,g.componentIndex)}}),o},r.dimensions=cartesian2DDimensions,r}();function isAxisUsedInTheGrid(r,t){return r.getCoordSysModel()===t}function fixAxisOnZero(r,t,n,o){n.getAxesOnZeroOf=function(){return l?[l]:[]};var a=r[t],l,d=n.model,g=d.get(["axisLine","onZero"]),y=d.get(["axisLine","onZeroAxisIndex"]);if(!g)return;if(y!=null)canOnZeroToAxis(a[y])&&(l=a[y]);else for(var S in a)if(a.hasOwnProperty(S)&&canOnZeroToAxis(a[S])&&!o[x(a[S])]){l=a[S];break}l&&(o[x(l)]=!0);function x(w){return w.dim+"_"+w.index}}function canOnZeroToAxis(r){return r&&r.type!=="category"&&r.type!=="time"&&ifAxisCrossZero(r)}function updateAxisTransform(r,t){var n=r.getExtent(),o=n[0]+n[1];r.toGlobalCoord=r.dim==="x"?function(a){return a+t}:function(a){return o-a+t},r.toLocalCoord=r.dim==="x"?function(a){return a-t}:function(a){return o-a+t}}const Grid$1=Grid;var PI$3=Math.PI,AxisBuilder=function(){function r(t,n){this.group=new Group$4,this.opt=n,this.axisModel=t,defaults(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var o=new Group$4({x:n.position[0],y:n.position[1],rotation:n.rotation});o.updateTransform(),this._transformGroup=o}return r.prototype.hasBuilder=function(t){return!!builders[t]},r.prototype.add=function(t){builders[t](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(t,n,o){var a=remRadian(n-t),l,d;return isRadianAroundZero(a)?(d=o>0?"top":"bottom",l="center"):isRadianAroundZero(a-PI$3)?(d=o>0?"bottom":"top",l="center"):(d="middle",a>0&&a<PI$3?l=o>0?"right":"left":l=o>0?"left":"right"),{rotation:a,textAlign:l,textVerticalAlign:d}},r.makeAxisEventDataBase=function(t){var n={componentType:t.mainType,componentIndex:t.componentIndex};return n[t.mainType+"Index"]=t.componentIndex,n},r.isLabelSilent=function(t){var n=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||n&&n.show)},r}(),builders={axisLine:function(r,t,n,o){var a=t.get(["axisLine","show"]);if(a==="auto"&&r.handleAutoShown&&(a=r.handleAutoShown("axisLine")),!!a){var l=t.axis.getExtent(),d=o.transform,g=[l[0],0],y=[l[1],0],S=g[0]>y[0];d&&(applyTransform$1(g,g,d),applyTransform$1(y,y,d));var x=extend({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),w=new Line$3({shape:{x1:g[0],y1:g[1],x2:y[0],y2:y[1]},style:x,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(w.shape,w.style.lineWidth),w.anid="line",n.add(w);var c=t.get(["axisLine","symbol"]);if(c!=null){var A=t.get(["axisLine","symbolSize"]);isString(c)&&(c=[c,c]),(isString(A)||isNumber(A))&&(A=[A,A]);var R=normalizeSymbolOffset(t.get(["axisLine","symbolOffset"])||0,A),L=A[0],$=A[1];each$f([{rotate:r.rotation+Math.PI/2,offset:R[0],r:0},{rotate:r.rotation-Math.PI/2,offset:R[1],r:Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1]))}],function(O,z){if(c[z]!=="none"&&c[z]!=null){var V=createSymbol$1(c[z],-L/2,-$/2,L,$,x.stroke,!0),j=O.r+O.offset,K=S?y:g;V.attr({rotation:O.rotate,x:K[0]+j*Math.cos(r.rotation),y:K[1]-j*Math.sin(r.rotation),silent:!0,z2:11}),n.add(V)}})}}},axisTickLabel:function(r,t,n,o){var a=buildAxisMajorTicks(n,o,t,r),l=buildAxisLabel(n,o,t,r);if(fixMinMaxLabelShow(t,l,a),buildAxisMinorTicks(n,o,t,r.tickDirection),t.get(["axisLabel","hideOverlap"])){var d=prepareLayoutList(map$1(l,function(g){return{label:g,priority:g.z2,defaultAttr:{ignore:g.ignore}}}));hideOverlap(d)}},axisName:function(r,t,n,o){var a=retrieve(r.axisName,t.get("name"));if(a){var l=t.get("nameLocation"),d=r.nameDirection,g=t.getModel("nameTextStyle"),y=t.get("nameGap")||0,S=t.axis.getExtent(),x=S[0]>S[1]?-1:1,w=[l==="start"?S[0]-x*y:l==="end"?S[1]+x*y:(S[0]+S[1])/2,isNameLocationCenter(l)?r.labelOffset+d*y:0],c,A=t.get("nameRotate");A!=null&&(A=A*PI$3/180);var R;isNameLocationCenter(l)?c=AxisBuilder.innerTextLayout(r.rotation,A??r.rotation,d):(c=endTextLayout(r.rotation,l,A||0,S),R=r.axisNameAvailableWidth,R!=null&&(R=Math.abs(R/Math.sin(c.rotation)),!isFinite(R)&&(R=null)));var L=g.getFont(),$=t.get("nameTruncate",!0)||{},O=$.ellipsis,z=retrieve(r.nameTruncateMaxWidth,$.maxWidth,R),V=new ZRText$1({x:w[0],y:w[1],rotation:c.rotation,silent:AxisBuilder.isLabelSilent(t),style:createTextStyle$1(g,{text:a,font:L,overflow:"truncate",width:z,ellipsis:O,fill:g.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:g.get("align")||c.textAlign,verticalAlign:g.get("verticalAlign")||c.textVerticalAlign}),z2:1});if(setTooltipConfig({el:V,componentModel:t,itemName:a}),V.__fullText=a,V.anid="name",t.get("triggerEvent")){var j=AxisBuilder.makeAxisEventDataBase(t);j.targetType="axisName",j.name=a,getECData(V).eventData=j}o.add(V),V.updateTransform(),n.add(V),V.decomposeTransform()}}};function endTextLayout(r,t,n,o){var a=remRadian(n-r),l,d,g=o[0]>o[1],y=t==="start"&&!g||t!=="start"&&g;return isRadianAroundZero(a-PI$3/2)?(d=y?"bottom":"top",l="center"):isRadianAroundZero(a-PI$3*1.5)?(d=y?"top":"bottom",l="center"):(d="middle",a<PI$3*1.5&&a>PI$3/2?l=y?"left":"right":l=y?"right":"left"),{rotation:a,textAlign:l,textVerticalAlign:d}}function fixMinMaxLabelShow(r,t,n){if(!shouldShowAllLabels(r.axis)){var o=r.get(["axisLabel","showMinLabel"]),a=r.get(["axisLabel","showMaxLabel"]);t=t||[],n=n||[];var l=t[0],d=t[1],g=t[t.length-1],y=t[t.length-2],S=n[0],x=n[1],w=n[n.length-1],c=n[n.length-2];o===!1?(ignoreEl(l),ignoreEl(S)):isTwoLabelOverlapped(l,d)&&(o?(ignoreEl(d),ignoreEl(x)):(ignoreEl(l),ignoreEl(S))),a===!1?(ignoreEl(g),ignoreEl(w)):isTwoLabelOverlapped(y,g)&&(a?(ignoreEl(y),ignoreEl(c)):(ignoreEl(g),ignoreEl(w)))}}function ignoreEl(r){r&&(r.ignore=!0)}function isTwoLabelOverlapped(r,t){var n=r&&r.getBoundingRect().clone(),o=t&&t.getBoundingRect().clone();if(!(!n||!o)){var a=identity([]);return rotate(a,a,-r.rotation),n.applyTransform(mul([],a,r.getLocalTransform())),o.applyTransform(mul([],a,t.getLocalTransform())),n.intersect(o)}}function isNameLocationCenter(r){return r==="middle"||r==="center"}function createTicks(r,t,n,o,a){for(var l=[],d=[],g=[],y=0;y<r.length;y++){var S=r[y].coord;d[0]=S,d[1]=0,g[0]=S,g[1]=n,t&&(applyTransform$1(d,d,t),applyTransform$1(g,g,t));var x=new Line$3({shape:{x1:d[0],y1:d[1],x2:g[0],y2:g[1]},style:o,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(x.shape,x.style.lineWidth),x.anid=a+"_"+r[y].tickValue,l.push(x)}return l}function buildAxisMajorTicks(r,t,n,o){var a=n.axis,l=n.getModel("axisTick"),d=l.get("show");if(d==="auto"&&o.handleAutoShown&&(d=o.handleAutoShown("axisTick")),!(!d||a.scale.isBlank())){for(var g=l.getModel("lineStyle"),y=o.tickDirection*l.get("length"),S=a.getTicksCoords(),x=createTicks(S,t.transform,y,defaults(g.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),w=0;w<x.length;w++)r.add(x[w]);return x}}function buildAxisMinorTicks(r,t,n,o){var a=n.axis,l=n.getModel("minorTick");if(!(!l.get("show")||a.scale.isBlank())){var d=a.getMinorTicksCoords();if(d.length)for(var g=l.getModel("lineStyle"),y=o*l.get("length"),S=defaults(g.getLineStyle(),defaults(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),x=0;x<d.length;x++)for(var w=createTicks(d[x],t.transform,y,S,"minorticks_"+x),c=0;c<w.length;c++)r.add(w[c])}}function buildAxisLabel(r,t,n,o){var a=n.axis,l=retrieve(o.axisLabelShow,n.get(["axisLabel","show"]));if(!(!l||a.scale.isBlank())){var d=n.getModel("axisLabel"),g=d.get("margin"),y=a.getViewLabels(),S=(retrieve(o.labelRotate,d.get("rotate"))||0)*PI$3/180,x=AxisBuilder.innerTextLayout(o.rotation,S,o.labelDirection),w=n.getCategories&&n.getCategories(!0),c=[],A=AxisBuilder.isLabelSilent(n),R=n.get("triggerEvent");return each$f(y,function(L,$){var O=a.scale.type==="ordinal"?a.scale.getRawOrdinalNumber(L.tickValue):L.tickValue,z=L.formattedLabel,V=L.rawLabel,j=d;if(w&&w[O]){var K=w[O];isObject$3(K)&&K.textStyle&&(j=new Model$1(K.textStyle,d,n.ecModel))}var Z=j.getTextColor()||n.get(["axisLine","lineStyle","color"]),q=a.dataToCoord(O),ie=new ZRText$1({x:q,y:o.labelOffset+o.labelDirection*g,rotation:x.rotation,silent:A,z2:10+(L.level||0),style:createTextStyle$1(j,{text:z,align:j.getShallow("align",!0)||x.textAlign,verticalAlign:j.getShallow("verticalAlign",!0)||j.getShallow("baseline",!0)||x.textVerticalAlign,fill:isFunction(Z)?Z(a.type==="category"?V:a.type==="value"?O+"":O,$):Z})});if(ie.anid="label_"+O,R){var te=AxisBuilder.makeAxisEventDataBase(n);te.targetType="axisLabel",te.value=V,te.tickIndex=$,a.type==="category"&&(te.dataIndex=O),getECData(ie).eventData=te}t.add(ie),ie.updateTransform(),c.push(ie),r.add(ie),ie.decomposeTransform()}),c}}const AxisBuilder$1=AxisBuilder;function collect(r,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(n,r,t),n.seriesInvolved&&collectSeriesInfo(n,r),n}function collectAxesInfo(r,t,n){var o=t.getComponent("tooltip"),a=t.getComponent("axisPointer"),l=a.get("link",!0)||[],d=[];each$f(n.getCoordinateSystems(),function(g){if(!g.axisPointerEnabled)return;var y=makeKey(g.model),S=r.coordSysAxesInfo[y]={};r.coordSysMap[y]=g;var x=g.model,w=x.getModel("tooltip",o);if(each$f(g.getAxes(),curry$1(L,!1,null)),g.getTooltipAxes&&o&&w.get("show")){var c=w.get("trigger")==="axis",A=w.get(["axisPointer","type"])==="cross",R=g.getTooltipAxes(w.get(["axisPointer","axis"]));(c||A)&&each$f(R.baseAxes,curry$1(L,A?"cross":!0,c)),A&&each$f(R.otherAxes,curry$1(L,"cross",!1))}function L($,O,z){var V=z.model.getModel("axisPointer",a),j=V.get("show");if(!(!j||j==="auto"&&!$&&!isHandleTrigger(V))){O==null&&(O=V.get("triggerTooltip")),V=$?makeAxisPointerModel(z,w,a,t,$,O):V;var K=V.get("snap"),Z=V.get("triggerEmphasis"),q=makeKey(z.model),ie=O||K||z.type==="category",te=r.axesInfo[q]={key:q,axis:z,coordSys:g,axisPointerModel:V,triggerTooltip:O,triggerEmphasis:Z,involveSeries:ie,snap:K,useHandle:isHandleTrigger(V),seriesModels:[],linkGroup:null};S[q]=te,r.seriesInvolved=r.seriesInvolved||ie;var oe=getLinkGroupIndex(l,z);if(oe!=null){var re=d[oe]||(d[oe]={axesInfo:{}});re.axesInfo[q]=te,re.mapper=l[oe].mapper,te.linkGroup=re}}}})}function makeAxisPointerModel(r,t,n,o,a,l){var d=t.getModel("axisPointer"),g=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],y={};each$f(g,function(c){y[c]=clone$4(d.get(c))}),y.snap=r.type!=="category"&&!!l,d.get("type")==="cross"&&(y.type="line");var S=y.label||(y.label={});if(S.show==null&&(S.show=!1),a==="cross"){var x=d.get(["label","show"]);if(S.show=x??!0,!l){var w=y.lineStyle=d.get("crossStyle");w&&defaults(S,w.textStyle)}}return r.model.getModel("axisPointer",new Model$1(y,n,o))}function collectSeriesInfo(r,t){t.eachSeries(function(n){var o=n.coordinateSystem,a=n.get(["tooltip","trigger"],!0),l=n.get(["tooltip","show"],!0);!o||a==="none"||a===!1||a==="item"||l===!1||n.get(["axisPointer","show"],!0)===!1||each$f(r.coordSysAxesInfo[makeKey(o.model)],function(d){var g=d.axis;o.getAxis(g.dim)===g&&(d.seriesModels.push(n),d.seriesDataCount==null&&(d.seriesDataCount=0),d.seriesDataCount+=n.getData().count())})})}function getLinkGroupIndex(r,t){for(var n=t.model,o=t.dim,a=0;a<r.length;a++){var l=r[a]||{};if(checkPropInLink(l[o+"AxisId"],n.id)||checkPropInLink(l[o+"AxisIndex"],n.componentIndex)||checkPropInLink(l[o+"AxisName"],n.name))return a}}function checkPropInLink(r,t){return r==="all"||isArray$1(r)&&indexOf(r,t)>=0||r===t}function fixValue(r){var t=getAxisInfo$1(r);if(t){var n=t.axisPointerModel,o=t.axis.scale,a=n.option,l=n.get("status"),d=n.get("value");d!=null&&(d=o.parse(d));var g=isHandleTrigger(n);l==null&&(a.status=g?"show":"hide");var y=o.getExtent().slice();y[0]>y[1]&&y.reverse(),(d==null||d>y[1])&&(d=y[1]),d<y[0]&&(d=y[0]),a.value=d,g&&(a.status=t.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(r){var t=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[makeKey(r)]}function getAxisPointerModel(r){var t=getAxisInfo$1(r);return t&&t.axisPointerModel}function isHandleTrigger(r){return!!r.get(["handle","show"])}function makeKey(r){return r.type+"||"+r.id}var axisPointerClazz={},AxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a,l){this.axisPointerClass&&fixValue(n),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,a,!0)},t.prototype.updateAxisPointer=function(n,o,a,l){this._doUpdateAxisPointerClass(n,a,!1)},t.prototype.remove=function(n,o){var a=this._axisPointer;a&&a.remove(o)},t.prototype.dispose=function(n,o){this._disposeAxisPointer(o),r.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(n,o,a){var l=t.getAxisPointerClass(this.axisPointerClass);if(l){var d=getAxisPointerModel(n);d?(this._axisPointer||(this._axisPointer=new l)).render(n,d,o,a):this._disposeAxisPointer(o)}},t.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},t.registerAxisPointerClass=function(n,o){axisPointerClazz[n]=o},t.getAxisPointerClass=function(n){return n&&axisPointerClazz[n]},t.type="axis",t}(ComponentView$1);const AxisView$1=AxisView;var inner$f=makeInner();function rectCoordAxisBuildSplitArea(r,t,n,o){var a=n.axis;if(!a.scale.isBlank()){var l=n.getModel("splitArea"),d=l.getModel("areaStyle"),g=d.get("color"),y=o.coordinateSystem.getRect(),S=a.getTicksCoords({tickModel:l,clamp:!0});if(S.length){var x=g.length,w=inner$f(r).splitAreaColors,c=createHashMap(),A=0;if(w)for(var R=0;R<S.length;R++){var L=w.get(S[R].tickValue);if(L!=null){A=(L+(x-1)*R)%x;break}}var $=a.toGlobalCoord(S[0].coord),O=d.getAreaStyle();g=isArray$1(g)?g:[g];for(var R=1;R<S.length;R++){var z=a.toGlobalCoord(S[R].coord),V=void 0,j=void 0,K=void 0,Z=void 0;a.isHorizontal()?(V=$,j=y.y,K=z-V,Z=y.height,$=V+K):(V=y.x,j=$,K=y.width,Z=z-j,$=j+Z);var q=S[R-1].tickValue;q!=null&&c.set(q,A),t.add(new Rect$3({anid:q!=null?"area_"+q:null,shape:{x:V,y:j,width:K,height:Z},style:defaults({fill:g[A]},O),autoBatch:!0,silent:!0})),A=(A+1)%x}inner$f(r).splitAreaColors=c}}}function rectCoordAxisHandleRemove(r){inner$f(r).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="CartesianAxisPointer",n}return t.prototype.render=function(n,o,a,l){this.group.removeAll();var d=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!n.get("show")){var g=n.getCoordSysModel(),y=layout$2(g,n),S=new AxisBuilder$1(n,extend({handleAutoShown:function(w){for(var c=g.coordinateSystem.getCartesians(),A=0;A<c.length;A++)if(isIntervalOrLogScale(c[A].getOtherAxis(n.axis).scale))return!0;return!1}},y));each$f(axisBuilderAttrs$3,S.add,S),this._axisGroup.add(S.getGroup()),each$f(selfBuilderAttrs$2,function(w){n.get([w,"show"])&&axisElementBuilders$2[w](this,this._axisGroup,n,g)},this);var x=l&&l.type==="changeAxisOrder"&&l.isInitSort;x||groupTransition(d,this._axisGroup,n),r.prototype.render.call(this,n,o,a,l)}},t.prototype.remove=function(){rectCoordAxisHandleRemove(this)},t.type="cartesianAxis",t}(AxisView$1),axisElementBuilders$2={splitLine:function(r,t,n,o){var a=n.axis;if(!a.scale.isBlank()){var l=n.getModel("splitLine"),d=l.getModel("lineStyle"),g=d.get("color");g=isArray$1(g)?g:[g];for(var y=o.coordinateSystem.getRect(),S=a.isHorizontal(),x=0,w=a.getTicksCoords({tickModel:l}),c=[],A=[],R=d.getLineStyle(),L=0;L<w.length;L++){var $=a.toGlobalCoord(w[L].coord);S?(c[0]=$,c[1]=y.y,A[0]=$,A[1]=y.y+y.height):(c[0]=y.x,c[1]=$,A[0]=y.x+y.width,A[1]=$);var O=x++%g.length,z=w[L].tickValue,V=new Line$3({anid:z!=null?"line_"+w[L].tickValue:null,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:A[0],y2:A[1]},style:defaults({stroke:g[O]},R),silent:!0});subPixelOptimizeLine(V.shape,R.lineWidth),t.add(V)}}},minorSplitLine:function(r,t,n,o){var a=n.axis,l=n.getModel("minorSplitLine"),d=l.getModel("lineStyle"),g=o.coordinateSystem.getRect(),y=a.isHorizontal(),S=a.getMinorTicksCoords();if(S.length)for(var x=[],w=[],c=d.getLineStyle(),A=0;A<S.length;A++)for(var R=0;R<S[A].length;R++){var L=a.toGlobalCoord(S[A][R].coord);y?(x[0]=L,x[1]=g.y,w[0]=L,w[1]=g.y+g.height):(x[0]=g.x,x[1]=L,w[0]=g.x+g.width,w[1]=L);var $=new Line$3({anid:"minor_line_"+S[A][R].tickValue,autoBatch:!0,shape:{x1:x[0],y1:x[1],x2:w[0],y2:w[1]},style:c,silent:!0});subPixelOptimizeLine($.shape,c.lineWidth),t.add($)}},splitArea:function(r,t,n,o){rectCoordAxisBuildSplitArea(r,t,n,o)}},CartesianXAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="xAxis",t}(CartesianAxisView),CartesianYAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=CartesianXAxisView.type,n}return t.type="yAxis",t}(CartesianAxisView),GridView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="grid",n}return t.prototype.render=function(n,o){this.group.removeAll(),n.get("show")&&this.group.add(new Rect$3({shape:n.coordinateSystem.getRect(),style:defaults({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ComponentView$1),extraOption={offset:0};function install$N(r){r.registerComponentView(GridView),r.registerComponentModel(GridModel$1),r.registerCoordinateSystem("cartesian2d",Grid$1),axisModelCreator(r,"x",CartesianAxisModel,extraOption),axisModelCreator(r,"y",CartesianAxisModel,extraOption),r.registerComponentView(CartesianXAxisView),r.registerComponentView(CartesianYAxisView),r.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function install$M(r){use(install$N),r.registerSeriesModel(ScatterSeriesModel$1),r.registerChartView(ScatterView$1),r.registerLayout(pointsLayout("scatter"))}function radarLayout(r){r.eachSeriesByType("radar",function(t){var n=t.getData(),o=[],a=t.coordinateSystem;if(a){var l=a.getIndicatorAxes();each$f(l,function(d,g){n.each(n.mapDimension(l[g].dim),function(y,S){o[S]=o[S]||[];var x=a.dataToPoint(y,g);o[S][g]=isValidPoint(x)?x:getValueMissingPoint(a)})}),n.each(function(d){var g=find(o[d],function(y){return isValidPoint(y)})||getValueMissingPoint(a);o[d].push(g.slice()),n.setItemLayout(d,o[d])})}})}function isValidPoint(r){return!isNaN(r[0])&&!isNaN(r[1])}function getValueMissingPoint(r){return[r.cx,r.cy]}function radarBackwardCompat(r){var t=r.polar;if(t){isArray$1(t)||(t=[t]);var n=[];each$f(t,function(o,a){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),r.radar=r.radar||[],isArray$1(r.radar)||(r.radar=[r.radar]),r.radar.push(o)):n.push(o)}),r.polar=n}each$f(r.series,function(o){o&&o.type==="radar"&&o.polarIndex&&(o.radarIndex=o.polarIndex)})}var RadarView$2=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=n.coordinateSystem,d=this.group,g=n.getData(),y=this._data;function S(c,A){var R=c.getItemVisual(A,"symbol")||"circle";if(R!=="none"){var L=normalizeSymbolSize(c.getItemVisual(A,"symbolSize")),$=createSymbol$1(R,-1,-1,2,2),O=c.getItemVisual(A,"symbolRotate")||0;return $.attr({style:{strokeNoScale:!0},z2:100,scaleX:L[0]/2,scaleY:L[1]/2,rotation:O*Math.PI/180||0}),$}}function x(c,A,R,L,$,O){R.removeAll();for(var z=0;z<A.length-1;z++){var V=S(L,$);V&&(V.__dimIdx=z,c[z]?(V.setPosition(c[z]),graphic$1[O?"initProps":"updateProps"](V,{x:A[z][0],y:A[z][1]},n,$)):V.setPosition(A[z]),R.add(V))}}function w(c){return map$1(c,function(A){return[l.cx,l.cy]})}g.diff(y).add(function(c){var A=g.getItemLayout(c);if(A){var R=new Polygon$1,L=new Polyline$3,$={shape:{points:A}};R.shape.points=w(A),L.shape.points=w(A),initProps(R,$,n,c),initProps(L,$,n,c);var O=new Group$4,z=new Group$4;O.add(L),O.add(R),O.add(z),x(L.shape.points,A,z,g,c,!0),g.setItemGraphicEl(c,O)}}).update(function(c,A){var R=y.getItemGraphicEl(A),L=R.childAt(0),$=R.childAt(1),O=R.childAt(2),z={shape:{points:g.getItemLayout(c)}};z.shape.points&&(x(L.shape.points,z.shape.points,O,g,c,!1),saveOldStyle($),saveOldStyle(L),updateProps$1(L,z,n),updateProps$1($,z,n),g.setItemGraphicEl(c,R))}).remove(function(c){d.remove(y.getItemGraphicEl(c))}).execute(),g.eachItemGraphicEl(function(c,A){var R=g.getItemModel(A),L=c.childAt(0),$=c.childAt(1),O=c.childAt(2),z=g.getItemVisual(A,"style"),V=z.fill;d.add(c),L.useStyle(defaults(R.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:V})),setStatesStylesFromModel(L,R,"lineStyle"),setStatesStylesFromModel($,R,"areaStyle");var j=R.getModel("areaStyle"),K=j.isEmpty()&&j.parentModel.isEmpty();$.ignore=K,each$f(["emphasis","select","blur"],function(ie){var te=R.getModel([ie,"areaStyle"]),oe=te.isEmpty()&&te.parentModel.isEmpty();$.ensureState(ie).ignore=oe&&K}),$.useStyle(defaults(j.getAreaStyle(),{fill:V,opacity:.7,decal:z.decal}));var Z=R.getModel("emphasis"),q=Z.getModel("itemStyle").getItemStyle();O.eachChild(function(ie){if(ie instanceof ZRImage$1){var te=ie.style;ie.useStyle(extend({image:te.image,x:te.x,y:te.y,width:te.width,height:te.height},z))}else ie.useStyle(z),ie.setColor(V),ie.style.strokeNoScale=!0;var oe=ie.ensureState("emphasis");oe.style=clone$4(q);var re=g.getStore().get(g.getDimensionIndex(ie.__dimIdx),A);(re==null||isNaN(re))&&(re=""),setLabelStyle(ie,getLabelStatesModels(R),{labelFetcher:g.hostModel,labelDataIndex:A,labelDimIndex:ie.__dimIdx,defaultText:re,inheritColor:V,defaultOpacity:z.opacity})}),toggleHoverEmphasis(c,Z.get("focus"),Z.get("blurScope"),Z.get("disabled"))}),this._data=g},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(ChartView$1);const RadarView$3=RadarView$2;var RadarSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.init=function(n){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.getInitialData=function(n,o){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(n,o,a){var l=this.getData(),d=this.coordinateSystem,g=d.getIndicatorAxes(),y=this.getData().getName(n),S=y===""?this.name:y,x=retrieveVisualColorForTooltipMarker(this,n);return createTooltipMarkup("section",{header:S,sortBlocks:!0,blocks:map$1(g,function(w){var c=l.get(l.mapDimension(w.dim),n);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:x,name:w.name,value:c,sortParam:c})})})},t.prototype.getTooltipPosition=function(n){if(n!=null){for(var o=this.getData(),a=this.coordinateSystem,l=o.getValues(map$1(a.dimensions,function(S){return o.mapDimension(S)}),n),d=0,g=l.length;d<g;d++)if(!isNaN(l[d])){var y=a.getIndicatorAxes();return a.coordToPoint(y[d].dataToCoord(l[d]),d)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(SeriesModel$1);const RadarSeriesModel$1=RadarSeriesModel;var valueAxisDefault=axisDefault.value;function defaultsShow(r,t){return defaults({show:t},r)}var RadarModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),o=this.get("splitNumber"),a=this.get("scale"),l=this.get("axisLine"),d=this.get("axisTick"),g=this.get("axisLabel"),y=this.get("axisName"),S=this.get(["axisName","show"]),x=this.get(["axisName","formatter"]),w=this.get("axisNameGap"),c=this.get("triggerEvent"),A=map$1(this.get("indicator")||[],function(R){R.max!=null&&R.max>0&&!R.min?R.min=0:R.min!=null&&R.min<0&&!R.max&&(R.max=0);var L=y;R.color!=null&&(L=defaults({color:R.color},y));var $=merge(clone$4(R),{boundaryGap:n,splitNumber:o,scale:a,axisLine:l,axisTick:d,axisLabel:g,name:R.text,showName:S,nameLocation:"end",nameGap:w,nameTextStyle:L,triggerEvent:c},!1);if(isString(x)){var O=$.name;$.name=x.replace("{value}",O??"")}else isFunction(x)&&($.name=x($.name,$));var z=new Model$1($,null,this.ecModel);return mixin(z,AxisModelCommonMixin.prototype),z.mainType="radar",z.componentIndex=this.componentIndex,z},this);this._indicatorModels=A},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},t}(ComponentModel$1);const RadarModel$1=RadarModel;var axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=this.group;l.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},t.prototype._buildAxes=function(n){var o=n.coordinateSystem,a=o.getIndicatorAxes(),l=map$1(a,function(d){var g=d.model.get("showName")?d.name:"",y=new AxisBuilder$1(d.model,{axisName:g,position:[o.cx,o.cy],rotation:d.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return y});each$f(l,function(d){each$f(axisBuilderAttrs$2,d.add,d),this.group.add(d.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(n){var o=n.coordinateSystem,a=o.getIndicatorAxes();if(!a.length)return;var l=n.get("shape"),d=n.getModel("splitLine"),g=n.getModel("splitArea"),y=d.getModel("lineStyle"),S=g.getModel("areaStyle"),x=d.get("show"),w=g.get("show"),c=y.get("color"),A=S.get("color"),R=isArray$1(c)?c:[c],L=isArray$1(A)?A:[A],$=[],O=[];function z(be,Q,Ne){var Ee=Ne%Q.length;return be[Ee]=be[Ee]||[],Ee}if(l==="circle")for(var V=a[0].getTicksCoords(),j=o.cx,K=o.cy,Z=0;Z<V.length;Z++){if(x){var q=z($,R,Z);$[q].push(new Circle$1({shape:{cx:j,cy:K,r:V[Z].coord}}))}if(w&&Z<V.length-1){var q=z(O,L,Z);O[q].push(new Ring$1({shape:{cx:j,cy:K,r0:V[Z].coord,r:V[Z+1].coord}}))}}else for(var ie,te=map$1(a,function(be,Q){var Ne=be.getTicksCoords();return ie=ie==null?Ne.length-1:Math.min(Ne.length-1,ie),map$1(Ne,function(Ee){return o.coordToPoint(Ee.coord,Q)})}),oe=[],Z=0;Z<=ie;Z++){for(var re=[],he=0;he<a.length;he++)re.push(te[he][Z]);if(re[0]&&re.push(re[0].slice()),x){var q=z($,R,Z);$[q].push(new Polyline$3({shape:{points:re}}))}if(w&&oe){var q=z(O,L,Z-1);O[q].push(new Polygon$1({shape:{points:re.concat(oe)}}))}oe=re.slice().reverse()}var _e=y.getLineStyle(),me=S.getAreaStyle();each$f(O,function(be,Q){this.group.add(mergePath(be,{style:defaults({stroke:"none",fill:L[Q%L.length]},me),silent:!0}))},this),each$f($,function(be,Q){this.group.add(mergePath(be,{style:defaults({fill:"none",stroke:R[Q%R.length]},_e),silent:!0}))},this)},t.type="radar",t}(ComponentView$1);const RadarView$1=RadarView;var IndicatorAxis=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this,n,o,a)||this;return l.type="value",l.angle=0,l.name="",l}return t}(Axis$1);const IndicatorAxis$1=IndicatorAxis;var Radar=function(){function r(t,n,o){this.dimensions=[],this._model=t,this._indicatorAxes=map$1(t.getIndicatorModels(),function(a,l){var d="indicator_"+l,g=new IndicatorAxis$1(d,new IntervalScale$1);return g.name=a.get("name"),g.model=a,a.axis=g,this.dimensions.push(d),g},this),this.resize(t,o)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(t,n){var o=this._indicatorAxes[n];return this.coordToPoint(o.dataToCoord(t),n)},r.prototype.coordToPoint=function(t,n){var o=this._indicatorAxes[n],a=o.angle,l=this.cx+t*Math.cos(a),d=this.cy-t*Math.sin(a);return[l,d]},r.prototype.pointToData=function(t){var n=t[0]-this.cx,o=t[1]-this.cy,a=Math.sqrt(n*n+o*o);n/=a,o/=a;for(var l=Math.atan2(-o,n),d=1/0,g,y=-1,S=0;S<this._indicatorAxes.length;S++){var x=this._indicatorAxes[S],w=Math.abs(l-x.angle);w<d&&(g=x,y=S,d=w)}return[y,+(g&&g.coordToData(a))]},r.prototype.resize=function(t,n){var o=t.get("center"),a=n.getWidth(),l=n.getHeight(),d=Math.min(a,l)/2;this.cx=parsePercent(o[0],a),this.cy=parsePercent(o[1],l),this.startAngle=t.get("startAngle")*Math.PI/180;var g=t.get("radius");(isString(g)||isNumber(g))&&(g=[0,g]),this.r0=parsePercent(g[0],d),this.r=parsePercent(g[1],d),each$f(this._indicatorAxes,function(y,S){y.setExtent(this.r0,this.r);var x=this.startAngle+S*Math.PI*2/this._indicatorAxes.length;x=Math.atan2(Math.sin(x),Math.cos(x)),y.angle=x},this)},r.prototype.update=function(t,n){var o=this._indicatorAxes,a=this._model;each$f(o,function(g){g.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(g,y){if(!(g.get("coordinateSystem")!=="radar"||t.getComponent("radar",g.get("radarIndex"))!==a)){var S=g.getData();each$f(o,function(x){x.scale.unionExtentFromData(S,S.mapDimension(x.dim))})}},this);var l=a.get("splitNumber"),d=new IntervalScale$1;d.setExtent(0,l),d.setInterval(1),each$f(o,function(g,y){alignScaleTicks(g.scale,g.model,d)})},r.prototype.convertToPixel=function(t,n,o){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(t,n,o){return console.warn("Not implemented."),null},r.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},r.create=function(t,n){var o=[];return t.eachComponent("radar",function(a){var l=new r(a,t,n);o.push(l),a.coordinateSystem=l}),t.eachSeriesByType("radar",function(a){a.get("coordinateSystem")==="radar"&&(a.coordinateSystem=o[a.get("radarIndex")||0])}),o},r.dimensions=[],r}();const Radar$1=Radar;function install$L(r){r.registerCoordinateSystem("radar",Radar$1),r.registerComponentModel(RadarModel$1),r.registerComponentView(RadarView$1),r.registerVisual({seriesType:"radar",reset:function(t){var n=t.getData();n.each(function(o){n.setItemVisual(o,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function install$K(r){use(install$L),r.registerChartView(RadarView$3),r.registerSeriesModel(RadarSeriesModel$1),r.registerLayout(radarLayout),r.registerProcessor(dataFilter$1("radar")),r.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(r,t,n){var o=getStore(r);o[t]=n}function release(r,t,n){var o=getStore(r),a=o[t];a===n&&(o[t]=null)}function isTaken(r,t){return!!getStore(r)[t]}function getStore(r){return r[ATTR]||(r[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(r){__extends(t,r);function t(n){var o=r.call(this)||this;o._zr=n;var a=bind$1(o._mousedownHandler,o),l=bind$1(o._mousemoveHandler,o),d=bind$1(o._mouseupHandler,o),g=bind$1(o._mousewheelHandler,o),y=bind$1(o._pinchHandler,o);return o.enable=function(S,x){this.disable(),this._opt=defaults(clone$4(x)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),S==null&&(S=!0),(S===!0||S==="move"||S==="pan")&&(n.on("mousedown",a),n.on("mousemove",l),n.on("mouseup",d)),(S===!0||S==="scale"||S==="zoom")&&(n.on("mousewheel",g),n.on("pinch",y))},o.disable=function(){n.off("mousedown",a),n.off("mousemove",l),n.off("mouseup",d),n.off("mousewheel",g),n.off("pinch",y)},o}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(n){this.pointerChecker=n},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(n){if(!isMiddleOrRightButtonOnMouseUpDown(n)){for(var o=n.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var a=n.offsetX,l=n.offsetY;this.pointerChecker&&this.pointerChecker(n,a,l)&&(this._x=a,this._y=l,this._dragging=!0)}},t.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var o=n.offsetX,a=n.offsetY,l=this._x,d=this._y,g=o-l,y=a-d;this._x=o,this._y=a,this._opt.preventDefaultMouseMove&&stop(n.event),trigger$1(this,"pan","moveOnMouseMove",n,{dx:g,dy:y,oldX:l,oldY:d,newX:o,newY:a,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(n){isMiddleOrRightButtonOnMouseUpDown(n)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(n){var o=isAvailableBehavior("zoomOnMouseWheel",n,this._opt),a=isAvailableBehavior("moveOnMouseWheel",n,this._opt),l=n.wheelDelta,d=Math.abs(l),g=n.offsetX,y=n.offsetY;if(!(l===0||!o&&!a)){if(o){var S=d>3?1.4:d>1?1.2:1.1,x=l>0?S:1/S;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",n,{scale:x,originX:g,originY:y,isAvailableBehavior:null})}if(a){var w=Math.abs(l),c=(l>0?1:-1)*(w>3?.4:w>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:c,originX:g,originY:y,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(n){if(!isTaken(this._zr,"globalPan")){var o=n.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,n,{scale:o,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},t}(Eventful$1);function checkPointerAndTrigger(r,t,n,o,a){r.pointerChecker&&r.pointerChecker(o,a.originX,a.originY)&&(stop(o.event),trigger$1(r,t,n,o,a))}function trigger$1(r,t,n,o,a){a.isAvailableBehavior=bind$1(isAvailableBehavior,null,n,o),r.trigger(t,a)}function isAvailableBehavior(r,t,n){var o=n[r];return!r||o&&(!isString(o)||t.event[o+"Key"])}const RoamController$1=RoamController;function updateViewOnPan(r,t,n){var o=r.target;o.x+=t,o.y+=n,o.dirty()}function updateViewOnZoom(r,t,n,o){var a=r.target,l=r.zoomLimit,d=r.zoom=r.zoom||1;if(d*=t,l){var g=l.min||0,y=l.max||1/0;d=Math.max(Math.min(y,d),g)}var S=d/r.zoom;r.zoom=d,a.x-=(n-a.x)*(S-1),a.y-=(o-a.y)*(S-1),a.scaleX*=S,a.scaleY*=S,a.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(r,t,n){var o=t.getComponentByElement(r.topTarget),a=o&&o.coordinateSystem;return o&&o!==n&&!IRRELEVANT_EXCLUDES.hasOwnProperty(o.mainType)&&a&&a.model!==n}function parseXML(r){if(isString(r)){var t=new DOMParser;r=t.parseFromString(r,"text/xml")}var n=r;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(t,n){n=n||{};var o=parseXML(t);this._defsUsePending=[];var a=new Group$4;this._root=a;var l=[],d=o.getAttribute("viewBox")||"",g=parseFloat(o.getAttribute("width")||n.width),y=parseFloat(o.getAttribute("height")||n.height);isNaN(g)&&(g=null),isNaN(y)&&(y=null),parseAttributes(o,a,null,!0,!1);for(var S=o.firstChild;S;)this._parseNode(S,a,l,null,!1,!1),S=S.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var x,w;if(d){var c=splitNumberSequence(d);c.length>=4&&(x={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(x&&g!=null&&y!=null&&(w=makeViewBoxTransform(x,{x:0,y:0,width:g,height:y}),!n.ignoreViewBox)){var A=a;a=new Group$4,a.add(A),A.scaleX=A.scaleY=w.scale,A.x=w.x,A.y=w.y}return!n.ignoreRootClip&&g!=null&&y!=null&&a.setClipPath(new Rect$3({shape:{x:0,y:0,width:g,height:y}})),{root:a,width:g,height:y,viewBoxRect:x,viewBoxTransform:w,named:l}},r.prototype._parseNode=function(t,n,o,a,l,d){var g=t.nodeName.toLowerCase(),y,S=a;if(g==="defs"&&(l=!0),g==="text"&&(d=!0),g==="defs"||g==="switch")y=n;else{if(!l){var x=nodeParsers[g];if(x&&hasOwn(nodeParsers,g)){y=x.call(this,t,n);var w=t.getAttribute("name");if(w){var c={name:w,namedFrom:null,svgNodeTagLower:g,el:y};o.push(c),g==="g"&&(S=c)}else a&&o.push({name:a.name,namedFrom:a,svgNodeTagLower:g,el:y});n.add(y)}}var A=paintServerParsers[g];if(A&&hasOwn(paintServerParsers,g)){var R=A.call(this,t),L=t.getAttribute("id");L&&(this._defs[L]=R)}}if(y&&y.isGroup)for(var $=t.firstChild;$;)$.nodeType===1?this._parseNode($,y,o,S,l,d):$.nodeType===3&&d&&this._parseText($,y),$=$.nextSibling},r.prototype._parseText=function(t,n){var o=new TSpan$1({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),applyTextAlignment(o,n);var a=o.style,l=a.fontSize;l&&l<9&&(a.fontSize=9,o.scaleX*=l/9,o.scaleY*=l/9);var d=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=d;var g=o.getBoundingRect();return this._textX+=g.width,n.add(o),o},r.internalField=function(){nodeParsers={g:function(t,n){var o=new Group$4;return inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o},rect:function(t,n){var o=new Rect$3;return inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),o.silent=!0,o},circle:function(t,n){var o=new Circle$1;return inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),o.silent=!0,o},line:function(t,n){var o=new Line$3;return inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),o.silent=!0,o},ellipse:function(t,n){var o=new Ellipse$1;return inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),o.silent=!0,o},polygon:function(t,n){var o=t.getAttribute("points"),a;o&&(a=parsePoints(o));var l=new Polygon$1({shape:{points:a||[]},silent:!0});return inheritStyle(n,l),parseAttributes(t,l,this._defsUsePending,!1,!1),l},polyline:function(t,n){var o=t.getAttribute("points"),a;o&&(a=parsePoints(o));var l=new Polyline$3({shape:{points:a||[]},silent:!0});return inheritStyle(n,l),parseAttributes(t,l,this._defsUsePending,!1,!1),l},image:function(t,n){var o=new ZRImage$1;return inheritStyle(n,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),o.silent=!0,o},text:function(t,n){var o=t.getAttribute("x")||"0",a=t.getAttribute("y")||"0",l=t.getAttribute("dx")||"0",d=t.getAttribute("dy")||"0";this._textX=parseFloat(o)+parseFloat(l),this._textY=parseFloat(a)+parseFloat(d);var g=new Group$4;return inheritStyle(n,g),parseAttributes(t,g,this._defsUsePending,!1,!0),g},tspan:function(t,n){var o=t.getAttribute("x"),a=t.getAttribute("y");o!=null&&(this._textX=parseFloat(o)),a!=null&&(this._textY=parseFloat(a));var l=t.getAttribute("dx")||"0",d=t.getAttribute("dy")||"0",g=new Group$4;return inheritStyle(n,g),parseAttributes(t,g,this._defsUsePending,!1,!0),this._textX+=parseFloat(l),this._textY+=parseFloat(d),g},path:function(t,n){var o=t.getAttribute("d")||"",a=createFromString(o);return inheritStyle(n,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a.silent=!0,a}}}(),r}(),paintServerParsers={lineargradient:function(r){var t=parseInt(r.getAttribute("x1")||"0",10),n=parseInt(r.getAttribute("y1")||"0",10),o=parseInt(r.getAttribute("x2")||"10",10),a=parseInt(r.getAttribute("y2")||"0",10),l=new LinearGradient$1(t,n,o,a);return parsePaintServerUnit(r,l),parseGradientColorStops(r,l),l},radialgradient:function(r){var t=parseInt(r.getAttribute("cx")||"0",10),n=parseInt(r.getAttribute("cy")||"0",10),o=parseInt(r.getAttribute("r")||"0",10),a=new RadialGradient$1(t,n,o);return parsePaintServerUnit(r,a),parseGradientColorStops(r,a),a}};function parsePaintServerUnit(r,t){var n=r.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(t.global=!0)}function parseGradientColorStops(r,t){for(var n=r.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var o=n.getAttribute("offset"),a=void 0;o&&o.indexOf("%")>0?a=parseInt(o,10)/100:o?a=parseFloat(o):a=0;var l={};parseInlineStyle(n,l,l);var d=l.stopColor||n.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:a,color:d})}n=n.nextSibling}}function inheritStyle(r,t){r&&r.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),defaults(t.__inheritedStyle,r.__inheritedStyle))}function parsePoints(r){for(var t=splitNumberSequence(r),n=[],o=0;o<t.length;o+=2){var a=parseFloat(t[o]),l=parseFloat(t[o+1]);n.push([a,l])}return n}function parseAttributes(r,t,n,o,a){var l=t,d=l.__inheritedStyle=l.__inheritedStyle||{},g={};r.nodeType===1&&(parseTransformAttribute(r,t),parseInlineStyle(r,d,g),o||parseAttributeStyle(r,d,g)),l.style=l.style||{},d.fill!=null&&(l.style.fill=getFillStrokeStyle(l,"fill",d.fill,n)),d.stroke!=null&&(l.style.stroke=getFillStrokeStyle(l,"stroke",d.stroke,n)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(y){d[y]!=null&&(l.style[y]=parseFloat(d[y]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(y){d[y]!=null&&(l.style[y]=d[y])}),a&&(l.__selfStyle=g),d.lineDash&&(l.style.lineDash=map$1(splitNumberSequence(d.lineDash),function(y){return parseFloat(y)})),(d.visibility==="hidden"||d.visibility==="collapse")&&(l.invisible=!0),d.display==="none"&&(l.ignore=!0)}function applyTextAlignment(r,t){var n=t.__selfStyle;if(n){var o=n.textBaseline,a=o;!o||o==="auto"||o==="baseline"?a="alphabetic":o==="before-edge"||o==="text-before-edge"?a="top":o==="after-edge"||o==="text-after-edge"?a="bottom":(o==="central"||o==="mathematical")&&(a="middle"),r.style.textBaseline=a}var l=t.__inheritedStyle;if(l){var d=l.textAlign,g=d;d&&(d==="middle"&&(g="center"),r.style.textAlign=g)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(r,t,n,o){var a=n&&n.match(urlRegex);if(a){var l=trim$1(a[1]);o.push([r,t,l]);return}return n==="none"&&(n=null),n}function applyDefs(r,t){for(var n=0;n<t.length;n++){var o=t[n];o[0].style[o[1]]=r[o[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(r){return r.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(r,t){var n=r.getAttribute("transform");if(n){n=n.replace(/,/g," ");var o=[],a=null;n.replace(transformRegex,function(w,c,A){return o.push(c,A),""});for(var l=o.length-1;l>0;l-=2){var d=o[l],g=o[l-1],y=splitNumberSequence(d);switch(a=a||create$1(),g){case"translate":translate(a,a,[parseFloat(y[0]),parseFloat(y[1]||"0")]);break;case"scale":scale$1(a,a,[parseFloat(y[0]),parseFloat(y[1]||y[0])]);break;case"rotate":rotate(a,a,-parseFloat(y[0])*DEGREE_TO_ANGLE);break;case"skewX":var S=Math.tan(parseFloat(y[0])*DEGREE_TO_ANGLE);mul(a,[1,0,S,1,0,0],a);break;case"skewY":var x=Math.tan(parseFloat(y[0])*DEGREE_TO_ANGLE);mul(a,[1,x,0,1,0,0],a);break;case"matrix":a[0]=parseFloat(y[0]),a[1]=parseFloat(y[1]),a[2]=parseFloat(y[2]),a[3]=parseFloat(y[3]),a[4]=parseFloat(y[4]),a[5]=parseFloat(y[5]);break}}t.setLocalTransform(a)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(r,t,n){var o=r.getAttribute("style");if(o){styleRegex.lastIndex=0;for(var a;(a=styleRegex.exec(o))!=null;){var l=a[1],d=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,l)?INHERITABLE_STYLE_ATTRIBUTES_MAP[l]:null;d&&(t[d]=a[2]);var g=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,l)?SELF_STYLE_ATTRIBUTES_MAP[l]:null;g&&(n[g]=a[2])}}}function parseAttributeStyle(r,t,n){for(var o=0;o<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var a=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[o],l=r.getAttribute(a);l!=null&&(t[INHERITABLE_STYLE_ATTRIBUTES_MAP[a]]=l)}for(var o=0;o<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var a=SELF_STYLE_ATTRIBUTES_MAP_KEYS[o],l=r.getAttribute(a);l!=null&&(n[SELF_STYLE_ATTRIBUTES_MAP[a]]=l)}}function makeViewBoxTransform(r,t){var n=t.width/r.width,o=t.height/r.height,a=Math.min(n,o);return{scale:a,x:-(r.x+r.width/2)*a+(t.x+t.width/2),y:-(r.y+r.height/2)*a+(t.y+t.height/2)}}function parseSVG(r,t){var n=new SVGParser;return n.parse(r,t)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function r(t,n){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=t,this._parsedXML=parseXML(n)}return r.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=createRegions(t.named),o=n.regions,a=n.regionsMap;this._regions=o,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(t){var n,o;try{n=t&&parseSVG(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},o=n.root,assert(o!=null)}catch($){throw new Error(`Invalid svg format
`+$.message)}var a=new Group$4;a.add(o),a.isGeoSVGGraphicRoot=!0;var l=n.width,d=n.height,g=n.viewBoxRect,y=this._boundingRect;if(!y){var S=void 0,x=void 0,w=void 0,c=void 0;if(l!=null?(S=0,w=l):g&&(S=g.x,w=g.width),d!=null?(x=0,c=d):g&&(x=g.y,c=g.height),S==null||x==null){var A=o.getBoundingRect();S==null&&(S=A.x,w=A.width),x==null&&(x=A.y,c=A.height)}y=this._boundingRect=new BoundingRect$1(S,x,w,c)}if(g){var R=makeViewBoxTransform(g,y);o.scaleX=o.scaleY=R.scale,o.x=R.x,o.y=R.y}a.setClipPath(new Rect$3({shape:y.plain()}));var L=[];return each$f(n.named,function($){REGION_AVAILABLE_SVG_TAG_MAP.get($.svgNodeTagLower)!=null&&(L.push($),setSilent($.el))}),{root:a,boundingRect:y,named:L}},r.prototype.useGraphic=function(t){var n=this._usedGraphicMap,o=n.get(t);return o||(o=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(t,o),o)},r.prototype.freeGraphic=function(t){var n=this._usedGraphicMap,o=n.get(t);o&&(n.removeKey(t),this._freedGraphics.push(o))},r}();function setSilent(r){r.silent=!1,r.isGroup&&r.traverse(function(t){t.silent=!1})}function createRegions(r){var t=[],n=createHashMap();return each$f(r,function(o){if(o.namedFrom==null){var a=new GeoSVGRegion(o.name,o.el);t.push(a),n.set(o.name,a)}}),{regions:t,regionsMap:n}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(r,t){if(r==="china"){for(var n=0;n<t.length;n++)if(t[n].name===nanhaiName)return;t.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(o){return{type:"polygon",exterior:o}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(r,t){if(r==="china"){var n=coordsOffsetMap[t.name];if(n){var o=t.getCenter();o[0]+=n[0]/10.5,o[1]+=-n[1]/(10.5/.75),t.setCenter(o)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(r,t){r==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function r(t,n,o){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=t,this._specialAreas=o,this._geoJSON=parseInput(n)}return r.prototype.load=function(t,n){n=n||DEFAULT_NAME_PROPERTY;var o=this._parsedMap.get(n);if(!o){var a=this._parseToRegions(n);o=this._parsedMap.set(n,{regions:a,boundingRect:calculateBoundingRect(a)})}var l=createHashMap(),d=[];return each$f(o.regions,function(g){var y=g.name;t&&hasOwn(t,y)&&(g=g.cloneShallow(y=t[y])),d.push(g),l.set(y,g)}),{regions:d,boundingRect:o.boundingRect||new BoundingRect$1(0,0,0,0),regionsMap:l}},r.prototype._parseToRegions=function(t){var n=this._mapName,o=this._geoJSON,a;try{a=o?parseGeoJSON(o,t):[]}catch(l){throw new Error(`Invalid geoJson format
`+l.message)}return fixNanhai(n,a),each$f(a,function(l){var d=l.name;fixTextCoords(n,l),fixDiaoyuIsland(n,l);var g=this._specialAreas&&this._specialAreas[d];g&&l.transformTo(g.left,g.top,g.width,g.height)},this),a},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function calculateBoundingRect(r){for(var t,n=0;n<r.length;n++){var o=r[n].getBoundingRect();t=t||o.clone(),t.union(o)}return t}function parseInput(r){return isString(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var storage=createHashMap();const geoSourceManager={registerMap:function(r,t,n){if(t.svg){var o=new GeoSVGResource(r,t.svg);storage.set(r,o)}else{var a=t.geoJson||t.geoJSON;a&&!t.features?n=t.specialAreas:a=t;var o=new GeoJSONResource(r,a,n);storage.set(r,o)}},getGeoResource:function(r){return storage.get(r)},getMapForUser:function(r){var t=storage.get(r);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(r,t,n){var o=storage.get(r);if(o)return o.load(t,n)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(r){var t=r.getItemStyle(),n=r.get("areaColor");return n!=null&&(t.fill=n),t}function fixLineStyle(r){var t=r.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var MapDraw=function(){function r(t){var n=new Group$4;this.uid=getUID("ec_map_draw"),this._controller=new RoamController$1(t.getZr()),this._controllerHost={target:n},this.group=n,n.add(this._regionsGroup=new Group$4),n.add(this._svgGroup=new Group$4)}return r.prototype.draw=function(t,n,o,a,l){var d=t.mainType==="geo",g=t.getData&&t.getData();d&&n.eachComponent({mainType:"series",subType:"map"},function(O){!g&&O.getHostGeoModel()===t&&(g=O.getData())});var y=t.coordinateSystem,S=this._regionsGroup,x=this.group,w=y.getTransformInfo(),c=w.raw,A=w.roam,R=!S.childAt(0)||l;R?(x.x=A.x,x.y=A.y,x.scaleX=A.scaleX,x.scaleY=A.scaleY,x.dirty()):updateProps$1(x,A,t);var L=g&&g.getVisual("visualMeta")&&g.getVisual("visualMeta").length>0,$={api:o,geo:y,mapOrGeoModel:t,data:g,isVisualEncodedByVisualMap:L,isGeo:d,transformInfoRaw:c};y.resourceType==="geoJSON"?this._buildGeoJSON($):y.resourceType==="geoSVG"&&this._buildSVG($),this._updateController(t,n,o),this._updateMapSelectHandler(t,S,o,a)},r.prototype._buildGeoJSON=function(t){var n=this._regionsGroupByName=createHashMap(),o=createHashMap(),a=this._regionsGroup,l=t.transformInfoRaw,d=t.mapOrGeoModel,g=t.data,y=t.geo.projection,S=y&&y.stream;function x(A,R){return R&&(A=R(A)),A&&[A[0]*l.scaleX+l.x,A[1]*l.scaleY+l.y]}function w(A){for(var R=[],L=!S&&y&&y.project,$=0;$<A.length;++$){var O=x(A[$],L);O&&R.push(O)}return R}function c(A){return{shape:{points:w(A)}}}a.removeAll(),each$f(t.geo.regions,function(A){var R=A.name,L=n.get(R),$=o.get(R)||{},O=$.dataIdx,z=$.regionModel;L||(L=n.set(R,new Group$4),a.add(L),O=g?g.indexOfName(R):null,z=t.isGeo?d.getRegionModel(R):g?g.getItemModel(O):null,o.set(R,{dataIdx:O,regionModel:z}));var V=[],j=[];each$f(A.geometries,function(q){if(q.type==="polygon"){var ie=[q.exterior].concat(q.interiors||[]);S&&(ie=projectPolys(ie,S)),each$f(ie,function(oe){V.push(new Polygon$1(c(oe)))})}else{var te=q.points;S&&(te=projectPolys(te,S,!0)),each$f(te,function(oe){j.push(new Polyline$3(c(oe)))})}});var K=x(A.getCenter(),y&&y.project);function Z(q,ie){if(q.length){var te=new CompoundPath$1({culling:!0,segmentIgnoreThreshold:1,shape:{paths:q}});L.add(te),applyOptionStyleForRegion(t,te,O,z),resetLabelForRegion(t,te,R,z,d,O,K),ie&&(fixLineStyle(te),each$f(te.states,fixLineStyle))}}Z(V),Z(j,!0)}),n.each(function(A,R){var L=o.get(R),$=L.dataIdx,O=L.regionModel;resetEventTriggerForRegion(t,A,R,O,d,$),resetTooltipForRegion(t,A,R,O,d),resetStateTriggerForRegion(t,A,R,O,d)},this)},r.prototype._buildSVG=function(t){var n=t.geo.map,o=t.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var a=this._svgDispatcherMap=createHashMap(),l=!1;each$f(this._svgGraphicRecord.named,function(d){var g=d.name,y=t.mapOrGeoModel,S=t.data,x=d.svgNodeTagLower,w=d.el,c=S?S.indexOfName(g):null,A=y.getRegionModel(g);if(OPTION_STYLE_ENABLED_TAG_MAP.get(x)!=null&&w instanceof Displayable$1&&applyOptionStyleForRegion(t,w,c,A),w instanceof Displayable$1&&(w.culling=!0),w.z2EmphasisLift=0,!d.namedFrom&&(LABEL_HOST_MAP.get(x)!=null&&resetLabelForRegion(t,w,g,A,y,c,null),resetEventTriggerForRegion(t,w,g,A,y,c),resetTooltipForRegion(t,w,g,A,y),STATE_TRIGGER_TAG_MAP.get(x)!=null)){var R=resetStateTriggerForRegion(t,w,g,A,y);R==="self"&&(l=!0);var L=a.get(g)||a.set(g,[]);L.push(w)}},this),this._enableBlurEntireSVG(l,t)},r.prototype._enableBlurEntireSVG=function(t,n){if(t&&n.isGeo){var o=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),a=o.opacity;this._svgGraphicRecord.root.traverse(function(l){if(!l.isGroup){setDefaultStateProxy(l);var d=l.ensureState("blur").style||{};d.opacity==null&&a!=null&&(d.opacity=a),l.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(t,n){if(t==null)return[];var o=n.coordinateSystem;if(o.resourceType==="geoJSON"){var a=this._regionsGroupByName;if(a){var l=a.get(t);return l?[l]:[]}}else if(o.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},r.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},r.prototype._useSVG=function(t){var n=geoSourceManager.getGeoResource(t);if(n&&n.type==="geoSVG"){var o=n.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=t}},r.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var n=geoSourceManager.getGeoResource(t);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(t,n,o){var a=t.coordinateSystem,l=this._controller,d=this._controllerHost;d.zoomLimit=t.get("scaleLimit"),d.zoom=a.getZoom(),l.enable(t.get("roam")||!1);var g=t.mainType;function y(){var S={type:"geoRoam",componentType:g};return S[g+"Id"]=t.id,S}l.off("pan").on("pan",function(S){this._mouseDownFlag=!1,updateViewOnPan(d,S.dx,S.dy),o.dispatchAction(extend(y(),{dx:S.dx,dy:S.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(S){this._mouseDownFlag=!1,updateViewOnZoom(d,S.scale,S.originX,S.originY),o.dispatchAction(extend(y(),{zoom:S.scale,originX:S.originX,originY:S.originY,animation:{duration:0}}))},this),l.setPointerChecker(function(S,x,w){return a.containPoint([x,w])&&!onIrrelevantElement(S,o,t)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var n=t.getTextContent();n&&(n.ignore=mapLabelRaw(n).ignore)})},r.prototype._updateMapSelectHandler=function(t,n,o,a){var l=this;n.off("mousedown"),n.off("click"),t.get("selectedMode")&&(n.on("mousedown",function(){l._mouseDownFlag=!0}),n.on("click",function(d){l._mouseDownFlag&&(l._mouseDownFlag=!1)}))},r}();function applyOptionStyleForRegion(r,t,n,o){var a=o.getModel("itemStyle"),l=o.getModel(["emphasis","itemStyle"]),d=o.getModel(["blur","itemStyle"]),g=o.getModel(["select","itemStyle"]),y=getFixedItemStyle(a),S=getFixedItemStyle(l),x=getFixedItemStyle(g),w=getFixedItemStyle(d),c=r.data;if(c){var A=c.getItemVisual(n,"style"),R=c.getItemVisual(n,"decal");r.isVisualEncodedByVisualMap&&A.fill&&(y.fill=A.fill),R&&(y.decal=createOrUpdatePatternFromDecal(R,r.api))}t.setStyle(y),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=S,t.ensureState("select").style=x,t.ensureState("blur").style=w,setDefaultStateProxy(t)}function resetLabelForRegion(r,t,n,o,a,l,d){var g=r.data,y=r.isGeo,S=g&&isNaN(g.get(g.mapDimension("value"),l)),x=g&&g.getItemLayout(l);if(y||S||x&&x.showLabel){var w=y?n:l,c=void 0;(!g||l>=0)&&(c=a);var A=d?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(t,getLabelStatesModels(o),{labelFetcher:c,labelDataIndex:w,defaultText:n},A);var R=t.getTextContent();if(R&&(mapLabelRaw(R).ignore=R.ignore,t.textConfig&&d)){var L=t.getBoundingRect().clone();t.textConfig.layoutRect=L,t.textConfig.position=[(d[0]-L.x)/L.width*100+"%",(d[1]-L.y)/L.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function resetEventTriggerForRegion(r,t,n,o,a,l){r.data?r.data.setItemGraphicEl(l,t):getECData(t).eventData={componentType:"geo",componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:n,region:o&&o.option||{}}}function resetTooltipForRegion(r,t,n,o,a){r.data||setTooltipConfig({el:t,componentModel:a,itemName:n,itemTooltipOption:o.get("tooltip")})}function resetStateTriggerForRegion(r,t,n,o,a){t.highDownSilentOnTouch=!!a.get("selectedMode");var l=o.getModel("emphasis"),d=l.get("focus");return toggleHoverEmphasis(t,d,l.get("blurScope"),l.get("disabled")),r.isGeo&&enableComponentHighDownFeatures(t,a,n),d}function projectPolys(r,t,n){var o=[],a;function l(){a=[]}function d(){a.length&&(o.push(a),a=[])}var g=t({polygonStart:l,polygonEnd:d,lineStart:l,lineEnd:d,point:function(y,S){isFinite(y)&&isFinite(S)&&a.push([y,S])},sphere:function(){}});return!n&&g.polygonStart(),each$f(r,function(y){g.lineStart();for(var S=0;S<y.length;S++)g.point(y[S][0],y[S][1]);g.lineEnd()}),!n&&g.polygonEnd(),o}const MapDraw$1=MapDraw;var MapView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a,l){if(!(l&&l.type==="mapToggleSelect"&&l.from===this.uid)){var d=this.group;if(d.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&l&&l.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),l&&l.type==="geoRoam"&&l.componentType==="series"&&l.seriesId===n.id){var g=this._mapDraw;g&&d.add(g.group)}else if(n.needsDrawMap){var g=this._mapDraw||new MapDraw$1(a);d.add(g.group),g.draw(n,o,a,this,l),this._mapDraw=g}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&o.getComponent("legend")&&this._renderSymbols(n,o,a)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(n,o,a){var l=n.originalData,d=this.group;l.each(l.mapDimension("value"),function(g,y){if(!isNaN(g)){var S=l.getItemLayout(y);if(!(!S||!S.point)){var x=S.point,w=S.offset,c=new Circle$1({style:{fill:n.getData().getVisual("style").fill},shape:{cx:x[0]+w*9,cy:x[1],r:3},silent:!0,z2:8+(w?0:Z2_EMPHASIS_LIFT+1)});if(!w){var A=n.mainSeries.getData(),R=l.getName(y),L=A.indexOfName(R),$=l.getItemModel(y),O=$.getModel("label"),z=A.getItemGraphicEl(L);setLabelStyle(c,getLabelStatesModels($),{labelFetcher:{getFormattedLabel:function(V,j){return n.getFormattedLabel(L,j)}},defaultText:R}),c.disableLabelAnimation=!0,O.get("position")||c.setTextConfig({position:"bottom"}),z.onHoverStateChange=function(V){setStatesFlag(c,V)}}d.add(c)}}})},t.type="map",t}(ChartView$1);const MapView$1=MapView;var MapSeries=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(o){if(o!=null){var a=this.getData().getName(o),l=this.coordinateSystem,d=l.getRegion(a);return d&&l.dataToPoint(d.getCenter())}},n}return t.prototype.getInitialData=function(n){for(var o=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),a=createHashMap(),l=[],d=0,g=o.count();d<g;d++){var y=o.getName(d);a.set(y,!0)}var S=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(S.regions,function(x){var w=x.name;a.get(w)||l.push(w)}),o.appendValues([],l),o},t.prototype.getHostGeoModel=function(){var n=this.option.geoIndex;return n!=null?this.ecModel.getComponent("geo",n):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(n){var o=this.getData();return o.get(o.mapDimension("value"),n)},t.prototype.getRegionModel=function(n){var o=this.getData();return o.getItemModel(o.indexOfName(n))},t.prototype.formatTooltip=function(n,o,a){for(var l=this.getData(),d=this.getRawValue(n),g=l.getName(n),y=this.seriesGroup,S=[],x=0;x<y.length;x++){var w=y[x].originalData.indexOfName(g),c=l.mapDimension("value");isNaN(y[x].originalData.get(c,w))||S.push(y[x].name)}return createTooltipMarkup("section",{header:S.join(", "),noHeader:!S.length,blocks:[createTooltipMarkup("nameValue",{name:g,value:d})]})},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.getLegendIcon=function(n){var o=n.icon||"roundRect",a=createSymbol$1(o,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return a.setStyle(n.itemStyle),a.style.stroke="none",o.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(SeriesModel$1);const MapSeries$1=MapSeries;function dataStatistics(r,t){var n={};return each$f(r,function(o){o.each(o.mapDimension("value"),function(a,l){var d="ec-"+o.getName(l);n[d]=n[d]||[],isNaN(a)||n[d].push(a)})}),r[0].map(r[0].mapDimension("value"),function(o,a){for(var l="ec-"+r[0].getName(a),d=0,g=1/0,y=-1/0,S=n[l].length,x=0;x<S;x++)g=Math.min(g,n[l][x]),y=Math.max(y,n[l][x]),d+=n[l][x];var w;return t==="min"?w=g:t==="max"?w=y:t==="average"?w=d/S:w=d,S===0?NaN:w})}function mapDataStatistic(r){var t={};r.eachSeriesByType("map",function(n){var o=n.getHostGeoModel(),a=o?"o"+o.id:"i"+n.getMapType();(t[a]=t[a]||[]).push(n)}),each$f(t,function(n,o){for(var a=dataStatistics(map$1(n,function(d){return d.getData()}),n[0].get("mapValueCalculation")),l=0;l<n.length;l++)n[l].originalData=n[l].getData();for(var l=0;l<n.length;l++)n[l].seriesGroup=n,n[l].needsDrawMap=l===0&&!n[l].getHostGeoModel(),n[l].setData(a.cloneShallow()),n[l].mainSeries=n[0]})}function mapSymbolLayout(r){var t={};r.eachSeriesByType("map",function(n){var o=n.getMapType();if(!(n.getHostGeoModel()||t[o])){var a={};each$f(n.seriesGroup,function(d){var g=d.coordinateSystem,y=d.originalData;d.get("showLegendSymbol")&&r.getComponent("legend")&&y.each(y.mapDimension("value"),function(S,x){var w=y.getName(x),c=g.getRegion(w);if(!(!c||isNaN(S))){var A=a[w]||0,R=g.dataToPoint(c.getCenter());a[w]=A+1,y.setItemLayout(x,{point:R,offset:A})}})});var l=n.getData();l.each(function(d){var g=l.getName(d),y=l.getItemLayout(d)||{};y.showLabel=!a[g],l.setItemLayout(d,y)}),t[o]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(r){__extends(t,r);function t(n){var o=r.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable$1,o._rawTransformable=new Transformable$1,o.name=n,o}return t.prototype.setBoundingRect=function(n,o,a,l){return this._rect=new BoundingRect$1(n,o,a,l),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(n,o,a,l){this._transformTo(n,o,a,l),this._viewRect=new BoundingRect$1(n,o,a,l)},t.prototype._transformTo=function(n,o,a,l){var d=this.getBoundingRect(),g=this._rawTransformable;g.transform=d.calculateTransform(new BoundingRect$1(n,o,a,l));var y=g.parent;g.parent=null,g.decomposeTransform(),g.parent=y,this._updateTransform()},t.prototype.setCenter=function(n,o){n&&(this._center=[parsePercent(n[0],o.getWidth()),parsePercent(n[1],o.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(n){n=n||1;var o=this.zoomLimit;o&&(o.max!=null&&(n=Math.min(o.max,n)),o.min!=null&&(n=Math.max(o.min,n))),this._zoom=n,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),o=n.x+n.width/2,a=n.y+n.height/2;return[o,a]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,a=this.getDefaultCenter(),l=this.getCenter(),d=this.getZoom();l=applyTransform$1([],l,n),a=applyTransform$1([],a,n),o.originX=l[0],o.originY=l[1],o.x=a[0]-l[0],o.y=a[1]-l[1],o.scaleX=o.scaleY=d,this._updateTransform()},t.prototype._updateTransform=function(){var n=this._roamTransformable,o=this._rawTransformable;o.parent=n,n.updateTransform(),o.updateTransform(),copy(this.transform||(this.transform=[]),o.transform||create$1()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var n=this._rawTransformable,o=this._roamTransformable,a=new Transformable$1;return a.transform=o.transform,a.decomposeTransform(),{roam:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},t.prototype.dataToPoint=function(n,o,a){var l=o?this._rawTransform:this.transform;return a=a||[],l?v2ApplyTransform(a,n,l):copy$1(a,n)},t.prototype.pointToData=function(n){var o=this.invTransform;return o?v2ApplyTransform([],n,o):[n[0],n[1]]},t.prototype.convertToPixel=function(n,o,a){var l=getCoordSys$4(o);return l===this?l.dataToPoint(a):null},t.prototype.convertFromPixel=function(n,o,a){var l=getCoordSys$4(o);return l===this?l.pointToData(a):null},t.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},t.dimensions=["x","y"],t}(Transformable$1);function getCoordSys$4(r){var t=r.seriesModel;return t?t.coordinateSystem:null}const View$1=View;var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this,n)||this;l.dimensions=geo2DDimensions,l.type="geo",l._nameCoordMap=createHashMap(),l.map=o;var d=a.projection,g=geoSourceManager.load(o,a.nameMap,a.nameProperty),y=geoSourceManager.getGeoResource(o);l.resourceType=y?y.type:null;var S=l.regions=g.regions,x=GEO_DEFAULT_PARAMS[y.type];l._regionsMap=g.regionsMap,l.regions=g.regions,l.projection=d;var w;if(d)for(var c=0;c<S.length;c++){var A=S[c].getBoundingRect(d);w=w||A.clone(),w.union(A)}else w=g.boundingRect;return l.setBoundingRect(w.x,w.y,w.width,w.height),l.aspectScale=d?1:retrieve2(a.aspectScale,x.aspectScale),l._invertLongitute=d?!1:x.invertLongitute,l}return t.prototype._transformTo=function(n,o,a,l){var d=this.getBoundingRect(),g=this._invertLongitute;d=d.clone(),g&&(d.y=-d.y-d.height);var y=this._rawTransformable;y.transform=d.calculateTransform(new BoundingRect$1(n,o,a,l));var S=y.parent;y.parent=null,y.decomposeTransform(),y.parent=S,g&&(y.scaleY=-y.scaleY),this._updateTransform()},t.prototype.getRegion=function(n){return this._regionsMap.get(n)},t.prototype.getRegionByCoord=function(n){for(var o=this.regions,a=0;a<o.length;a++){var l=o[a];if(l.type==="geoJSON"&&l.contain(n))return o[a]}},t.prototype.addGeoCoord=function(n,o){this._nameCoordMap.set(n,o)},t.prototype.getGeoCoord=function(n){var o=this._regionsMap.get(n);return this._nameCoordMap.get(n)||o&&o.getCenter()},t.prototype.dataToPoint=function(n,o,a){if(isString(n)&&(n=this.getGeoCoord(n)),n){var l=this.projection;return l&&(n=l.project(n)),n&&this.projectedToPoint(n,o,a)}},t.prototype.pointToData=function(n){var o=this.projection;return o&&(n=o.unproject(n)),n&&this.pointToProjected(n)},t.prototype.pointToProjected=function(n){return r.prototype.pointToData.call(this,n)},t.prototype.projectedToPoint=function(n,o,a){return r.prototype.dataToPoint.call(this,n,o,a)},t.prototype.convertToPixel=function(n,o,a){var l=getCoordSys$3(o);return l===this?l.dataToPoint(a):null},t.prototype.convertFromPixel=function(n,o,a){var l=getCoordSys$3(o);return l===this?l.pointToData(a):null},t}(View$1);mixin(Geo,View$1);function getCoordSys$3(r){var t=r.geoModel,n=r.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}const Geo$1=Geo;function resizeGeo(r,t){var n=r.get("boundingCoords");if(n!=null){var o=n[0],a=n[1];if(isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])){var l=this.projection;if(l){var d=o[0],g=o[1],y=a[0],S=a[1];o=[1/0,1/0],a=[-1/0,-1/0];var x=function(Z,q,ie,te){for(var oe=ie-Z,re=te-q,he=0;he<=100;he++){var _e=he/100,me=l.project([Z+oe*_e,q+re*_e]);min$1(o,o,me),max$1(a,a,me)}};x(d,g,y,g),x(y,g,y,S),x(y,S,d,S),x(d,S,y,g)}this.setBoundingRect(o[0],o[1],a[0]-o[0],a[1]-o[1])}}var w=this.getBoundingRect(),c=r.get("layoutCenter"),A=r.get("layoutSize"),R=t.getWidth(),L=t.getHeight(),$=w.width/w.height*this.aspectScale,O=!1,z,V;c&&A&&(z=[parsePercent(c[0],R),parsePercent(c[1],L)],V=parsePercent(A,Math.min(R,L)),!isNaN(z[0])&&!isNaN(z[1])&&!isNaN(V)&&(O=!0));var j;if(O)j={},$>1?(j.width=V,j.height=V/$):(j.height=V,j.width=V*$),j.y=z[1]-j.height/2,j.x=z[0]-j.width/2;else{var K=r.getBoxLayoutParams();K.aspect=$,j=getLayoutRect(K,{width:R,height:L})}this.setViewRect(j.x,j.y,j.width,j.height),this.setCenter(r.get("center"),t),this.setZoom(r.get("zoom"))}function setGeoCoords(r,t){each$f(t.get("geoCoord"),function(n,o){r.addGeoCoord(o,n)})}var GeoCreator=function(){function r(){this.dimensions=geo2DDimensions}return r.prototype.create=function(t,n){var o=[];function a(d){return{nameProperty:d.get("nameProperty"),aspectScale:d.get("aspectScale"),projection:d.get("projection")}}t.eachComponent("geo",function(d,g){var y=d.get("map"),S=new Geo$1(y+g,y,extend({nameMap:d.get("nameMap")},a(d)));S.zoomLimit=d.get("scaleLimit"),o.push(S),d.coordinateSystem=S,S.model=d,S.resize=resizeGeo,S.resize(d,n)}),t.eachSeries(function(d){var g=d.get("coordinateSystem");if(g==="geo"){var y=d.get("geoIndex")||0;d.coordinateSystem=o[y]}});var l={};return t.eachSeriesByType("map",function(d){if(!d.getHostGeoModel()){var g=d.getMapType();l[g]=l[g]||[],l[g].push(d)}}),each$f(l,function(d,g){var y=map$1(d,function(x){return x.get("nameMap")}),S=new Geo$1(g,g,extend({nameMap:mergeAll(y)},a(d[0])));S.zoomLimit=retrieve.apply(null,map$1(d,function(x){return x.get("scaleLimit")})),o.push(S),S.resize=resizeGeo,S.resize(d[0],n),each$f(d,function(x){x.coordinateSystem=S,setGeoCoords(S,x)})}),o},r.prototype.getFilledRegions=function(t,n,o,a){for(var l=(t||[]).slice(),d=createHashMap(),g=0;g<l.length;g++)d.set(l[g].name,l[g]);var y=geoSourceManager.load(n,o,a);return each$f(y.regions,function(S){var x=S.name;!d.get(x)&&l.push({name:x})}),l},r}(),geoCreator=new GeoCreator;const geoCreator$1=geoCreator;var GeoModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o,a){var l=geoSourceManager.getGeoResource(n.map);if(l&&l.type==="geoJSON"){var d=n.itemStyle=n.itemStyle||{};"color"in d||(d.color="#eee")}this.mergeDefaultAndTheme(n,a),defaultEmphasis(n,"label",["show"])},t.prototype.optionUpdated=function(){var n=this,o=this.option;o.regions=geoCreator$1.getFilledRegions(o.regions,o.map,o.nameMap,o.nameProperty);var a={};this._optionModelMap=reduce(o.regions||[],function(l,d){var g=d.name;return g&&(l.set(g,new Model$1(d,n,n.ecModel)),d.selected&&(a[g]=!0)),l},createHashMap()),o.selectedMap||(o.selectedMap=a)},t.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new Model$1(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(n,o){var a=this.getRegionModel(n),l=o==="normal"?a.get(["label","formatter"]):a.get(["emphasis","label","formatter"]),d={name:n};if(isFunction(l))return d.status=o,l(d);if(isString(l))return l.replace("{a}",n??"")},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.select=function(n){var o=this.option,a=o.selectedMode;if(a){a!=="multiple"&&(o.selectedMap=null);var l=o.selectedMap||(o.selectedMap={});l[n]=!0}},t.prototype.unSelect=function(n){var o=this.option.selectedMap;o&&(o[n]=!1)},t.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},t.prototype.isSelected=function(n){var o=this.option.selectedMap;return!!(o&&o[n])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(ComponentModel$1);const GeoModel$1=GeoModel;function getCenterCoord(r,t){return r.pointToProjected?r.pointToProjected(t):r.pointToData(t)}function updateCenterAndZoom(r,t,n,o){var a=r.getZoom(),l=r.getCenter(),d=t.zoom,g=r.projectedToPoint?r.projectedToPoint(l):r.dataToPoint(l);if(t.dx!=null&&t.dy!=null&&(g[0]-=t.dx,g[1]-=t.dy,r.setCenter(getCenterCoord(r,g),o)),d!=null){if(n){var y=n.min||0,S=n.max||1/0;d=Math.max(Math.min(a*d,S),y)/a}r.scaleX*=d,r.scaleY*=d;var x=(t.originX-r.x)*(d-1),w=(t.originY-r.y)*(d-1);r.x-=x,r.y-=w,r.updateTransform(),r.setCenter(getCenterCoord(r,g),o),r.setZoom(d*a)}return{center:r.getCenter(),zoom:r.getZoom()}}var GeoView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.focusBlurEnabled=!0,n}return t.prototype.init=function(n,o){this._api=o},t.prototype.render=function(n,o,a,l){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw$1(a));var d=this._mapDraw;d.draw(n,o,a,this,l),d.group.on("click",this._handleRegionClick,this),d.group.silent=n.get("silent"),this.group.add(d.group),this.updateSelectStatus(n,o,a)},t.prototype._handleRegionClick=function(n){var o;findEventDispatcher(n.target,function(a){return(o=getECData(a).eventData)!=null},!0),o&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:o.name})},t.prototype.updateSelectStatus=function(n,o,a){var l=this;this._mapDraw.group.traverse(function(d){var g=getECData(d).eventData;if(g)return l._model.isSelected(g.name)?a.enterSelect(d):a.leaveSelect(d),!0})},t.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(ComponentView$1);const GeoView$1=GeoView;function registerMap(r,t,n){geoSourceManager.registerMap(r,t,n)}function install$J(r){r.registerCoordinateSystem("geo",geoCreator$1),r.registerComponentModel(GeoModel$1),r.registerComponentView(GeoView$1),r.registerImpl("registerMap",registerMap),r.registerImpl("getMap",function(n){return geoSourceManager.getMapForUser(n)});function t(n,o){o.update="geo:updateSelectStatus",r.registerAction(o,function(a,l){var d={},g=[];return l.eachComponent({mainType:"geo",query:a},function(y){y[n](a.name);var S=y.coordinateSystem;each$f(S.regions,function(w){d[w.name]=y.isSelected(w.name)||!1});var x=[];each$f(d,function(w,c){d[c]&&x.push(c)}),g.push({geoIndex:y.componentIndex,name:x})}),{selected:d,allSelected:g,name:a.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,o,a){var l=n.componentType||"series";o.eachComponent({mainType:l,query:n},function(d){var g=d.coordinateSystem;if(g.type==="geo"){var y=updateCenterAndZoom(g,n,d.get("scaleLimit"),a);d.setCenter&&d.setCenter(y.center),d.setZoom&&d.setZoom(y.zoom),l==="series"&&each$f(d.seriesGroup,function(S){S.setCenter(y.center),S.setZoom(y.zoom)})}})})}function install$I(r){use(install$J),r.registerChartView(MapView$1),r.registerSeriesModel(MapSeries$1),r.registerLayout(mapSymbolLayout),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",r.registerAction)}function init(r){var t=r;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[t],o,a;o=n.pop();)if(a=o.children,o.isExpand&&a.length)for(var l=a.length,d=l-1;d>=0;d--){var g=a[d];g.hierNode={defaultAncestor:null,ancestor:g,prelim:0,modifier:0,change:0,shift:0,i:d,thread:null},n.push(g)}}function firstWalk(r,t){var n=r.isExpand?r.children:[],o=r.parentNode.children,a=r.hierNode.i?o[r.hierNode.i-1]:null;if(n.length){executeShifts(r);var l=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;a?(r.hierNode.prelim=a.hierNode.prelim+t(r,a),r.hierNode.modifier=r.hierNode.prelim-l):r.hierNode.prelim=l}else a&&(r.hierNode.prelim=a.hierNode.prelim+t(r,a));r.parentNode.hierNode.defaultAncestor=apportion(r,a,r.parentNode.hierNode.defaultAncestor||o[0],t)}function secondWalk(r){var t=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:t},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function separation(r){return arguments.length?r:defaultSeparation}function radialCoordinate(r,t){return r-=Math.PI/2,{x:t*Math.cos(r),y:t*Math.sin(r)}}function getViewRect$4(r,t){return getLayoutRect(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function executeShifts(r){for(var t=r.children,n=t.length,o=0,a=0;--n>=0;){var l=t[n];l.hierNode.prelim+=o,l.hierNode.modifier+=o,a+=l.hierNode.change,o+=l.hierNode.shift+a}}function apportion(r,t,n,o){if(t){for(var a=r,l=r,d=l.parentNode.children[0],g=t,y=a.hierNode.modifier,S=l.hierNode.modifier,x=d.hierNode.modifier,w=g.hierNode.modifier;g=nextRight(g),l=nextLeft(l),g&&l;){a=nextRight(a),d=nextLeft(d),a.hierNode.ancestor=r;var c=g.hierNode.prelim+w-l.hierNode.prelim-S+o(g,l);c>0&&(moveSubtree(nextAncestor(g,r,n),r,c),S+=c,y+=c),w+=g.hierNode.modifier,S+=l.hierNode.modifier,y+=a.hierNode.modifier,x+=d.hierNode.modifier}g&&!nextRight(a)&&(a.hierNode.thread=g,a.hierNode.modifier+=w-y),l&&!nextLeft(d)&&(d.hierNode.thread=l,d.hierNode.modifier+=S-x,n=r)}return n}function nextRight(r){var t=r.children;return t.length&&r.isExpand?t[t.length-1]:r.hierNode.thread}function nextLeft(r){var t=r.children;return t.length&&r.isExpand?t[0]:r.hierNode.thread}function nextAncestor(r,t,n){return r.hierNode.ancestor.parentNode===t.parentNode?r.hierNode.ancestor:n}function moveSubtree(r,t,n){var o=n/(t.hierNode.i-r.hierNode.i);t.hierNode.change-=o,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,r.hierNode.change+=o}function defaultSeparation(r,t){return r.parentNode===t.parentNode?1:2}var TreeEdgeShape=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),TreePath=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new TreeEdgeShape},t.prototype.buildPath=function(n,o){var a=o.childPoints,l=a.length,d=o.parentPoint,g=a[0],y=a[l-1];if(l===1){n.moveTo(d[0],d[1]),n.lineTo(g[0],g[1]);return}var S=o.orient,x=S==="TB"||S==="BT"?0:1,w=1-x,c=parsePercent(o.forkPosition,1),A=[];A[x]=d[x],A[w]=d[w]+(y[w]-d[w])*c,n.moveTo(d[0],d[1]),n.lineTo(A[0],A[1]),n.moveTo(g[0],g[1]),A[x]=g[x],n.lineTo(A[0],A[1]),A[x]=y[x],n.lineTo(A[0],A[1]),n.lineTo(y[0],y[1]);for(var R=1;R<l-1;R++){var L=a[R];n.moveTo(L[0],L[1]),A[x]=L[x],n.lineTo(A[0],A[1])}},t}(Path$1),TreeView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._mainGroup=new Group$4,n}return t.prototype.init=function(n,o){this._controller=new RoamController$1(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(n,o,a){var l=n.getData(),d=n.layoutInfo,g=this._mainGroup,y=n.get("layout");y==="radial"?(g.x=d.x+d.width/2,g.y=d.y+d.height/2):(g.x=d.x,g.y=d.y),this._updateViewCoordSys(n,a),this._updateController(n,o,a);var S=this._data;l.diff(S).add(function(x){symbolNeedsDraw(l,x)&&updateNode(l,x,null,g,n)}).update(function(x,w){var c=S.getItemGraphicEl(w);if(!symbolNeedsDraw(l,x)){c&&removeNode(S,w,c,g,n);return}updateNode(l,x,c,g,n)}).remove(function(x){var w=S.getItemGraphicEl(x);w&&removeNode(S,x,w,g,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&l.eachItemGraphicEl(function(x,w){x.off("click").on("click",function(){a.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:w})})}),this._data=l},t.prototype._updateViewCoordSys=function(n,o){var a=n.getData(),l=[];a.each(function(w){var c=a.getItemLayout(w);c&&!isNaN(c.x)&&!isNaN(c.y)&&l.push([+c.x,+c.y])});var d=[],g=[];fromPoints(l,d,g);var y=this._min,S=this._max;g[0]-d[0]===0&&(d[0]=y?y[0]:d[0]-1,g[0]=S?S[0]:g[0]+1),g[1]-d[1]===0&&(d[1]=y?y[1]:d[1]-1,g[1]=S?S[1]:g[1]+1);var x=n.coordinateSystem=new View$1;x.zoomLimit=n.get("scaleLimit"),x.setBoundingRect(d[0],d[1],g[0]-d[0],g[1]-d[1]),x.setCenter(n.get("center"),o),x.setZoom(n.get("zoom")),this.group.attr({x:x.x,y:x.y,scaleX:x.scaleX,scaleY:x.scaleY}),this._min=d,this._max=g},t.prototype._updateController=function(n,o,a){var l=this,d=this._controller,g=this._controllerHost,y=this.group;d.setPointerChecker(function(S,x,w){var c=y.getBoundingRect();return c.applyTransform(y.transform),c.contain(x,w)&&!onIrrelevantElement(S,a,n)}),d.enable(n.get("roam")),g.zoomLimit=n.get("scaleLimit"),g.zoom=n.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(S){updateViewOnPan(g,S.dx,S.dy),a.dispatchAction({seriesId:n.id,type:"treeRoam",dx:S.dx,dy:S.dy})}).on("zoom",function(S){updateViewOnZoom(g,S.scale,S.originX,S.originY),a.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:S.scale,originX:S.originX,originY:S.originY}),l._updateNodeAndLinkScale(n),a.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(n){var o=n.getData(),a=this._getNodeGlobalScale(n);o.eachItemGraphicEl(function(l,d){l.setSymbolScale(a)})},t.prototype._getNodeGlobalScale=function(n){var o=n.coordinateSystem;if(o.type!=="view")return 1;var a=this._nodeScaleRatio,l=o.scaleX||1,d=o.getZoom(),g=(d-1)*a+1;return g/l},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ChartView$1);function symbolNeedsDraw(r,t){var n=r.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)}function updateNode(r,t,n,o,a){var l=!n,d=r.tree.getNodeByDataIndex(t),g=d.getModel(),y=d.getVisual("style").fill,S=d.isExpand===!1&&d.children.length!==0?y:"#fff",x=r.tree.root,w=d.parentNode===x?d:d.parentNode||d,c=r.getItemGraphicEl(w.dataIndex),A=w.getLayout(),R=c?{x:c.__oldX,y:c.__oldY,rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:A,L=d.getLayout();l?(n=new SymbolClz(r,t,null,{symbolInnerColor:S,useNameLabel:!0}),n.x=R.x,n.y=R.y):n.updateData(r,t,null,{symbolInnerColor:S,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=L.rawX,n.__radialRawY=L.rawY,o.add(n),r.setItemGraphicEl(t,n),n.__oldX=n.x,n.__oldY=n.y,updateProps$1(n,{x:L.x,y:L.y},a);var $=n.getSymbolPath();if(a.get("layout")==="radial"){var O=x.children[0],z=O.getLayout(),V=O.children.length,j=void 0,K=void 0;if(L.x===z.x&&d.isExpand===!0&&O.children.length){var Z={x:(O.children[0].getLayout().x+O.children[V-1].getLayout().x)/2,y:(O.children[0].getLayout().y+O.children[V-1].getLayout().y)/2};j=Math.atan2(Z.y-z.y,Z.x-z.x),j<0&&(j=Math.PI*2+j),K=Z.x<z.x,K&&(j=j-Math.PI)}else j=Math.atan2(L.y-z.y,L.x-z.x),j<0&&(j=Math.PI*2+j),d.children.length===0||d.children.length!==0&&d.isExpand===!1?(K=L.x<z.x,K&&(j=j-Math.PI)):(K=L.x>z.x,K||(j=j-Math.PI));var q=K?"left":"right",ie=g.getModel("label"),te=ie.get("rotate"),oe=te*(Math.PI/180),re=$.getTextContent();re&&($.setTextConfig({position:ie.get("position")||q,rotation:te==null?-j:oe,origin:"center"}),re.setStyle("verticalAlign","middle"))}var he=g.get(["emphasis","focus"]),_e=he==="relative"?concatArray(d.getAncestorsIndices(),d.getDescendantIndices()):he==="ancestor"?d.getAncestorsIndices():he==="descendant"?d.getDescendantIndices():null;_e&&(getECData(n).focus=_e),drawEdge(a,d,x,n,R,A,L,o),n.__edge&&(n.onHoverStateChange=function(me){if(me!=="blur"){var be=d.parentNode&&r.getItemGraphicEl(d.parentNode.dataIndex);be&&be.hoverState===HOVER_STATE_BLUR||setStatesFlag(n.__edge,me)}})}function drawEdge(r,t,n,o,a,l,d,g){var y=t.getModel(),S=r.get("edgeShape"),x=r.get("layout"),w=r.getOrient(),c=r.get(["lineStyle","curveness"]),A=r.get("edgeForkPosition"),R=y.getModel("lineStyle").getLineStyle(),L=o.__edge;if(S==="curve")t.parentNode&&t.parentNode!==n&&(L||(L=o.__edge=new BezierCurve$1({shape:getEdgeShape(x,w,c,a,a)})),updateProps$1(L,{shape:getEdgeShape(x,w,c,l,d)},r));else if(S==="polyline"&&x==="orthogonal"&&t!==n&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var $=t.children,O=[],z=0;z<$.length;z++){var V=$[z].getLayout();O.push([V.x,V.y])}L||(L=o.__edge=new TreePath({shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]],orient:w,forkPosition:A}})),updateProps$1(L,{shape:{parentPoint:[d.x,d.y],childPoints:O}},r)}L&&!(S==="polyline"&&!t.isExpand)&&(L.useStyle(defaults({strokeNoScale:!0,fill:null},R)),setStatesStylesFromModel(L,y,"lineStyle"),setDefaultStateProxy(L),g.add(L))}function removeNodeEdge(r,t,n,o,a){var l=t.tree.root,d=getSourceNode(l,r),g=d.source,y=d.sourceLayout,S=t.getItemGraphicEl(r.dataIndex);if(S){var x=t.getItemGraphicEl(g.dataIndex),w=x.__edge,c=S.__edge||(g.isExpand===!1||g.children.length===1?w:void 0),A=o.get("edgeShape"),R=o.get("layout"),L=o.get("orient"),$=o.get(["lineStyle","curveness"]);c&&(A==="curve"?removeElement(c,{shape:getEdgeShape(R,L,$,y,y),style:{opacity:0}},o,{cb:function(){n.remove(c)},removeOpt:a}):A==="polyline"&&o.get("layout")==="orthogonal"&&removeElement(c,{shape:{parentPoint:[y.x,y.y],childPoints:[[y.x,y.y]]},style:{opacity:0}},o,{cb:function(){n.remove(c)},removeOpt:a}))}}function getSourceNode(r,t){for(var n=t.parentNode===r?t:t.parentNode||t,o;o=n.getLayout(),o==null;)n=n.parentNode===r?n:n.parentNode||n;return{source:n,sourceLayout:o}}function removeNode(r,t,n,o,a){var l=r.tree.getNodeByDataIndex(t),d=r.tree.root,g=getSourceNode(d,l).sourceLayout,y={duration:a.get("animationDurationUpdate"),easing:a.get("animationEasingUpdate")};removeElement(n,{x:g.x+1,y:g.y+1},a,{cb:function(){o.remove(n),r.setItemGraphicEl(t,null)},removeOpt:y}),n.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:y}),l.children.forEach(function(S){removeNodeEdge(S,r,o,a,y)}),removeNodeEdge(l,r,o,a,y)}function getEdgeShape(r,t,n,o,a){var l,d,g,y,S,x,w,c;if(r==="radial"){S=o.rawX,w=o.rawY,x=a.rawX,c=a.rawY;var A=radialCoordinate(S,w),R=radialCoordinate(S,w+(c-w)*n),L=radialCoordinate(x,c+(w-c)*n),$=radialCoordinate(x,c);return{x1:A.x||0,y1:A.y||0,x2:$.x||0,y2:$.y||0,cpx1:R.x||0,cpy1:R.y||0,cpx2:L.x||0,cpy2:L.y||0}}else S=o.x,w=o.y,x=a.x,c=a.y,(t==="LR"||t==="RL")&&(l=S+(x-S)*n,d=w,g=x+(S-x)*n,y=c),(t==="TB"||t==="BT")&&(l=S,d=w+(c-w)*n,g=x,y=c+(w-c)*n);return{x1:S,y1:w,x2:x,y2:c,cpx1:l,cpy1:d,cpx2:g,cpy2:y}}const TreeView$1=TreeView;var inner$e=makeInner();function linkSeriesData(r){var t=r.mainData,n=r.datas;n||(n={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,linkAll(t,n,r),each$f(n,function(o){each$f(t.TRANSFERABLE_METHODS,function(a){o.wrapMethod(a,curry$1(transferInjection,r))})}),t.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,r)),each$f(t.CHANGABLE_METHODS,function(o){t.wrapMethod(o,curry$1(changeInjection,r))}),assert(n[t.dataType]===t)}function transferInjection(r,t){if(isMainData(this)){var n=extend({},inner$e(this).datas);n[this.dataType]=t,linkAll(t,n,r)}else linkSingle(t,this.dataType,inner$e(this).mainData,r);return t}function changeInjection(r,t){return r.struct&&r.struct.update(),t}function cloneShallowInjection(r,t){return each$f(inner$e(t).datas,function(n,o){n!==t&&linkSingle(n.cloneShallow(),o,t,r)}),t}function getLinkedData(r){var t=inner$e(this).mainData;return r==null||t==null?t:inner$e(t).datas[r]}function getLinkedDataAll(){var r=inner$e(this).mainData;return r==null?[{data:r}]:map$1(keys(inner$e(r).datas),function(t){return{type:t,data:inner$e(r).datas[t]}})}function isMainData(r){return inner$e(r).mainData===r}function linkAll(r,t,n){inner$e(r).datas={},each$f(t,function(o,a){linkSingle(o,a,r,n)})}function linkSingle(r,t,n,o){inner$e(n).datas[t]=r,inner$e(r).mainData=n,r.dataType=t,o.struct&&(r[o.structAttr]=o.struct,o.struct[o.datasAttr[t]]=r),r.getLinkedData=getLinkedData,r.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function r(t,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=n}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(t,n,o){isFunction(t)&&(o=n,n=t,t=null),t=t||{},isString(t)&&(t={order:t});var a=t.order||"preorder",l=this[t.attr||"children"],d;a==="preorder"&&(d=n.call(o,this));for(var g=0;!d&&g<l.length;g++)l[g].eachNode(t,n,o);a==="postorder"&&n.call(o,this)},r.prototype.updateDepthAndHeight=function(t){var n=0;this.depth=t;for(var o=0;o<this.children.length;o++){var a=this.children[o];a.updateDepthAndHeight(t+1),a.height>n&&(n=a.height)}this.height=n+1},r.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var n=0,o=this.children,a=o.length;n<a;n++){var l=o[n].getNodeById(t);if(l)return l}},r.prototype.contains=function(t){if(t===this)return!0;for(var n=0,o=this.children,a=o.length;n<a;n++){var l=o[n].contains(t);if(l)return l}},r.prototype.getAncestors=function(t){for(var n=[],o=t?this:this.parentNode;o;)n.push(o),o=o.parentNode;return n.reverse(),n},r.prototype.getAncestorsIndices=function(){for(var t=[],n=this;n;)t.push(n.dataIndex),n=n.parentNode;return t.reverse(),t},r.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(n){t.push(n.dataIndex)}),t},r.prototype.getValue=function(t){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(t||"value"),this.dataIndex)},r.prototype.setLayout=function(t,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,n)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var n=this.hostTree,o=n.data.getItemModel(this.dataIndex);return o.getModel(t)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(t,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,n)},r.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,n=0;n<t.length;++n)if(t[n]===this)return n;return-1}return-1},r.prototype.isAncestorOf=function(t){for(var n=t.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},r.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},r}(),Tree=function(){function r(t){this.type="tree",this._nodes=[],this.hostModel=t}return r.prototype.eachNode=function(t,n,o){this.root.eachNode(t,n,o)},r.prototype.getNodeByDataIndex=function(t){var n=this.data.getRawIndex(t);return this._nodes[n]},r.prototype.getNodeById=function(t){return this.root.getNodeById(t)},r.prototype.update=function(){for(var t=this.data,n=this._nodes,o=0,a=n.length;o<a;o++)n[o].dataIndex=-1;for(var o=0,a=t.count();o<a;o++)n[t.getRawIndex(o)].dataIndex=o},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(t,n,o){var a=new r(n),l=[],d=1;g(t);function g(x,w){var c=x.value;d=Math.max(d,isArray$1(c)?c.length:1),l.push(x);var A=new TreeNode(convertOptionIdName(x.name,""),a);w?addChild(A,w):a.root=A,a._nodes.push(A);var R=x.children;if(R)for(var L=0;L<R.length;L++)g(R[L],A)}a.root.updateDepthAndHeight(0);var y=prepareSeriesDataSchema(l,{coordDimensions:["value"],dimensionsCount:d}).dimensions,S=new SeriesData$1(y,n);return S.initData(l),o&&o(S),linkSeriesData({mainData:S,struct:a,structAttr:"tree"}),a.update(),a},r}();function addChild(r,t){var n=t.children;r.parentNode!==t&&(n.push(r),r.parentNode=t)}const Tree$1=Tree;function retrieveTargetInfo(r,t,n){if(r&&indexOf(t,r.type)>=0){var o=n.getData().tree.root,a=r.targetNode;if(isString(a)&&(a=o.getNodeById(a)),a&&o.contains(a))return{node:a};var l=r.targetNodeId;if(l!=null&&(a=o.getNodeById(l)))return{node:a}}}function getPathToRoot(r){for(var t=[];r;)r=r.parentNode,r&&t.push(r);return t.reverse()}function aboveViewRoot(r,t){var n=getPathToRoot(r);return indexOf(n,t)>=0}function wrapTreePathInfo(r,t){for(var n=[];r;){var o=r.dataIndex;n.push({name:r.name,dataIndex:o,value:t.getRawValue(o)}),r=r.parentNode}return n.reverse(),n}var TreeSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return t.prototype.getInitialData=function(n){var o={name:n.name,children:n.data},a=n.leaves||{},l=new Model$1(a,this,this.ecModel),d=Tree$1.createTree(o,this,g);function g(w){w.wrapMethod("getItemModel",function(c,A){var R=d.getNodeByDataIndex(A);return R&&R.children.length&&R.isExpand||(c.parentModel=l),c})}var y=0;d.eachNode("preorder",function(w){w.depth>y&&(y=w.depth)});var S=n.expandAndCollapse,x=S&&n.initialTreeDepth>=0?n.initialTreeDepth:y;return d.root.eachNode("preorder",function(w){var c=w.hostTree.data.getRawDataItem(w.dataIndex);w.isExpand=c&&c.collapsed!=null?!c.collapsed:w.depth<=x}),d.data},t.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.formatTooltip=function(n,o,a){for(var l=this.getData().tree,d=l.root.children[0],g=l.getNodeByDataIndex(n),y=g.getValue(),S=g.name;g&&g!==d;)S=g.parentNode.name+"."+S,g=g.parentNode;return createTooltipMarkup("nameValue",{name:S,value:y,noValue:isNaN(y)||y==null})},t.prototype.getDataParams=function(n){var o=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(n);return o.treeAncestors=wrapTreePathInfo(a,this),o.collapsed=!a.isExpand,o},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(SeriesModel$1);const TreeSeriesModel$1=TreeSeriesModel;function eachAfter(r,t,n){for(var o=[r],a=[],l;l=o.pop();)if(a.push(l),l.isExpand){var d=l.children;if(d.length)for(var g=0;g<d.length;g++)o.push(d[g])}for(;l=a.pop();)t(l,n)}function eachBefore(r,t){for(var n=[r],o;o=n.pop();)if(t(o),o.isExpand){var a=o.children;if(a.length)for(var l=a.length-1;l>=0;l--)n.push(a[l])}}function treeLayout(r,t){r.eachSeriesByType("tree",function(n){commonLayout(n,t)})}function commonLayout(r,t){var n=getViewRect$4(r,t);r.layoutInfo=n;var o=r.get("layout"),a=0,l=0,d=null;o==="radial"?(a=2*Math.PI,l=Math.min(n.height,n.width)/2,d=separation(function(V,j){return(V.parentNode===j.parentNode?1:2)/V.depth})):(a=n.width,l=n.height,d=separation());var g=r.getData().tree.root,y=g.children[0];if(y){init(g),eachAfter(y,firstWalk,d),g.hierNode.modifier=-y.hierNode.prelim,eachBefore(y,secondWalk);var S=y,x=y,w=y;eachBefore(y,function(V){var j=V.getLayout().x;j<S.getLayout().x&&(S=V),j>x.getLayout().x&&(x=V),V.depth>w.depth&&(w=V)});var c=S===x?1:d(S,x)/2,A=c-S.getLayout().x,R=0,L=0,$=0,O=0;if(o==="radial")R=a/(x.getLayout().x+c+A),L=l/(w.depth-1||1),eachBefore(y,function(V){$=(V.getLayout().x+A)*R,O=(V.depth-1)*L;var j=radialCoordinate($,O);V.setLayout({x:j.x,y:j.y,rawX:$,rawY:O},!0)});else{var z=r.getOrient();z==="RL"||z==="LR"?(L=l/(x.getLayout().x+c+A),R=a/(w.depth-1||1),eachBefore(y,function(V){O=(V.getLayout().x+A)*L,$=z==="LR"?(V.depth-1)*R:a-(V.depth-1)*R,V.setLayout({x:$,y:O},!0)})):(z==="TB"||z==="BT")&&(R=a/(x.getLayout().x+c+A),L=l/(w.depth-1||1),eachBefore(y,function(V){$=(V.getLayout().x+A)*R,O=z==="TB"?(V.depth-1)*L:l-(V.depth-1)*L,V.setLayout({x:$,y:O},!0)}))}}}function treeVisual(r){r.eachSeriesByType("tree",function(t){var n=t.getData(),o=n.tree;o.eachNode(function(a){var l=a.getModel(),d=l.getModel("itemStyle").getItemStyle(),g=n.ensureUniqueItemVisual(a.dataIndex,"style");extend(g,d)})})}function installTreeAction(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,n){n.eachComponent({mainType:"series",subType:"tree",query:t},function(o){var a=t.dataIndex,l=o.getData().tree,d=l.getNodeByDataIndex(a);d.isExpand=!d.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,n,o){n.eachComponent({mainType:"series",subType:"tree",query:t},function(a){var l=a.coordinateSystem,d=updateCenterAndZoom(l,t,void 0,o);a.setCenter&&a.setCenter(d.center),a.setZoom&&a.setZoom(d.zoom)})})}function install$H(r){r.registerChartView(TreeView$1),r.registerSeriesModel(TreeSeriesModel$1),r.registerLayout(treeLayout),r.registerVisual(treeVisual),installTreeAction(r)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(r){for(var t=0;t<actionTypes.length;t++)r.registerAction({type:actionTypes[t],update:"updateView"},noop);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,o){o.eachComponent({mainType:"series",subType:"treemap",query:n},a);function a(l,d){var g=["treemapZoomToNode","treemapRootToNode"],y=retrieveTargetInfo(n,g,l);if(y){var S=l.getViewRoot();S&&(n.direction=aboveViewRoot(S,y.node)?"rollUp":"drillDown"),l.resetViewRoot(y.node)}}})}function enableAriaDecalForTree(r){var t=r.getData(),n=t.tree,o={};n.eachNode(function(a){for(var l=a;l&&l.depth>1;)l=l.parentNode;var d=getDecalFromPalette(r.ecModel,l.name||l.dataIndex+"",o);a.setVisual("decal",d)})}var TreemapSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.preventUsingHoverLayer=!0,n}return t.prototype.getInitialData=function(n,o){var a={name:n.name,children:n.data};completeTreeValue$1(a);var l=n.levels||[],d=this.designatedVisualItemStyle={},g=new Model$1({itemStyle:d},this,o);l=n.levels=setDefault(l,o);var y=map$1(l||[],function(w){return new Model$1(w,g,o)},this),S=Tree$1.createTree(a,this,x);function x(w){w.wrapMethod("getItemModel",function(c,A){var R=S.getNodeByDataIndex(A),L=R?y[R.depth]:null;return c.parentModel=L||g,c})}return S.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(n,o,a){var l=this.getData(),d=this.getRawValue(n),g=l.getName(n);return createTooltipMarkup("nameValue",{name:g,value:d})},t.prototype.getDataParams=function(n){var o=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(n);return o.treeAncestors=wrapTreePathInfo(a,this),o.treePathInfo=o.treeAncestors,o},t.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,n)},t.prototype.mapIdToIndex=function(n){var o=this._idIndexMap;o||(o=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var a=o.get(n);return a==null&&o.set(n,a=this._idIndexMapCount++),a},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var o=this.getRawData().tree.root;(!n||n!==o&&!o.contains(n))&&(this._viewRoot=o)},t.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(SeriesModel$1);function completeTreeValue$1(r){var t=0;each$f(r.children,function(o){completeTreeValue$1(o);var a=o.value;isArray$1(a)&&(a=a[0]),t+=a});var n=r.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=t),n<0&&(n=0),isArray$1(r.value)?r.value[0]=n:r.value=n}function setDefault(r,t){var n=normalizeToArray(t.get("color")),o=normalizeToArray(t.get(["aria","decal","decals"]));if(n){r=r||[];var a,l;each$f(r,function(g){var y=new Model$1(g),S=y.get("color"),x=y.get("decal");(y.get(["itemStyle","color"])||S&&S!=="none")&&(a=!0),(y.get(["itemStyle","decal"])||x&&x!=="none")&&(l=!0)});var d=r[0]||(r[0]={});return a||(d.color=n.slice()),!l&&o&&(d.decal=o.slice()),r}}const TreemapSeriesModel$1=TreemapSeriesModel;var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function r(t){this.group=new Group$4,t.add(this.group)}return r.prototype.render=function(t,n,o,a){var l=t.getModel("breadcrumb"),d=this.group;if(d.removeAll(),!(!l.get("show")||!o)){var g=l.getModel("itemStyle"),y=l.getModel("emphasis"),S=g.getModel("textStyle"),x=y.getModel(["itemStyle","textStyle"]),w={pos:{left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,w,S),this._renderContent(t,w,g,y,S,x,a),positionElement(d,w.pos,w.box)}},r.prototype._prepare=function(t,n,o){for(var a=t;a;a=a.parentNode){var l=convertOptionIdName(a.getModel().get("name"),""),d=o.getTextRect(l),g=Math.max(d.width+TEXT_PADDING*2,n.emptyItemWidth);n.totalWidth+=g+ITEM_GAP,n.renderList.push({node:a,text:l,width:g})}},r.prototype._renderContent=function(t,n,o,a,l,d,g){for(var y=0,S=n.emptyItemWidth,x=t.get(["breadcrumb","height"]),w=getAvailableSize(n.pos,n.box),c=n.totalWidth,A=n.renderList,R=a.getModel("itemStyle").getItemStyle(),L=A.length-1;L>=0;L--){var $=A[L],O=$.node,z=$.width,V=$.text;c>w.width&&(c-=z-S,z=S,V=null);var j=new Polygon$1({shape:{points:makeItemPoints(y,0,z,x,L===A.length-1,L===0)},style:defaults(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText$1({style:createTextStyle$1(l,{text:V})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(g,O)});j.disableLabelAnimation=!0,j.getTextContent().ensureState("emphasis").style=createTextStyle$1(d,{text:V}),j.ensureState("emphasis").style=R,toggleHoverEmphasis(j,a.get("focus"),a.get("blurScope"),a.get("disabled")),this.group.add(j),packEventData(j,t,O),y+=z+ITEM_GAP}},r.prototype.remove=function(){this.group.removeAll()},r}();function makeItemPoints(r,t,n,o,a,l){var d=[[a?r:r-ARRAY_LENGTH,t],[r+n,t],[r+n,t+o],[a?r:r-ARRAY_LENGTH,t+o]];return!l&&d.splice(2,0,[r+n+ARRAY_LENGTH,t+o/2]),!a&&d.push([r,t+o/2]),d}function packEventData(r,t,n){getECData(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&wrapTreePathInfo(n,t)}}const Breadcrumb$1=Breadcrumb;var AnimationWrap=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(t,n,o,a,l){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:n,duration:o,delay:a,easing:l}),!0)},r.prototype.finished=function(t){return this._finishedCallback=t,this},r.prototype.start=function(){for(var t=this,n=this._storage.length,o=function(){n--,n<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},a=0,l=this._storage.length;a<l;a++){var d=this._storage[a];d.el.animateTo(d.target,{duration:d.duration,delay:d.delay,easing:d.easing,setToFinal:!0,done:o,aborted:o})}return this},r}();function createWrap(){return new AnimationWrap}var Group$2=Group$4,Rect$1=Rect$3,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(r){var t=getStateItemStyle(r);return t.stroke=t.fill=t.lineWidth=null,t},inner$d=makeInner(),TreemapView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._state="ready",n._storage=createStorage(),n}return t.prototype.render=function(n,o,a,l){var d=o.findComponents({mainType:"series",subType:"treemap",query:l});if(!(indexOf(d,n)<0)){this.seriesModel=n,this.api=a,this.ecModel=o;var g=["treemapZoomToNode","treemapRootToNode"],y=retrieveTargetInfo(l,g,n),S=l&&l.type,x=n.layoutInfo,w=!this._oldTree,c=this._storage,A=S==="treemapRootToNode"&&y&&c?{rootNodeGroup:c.nodeGroup[y.node.getRawIndex()],direction:l.direction}:null,R=this._giveContainerGroup(x),L=n.get("animation"),$=this._doRender(R,n,A);L&&!w&&(!S||S==="treemapZoomToNode"||S==="treemapRootToNode")?this._doAnimation(R,$,n,A):$.renderFinally(),this._resetController(a),this._renderBreadcrumb(n,a,y)}},t.prototype._giveContainerGroup=function(n){var o=this._containerGroup;return o||(o=this._containerGroup=new Group$2,this._initEvents(o),this.group.add(o)),o.x=n.x,o.y=n.y,o},t.prototype._doRender=function(n,o,a){var l=o.getData().tree,d=this._oldTree,g=createStorage(),y=createStorage(),S=this._storage,x=[];function w($,O,z,V){return renderNode(o,y,S,a,g,x,$,O,z,V)}A(l.root?[l.root]:[],d&&d.root?[d.root]:[],n,l===d||!d,0);var c=R(S);return this._oldTree=l,this._storage=y,{lastsForAnimation:g,willDeleteEls:c,renderFinally:L};function A($,O,z,V,j){V?(O=$,each$f($,function(q,ie){!q.isRemoved()&&Z(ie,ie)})):new DataDiffer$1(O,$,K,K).add(Z).update(Z).remove(curry$1(Z,null)).execute();function K(q){return q.getId()}function Z(q,ie){var te=q!=null?$[q]:null,oe=ie!=null?O[ie]:null,re=w(te,oe,z,j);re&&A(te&&te.viewChildren||[],oe&&oe.viewChildren||[],re,V,j+1)}}function R($){var O=createStorage();return $&&each$f($,function(z,V){var j=O[V];each$f(z,function(K){K&&(j.push(K),inner$d(K).willDelete=!0)})}),O}function L(){each$f(c,function($){each$f($,function(O){O.parent&&O.parent.remove(O)})}),each$f(x,function($){$.invisible=!0,$.dirty()})}},t.prototype._doAnimation=function(n,o,a,l){var d=a.get("animationDurationUpdate"),g=a.get("animationEasing"),y=(isFunction(d)?0:d)||0,S=(isFunction(g)?null:g)||"cubicOut",x=createWrap();each$f(o.willDeleteEls,function(w,c){each$f(w,function(A,R){if(!A.invisible){var L=A.parent,$,O=inner$d(L);if(l&&l.direction==="drillDown")$=L===l.rootNodeGroup?{shape:{x:0,y:0,width:O.nodeWidth,height:O.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var z=0,V=0;O.willDelete||(z=O.nodeWidth/2,V=O.nodeHeight/2),$=c==="nodeGroup"?{x:z,y:V,style:{opacity:0}}:{shape:{x:z,y:V,width:0,height:0},style:{opacity:0}}}$&&x.add(A,$,y,0,S)}})}),each$f(this._storage,function(w,c){each$f(w,function(A,R){var L=o.lastsForAnimation[c][R],$={};L&&(A instanceof Group$4?L.oldX!=null&&($.x=A.x,$.y=A.y,A.x=L.oldX,A.y=L.oldY):(L.oldShape&&($.shape=extend({},A.shape),A.setShape(L.oldShape)),L.fadein?(A.setStyle("opacity",0),$.style={opacity:1}):A.style.opacity!==1&&($.style={opacity:1})),x.add(A,$,y,0,S))})},this),this._state="animating",x.finished(bind$1(function(){this._state="ready",o.renderFinally()},this)).start()},t.prototype._resetController=function(n){var o=this._controller;o||(o=this._controller=new RoamController$1(n.getZr()),o.enable(this.seriesModel.get("roam")),o.on("pan",bind$1(this._onPan,this)),o.on("zoom",bind$1(this._onZoom,this)));var a=new BoundingRect$1(0,0,n.getWidth(),n.getHeight());o.setPointerChecker(function(l,d,g){return a.contain(d,g)})},t.prototype._clearController=function(){var n=this._controller;n&&(n.dispose(),n=null)},t.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>DRAG_THRESHOLD||Math.abs(n.dy)>DRAG_THRESHOLD)){var o=this.seriesModel.getData().tree.root;if(!o)return;var a=o.getLayout();if(!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+n.dx,y:a.y+n.dy,width:a.width,height:a.height}})}},t.prototype._onZoom=function(n){var o=n.originX,a=n.originY;if(this._state!=="animating"){var l=this.seriesModel.getData().tree.root;if(!l)return;var d=l.getLayout();if(!d)return;var g=new BoundingRect$1(d.x,d.y,d.width,d.height),y=this.seriesModel.layoutInfo;o-=y.x,a-=y.y;var S=create$1();translate(S,S,[-o,-a]),scale$1(S,S,[n.scale,n.scale]),translate(S,S,[o,a]),g.applyTransform(S),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:g.x,y:g.y,width:g.width,height:g.height}})}},t.prototype._initEvents=function(n){var o=this;n.on("click",function(a){if(o._state==="ready"){var l=o.seriesModel.get("nodeClick",!0);if(l){var d=o.findTarget(a.offsetX,a.offsetY);if(d){var g=d.node;if(g.getLayout().isLeafRoot)o._rootToNode(d);else if(l==="zoomToNode")o._zoomToNode(d);else if(l==="link"){var y=g.hostTree.data.getItemModel(g.dataIndex),S=y.get("link",!0),x=y.get("target",!0)||"blank";S&&windowOpen(S,x)}}}}},this)},t.prototype._renderBreadcrumb=function(n,o,a){var l=this;a||(a=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(o.getWidth()/2,o.getHeight()/2),a||(a={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb$1(this.group))).render(n,o,a.node,function(d){l._state!=="animating"&&(aboveViewRoot(n.getViewRoot(),d)?l._rootToNode({node:d}):l._zoomToNode({node:d}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},t.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},t.prototype.findTarget=function(n,o){var a,l=this.seriesModel.getViewRoot();return l.eachNode({attr:"viewChildren",order:"preorder"},function(d){var g=this._storage.background[d.getRawIndex()];if(g){var y=g.transformCoordToLocal(n,o),S=g.shape;if(S.x<=y[0]&&y[0]<=S.x+S.width&&S.y<=y[1]&&y[1]<=S.y+S.height)a={node:d,offsetX:y[0],offsetY:y[1]};else return!1}},this),a},t.type="treemap",t}(ChartView$1);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(r,t,n,o,a,l,d,g,y,S){if(!d)return;var x=d.getLayout(),w=r.getData(),c=d.getModel();if(w.setItemGraphicEl(d.dataIndex,null),!x||!x.isInView)return;var A=x.width,R=x.height,L=x.borderWidth,$=x.invisible,O=d.getRawIndex(),z=g&&g.getRawIndex(),V=d.viewChildren,j=x.upperHeight,K=V&&V.length,Z=c.getModel("itemStyle"),q=c.getModel(["emphasis","itemStyle"]),ie=c.getModel(["blur","itemStyle"]),te=c.getModel(["select","itemStyle"]),oe=Z.get("borderRadius")||0,re=Lt("nodeGroup",Group$2);if(!re)return;if(y.add(re),re.x=x.x||0,re.y=x.y||0,re.markRedraw(),inner$d(re).nodeWidth=A,inner$d(re).nodeHeight=R,x.isAboveViewRoot)return re;var he=Lt("background",Rect$1,S,Z2_BG);he&&Ge(re,he,K&&x.upperLabelHeight);var _e=c.getModel("emphasis"),me=_e.get("focus"),be=_e.get("blurScope"),Q=_e.get("disabled"),Ne=me==="ancestor"?d.getAncestorsIndices():me==="descendant"?d.getDescendantIndices():me;if(K)isHighDownDispatcher(re)&&setAsHighDownDispatcher(re,!1),he&&(setAsHighDownDispatcher(he,!Q),w.setItemGraphicEl(d.dataIndex,he),enableHoverFocus(he,Ne,be));else{var Ee=Lt("content",Rect$1,S,Z2_CONTENT);Ee&&it(re,Ee),he.disableMorphing=!0,he&&isHighDownDispatcher(he)&&setAsHighDownDispatcher(he,!1),setAsHighDownDispatcher(re,!Q),w.setItemGraphicEl(d.dataIndex,re),enableHoverFocus(re,Ne,be)}return re;function Ge(Be,ue,Dt){var Rt=getECData(ue);if(Rt.dataIndex=d.dataIndex,Rt.seriesIndex=r.seriesIndex,ue.setShape({x:0,y:0,width:A,height:R,r:oe}),$)Te(ue);else{ue.invisible=!1;var Bt=d.getVisual("style"),Se=Bt.stroke,Ye=getItemStyleNormal(Z);Ye.fill=Se;var $e=getStateItemStyle(q);$e.fill=q.get("borderColor");var st=getStateItemStyle(ie);st.fill=ie.get("borderColor");var et=getStateItemStyle(te);if(et.fill=te.get("borderColor"),Dt){var Fe=A-2*L;Ke(ue,Se,Bt.opacity,{x:L,y:0,width:Fe,height:j})}else ue.removeTextContent();ue.setStyle(Ye),ue.ensureState("emphasis").style=$e,ue.ensureState("blur").style=st,ue.ensureState("select").style=et,setDefaultStateProxy(ue)}Be.add(ue)}function it(Be,ue){var Dt=getECData(ue);Dt.dataIndex=d.dataIndex,Dt.seriesIndex=r.seriesIndex;var Rt=Math.max(A-2*L,0),Bt=Math.max(R-2*L,0);if(ue.culling=!0,ue.setShape({x:L,y:L,width:Rt,height:Bt,r:oe}),$)Te(ue);else{ue.invisible=!1;var Se=d.getVisual("style"),Ye=Se.fill,$e=getItemStyleNormal(Z);$e.fill=Ye,$e.decal=Se.decal;var st=getStateItemStyle(q),et=getStateItemStyle(ie),Fe=getStateItemStyle(te);Ke(ue,Ye,Se.opacity,null),ue.setStyle($e),ue.ensureState("emphasis").style=st,ue.ensureState("blur").style=et,ue.ensureState("select").style=Fe,setDefaultStateProxy(ue)}Be.add(ue)}function Te(Be){!Be.invisible&&l.push(Be)}function Ke(Be,ue,Dt,Rt){var Bt=c.getModel(Rt?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),Se=convertOptionIdName(c.get("name"),null),Ye=Bt.getShallow("show");setLabelStyle(Be,getLabelStatesModels(c,Rt?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Ye?Se:null,inheritColor:ue,defaultOpacity:Dt,labelFetcher:r,labelDataIndex:d.dataIndex});var $e=Be.getTextContent();if($e){var st=$e.style,et=normalizeCssArray$1(st.padding||0);Rt&&(Be.setTextConfig({layoutRect:Rt}),$e.disableLabelLayout=!0),$e.beforeUpdate=function(){var tn=Math.max((Rt?Rt.width:Be.shape.width)-et[1]-et[3],0),Gt=Math.max((Rt?Rt.height:Be.shape.height)-et[0]-et[2],0);(st.width!==tn||st.height!==Gt)&&$e.setStyle({width:tn,height:Gt})},st.truncateMinChar=2,st.lineOverflow="truncate",Tt(st,Rt,x);var Fe=$e.getState("emphasis");Tt(Fe?Fe.style:null,Rt,x)}}function Tt(Be,ue,Dt){var Rt=Be?Be.text:null;if(!ue&&Dt.isLeafRoot&&Rt!=null){var Bt=r.get("drillDownIcon",!0);Be.text=Bt?Bt+" "+Rt:Rt}}function Lt(Be,ue,Dt,Rt){var Bt=z!=null&&n[Be][z],Se=a[Be];return Bt?(n[Be][z]=null,Qt(Se,Bt)):$||(Bt=new ue,Bt instanceof Displayable$1&&(Bt.z2=calculateZ2(Dt,Rt)),Xe(Se,Bt)),t[Be][O]=Bt}function Qt(Be,ue){var Dt=Be[O]={};ue instanceof Group$2?(Dt.oldX=ue.x,Dt.oldY=ue.y):Dt.oldShape=extend({},ue.shape)}function Xe(Be,ue){var Dt=Be[O]={},Rt=d.parentNode,Bt=ue instanceof Group$4;if(Rt&&(!o||o.direction==="drillDown")){var Se=0,Ye=0,$e=a.background[Rt.getRawIndex()];!o&&$e&&$e.oldShape&&(Se=$e.oldShape.width,Ye=$e.oldShape.height),Bt?(Dt.oldX=0,Dt.oldY=Ye):Dt.oldShape={x:Se,y:Ye,width:0,height:0}}Dt.fadein=!Bt}}function calculateZ2(r,t){return r*Z2_BASE+t}const TreemapView$1=TreemapView;var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function r(t){var n=t.mappingMethod,o=t.type,a=this.option=clone$4(t);this.type=o,this.mappingMethod=n,this._normalizeData=normalizers[n];var l=r.visualHandlers[o];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[n],n==="piecewise"?(normalizeVisualRange(a),preprocessForPiecewise(a)):n==="category"?a.categories?preprocessForSpecifiedCategory(a):normalizeVisualRange(a,!0):(assert(n!=="linear"||a.dataExtent),normalizeVisualRange(a))}return r.prototype.mapValueToVisual=function(t){var n=this._normalizeData(t);return this._normalizedToVisual(n,t)},r.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},r.listVisualTypes=function(){return keys(r.visualHandlers)},r.isValidType=function(t){return r.visualHandlers.hasOwnProperty(t)},r.eachVisual=function(t,n,o){isObject$3(t)?each$f(t,n,o):n.call(o,t)},r.mapVisual=function(t,n,o){var a,l=isArray$1(t)?[]:isObject$3(t)?{}:(a=!0,null);return r.eachVisual(t,function(d,g){var y=n.call(o,d,g);a?l=y:l[g]=y}),l},r.retrieveVisuals=function(t){var n={},o;return t&&each$c(r.visualHandlers,function(a,l){t.hasOwnProperty(l)&&(n[l]=t[l],o=!0)}),o?n:null},r.prepareVisualTypes=function(t){if(isArray$1(t))t=t.slice();else if(isObject(t)){var n=[];each$c(t,function(o,a){n.push(a)}),t=n}else return[];return t.sort(function(o,a){return a==="color"&&o!=="color"&&o.indexOf("color")===0?1:-1}),t},r.dependsOn=function(t,n){return n==="color"?!!(t&&t.indexOf(n)===0):t===n},r.findPieceIndex=function(t,n,o){for(var a,l=1/0,d=0,g=n.length;d<g;d++){var y=n[d].value;if(y!=null){if(y===t||isString(y)&&y===t+"")return d;o&&c(y,d)}}for(var d=0,g=n.length;d<g;d++){var S=n[d],x=S.interval,w=S.close;if(x){if(x[0]===-1/0){if(littleThan(w[1],t,x[1]))return d}else if(x[1]===1/0){if(littleThan(w[0],x[0],t))return d}else if(littleThan(w[0],x[0],t)&&littleThan(w[1],t,x[1]))return d;o&&c(x[0],d),o&&c(x[1],d)}}if(o)return t===1/0?n.length-1:t===-1/0?0:a;function c(A,R){var L=Math.abs(A-t);L<l&&(l=L,a=R)}},r.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var t=this.option;return bind$1(t.mappingMethod==="category"?function(n,o){return!o&&(n=this._normalizeData(n)),doMapCategory.call(this,n)}:function(n,o,a){var l=!!a;return!o&&(n=this._normalizeData(n)),a=fastLerp(n,t.parsedVisual,a),l?a:stringify(a,"rgba")},this)},_normalizedToVisual:{linear:function(t){return stringify(fastLerp(t,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(t,n){var o=getSpecifiedVisual.call(this,n);return o==null&&(o=stringify(fastLerp(t,this.option.parsedVisual),"rgba")),o},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(t,n){return modifyHSL(t,n)}),colorSaturation:makePartialColorVisualHandler(function(t,n){return modifyHSL(t,null,n)}),colorLightness:makePartialColorVisualHandler(function(t,n){return modifyHSL(t,null,null,n)}),colorAlpha:makePartialColorVisualHandler(function(t,n){return modifyAlpha(t,n)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(t,n,o){var a=this.mapValueToVisual(t);o("symbol",a)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(t,n){var o=getSpecifiedVisual.call(this,n);return o==null&&(o=doMapToArray.call(this,t)),o},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},r}();function preprocessForPiecewise(r){var t=r.pieceList;r.hasSpecialVisual=!1,each$f(t,function(n,o){n.originIndex=o,n.visual!=null&&(r.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(r){var t=r.categories,n=r.categoryMap={},o=r.visual;if(each$c(t,function(d,g){n[d]=g}),!isArray$1(o)){var a=[];isObject$3(o)?each$c(o,function(d,g){var y=n[g];a[y??CATEGORY_DEFAULT_VISUAL_INDEX]=d}):a[CATEGORY_DEFAULT_VISUAL_INDEX]=o,o=setVisualToOption(r,a)}for(var l=t.length-1;l>=0;l--)o[l]==null&&(delete n[t[l]],t.pop())}function normalizeVisualRange(r,t){var n=r.visual,o=[];isObject$3(n)?each$c(n,function(l){o.push(l)}):n!=null&&o.push(n);var a={color:1,symbol:1};!t&&o.length===1&&!a.hasOwnProperty(r.type)&&(o[1]=o[0]),setVisualToOption(r,o)}function makePartialColorVisualHandler(r){return{applyVisual:function(t,n,o){var a=this.mapValueToVisual(t);o("color",r(n("color"),a))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(r){var t=this.option.visual;return t[Math.round(linearMap$2(r,[0,1],[0,t.length-1],!0))]||{}}function makeApplyVisual(r){return function(t,n,o){o(r,this.mapValueToVisual(t))}}function doMapCategory(r){var t=this.option.visual;return t[this.option.loop&&r!==CATEGORY_DEFAULT_VISUAL_INDEX?r%t.length:r]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(r){return{linear:function(t){return linearMap$2(t,r,this.option.visual,!0)},category:doMapCategory,piecewise:function(t,n){var o=getSpecifiedVisual.call(this,n);return o==null&&(o=linearMap$2(t,r,this.option.visual,!0)),o},fixed:doMapFixed}}function getSpecifiedVisual(r){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var o=VisualMapping.findPieceIndex(r,n),a=n[o];if(a&&a.visual)return a.visual[this.type]}}function setVisualToOption(r,t){return r.visual=t,r.type==="color"&&(r.parsedVisual=map$1(t,function(n){var o=parse(n);return o||[0,0,0,1]})),t}var normalizers={linear:function(r){return linearMap$2(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var t=this.option.pieceList,n=VisualMapping.findPieceIndex(r,t,!0);if(n!=null)return linearMap$2(n,[0,t.length-1],[0,1],!0)},category:function(r){var t=this.option.categories?this.option.categoryMap[r]:r;return t??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(r,t,n){return r?t<=n:t<n}const VisualMapping$1=VisualMapping;var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(r){var t=r.getData().tree,n=t.root;n.isRemoved()||travelTree(n,{},r.getViewRoot().getAncestors(),r)}};function travelTree(r,t,n,o){var a=r.getModel(),l=r.getLayout(),d=r.hostTree.data;if(!(!l||l.invisible||!l.isInView)){var g=a.getModel(ITEM_STYLE_NORMAL),y=buildVisuals(g,t,o),S=d.ensureUniqueItemVisual(r.dataIndex,"style"),x=g.get("borderColor"),w=g.get("borderColorSaturation"),c;w!=null&&(c=calculateColor(y),x=calculateBorderColor(w,c)),S.stroke=x;var A=r.viewChildren;if(!A||!A.length)c=calculateColor(y),S.fill=c;else{var R=buildVisualMapping(r,a,l,g,y,A);each$f(A,function(L,$){if(L.depth>=n.length||L===n[L.depth]){var O=mapVisual$1(a,y,L,$,R,o);travelTree(L,O,n,o)}})}}}function buildVisuals(r,t,n){var o=extend({},t),a=n.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(l){a[l]=t[l];var d=r.get(l);a[l]=null,d!=null&&(o[l]=d)}),o}function calculateColor(r){var t=getValueVisualDefine(r,"color");if(t){var n=getValueVisualDefine(r,"colorAlpha"),o=getValueVisualDefine(r,"colorSaturation");return o&&(t=modifyHSL(t,null,null,o)),n&&(t=modifyAlpha(t,n)),t}}function calculateBorderColor(r,t){return t!=null?modifyHSL(t,null,null,r):null}function getValueVisualDefine(r,t){var n=r[t];if(n!=null&&n!=="none")return n}function buildVisualMapping(r,t,n,o,a,l){if(!(!l||!l.length)){var d=getRangeVisual(t,"color")||a.color!=null&&a.color!=="none"&&(getRangeVisual(t,"colorAlpha")||getRangeVisual(t,"colorSaturation"));if(d){var g=t.get("visualMin"),y=t.get("visualMax"),S=n.dataExtent.slice();g!=null&&g<S[0]&&(S[0]=g),y!=null&&y>S[1]&&(S[1]=y);var x=t.get("colorMappingBy"),w={type:d.name,dataExtent:S,visual:d.range};w.type==="color"&&(x==="index"||x==="id")?(w.mappingMethod="category",w.loop=!0):w.mappingMethod="linear";var c=new VisualMapping$1(w);return inner$c(c).drColorMappingBy=x,c}}}function getRangeVisual(r,t){var n=r.get(t);return isArray$1(n)&&n.length?{name:t,range:n}:null}function mapVisual$1(r,t,n,o,a,l){var d=extend({},t);if(a){var g=a.type,y=g==="color"&&inner$c(a).drColorMappingBy,S=y==="index"?o:y==="id"?l.mapIdToIndex(n.getId()):n.getValue(r.get("visualDimension"));d[g]=a.mapValueToVisual(S)}return d}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(r,t,n,o){var a=n.getWidth(),l=n.getHeight(),d=r.option,g=getLayoutRect(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),y=d.size||[],S=parsePercent(retrieveValue(g.width,y[0]),a),x=parsePercent(retrieveValue(g.height,y[1]),l),w=o&&o.type,c=["treemapZoomToNode","treemapRootToNode"],A=retrieveTargetInfo(o,c,r),R=w==="treemapRender"||w==="treemapMove"?o.rootRect:null,L=r.getViewRoot(),$=getPathToRoot(L);if(w!=="treemapMove"){var O=w==="treemapZoomToNode"?estimateRootSize(r,A,L,S,x):R?[R.width,R.height]:[S,x],z=d.sort;z&&z!=="asc"&&z!=="desc"&&(z="desc");var V={squareRatio:d.squareRatio,sort:z,leafDepth:d.leafDepth};L.hostTree.clearLayouts();var j={x:0,y:0,width:O[0],height:O[1],area:O[0]*O[1]};L.setLayout(j),squarify(L,V,!1,0),j=L.getLayout(),each$b($,function(Z,q){var ie=($[q+1]||L).getValue();Z.setLayout(extend({dataExtent:[ie,ie],borderWidth:0,upperHeight:0},j))})}var K=r.getData().tree.root;K.setLayout(calculateRootPosition(g,R,A),!0),r.setLayoutInfo(g),prunning(K,new BoundingRect$1(-g.x,-g.y,a,l),$,L,0)}};function squarify(r,t,n,o){var a,l;if(!r.isRemoved()){var d=r.getLayout();a=d.width,l=d.height;var g=r.getModel(),y=g.get(PATH_BORDER_WIDTH),S=g.get(PATH_GAP_WIDTH)/2,x=getUpperLabelHeight(g),w=Math.max(y,x),c=y-S,A=w-S;r.setLayout({borderWidth:y,upperHeight:w,upperLabelHeight:x},!0),a=mathMax$3(a-2*c,0),l=mathMax$3(l-c-A,0);var R=a*l,L=initChildren$1(r,g,R,t,n,o);if(L.length){var $={x:c,y:A,width:a,height:l},O=mathMin$3(a,l),z=1/0,V=[];V.area=0;for(var j=0,K=L.length;j<K;){var Z=L[j];V.push(Z),V.area+=Z.getLayout().area;var q=worst(V,O,t.squareRatio);q<=z?(j++,z=q):(V.area-=V.pop().getLayout().area,position(V,O,$,S,!1),O=mathMin$3($.width,$.height),V.length=V.area=0,z=1/0)}if(V.length&&position(V,O,$,S,!0),!n){var ie=g.get("childrenVisibleMin");ie!=null&&R<ie&&(n=!0)}for(var j=0,K=L.length;j<K;j++)squarify(L[j],t,n,o+1)}}}function initChildren$1(r,t,n,o,a,l){var d=r.children||[],g=o.sort;g!=="asc"&&g!=="desc"&&(g=null);var y=o.leafDepth!=null&&o.leafDepth<=l;if(a&&!y)return r.viewChildren=[];d=filter(d,function(A){return!A.isRemoved()}),sort$1(d,g);var S=statistic(t,d,g);if(S.sum===0)return r.viewChildren=[];if(S.sum=filterByThreshold(t,n,S.sum,g,d),S.sum===0)return r.viewChildren=[];for(var x=0,w=d.length;x<w;x++){var c=d[x].getValue()/S.sum*n;d[x].setLayout({area:c})}return y&&(d.length&&r.setLayout({isLeafRoot:!0},!0),d.length=0),r.viewChildren=d,r.setLayout({dataExtent:S.dataExtent},!0),d}function filterByThreshold(r,t,n,o,a){if(!o)return n;for(var l=r.get("visibleMin"),d=a.length,g=d,y=d-1;y>=0;y--){var S=a[o==="asc"?d-y-1:y].getValue();S/n*t<l&&(g=y,n-=S)}return o==="asc"?a.splice(0,d-g):a.splice(g,d-g),n}function sort$1(r,t){return t&&r.sort(function(n,o){var a=t==="asc"?n.getValue()-o.getValue():o.getValue()-n.getValue();return a===0?t==="asc"?n.dataIndex-o.dataIndex:o.dataIndex-n.dataIndex:a}),r}function statistic(r,t,n){for(var o=0,a=0,l=t.length;a<l;a++)o+=t[a].getValue();var d=r.get("visualDimension"),g;return!t||!t.length?g=[NaN,NaN]:d==="value"&&n?(g=[t[t.length-1].getValue(),t[0].getValue()],n==="asc"&&g.reverse()):(g=[1/0,-1/0],each$b(t,function(y){var S=y.getValue(d);S<g[0]&&(g[0]=S),S>g[1]&&(g[1]=S)})),{sum:o,dataExtent:g}}function worst(r,t,n){for(var o=0,a=1/0,l=0,d=void 0,g=r.length;l<g;l++)d=r[l].getLayout().area,d&&(d<a&&(a=d),d>o&&(o=d));var y=r.area*r.area,S=t*t*n;return y?mathMax$3(S*o/y,y/(S*a)):1/0}function position(r,t,n,o,a){var l=t===n.width?0:1,d=1-l,g=["x","y"],y=["width","height"],S=n[g[l]],x=t?r.area/t:0;(a||x>n[y[d]])&&(x=n[y[d]]);for(var w=0,c=r.length;w<c;w++){var A=r[w],R={},L=x?A.getLayout().area/x:0,$=R[y[d]]=mathMax$3(x-2*o,0),O=n[g[l]]+n[y[l]]-S,z=w===c-1||O<L?O:L,V=R[y[l]]=mathMax$3(z-2*o,0);R[g[d]]=n[g[d]]+mathMin$3(o,$/2),R[g[l]]=S+mathMin$3(o,V/2),S+=z,A.setLayout(R,!0)}n[g[d]]+=x,n[y[d]]-=x}function estimateRootSize(r,t,n,o,a){var l=(t||{}).node,d=[o,a];if(!l||l===n)return d;for(var g,y=o*a,S=y*r.option.zoomToNodeRatio;g=l.parentNode;){for(var x=0,w=g.children,c=0,A=w.length;c<A;c++)x+=w[c].getValue();var R=l.getValue();if(R===0)return d;S*=x/R;var L=g.getModel(),$=L.get(PATH_BORDER_WIDTH),O=Math.max($,getUpperLabelHeight(L));S+=4*$*$+(3*$+O)*Math.pow(S,.5),S>MAX_SAFE_INTEGER&&(S=MAX_SAFE_INTEGER),l=g}S<y&&(S=y);var z=Math.pow(S/y,.5);return[o*z,a*z]}function calculateRootPosition(r,t,n){if(t)return{x:t.x,y:t.y};var o={x:0,y:0};if(!n)return o;var a=n.node,l=a.getLayout();if(!l)return o;for(var d=[l.width/2,l.height/2],g=a;g;){var y=g.getLayout();d[0]+=y.x,d[1]+=y.y,g=g.parentNode}return{x:r.width/2-d[0],y:r.height/2-d[1]}}function prunning(r,t,n,o,a){var l=r.getLayout(),d=n[a],g=d&&d===r;if(!(d&&!g||a===n.length&&r!==o)){r.setLayout({isInView:!0,invisible:!g&&!t.intersect(l),isAboveViewRoot:g},!0);var y=new BoundingRect$1(t.x-l.x,t.y-l.y,t.width,t.height);each$b(r.viewChildren||[],function(S){prunning(S,y,n,o,a+1)})}}function getUpperLabelHeight(r){return r.get(PATH_UPPER_LABEL_SHOW)?r.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(r){r.registerSeriesModel(TreemapSeriesModel$1),r.registerChartView(TreemapView$1),r.registerVisual(treemapVisual),r.registerLayout(treemapLayout),installTreemapAction(r)}function categoryFilter(r){var t=r.findComponents({mainType:"legend"});!t||!t.length||r.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),a=n.getGraph(),l=a.data,d=o.mapArray(o.getName);l.filterSelf(function(g){var y=l.getItemModel(g),S=y.getShallow("category");if(S!=null){isNumber(S)&&(S=d[S]);for(var x=0;x<t.length;x++)if(!t[x].isSelected(S))return!1}return!0})})}function categoryVisual(r){var t={};r.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),a=n.getData(),l={};o.each(function(d){var g=o.getName(d);l["ec-"+g]=d;var y=o.getItemModel(d),S=y.getModel("itemStyle").getItemStyle();S.fill||(S.fill=n.getColorFromPalette(g,t)),o.setItemVisual(d,"style",S);for(var x=["symbol","symbolSize","symbolKeepAspect"],w=0;w<x.length;w++){var c=y.getShallow(x[w],!0);c!=null&&o.setItemVisual(d,x[w],c)}}),o.count()&&a.each(function(d){var g=a.getItemModel(d),y=g.getShallow("category");if(y!=null){isString(y)&&(y=l["ec-"+y]);var S=o.getItemVisual(y,"style"),x=a.ensureUniqueItemVisual(d,"style");extend(x,S);for(var w=["symbol","symbolSize","symbolKeepAspect"],c=0;c<w.length;c++)a.setItemVisual(d,w[c],o.getItemVisual(y,w[c]))}})})}function normalize$1(r){return r instanceof Array||(r=[r,r]),r}function graphEdgeVisual(r){r.eachSeriesByType("graph",function(t){var n=t.getGraph(),o=t.getEdgeData(),a=normalize$1(t.get("edgeSymbol")),l=normalize$1(t.get("edgeSymbolSize"));o.setVisual("fromSymbol",a&&a[0]),o.setVisual("toSymbol",a&&a[1]),o.setVisual("fromSymbolSize",l&&l[0]),o.setVisual("toSymbolSize",l&&l[1]),o.setVisual("style",t.getModel("lineStyle").getLineStyle()),o.each(function(d){var g=o.getItemModel(d),y=n.getEdgeByIndex(d),S=normalize$1(g.getShallow("symbol",!0)),x=normalize$1(g.getShallow("symbolSize",!0)),w=g.getModel("lineStyle").getLineStyle(),c=o.ensureUniqueItemVisual(d,"style");switch(extend(c,w),c.stroke){case"source":{var A=y.node1.getVisual("style");c.stroke=A&&A.fill;break}case"target":{var A=y.node2.getVisual("style");c.stroke=A&&A.fill;break}}S[0]&&y.setVisual("fromSymbol",S[0]),S[1]&&y.setVisual("toSymbol",S[1]),x[0]&&y.setVisual("fromSymbolSize",x[0]),x[1]&&y.setVisual("toSymbolSize",x[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(r){return r.get("autoCurveness")||null},createCurveness=function(r,t){var n=getAutoCurvenessParams(r),o=20,a=[];if(isNumber(n))o=n;else if(isArray$1(n)){r.__curvenessList=n;return}t>o&&(o=t);var l=o%2?o+2:o+3;a=[];for(var d=0;d<l;d++)a.push((d%2?d+1:d)/10*(d%2?-1:1));r.__curvenessList=a},getKeyOfEdges=function(r,t,n){var o=[r.id,r.dataIndex].join("."),a=[t.id,t.dataIndex].join(".");return[n.uid,o,a].join(KEY_DELIMITER)},getOppositeKey=function(r){var t=r.split(KEY_DELIMITER);return[t[0],t[2],t[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(r,t){var n=getKeyOfEdges(r.node1,r.node2,t);return t.__edgeMap[n]},getTotalLengthBetweenNodes=function(r,t){var n=getEdgeMapLengthWithKey(getKeyOfEdges(r.node1,r.node2,t),t),o=getEdgeMapLengthWithKey(getKeyOfEdges(r.node2,r.node1,t),t);return n+o},getEdgeMapLengthWithKey=function(r,t){var n=t.__edgeMap;return n[r]?n[r].length:0};function initCurvenessList(r){getAutoCurvenessParams(r)&&(r.__curvenessList=[],r.__edgeMap={},createCurveness(r))}function createEdgeMapForCurveness(r,t,n,o){if(getAutoCurvenessParams(n)){var a=getKeyOfEdges(r,t,n),l=n.__edgeMap,d=l[getOppositeKey(a)];l[a]&&!d?l[a].isForward=!0:d&&l[a]&&(d.isForward=!0,l[a].isForward=!1),l[a]=l[a]||[],l[a].push(o)}}function getCurvenessForEdge(r,t,n,o){var a=getAutoCurvenessParams(t),l=isArray$1(a);if(!a)return null;var d=getEdgeFromMap(r,t);if(!d)return null;for(var g=-1,y=0;y<d.length;y++)if(d[y]===n){g=y;break}var S=getTotalLengthBetweenNodes(r,t);createCurveness(t,S),r.lineStyle=r.lineStyle||{};var x=getKeyOfEdges(r.node1,r.node2,t),w=t.__curvenessList,c=l||S%2?0:1;if(d.isForward)return w[c+g];var A=getOppositeKey(x),R=getEdgeMapLengthWithKey(A,t),L=w[g+R+c];return o?l?a&&a[0]===0?(R+c)%2?L:-L:((R%2?0:1)+c)%2?L:-L:(R+c)%2?L:-L:w[g+R+c]}function simpleLayout(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view")){var n=r.getGraph();n.eachNode(function(o){var a=o.getModel();o.setLayout([+a.get("x"),+a.get("y")])}),simpleLayoutEdge(n,r)}}function simpleLayoutEdge(r,t){r.eachEdge(function(n,o){var a=retrieve3(n.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(n,t,o,!0),0),l=clone$3(n.node1.getLayout()),d=clone$3(n.node2.getLayout()),g=[l,d];+a&&g.push([(l[0]+d[0])/2-(l[1]-d[1])*a,(l[1]+d[1])/2-(d[0]-l[0])*a]),n.setLayout(g)})}function graphSimpleLayout(r,t){r.eachSeriesByType("graph",function(n){var o=n.get("layout"),a=n.coordinateSystem;if(a&&a.type!=="view"){var l=n.getData(),d=[];each$f(a.dimensions,function(c){d=d.concat(l.mapDimensionsAll(c))});for(var g=0;g<l.count();g++){for(var y=[],S=!1,x=0;x<d.length;x++){var w=l.get(d[x],g);isNaN(w)||(S=!0),y.push(w)}S?l.setItemLayout(g,a.dataToPoint(y)):l.setItemLayout(g,[NaN,NaN])}simpleLayoutEdge(l.graph,n)}else(!o||o==="none")&&simpleLayout(n)})}function getNodeGlobalScale(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var n=r.option.nodeScaleRatio,o=t.scaleX,a=t.getZoom(),l=(a-1)*n+1;return l/o}function getSymbolSize(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(r,t,n,o){var a=r.coordinateSystem;if(!(a&&a.type!=="view")){var l=a.getBoundingRect(),d=r.getData(),g=d.graph,y=l.width/2+l.x,S=l.height/2+l.y,x=Math.min(l.width,l.height)/2,w=d.count();if(d.setLayout({cx:y,cy:S}),!!w){if(n){var c=a.pointToData(o),A=c[0],R=c[1],L=[A-y,R-S];normalize$3(L,L),scale$2(L,L,x),n.setLayout([y+L[0],S+L[1]],!0);var $=r.get(["circular","rotateLabel"]);rotateNodeLabel(n,$,y,S)}_layoutNodesBasedOn[t](r,g,d,x,y,S,w),g.eachEdge(function(O,z){var V=retrieve3(O.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(O,r,z),0),j=clone$3(O.node1.getLayout()),K=clone$3(O.node2.getLayout()),Z,q=(j[0]+K[0])/2,ie=(j[1]+K[1])/2;+V&&(V*=3,Z=[y*V+q*(1-V),S*V+ie*(1-V)]),O.setLayout([j,K,Z])})}}}var _layoutNodesBasedOn={value:function(r,t,n,o,a,l,d){var g=0,y=n.getSum("value"),S=Math.PI*2/(y||d);t.eachNode(function(x){var w=x.getValue("value"),c=S*(y?w:1)/2;g+=c,x.setLayout([o*Math.cos(g)+a,o*Math.sin(g)+l]),g+=c})},symbolSize:function(r,t,n,o,a,l,d){var g=0;_symbolRadiansHalf.length=d;var y=getNodeGlobalScale(r);t.eachNode(function(w){var c=getSymbolSize(w);isNaN(c)&&(c=2),c<0&&(c=0),c*=y;var A=Math.asin(c/2/o);isNaN(A)&&(A=PI$2/2),_symbolRadiansHalf[w.dataIndex]=A,g+=A*2});var S=(2*PI$2-g)/d/2,x=0;t.eachNode(function(w){var c=S+_symbolRadiansHalf[w.dataIndex];x+=c,(!w.getLayout()||!w.getLayout().fixed)&&w.setLayout([o*Math.cos(x)+a,o*Math.sin(x)+l]),x+=c})}};function rotateNodeLabel(r,t,n,o){var a=r.getGraphicEl();if(a){var l=r.getModel(),d=l.get(["label","rotate"])||0,g=a.getSymbolPath();if(t){var y=r.getLayout(),S=Math.atan2(y[1]-o,y[0]-n);S<0&&(S=Math.PI*2+S);var x=y[0]<n;x&&(S=S-Math.PI);var w=x?"left":"right";g.setTextConfig({rotation:-S,position:w,origin:"center"});var c=g.ensureState("emphasis");extend(c.textConfig||(c.textConfig={}),{position:w})}else g.setTextConfig({rotation:d*=Math.PI/180})}}function graphCircularLayout(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&circularLayout(t,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(r,t,n){for(var o=r,a=t,l=n.rect,d=l.width,g=l.height,y=[l.x+d/2,l.y+g/2],S=n.gravity==null?.1:n.gravity,x=0;x<o.length;x++){var w=o[x];w.p||(w.p=create$2(d*(Math.random()-.5)+y[0],g*(Math.random()-.5)+y[1])),w.pp=clone$3(w.p),w.edges=null}var c=n.friction==null?.6:n.friction,A=c,R,L;return{warmUp:function(){A=c*.8},setFixed:function($){o[$].fixed=!0},setUnfixed:function($){o[$].fixed=!1},beforeStep:function($){R=$},afterStep:function($){L=$},step:function($){R&&R(o,a);for(var O=[],z=o.length,V=0;V<a.length;V++){var j=a[V];if(!j.ignoreForceLayout){var K=j.n1,Z=j.n2;sub(O,Z.p,K.p);var q=len(O)-j.d,ie=Z.w/(K.w+Z.w);isNaN(ie)&&(ie=0),normalize$3(O,O),!K.fixed&&scaleAndAdd(K.p,K.p,O,ie*q*A),!Z.fixed&&scaleAndAdd(Z.p,Z.p,O,-(1-ie)*q*A)}}for(var V=0;V<z;V++){var te=o[V];te.fixed||(sub(O,y,te.p),scaleAndAdd(te.p,te.p,O,S*A))}for(var V=0;V<z;V++)for(var K=o[V],oe=V+1;oe<z;oe++){var Z=o[oe];sub(O,Z.p,K.p);var q=len(O);q===0&&(set$1(O,Math.random()-.5,Math.random()-.5),q=1);var re=(K.rep+Z.rep)/q/q;!K.fixed&&scaleAndAdd(K.pp,K.pp,O,re),!Z.fixed&&scaleAndAdd(Z.pp,Z.pp,O,-re)}for(var he=[],V=0;V<z;V++){var te=o[V];te.fixed||(sub(he,te.p,te.pp),scaleAndAdd(te.p,te.p,he,A),copy$1(te.pp,te.p))}A=A*.992;var _e=A<.01;L&&L(o,a,_e),$&&$(_e)}}}function graphForceLayout(r){r.eachSeriesByType("graph",function(t){var n=t.coordinateSystem;if(!(n&&n.type!=="view"))if(t.get("layout")==="force"){var o=t.preservedPoints||{},a=t.getGraph(),l=a.data,d=a.edgeData,g=t.getModel("force"),y=g.get("initLayout");t.preservedPoints?l.each(function(V){var j=l.getId(V);l.setItemLayout(V,o[j]||[NaN,NaN])}):!y||y==="none"?simpleLayout(t):y==="circular"&&circularLayout(t,"value");var S=l.getDataExtent("value"),x=d.getDataExtent("value"),w=g.get("repulsion"),c=g.get("edgeLength"),A=isArray$1(w)?w:[w,w],R=isArray$1(c)?c:[c,c];R=[R[1],R[0]];var L=l.mapArray("value",function(V,j){var K=l.getItemLayout(j),Z=linearMap$2(V,S,A);return isNaN(Z)&&(Z=(A[0]+A[1])/2),{w:Z,rep:Z,fixed:l.getItemModel(j).get("fixed"),p:!K||isNaN(K[0])||isNaN(K[1])?null:K}}),$=d.mapArray("value",function(V,j){var K=a.getEdgeByIndex(j),Z=linearMap$2(V,x,R);isNaN(Z)&&(Z=(R[0]+R[1])/2);var q=K.getModel(),ie=retrieve3(K.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(K,t,j,!0),0);return{n1:L[K.node1.dataIndex],n2:L[K.node2.dataIndex],d:Z,curveness:ie,ignoreForceLayout:q.get("ignoreForceLayout")}}),O=n.getBoundingRect(),z=forceLayout(L,$,{rect:O,gravity:g.get("gravity"),friction:g.get("friction")});z.beforeStep(function(V,j){for(var K=0,Z=V.length;K<Z;K++)V[K].fixed&&copy$1(V[K].p,a.getNodeByIndex(K).getLayout())}),z.afterStep(function(V,j,K){for(var Z=0,q=V.length;Z<q;Z++)V[Z].fixed||a.getNodeByIndex(Z).setLayout(V[Z].p),o[l.getId(Z)]=V[Z].p;for(var Z=0,q=j.length;Z<q;Z++){var ie=j[Z],te=a.getEdgeByIndex(Z),oe=ie.n1.p,re=ie.n2.p,he=te.getLayout();he=he?he.slice():[],he[0]=he[0]||[],he[1]=he[1]||[],copy$1(he[0],oe),copy$1(he[1],re),+ie.curveness&&(he[2]=[(oe[0]+re[0])/2-(oe[1]-re[1])*ie.curveness,(oe[1]+re[1])/2-(re[0]-oe[0])*ie.curveness]),te.setLayout(he)}}),t.forceLayout=z,t.preservedPoints=o,z.step()}else t.forceLayout=null})}function getViewRect$3(r,t,n){var o=extend(r.getBoxLayoutParams(),{aspect:n});return getLayoutRect(o,{width:t.getWidth(),height:t.getHeight()})}function createViewCoordSys(r,t){var n=[];return r.eachSeriesByType("graph",function(o){var a=o.get("coordinateSystem");if(!a||a==="view"){var l=o.getData(),d=l.mapArray(function($){var O=l.getItemModel($);return[+O.get("x"),+O.get("y")]}),g=[],y=[];fromPoints(d,g,y),y[0]-g[0]===0&&(y[0]+=1,g[0]-=1),y[1]-g[1]===0&&(y[1]+=1,g[1]-=1);var S=(y[0]-g[0])/(y[1]-g[1]),x=getViewRect$3(o,t,S);isNaN(S)&&(g=[x.x,x.y],y=[x.x+x.width,x.y+x.height]);var w=y[0]-g[0],c=y[1]-g[1],A=x.width,R=x.height,L=o.coordinateSystem=new View$1;L.zoomLimit=o.get("scaleLimit"),L.setBoundingRect(g[0],g[1],w,c),L.setViewRect(x.x,x.y,A,R),L.setCenter(o.get("center"),t),L.setZoom(o.get("zoom")),n.push(L)}}),n}var straightLineProto=Line$3.prototype,bezierCurveProto=BezierCurve$1.prototype,StraightLineShape=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}();(function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(StraightLineShape);function isStraightLine(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var ECLinePath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="ec-line",o}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new StraightLineShape},t.prototype.buildPath=function(n,o){isStraightLine(o)?straightLineProto.buildPath.call(this,n,o):bezierCurveProto.buildPath.call(this,n,o)},t.prototype.pointAt=function(n){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,n):bezierCurveProto.pointAt.call(this,n)},t.prototype.tangentAt=function(n){var o=this.shape,a=isStraightLine(o)?[o.x2-o.x1,o.y2-o.y1]:bezierCurveProto.tangentAt.call(this,n);return normalize$3(a,a)},t}(Path$1);const ECLinePath$1=ECLinePath;var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(r){return"_"+r+"Type"}function makeSymbolTypeValue(r,t,n){var o=t.getItemVisual(n,r);if(!o||o==="none")return o;var a=t.getItemVisual(n,r+"Size"),l=t.getItemVisual(n,r+"Rotate"),d=t.getItemVisual(n,r+"Offset"),g=t.getItemVisual(n,r+"KeepAspect"),y=normalizeSymbolSize(a),S=normalizeSymbolOffset(d||0,y);return o+y+S+(l||"")+(g||"")}function createSymbol(r,t,n){var o=t.getItemVisual(n,r);if(!(!o||o==="none")){var a=t.getItemVisual(n,r+"Size"),l=t.getItemVisual(n,r+"Rotate"),d=t.getItemVisual(n,r+"Offset"),g=t.getItemVisual(n,r+"KeepAspect"),y=normalizeSymbolSize(a),S=normalizeSymbolOffset(d||0,y),x=createSymbol$1(o,-y[0]/2+S[0],-y[1]/2+S[1],y[0],y[1],null,g);return x.__specifiedRotation=l==null||isNaN(l)?void 0:+l*Math.PI/180||0,x.name=r,x}}function createLine(r){var t=new ECLinePath$1({name:"line",subPixelOptimize:!0});return setLinePoints(t.shape,r),t}function setLinePoints(r,t){r.x1=t[0][0],r.y1=t[0][1],r.x2=t[1][0],r.y2=t[1][1],r.percent=1;var n=t[2];n?(r.cpx1=n[0],r.cpy1=n[1]):(r.cpx1=NaN,r.cpy1=NaN)}var Line=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this)||this;return l._createLine(n,o,a),l}return t.prototype._createLine=function(n,o,a){var l=n.hostModel,d=n.getItemLayout(o),g=createLine(d);g.shape.percent=0,initProps(g,{shape:{percent:1}},l,o),this.add(g),each$f(SYMBOL_CATEGORIES,function(y){var S=createSymbol(y,n,o);this.add(S),this[makeSymbolTypeKey(y)]=makeSymbolTypeValue(y,n,o)},this),this._updateCommonStl(n,o,a)},t.prototype.updateData=function(n,o,a){var l=n.hostModel,d=this.childOfName("line"),g=n.getItemLayout(o),y={shape:{}};setLinePoints(y.shape,g),updateProps$1(d,y,l,o),each$f(SYMBOL_CATEGORIES,function(S){var x=makeSymbolTypeValue(S,n,o),w=makeSymbolTypeKey(S);if(this[w]!==x){this.remove(this.childOfName(S));var c=createSymbol(S,n,o);this.add(c)}this[w]=x},this),this._updateCommonStl(n,o,a)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(n,o,a){var l=n.hostModel,d=this.childOfName("line"),g=a&&a.emphasisLineStyle,y=a&&a.blurLineStyle,S=a&&a.selectLineStyle,x=a&&a.labelStatesModels,w=a&&a.emphasisDisabled,c=a&&a.focus,A=a&&a.blurScope;if(!a||n.hasItemOption){var R=n.getItemModel(o),L=R.getModel("emphasis");g=L.getModel("lineStyle").getLineStyle(),y=R.getModel(["blur","lineStyle"]).getLineStyle(),S=R.getModel(["select","lineStyle"]).getLineStyle(),w=L.get("disabled"),c=L.get("focus"),A=L.get("blurScope"),x=getLabelStatesModels(R)}var $=n.getItemVisual(o,"style"),O=$.stroke;d.useStyle($),d.style.fill=null,d.style.strokeNoScale=!0,d.ensureState("emphasis").style=g,d.ensureState("blur").style=y,d.ensureState("select").style=S,each$f(SYMBOL_CATEGORIES,function(Z){var q=this.childOfName(Z);if(q){q.setColor(O),q.style.opacity=$.opacity;for(var ie=0;ie<SPECIAL_STATES.length;ie++){var te=SPECIAL_STATES[ie],oe=d.getState(te);if(oe){var re=oe.style||{},he=q.ensureState(te),_e=he.style||(he.style={});re.stroke!=null&&(_e[q.__isEmptyBrush?"stroke":"fill"]=re.stroke),re.opacity!=null&&(_e.opacity=re.opacity)}}q.markRedraw()}},this);var z=l.getRawValue(o);setLabelStyle(this,x,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(Z,q){return l.getFormattedLabel(Z,q,n.dataType)}},inheritColor:O||"#000",defaultOpacity:$.opacity,defaultText:(z==null?n.getName(o):isFinite(z)?round$3(z):z)+""});var V=this.getTextContent();if(V){var j=x.normal;V.__align=V.style.align,V.__verticalAlign=V.style.verticalAlign,V.__position=j.get("position")||"middle";var K=j.get("distance");isArray$1(K)||(K=[K,K]),V.__labelDistance=K}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,c,A,w)},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t.prototype.updateLayout=function(n,o){this.setLinePoints(n.getItemLayout(o))},t.prototype.setLinePoints=function(n){var o=this.childOfName("line");setLinePoints(o.shape,n),o.dirty()},t.prototype.beforeUpdate=function(){var n=this,o=n.childOfName("fromSymbol"),a=n.childOfName("toSymbol"),l=n.getTextContent();if(!o&&!a&&(!l||l.ignore))return;for(var d=1,g=this.parent;g;)g.scaleX&&(d/=g.scaleX),g=g.parent;var y=n.childOfName("line");if(!this.__dirty&&!y.__dirty)return;var S=y.shape.percent,x=y.pointAt(0),w=y.pointAt(S),c=sub([],w,x);normalize$3(c,c);function A(oe,re){var he=oe.__specifiedRotation;if(he==null){var _e=y.tangentAt(re);oe.attr("rotation",(re===1?-1:1)*Math.PI/2-Math.atan2(_e[1],_e[0]))}else oe.attr("rotation",he)}if(o&&(o.setPosition(x),A(o,0),o.scaleX=o.scaleY=d*S,o.markRedraw()),a&&(a.setPosition(w),A(a,1),a.scaleX=a.scaleY=d*S,a.markRedraw()),l&&!l.ignore){l.x=l.y=0,l.originX=l.originY=0;var R=void 0,L=void 0,$=l.__labelDistance,O=$[0]*d,z=$[1]*d,V=S/2,j=y.tangentAt(V),K=[j[1],-j[0]],Z=y.pointAt(V);K[1]>0&&(K[0]=-K[0],K[1]=-K[1]);var q=j[0]<0?-1:1;if(l.__position!=="start"&&l.__position!=="end"){var ie=-Math.atan2(j[1],j[0]);w[0]<x[0]&&(ie=Math.PI+ie),l.rotation=ie}var te=void 0;switch(l.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":te=-z,L="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":te=z,L="top";break;default:te=0,L="middle"}switch(l.__position){case"end":l.x=c[0]*O+w[0],l.y=c[1]*z+w[1],R=c[0]>.8?"left":c[0]<-.8?"right":"center",L=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":l.x=-c[0]*O+x[0],l.y=-c[1]*z+x[1],R=c[0]>.8?"right":c[0]<-.8?"left":"center",L=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":l.x=O*q+x[0],l.y=x[1]+te,R=j[0]<0?"right":"left",l.originX=-O*q,l.originY=-te;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":l.x=Z[0],l.y=Z[1]+te,R="center",l.originY=-te;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":l.x=-O*q+w[0],l.y=w[1]+te,R=j[0]>=0?"right":"left",l.originX=O*q,l.originY=-te;break}l.scaleX=l.scaleY=d,l.setStyle({verticalAlign:l.__verticalAlign||L,align:l.__align||R})}},t}(Group$4);const Line$1=Line;var LineDraw=function(){function r(t){this.group=new Group$4,this._LineCtor=t||Line$1}return r.prototype.updateData=function(t){var n=this;this._progressiveEls=null;var o=this,a=o.group,l=o._lineData;o._lineData=t,l||a.removeAll();var d=makeSeriesScope$1(t);t.diff(l).add(function(g){n._doAdd(t,g,d)}).update(function(g,y){n._doUpdate(l,t,y,g,d)}).remove(function(g){a.remove(l.getItemGraphicEl(g))}).execute()},r.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(n,o){n.updateLayout(t,o)},this)},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=makeSeriesScope$1(t),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,n){this._progressiveEls=[];function o(g){!g.isGroup&&!isEffectObject(g)&&(g.incremental=!0,g.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var l=n.getItemLayout(a);if(lineNeedsDraw(l)){var d=new this._LineCtor(n,a,this._seriesScope);d.traverse(o),this.group.add(d),n.setItemGraphicEl(a,d),this._progressiveEls.push(d)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(t){traverseElements(this._progressiveEls||this.group,t)},r.prototype._doAdd=function(t,n,o){var a=t.getItemLayout(n);if(lineNeedsDraw(a)){var l=new this._LineCtor(t,n,o);t.setItemGraphicEl(n,l),this.group.add(l)}},r.prototype._doUpdate=function(t,n,o,a,l){var d=t.getItemGraphicEl(o);if(!lineNeedsDraw(n.getItemLayout(a))){this.group.remove(d);return}d?d.updateData(n,a,l):d=new this._LineCtor(n,a,l),n.setItemGraphicEl(a,d),this.group.add(d)},r}();function isEffectObject(r){return r.animators&&r.animators.length>0}function makeSeriesScope$1(r){var t=r.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:getLabelStatesModels(t)}}function isPointNaN(r){return isNaN(r[0])||isNaN(r[1])}function lineNeedsDraw(r){return r&&!isPointNaN(r[0])&&!isPointNaN(r[1])}const LineDraw$1=LineDraw;var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(r,t,n){for(var o=r[0],a=r[1],l=r[2],d=1/0,g,y=n*n,S=.1,x=.1;x<=.9;x+=.1){v1[0]=quadraticAt(o[0],a[0],l[0],x),v1[1]=quadraticAt(o[1],a[1],l[1],x);var w=mathAbs(v2DistSquare(v1,t)-y);w<d&&(d=w,g=x)}for(var c=0;c<32;c++){var A=g+S;v2[0]=quadraticAt(o[0],a[0],l[0],g),v2[1]=quadraticAt(o[1],a[1],l[1],g),v3[0]=quadraticAt(o[0],a[0],l[0],A),v3[1]=quadraticAt(o[1],a[1],l[1],A);var w=v2DistSquare(v2,t)-y;if(mathAbs(w)<.01)break;var R=v2DistSquare(v3,t)-y;S/=2,w<0?R>=0?g=g+S:g=g-S:R>=0?g=g-S:g=g+S}return g}function adjustEdge(r,t){var n=[],o=quadraticSubdivide,a=[[],[],[]],l=[[],[]],d=[];t/=2,r.eachEdge(function(g,y){var S=g.getLayout(),x=g.getVisual("fromSymbol"),w=g.getVisual("toSymbol");S.__original||(S.__original=[clone$3(S[0]),clone$3(S[1])],S[2]&&S.__original.push(clone$3(S[2])));var c=S.__original;if(S[2]!=null){if(copy$1(a[0],c[0]),copy$1(a[1],c[2]),copy$1(a[2],c[1]),x&&x!=="none"){var A=getSymbolSize(g.node1),R=intersectCurveCircle(a,c[0],A*t);o(a[0][0],a[1][0],a[2][0],R,n),a[0][0]=n[3],a[1][0]=n[4],o(a[0][1],a[1][1],a[2][1],R,n),a[0][1]=n[3],a[1][1]=n[4]}if(w&&w!=="none"){var A=getSymbolSize(g.node2),R=intersectCurveCircle(a,c[1],A*t);o(a[0][0],a[1][0],a[2][0],R,n),a[1][0]=n[1],a[2][0]=n[2],o(a[0][1],a[1][1],a[2][1],R,n),a[1][1]=n[1],a[2][1]=n[2]}copy$1(S[0],a[0]),copy$1(S[1],a[2]),copy$1(S[2],a[1])}else{if(copy$1(l[0],c[0]),copy$1(l[1],c[1]),sub(d,l[1],l[0]),normalize$3(d,d),x&&x!=="none"){var A=getSymbolSize(g.node1);scaleAndAdd$1(l[0],l[0],d,A*t)}if(w&&w!=="none"){var A=getSymbolSize(g.node2);scaleAndAdd$1(l[1],l[1],d,-A*t)}copy$1(S[0],l[0]),copy$1(S[1],l[1])}})}function isViewCoordSys(r){return r.type==="view"}var GraphView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o){var a=new SymbolDraw$1,l=new LineDraw$1,d=this.group;this._controller=new RoamController$1(o.getZr()),this._controllerHost={target:d},d.add(a.group),d.add(l.group),this._symbolDraw=a,this._lineDraw=l,this._firstRender=!0},t.prototype.render=function(n,o,a){var l=this,d=n.coordinateSystem;this._model=n;var g=this._symbolDraw,y=this._lineDraw,S=this.group;if(isViewCoordSys(d)){var x={x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY};this._firstRender?S.attr(x):updateProps$1(S,x,n)}adjustEdge(n.getGraph(),getNodeGlobalScale(n));var w=n.getData();g.updateData(w);var c=n.getEdgeData();y.updateData(c),this._updateNodeAndLinkScale(),this._updateController(n,o,a),clearTimeout(this._layoutTimeout);var A=n.forceLayout,R=n.get(["force","layoutAnimation"]);A&&this._startForceLayoutIteration(A,R);var L=n.get("layout");w.graph.eachNode(function(V){var j=V.dataIndex,K=V.getGraphicEl(),Z=V.getModel();if(K){K.off("drag").off("dragend");var q=Z.get("draggable");q&&K.on("drag",function(te){switch(L){case"force":A.warmUp(),!l._layouting&&l._startForceLayoutIteration(A,R),A.setFixed(j),w.setItemLayout(j,[K.x,K.y]);break;case"circular":w.setItemLayout(j,[K.x,K.y]),V.setLayout({fixed:!0},!0),circularLayout(n,"symbolSize",V,[te.offsetX,te.offsetY]),l.updateLayout(n);break;case"none":default:w.setItemLayout(j,[K.x,K.y]),simpleLayoutEdge(n.getGraph(),n),l.updateLayout(n);break}}).on("dragend",function(){A&&A.setUnfixed(j)}),K.setDraggable(q,!!Z.get("cursor"));var ie=Z.get(["emphasis","focus"]);ie==="adjacency"&&(getECData(K).focus=V.getAdjacentDataIndices())}}),w.graph.eachEdge(function(V){var j=V.getGraphicEl(),K=V.getModel().get(["emphasis","focus"]);j&&K==="adjacency"&&(getECData(j).focus={edge:[V.dataIndex],node:[V.node1.dataIndex,V.node2.dataIndex]})});var $=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),O=w.getLayout("cx"),z=w.getLayout("cy");w.graph.eachNode(function(V){rotateNodeLabel(V,$,O,z)}),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(n,o){var a=this;(function l(){n.step(function(d){a.updateLayout(a._model),(a._layouting=!d)&&(o?a._layoutTimeout=setTimeout(l,16):l())})})()},t.prototype._updateController=function(n,o,a){var l=this,d=this._controller,g=this._controllerHost,y=this.group;if(d.setPointerChecker(function(S,x,w){var c=y.getBoundingRect();return c.applyTransform(y.transform),c.contain(x,w)&&!onIrrelevantElement(S,a,n)}),!isViewCoordSys(n.coordinateSystem)){d.disable();return}d.enable(n.get("roam")),g.zoomLimit=n.get("scaleLimit"),g.zoom=n.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(S){updateViewOnPan(g,S.dx,S.dy),a.dispatchAction({seriesId:n.id,type:"graphRoam",dx:S.dx,dy:S.dy})}).on("zoom",function(S){updateViewOnZoom(g,S.scale,S.originX,S.originY),a.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:S.scale,originX:S.originX,originY:S.originY}),l._updateNodeAndLinkScale(),adjustEdge(n.getGraph(),getNodeGlobalScale(n)),l._lineDraw.updateLayout(),a.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var n=this._model,o=n.getData(),a=getNodeGlobalScale(n);o.eachItemGraphicEl(function(l,d){l&&l.setSymbolScale(a)})},t.prototype.updateLayout=function(n){adjustEdge(n.getGraph(),getNodeGlobalScale(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(n,o){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(ChartView$1);const GraphView$1=GraphView;function generateNodeKey(r){return"_EC_"+r}var Graph=function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,n){t=t==null?""+n:""+t;var o=this._nodesMap;if(!o[generateNodeKey(t)]){var a=new GraphNode(t,n);return a.hostGraph=this,this.nodes.push(a),o[generateNodeKey(t)]=a,a}},r.prototype.getNodeByIndex=function(t){var n=this.data.getRawIndex(t);return this.nodes[n]},r.prototype.getNodeById=function(t){return this._nodesMap[generateNodeKey(t)]},r.prototype.addEdge=function(t,n,o){var a=this._nodesMap,l=this._edgesMap;if(isNumber(t)&&(t=this.nodes[t]),isNumber(n)&&(n=this.nodes[n]),t instanceof GraphNode||(t=a[generateNodeKey(t)]),n instanceof GraphNode||(n=a[generateNodeKey(n)]),!(!t||!n)){var d=t.id+"-"+n.id,g=new GraphEdge(t,n,o);return g.hostGraph=this,this._directed&&(t.outEdges.push(g),n.inEdges.push(g)),t.edges.push(g),t!==n&&n.edges.push(g),this.edges.push(g),l[d]=g,g}},r.prototype.getEdgeByIndex=function(t){var n=this.edgeData.getRawIndex(t);return this.edges[n]},r.prototype.getEdge=function(t,n){t instanceof GraphNode&&(t=t.id),n instanceof GraphNode&&(n=n.id);var o=this._edgesMap;return this._directed?o[t+"-"+n]:o[t+"-"+n]||o[n+"-"+t]},r.prototype.eachNode=function(t,n){for(var o=this.nodes,a=o.length,l=0;l<a;l++)o[l].dataIndex>=0&&t.call(n,o[l],l)},r.prototype.eachEdge=function(t,n){for(var o=this.edges,a=o.length,l=0;l<a;l++)o[l].dataIndex>=0&&o[l].node1.dataIndex>=0&&o[l].node2.dataIndex>=0&&t.call(n,o[l],l)},r.prototype.breadthFirstTraverse=function(t,n,o,a){if(n instanceof GraphNode||(n=this._nodesMap[generateNodeKey(n)]),!!n){for(var l=o==="out"?"outEdges":o==="in"?"inEdges":"edges",d=0;d<this.nodes.length;d++)this.nodes[d].__visited=!1;if(!t.call(a,n,null))for(var g=[n];g.length;)for(var y=g.shift(),S=y[l],d=0;d<S.length;d++){var x=S[d],w=x.node1===y?x.node2:x.node1;if(!w.__visited){if(t.call(a,w,y))return;g.push(w),w.__visited=!0}}}},r.prototype.update=function(){for(var t=this.data,n=this.edgeData,o=this.nodes,a=this.edges,l=0,d=o.length;l<d;l++)o[l].dataIndex=-1;for(var l=0,d=t.count();l<d;l++)o[t.getRawIndex(l)].dataIndex=l;n.filterSelf(function(g){var y=a[n.getRawIndex(g)];return y.node1.dataIndex>=0&&y.node2.dataIndex>=0});for(var l=0,d=a.length;l<d;l++)a[l].dataIndex=-1;for(var l=0,d=n.count();l<d;l++)a[n.getRawIndex(l)].dataIndex=l},r.prototype.clone=function(){for(var t=new r(this._directed),n=this.nodes,o=this.edges,a=0;a<n.length;a++)t.addNode(n[a].id,n[a].dataIndex);for(var a=0;a<o.length;a++){var l=o[a];t.addEdge(l.node1.id,l.node2.id,l.dataIndex)}return t},r}(),GraphNode=function(){function r(t,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=n??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var n=this.hostGraph,o=n.data.getItemModel(this.dataIndex);return o.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},n=0;n<this.edges.length;n++){var o=this.edges[n];o.dataIndex<0||(t.edge.push(o.dataIndex),t.node.push(o.node1.dataIndex,o.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=createHashMap(),n=createHashMap(),o=0;o<this.edges.length;o++){var a=this.edges[o];if(!(a.dataIndex<0)){t.set(a.dataIndex,!0);for(var l=[a.node1],d=[a.node2],g=0;g<l.length;){var y=l[g];g++,n.set(y.dataIndex,!0);for(var S=0;S<y.inEdges.length;S++)t.set(y.inEdges[S].dataIndex,!0),l.push(y.inEdges[S].node1)}for(g=0;g<d.length;){var x=d[g];g++,n.set(x.dataIndex,!0);for(var S=0;S<x.outEdges.length;S++)t.set(x.outEdges[S].dataIndex,!0),d.push(x.outEdges[S].node2)}}}return{edge:t.keys(),node:n.keys()}},r}(),GraphEdge=function(){function r(t,n,o){this.dataIndex=-1,this.node1=t,this.node2=n,this.dataIndex=o??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var n=this.hostGraph,o=n.edgeData.getItemModel(this.dataIndex);return o.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=createHashMap(),n=createHashMap();t.set(this.dataIndex,!0);for(var o=[this.node1],a=[this.node2],l=0;l<o.length;){var d=o[l];l++,n.set(d.dataIndex,!0);for(var g=0;g<d.inEdges.length;g++)t.set(d.inEdges[g].dataIndex,!0),o.push(d.inEdges[g].node1)}for(l=0;l<a.length;){var y=a[l];l++,n.set(y.dataIndex,!0);for(var g=0;g<y.outEdges.length;g++)t.set(y.outEdges[g].dataIndex,!0),a.push(y.outEdges[g].node2)}return{edge:t.keys(),node:n.keys()}},r}();function createGraphDataProxyMixin(r,t){return{getValue:function(n){var o=this[r][t];return o.getStore().get(o.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,o){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,n,o)},getVisual:function(n){return this[r][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,o){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));const Graph$1=Graph;function createGraphFromNodeEdge(r,t,n,o,a){for(var l=new Graph$1(o),d=0;d<r.length;d++)l.addNode(retrieve(r[d].id,r[d].name,d),d);for(var g=[],y=[],S=0,d=0;d<t.length;d++){var x=t[d],w=x.source,c=x.target;l.addEdge(w,c,S)&&(y.push(x),g.push(retrieve(convertOptionIdName(x.id,null),w+" > "+c)),S++)}var A=n.get("coordinateSystem"),R;if(A==="cartesian2d"||A==="polar")R=createSeriesData(r,n);else{var L=CoordinateSystem.get(A),$=L?L.dimensions||[]:[];indexOf($,"value")<0&&$.concat(["value"]);var O=prepareSeriesDataSchema(r,{coordDimensions:$,encodeDefine:n.getEncode()}).dimensions;R=new SeriesData$1(O,n),R.initData(r)}var z=new SeriesData$1(["value"],n);return z.initData(y,g),a&&a(R,z),linkSeriesData({mainData:R,struct:l,structAttr:"graph",datas:{node:R,edge:z},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}var GraphSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.init=function(n){r.prototype.init.apply(this,arguments);var o=this;function a(){return o._categoriesData}this.legendVisualProvider=new LegendVisualProvider$1(a,a),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},t.prototype.mergeOption=function(n){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(n){r.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(n,"edgeLabel",["show"])},t.prototype.getInitialData=function(n,o){var a=n.edges||n.links||[],l=n.data||n.nodes||[],d=this;if(l&&a){initCurvenessList(this);var g=createGraphFromNodeEdge(l,a,this,!0,y);return each$f(g.edges,function(S){createEdgeMapForCurveness(S.node1,S.node2,this,S.dataIndex)},this),g.data}function y(S,x){S.wrapMethod("getItemModel",function(R){var L=d._categoriesModels,$=R.getShallow("category"),O=L[$];return O&&(O.parentModel=R.parentModel,R.parentModel=O),R});var w=Model$1.prototype.getModel;function c(R,L){var $=w.call(this,R,L);return $.resolveParentPath=A,$}x.wrapMethod("getItemModel",function(R){return R.resolveParentPath=A,R.getModel=c,R});function A(R){if(R&&(R[0]==="label"||R[1]==="label")){var L=R.slice();return R[0]==="label"?L[0]="edgeLabel":R[1]==="label"&&(L[1]="edgeLabel"),L}return R}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(n,o,a){if(a==="edge"){var l=this.getData(),d=this.getDataParams(n,a),g=l.graph.getEdgeByIndex(n),y=l.getName(g.node1.dataIndex),S=l.getName(g.node2.dataIndex),x=[];return y!=null&&x.push(y),S!=null&&x.push(S),createTooltipMarkup("nameValue",{name:x.join(" > "),value:d.value,noValue:d.value==null})}var w=defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:o});return w},t.prototype._updateCategoriesData=function(){var n=map$1(this.option.categories||[],function(a){return a.value!=null?a:extend({value:0},a)}),o=new SeriesData$1(["value"],this);o.initData(n),this._categoriesData=o,this._categoriesModels=o.mapArray(function(a){return o.getItemModel(a)})},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(SeriesModel$1);const GraphSeriesModel$1=GraphSeriesModel;var actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(r){r.registerChartView(GraphView$1),r.registerSeriesModel(GraphSeriesModel$1),r.registerProcessor(categoryFilter),r.registerVisual(categoryVisual),r.registerVisual(graphEdgeVisual),r.registerLayout(graphSimpleLayout),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),r.registerLayout(graphForceLayout),r.registerCoordinateSystem("graphView",{dimensions:View$1.dimensions,create:createViewCoordSys}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),r.registerAction(actionInfo$1,function(t,n,o){n.eachComponent({mainType:"series",query:t},function(a){var l=a.coordinateSystem,d=updateCenterAndZoom(l,t,void 0,o);a.setCenter&&a.setCenter(d.center),a.setZoom&&a.setZoom(d.zoom)})})}var PointerShape=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),PointerPath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="pointer",o}return t.prototype.getDefaultShape=function(){return new PointerShape},t.prototype.buildPath=function(n,o){var a=Math.cos,l=Math.sin,d=o.r,g=o.width,y=o.angle,S=o.x-a(y)*g*(g>=d/3?1:2),x=o.y-l(y)*g*(g>=d/3?1:2);y=o.angle-Math.PI/2,n.moveTo(S,x),n.lineTo(o.x+a(y)*g,o.y+l(y)*g),n.lineTo(o.x+a(o.angle)*d,o.y+l(o.angle)*d),n.lineTo(o.x-a(y)*g,o.y-l(y)*g),n.lineTo(S,x)},t}(Path$1);const PointerPath$1=PointerPath;function parsePosition(r,t){var n=r.get("center"),o=t.getWidth(),a=t.getHeight(),l=Math.min(o,a),d=parsePercent(n[0],t.getWidth()),g=parsePercent(n[1],t.getHeight()),y=parsePercent(r.get("radius"),l/2);return{cx:d,cy:g,r:y}}function formatLabel(r,t){var n=r==null?"":r+"";return t&&(isString(t)?n=t.replace("{value}",n):isFunction(t)&&(n=t(r))),n}var GaugeView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){this.group.removeAll();var l=n.get(["axisLine","lineStyle","color"]),d=parsePosition(n,a);this._renderMain(n,o,a,l,d),this._data=n.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(n,o,a,l,d){var g=this.group,y=n.get("clockwise"),S=-n.get("startAngle")/180*Math.PI,x=-n.get("endAngle")/180*Math.PI,w=n.getModel("axisLine"),c=w.get("roundCap"),A=c?Sausage:Sector$1,R=w.get("show"),L=w.getModel("lineStyle"),$=L.get("width"),O=[S,x];normalizeArcAngles(O,!y),S=O[0],x=O[1];for(var z=x-S,V=S,j=[],K=0;R&&K<l.length;K++){var Z=Math.min(Math.max(l[K][0],0),1);x=S+z*Z;var q=new A({shape:{startAngle:V,endAngle:x,cx:d.cx,cy:d.cy,clockwise:y,r0:d.r-$,r:d.r},silent:!0});q.setStyle({fill:l[K][1]}),q.setStyle(L.getLineStyle(["color","width"])),j.push(q),V=x}j.reverse(),each$f(j,function(te){return g.add(te)});var ie=function(te){if(te<=0)return l[0][1];var oe;for(oe=0;oe<l.length;oe++)if(l[oe][0]>=te&&(oe===0?0:l[oe-1][0])<te)return l[oe][1];return l[oe-1][1]};this._renderTicks(n,o,a,ie,d,S,x,y,$),this._renderTitleAndDetail(n,o,a,ie,d),this._renderAnchor(n,d),this._renderPointer(n,o,a,ie,d,S,x,y,$)},t.prototype._renderTicks=function(n,o,a,l,d,g,y,S,x){for(var w=this.group,c=d.cx,A=d.cy,R=d.r,L=+n.get("min"),$=+n.get("max"),O=n.getModel("splitLine"),z=n.getModel("axisTick"),V=n.getModel("axisLabel"),j=n.get("splitNumber"),K=z.get("splitNumber"),Z=parsePercent(O.get("length"),R),q=parsePercent(z.get("length"),R),ie=g,te=(y-g)/j,oe=te/K,re=O.getModel("lineStyle").getLineStyle(),he=z.getModel("lineStyle").getLineStyle(),_e=O.get("distance"),me,be,Q=0;Q<=j;Q++){if(me=Math.cos(ie),be=Math.sin(ie),O.get("show")){var Ne=_e?_e+x:x,Ee=new Line$3({shape:{x1:me*(R-Ne)+c,y1:be*(R-Ne)+A,x2:me*(R-Z-Ne)+c,y2:be*(R-Z-Ne)+A},style:re,silent:!0});re.stroke==="auto"&&Ee.setStyle({stroke:l(Q/j)}),w.add(Ee)}if(V.get("show")){var Ne=V.get("distance")+_e,Ge=formatLabel(round$3(Q/j*($-L)+L),V.get("formatter")),it=l(Q/j),Te=me*(R-Z-Ne)+c,Ke=be*(R-Z-Ne)+A,Tt=V.get("rotate"),Lt=0;Tt==="radial"?(Lt=-ie+2*Math.PI,Lt>Math.PI/2&&(Lt+=Math.PI)):Tt==="tangential"?Lt=-ie-Math.PI/2:isNumber(Tt)&&(Lt=Tt*Math.PI/180),Lt===0?w.add(new ZRText$1({style:createTextStyle$1(V,{text:Ge,x:Te,y:Ke,verticalAlign:be<-.8?"top":be>.8?"bottom":"middle",align:me<-.4?"left":me>.4?"right":"center"},{inheritColor:it}),silent:!0})):w.add(new ZRText$1({style:createTextStyle$1(V,{text:Ge,x:Te,y:Ke,verticalAlign:"middle",align:"center"},{inheritColor:it}),silent:!0,originX:Te,originY:Ke,rotation:Lt}))}if(z.get("show")&&Q!==j){var Ne=z.get("distance");Ne=Ne?Ne+x:x;for(var Qt=0;Qt<=K;Qt++){me=Math.cos(ie),be=Math.sin(ie);var Xe=new Line$3({shape:{x1:me*(R-Ne)+c,y1:be*(R-Ne)+A,x2:me*(R-q-Ne)+c,y2:be*(R-q-Ne)+A},silent:!0,style:he});he.stroke==="auto"&&Xe.setStyle({stroke:l((Q+Qt/K)/j)}),w.add(Xe),ie+=oe}ie-=oe}else ie+=te}},t.prototype._renderPointer=function(n,o,a,l,d,g,y,S,x){var w=this.group,c=this._data,A=this._progressEls,R=[],L=n.get(["pointer","show"]),$=n.getModel("progress"),O=$.get("show"),z=n.getData(),V=z.mapDimension("value"),j=+n.get("min"),K=+n.get("max"),Z=[j,K],q=[g,y];function ie(oe,re){var he=z.getItemModel(oe),_e=he.getModel("pointer"),me=parsePercent(_e.get("width"),d.r),be=parsePercent(_e.get("length"),d.r),Q=n.get(["pointer","icon"]),Ne=_e.get("offsetCenter"),Ee=parsePercent(Ne[0],d.r),Ge=parsePercent(Ne[1],d.r),it=_e.get("keepAspect"),Te;return Q?Te=createSymbol$1(Q,Ee-me/2,Ge-be,me,be,null,it):Te=new PointerPath$1({shape:{angle:-Math.PI/2,width:me,r:be,x:Ee,y:Ge}}),Te.rotation=-(re+Math.PI/2),Te.x=d.cx,Te.y=d.cy,Te}function te(oe,re){var he=$.get("roundCap"),_e=he?Sausage:Sector$1,me=$.get("overlap"),be=me?$.get("width"):x/z.count(),Q=me?d.r-be:d.r-(oe+1)*be,Ne=me?d.r:d.r-oe*be,Ee=new _e({shape:{startAngle:g,endAngle:re,cx:d.cx,cy:d.cy,clockwise:S,r0:Q,r:Ne}});return me&&(Ee.z2=K-z.get(V,oe)%K),Ee}(O||L)&&(z.diff(c).add(function(oe){var re=z.get(V,oe);if(L){var he=ie(oe,g);initProps(he,{rotation:-((isNaN(+re)?q[0]:linearMap$2(re,Z,q,!0))+Math.PI/2)},n),w.add(he),z.setItemGraphicEl(oe,he)}if(O){var _e=te(oe,g),me=$.get("clip");initProps(_e,{shape:{endAngle:linearMap$2(re,Z,q,me)}},n),w.add(_e),setCommonECData(n.seriesIndex,z.dataType,oe,_e),R[oe]=_e}}).update(function(oe,re){var he=z.get(V,oe);if(L){var _e=c.getItemGraphicEl(re),me=_e?_e.rotation:g,be=ie(oe,me);be.rotation=me,updateProps$1(be,{rotation:-((isNaN(+he)?q[0]:linearMap$2(he,Z,q,!0))+Math.PI/2)},n),w.add(be),z.setItemGraphicEl(oe,be)}if(O){var Q=A[re],Ne=Q?Q.shape.endAngle:g,Ee=te(oe,Ne),Ge=$.get("clip");updateProps$1(Ee,{shape:{endAngle:linearMap$2(he,Z,q,Ge)}},n),w.add(Ee),setCommonECData(n.seriesIndex,z.dataType,oe,Ee),R[oe]=Ee}}).execute(),z.each(function(oe){var re=z.getItemModel(oe),he=re.getModel("emphasis"),_e=he.get("focus"),me=he.get("blurScope"),be=he.get("disabled");if(L){var Q=z.getItemGraphicEl(oe),Ne=z.getItemVisual(oe,"style"),Ee=Ne.fill;if(Q instanceof ZRImage$1){var Ge=Q.style;Q.useStyle(extend({image:Ge.image,x:Ge.x,y:Ge.y,width:Ge.width,height:Ge.height},Ne))}else Q.useStyle(Ne),Q.type!=="pointer"&&Q.setColor(Ee);Q.setStyle(re.getModel(["pointer","itemStyle"]).getItemStyle()),Q.style.fill==="auto"&&Q.setStyle("fill",l(linearMap$2(z.get(V,oe),Z,[0,1],!0))),Q.z2EmphasisLift=0,setStatesStylesFromModel(Q,re),toggleHoverEmphasis(Q,_e,me,be)}if(O){var it=R[oe];it.useStyle(z.getItemVisual(oe,"style")),it.setStyle(re.getModel(["progress","itemStyle"]).getItemStyle()),it.z2EmphasisLift=0,setStatesStylesFromModel(it,re),toggleHoverEmphasis(it,_e,me,be)}}),this._progressEls=R)},t.prototype._renderAnchor=function(n,o){var a=n.getModel("anchor"),l=a.get("show");if(l){var d=a.get("size"),g=a.get("icon"),y=a.get("offsetCenter"),S=a.get("keepAspect"),x=createSymbol$1(g,o.cx-d/2+parsePercent(y[0],o.r),o.cy-d/2+parsePercent(y[1],o.r),d,d,null,S);x.z2=a.get("showAbove")?1:0,x.setStyle(a.getModel("itemStyle").getItemStyle()),this.group.add(x)}},t.prototype._renderTitleAndDetail=function(n,o,a,l,d){var g=this,y=n.getData(),S=y.mapDimension("value"),x=+n.get("min"),w=+n.get("max"),c=new Group$4,A=[],R=[],L=n.isAnimationEnabled(),$=n.get(["pointer","showAbove"]);y.diff(this._data).add(function(O){A[O]=new ZRText$1({silent:!0}),R[O]=new ZRText$1({silent:!0})}).update(function(O,z){A[O]=g._titleEls[z],R[O]=g._detailEls[z]}).execute(),y.each(function(O){var z=y.getItemModel(O),V=y.get(S,O),j=new Group$4,K=l(linearMap$2(V,[x,w],[0,1],!0)),Z=z.getModel("title");if(Z.get("show")){var q=Z.get("offsetCenter"),ie=d.cx+parsePercent(q[0],d.r),te=d.cy+parsePercent(q[1],d.r),oe=A[O];oe.attr({z2:$?0:2,style:createTextStyle$1(Z,{x:ie,y:te,text:y.getName(O),align:"center",verticalAlign:"middle"},{inheritColor:K})}),j.add(oe)}var re=z.getModel("detail");if(re.get("show")){var he=re.get("offsetCenter"),_e=d.cx+parsePercent(he[0],d.r),me=d.cy+parsePercent(he[1],d.r),be=parsePercent(re.get("width"),d.r),Q=parsePercent(re.get("height"),d.r),Ne=n.get(["progress","show"])?y.getItemVisual(O,"style").fill:K,oe=R[O],Ee=re.get("formatter");oe.attr({z2:$?0:2,style:createTextStyle$1(re,{x:_e,y:me,text:formatLabel(V,Ee),width:isNaN(be)?null:be,height:isNaN(Q)?null:Q,align:"center",verticalAlign:"middle"},{inheritColor:Ne})}),setLabelValueAnimation(oe,{normal:re},V,function(it){return formatLabel(it,Ee)}),L&&animateLabelValue(oe,O,y,n,{getFormattedLabel:function(it,Te,Ke,Tt,Lt,Qt){return formatLabel(Qt?Qt.interpolatedValue:V,Ee)}}),j.add(oe)}c.add(j)}),this.group.add(c),this._titleEls=A,this._detailEls=R},t.type="gauge",t}(ChartView$1);const GaugeView$1=GaugeView;var GaugeSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n}return t.prototype.getInitialData=function(n,o){return createSeriesDataSimply(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(SeriesModel$1);const GaugeSeriesModel$1=GaugeSeriesModel;function install$E(r){r.registerChartView(GaugeView$1),r.registerSeriesModel(GaugeSeriesModel$1)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(r){__extends(t,r);function t(n,o){var a=r.call(this)||this,l=a,d=new Polyline$3,g=new ZRText$1;return l.setTextContent(g),a.setTextGuideLine(d),a.updateData(n,o,!0),a}return t.prototype.updateData=function(n,o,a){var l=this,d=n.hostModel,g=n.getItemModel(o),y=n.getItemLayout(o),S=g.getModel("emphasis"),x=g.get(opacityAccessPath$1);x=x??1,a||saveOldStyle(l),l.useStyle(n.getItemVisual(o,"style")),l.style.lineJoin="round",a?(l.setShape({points:y.points}),l.style.opacity=0,initProps(l,{style:{opacity:x}},d,o)):updateProps$1(l,{style:{opacity:x},shape:{points:y.points}},d,o),setStatesStylesFromModel(l,g),this._updateLabel(n,o),toggleHoverEmphasis(this,S.get("focus"),S.get("blurScope"),S.get("disabled"))},t.prototype._updateLabel=function(n,o){var a=this,l=this.getTextGuideLine(),d=a.getTextContent(),g=n.hostModel,y=n.getItemModel(o),S=n.getItemLayout(o),x=S.label,w=n.getItemVisual(o,"style"),c=w.fill;setLabelStyle(d,getLabelStatesModels(y),{labelFetcher:n.hostModel,labelDataIndex:o,defaultOpacity:w.opacity,defaultText:n.getName(o)},{normal:{align:x.textAlign,verticalAlign:x.verticalAlign}}),a.setTextConfig({local:!0,inside:!!x.inside,insideStroke:c,outsideFill:c});var A=x.linePoints;l.setShape({points:A}),a.textGuideLineConfig={anchor:A?new Point$1(A[0][0],A[0][1]):null},updateProps$1(d,{style:{x:x.x,y:x.y}},g,o),d.attr({rotation:x.rotation,originX:x.x,originY:x.y,z2:10}),setLabelLineStyle(a,getLabelLineStatesModels(y),{stroke:c})},t}(Polygon$1),FunnelView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.ignoreLabelLineUpdate=!0,n}return t.prototype.render=function(n,o,a){var l=n.getData(),d=this._data,g=this.group;l.diff(d).add(function(y){var S=new FunnelPiece(l,y);l.setItemGraphicEl(y,S),g.add(S)}).update(function(y,S){var x=d.getItemGraphicEl(S);x.updateData(l,y),g.add(x),l.setItemGraphicEl(y,x)}).remove(function(y){var S=d.getItemGraphicEl(y);removeElementWithFadeOut(S,n,y)}).execute(),this._data=l},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(ChartView$1);const FunnelView$1=FunnelView;var FunnelSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},t.prototype.getInitialData=function(n,o){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},t.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var o=n.labelLine,a=n.emphasis.labelLine;o.show=o.show&&n.label.show,a.show=a.show&&n.emphasis.label.show},t.prototype.getDataParams=function(n){var o=this.getData(),a=r.prototype.getDataParams.call(this,n),l=o.mapDimension("value"),d=o.getSum(l);return a.percent=d?+(o.get(l,n)/d*100).toFixed(2):0,a.$vars.push("percent"),a},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(SeriesModel$1);const FunnelSeriesModel$1=FunnelSeriesModel;function getViewRect$2(r,t){return getLayoutRect(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function getSortedIndices(r,t){for(var n=r.mapDimension("value"),o=r.mapArray(n,function(y){return y}),a=[],l=t==="ascending",d=0,g=r.count();d<g;d++)a[d]=d;return isFunction(t)?a.sort(t):t!=="none"&&a.sort(function(y,S){return l?o[y]-o[S]:o[S]-o[y]}),a}function labelLayout(r){var t=r.hostModel,n=t.get("orient");r.each(function(o){var a=r.getItemModel(o),l=a.getModel("label"),d=l.get("position"),g=a.getModel("labelLine"),y=r.getItemLayout(o),S=y.points,x=d==="inner"||d==="inside"||d==="center"||d==="insideLeft"||d==="insideRight",w,c,A,R;if(x)d==="insideLeft"?(c=(S[0][0]+S[3][0])/2+5,A=(S[0][1]+S[3][1])/2,w="left"):d==="insideRight"?(c=(S[1][0]+S[2][0])/2-5,A=(S[1][1]+S[2][1])/2,w="right"):(c=(S[0][0]+S[1][0]+S[2][0]+S[3][0])/4,A=(S[0][1]+S[1][1]+S[2][1]+S[3][1])/4,w="center"),R=[[c,A],[c,A]];else{var L=void 0,$=void 0,O=void 0,z=void 0,V=g.get("length");d==="left"?(L=(S[3][0]+S[0][0])/2,$=(S[3][1]+S[0][1])/2,O=L-V,c=O-5,w="right"):d==="right"?(L=(S[1][0]+S[2][0])/2,$=(S[1][1]+S[2][1])/2,O=L+V,c=O+5,w="left"):d==="top"?(L=(S[3][0]+S[0][0])/2,$=(S[3][1]+S[0][1])/2,z=$-V,A=z-5,w="center"):d==="bottom"?(L=(S[1][0]+S[2][0])/2,$=(S[1][1]+S[2][1])/2,z=$+V,A=z+5,w="center"):d==="rightTop"?(L=n==="horizontal"?S[3][0]:S[1][0],$=n==="horizontal"?S[3][1]:S[1][1],n==="horizontal"?(z=$-V,A=z-5,w="center"):(O=L+V,c=O+5,w="top")):d==="rightBottom"?(L=S[2][0],$=S[2][1],n==="horizontal"?(z=$+V,A=z+5,w="center"):(O=L+V,c=O+5,w="bottom")):d==="leftTop"?(L=S[0][0],$=n==="horizontal"?S[0][1]:S[1][1],n==="horizontal"?(z=$-V,A=z-5,w="center"):(O=L-V,c=O-5,w="right")):d==="leftBottom"?(L=n==="horizontal"?S[1][0]:S[3][0],$=n==="horizontal"?S[1][1]:S[2][1],n==="horizontal"?(z=$+V,A=z+5,w="center"):(O=L-V,c=O-5,w="right")):(L=(S[1][0]+S[2][0])/2,$=(S[1][1]+S[2][1])/2,n==="horizontal"?(z=$+V,A=z+5,w="center"):(O=L+V,c=O+5,w="left")),n==="horizontal"?(O=L,c=O):(z=$,A=z),R=[[L,$],[O,z]]}y.label={linePoints:R,x:c,y:A,verticalAlign:"middle",textAlign:w,inside:x}})}function funnelLayout(r,t){r.eachSeriesByType("funnel",function(n){var o=n.getData(),a=o.mapDimension("value"),l=n.get("sort"),d=getViewRect$2(n,t),g=n.get("orient"),y=d.width,S=d.height,x=getSortedIndices(o,l),w=d.x,c=d.y,A=g==="horizontal"?[parsePercent(n.get("minSize"),S),parsePercent(n.get("maxSize"),S)]:[parsePercent(n.get("minSize"),y),parsePercent(n.get("maxSize"),y)],R=o.getDataExtent(a),L=n.get("min"),$=n.get("max");L==null&&(L=Math.min(R[0],0)),$==null&&($=R[1]);var O=n.get("funnelAlign"),z=n.get("gap"),V=g==="horizontal"?y:S,j=(V-z*(o.count()-1))/o.count(),K=function(me,be){if(g==="horizontal"){var Q=o.get(a,me)||0,Ne=linearMap$2(Q,[L,$],A,!0),Ee=void 0;switch(O){case"top":Ee=c;break;case"center":Ee=c+(S-Ne)/2;break;case"bottom":Ee=c+(S-Ne);break}return[[be,Ee],[be,Ee+Ne]]}var Ge=o.get(a,me)||0,it=linearMap$2(Ge,[L,$],A,!0),Te;switch(O){case"left":Te=w;break;case"center":Te=w+(y-it)/2;break;case"right":Te=w+y-it;break}return[[Te,be],[Te+it,be]]};l==="ascending"&&(j=-j,z=-z,g==="horizontal"?w+=y:c+=S,x=x.reverse());for(var Z=0;Z<x.length;Z++){var q=x[Z],ie=x[Z+1],te=o.getItemModel(q);if(g==="horizontal"){var oe=te.get(["itemStyle","width"]);oe==null?oe=j:(oe=parsePercent(oe,y),l==="ascending"&&(oe=-oe));var re=K(q,w),he=K(ie,w+oe);w+=oe+z,o.setItemLayout(q,{points:re.concat(he.slice().reverse())})}else{var _e=te.get(["itemStyle","height"]);_e==null?_e=j:(_e=parsePercent(_e,S),l==="ascending"&&(_e=-_e));var re=K(q,c),he=K(ie,c+_e);c+=_e+z,o.setItemLayout(q,{points:re.concat(he.slice().reverse())})}}labelLayout(o)})}function install$D(r){r.registerChartView(FunnelView$1),r.registerSeriesModel(FunnelSeriesModel$1),r.registerLayout(funnelLayout),r.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$2=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._dataGroup=new Group$4,n._initialized=!1,n}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(n,o,a,l){this._progressiveEls=null;var d=this._dataGroup,g=n.getData(),y=this._data,S=n.coordinateSystem,x=S.dimensions,w=makeSeriesScope(n);g.diff(y).add(c).update(A).remove(R).execute();function c($){var O=addEl(g,d,$,x,S);updateElCommon(O,g,$,w)}function A($,O){var z=y.getItemGraphicEl(O),V=createLinePoints(g,$,x,S);g.setItemGraphicEl($,z),updateProps$1(z,{shape:{points:V}},n,$),saveOldStyle(z),updateElCommon(z,g,$,w)}function R($){var O=y.getItemGraphicEl($);d.remove(O)}if(!this._initialized){this._initialized=!0;var L=createGridClipShape$2(S,n,function(){setTimeout(function(){d.removeClipPath()})});d.setClipPath(L)}this._data=g},t.prototype.incrementalPrepareRender=function(n,o,a){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(n,o,a){for(var l=o.getData(),d=o.coordinateSystem,g=d.dimensions,y=makeSeriesScope(o),S=this._progressiveEls=[],x=n.start;x<n.end;x++){var w=addEl(l,this._dataGroup,x,g,d);w.incremental=!0,updateElCommon(w,l,x,y),S.push(w)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(ChartView$1);function createGridClipShape$2(r,t,n){var o=r.model,a=r.getRect(),l=new Rect$3({shape:{x:a.x,y:a.y,width:a.width,height:a.height}}),d=o.get("layout")==="horizontal"?"width":"height";return l.setShape(d,0),initProps(l,{shape:{width:a.width,height:a.height}},t,n),l}function createLinePoints(r,t,n,o){for(var a=[],l=0;l<n.length;l++){var d=n[l],g=r.get(r.mapDimension(d),t);isEmptyValue(g,o.getAxis(d).type)||a.push(o.dataToPoint(g,d))}return a}function addEl(r,t,n,o,a){var l=createLinePoints(r,n,o,a),d=new Polyline$3({shape:{points:l},z2:10});return t.add(d),r.setItemGraphicEl(n,d),d}function makeSeriesScope(r){var t=r.get("smooth",!0);return t===!0&&(t=DEFAULT_SMOOTH),t=numericToNumber(t),eqNaN(t)&&(t=0),{smooth:t}}function updateElCommon(r,t,n,o){r.useStyle(t.getItemVisual(n,"style")),r.style.fill=null,r.setShape("smooth",o.smooth);var a=t.getItemModel(n),l=a.getModel("emphasis");setStatesStylesFromModel(r,a,"lineStyle"),toggleHoverEmphasis(r,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function isEmptyValue(r,t){return t==="category"?r==null:r==null||isNaN(r)}const ParallelView$3=ParallelView$2;var ParallelSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return t.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},t.prototype.getRawIndicesByActiveState=function(n){var o=this.coordinateSystem,a=this.getData(),l=[];return o.eachActiveState(a,function(d,g){n===d&&l.push(a.getRawIndex(g))}),l},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(SeriesModel$1);function makeDefaultEncode(r){var t=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(t){var n={};return each$f(t.dimensions,function(o){var a=convertDimNameToNumber(o);n[o]=a}),n}}function convertDimNameToNumber(r){return+r.replace("dim","")}const ParallelSeriesModel$1=ParallelSeriesModel;var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(r,t){var n=r.coordinateSystem,o={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(a,l){n.eachActiveState(l,function(d,g){var y=o[d];if(d==="normal"&&l.hasItemOption){var S=l.getItemModel(g).get(opacityAccessPath,!0);S!=null&&(y=S)}var x=l.ensureUniqueItemVisual(g,"style");x.opacity=y},a.start,a.end)}}}};const parallelVisual$1=parallelVisual;function parallelPreprocessor(r){createParallelIfNeeded(r),mergeAxisOptionFromParallel(r)}function createParallelIfNeeded(r){if(!r.parallel){var t=!1;each$f(r.series,function(n){n&&n.type==="parallel"&&(t=!0)}),t&&(r.parallel=[{}])}}function mergeAxisOptionFromParallel(r){var t=normalizeToArray(r.parallelAxis);each$f(t,function(n){if(isObject$3(n)){var o=n.parallelIndex||0,a=normalizeToArray(r.parallel)[o];a&&a.parallelAxisDefault&&merge(n,a.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){this._model=n,this._api=a,this._handlers||(this._handlers={},each$f(handlers$1,function(l,d){a.getZr().on(d,this._handlers[d]=bind$1(l,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(n,o){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(a,l){o.getZr().off(l,a)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},t.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},n))},t.type="parallel",t}(ComponentView$1),handlers$1={mousedown:function(r){checkTrigger(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var t=this._mouseDownPoint;if(checkTrigger(this,"click")&&t){var n=[r.offsetX,r.offsetY],o=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2);if(o>CLICK_THRESHOLD)return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);a.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),o=n.behavior;o==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(o==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:o==="jump"?null:{duration:0}})}}};function checkTrigger(r,t){var n=r._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}const ParallelView$1=ParallelView;var ParallelModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(n){var o=this.option;n&&merge(o,n,!0),this._initDimensions()},t.prototype.contains=function(n,o){var a=n.get("parallelIndex");return a!=null&&o.getComponent("parallel",a)===this},t.prototype.setAxisExpand=function(n){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(o){n.hasOwnProperty(o)&&(this.option[o]=n[o])},this)},t.prototype._initDimensions=function(){var n=this.dimensions=[],o=this.parallelAxisIndex=[],a=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(l){return(l.get("parallelIndex")||0)===this.componentIndex},this);each$f(a,function(l){n.push("dim"+l.get("dim")),o.push(l.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(ComponentModel$1);const ParallelModel$1=ParallelModel;var ParallelAxis=function(r){__extends(t,r);function t(n,o,a,l,d){var g=r.call(this,n,o,a)||this;return g.type=l||"value",g.axisIndex=d,g}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Axis$1);const ParallelAxis$1=ParallelAxis;function sliderMove(r,t,n,o,a,l){r=r||0;var d=n[1]-n[0];if(a!=null&&(a=restrict$1(a,[0,d])),l!=null&&(l=Math.max(l,a??0)),o==="all"){var g=Math.abs(t[1]-t[0]);g=restrict$1(g,[0,d]),a=l=restrict$1(g,[a,l]),o=0}t[0]=restrict$1(t[0],n),t[1]=restrict$1(t[1],n);var y=getSpanSign(t,o);t[o]+=r;var S=a||0,x=n.slice();y.sign<0?x[0]+=S:x[1]-=S,t[o]=restrict$1(t[o],x);var w;return w=getSpanSign(t,o),a!=null&&(w.sign!==y.sign||w.span<a)&&(t[1-o]=t[o]+y.sign*a),w=getSpanSign(t,o),l!=null&&w.span>l&&(t[1-o]=t[o]+w.sign*l),t}function getSpanSign(r,t){var n=r[t]-r[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function restrict$1(r,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,r))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function r(t,n,o){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,n,o)}return r.prototype._init=function(t,n,o){var a=t.dimensions,l=t.parallelAxisIndex;each$a(a,function(d,g){var y=l[g],S=n.getComponent("parallelAxis",y),x=this._axesMap.set(d,new ParallelAxis$1(d,createScaleByModel$1(S),[0,0],S.get("type"),y)),w=x.type==="category";x.onBand=w&&S.get("boundaryGap"),x.inverse=S.get("inverse"),S.axis=x,x.model=S,x.coordinateSystem=S.coordinateSystem=this},this)},r.prototype.update=function(t,n){this._updateAxesFromSeries(this._model,t)},r.prototype.containPoint=function(t){var n=this._makeLayoutInfo(),o=n.axisBase,a=n.layoutBase,l=n.pixelDimIndex,d=t[1-l],g=t[l];return d>=o&&d<=o+n.axisLength&&g>=a&&g<=a+n.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(t,n){n.eachSeries(function(o){if(t.contains(o,n)){var a=o.getData();each$a(this.dimensions,function(l){var d=this._axesMap.get(l);d.scale.unionExtentFromData(a,a.mapDimension(l)),niceScaleExtent(d.scale,d.model)},this)}},this)},r.prototype.resize=function(t,n){this._rect=getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var t=this._model,n=this._rect,o=["x","y"],a=["width","height"],l=t.get("layout"),d=l==="horizontal"?0:1,g=n[a[d]],y=[0,g],S=this.dimensions.length,x=restrict(t.get("axisExpandWidth"),y),w=restrict(t.get("axisExpandCount")||0,[0,S]),c=t.get("axisExpandable")&&S>3&&S>w&&w>1&&x>0&&g>0,A=t.get("axisExpandWindow"),R;if(A)R=restrict(A[1]-A[0],y),A[1]=A[0]+R;else{R=restrict(x*(w-1),y);var L=t.get("axisExpandCenter")||mathFloor(S/2);A=[x*L-R/2],A[1]=A[0]+R}var $=(g-R)/(S-w);$<3&&($=0);var O=[mathFloor(round(A[0]/x,1))+1,mathCeil(round(A[1]/x,1))-1],z=$/x*A[0];return{layout:l,pixelDimIndex:d,layoutBase:n[o[d]],layoutLength:g,axisBase:n[o[1-d]],axisLength:n[a[1-d]],axisExpandable:c,axisExpandWidth:x,axisCollapseWidth:$,axisExpandWindow:A,axisCount:S,winInnerIndices:O,axisExpandWindow0Pos:z}},r.prototype._layoutAxes=function(){var t=this._rect,n=this._axesMap,o=this.dimensions,a=this._makeLayoutInfo(),l=a.layout;n.each(function(d){var g=[0,a.axisLength],y=d.inverse?1:0;d.setExtent(g[y],g[1-y])}),each$a(o,function(d,g){var y=(a.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(g,a),S={horizontal:{x:y.position,y:a.axisLength},vertical:{x:0,y:y.position}},x={horizontal:PI$1/2,vertical:0},w=[S[l].x+t.x,S[l].y+t.y],c=x[l],A=create$1();rotate(A,A,c),translate(A,A,w),this._axesLayout[d]={position:w,rotation:c,transform:A,axisNameAvailableWidth:y.axisNameAvailableWidth,axisLabelShow:y.axisLabelShow,nameTruncateMaxWidth:y.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(t){return this._axesMap.get(t)},r.prototype.dataToPoint=function(t,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(t),n)},r.prototype.eachActiveState=function(t,n,o,a){o==null&&(o=0),a==null&&(a=t.count());var l=this._axesMap,d=this.dimensions,g=[],y=[];each$f(d,function($){g.push(t.mapDimension($)),y.push(l.get($).model)});for(var S=this.hasAxisBrushed(),x=o;x<a;x++){var w=void 0;if(!S)w="normal";else{w="active";for(var c=t.getValues(g,x),A=0,R=d.length;A<R;A++){var L=y[A].getActiveState(c[A]);if(L==="inactive"){w="inactive";break}}}n(w,x)}},r.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,n=this._axesMap,o=!1,a=0,l=t.length;a<l;a++)n.get(t[a]).model.getActiveState()!=="normal"&&(o=!0);return o},r.prototype.axisCoordToPoint=function(t,n){var o=this._axesLayout[n];return applyTransform([t,0],o.transform)},r.prototype.getAxisLayout=function(t){return clone$4(this._axesLayout[t])},r.prototype.getSlidedAxisExpandWindow=function(t){var n=this._makeLayoutInfo(),o=n.pixelDimIndex,a=n.axisExpandWindow.slice(),l=a[1]-a[0],d=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:a};var g=t[o]-n.layoutBase-n.axisExpandWindow0Pos,y,S="slide",x=n.axisCollapseWidth,w=this._model.get("axisExpandSlideTriggerArea"),c=w[0]!=null;if(x)c&&x&&g<l*w[0]?(S="jump",y=g-l*w[2]):c&&x&&g>l*(1-w[0])?(S="jump",y=g-l*(1-w[2])):(y=g-l*w[1])>=0&&(y=g-l*(1-w[1]))<=0&&(y=0),y*=n.axisExpandWidth/x,y?sliderMove(y,a,d,"all"):S="none";else{var A=a[1]-a[0],R=d[1]*g/A;a=[mathMax$2(0,R-A/2)],a[1]=mathMin$2(d[1],a[0]+A),a[0]=a[1]-A}return{axisExpandWindow:a,behavior:S}},r}();function restrict(r,t){return mathMin$2(mathMax$2(r,t[0]),t[1])}function layoutAxisWithoutExpand(r,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*r,axisNameAvailableWidth:n,axisLabelShow:!0}}function layoutAxisWithExpand(r,t){var n=t.layoutLength,o=t.axisExpandWidth,a=t.axisCount,l=t.axisCollapseWidth,d=t.winInnerIndices,g,y=l,S=!1,x;return r<d[0]?(g=r*l,x=l):r<=d[1]?(g=t.axisExpandWindow0Pos+r*o-t.axisExpandWindow[0],y=o,S=!0):(g=n-(a-1-r)*l,x=l),{position:g,axisNameAvailableWidth:y,axisLabelShow:S,nameTruncateMaxWidth:x}}const Parallel$1=Parallel;function createParallelCoordSys(r,t){var n=[];return r.eachComponent("parallel",function(o,a){var l=new Parallel$1(o,r,t);l.name="parallel_"+a,l.resize(o,t),o.coordinateSystem=l,l.model=o,n.push(l)}),r.eachSeries(function(o){if(o.get("coordinateSystem")==="parallel"){var a=o.getReferringComponents("parallel",SINGLE_REFERRING).models[0];o.coordinateSystem=a.coordinateSystem}}),n}var parallelCoordSysCreator={create:createParallelCoordSys};const parallelCoordSysCreator$1=parallelCoordSysCreator;var ParallelAxisModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.activeIntervals=[],n}return t.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(n){var o=this.activeIntervals=clone$4(n);if(o)for(var a=o.length-1;a>=0;a--)asc$2(o[a])},t.prototype.getActiveState=function(n){var o=this.activeIntervals;if(!o.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(o.length===1){var a=o[0];if(a[0]<=n&&n<=a[1])return"active"}else for(var l=0,d=o.length;l<d;l++)if(o[l][0]<=n&&n<=o[l][1])return"active";return"inactive"},t}(ComponentModel$1);mixin(ParallelAxisModel,AxisModelCommonMixin);const ParallelAxisModel$1=ParallelAxisModel;var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(r){__extends(t,r);function t(n){var o=r.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=n,o.group=new Group$4,o._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(a,l){this._handlers[l]=bind$1(a,this)},o),o}return t.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},t.prototype._doEnableBrush=function(n){var o=this._zr;this._enableGlobalPan||take(o,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(a,l){o.on(l,a)}),this._brushType=n.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),n,!0)},t.prototype._doDisableBrush=function(){var n=this._zr;release(n,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,a){n.off(a,o)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(n){if(n&&n.length){var o=this._panels={};each$f(n,function(a){o[a.panelId]=clone$4(a)})}else this._panels=null;return this},t.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=o.getLocalTransform(),this},t.prototype.updateCovers=function(n){n=map$1(n,function(c){return merge(clone$4(DEFAULT_BRUSH_OPT),c,!0)});var o="\0-brush-index-",a=this._covers,l=this._covers=[],d=this,g=this._creatingCover;return new DataDiffer$1(a,n,S,y).add(x).update(x).remove(w).execute(),this;function y(c,A){return(c.id!=null?c.id:o+A)+"-"+c.brushType}function S(c,A){return y(c.__brushOption,A)}function x(c,A){var R=n[c];if(A!=null&&a[A]===g)l[c]=a[A];else{var L=l[c]=A!=null?(a[A].__brushOption=R,a[A]):endCreating(d,createCover(d,R));updateCoverAfterCreation(d,L)}}function w(c){a[c]!==g&&d.group.remove(a[c])}},t.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Eventful$1);function createCover(r,t){var n=coverRenderers[t.brushType].createCover(r,t);return n.__brushOption=t,updateZ$1(n,t),r.group.add(n),n}function endCreating(r,t){var n=getCoverRenderer(t);return n.endCreating&&(n.endCreating(r,t),updateZ$1(t,t.__brushOption)),t}function updateCoverShape(r,t){var n=t.__brushOption;getCoverRenderer(t).updateCoverShape(r,t,n.range,n)}function updateZ$1(r,t){var n=t.z;n==null&&(n=COVER_Z),r.traverse(function(o){o.z=n,o.z2=n})}function updateCoverAfterCreation(r,t){getCoverRenderer(t).updateCommon(r,t),updateCoverShape(r,t)}function getCoverRenderer(r){return coverRenderers[r.__brushOption.brushType]}function getPanelByPoint(r,t,n){var o=r._panels;if(!o)return BRUSH_PANEL_GLOBAL;var a,l=r._transform;return each$f(o,function(d){d.isTargetByCursor(t,n,l)&&(a=d)}),a}function getPanelByCover(r,t){var n=r._panels;if(!n)return BRUSH_PANEL_GLOBAL;var o=t.__brushOption.panelId;return o!=null?n[o]:BRUSH_PANEL_GLOBAL}function clearCovers(r){var t=r._covers,n=t.length;return each$f(t,function(o){r.group.remove(o)},r),t.length=0,!!n}function trigger(r,t){var n=map$1(r._covers,function(o){var a=o.__brushOption,l=clone$4(a.range);return{brushType:a.brushType,panelId:a.panelId,range:l}});r.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function shouldShowCover(r){var t=r._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],a=n[0]-o[0],l=n[1]-o[1],d=mathPow(a*a+l*l,.5);return d>UNSELECT_THRESHOLD}function getTrackEnds(r){var t=r.length-1;return t<0&&(t=0),[r[0],r[t]]}function createBaseRectCover(r,t,n,o){var a=new Group$4;return a.add(new Rect$3({name:"main",style:makeStyle(n),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,r,t,a,["n","s","w","e"]),ondragend:curry$1(trigger,t,{isEnd:!0})})),each$f(o,function(l){a.add(new Rect$3({name:l.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,r,t,a,l),ondragend:curry$1(trigger,t,{isEnd:!0})}))}),a}function updateBaseRect(r,t,n,o){var a=o.brushStyle.lineWidth||0,l=mathMax$1(a,MIN_RESIZE_LINE_WIDTH),d=n[0][0],g=n[1][0],y=d-a/2,S=g-a/2,x=n[0][1],w=n[1][1],c=x-l+a/2,A=w-l+a/2,R=x-d,L=w-g,$=R+a,O=L+a;updateRectShape(r,t,"main",d,g,R,L),o.transformable&&(updateRectShape(r,t,"w",y,S,l,O),updateRectShape(r,t,"e",c,S,l,O),updateRectShape(r,t,"n",y,S,$,l),updateRectShape(r,t,"s",y,A,$,l),updateRectShape(r,t,"nw",y,S,l,l),updateRectShape(r,t,"ne",c,S,l,l),updateRectShape(r,t,"sw",y,A,l,l),updateRectShape(r,t,"se",c,A,l,l))}function updateCommon$1(r,t){var n=t.__brushOption,o=n.transformable,a=t.childAt(0);a.useStyle(makeStyle(n)),a.attr({silent:!o,cursor:o?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(l){var d=t.childOfName(l.join("")),g=l.length===1?getGlobalDirection1(r,l[0]):getGlobalDirection2(r,l);d&&d.attr({silent:!o,invisible:!o,cursor:o?CURSOR_MAP[g]+"-resize":null})})}function updateRectShape(r,t,n,o,a,l,d){var g=t.childOfName(n);g&&g.setShape(pointsToRect(clipByPanel(r,t,[[o,a],[o+l,a+d]])))}function makeStyle(r){return defaults({strokeNoScale:!0},r.brushStyle)}function formatRectRange(r,t,n,o){var a=[mathMin$1(r,n),mathMin$1(t,o)],l=[mathMax$1(r,n),mathMax$1(t,o)];return[[a[0],l[0]],[a[1],l[1]]]}function getTransform(r){return getTransform$1(r.group)}function getGlobalDirection1(r,t){var n={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},a=transformDirection(n[t],getTransform(r));return o[a]}function getGlobalDirection2(r,t){var n=[getGlobalDirection1(r,t[0]),getGlobalDirection1(r,t[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function driftRect(r,t,n,o,a,l){var d=n.__brushOption,g=r.toRectRange(d.range),y=toLocalDelta(t,a,l);each$f(o,function(S){var x=DIRECTION_MAP[S];g[x[0]][x[1]]+=y[x[0]]}),d.range=r.fromRectRange(formatRectRange(g[0][0],g[1][0],g[0][1],g[1][1])),updateCoverAfterCreation(t,n),trigger(t,{isEnd:!1})}function driftPolygon(r,t,n,o){var a=t.__brushOption.range,l=toLocalDelta(r,n,o);each$f(a,function(d){d[0]+=l[0],d[1]+=l[1]}),updateCoverAfterCreation(r,t),trigger(r,{isEnd:!1})}function toLocalDelta(r,t,n){var o=r.group,a=o.transformCoordToLocal(t,n),l=o.transformCoordToLocal(0,0);return[a[0]-l[0],a[1]-l[1]]}function clipByPanel(r,t,n){var o=getPanelByCover(r,t);return o&&o!==BRUSH_PANEL_GLOBAL?o.clipPath(n,r._transform):clone$4(n)}function pointsToRect(r){var t=mathMin$1(r[0][0],r[1][0]),n=mathMin$1(r[0][1],r[1][1]),o=mathMax$1(r[0][0],r[1][0]),a=mathMax$1(r[0][1],r[1][1]);return{x:t,y:n,width:o-t,height:a-n}}function resetCursor(r,t,n){if(!(!r._brushType||isOutsideZrArea(r,t.offsetX,t.offsetY))){var o=r._zr,a=r._covers,l=getPanelByPoint(r,t,n);if(!r._dragging)for(var d=0;d<a.length;d++){var g=a[d].__brushOption;if(l&&(l===BRUSH_PANEL_GLOBAL||g.panelId===l.panelId)&&coverRenderers[g.brushType].contain(a[d],n[0],n[1]))return}l&&o.setCursorStyle("crosshair")}}function preventDefault(r){var t=r.event;t.preventDefault&&t.preventDefault()}function mainShapeContain(r,t,n){return r.childOfName("main").contain(t,n)}function updateCoverByMouse(r,t,n,o){var a=r._creatingCover,l=r._creatingPanel,d=r._brushOption,g;if(r._track.push(n.slice()),shouldShowCover(r)||a){if(l&&!a){d.brushMode==="single"&&clearCovers(r);var y=clone$4(d);y.brushType=determineBrushType(y.brushType,l),y.panelId=l===BRUSH_PANEL_GLOBAL?null:l.panelId,a=r._creatingCover=createCover(r,y),r._covers.push(a)}if(a){var S=coverRenderers[determineBrushType(r._brushType,l)],x=a.__brushOption;x.range=S.getCreatingRange(clipByPanel(r,a,r._track)),o&&(endCreating(r,a),S.updateCommon(r,a)),updateCoverShape(r,a),g={isEnd:o}}}else o&&d.brushMode==="single"&&d.removeOnClick&&getPanelByPoint(r,t,n)&&clearCovers(r)&&(g={isEnd:o,removeOnClick:!0});return g}function determineBrushType(r,t){return r==="auto"?t.defaultBrushType:r}var pointerHandlers={mousedown:function(r){if(this._dragging)handleDragEnd(this,r);else if(!r.target||!r.target.draggable){preventDefault(r);var t=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var n=this._creatingPanel=getPanelByPoint(this,r,t);n&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(r){var t=r.offsetX,n=r.offsetY,o=this.group.transformCoordToLocal(t,n);if(resetCursor(this,r,o),this._dragging){preventDefault(r);var a=updateCoverByMouse(this,r,o,!1);a&&trigger(this,a)}},mouseup:function(r){handleDragEnd(this,r)}};function handleDragEnd(r,t){if(r._dragging){preventDefault(t);var n=t.offsetX,o=t.offsetY,a=r.group.transformCoordToLocal(n,o),l=updateCoverByMouse(r,t,a,!0);r._dragging=!1,r._track=[],r._creatingCover=null,l&&trigger(r,l)}}function isOutsideZrArea(r,t,n){var o=r._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(r,t){function n(o){return o}return createBaseRectCover({toRectRange:n,fromRectRange:n},r,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var t=getTrackEnds(r);return formatRectRange(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(r,t,n,o){updateBaseRect(r,t,n,o)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(r,t){var n=new Group$4;return n.add(new Polyline$3({name:"main",style:makeStyle(t),silent:!0})),n},getCreatingRange:function(r){return r},endCreating:function(r,t){t.remove(t.childAt(0)),t.add(new Polygon$1({name:"main",draggable:!0,drift:curry$1(driftPolygon,r,t),ondragend:curry$1(trigger,r,{isEnd:!0})}))},updateCoverShape:function(r,t,n,o){t.childAt(0).setShape({points:clipByPanel(r,t,n)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(r){return{createCover:function(t,n){return createBaseRectCover({toRectRange:function(o){var a=[o,[0,100]];return r&&a.reverse(),a},fromRectRange:function(o){return o[r]}},t,n,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(t){var n=getTrackEnds(t),o=mathMin$1(n[0][r],n[1][r]),a=mathMax$1(n[0][r],n[1][r]);return[o,a]},updateCoverShape:function(t,n,o,a){var l,d=getPanelByCover(t,n);if(d!==BRUSH_PANEL_GLOBAL&&d.getLinearBrushOtherExtent)l=d.getLinearBrushOtherExtent(r);else{var g=t._zr;l=[0,[g.getWidth(),g.getHeight()][1-r]]}var y=[o,l];r&&y.reverse(),updateBaseRect(t,n,y,a)},updateCommon:updateCommon$1,contain:mainShapeContain}}const BrushController$1=BrushController;function makeRectPanelClipPath(r){return r=normalizeRect(r),function(t){return clipPointsByRect(t,r)}}function makeLinearBrushOtherExtent(r,t){return r=normalizeRect(r),function(n){var o=t??n,a=o?r.width:r.height,l=o?r.x:r.y;return[l,l+(a||0)]}}function makeRectIsTargetByCursor(r,t,n){var o=normalizeRect(r);return function(a,l){return o.contain(l[0],l[1])&&!onIrrelevantElement(a,t,n)}}function normalizeRect(r){return BoundingRect$1.create(r)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o){r.prototype.init.apply(this,arguments),(this._brushController=new BrushController$1(o.getZr())).on("brush",bind$1(this._onBrush,this))},t.prototype.render=function(n,o,a,l){if(!fromAxisAreaSelect(n,o,l)){this.axisModel=n,this.api=a,this.group.removeAll();var d=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!n.get("show")){var g=getCoordSysModel(n,o),y=g.coordinateSystem,S=n.getAreaSelectStyle(),x=S.width,w=n.axis.dim,c=y.getAxisLayout(w),A=extend({strokeContainThreshold:x},c),R=new AxisBuilder$1(n,A);each$f(elementList$1,R.add,R),this._axisGroup.add(R.getGroup()),this._refreshBrushController(A,S,n,g,x,a),groupTransition(d,this._axisGroup,n)}}},t.prototype._refreshBrushController=function(n,o,a,l,d,g){var y=a.axis.getExtent(),S=y[1]-y[0],x=Math.min(30,Math.abs(S)*.1),w=BoundingRect$1.create({x:y[0],y:-d/2,width:S,height:d});w.x-=x,w.width+=2*x,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(w),isTargetByCursor:makeRectIsTargetByCursor(w,g,l),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(w,0)}]).enableBrush({brushType:"lineX",brushStyle:o,removeOnClick:!0}).updateCovers(getCoverInfoList(a))},t.prototype._onBrush=function(n){var o=n.areas,a=this.axisModel,l=a.axis,d=map$1(o,function(g){return[l.coordToData(g.range[0],!0),l.coordToData(g.range[1],!0)]});(!a.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:a.id,intervals:d})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(ComponentView$1);function fromAxisAreaSelect(r,t,n){return n&&n.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:n})[0]===r}function getCoverInfoList(r){var t=r.axis;return map$1(r.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(n[0],!0),t.dataToCoord(n[1],!0)]}})}function getCoordSysModel(r,t){return t.getComponent("parallel",r.get("parallelIndex"))}const ParallelAxisView$1=ParallelAxisView;var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(r){r.registerAction(actionInfo,function(t,n){n.eachComponent({mainType:"parallelAxis",query:t},function(o){o.axis.model.setActiveIntervals(t.intervals)})}),r.registerAction("parallelAxisExpand",function(t,n){n.eachComponent({mainType:"parallel",query:t},function(o){o.setAxisExpand(t)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(r){r.registerComponentView(ParallelView$1),r.registerComponentModel(ParallelModel$1),r.registerCoordinateSystem("parallel",parallelCoordSysCreator$1),r.registerPreprocessor(parallelPreprocessor),r.registerComponentModel(ParallelAxisModel$1),r.registerComponentView(ParallelAxisView$1),axisModelCreator(r,"parallel",ParallelAxisModel$1,defaultAxisOption),installParallelActions(r)}function install$B(r){use(install$C),r.registerChartView(ParallelView$3),r.registerSeriesModel(ParallelSeriesModel$1),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,parallelVisual$1)}var SankeyPathShape=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),SankeyPath=function(r){__extends(t,r);function t(n){return r.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new SankeyPathShape},t.prototype.buildPath=function(n,o){var a=o.extent;n.moveTo(o.x1,o.y1),n.bezierCurveTo(o.cpx1,o.cpy1,o.cpx2,o.cpy2,o.x2,o.y2),o.orient==="vertical"?(n.lineTo(o.x2+a,o.y2),n.bezierCurveTo(o.cpx2+a,o.cpy2,o.cpx1+a,o.cpy1,o.x1+a,o.y1)):(n.lineTo(o.x2,o.y2+a),n.bezierCurveTo(o.cpx2,o.cpy2+a,o.cpx1,o.cpy1+a,o.x1,o.y1+a)),n.closePath()},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t}(Path$1),SankeyView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}return t.prototype.render=function(n,o,a){var l=this,d=n.getGraph(),g=this.group,y=n.layoutInfo,S=y.width,x=y.height,w=n.getData(),c=n.getData("edge"),A=n.get("orient");this._model=n,g.removeAll(),g.x=y.x,g.y=y.y,d.eachEdge(function(R){var L=new SankeyPath,$=getECData(L);$.dataIndex=R.dataIndex,$.seriesIndex=n.seriesIndex,$.dataType="edge";var O=R.getModel(),z=O.getModel("lineStyle"),V=z.get("curveness"),j=R.node1.getLayout(),K=R.node1.getModel(),Z=K.get("localX"),q=K.get("localY"),ie=R.node2.getLayout(),te=R.node2.getModel(),oe=te.get("localX"),re=te.get("localY"),he=R.getLayout(),_e,me,be,Q,Ne,Ee,Ge,it;L.shape.extent=Math.max(1,he.dy),L.shape.orient=A,A==="vertical"?(_e=(Z!=null?Z*S:j.x)+he.sy,me=(q!=null?q*x:j.y)+j.dy,be=(oe!=null?oe*S:ie.x)+he.ty,Q=re!=null?re*x:ie.y,Ne=_e,Ee=me*(1-V)+Q*V,Ge=be,it=me*V+Q*(1-V)):(_e=(Z!=null?Z*S:j.x)+j.dx,me=(q!=null?q*x:j.y)+he.sy,be=oe!=null?oe*S:ie.x,Q=(re!=null?re*x:ie.y)+he.ty,Ne=_e*(1-V)+be*V,Ee=me,Ge=_e*V+be*(1-V),it=Q),L.setShape({x1:_e,y1:me,x2:be,y2:Q,cpx1:Ne,cpy1:Ee,cpx2:Ge,cpy2:it}),L.useStyle(z.getItemStyle()),applyCurveStyle(L.style,A,R);var Te=""+O.get("value"),Ke=getLabelStatesModels(O,"edgeLabel");setLabelStyle(L,Ke,{labelFetcher:{getFormattedLabel:function(Qt,Xe,Be,ue,Dt,Rt){return n.getFormattedLabel(Qt,Xe,"edge",ue,retrieve3(Dt,Ke.normal&&Ke.normal.get("formatter"),Te),Rt)}},labelDataIndex:R.dataIndex,defaultText:Te}),L.setTextConfig({position:"inside"});var Tt=O.getModel("emphasis");setStatesStylesFromModel(L,O,"lineStyle",function(Qt){var Xe=Qt.getItemStyle();return applyCurveStyle(Xe,A,R),Xe}),g.add(L),c.setItemGraphicEl(R.dataIndex,L);var Lt=Tt.get("focus");toggleHoverEmphasis(L,Lt==="adjacency"?R.getAdjacentDataIndices():Lt==="trajectory"?R.getTrajectoryDataIndices():Lt,Tt.get("blurScope"),Tt.get("disabled"))}),d.eachNode(function(R){var L=R.getLayout(),$=R.getModel(),O=$.get("localX"),z=$.get("localY"),V=$.getModel("emphasis"),j=new Rect$3({shape:{x:O!=null?O*S:L.x,y:z!=null?z*x:L.y,width:L.dx,height:L.dy},style:$.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(j,getLabelStatesModels($),{labelFetcher:{getFormattedLabel:function(Z,q){return n.getFormattedLabel(Z,q,"node")}},labelDataIndex:R.dataIndex,defaultText:R.id}),j.disableLabelAnimation=!0,j.setStyle("fill",R.getVisual("color")),j.setStyle("decal",R.getVisual("style").decal),setStatesStylesFromModel(j,$),g.add(j),w.setItemGraphicEl(R.dataIndex,j),getECData(j).dataType="node";var K=V.get("focus");toggleHoverEmphasis(j,K==="adjacency"?R.getAdjacentDataIndices():K==="trajectory"?R.getTrajectoryDataIndices():K,V.get("blurScope"),V.get("disabled"))}),w.eachItemGraphicEl(function(R,L){var $=w.getItemModel(L);$.get("draggable")&&(R.drift=function(O,z){l._focusAdjacencyDisabled=!0,this.shape.x+=O,this.shape.y+=z,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:w.getRawIndex(L),localX:this.shape.x/S,localY:this.shape.y/x})},R.ondragend=function(){l._focusAdjacencyDisabled=!1},R.draggable=!0,R.cursor="move")}),!this._data&&n.isAnimationEnabled()&&g.setClipPath(createGridClipShape$1(g.getBoundingRect(),n,function(){g.removeClipPath()})),this._data=n.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(ChartView$1);function applyCurveStyle(r,t,n){switch(r.fill){case"source":r.fill=n.node1.getVisual("color"),r.decal=n.node1.getVisual("style").decal;break;case"target":r.fill=n.node2.getVisual("color"),r.decal=n.node2.getVisual("style").decal;break;case"gradient":var o=n.node1.getVisual("color"),a=n.node2.getVisual("color");isString(o)&&isString(a)&&(r.fill=new LinearGradient$1(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:o,offset:0},{color:a,offset:1}]))}}function createGridClipShape$1(r,t,n){var o=new Rect$3({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return initProps(o,{shape:{width:r.width+20}},t,n),o}const SankeyView$1=SankeyView;var SankeySeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,o){var a=n.edges||n.links,l=n.data||n.nodes,d=n.levels;this.levelModels=[];for(var g=this.levelModels,y=0;y<d.length;y++)d[y].depth!=null&&d[y].depth>=0&&(g[d[y].depth]=new Model$1(d[y],this,o));if(l&&a){var S=createGraphFromNodeEdge(l,a,this,!0,x);return S.data}function x(w,c){w.wrapMethod("getItemModel",function(A,R){var L=A.parentModel,$=L.getData().getItemLayout(R);if($){var O=$.depth,z=L.levelModels[O];z&&(A.parentModel=z)}return A}),c.wrapMethod("getItemModel",function(A,R){var L=A.parentModel,$=L.getGraph().getEdgeByIndex(R),O=$.node1.getLayout();if(O){var z=O.depth,V=L.levelModels[z];V&&(A.parentModel=V)}return A})}},t.prototype.setNodePosition=function(n,o){var a=this.option.data||this.option.nodes,l=a[n];l.localX=o[0],l.localY=o[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(n,o,a){function l(A){return isNaN(A)||A==null}if(a==="edge"){var d=this.getDataParams(n,a),g=d.data,y=d.value,S=g.source+" -- "+g.target;return createTooltipMarkup("nameValue",{name:S,value:y,noValue:l(y)})}else{var x=this.getGraph().getNodeByIndex(n),w=x.getLayout().value,c=this.getDataParams(n,a).data.name;return createTooltipMarkup("nameValue",{name:c!=null?c+"":null,value:w,noValue:l(w)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(n,o){var a=r.prototype.getDataParams.call(this,n,o);if(a.value==null&&o==="node"){var l=this.getGraph().getNodeByIndex(n),d=l.getLayout().value;a.value=d}return a},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(SeriesModel$1);const SankeySeriesModel$1=SankeySeriesModel;function sankeyLayout(r,t){r.eachSeriesByType("sankey",function(n){var o=n.get("nodeWidth"),a=n.get("nodeGap"),l=getViewRect$1(n,t);n.layoutInfo=l;var d=l.width,g=l.height,y=n.getGraph(),S=y.nodes,x=y.edges;computeNodeValues(S);var w=filter(S,function(L){return L.getLayout().value===0}),c=w.length!==0?0:n.get("layoutIterations"),A=n.get("orient"),R=n.get("nodeAlign");layoutSankey(S,x,o,a,d,g,c,A,R)})}function getViewRect$1(r,t){return getLayoutRect(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function layoutSankey(r,t,n,o,a,l,d,g,y){computeNodeBreadths(r,t,n,a,l,g,y),computeNodeDepths(r,t,l,a,o,d,g),computeEdgeDepths(r,g)}function computeNodeValues(r){each$f(r,function(t){var n=sum(t.outEdges,getEdgeValue),o=sum(t.inEdges,getEdgeValue),a=t.getValue()||0,l=Math.max(n,o,a);t.setLayout({value:l},!0)})}function computeNodeBreadths(r,t,n,o,a,l,d){for(var g=[],y=[],S=[],x=[],w=0,c=0;c<t.length;c++)g[c]=1;for(var c=0;c<r.length;c++)y[c]=r[c].inEdges.length,y[c]===0&&S.push(r[c]);for(var A=-1;S.length;){for(var R=0;R<S.length;R++){var L=S[R],$=L.hostGraph.data.getRawDataItem(L.dataIndex),O=$.depth!=null&&$.depth>=0;O&&$.depth>A&&(A=$.depth),L.setLayout({depth:O?$.depth:w},!0),l==="vertical"?L.setLayout({dy:n},!0):L.setLayout({dx:n},!0);for(var z=0;z<L.outEdges.length;z++){var V=L.outEdges[z],j=t.indexOf(V);g[j]=0;var K=V.node2,Z=r.indexOf(K);--y[Z]===0&&x.indexOf(K)<0&&x.push(K)}}++w,S=x,x=[]}for(var c=0;c<g.length;c++)if(g[c]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var q=A>w-1?A:w-1;d&&d!=="left"&&adjustNodeWithNodeAlign(r,d,l,q);var ie=l==="vertical"?(a-n)/q:(o-n)/q;scaleNodeBreadths(r,ie,l)}function isNodeDepth(r){var t=r.hostGraph.data.getRawDataItem(r.dataIndex);return t.depth!=null&&t.depth>=0}function adjustNodeWithNodeAlign(r,t,n,o){if(t==="right"){for(var a=[],l=r,d=0;l.length;){for(var g=0;g<l.length;g++){var y=l[g];y.setLayout({skNodeHeight:d},!0);for(var S=0;S<y.inEdges.length;S++){var x=y.inEdges[S];a.indexOf(x.node1)<0&&a.push(x.node1)}}l=a,a=[],++d}each$f(r,function(w){isNodeDepth(w)||w.setLayout({depth:Math.max(0,o-w.getLayout().skNodeHeight)},!0)})}else t==="justify"&&moveSinksRight(r,o)}function moveSinksRight(r,t){each$f(r,function(n){!isNodeDepth(n)&&!n.outEdges.length&&n.setLayout({depth:t},!0)})}function scaleNodeBreadths(r,t,n){each$f(r,function(o){var a=o.getLayout().depth*t;n==="vertical"?o.setLayout({y:a},!0):o.setLayout({x:a},!0)})}function computeNodeDepths(r,t,n,o,a,l,d){var g=prepareNodesByBreadth(r,d);initializeNodeDepth(g,t,n,o,a,d),resolveCollisions(g,a,n,o,d);for(var y=1;l>0;l--)y*=.99,relaxRightToLeft(g,y,d),resolveCollisions(g,a,n,o,d),relaxLeftToRight(g,y,d),resolveCollisions(g,a,n,o,d)}function prepareNodesByBreadth(r,t){var n=[],o=t==="vertical"?"y":"x",a=groupData(r,function(l){return l.getLayout()[o]});return a.keys.sort(function(l,d){return l-d}),each$f(a.keys,function(l){n.push(a.buckets.get(l))}),n}function initializeNodeDepth(r,t,n,o,a,l){var d=1/0;each$f(r,function(g){var y=g.length,S=0;each$f(g,function(w){S+=w.getLayout().value});var x=l==="vertical"?(o-(y-1)*a)/S:(n-(y-1)*a)/S;x<d&&(d=x)}),each$f(r,function(g){each$f(g,function(y,S){var x=y.getLayout().value*d;l==="vertical"?(y.setLayout({x:S},!0),y.setLayout({dx:x},!0)):(y.setLayout({y:S},!0),y.setLayout({dy:x},!0))})}),each$f(t,function(g){var y=+g.getValue()*d;g.setLayout({dy:y},!0)})}function resolveCollisions(r,t,n,o,a){var l=a==="vertical"?"x":"y";each$f(r,function(d){d.sort(function(L,$){return L.getLayout()[l]-$.getLayout()[l]});for(var g,y,S,x=0,w=d.length,c=a==="vertical"?"dx":"dy",A=0;A<w;A++)y=d[A],S=x-y.getLayout()[l],S>0&&(g=y.getLayout()[l]+S,a==="vertical"?y.setLayout({x:g},!0):y.setLayout({y:g},!0)),x=y.getLayout()[l]+y.getLayout()[c]+t;var R=a==="vertical"?o:n;if(S=x-t-R,S>0){g=y.getLayout()[l]-S,a==="vertical"?y.setLayout({x:g},!0):y.setLayout({y:g},!0),x=g;for(var A=w-2;A>=0;--A)y=d[A],S=y.getLayout()[l]+y.getLayout()[c]+t-x,S>0&&(g=y.getLayout()[l]-S,a==="vertical"?y.setLayout({x:g},!0):y.setLayout({y:g},!0)),x=y.getLayout()[l]}})}function relaxRightToLeft(r,t,n){each$f(r.slice().reverse(),function(o){each$f(o,function(a){if(a.outEdges.length){var l=sum(a.outEdges,weightedTarget,n)/sum(a.outEdges,getEdgeValue);if(isNaN(l)){var d=a.outEdges.length;l=d?sum(a.outEdges,centerTarget,n)/d:0}if(n==="vertical"){var g=a.getLayout().x+(l-center(a,n))*t;a.setLayout({x:g},!0)}else{var y=a.getLayout().y+(l-center(a,n))*t;a.setLayout({y},!0)}}})})}function weightedTarget(r,t){return center(r.node2,t)*r.getValue()}function centerTarget(r,t){return center(r.node2,t)}function weightedSource(r,t){return center(r.node1,t)*r.getValue()}function centerSource(r,t){return center(r.node1,t)}function center(r,t){return t==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function getEdgeValue(r){return r.getValue()}function sum(r,t,n){for(var o=0,a=r.length,l=-1;++l<a;){var d=+t(r[l],n);isNaN(d)||(o+=d)}return o}function relaxLeftToRight(r,t,n){each$f(r,function(o){each$f(o,function(a){if(a.inEdges.length){var l=sum(a.inEdges,weightedSource,n)/sum(a.inEdges,getEdgeValue);if(isNaN(l)){var d=a.inEdges.length;l=d?sum(a.inEdges,centerSource,n)/d:0}if(n==="vertical"){var g=a.getLayout().x+(l-center(a,n))*t;a.setLayout({x:g},!0)}else{var y=a.getLayout().y+(l-center(a,n))*t;a.setLayout({y},!0)}}})})}function computeEdgeDepths(r,t){var n=t==="vertical"?"x":"y";each$f(r,function(o){o.outEdges.sort(function(a,l){return a.node2.getLayout()[n]-l.node2.getLayout()[n]}),o.inEdges.sort(function(a,l){return a.node1.getLayout()[n]-l.node1.getLayout()[n]})}),each$f(r,function(o){var a=0,l=0;each$f(o.outEdges,function(d){d.setLayout({sy:a},!0),a+=d.getLayout().dy}),each$f(o.inEdges,function(d){d.setLayout({ty:l},!0),l+=d.getLayout().dy})})}function sankeyVisual(r){r.eachSeriesByType("sankey",function(t){var n=t.getGraph(),o=n.nodes,a=n.edges;if(o.length){var l=1/0,d=-1/0;each$f(o,function(g){var y=g.getLayout().value;y<l&&(l=y),y>d&&(d=y)}),each$f(o,function(g){var y=new VisualMapping$1({type:"color",mappingMethod:"linear",dataExtent:[l,d],visual:t.get("color")}),S=y.mapValueToVisual(g.getLayout().value),x=g.getModel().get(["itemStyle","color"]);x!=null?(g.setVisual("color",x),g.setVisual("style",{fill:x})):(g.setVisual("color",S),g.setVisual("style",{fill:S}))})}a.length&&each$f(a,function(g){var y=g.getModel().get("lineStyle");g.setVisual("style",y)})})}function install$A(r){r.registerChartView(SankeyView$1),r.registerSeriesModel(SankeySeriesModel$1),r.registerLayout(sankeyLayout),r.registerVisual(sankeyVisual),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,n){n.eachComponent({mainType:"series",subType:"sankey",query:t},function(o){o.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var WhiskerBoxCommonMixin=function(){function r(){}return r.prototype.getInitialData=function(t,n){var o,a=n.getComponent("xAxis",this.get("xAxisIndex")),l=n.getComponent("yAxis",this.get("yAxisIndex")),d=a.get("type"),g=l.get("type"),y;d==="category"?(t.layout="horizontal",o=a.getOrdinalMeta(),y=!0):g==="category"?(t.layout="vertical",o=l.getOrdinalMeta(),y=!0):t.layout=t.layout||"horizontal";var S=["x","y"],x=t.layout==="horizontal"?0:1,w=this._baseAxisDim=S[x],c=S[1-x],A=[a,l],R=A[x].get("type"),L=A[1-x].get("type"),$=t.data;if($&&y){var O=[];each$f($,function(j,K){var Z;isArray$1(j)?(Z=j.slice(),j.unshift(K)):isArray$1(j.value)?(Z=extend({},j),Z.value=Z.value.slice(),j.value.unshift(K)):Z=j,O.push(Z)}),t.data=O}var z=this.defaultValueDimensions,V=[{name:w,type:getDimensionTypeByAxis(R),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:getDimensionTypeByAxis(L),dimsDef:z.slice()}];return createSeriesDataSimply(this,{coordDimensions:V,dimensionsCount:z.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,V,this)})},r.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},r}(),BoxplotSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(SeriesModel$1);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);const BoxplotSeriesModel$1=BoxplotSeriesModel;var BoxplotView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=n.getData(),d=this.group,g=this._data;this._data||d.removeAll();var y=n.get("layout")==="horizontal"?1:0;l.diff(g).add(function(S){if(l.hasValue(S)){var x=l.getItemLayout(S),w=createNormalBox$1(x,l,S,y,!0);l.setItemGraphicEl(S,w),d.add(w)}}).update(function(S,x){var w=g.getItemGraphicEl(x);if(!l.hasValue(S)){d.remove(w);return}var c=l.getItemLayout(S);w?(saveOldStyle(w),updateNormalBoxData(c,w,l,S)):w=createNormalBox$1(c,l,S,y),d.add(w),l.setItemGraphicEl(S,w)}).remove(function(S){var x=g.getItemGraphicEl(S);x&&d.remove(x)}).execute(),this._data=l},t.prototype.remove=function(n){var o=this.group,a=this._data;this._data=null,a&&a.eachItemGraphicEl(function(l){l&&o.remove(l)})},t.type="boxplot",t}(ChartView$1),BoxPathShape=function(){function r(){}return r}(),BoxPath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="boxplotBoxPath",o}return t.prototype.getDefaultShape=function(){return new BoxPathShape},t.prototype.buildPath=function(n,o){var a=o.points,l=0;for(n.moveTo(a[l][0],a[l][1]),l++;l<4;l++)n.lineTo(a[l][0],a[l][1]);for(n.closePath();l<a.length;l++)n.moveTo(a[l][0],a[l][1]),l++,n.lineTo(a[l][0],a[l][1])},t}(Path$1);function createNormalBox$1(r,t,n,o,a){var l=r.ends,d=new BoxPath({shape:{points:a?transInit$1(l,o,r):l}});return updateNormalBoxData(r,d,t,n,a),d}function updateNormalBoxData(r,t,n,o,a){var l=n.hostModel,d=graphic$1[a?"initProps":"updateProps"];d(t,{shape:{points:r.ends}},l,o),t.useStyle(n.getItemVisual(o,"style")),t.style.strokeNoScale=!0,t.z2=100;var g=n.getItemModel(o),y=g.getModel("emphasis");setStatesStylesFromModel(t,g),toggleHoverEmphasis(t,y.get("focus"),y.get("blurScope"),y.get("disabled"))}function transInit$1(r,t,n){return map$1(r,function(o){return o=o.slice(),o[t]=n.initBaseline,o})}const BoxplotView$1=BoxplotView;var each$9=each$f;function boxplotLayout(r){var t=groupSeriesByAxis(r);each$9(t,function(n){var o=n.seriesModels;o.length&&(calculateBase(n),each$9(o,function(a,l){layoutSingleSeries(a,n.boxOffsetList[l],n.boxWidthList[l])}))})}function groupSeriesByAxis(r){var t=[],n=[];return r.eachSeriesByType("boxplot",function(o){var a=o.getBaseAxis(),l=indexOf(n,a);l<0&&(l=n.length,n[l]=a,t[l]={axis:a,seriesModels:[]}),t[l].seriesModels.push(o)}),t}function calculateBase(r){var t=r.axis,n=r.seriesModels,o=n.length,a=r.boxWidthList=[],l=r.boxOffsetList=[],d=[],g;if(t.type==="category")g=t.getBandWidth();else{var y=0;each$9(n,function(R){y=Math.max(y,R.getData().count())});var S=t.getExtent();g=Math.abs(S[1]-S[0])/y}each$9(n,function(R){var L=R.get("boxWidth");isArray$1(L)||(L=[L,L]),d.push([parsePercent(L[0],g)||0,parsePercent(L[1],g)||0])});var x=g*.8-2,w=x/o*.3,c=(x-w*(o-1))/o,A=c/2-x/2;each$9(n,function(R,L){l.push(A),A+=w+c,a.push(Math.min(Math.max(c,d[L][0]),d[L][1]))})}function layoutSingleSeries(r,t,n){var o=r.coordinateSystem,a=r.getData(),l=n/2,d=r.get("layout")==="horizontal"?0:1,g=1-d,y=["x","y"],S=a.mapDimension(y[d]),x=a.mapDimensionsAll(y[g]);if(S==null||x.length<5)return;for(var w=0;w<a.count();w++){var c=a.get(S,w),A=V(c,x[2],w),R=V(c,x[0],w),L=V(c,x[1],w),$=V(c,x[3],w),O=V(c,x[4],w),z=[];j(z,L,!1),j(z,$,!0),z.push(R,L,O,$),K(z,R),K(z,O),K(z,A),a.setItemLayout(w,{initBaseline:A[g],ends:z})}function V(Z,q,ie){var te=a.get(q,ie),oe=[];oe[d]=Z,oe[g]=te;var re;return isNaN(Z)||isNaN(te)?re=[NaN,NaN]:(re=o.dataToPoint(oe),re[d]+=t),re}function j(Z,q,ie){var te=q.slice(),oe=q.slice();te[d]+=l,oe[d]-=l,ie?Z.push(te,oe):Z.push(oe,te)}function K(Z,q){var ie=q.slice(),te=q.slice();ie[d]-=l,te[d]+=l,Z.push(ie,te)}}function prepareBoxplotData(r,t){t=t||{};for(var n=[],o=[],a=t.boundIQR,l=a==="none"||a===0,d=0;d<r.length;d++){var g=asc$2(r[d].slice()),y=quantile(g,.25),S=quantile(g,.5),x=quantile(g,.75),w=g[0],c=g[g.length-1],A=(a??1.5)*(x-y),R=l?w:Math.max(w,y-A),L=l?c:Math.min(c,x+A),$=t.itemNameFormatter,O=isFunction($)?$({value:d}):isString($)?$.replace("{value}",d+""):d+"";n.push([O,R,y,S,x,L]);for(var z=0;z<g.length;z++){var V=g[z];if(V<R||V>L){var j=[O,V];o.push(j)}}}return{boxData:n,outliers:o}}var boxplotTransform={type:"echarts:boxplot",transform:function r(t){var n=t.upstream;if(n.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var o="";throwError(o)}var a=prepareBoxplotData(n.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:a.boxData},{data:a.outliers}]}};function install$z(r){r.registerSeriesModel(BoxplotSeriesModel$1),r.registerChartView(BoxplotView$1),r.registerLayout(boxplotLayout),r.registerTransform(boxplotTransform)}var SKIP_PROPS=["color","borderColor"],CandlestickView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},t.prototype.incrementalPrepareRender=function(n,o,a){this._clear(),this._updateDrawMode(n)},t.prototype.incrementalRender=function(n,o,a,l){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,o):this._incrementalRenderNormal(n,o)},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._updateDrawMode=function(n){var o=n.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},t.prototype._renderNormal=function(n){var o=n.getData(),a=this._data,l=this.group,d=o.getLayout("isSimpleBox"),g=n.get("clip",!0),y=n.coordinateSystem,S=y.getArea&&y.getArea();this._data||l.removeAll(),o.diff(a).add(function(x){if(o.hasValue(x)){var w=o.getItemLayout(x);if(g&&isNormalBoxClipped(S,w))return;var c=createNormalBox(w,x,!0);initProps(c,{shape:{points:w.ends}},n,x),setBoxCommon(c,o,x,d),l.add(c),o.setItemGraphicEl(x,c)}}).update(function(x,w){var c=a.getItemGraphicEl(w);if(!o.hasValue(x)){l.remove(c);return}var A=o.getItemLayout(x);if(g&&isNormalBoxClipped(S,A)){l.remove(c);return}c?(updateProps$1(c,{shape:{points:A.ends}},n,x),saveOldStyle(c)):c=createNormalBox(A),setBoxCommon(c,o,x,d),l.add(c),o.setItemGraphicEl(x,c)}).remove(function(x){var w=a.getItemGraphicEl(x);w&&l.remove(w)}).execute(),this._data=o},t.prototype._renderLarge=function(n){this._clear(),createLarge(n,this.group);var o=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;o?this.group.setClipPath(o):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(n,o){for(var a=o.getData(),l=a.getLayout("isSimpleBox"),d;(d=n.next())!=null;){var g=a.getItemLayout(d),y=createNormalBox(g);setBoxCommon(y,a,d,l),y.incremental=!0,this.group.add(y),this._progressiveEls.push(y)}},t.prototype._incrementalRenderLarge=function(n,o){createLarge(o,this.group,this._progressiveEls,!0)},t.prototype.remove=function(n){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(ChartView$1),NormalBoxPathShape=function(){function r(){}return r}(),NormalBoxPath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="normalCandlestickBox",o}return t.prototype.getDefaultShape=function(){return new NormalBoxPathShape},t.prototype.buildPath=function(n,o){var a=o.points;this.__simpleBox?(n.moveTo(a[4][0],a[4][1]),n.lineTo(a[6][0],a[6][1])):(n.moveTo(a[0][0],a[0][1]),n.lineTo(a[1][0],a[1][1]),n.lineTo(a[2][0],a[2][1]),n.lineTo(a[3][0],a[3][1]),n.closePath(),n.moveTo(a[4][0],a[4][1]),n.lineTo(a[5][0],a[5][1]),n.moveTo(a[6][0],a[6][1]),n.lineTo(a[7][0],a[7][1]))},t}(Path$1);function createNormalBox(r,t,n){var o=r.ends;return new NormalBoxPath({shape:{points:n?transInit(o,r):o},z2:100})}function isNormalBoxClipped(r,t){for(var n=!0,o=0;o<t.ends.length;o++)if(r.contain(t.ends[o][0],t.ends[o][1])){n=!1;break}return n}function setBoxCommon(r,t,n,o){var a=t.getItemModel(n);r.useStyle(t.getItemVisual(n,"style")),r.style.strokeNoScale=!0,r.__simpleBox=o,setStatesStylesFromModel(r,a)}function transInit(r,t){return map$1(r,function(n){return n=n.slice(),n[1]=t.initBaseline,n})}var LargeBoxPathShape=function(){function r(){}return r}(),LargeBoxPath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o.type="largeCandlestickBox",o}return t.prototype.getDefaultShape=function(){return new LargeBoxPathShape},t.prototype.buildPath=function(n,o){for(var a=o.points,l=0;l<a.length;)if(this.__sign===a[l++]){var d=a[l++];n.moveTo(d,a[l++]),n.lineTo(d,a[l++])}else l+=3},t}(Path$1);function createLarge(r,t,n,o){var a=r.getData(),l=a.getLayout("largePoints"),d=new LargeBoxPath({shape:{points:l},__sign:1,ignoreCoarsePointer:!0});t.add(d);var g=new LargeBoxPath({shape:{points:l},__sign:-1,ignoreCoarsePointer:!0});t.add(g);var y=new LargeBoxPath({shape:{points:l},__sign:0,ignoreCoarsePointer:!0});t.add(y),setLargeStyle(1,d,r),setLargeStyle(-1,g,r),setLargeStyle(0,y,r),o&&(d.incremental=!0,g.incremental=!0),n&&n.push(d,g)}function setLargeStyle(r,t,n,o){var a=n.get(["itemStyle",r>0?"borderColor":"borderColor0"])||n.get(["itemStyle",r>0?"color":"color0"]);r===0&&(a=n.get(["itemStyle","borderColorDoji"]));var l=n.getModel("itemStyle").getItemStyle(SKIP_PROPS);t.useStyle(l),t.style.fill=null,t.style.stroke=a}const CandlestickView$1=CandlestickView;var CandlestickSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(n,o,a){var l=o.getItemLayout(n);return l&&a.rect(l.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(SeriesModel$1);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);const CandlestickSeriesModel$1=CandlestickSeriesModel;function candlestickPreprocessor(r){!r||!isArray$1(r.series)||each$f(r.series,function(t){isObject$3(t)&&t.type==="k"&&(t.type="candlestick")})}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"],candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(r,t){function n(l,d){return d.get(l>0?positiveColorQuery:negativeColorQuery)}function o(l,d){return d.get(l===0?dojiBorderColorQuery:l>0?positiveBorderColorQuery:negativeBorderColorQuery)}if(!t.isSeriesFiltered(r)){var a=r.pipelineContext.large;return!a&&{progress:function(l,d){for(var g;(g=l.next())!=null;){var y=d.getItemModel(g),S=d.getItemLayout(g).sign,x=y.getItemStyle();x.fill=n(S,y),x.stroke=o(S,y)||x.fill;var w=d.ensureUniqueItemVisual(g,"style");extend(w,x)}}}}}};const candlestickVisual$1=candlestickVisual;var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(r){var t=r.coordinateSystem,n=r.getData(),o=calculateCandleWidth(r,n),a=0,l=1,d=["x","y"],g=n.getDimensionIndex(n.mapDimension(d[a])),y=map$1(n.mapDimensionsAll(d[l]),n.getDimensionIndex,n),S=y[0],x=y[1],w=y[2],c=y[3];if(n.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),g<0||y.length<4)return;return{progress:r.pipelineContext.large?R:A};function A(L,$){for(var O,z=$.getStore();(O=L.next())!=null;){var V=z.get(g,O),j=z.get(S,O),K=z.get(x,O),Z=z.get(w,O),q=z.get(c,O),ie=Math.min(j,K),te=Math.max(j,K),oe=Ne(ie,V),re=Ne(te,V),he=Ne(Z,V),_e=Ne(q,V),me=[];Ee(me,re,0),Ee(me,oe,1),me.push(it(_e),it(re),it(he),it(oe));var be=$.getItemModel(O),Q=!!be.get(["itemStyle","borderColorDoji"]);$.setItemLayout(O,{sign:getSign(z,O,j,K,x,Q),initBaseline:j>K?re[l]:oe[l],ends:me,brushRect:Ge(Z,q,V)})}function Ne(Te,Ke){var Tt=[];return Tt[a]=Ke,Tt[l]=Te,isNaN(Ke)||isNaN(Te)?[NaN,NaN]:t.dataToPoint(Tt)}function Ee(Te,Ke,Tt){var Lt=Ke.slice(),Qt=Ke.slice();Lt[a]=subPixelOptimize(Lt[a]+o/2,1,!1),Qt[a]=subPixelOptimize(Qt[a]-o/2,1,!0),Tt?Te.push(Lt,Qt):Te.push(Qt,Lt)}function Ge(Te,Ke,Tt){var Lt=Ne(Te,Tt),Qt=Ne(Ke,Tt);return Lt[a]-=o/2,Qt[a]-=o/2,{x:Lt[0],y:Lt[1],width:o,height:Qt[1]-Lt[1]}}function it(Te){return Te[a]=subPixelOptimize(Te[a],1),Te}}function R(L,$){for(var O=createFloat32Array(L.count*4),z=0,V,j=[],K=[],Z,q=$.getStore(),ie=!!r.get(["itemStyle","borderColorDoji"]);(Z=L.next())!=null;){var te=q.get(g,Z),oe=q.get(S,Z),re=q.get(x,Z),he=q.get(w,Z),_e=q.get(c,Z);if(isNaN(te)||isNaN(he)||isNaN(_e)){O[z++]=NaN,z+=3;continue}O[z++]=getSign(q,Z,oe,re,x,ie),j[a]=te,j[l]=he,V=t.dataToPoint(j,null,K),O[z++]=V?V[0]:NaN,O[z++]=V?V[1]:NaN,j[l]=_e,V=t.dataToPoint(j,null,K),O[z++]=V?V[1]:NaN}$.setLayout("largePoints",O)}}};function getSign(r,t,n,o,a,l){var d;return n>o?d=-1:n<o?d=1:d=l?0:t>0?r.get(a,t-1)<=o?1:-1:1,d}function calculateCandleWidth(r,t){var n=r.getBaseAxis(),o,a=n.type==="category"?n.getBandWidth():(o=n.getExtent(),Math.abs(o[1]-o[0])/t.count()),l=parsePercent(retrieve2(r.get("barMaxWidth"),a),a),d=parsePercent(retrieve2(r.get("barMinWidth"),1),a),g=r.get("barWidth");return g!=null?parsePercent(g,a):Math.max(Math.min(a/2,l),d)}const candlestickLayout$1=candlestickLayout;function install$y(r){r.registerChartView(CandlestickView$1),r.registerSeriesModel(CandlestickSeriesModel$1),r.registerPreprocessor(candlestickPreprocessor),r.registerVisual(candlestickVisual$1),r.registerLayout(candlestickLayout$1)}function updateRipplePath(r,t){var n=t.rippleEffectColor||t.color;r.eachChild(function(o){o.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?n:null,fill:t.brushType==="fill"?n:null}})})}var EffectSymbol=function(r){__extends(t,r);function t(n,o){var a=r.call(this)||this,l=new SymbolClz(n,o),d=new Group$4;return a.add(l),a.add(d),a.updateData(n,o),a}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(n){for(var o=n.symbolType,a=n.color,l=n.rippleNumber,d=this.childAt(1),g=0;g<l;g++){var y=createSymbol$1(o,-1,-1,2,2,a);y.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var S=-g/l*n.period+n.effectOffset;y.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(S).start(),y.animateStyle(!0).when(n.period,{opacity:0}).delay(S).start(),d.add(y)}updateRipplePath(d,n)},t.prototype.updateEffectAnimation=function(n){for(var o=this._effectCfg,a=this.childAt(1),l=["symbolType","period","rippleScale","rippleNumber"],d=0;d<l.length;d++){var g=l[d];if(o[g]!==n[g]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}updateRipplePath(a,n)},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},t.prototype.updateData=function(n,o){var a=this,l=n.hostModel;this.childAt(0).updateData(n,o);var d=this.childAt(1),g=n.getItemModel(o),y=n.getItemVisual(o,"symbol"),S=normalizeSymbolSize(n.getItemVisual(o,"symbolSize")),x=n.getItemVisual(o,"style"),w=x&&x.fill,c=g.getModel("emphasis");d.setScale(S),d.traverse(function($){$.setStyle("fill",w)});var A=normalizeSymbolOffset(n.getItemVisual(o,"symbolOffset"),S);A&&(d.x=A[0],d.y=A[1]);var R=n.getItemVisual(o,"symbolRotate");d.rotation=(R||0)*Math.PI/180||0;var L={};L.showEffectOn=l.get("showEffectOn"),L.rippleScale=g.get(["rippleEffect","scale"]),L.brushType=g.get(["rippleEffect","brushType"]),L.period=g.get(["rippleEffect","period"])*1e3,L.effectOffset=o/n.count(),L.z=l.getShallow("z")||0,L.zlevel=l.getShallow("zlevel")||0,L.symbolType=y,L.color=w,L.rippleEffectColor=g.get(["rippleEffect","color"]),L.rippleNumber=g.get(["rippleEffect","number"]),L.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(L):this.startEffectAnimation(L),this._effectCfg=L):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function($){$==="emphasis"?L.showEffectOn!=="render"&&a.startEffectAnimation(L):$==="normal"&&L.showEffectOn!=="render"&&a.stopEffectAnimation()}),this._effectCfg=L,toggleHoverEmphasis(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(n){n&&n()},t}(Group$4);const EffectSymbol$1=EffectSymbol;var EffectScatterView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this._symbolDraw=new SymbolDraw$1(EffectSymbol$1)},t.prototype.render=function(n,o,a){var l=n.getData(),d=this._symbolDraw;d.updateData(l,{clipShape:this._getClipShape(n)}),this.group.add(d.group)},t.prototype._getClipShape=function(n){var o=n.coordinateSystem,a=o&&o.getArea&&o.getArea();return n.get("clip",!0)?a:null},t.prototype.updateTransform=function(n,o,a){var l=n.getData();this.group.dirty();var d=pointsLayout("").reset(n,o,a);d.progress&&d.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(n){var o=n.coordinateSystem;o&&o.getRoamTransform&&(this.group.transform=clone$2(o.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(n,o){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(ChartView$1);const EffectScatterView$1=EffectScatterView;var EffectScatterSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(n,o,a){return a.point(o.getItemLayout(n))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(SeriesModel$1);const EffectScatterSeriesModel$1=EffectScatterSeriesModel;function install$x(r){r.registerChartView(EffectScatterView$1),r.registerSeriesModel(EffectScatterSeriesModel$1),r.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this)||this;return l.add(l.createLine(n,o,a)),l._updateEffectSymbol(n,o),l}return t.prototype.createLine=function(n,o,a){return new Line$1(n,o,a)},t.prototype._updateEffectSymbol=function(n,o){var a=n.getItemModel(o),l=a.getModel("effect"),d=l.get("symbolSize"),g=l.get("symbol");isArray$1(d)||(d=[d,d]);var y=n.getItemVisual(o,"style"),S=l.get("color")||y&&y.stroke,x=this.childAt(1);this._symbolType!==g&&(this.remove(x),x=createSymbol$1(g,-.5,-.5,1,1,S),x.z2=100,x.culling=!0,this.add(x)),x&&(x.setStyle("shadowColor",S),x.setStyle(l.getItemStyle(["color"])),x.scaleX=d[0],x.scaleY=d[1],x.setColor(S),this._symbolType=g,this._symbolScale=d,this._updateEffectAnimation(n,l,o))},t.prototype._updateEffectAnimation=function(n,o,a){var l=this.childAt(1);if(l){var d=n.getItemLayout(a),g=o.get("period")*1e3,y=o.get("loop"),S=o.get("roundTrip"),x=o.get("constantSpeed"),w=retrieve(o.get("delay"),function(A){return A/n.count()*g/3});if(l.ignore=!0,this._updateAnimationPoints(l,d),x>0&&(g=this._getLineLength(l)/x*1e3),g!==this._period||y!==this._loop||S!==this._roundTrip){l.stopAnimation();var c=void 0;isFunction(w)?c=w(a):c=w,l.__t>0&&(c=-g*l.__t),this._animateSymbol(l,g,c,y,S)}this._period=g,this._loop=y,this._roundTrip=S}},t.prototype._animateSymbol=function(n,o,a,l,d){if(o>0){n.__t=0;var g=this,y=n.animate("",l).when(d?o*2:o,{__t:d?2:1}).delay(a).during(function(){g._updateSymbolPosition(n)});l||y.done(function(){g.remove(n)}),y.start()}},t.prototype._getLineLength=function(n){return dist$1(n.__p1,n.__cp1)+dist$1(n.__cp1,n.__p2)},t.prototype._updateAnimationPoints=function(n,o){n.__p1=o[0],n.__p2=o[1],n.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},t.prototype.updateData=function(n,o,a){this.childAt(0).updateData(n,o,a),this._updateEffectSymbol(n,o)},t.prototype._updateSymbolPosition=function(n){var o=n.__p1,a=n.__p2,l=n.__cp1,d=n.__t<1?n.__t:2-n.__t,g=[n.x,n.y],y=g.slice(),S=quadraticAt$1,x=quadraticDerivativeAt;g[0]=S(o[0],l[0],a[0],d),g[1]=S(o[1],l[1],a[1],d);var w=n.__t<1?x(o[0],l[0],a[0],d):x(a[0],l[0],o[0],1-d),c=n.__t<1?x(o[1],l[1],a[1],d):x(a[1],l[1],o[1],1-d);n.rotation=-Math.atan2(c,w)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=dist$1(y,g)*1.05,d===1&&(g[0]=y[0]+(g[0]-y[0])/2,g[1]=y[1]+(g[1]-y[1])/2)):n.__lastT===1?n.scaleY=2*dist$1(o,g):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=g[0],n.y=g[1]},t.prototype.updateLayout=function(n,o){this.childAt(0).updateLayout(n,o);var a=n.getItemModel(o).getModel("effect");this._updateEffectAnimation(n,a,o)},t}(Group$4);const EffectLine$1=EffectLine;var Polyline=function(r){__extends(t,r);function t(n,o,a){var l=r.call(this)||this;return l._createPolyline(n,o,a),l}return t.prototype._createPolyline=function(n,o,a){var l=n.getItemLayout(o),d=new Polyline$3({shape:{points:l}});this.add(d),this._updateCommonStl(n,o,a)},t.prototype.updateData=function(n,o,a){var l=n.hostModel,d=this.childAt(0),g={shape:{points:n.getItemLayout(o)}};updateProps$1(d,g,l,o),this._updateCommonStl(n,o,a)},t.prototype._updateCommonStl=function(n,o,a){var l=this.childAt(0),d=n.getItemModel(o),g=a&&a.emphasisLineStyle,y=a&&a.focus,S=a&&a.blurScope,x=a&&a.emphasisDisabled;if(!a||n.hasItemOption){var w=d.getModel("emphasis");g=w.getModel("lineStyle").getLineStyle(),x=w.get("disabled"),y=w.get("focus"),S=w.get("blurScope")}l.useStyle(n.getItemVisual(o,"style")),l.style.fill=null,l.style.strokeNoScale=!0;var c=l.ensureState("emphasis");c.style=g,toggleHoverEmphasis(this,y,S,x)},t.prototype.updateLayout=function(n,o){var a=this.childAt(0);a.setShape("points",n.getItemLayout(o))},t}(Group$4);const Polyline$1=Polyline;var EffectPolyline=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return t.prototype.createLine=function(n,o,a){return new Polyline$1(n,o,a)},t.prototype._updateAnimationPoints=function(n,o){this._points=o;for(var a=[0],l=0,d=1;d<o.length;d++){var g=o[d-1],y=o[d];l+=dist$1(g,y),a.push(l)}if(l===0){this._length=0;return}for(var d=0;d<a.length;d++)a[d]/=l;this._offsets=a,this._length=l},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(n){var o=n.__t<1?n.__t:2-n.__t,a=this._points,l=this._offsets,d=a.length;if(l){var g=this._lastFrame,y;if(o<this._lastFramePercent){var S=Math.min(g+1,d-1);for(y=S;y>=0&&!(l[y]<=o);y--);y=Math.min(y,d-2)}else{for(y=g;y<d&&!(l[y]>o);y++);y=Math.min(y-1,d-2)}var x=(o-l[y])/(l[y+1]-l[y]),w=a[y],c=a[y+1];n.x=w[0]*(1-x)+x*c[0],n.y=w[1]*(1-x)+x*c[1];var A=n.__t<1?c[0]-w[0]:w[0]-c[0],R=n.__t<1?c[1]-w[1]:w[1]-c[1];n.rotation=-Math.atan2(R,A)-Math.PI/2,this._lastFrame=y,this._lastFramePercent=o,n.ignore=!1}},t}(EffectLine$1);const EffectPolyline$1=EffectPolyline;var LargeLinesPathShape=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),LargeLinesPath=function(r){__extends(t,r);function t(n){var o=r.call(this,n)||this;return o._off=0,o.hoverDataIdx=-1,o}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LargeLinesPathShape},t.prototype.buildPath=function(n,o){var a=o.segs,l=o.curveness,d;if(o.polyline)for(d=this._off;d<a.length;){var g=a[d++];if(g>0){n.moveTo(a[d++],a[d++]);for(var y=1;y<g;y++)n.lineTo(a[d++],a[d++])}}else for(d=this._off;d<a.length;){var S=a[d++],x=a[d++],w=a[d++],c=a[d++];if(n.moveTo(S,x),l>0){var A=(S+w)/2-(x-c)*l,R=(x+c)/2-(w-S)*l;n.quadraticCurveTo(A,R,w,c)}else n.lineTo(w,c)}this.incremental&&(this._off=d,this.notClear=!0)},t.prototype.findDataIndex=function(n,o){var a=this.shape,l=a.segs,d=a.curveness,g=this.style.lineWidth;if(a.polyline)for(var y=0,S=0;S<l.length;){var x=l[S++];if(x>0)for(var w=l[S++],c=l[S++],A=1;A<x;A++){var R=l[S++],L=l[S++];if(containStroke$4(w,c,R,L,g,n,o))return y}y++}else for(var y=0,S=0;S<l.length;){var w=l[S++],c=l[S++],R=l[S++],L=l[S++];if(d>0){var $=(w+R)/2-(c-L)*d,O=(c+L)/2-(R-w)*d;if(containStroke$2(w,c,$,O,R,L,g,n,o))return y}else if(containStroke$4(w,c,R,L,g,n,o))return y;y++}return-1},t.prototype.contain=function(n,o){var a=this.transformCoordToLocal(n,o),l=this.getBoundingRect();if(n=a[0],o=a[1],l.contain(n,o)){var d=this.hoverDataIdx=this.findDataIndex(n,o);return d>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var o=this.shape,a=o.segs,l=1/0,d=1/0,g=-1/0,y=-1/0,S=0;S<a.length;){var x=a[S++],w=a[S++];l=Math.min(x,l),g=Math.max(x,g),d=Math.min(w,d),y=Math.max(w,y)}n=this._rect=new BoundingRect$1(l,d,g,y)}return n},t}(Path$1),LargeLineDraw=function(){function r(){this.group=new Group$4}return r.prototype.updateData=function(t){this._clear();var n=this._create();n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t)},r.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(t,n){var o=this._newAdded[0],a=n.getLayout("linesPoints"),l=o&&o.shape.segs;if(l&&l.length<2e4){var d=l.length,g=new Float32Array(d+a.length);g.set(l),g.set(a,d),o.setShape({segs:g})}else{this._newAdded=[];var y=this._create();y.incremental=!0,y.setShape({segs:a}),this._setCommon(y,n),y.__startIndex=t.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},r.prototype._setCommon=function(t,n,o){var a=n.hostModel;t.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),t.useStyle(a.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var l=n.getVisual("style");l&&l.stroke&&t.setStyle("stroke",l.stroke),t.setStyle("fill",null);var d=getECData(t);d.seriesIndex=a.seriesIndex,t.on("mousemove",function(g){d.dataIndex=null;var y=t.hoverDataIdx;y>0&&(d.dataIndex=y+t.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}();const LargeLineDraw$1=LargeLineDraw;var linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(r){var t=r.coordinateSystem;if(t){var n=r.get("polyline"),o=r.pipelineContext.large;return{progress:function(a,l){var d=[];if(o){var g=void 0,y=a.end-a.start;if(n){for(var S=0,x=a.start;x<a.end;x++)S+=r.getLineCoordsCount(x);g=new Float32Array(y+S*2)}else g=new Float32Array(y*4);for(var w=0,c=[],x=a.start;x<a.end;x++){var A=r.getLineCoords(x,d);n&&(g[w++]=A);for(var R=0;R<A;R++)c=t.dataToPoint(d[R],!1,c),g[w++]=c[0],g[w++]=c[1]}l.setLayout("linesPoints",g)}else for(var x=a.start;x<a.end;x++){var L=l.getItemModel(x),A=r.getLineCoords(x,d),$=[];if(n)for(var O=0;O<A;O++)$.push(t.dataToPoint(d[O]));else{$[0]=t.dataToPoint(d[0]),$[1]=t.dataToPoint(d[1]);var z=L.get(["lineStyle","curveness"]);+z&&($[2]=[($[0][0]+$[1][0])/2-($[0][1]-$[1][1])*z,($[0][1]+$[1][1])/2-($[1][0]-$[0][0])*z])}l.setItemLayout(x,$)}}}}}};const linesLayout$1=linesLayout;var LinesView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=n.getData(),d=this._updateLineDraw(l,n),g=n.get("zlevel"),y=n.get(["effect","trailLength"]),S=a.getZr(),x=S.painter.getType()==="svg";x||S.painter.getLayer(g).clear(!0),this._lastZlevel!=null&&!x&&S.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&y>0&&(x||S.configLayer(g,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(y/10+.9,1),0)})),d.updateData(l);var w=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n);w?this.group.setClipPath(w):this.group.removeClipPath(),this._lastZlevel=g,this._finished=!0},t.prototype.incrementalPrepareRender=function(n,o,a){var l=n.getData(),d=this._updateLineDraw(l,n);d.incrementalPrepareUpdate(l),this._clearLayer(a),this._finished=!1},t.prototype.incrementalRender=function(n,o,a){this._lineDraw.incrementalUpdate(n,o.getData()),this._finished=n.end===o.getData().count()},t.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},t.prototype.updateTransform=function(n,o,a){var l=n.getData(),d=n.pipelineContext;if(!this._finished||d.large||d.progressiveRender)return{update:!0};var g=linesLayout$1.reset(n,o,a);g.progress&&g.progress({start:0,end:l.count(),count:l.count()},l),this._lineDraw.updateLayout(),this._clearLayer(a)},t.prototype._updateLineDraw=function(n,o){var a=this._lineDraw,l=this._showEffect(o),d=!!o.get("polyline"),g=o.pipelineContext,y=g.large;return(!a||l!==this._hasEffet||d!==this._isPolyline||y!==this._isLargeDraw)&&(a&&a.remove(),a=this._lineDraw=y?new LargeLineDraw$1:new LineDraw$1(d?l?EffectPolyline$1:Polyline$1:l?EffectLine$1:Line$1),this._hasEffet=l,this._isPolyline=d,this._isLargeDraw=y),this.group.add(a.group),a},t.prototype._showEffect=function(n){return!!n.get(["effect","show"])},t.prototype._clearLayer=function(n){var o=n.getZr(),a=o.painter.getType()==="svg";!a&&this._lastZlevel!=null&&o.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(n,o){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(o)},t.prototype.dispose=function(n,o){this.remove(n,o)},t.type="lines",t}(ChartView$1);const LinesView$1=LinesView;var Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(r){var t=r.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r.data=map$1(t,function(n){var o=[n[0].coord,n[1].coord],a={coords:o};return n[0].name&&(a.fromName=n[0].name),n[1].name&&(a.toName=n[1].name),mergeAll([a,n[0],n[1]])}))}var LinesSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return t.prototype.init=function(n){n.data=n.data||[],compatEc2(n);var o=this._processFlatCoordsArray(n.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(n.data=new Float32Array(o.count)),r.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(n){if(compatEc2(n),n.data){var o=this._processFlatCoordsArray(n.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(n.data=new Float32Array(o.count))}r.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(n){var o=this._processFlatCoordsArray(n.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),n.data=new Float32Array(o.count)),this.getRawData().appendData(n.data)},t.prototype._getCoordsFromItemModel=function(n){var o=this.getData().getItemModel(n),a=o.option instanceof Array?o.option:o.getShallow("coords");return a},t.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},t.prototype.getLineCoords=function(n,o){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[n*2],l=this._flatCoordsOffset[n*2+1],d=0;d<l;d++)o[d]=o[d]||[],o[d][0]=this._flatCoords[a+d*2],o[d][1]=this._flatCoords[a+d*2+1];return l}else{for(var g=this._getCoordsFromItemModel(n),d=0;d<g.length;d++)o[d]=o[d]||[],o[d][0]=g[d][0],o[d][1]=g[d][1];return g.length}},t.prototype._processFlatCoordsArray=function(n){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),isNumber(n[0])){for(var a=n.length,l=new Uint32Arr(a),d=new Float64Arr(a),g=0,y=0,S=0,x=0;x<a;){S++;var w=n[x++];l[y++]=g+o,l[y++]=w;for(var c=0;c<w;c++){var A=n[x++],R=n[x++];d[g++]=A,d[g++]=R}}return{flatCoordsOffset:new Uint32Array(l.buffer,0,y),flatCoords:d,count:S}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},t.prototype.getInitialData=function(n,o){var a=new SeriesData$1(["value"],this);return a.hasItemOption=!1,a.initData(n.data,[],function(l,d,g,y){if(l instanceof Array)return NaN;a.hasItemOption=!0;var S=l.value;if(S!=null)return S instanceof Array?S[y]:S}),a},t.prototype.formatTooltip=function(n,o,a){var l=this.getData(),d=l.getItemModel(n),g=d.get("name");if(g)return g;var y=d.get("fromName"),S=d.get("toName"),x=[];return y!=null&&x.push(y),S!=null&&x.push(S),createTooltipMarkup("nameValue",{name:x.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var n=this.getModel("effect"),o=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&o>0?o+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(SeriesModel$1);const LinesSeriesModel$1=LinesSeriesModel;function normalize(r){return r instanceof Array||(r=[r,r]),r}var linesVisual={seriesType:"lines",reset:function(r){var t=normalize(r.get("symbol")),n=normalize(r.get("symbolSize")),o=r.getData();o.setVisual("fromSymbol",t&&t[0]),o.setVisual("toSymbol",t&&t[1]),o.setVisual("fromSymbolSize",n&&n[0]),o.setVisual("toSymbolSize",n&&n[1]);function a(l,d){var g=l.getItemModel(d),y=normalize(g.getShallow("symbol",!0)),S=normalize(g.getShallow("symbolSize",!0));y[0]&&l.setItemVisual(d,"fromSymbol",y[0]),y[1]&&l.setItemVisual(d,"toSymbol",y[1]),S[0]&&l.setItemVisual(d,"fromSymbolSize",S[0]),S[1]&&l.setItemVisual(d,"toSymbolSize",S[1])}return{dataEach:o.hasItemOption?a:null}}};const linesVisual$1=linesVisual;function install$w(r){r.registerChartView(LinesView$1),r.registerSeriesModel(LinesSeriesModel$1),r.registerLayout(linesLayout$1),r.registerVisual(linesVisual$1)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=platformApi.createCanvas();this.canvas=t}return r.prototype.update=function(t,n,o,a,l,d){var g=this._getBrush(),y=this._getGradient(l,"inRange"),S=this._getGradient(l,"outOfRange"),x=this.pointSize+this.blurSize,w=this.canvas,c=w.getContext("2d"),A=t.length;w.width=n,w.height=o;for(var R=0;R<A;++R){var L=t[R],$=L[0],O=L[1],z=L[2],V=a(z);c.globalAlpha=V,c.drawImage(g,$-x,O-x)}if(!w.width||!w.height)return w;for(var j=c.getImageData(0,0,w.width,w.height),K=j.data,Z=0,q=K.length,ie=this.minOpacity,te=this.maxOpacity,oe=te-ie;Z<q;){var V=K[Z+3]/256,re=Math.floor(V*(GRADIENT_LEVELS-1))*4;if(V>0){var he=d(V)?y:S;V>0&&(V=V*oe+ie),K[Z++]=he[re],K[Z++]=he[re+1],K[Z++]=he[re+2],K[Z++]=he[re+3]*V*256}else Z+=4}return c.putImageData(j,0,0),w},r.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),n=this.pointSize+this.blurSize,o=n*2;t.width=o,t.height=o;var a=t.getContext("2d");return a.clearRect(0,0,o,o),a.shadowOffsetX=o,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-n,n,this.pointSize,0,Math.PI*2,!0),a.closePath(),a.fill(),t},r.prototype._getGradient=function(t,n){for(var o=this._gradientPixels,a=o[n]||(o[n]=new Uint8ClampedArray(256*4)),l=[0,0,0,0],d=0,g=0;g<256;g++)t[n](g/255,!0,l),a[d++]=l[0],a[d++]=l[1],a[d++]=l[2],a[d++]=l[3];return a},r}();const HeatmapLayer$1=HeatmapLayer;function getIsInPiecewiseRange(r,t,n){var o=r[1]-r[0];t=map$1(t,function(d){return{interval:[(d.interval[0]-r[0])/o,(d.interval[1]-r[0])/o]}});var a=t.length,l=0;return function(d){var g;for(g=l;g<a;g++){var y=t[g].interval;if(y[0]<=d&&d<=y[1]){l=g;break}}if(g===a)for(g=l-1;g>=0;g--){var y=t[g].interval;if(y[0]<=d&&d<=y[1]){l=g;break}}return g>=0&&g<a&&n[g]}}function getIsInContinuousRange(r,t){var n=r[1]-r[0];return t=[(t[0]-r[0])/n,(t[1]-r[0])/n],function(o){return o>=t[0]&&o<=t[1]}}function isGeoCoordSys(r){var t=r.dimensions;return t[0]==="lng"&&t[1]==="lat"}var HeatmapView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l;o.eachComponent("visualMap",function(g){g.eachTargetSeries(function(y){y===n&&(l=g)})}),this._progressiveEls=null,this.group.removeAll();var d=n.coordinateSystem;d.type==="cartesian2d"||d.type==="calendar"?this._renderOnCartesianAndCalendar(n,a,0,n.getData().count()):isGeoCoordSys(d)&&this._renderOnGeo(d,n,l,a)},t.prototype.incrementalPrepareRender=function(n,o,a){this.group.removeAll()},t.prototype.incrementalRender=function(n,o,a,l){var d=o.coordinateSystem;d&&(isGeoCoordSys(d)?this.render(o,a,l):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(o,l,n.start,n.end,!0)))},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._renderOnCartesianAndCalendar=function(n,o,a,l,d){var g=n.coordinateSystem,y=isCoordinateSystemType(g,"cartesian2d"),S,x,w,c;if(y){var A=g.getAxis("x"),R=g.getAxis("y");S=A.getBandWidth()+.5,x=R.getBandWidth()+.5,w=A.scale.getExtent(),c=R.scale.getExtent()}for(var L=this.group,$=n.getData(),O=n.getModel(["emphasis","itemStyle"]).getItemStyle(),z=n.getModel(["blur","itemStyle"]).getItemStyle(),V=n.getModel(["select","itemStyle"]).getItemStyle(),j=n.get(["itemStyle","borderRadius"]),K=getLabelStatesModels(n),Z=n.getModel("emphasis"),q=Z.get("focus"),ie=Z.get("blurScope"),te=Z.get("disabled"),oe=y?[$.mapDimension("x"),$.mapDimension("y"),$.mapDimension("value")]:[$.mapDimension("time"),$.mapDimension("value")],re=a;re<l;re++){var he=void 0,_e=$.getItemVisual(re,"style");if(y){var me=$.get(oe[0],re),be=$.get(oe[1],re);if(isNaN($.get(oe[2],re))||isNaN(me)||isNaN(be)||me<w[0]||me>w[1]||be<c[0]||be>c[1])continue;var Q=g.dataToPoint([me,be]);he=new Rect$3({shape:{x:Q[0]-S/2,y:Q[1]-x/2,width:S,height:x},style:_e})}else{if(isNaN($.get(oe[1],re)))continue;he=new Rect$3({z2:1,shape:g.dataToRect([$.get(oe[0],re)]).contentShape,style:_e})}if($.hasItemOption){var Ne=$.getItemModel(re),Ee=Ne.getModel("emphasis");O=Ee.getModel("itemStyle").getItemStyle(),z=Ne.getModel(["blur","itemStyle"]).getItemStyle(),V=Ne.getModel(["select","itemStyle"]).getItemStyle(),j=Ne.get(["itemStyle","borderRadius"]),q=Ee.get("focus"),ie=Ee.get("blurScope"),te=Ee.get("disabled"),K=getLabelStatesModels(Ne)}he.shape.r=j;var Ge=n.getRawValue(re),it="-";Ge&&Ge[2]!=null&&(it=Ge[2]+""),setLabelStyle(he,K,{labelFetcher:n,labelDataIndex:re,defaultOpacity:_e.opacity,defaultText:it}),he.ensureState("emphasis").style=O,he.ensureState("blur").style=z,he.ensureState("select").style=V,toggleHoverEmphasis(he,q,ie,te),he.incremental=d,d&&(he.states.emphasis.hoverLayer=!0),L.add(he),$.setItemGraphicEl(re,he),this._progressiveEls&&this._progressiveEls.push(he)}},t.prototype._renderOnGeo=function(n,o,a,l){var d=a.targetVisuals.inRange,g=a.targetVisuals.outOfRange,y=o.getData(),S=this._hmLayer||this._hmLayer||new HeatmapLayer$1;S.blurSize=o.get("blurSize"),S.pointSize=o.get("pointSize"),S.minOpacity=o.get("minOpacity"),S.maxOpacity=o.get("maxOpacity");var x=n.getViewRect().clone(),w=n.getRoamTransform();x.applyTransform(w);var c=Math.max(x.x,0),A=Math.max(x.y,0),R=Math.min(x.width+x.x,l.getWidth()),L=Math.min(x.height+x.y,l.getHeight()),$=R-c,O=L-A,z=[y.mapDimension("lng"),y.mapDimension("lat"),y.mapDimension("value")],V=y.mapArray(z,function(q,ie,te){var oe=n.dataToPoint([q,ie]);return oe[0]-=c,oe[1]-=A,oe.push(te),oe}),j=a.getExtent(),K=a.type==="visualMap.continuous"?getIsInContinuousRange(j,a.option.range):getIsInPiecewiseRange(j,a.getPieceList(),a.option.selected);S.update(V,$,O,d.color.getNormalizer(),{inRange:d.color.getColorMapper(),outOfRange:g.color.getColorMapper()},K);var Z=new ZRImage$1({style:{width:$,height:O,x:c,y:A,image:S.canvas},silent:!0});this.group.add(Z)},t.type="heatmap",t}(ChartView$1);const HeatmapView$1=HeatmapView;var HeatmapSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var n=CoordinateSystem.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(SeriesModel$1);const HeatmapSeriesModel$1=HeatmapSeriesModel;function install$v(r){r.registerChartView(HeatmapView$1),r.registerSeriesModel(HeatmapSeriesModel$1)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle$1,PictorialBarView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=this.group,d=n.getData(),g=this._data,y=n.coordinateSystem,S=y.getBaseAxis(),x=S.isHorizontal(),w=y.master.getRect(),c={ecSize:{width:a.getWidth(),height:a.getHeight()},seriesModel:n,coordSys:y,coordSysExtent:[[w.x,w.x+w.width],[w.y,w.y+w.height]],isHorizontal:x,valueDim:LAYOUT_ATTRS[+x],categoryDim:LAYOUT_ATTRS[1-+x]};return d.diff(g).add(function(A){if(d.hasValue(A)){var R=getItemModel(d,A),L=getSymbolMeta(d,A,R,c),$=createBar(d,c,L);d.setItemGraphicEl(A,$),l.add($),updateCommon($,c,L)}}).update(function(A,R){var L=g.getItemGraphicEl(R);if(!d.hasValue(A)){l.remove(L);return}var $=getItemModel(d,A),O=getSymbolMeta(d,A,$,c),z=getShapeStr(d,O);L&&z!==L.__pictorialShapeStr&&(l.remove(L),d.setItemGraphicEl(A,null),L=null),L?updateBar(L,c,O):L=createBar(d,c,O,!0),d.setItemGraphicEl(A,L),L.__pictorialSymbolMeta=O,l.add(L),updateCommon(L,c,O)}).remove(function(A){var R=g.getItemGraphicEl(A);R&&removeBar(g,A,R.__pictorialSymbolMeta.animationModel,R)}).execute(),this._data=d,this.group},t.prototype.remove=function(n,o){var a=this.group,l=this._data;n.get("animation")?l&&l.eachItemGraphicEl(function(d){removeBar(l,getECData(d).dataIndex,n,d)}):a.removeAll()},t.type="pictorialBar",t}(ChartView$1);function getSymbolMeta(r,t,n,o){var a=r.getItemLayout(t),l=n.get("symbolRepeat"),d=n.get("symbolClip"),g=n.get("symbolPosition")||"start",y=n.get("symbolRotate"),S=(y||0)*Math.PI/180||0,x=n.get("symbolPatternSize")||2,w=n.isAnimationEnabled(),c={dataIndex:t,layout:a,itemModel:n,symbolType:r.getItemVisual(t,"symbol")||"circle",style:r.getItemVisual(t,"style"),symbolClip:d,symbolRepeat:l,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:x,rotation:S,animationModel:w?n:null,hoverScale:w&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};prepareBarLength(n,l,a,o,c),prepareSymbolSize(r,t,a,l,d,c.boundingLength,c.pxSign,x,o,c),prepareLineWidth(n,c.symbolScale,S,o,c);var A=c.symbolSize,R=normalizeSymbolOffset(n.get("symbolOffset"),A);return prepareLayoutInfo(n,A,a,l,d,R,g,c.valueLineWidth,c.boundingLength,c.repeatCutLength,o,c),c}function prepareBarLength(r,t,n,o,a){var l=o.valueDim,d=r.get("symbolBoundingData"),g=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),y=g.toGlobalCoord(g.dataToCoord(0)),S=1-+(n[l.wh]<=0),x;if(isArray$1(d)){var w=[convertToCoordOnAxis(g,d[0])-y,convertToCoordOnAxis(g,d[1])-y];w[1]<w[0]&&w.reverse(),x=w[S]}else d!=null?x=convertToCoordOnAxis(g,d)-y:t?x=o.coordSysExtent[l.index][S]-y:x=n[l.wh];a.boundingLength=x,t&&(a.repeatCutLength=n[l.wh]),a.pxSign=x>0?1:-1}function convertToCoordOnAxis(r,t){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(t)))}function prepareSymbolSize(r,t,n,o,a,l,d,g,y,S){var x=y.valueDim,w=y.categoryDim,c=Math.abs(n[w.wh]),A=r.getItemVisual(t,"symbolSize"),R;isArray$1(A)?R=A.slice():A==null?R=["100%","100%"]:R=[A,A],R[w.index]=parsePercent(R[w.index],c),R[x.index]=parsePercent(R[x.index],o?c:Math.abs(l)),S.symbolSize=R;var L=S.symbolScale=[R[0]/g,R[1]/g];L[x.index]*=(y.isHorizontal?-1:1)*d}function prepareLineWidth(r,t,n,o,a){var l=r.get(BAR_BORDER_WIDTH_QUERY)||0;l&&(pathForLineWidth.attr({scaleX:t[0],scaleY:t[1],rotation:n}),pathForLineWidth.updateTransform(),l/=pathForLineWidth.getLineScale(),l*=t[o.valueDim.index]),a.valueLineWidth=l||0}function prepareLayoutInfo(r,t,n,o,a,l,d,g,y,S,x,w){var c=x.categoryDim,A=x.valueDim,R=w.pxSign,L=Math.max(t[A.index]+g,0),$=L;if(o){var O=Math.abs(y),z=retrieve(r.get("symbolMargin"),"15%")+"",V=!1;z.lastIndexOf("!")===z.length-1&&(V=!0,z=z.slice(0,z.length-1));var j=parsePercent(z,t[A.index]),K=Math.max(L+j*2,0),Z=V?0:j*2,q=isNumeric(o),ie=q?o:toIntTimes((O+Z)/K),te=O-ie*L;j=te/2/(V?ie:Math.max(ie-1,1)),K=L+j*2,Z=V?0:j*2,!q&&o!=="fixed"&&(ie=S?toIntTimes((Math.abs(S)+Z)/K):0),$=ie*K-Z,w.repeatTimes=ie,w.symbolMargin=j}var oe=R*($/2),re=w.pathPosition=[];re[c.index]=n[c.wh]/2,re[A.index]=d==="start"?oe:d==="end"?y-oe:y/2,l&&(re[0]+=l[0],re[1]+=l[1]);var he=w.bundlePosition=[];he[c.index]=n[c.xy],he[A.index]=n[A.xy];var _e=w.barRectShape=extend({},n);_e[A.wh]=R*Math.max(Math.abs(n[A.wh]),Math.abs(re[A.index]+oe)),_e[c.wh]=n[c.wh];var me=w.clipShape={};me[c.xy]=-n[c.xy],me[c.wh]=x.ecSize[c.wh],me[A.xy]=0,me[A.wh]=n[A.wh]}function createPath(r){var t=r.symbolPatternSize,n=createSymbol$1(r.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function createOrUpdateRepeatSymbols(r,t,n,o){var a=r.__pictorialBundle,l=n.symbolSize,d=n.valueLineWidth,g=n.pathPosition,y=t.valueDim,S=n.repeatTimes||0,x=0,w=l[t.valueDim.index]+d+n.symbolMargin*2;for(eachPath(r,function(L){L.__pictorialAnimationIndex=x,L.__pictorialRepeatTimes=S,x<S?updateAttr(L,null,R(x),n,o):updateAttr(L,null,{scaleX:0,scaleY:0},n,o,function(){a.remove(L)}),x++});x<S;x++){var c=createPath(n);c.__pictorialAnimationIndex=x,c.__pictorialRepeatTimes=S,a.add(c);var A=R(x);updateAttr(c,{x:A.x,y:A.y,scaleX:0,scaleY:0},{scaleX:A.scaleX,scaleY:A.scaleY,rotation:A.rotation},n,o)}function R(L){var $=g.slice(),O=n.pxSign,z=L;return(n.symbolRepeatDirection==="start"?O>0:O<0)&&(z=S-1-L),$[y.index]=w*(z-S/2+.5)+g[y.index],{x:$[0],y:$[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function createOrUpdateSingleSymbol(r,t,n,o){var a=r.__pictorialBundle,l=r.__pictorialMainPath;l?updateAttr(l,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,o):(l=r.__pictorialMainPath=createPath(n),a.add(l),updateAttr(l,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,o))}function createOrUpdateBarRect(r,t,n){var o=extend({},t.barRectShape),a=r.__pictorialBarRect;a?updateAttr(a,null,{shape:o},t,n):(a=r.__pictorialBarRect=new Rect$3({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),a.disableMorphing=!0,r.add(a))}function createOrUpdateClip(r,t,n,o){if(n.symbolClip){var a=r.__pictorialClipPath,l=extend({},n.clipShape),d=t.valueDim,g=n.animationModel,y=n.dataIndex;if(a)updateProps$1(a,{shape:l},g,y);else{l[d.wh]=0,a=new Rect$3({shape:l}),r.__pictorialBundle.setClipPath(a),r.__pictorialClipPath=a;var S={};S[d.wh]=n.clipShape[d.wh],graphic$1[o?"updateProps":"initProps"](a,{shape:S},g,y)}}}function getItemModel(r,t){var n=r.getItemModel(t);return n.getAnimationDelayParams=getAnimationDelayParams,n.isAnimationEnabled=isAnimationEnabled,n}function getAnimationDelayParams(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(r,t,n,o){var a=new Group$4,l=new Group$4;return a.add(l),a.__pictorialBundle=l,l.x=n.bundlePosition[0],l.y=n.bundlePosition[1],n.symbolRepeat?createOrUpdateRepeatSymbols(a,t,n):createOrUpdateSingleSymbol(a,t,n),createOrUpdateBarRect(a,n,o),createOrUpdateClip(a,t,n,o),a.__pictorialShapeStr=getShapeStr(r,n),a.__pictorialSymbolMeta=n,a}function updateBar(r,t,n){var o=n.animationModel,a=n.dataIndex,l=r.__pictorialBundle;updateProps$1(l,{x:n.bundlePosition[0],y:n.bundlePosition[1]},o,a),n.symbolRepeat?createOrUpdateRepeatSymbols(r,t,n,!0):createOrUpdateSingleSymbol(r,t,n,!0),createOrUpdateBarRect(r,n,!0),createOrUpdateClip(r,t,n,!0)}function removeBar(r,t,n,o){var a=o.__pictorialBarRect;a&&a.removeTextContent();var l=[];eachPath(o,function(d){l.push(d)}),o.__pictorialMainPath&&l.push(o.__pictorialMainPath),o.__pictorialClipPath&&(n=null),each$f(l,function(d){removeElement(d,{scaleX:0,scaleY:0},n,t,function(){o.parent&&o.parent.remove(o)})}),r.setItemGraphicEl(t,null)}function getShapeStr(r,t){return[r.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function eachPath(r,t,n){each$f(r.__pictorialBundle.children(),function(o){o!==r.__pictorialBarRect&&t.call(n,o)})}function updateAttr(r,t,n,o,a,l){t&&r.attr(t),o.symbolClip&&!a?n&&r.attr(n):n&&graphic$1[a?"updateProps":"initProps"](r,n,o.animationModel,o.dataIndex,l)}function updateCommon(r,t,n){var o=n.dataIndex,a=n.itemModel,l=a.getModel("emphasis"),d=l.getModel("itemStyle").getItemStyle(),g=a.getModel(["blur","itemStyle"]).getItemStyle(),y=a.getModel(["select","itemStyle"]).getItemStyle(),S=a.getShallow("cursor"),x=l.get("focus"),w=l.get("blurScope"),c=l.get("scale");eachPath(r,function(L){if(L instanceof ZRImage$1){var $=L.style;L.useStyle(extend({image:$.image,x:$.x,y:$.y,width:$.width,height:$.height},n.style))}else L.useStyle(n.style);var O=L.ensureState("emphasis");O.style=d,c&&(O.scaleX=L.scaleX*1.1,O.scaleY=L.scaleY*1.1),L.ensureState("blur").style=g,L.ensureState("select").style=y,S&&(L.cursor=S),L.z2=n.z2});var A=t.valueDim.posDesc[+(n.boundingLength>0)],R=r.__pictorialBarRect;setLabelStyle(R,getLabelStatesModels(a),{labelFetcher:t.seriesModel,labelDataIndex:o,defaultText:getDefaultLabel(t.seriesModel.getData(),o),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:A}),toggleHoverEmphasis(r,x,w,l.get("disabled"))}function toIntTimes(r){var t=Math.round(r);return Math.abs(r-t)<1e-4?t:Math.ceil(r)}const PictorialBarView$1=PictorialBarView;var PictorialBarSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return t.prototype.getInitialData=function(n){return n.stack=null,r.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(BaseBarSeriesModel$1);const PictorialBarSeriesModel$1=PictorialBarSeriesModel;function install$u(r){r.registerChartView(PictorialBarView$1),r.registerSeriesModel(PictorialBarSeriesModel$1),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}return t.prototype.render=function(n,o,a){var l=n.getData(),d=this,g=this.group,y=n.getLayerSeries(),S=l.getLayout("layoutInfo"),x=S.rect,w=S.boundaryGap;g.x=0,g.y=x.y+w[0];function c($){return $.name}var A=new DataDiffer$1(this._layersSeries||[],y,c,c),R=[];A.add(bind$1(L,this,"add")).update(bind$1(L,this,"update")).remove(bind$1(L,this,"remove")).execute();function L($,O,z){var V=d._layers;if($==="remove"){g.remove(V[O]);return}for(var j=[],K=[],Z,q=y[O].indices,ie=0;ie<q.length;ie++){var te=l.getItemLayout(q[ie]),oe=te.x,re=te.y0,he=te.y;j.push(oe,re),K.push(oe,re+he),Z=l.getItemVisual(q[ie],"style")}var _e,me=l.getItemLayout(q[0]),be=n.getModel("label"),Q=be.get("margin"),Ne=n.getModel("emphasis");if($==="add"){var Ee=R[O]=new Group$4;_e=new ECPolygon({shape:{points:j,stackedOnPoints:K,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Ee.add(_e),g.add(Ee),n.isAnimationEnabled()&&_e.setClipPath(createGridClipShape(_e.getBoundingRect(),n,function(){_e.removeClipPath()}))}else{var Ee=V[z];_e=Ee.childAt(0),g.add(Ee),R[O]=Ee,updateProps$1(_e,{shape:{points:j,stackedOnPoints:K}},n),saveOldStyle(_e)}setLabelStyle(_e,getLabelStatesModels(n),{labelDataIndex:q[ie-1],defaultText:l.getName(q[ie-1]),inheritColor:Z.fill},{normal:{verticalAlign:"middle"}}),_e.setTextConfig({position:null,local:!0});var Ge=_e.getTextContent();Ge&&(Ge.x=me.x-Q,Ge.y=me.y0+me.y/2),_e.useStyle(Z),l.setItemGraphicEl(O,_e),setStatesStylesFromModel(_e,n),toggleHoverEmphasis(_e,Ne.get("focus"),Ne.get("blurScope"),Ne.get("disabled"))}this._layersSeries=y,this._layers=R},t.type="themeRiver",t}(ChartView$1);function createGridClipShape(r,t,n){var o=new Rect$3({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return initProps(o,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},t,n),o}const ThemeRiverView$1=ThemeRiverView;var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.fixData=function(n){var o=n.length,a={},l=groupData(n,function(c){return a.hasOwnProperty(c[0]+"")||(a[c[0]+""]=-1),c[2]}),d=[];l.buckets.each(function(c,A){d.push({name:A,dataList:c})});for(var g=d.length,y=0;y<g;++y){for(var S=d[y].name,x=0;x<d[y].dataList.length;++x){var w=d[y].dataList[x][0]+"";a[w]=y}for(var w in a)a.hasOwnProperty(w)&&a[w]!==y&&(a[w]=y,n[o]=[w,0,S],o++)}return n},t.prototype.getInitialData=function(n,o){for(var a=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],l=a.get("type"),d=filter(n.data,function(R){return R[2]!==void 0}),g=this.fixData(d||[]),y=[],S=this.nameMap=createHashMap(),x=0,w=0;w<g.length;++w)y.push(g[w][DATA_NAME_INDEX]),S.get(g[w][DATA_NAME_INDEX])||(S.set(g[w][DATA_NAME_INDEX],x),x++);var c=prepareSeriesDataSchema(g,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(l)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,A=new SeriesData$1(c,this);return A.initData(g),A},t.prototype.getLayerSeries=function(){for(var n=this.getData(),o=n.count(),a=[],l=0;l<o;++l)a[l]=l;var d=n.mapDimension("single"),g=groupData(a,function(S){return n.get("name",S)}),y=[];return g.buckets.each(function(S,x){S.sort(function(w,c){return n.get(d,w)-n.get(d,c)}),y.push({name:x,indices:S})}),y},t.prototype.getAxisTooltipData=function(n,o,a){isArray$1(n)||(n=n?[n]:[]);for(var l=this.getData(),d=this.getLayerSeries(),g=[],y=d.length,S,x=0;x<y;++x){for(var w=Number.MAX_VALUE,c=-1,A=d[x].indices.length,R=0;R<A;++R){var L=l.get(n[0],d[x].indices[R]),$=Math.abs(L-o);$<=w&&(S=L,w=$,c=d[x].indices[R])}g.push(c)}return{dataIndices:g,nestestValue:S}},t.prototype.formatTooltip=function(n,o,a){var l=this.getData(),d=l.getName(n),g=l.get(l.mapDimension("value"),n);return createTooltipMarkup("nameValue",{name:d,value:g})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(SeriesModel$1);const ThemeRiverSeriesModel$1=ThemeRiverSeriesModel;function themeRiverLayout(r,t){r.eachSeriesByType("themeRiver",function(n){var o=n.getData(),a=n.coordinateSystem,l={},d=a.getRect();l.rect=d;var g=n.get("boundaryGap"),y=a.getAxis();if(l.boundaryGap=g,y.orient==="horizontal"){g[0]=parsePercent(g[0],d.height),g[1]=parsePercent(g[1],d.height);var S=d.height-g[0]-g[1];doThemeRiverLayout(o,n,S)}else{g[0]=parsePercent(g[0],d.width),g[1]=parsePercent(g[1],d.width);var x=d.width-g[0]-g[1];doThemeRiverLayout(o,n,x)}o.setLayout("layoutInfo",l)})}function doThemeRiverLayout(r,t,n){if(r.count())for(var o=t.coordinateSystem,a=t.getLayerSeries(),l=r.mapDimension("single"),d=r.mapDimension("value"),g=map$1(a,function($){return map$1($.indices,function(O){var z=o.dataToPoint(r.get(l,O));return z[1]=r.get(d,O),z})}),y=computeBaseline(g),S=y.y0,x=n/y.max,w=a.length,c=a[0].indices.length,A,R=0;R<c;++R){A=S[R]*x,r.setItemLayout(a[0].indices[R],{layerIndex:0,x:g[0][R][0],y0:A,y:g[0][R][1]*x});for(var L=1;L<w;++L)A+=g[L-1][R][1]*x,r.setItemLayout(a[L].indices[R],{layerIndex:L,x:g[L][R][0],y0:A,y:g[L][R][1]*x})}}function computeBaseline(r){for(var t=r.length,n=r[0].length,o=[],a=[],l=0,d=0;d<n;++d){for(var g=0,y=0;y<t;++y)g+=r[y][d][1];g>l&&(l=g),o.push(g)}for(var S=0;S<n;++S)a[S]=(l-o[S])/2;l=0;for(var x=0;x<n;++x){var w=o[x]+a[x];w>l&&(l=w)}return{y0:a,max:l}}function install$t(r){r.registerChartView(ThemeRiverView$1),r.registerSeriesModel(ThemeRiverSeriesModel$1),r.registerLayout(themeRiverLayout),r.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(r){__extends(t,r);function t(n,o,a,l){var d=r.call(this)||this;d.z2=DEFAULT_SECTOR_Z,d.textConfig={inside:!0},getECData(d).seriesIndex=o.seriesIndex;var g=new ZRText$1({z2:DEFAULT_TEXT_Z,silent:n.getModel().get(["label","silent"])});return d.setTextContent(g),d.updateData(!0,n,o,a,l),d}return t.prototype.updateData=function(n,o,a,l,d){this.node=o,o.piece=this,a=a||this._seriesModel,l=l||this._ecModel;var g=this;getECData(g).dataIndex=o.dataIndex;var y=o.getModel(),S=y.getModel("emphasis"),x=o.getLayout(),w=extend({},x);w.label=null;var c=o.getVisual("style");c.lineJoin="bevel";var A=o.getVisual("decal");A&&(c.decal=createOrUpdatePatternFromDecal(A,d));var R=getSectorCornerRadius(y.getModel("itemStyle"),w,!0);extend(w,R),each$f(SPECIAL_STATES,function(z){var V=g.ensureState(z),j=y.getModel([z,"itemStyle"]);V.style=j.getItemStyle();var K=getSectorCornerRadius(j,w);K&&(V.shape=K)}),n?(g.setShape(w),g.shape.r=x.r0,initProps(g,{shape:{r:x.r}},a,o.dataIndex)):(updateProps$1(g,{shape:w},a),saveOldStyle(g)),g.useStyle(c),this._updateLabel(a);var L=y.getShallow("cursor");L&&g.attr("cursor",L),this._seriesModel=a||this._seriesModel,this._ecModel=l||this._ecModel;var $=S.get("focus"),O=$==="ancestor"?o.getAncestorsIndices():$==="descendant"?o.getDescendantIndices():$;toggleHoverEmphasis(this,O,S.get("blurScope"),S.get("disabled"))},t.prototype._updateLabel=function(n){var o=this,a=this.node.getModel(),l=a.getModel("label"),d=this.node.getLayout(),g=d.endAngle-d.startAngle,y=(d.startAngle+d.endAngle)/2,S=Math.cos(y),x=Math.sin(y),w=this,c=w.getTextContent(),A=this.node.dataIndex,R=l.get("minAngle")/180*Math.PI,L=l.get("show")&&!(R!=null&&Math.abs(g)<R);c.ignore=!L,each$f(DISPLAY_STATES,function(O){var z=O==="normal"?a.getModel("label"):a.getModel([O,"label"]),V=O==="normal",j=V?c:c.ensureState(O),K=n.getFormattedLabel(A,O);V&&(K=K||o.node.name),j.style=createTextStyle$1(z,{},null,O!=="normal",!0),K&&(j.style.text=K);var Z=z.get("show");Z!=null&&!V&&(j.ignore=!Z);var q=$(z,"position"),ie=V?w:w.states[O],te=ie.style.fill;ie.textConfig={outsideFill:z.get("color")==="inherit"?te:null,inside:q!=="outside"};var oe,re=$(z,"distance")||0,he=$(z,"align");q==="outside"?(oe=d.r+re,he=y>Math.PI/2?"right":"left"):!he||he==="center"?(g===2*Math.PI&&d.r0===0?oe=0:oe=(d.r+d.r0)/2,he="center"):he==="left"?(oe=d.r0+re,y>Math.PI/2&&(he="right")):he==="right"&&(oe=d.r-re,y>Math.PI/2&&(he="left")),j.style.align=he,j.style.verticalAlign=$(z,"verticalAlign")||"middle",j.x=oe*S+d.cx,j.y=oe*x+d.cy;var _e=$(z,"rotate"),me=0;_e==="radial"?(me=normalizeRadian(-y),me>Math.PI/2&&me<Math.PI*1.5&&(me+=Math.PI)):_e==="tangential"?(me=Math.PI/2-y,me>Math.PI/2?me-=Math.PI:me<-Math.PI/2&&(me+=Math.PI)):isNumber(_e)&&(me=_e*Math.PI/180),j.rotation=normalizeRadian(me)});function $(O,z){var V=O.get(z);return V??l.get(z)}c.dirtyStyle()},t}(Sector$1);const SunburstPiece$1=SunburstPiece;var ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(r){r.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(t,n){n.eachComponent({mainType:"series",subType:"sunburst",query:t},o);function o(a,l){var d=retrieveTargetInfo(t,[ROOT_TO_NODE_ACTION],a);if(d){var g=a.getViewRoot();g&&(t.direction=aboveViewRoot(g,d.node)?"rollUp":"drillDown"),a.resetViewRoot(d.node)}}}),r.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(t,n,o){t=extend({},t),n.eachComponent({mainType:"series",subType:"sunburst",query:t},a);function a(l){var d=retrieveTargetInfo(t,[HIGHLIGHT_ACTION],l);d&&(t.dataIndex=d.node.dataIndex)}o.dispatchAction(extend(t,{type:"highlight"}))}),r.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(t,n,o){t=extend({},t),o.dispatchAction(extend(t,{type:"downplay"}))})}var SunburstView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a,l){var d=this;this.seriesModel=n,this.api=a,this.ecModel=o;var g=n.getData(),y=g.tree.root,S=n.getViewRoot(),x=this.group,w=n.get("renderLabelForZeroData"),c=[];S.eachNode(function(z){c.push(z)});var A=this._oldChildren||[];R(c,A),O(y,S),this._initEvents(),this._oldChildren=c;function R(z,V){if(z.length===0&&V.length===0)return;new DataDiffer$1(V,z,j,j).add(K).update(K).remove(curry$1(K,null)).execute();function j(Z){return Z.getId()}function K(Z,q){var ie=Z==null?null:z[Z],te=q==null?null:V[q];L(ie,te)}}function L(z,V){if(!w&&z&&!z.getValue()&&(z=null),z!==y&&V!==y){if(V&&V.piece)z?(V.piece.updateData(!1,z,n,o,a),g.setItemGraphicEl(z.dataIndex,V.piece)):$(V);else if(z){var j=new SunburstPiece$1(z,n,o,a);x.add(j),g.setItemGraphicEl(z.dataIndex,j)}}}function $(z){z&&z.piece&&(x.remove(z.piece),z.piece=null)}function O(z,V){V.depth>0?(d.virtualPiece?d.virtualPiece.updateData(!1,z,n,o,a):(d.virtualPiece=new SunburstPiece$1(z,n,o,a),x.add(d.virtualPiece)),V.piece.off("click"),d.virtualPiece.on("click",function(j){d._rootToNode(V.parentNode)})):d.virtualPiece&&(x.remove(d.virtualPiece),d.virtualPiece=null)}},t.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(o){var a=!1,l=n.seriesModel.getViewRoot();l.eachNode(function(d){if(!a&&d.piece&&d.piece===o.target){var g=d.getModel().get("nodeClick");if(g==="rootToNode")n._rootToNode(d);else if(g==="link"){var y=d.getModel(),S=y.get("link");if(S){var x=y.get("target",!0)||"_blank";windowOpen(S,x)}}a=!0}})})},t.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},t.prototype.containPoint=function(n,o){var a=o.getData(),l=a.getItemLayout(0);if(l){var d=n[0]-l.cx,g=n[1]-l.cy,y=Math.sqrt(d*d+g*g);return y<=l.r&&y>=l.r0}},t.type="sunburst",t}(ChartView$1);const SunburstView$1=SunburstView;var SunburstSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.ignoreStyleOnData=!0,n}return t.prototype.getInitialData=function(n,o){var a={name:n.name,children:n.data};completeTreeValue(a);var l=this._levelModels=map$1(n.levels||[],function(y){return new Model$1(y,this,o)},this),d=Tree$1.createTree(a,this,g);function g(y){y.wrapMethod("getItemModel",function(S,x){var w=d.getNodeByDataIndex(x),c=l[w.depth];return c&&(S.parentModel=c),S})}return d.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(n){var o=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(n);return o.treePathInfo=wrapTreePathInfo(a,this),o},t.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var o=this.getRawData().tree.root;(!n||n!==o&&!o.contains(n))&&(this._viewRoot=o)},t.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(SeriesModel$1);function completeTreeValue(r){var t=0;each$f(r.children,function(o){completeTreeValue(o);var a=o.value;isArray$1(a)&&(a=a[0]),t+=a});var n=r.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=t),n<0&&(n=0),isArray$1(r.value)?r.value[0]=n:r.value=n}const SunburstSeriesModel$1=SunburstSeriesModel;var RADIAN=Math.PI/180;function sunburstLayout(r,t,n){t.eachSeriesByType(r,function(o){var a=o.get("center"),l=o.get("radius");isArray$1(l)||(l=[0,l]),isArray$1(a)||(a=[a,a]);var d=n.getWidth(),g=n.getHeight(),y=Math.min(d,g),S=parsePercent(a[0],d),x=parsePercent(a[1],g),w=parsePercent(l[0],y/2),c=parsePercent(l[1],y/2),A=-o.get("startAngle")*RADIAN,R=o.get("minAngle")*RADIAN,L=o.getData().tree.root,$=o.getViewRoot(),O=$.depth,z=o.get("sort");z!=null&&initChildren($,z);var V=0;each$f($.children,function(Q){!isNaN(Q.getValue())&&V++});var j=$.getValue(),K=Math.PI/(j||V)*2,Z=$.depth>0,q=$.height-(Z?-1:1),ie=(c-w)/(q||1),te=o.get("clockwise"),oe=o.get("stillShowZeroSum"),re=te?1:-1,he=function(Q,Ne){if(Q){var Ee=Ne;if(Q!==L){var Ge=Q.getValue(),it=j===0&&oe?K:Ge*K;it<R&&(it=R),Ee=Ne+re*it;var Te=Q.depth-O-(Z?-1:1),Ke=w+ie*Te,Tt=w+ie*(Te+1),Lt=o.getLevelModel(Q);if(Lt){var Qt=Lt.get("r0",!0),Xe=Lt.get("r",!0),Be=Lt.get("radius",!0);Be!=null&&(Qt=Be[0],Xe=Be[1]),Qt!=null&&(Ke=parsePercent(Qt,y/2)),Xe!=null&&(Tt=parsePercent(Xe,y/2))}Q.setLayout({angle:it,startAngle:Ne,endAngle:Ee,clockwise:te,cx:S,cy:x,r0:Ke,r:Tt})}if(Q.children&&Q.children.length){var ue=0;each$f(Q.children,function(Dt){ue+=he(Dt,Ne+ue)})}return Ee-Ne}};if(Z){var _e=w,me=w+ie,be=Math.PI*2;L.setLayout({angle:be,startAngle:A,endAngle:A+be,clockwise:te,cx:S,cy:x,r0:_e,r:me})}he($,A)})}function initChildren(r,t){var n=r.children||[];r.children=sort(n,t),n.length&&each$f(r.children,function(o){initChildren(o,t)})}function sort(r,t){if(isFunction(t)){var n=map$1(r,function(a,l){var d=a.getValue();return{params:{depth:a.depth,height:a.height,dataIndex:a.dataIndex,getValue:function(){return d}},index:l}});return n.sort(function(a,l){return t(a.params,l.params)}),map$1(n,function(a){return r[a.index]})}else{var o=t==="asc";return r.sort(function(a,l){var d=(a.getValue()-l.getValue())*(o?1:-1);return d===0?(a.dataIndex-l.dataIndex)*(o?-1:1):d})}}function sunburstVisual(r){var t={};function n(o,a,l){for(var d=o;d&&d.depth>1;)d=d.parentNode;var g=a.getColorFromPalette(d.name||d.dataIndex+"",t);return o.depth>1&&isString(g)&&(g=lift(g,(o.depth-1)/(l-1)*.5)),g}r.eachSeriesByType("sunburst",function(o){var a=o.getData(),l=a.tree;l.eachNode(function(d){var g=d.getModel(),y=g.getModel("itemStyle").getItemStyle();y.fill||(y.fill=n(d,o,l.root.height));var S=a.ensureUniqueItemVisual(d.dataIndex,"style");extend(S,y)})})}function install$s(r){r.registerChartView(SunburstView$1),r.registerSeriesModel(SunburstSeriesModel$1),r.registerLayout(curry$1(sunburstLayout,"sunburst")),r.registerProcessor(curry$1(dataFilter$1,"sunburst")),r.registerVisual(sunburstVisual),installSunburstAction(r)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(n,o){return createSeriesData(null,this)},t.prototype.getDataParams=function(n,o,a){var l=r.prototype.getDataParams.call(this,n,o);return a&&(l.info=customInnerStore(a).info),l},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(SeriesModel$1);const CustomSeriesModel$1=CustomSeriesModel;function dataToCoordSize$3(r,t){return t=t||[0,0],map$1(["x","y"],function(n,o){var a=this.getAxis(n),l=t[o],d=r[o]/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(l-d)-a.dataToCoord(l+d))},this)}function cartesianPrepareCustom(r){var t=r.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return r.dataToPoint(n)},size:bind$1(dataToCoordSize$3,r)}}}function dataToCoordSize$2(r,t){return t=t||[0,0],map$1([0,1],function(n){var o=t[n],a=r[n]/2,l=[],d=[];return l[n]=o-a,d[n]=o+a,l[1-n]=d[1-n]=t[1-n],Math.abs(this.dataToPoint(l)[n]-this.dataToPoint(d)[n])},this)}function geoPrepareCustom(r){var t=r.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:r.getZoom()},api:{coord:function(n){return r.dataToPoint(n)},size:bind$1(dataToCoordSize$2,r)}}}function dataToCoordSize$1(r,t){var n=this.getAxis(),o=t instanceof Array?t[0]:t,a=(r instanceof Array?r[0]:r)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(o-a)-n.dataToCoord(o+a))}function singlePrepareCustom(r){var t=r.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return r.dataToPoint(n)},size:bind$1(dataToCoordSize$1,r)}}}function dataToCoordSize(r,t){return t=t||[0,0],map$1(["Radius","Angle"],function(n,o){var a="get"+n+"Axis",l=this[a](),d=t[o],g=r[o]/2,y=l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(d-g)-l.dataToCoord(d+g));return n==="Angle"&&(y=y*Math.PI/180),y},this)}function polarPrepareCustom(r){var t=r.getRadiusAxis(),n=r.getAngleAxis(),o=t.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:o[1],r0:o[0]},api:{coord:function(a){var l=t.dataToRadius(a[0]),d=n.dataToAngle(a[1]),g=r.coordToPoint([l,d]);return g.push(l,d*Math.PI/180),g},size:bind$1(dataToCoordSize,r)}}}function calendarPrepareCustom(r){var t=r.getRect(),n=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(o,a){return r.dataToPoint(o,a)}}}}function isEC4CompatibleStyle(r,t,n,o){return r&&(r.legacy||r.legacy!==!1&&!n&&!o&&t!=="tspan"&&(t==="text"||hasOwn(r,"text")))}function convertFromEC4CompatibleStyle(r,t,n){var o=r,a,l,d;if(t==="text")d=o;else{d={},hasOwn(o,"text")&&(d.text=o.text),hasOwn(o,"rich")&&(d.rich=o.rich),hasOwn(o,"textFill")&&(d.fill=o.textFill),hasOwn(o,"textStroke")&&(d.stroke=o.textStroke),hasOwn(o,"fontFamily")&&(d.fontFamily=o.fontFamily),hasOwn(o,"fontSize")&&(d.fontSize=o.fontSize),hasOwn(o,"fontStyle")&&(d.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(d.fontWeight=o.fontWeight),l={type:"text",style:d,silent:!0},a={};var g=hasOwn(o,"textPosition");n?a.position=g?o.textPosition:"inside":g&&(a.position=o.textPosition),hasOwn(o,"textPosition")&&(a.position=o.textPosition),hasOwn(o,"textOffset")&&(a.offset=o.textOffset),hasOwn(o,"textRotation")&&(a.rotation=o.textRotation),hasOwn(o,"textDistance")&&(a.distance=o.textDistance)}return convertEC4CompatibleRichItem(d,r),each$f(d.rich,function(y){convertEC4CompatibleRichItem(y,y)}),{textConfig:a,textContent:l}}function convertEC4CompatibleRichItem(r,t){t&&(t.font=t.textFont||t.font,hasOwn(t,"textStrokeWidth")&&(r.lineWidth=t.textStrokeWidth),hasOwn(t,"textAlign")&&(r.align=t.textAlign),hasOwn(t,"textVerticalAlign")&&(r.verticalAlign=t.textVerticalAlign),hasOwn(t,"textLineHeight")&&(r.lineHeight=t.textLineHeight),hasOwn(t,"textWidth")&&(r.width=t.textWidth),hasOwn(t,"textHeight")&&(r.height=t.textHeight),hasOwn(t,"textBackgroundColor")&&(r.backgroundColor=t.textBackgroundColor),hasOwn(t,"textPadding")&&(r.padding=t.textPadding),hasOwn(t,"textBorderColor")&&(r.borderColor=t.textBorderColor),hasOwn(t,"textBorderWidth")&&(r.borderWidth=t.textBorderWidth),hasOwn(t,"textBorderRadius")&&(r.borderRadius=t.textBorderRadius),hasOwn(t,"textBoxShadowColor")&&(r.shadowColor=t.textBoxShadowColor),hasOwn(t,"textBoxShadowBlur")&&(r.shadowBlur=t.textBoxShadowBlur),hasOwn(t,"textBoxShadowOffsetX")&&(r.shadowOffsetX=t.textBoxShadowOffsetX),hasOwn(t,"textBoxShadowOffsetY")&&(r.shadowOffsetY=t.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(r,t,n){var o=r;o.textPosition=o.textPosition||n.position||"inside",n.offset!=null&&(o.textOffset=n.offset),n.rotation!=null&&(o.textRotation=n.rotation),n.distance!=null&&(o.textDistance=n.distance);var a=o.textPosition.indexOf("inside")>=0,l=r.fill||"#000";convertToEC4RichItem(o,t);var d=o.textFill==null;return a?d&&(o.textFill=n.insideFill||"#fff",!o.textStroke&&n.insideStroke&&(o.textStroke=n.insideStroke),!o.textStroke&&(o.textStroke=l),o.textStrokeWidth==null&&(o.textStrokeWidth=2)):(d&&(o.textFill=r.fill||n.outsideFill||"#000"),!o.textStroke&&n.outsideStroke&&(o.textStroke=n.outsideStroke)),o.text=t.text,o.rich=t.rich,each$f(t.rich,function(g){convertToEC4RichItem(g,g)}),o}function convertToEC4RichItem(r,t){t&&(hasOwn(t,"fill")&&(r.textFill=t.fill),hasOwn(t,"stroke")&&(r.textStroke=t.fill),hasOwn(t,"lineWidth")&&(r.textStrokeWidth=t.lineWidth),hasOwn(t,"font")&&(r.font=t.font),hasOwn(t,"fontStyle")&&(r.fontStyle=t.fontStyle),hasOwn(t,"fontWeight")&&(r.fontWeight=t.fontWeight),hasOwn(t,"fontSize")&&(r.fontSize=t.fontSize),hasOwn(t,"fontFamily")&&(r.fontFamily=t.fontFamily),hasOwn(t,"align")&&(r.textAlign=t.align),hasOwn(t,"verticalAlign")&&(r.textVerticalAlign=t.verticalAlign),hasOwn(t,"lineHeight")&&(r.textLineHeight=t.lineHeight),hasOwn(t,"width")&&(r.textWidth=t.width),hasOwn(t,"height")&&(r.textHeight=t.height),hasOwn(t,"backgroundColor")&&(r.textBackgroundColor=t.backgroundColor),hasOwn(t,"padding")&&(r.textPadding=t.padding),hasOwn(t,"borderColor")&&(r.textBorderColor=t.borderColor),hasOwn(t,"borderWidth")&&(r.textBorderWidth=t.borderWidth),hasOwn(t,"borderRadius")&&(r.textBorderRadius=t.borderRadius),hasOwn(t,"shadowColor")&&(r.textBoxShadowColor=t.shadowColor),hasOwn(t,"shadowBlur")&&(r.textBoxShadowBlur=t.shadowBlur),hasOwn(t,"shadowOffsetX")&&(r.textBoxShadowOffsetX=t.shadowOffsetX),hasOwn(t,"shadowOffsetY")&&(r.textBoxShadowOffsetY=t.shadowOffsetY),hasOwn(t,"textShadowColor")&&(r.textShadowColor=t.textShadowColor),hasOwn(t,"textShadowBlur")&&(r.textShadowBlur=t.textShadowBlur),hasOwn(t,"textShadowOffsetX")&&(r.textShadowOffsetX=t.textShadowOffsetX),hasOwn(t,"textShadowOffsetY")&&(r.textShadowOffsetY=t.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(r,t){return r[t]=1,r},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(r,t,n,o,a){var l=r+"Animation",d=getAnimationConfig(r,o,a)||{},g=transitionInnerStore(t).userDuring;return d.duration>0&&(d.during=g?bind$1(duringCall,{el:t,userDuring:g}):null,d.setToFinal=!0,d.scope=r),extend(d,n[l]),d}function applyUpdateTransition(r,t,n,o){o=o||{};var a=o.dataIndex,l=o.isInit,d=o.clearStyle,g=n.isAnimationEnabled(),y=transitionInnerStore(r),S=t.style;y.userDuring=t.during;var x={},w={};if(prepareTransformAllPropsFinal(r,t,w),prepareShapeOrExtraAllPropsFinal("shape",t,w),prepareShapeOrExtraAllPropsFinal("extra",t,w),!l&&g&&(prepareTransformTransitionFrom(r,t,x),prepareShapeOrExtraTransitionFrom("shape",r,t,x),prepareShapeOrExtraTransitionFrom("extra",r,t,x),prepareStyleTransitionFrom(r,t,S,x)),w.style=S,applyPropsDirectly(r,w,d),applyMiscProps(r,t),g)if(l){var c={};each$f(ELEMENT_ANIMATABLE_PROPS,function(R){var L=R?t[R]:t;L&&L.enterFrom&&(R&&(c[R]=c[R]||{}),extend(R?c[R]:c,L.enterFrom))});var A=getElementAnimationConfig("enter",r,t,n,a);A.duration>0&&r.animateFrom(c,A)}else applyPropsTransition(r,t,a||0,n,x);updateLeaveTo(r,t),S?r.dirty():r.markRedraw()}function updateLeaveTo(r,t){for(var n=transitionInnerStore(r).leaveToProps,o=0;o<ELEMENT_ANIMATABLE_PROPS.length;o++){var a=ELEMENT_ANIMATABLE_PROPS[o],l=a?t[a]:t;l&&l.leaveTo&&(n||(n=transitionInnerStore(r).leaveToProps={}),a&&(n[a]=n[a]||{}),extend(a?n[a]:n,l.leaveTo))}}function applyLeaveTransition(r,t,n,o){if(r){var a=r.parent,l=transitionInnerStore(r).leaveToProps;if(l){var d=getElementAnimationConfig("update",r,t,n,0);d.done=function(){a.remove(r),o&&o()},r.animateTo(l,d)}else a.remove(r),o&&o()}}function isTransitionAll(r){return r==="all"}function applyPropsDirectly(r,t,n){var o=t.style;if(!r.isGroup&&o){if(n){r.useStyle({});for(var a=r.animators,l=0;l<a.length;l++){var d=a[l];d.targetName==="style"&&d.changeTarget(r.style)}}r.setStyle(o)}t&&(t.style=null,t&&r.attr(t),t.style=o)}function applyPropsTransition(r,t,n,o,a){if(a){var l=getElementAnimationConfig("update",r,t,o,n);l.duration>0&&r.animateFrom(a,l)}}function applyMiscProps(r,t){hasOwn(t,"silent")&&(r.silent=t.silent),hasOwn(t,"ignore")&&(r.ignore=t.ignore),r instanceof Displayable$1&&hasOwn(t,"invisible")&&(r.invisible=t.invisible),r instanceof Path$1&&hasOwn(t,"autoBatch")&&(r.autoBatch=t.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(r,t){return tmpDuringScope.el[r]=t,this},getTransform:function(r){return tmpDuringScope.el[r]},setShape:function(r,t){var n=tmpDuringScope.el,o=n.shape||(n.shape={});return o[r]=t,n.dirtyShape&&n.dirtyShape(),this},getShape:function(r){var t=tmpDuringScope.el.shape;if(t)return t[r]},setStyle:function(r,t){var n=tmpDuringScope.el,o=n.style;return o&&(o[r]=t,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(r){var t=tmpDuringScope.el.style;if(t)return t[r]},setExtra:function(r,t){var n=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return n[r]=t,this},getExtra:function(r){var t=tmpDuringScope.el.extra;if(t)return t[r]}};function duringCall(){var r=this,t=r.el;if(t){var n=transitionInnerStore(t).userDuring,o=r.userDuring;if(n!==o){r.el=r.userDuring=null;return}tmpDuringScope.el=t,o(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(r,t,n,o){var a=n[r];if(a){var l=t[r],d;if(l){var g=n.transition,y=a.transition;if(y)if(!d&&(d=o[r]={}),isTransitionAll(y))extend(d,l);else for(var S=normalizeToArray(y),x=0;x<S.length;x++){var w=S[x],c=l[w];d[w]=c}else if(isTransitionAll(g)||indexOf(g,r)>=0){!d&&(d=o[r]={});for(var A=keys(l),x=0;x<A.length;x++){var w=A[x],c=l[w];isNonStyleTransitionEnabled(a[w],c)&&(d[w]=c)}}}}}function prepareShapeOrExtraAllPropsFinal(r,t,n){var o=t[r];if(o)for(var a=n[r]={},l=keys(o),d=0;d<l.length;d++){var g=l[d];a[g]=cloneValue(o[g])}}function prepareTransformTransitionFrom(r,t,n){for(var o=t.transition,a=isTransitionAll(o)?TRANSFORMABLE_PROPS:normalizeToArray(o||[]),l=0;l<a.length;l++){var d=a[l];if(!(d==="style"||d==="shape"||d==="extra")){var g=r[d];n[d]=g}}}function prepareTransformAllPropsFinal(r,t,n){for(var o=0;o<LEGACY_TRANSFORM_PROPS.length;o++){var a=LEGACY_TRANSFORM_PROPS[o],l=LEGACY_TRANSFORM_PROPS_MAP[a],d=t[a];d&&(n[l[0]]=d[0],n[l[1]]=d[1])}for(var o=0;o<TRANSFORMABLE_PROPS.length;o++){var g=TRANSFORMABLE_PROPS[o];t[g]!=null&&(n[g]=t[g])}}function prepareStyleTransitionFrom(r,t,n,o){if(n){var a=r.style,l;if(a){var d=n.transition,g=t.transition;if(d&&!isTransitionAll(d)){var y=normalizeToArray(d);!l&&(l=o.style={});for(var S=0;S<y.length;S++){var x=y[S],w=a[x];l[x]=w}}else if(r.getAnimationStyleProps&&(isTransitionAll(g)||isTransitionAll(d)||indexOf(g,"style")>=0)){var c=r.getAnimationStyleProps(),A=c?c.style:null;if(A){!l&&(l=o.style={});for(var R=keys(n),S=0;S<R.length;S++){var x=R[S];if(A[x]){var w=a[x];l[x]=w}}}}}}}function isNonStyleTransitionEnabled(r,t){return isArrayLike(r)?r!==t:r!=null&&isFinite(r)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(r){r.stopAnimation("keyframe"),r.attr(getStateToRestore(r))}function applyKeyframeAnimation(r,t,n){if(!(!n.isAnimationEnabled()||!t)){if(isArray$1(t)){each$f(t,function(g){applyKeyframeAnimation(r,g,n)});return}var o=t.keyframes,a=t.duration;if(n&&a==null){var l=getAnimationConfig("enter",n,0);a=l&&l.duration}if(!(!o||!a)){var d=getStateToRestore(r);each$f(ELEMENT_ANIMATABLE_PROPS,function(g){if(!(g&&!r[g])){var y;o.sort(function(S,x){return S.percent-x.percent}),each$f(o,function(S){var x=r.animators,w=g?S[g]:S;if(w){var c=keys(w);if(g||(c=filter(c,function(L){return indexOf(KEYFRAME_EXCLUDE_KEYS,L)<0})),!!c.length){y||(y=r.animate(g,t.loop,!0),y.scope="keyframe");for(var A=0;A<x.length;A++)x[A]!==y&&x[A].targetName===y.targetName&&x[A].stopTracks(c);g&&(d[g]=d[g]||{});var R=g?d[g]:d;each$f(c,function(L){R[L]=((g?r[g]:r)||{})[L]}),y.whenWithKeys(a*S.percent,w,c,S.easing)}}}),y&&y.delay(t.delay||0).duration(a).start(t.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(r){return r instanceof Path$1}function isDisplayable(r){return r instanceof Displayable$1}function copyElement(r,t){t.copyTransform(r),isDisplayable(t)&&isDisplayable(r)&&(t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t.invisible=r.invisible,t.ignore=r.ignore,isPath(t)&&isPath(r)&&t.setShape(r.shape))}var CustomChartView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a,l){this._progressiveEls=null;var d=this._data,g=n.getData(),y=this.group,S=makeRenderItem(n,g,o,a);d||y.removeAll(),g.diff(d).add(function(w){createOrUpdateItem(a,null,w,S(w,l),n,y,g)}).remove(function(w){var c=d.getItemGraphicEl(w);c&&applyLeaveTransition(c,customInnerStore(c).option,n)}).update(function(w,c){var A=d.getItemGraphicEl(c);createOrUpdateItem(a,A,w,S(w,l),n,y,g)}).execute();var x=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;x?y.setClipPath(x):y.removeClipPath(),this._data=g},t.prototype.incrementalPrepareRender=function(n,o,a){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(n,o,a,l,d){var g=o.getData(),y=makeRenderItem(o,g,a,l),S=this._progressiveEls=[];function x(A){A.isGroup||(A.incremental=!0,A.ensureState("emphasis").hoverLayer=!0)}for(var w=n.start;w<n.end;w++){var c=createOrUpdateItem(null,null,w,y(w,d),o,this.group,g);c&&(c.traverse(x),S.push(c))}},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype.filterForExposedEvent=function(n,o,a,l){var d=o.element;if(d==null||a.name===d)return!0;for(;(a=a.__hostTarget||a.parent)&&a!==this.group;)if(a.name===d)return!0;return!1},t.type="custom",t}(ChartView$1);const CustomChartView$1=CustomChartView;function createEl$1(r){var t=r.type,n;if(t==="path"){var o=r.shape,a=o.width!=null&&o.height!=null?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,l=getPathData(o);n=makePath(l,null,a,o.layout||"center"),customInnerStore(n).customPathData=l}else if(t==="image")n=new ZRImage$1({}),customInnerStore(n).customImagePath=r.style.image;else if(t==="text")n=new ZRText$1({});else if(t==="group")n=new Group$4;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var d=getShapeClass(t);if(!d){var g="";throwError(g)}n=new d}return customInnerStore(n).customGraphicType=t,n.name=r.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function updateElNormal(r,t,n,o,a,l,d){stopPreviousKeyframeAnimationAndRestore(t);var g=a&&a.normal.cfg;g&&t.setTextConfig(g),o&&o.transition==null&&(o.transition=DEFAULT_TRANSITION);var y=o&&o.style;if(y){if(t.type==="text"){var S=y;hasOwn(S,"textFill")&&(S.fill=S.textFill),hasOwn(S,"textStroke")&&(S.stroke=S.textStroke)}var x=void 0,w=isPath(t)?y.decal:null;r&&w&&(w.dirty=!0,x=createOrUpdatePatternFromDecal(w,r)),y.__decalPattern=x}if(isDisplayable(t)&&y){var x=y.__decalPattern;x&&(y.decal=x)}applyUpdateTransition(t,o,l,{dataIndex:n,isInit:d,clearStyle:!0}),applyKeyframeAnimation(t,o.keyframeAnimation,l)}function updateElOnState(r,t,n,o,a){var l=t.isGroup?null:t,d=a&&a[r].cfg;if(l){var g=l.ensureState(r);if(o===!1){var y=l.getState(r);y&&(y.style=null)}else g.style=o||null;d&&(g.textConfig=d),setDefaultStateProxy(l)}}function updateZ(r,t,n){if(!r.isGroup){var o=r,a=n.currentZ,l=n.currentZLevel;o.z=a,o.zlevel=l;var d=t.z2;d!=null&&(o.z2=d||0);for(var g=0;g<STATES.length;g++)updateZForEachState(o,t,STATES[g])}}function updateZForEachState(r,t,n){var o=n===NORMAL,a=o?t:retrieveStateOption(t,n),l=a?a.z2:null,d;l!=null&&(d=o?r:r.ensureState(n),d.z2=l||0)}function makeRenderItem(r,t,n,o){var a=r.get("renderItem"),l=r.coordinateSystem,d={};l&&(d=l.prepareCustoms?l.prepareCustoms(l):prepareCustoms[l.type](l));for(var g=defaults({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:j,style:Z,ordinalRawValue:K,styleEmphasis:q,visual:oe,barLayout:re,currentSeriesIndices:he,font:_e},d.api||{}),y={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:d.coordSys,dataInsideLength:t.count(),encode:wrapEncodeDef(r.getData())},S,x,w={},c={},A={},R={},L=0;L<STATES.length;L++){var $=STATES[L];A[$]=r.getModel(PATH_ITEM_STYLE[$]),R[$]=r.getModel(PATH_LABEL[$])}function O(me){return me===S?x||(x=t.getItemModel(me)):t.getItemModel(me)}function z(me,be){return t.hasItemOption?me===S?w[be]||(w[be]=O(me).getModel(PATH_ITEM_STYLE[be])):O(me).getModel(PATH_ITEM_STYLE[be]):A[be]}function V(me,be){return t.hasItemOption?me===S?c[be]||(c[be]=O(me).getModel(PATH_LABEL[be])):O(me).getModel(PATH_LABEL[be]):R[be]}return function(me,be){return S=me,x=null,w={},c={},a&&a(defaults({dataIndexInside:me,dataIndex:t.getRawIndex(me),actionType:be?be.type:null},y),g)};function j(me,be){return be==null&&(be=S),t.getStore().get(t.getDimensionIndex(me||0),be)}function K(me,be){be==null&&(be=S),me=me||0;var Q=t.getDimensionInfo(me);if(!Q){var Ne=t.getDimensionIndex(me);return Ne>=0?t.getStore().get(Ne,be):void 0}var Ee=t.get(Q.name,be),Ge=Q&&Q.ordinalMeta;return Ge?Ge.categories[Ee]:Ee}function Z(me,be){be==null&&(be=S);var Q=t.getItemVisual(be,"style"),Ne=Q&&Q.fill,Ee=Q&&Q.opacity,Ge=z(be,NORMAL).getItemStyle();Ne!=null&&(Ge.fill=Ne),Ee!=null&&(Ge.opacity=Ee);var it={inheritColor:isString(Ne)?Ne:"#000"},Te=V(be,NORMAL),Ke=createTextStyle$1(Te,null,it,!1,!0);Ke.text=Te.getShallow("show")?retrieve2(r.getFormattedLabel(be,NORMAL),getDefaultLabel(t,be)):null;var Tt=createTextConfig(Te,it,!1);return te(me,Ge),Ge=convertToEC4StyleForCustomSerise(Ge,Ke,Tt),me&&ie(Ge,me),Ge.legacy=!0,Ge}function q(me,be){be==null&&(be=S);var Q=z(be,EMPHASIS).getItemStyle(),Ne=V(be,EMPHASIS),Ee=createTextStyle$1(Ne,null,null,!0,!0);Ee.text=Ne.getShallow("show")?retrieve3(r.getFormattedLabel(be,EMPHASIS),r.getFormattedLabel(be,NORMAL),getDefaultLabel(t,be)):null;var Ge=createTextConfig(Ne,null,!0);return te(me,Q),Q=convertToEC4StyleForCustomSerise(Q,Ee,Ge),me&&ie(Q,me),Q.legacy=!0,Q}function ie(me,be){for(var Q in be)hasOwn(be,Q)&&(me[Q]=be[Q])}function te(me,be){me&&(me.textFill&&(be.textFill=me.textFill),me.textPosition&&(be.textPosition=me.textPosition))}function oe(me,be){if(be==null&&(be=S),hasOwn(STYLE_VISUAL_TYPE,me)){var Q=t.getItemVisual(be,"style");return Q?Q[STYLE_VISUAL_TYPE[me]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,me))return t.getItemVisual(be,me)}function re(me){if(l.type==="cartesian2d"){var be=l.getBaseAxis();return getLayoutOnAxis(defaults({axis:be},me))}}function he(){return n.getCurrentSeriesIndices()}function _e(me){return getFont(me,n)}}function wrapEncodeDef(r){var t={};return each$f(r.dimensions,function(n){var o=r.getDimensionInfo(n);if(!o.isExtraCoord){var a=o.coordDim,l=t[a]=t[a]||[];l[o.coordDimIndex]=r.getDimensionIndex(n)}}),t}function createOrUpdateItem(r,t,n,o,a,l,d){if(!o){l.remove(t);return}var g=doCreateOrUpdateEl(r,t,n,o,a,l);return g&&d.setItemGraphicEl(n,g),g&&toggleHoverEmphasis(g,o.focus,o.blurScope,o.emphasisDisabled),g}function doCreateOrUpdateEl(r,t,n,o,a,l){var d=-1,g=t;t&&doesElNeedRecreate(t,o,a)&&(d=indexOf(l.childrenRef(),t),t=null);var y=!t,S=t;S?S.clearStates():(S=createEl$1(o),g&&copyElement(g,S)),o.morph===!1?S.disableMorphing=!0:S.disableMorphing&&(S.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(S,n,o,a,y,attachedTxInfoTmp),doCreateOrUpdateClipPath(S,n,o,a,y),updateElNormal(r,S,n,o,attachedTxInfoTmp,a,y),hasOwn(o,"info")&&(customInnerStore(S).info=o.info);for(var x=0;x<STATES.length;x++){var w=STATES[x];if(w!==NORMAL){var c=retrieveStateOption(o,w),A=retrieveStyleOptionOnState(o,c,w);updateElOnState(w,S,c,A,attachedTxInfoTmp)}}return updateZ(S,o,a),o.type==="group"&&mergeChildren(r,S,n,o,a),d>=0?l.replaceAt(S,d):l.add(S),S}function doesElNeedRecreate(r,t,n){var o=customInnerStore(r),a=t.type,l=t.shape,d=t.style;return n.isUniversalTransitionEnabled()||a!=null&&a!==o.customGraphicType||a==="path"&&hasOwnPathData(l)&&getPathData(l)!==o.customPathData||a==="image"&&hasOwn(d,"image")&&d.image!==o.customImagePath}function doCreateOrUpdateClipPath(r,t,n,o,a){var l=n.clipPath;if(l===!1)r&&r.getClipPath()&&r.removeClipPath();else if(l){var d=r.getClipPath();d&&doesElNeedRecreate(d,l,o)&&(d=null),d||(d=createEl$1(l),r.setClipPath(d)),updateElNormal(null,d,t,l,null,o,a)}}function doCreateOrUpdateAttachedTx(r,t,n,o,a,l){if(!r.isGroup){processTxInfo(n,null,l),processTxInfo(n,EMPHASIS,l);var d=l.normal.conOpt,g=l.emphasis.conOpt,y=l.blur.conOpt,S=l.select.conOpt;if(d!=null||g!=null||S!=null||y!=null){var x=r.getTextContent();if(d===!1)x&&r.removeTextContent();else{d=l.normal.conOpt=d||{type:"text"},x?x.clearStates():(x=createEl$1(d),r.setTextContent(x)),updateElNormal(null,x,t,d,null,o,a);for(var w=d&&d.style,c=0;c<STATES.length;c++){var A=STATES[c];if(A!==NORMAL){var R=l[A].conOpt;updateElOnState(A,x,R,retrieveStyleOptionOnState(d,R,A),null)}}w?x.dirty():x.markRedraw()}}}}function processTxInfo(r,t,n){var o=t?retrieveStateOption(r,t):r,a=t?retrieveStyleOptionOnState(r,o,EMPHASIS):r.style,l=r.type,d=o?o.textConfig:null,g=r.textContent,y=g?t?retrieveStateOption(g,t):g:null;if(a&&(n.isLegacy||isEC4CompatibleStyle(a,l,!!d,!!y))){n.isLegacy=!0;var S=convertFromEC4CompatibleStyle(a,l,!t);!d&&S.textConfig&&(d=S.textConfig),!y&&S.textContent&&(y=S.textContent)}if(!t&&y){var x=y;!x.type&&(x.type="text")}var w=t?n[t]:n.normal;w.cfg=d,w.conOpt=y}function retrieveStateOption(r,t){return t?r?r[t]:null:r}function retrieveStyleOptionOnState(r,t,n){var o=t&&t.style;return o==null&&n===EMPHASIS&&r&&(o=r.styleEmphasis),o}function mergeChildren(r,t,n,o,a){var l=o.children,d=l?l.length:0,g=o.$mergeChildren,y=g==="byName"||o.diffChildrenByName,S=g===!1;if(!(!d&&!y&&!S)){if(y){diffGroupChildren({api:r,oldChildren:t.children()||[],newChildren:l||[],dataIndex:n,seriesModel:a,group:t});return}S&&t.removeAll();for(var x=0;x<d;x++){var w=l[x],c=t.childAt(x);w?(w.ignore==null&&(w.ignore=!1),doCreateOrUpdateEl(r,c,n,w,a,t)):c.ignore=!0}for(var A=t.childCount()-1;A>=x;A--){var R=t.childAt(A);removeChildFromGroup(t,R,a)}}}function removeChildFromGroup(r,t,n){t&&applyLeaveTransition(t,customInnerStore(r).option,n)}function diffGroupChildren(r){new DataDiffer$1(r.oldChildren,r.newChildren,getKey,getKey,r).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(r,t){var n=r&&r.name;return n??GROUP_DIFF_PREFIX+t}function processAddUpdate(r,t){var n=this.context,o=r!=null?n.newChildren[r]:null,a=t!=null?n.oldChildren[t]:null;doCreateOrUpdateEl(n.api,a,n.dataIndex,o,n.seriesModel,n.group)}function processRemove(r){var t=this.context,n=t.oldChildren[r];n&&applyLeaveTransition(n,customInnerStore(n).option,t.seriesModel)}function getPathData(r){return r&&(r.pathData||r.d)}function hasOwnPathData(r){return r&&(hasOwn(r,"pathData")||hasOwn(r,"d"))}function install$r(r){r.registerChartView(CustomChartView$1),r.registerSeriesModel(CustomSeriesModel$1)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(t,n,o,a){var l=n.get("value"),d=n.get("status");if(this._axisModel=t,this._axisPointerModel=n,this._api=o,!(!a&&this._lastValue===l&&this._lastStatus===d)){this._lastValue=l,this._lastStatus=d;var g=this._group,y=this._handle;if(!d||d==="hide"){g&&g.hide(),y&&y.hide();return}g&&g.show(),y&&y.show();var S={};this.makeElOption(S,l,t,n,o);var x=S.graphicKey;x!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=x;var w=this._moveAnimation=this.determineAnimation(t,n);if(!g)g=this._group=new Group$4,this.createPointerEl(g,S,t,n),this.createLabelEl(g,S,t,n),o.getZr().add(g);else{var c=curry$1(updateProps,n,w);this.updatePointerEl(g,S,c),this.updateLabelEl(g,S,c,n)}updateMandatoryProps(g,n,!0),this._renderHandle(l)}},r.prototype.remove=function(t){this.clear(t)},r.prototype.dispose=function(t){this.clear(t)},r.prototype.determineAnimation=function(t,n){var o=n.get("animation"),a=t.axis,l=a.type==="category",d=n.get("snap");if(!d&&!l)return!1;if(o==="auto"||o==null){var g=this.animationThreshold;if(l&&a.getBandWidth()>g)return!0;if(d){var y=getAxisInfo$1(t).seriesDataCount,S=a.getExtent();return Math.abs(S[0]-S[1])/y>g}return!1}return o===!0},r.prototype.makeElOption=function(t,n,o,a,l){},r.prototype.createPointerEl=function(t,n,o,a){var l=n.pointer;if(l){var d=inner$b(t).pointerEl=new graphic$1[l.type](clone$1(n.pointer));t.add(d)}},r.prototype.createLabelEl=function(t,n,o,a){if(n.label){var l=inner$b(t).labelEl=new ZRText$1(clone$1(n.label));t.add(l),updateLabelShowHide(l,a)}},r.prototype.updatePointerEl=function(t,n,o){var a=inner$b(t).pointerEl;a&&n.pointer&&(a.setStyle(n.pointer.style),o(a,{shape:n.pointer.shape}))},r.prototype.updateLabelEl=function(t,n,o,a){var l=inner$b(t).labelEl;l&&(l.setStyle(n.label.style),o(l,{x:n.label.x,y:n.label.y}),updateLabelShowHide(l,a))},r.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,o=this._api.getZr(),a=this._handle,l=n.getModel("handle"),d=n.get("status");if(!l.get("show")||!d||d==="hide"){a&&o.remove(a),this._handle=null;return}var g;this._handle||(g=!0,a=this._handle=createIcon(l.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(S){stop(S.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),o.add(a)),updateMandatoryProps(a,n,!1),a.setStyle(l.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var y=l.get("size");isArray$1(y)||(y=[y,y]),a.scaleX=y[0]/2,a.scaleY=y[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",l.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,g)}},r.prototype._moveHandleToValue=function(t,n){updateProps(this._axisPointerModel,!n&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(t,n){var o=this._handle;if(o){this._dragging=!0;var a=this.updateHandleTransform(getHandleTransProps(o),[t,n],this._axisModel,this._axisPointerModel);this._payloadInfo=a,o.stopAnimation(),o.attr(getHandleTransProps(a)),inner$b(o).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var n=this._payloadInfo,o=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:o.axis.dim,axisIndex:o.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var n=t.getZr(),o=this._group,a=this._handle;n&&o&&(this._lastGraphicKey=null,o&&n.remove(o),a&&n.remove(a),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(t,n,o){return o=o||0,{x:t[o],y:t[1-o],width:n[o],height:n[1-o]}},r}();function updateProps(r,t,n,o){propsEqual(inner$b(n).lastProp,o)||(inner$b(n).lastProp=o,t?updateProps$1(n,o,r):(n.stopAnimation(),n.attr(o)))}function propsEqual(r,t){if(isObject$3(r)&&isObject$3(t)){var n=!0;return each$f(t,function(o,a){n=n&&propsEqual(r[a],o)}),!!n}else return r===t}function updateLabelShowHide(r,t){r[t.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function updateMandatoryProps(r,t,n){var o=t.get("z"),a=t.get("zlevel");r&&r.traverse(function(l){l.type!=="group"&&(o!=null&&(l.z=o),a!=null&&(l.zlevel=a),l.silent=n)})}const BaseAxisPointer$1=BaseAxisPointer;function buildElStyle(r){var t=r.get("type"),n=r.getModel(t+"Style"),o;return t==="line"?(o=n.getLineStyle(),o.fill=null):t==="shadow"&&(o=n.getAreaStyle(),o.stroke=null),o}function buildLabelElOption(r,t,n,o,a){var l=n.get("value"),d=getValueLabel(l,t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),g=n.getModel("label"),y=normalizeCssArray(g.get("padding")||0),S=g.getFont(),x=getBoundingRect(d,S),w=a.position,c=x.width+y[1]+y[3],A=x.height+y[0]+y[2],R=a.align;R==="right"&&(w[0]-=c),R==="center"&&(w[0]-=c/2);var L=a.verticalAlign;L==="bottom"&&(w[1]-=A),L==="middle"&&(w[1]-=A/2),confineInContainer(w,c,A,o);var $=g.get("backgroundColor");(!$||$==="auto")&&($=t.get(["axisLine","lineStyle","color"])),r.label={x:w[0],y:w[1],style:createTextStyle$1(g,{text:d,font:S,fill:g.getTextColor(),padding:y,backgroundColor:$}),z2:10}}function confineInContainer(r,t,n,o){var a=o.getWidth(),l=o.getHeight();r[0]=Math.min(r[0]+t,a)-t,r[1]=Math.min(r[1]+n,l)-n,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function getValueLabel(r,t,n,o,a){r=t.scale.parse(r);var l=t.scale.getLabel({value:r},{precision:a.precision}),d=a.formatter;if(d){var g={value:getAxisRawValue(t,{value:r}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};each$f(o,function(y){var S=n.getSeriesByIndex(y.seriesIndex),x=y.dataIndexInside,w=S&&S.getDataParams(x);w&&g.seriesData.push(w)}),isString(d)?l=d.replace("{value}",l):isFunction(d)&&(l=d(g))}return l}function getTransformedPosition(r,t,n){var o=create$1();return rotate(o,o,n.rotation),translate(o,o,n.position),applyTransform([r.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],o)}function buildCartesianSingleLabelElOption(r,t,n,o,a,l){var d=AxisBuilder$1.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=a.get(["label","margin"]),buildLabelElOption(t,o,a,l,{position:getTransformedPosition(o.axis,r,n),align:d.textAlign,verticalAlign:d.textVerticalAlign})}function makeLineShape(r,t,n){return n=n||0,{x1:r[n],y1:r[1-n],x2:t[n],y2:t[1-n]}}function makeRectShape(r,t,n){return n=n||0,{x:r[n],y:r[1-n],width:t[n],height:t[1-n]}}function makeSectorShape(r,t,n,o,a,l){return{cx:r,cy:t,r0:n,r:o,startAngle:a,endAngle:l,clockwise:!0}}var CartesianAxisPointer=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,o,a,l,d){var g=a.axis,y=g.grid,S=l.get("type"),x=getCartesian(y,g).getOtherAxis(g).getGlobalExtent(),w=g.toGlobalCoord(g.dataToCoord(o,!0));if(S&&S!=="none"){var c=buildElStyle(l),A=pointerShapeBuilder$2[S](g,w,x);A.style=c,n.graphicKey=A.type,n.pointer=A}var R=layout$2(y.model,a);buildCartesianSingleLabelElOption(o,n,R,a,l,d)},t.prototype.getHandleTransform=function(n,o,a){var l=layout$2(o.axis.grid.model,o,{labelInside:!1});l.labelMargin=a.get(["handle","margin"]);var d=getTransformedPosition(o.axis,n,l);return{x:d[0],y:d[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(n,o,a,l){var d=a.axis,g=d.grid,y=d.getGlobalExtent(!0),S=getCartesian(g,d).getOtherAxis(d).getGlobalExtent(),x=d.dim==="x"?0:1,w=[n.x,n.y];w[x]+=o[x],w[x]=Math.min(y[1],w[x]),w[x]=Math.max(y[0],w[x]);var c=(S[1]+S[0])/2,A=[c,c];A[x]=w[x];var R=[{verticalAlign:"middle"},{align:"center"}];return{x:w[0],y:w[1],rotation:n.rotation,cursorPoint:A,tooltipOption:R[x]}},t}(BaseAxisPointer$1);function getCartesian(r,t){var n={};return n[t.dim+"AxisIndex"]=t.index,r.getCartesian(n)}var pointerShapeBuilder$2={line:function(r,t,n){var o=makeLineShape([t,n[0]],[t,n[1]],getAxisDimIndex(r));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(r,t,n){var o=Math.max(1,r.getBandWidth()),a=n[1]-n[0];return{type:"Rect",shape:makeRectShape([t-o/2,n[0]],[o,a],getAxisDimIndex(r))}}};function getAxisDimIndex(r){return r.dim==="x"?0:1}const CartesianAxisPointer$1=CartesianAxisPointer;var AxisPointerModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(ComponentModel$1);const AxisPointerModel$1=AxisPointerModel;var inner$a=makeInner(),each$8=each$f;function register(r,t,n){if(!env$1.node){var o=t.getZr();inner$a(o).records||(inner$a(o).records={}),initGlobalListeners(o,t);var a=inner$a(o).records[r]||(inner$a(o).records[r]={});a.handler=n}}function initGlobalListeners(r,t){if(inner$a(r).initialized)return;inner$a(r).initialized=!0,n("click",curry$1(doEnter,"click")),n("mousemove",curry$1(doEnter,"mousemove")),n("globalout",onLeave);function n(o,a){r.on(o,function(l){var d=makeDispatchAction$1(t);each$8(inner$a(r).records,function(g){g&&a(g,l,d.dispatchAction)}),dispatchTooltipFinally(d.pendings,t)})}}function dispatchTooltipFinally(r,t){var n=r.showTip.length,o=r.hideTip.length,a;n?a=r.showTip[n-1]:o&&(a=r.hideTip[o-1]),a&&(a.dispatchAction=null,t.dispatchAction(a))}function onLeave(r,t,n){r.handler("leave",null,n)}function doEnter(r,t,n,o){t.handler(r,n,o)}function makeDispatchAction$1(r){var t={showTip:[],hideTip:[]},n=function(o){var a=t[o.type];a?a.push(o):(o.dispatchAction=n,r.dispatchAction(o))};return{dispatchAction:n,pendings:t}}function unregister(r,t){if(!env$1.node){var n=t.getZr(),o=(inner$a(n).records||{})[r];o&&(inner$a(n).records[r]=null)}}var AxisPointerView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=o.getComponent("tooltip"),d=n.get("triggerOn")||l&&l.get("triggerOn")||"mousemove|click";register("axisPointer",a,function(g,y,S){d!=="none"&&(g==="leave"||d.indexOf(g)>=0)&&S({type:"updateAxisPointer",currTrigger:g,x:y&&y.offsetX,y:y&&y.offsetY})})},t.prototype.remove=function(n,o){unregister("axisPointer",o)},t.prototype.dispose=function(n,o){unregister("axisPointer",o)},t.type="axisPointer",t}(ComponentView$1);const AxisPointerView$1=AxisPointerView;function findPointFromSeries(r,t){var n=[],o=r.seriesIndex,a;if(o==null||!(a=t.getSeriesByIndex(o)))return{point:[]};var l=a.getData(),d=queryDataIndex(l,r);if(d==null||d<0||isArray$1(d))return{point:[]};var g=l.getItemGraphicEl(d),y=a.coordinateSystem;if(a.getTooltipPosition)n=a.getTooltipPosition(d)||[];else if(y&&y.dataToPoint)if(r.isStacked){var S=y.getBaseAxis(),x=y.getOtherAxis(S),w=x.dim,c=S.dim,A=w==="x"||w==="radius"?1:0,R=l.mapDimension(c),L=[];L[A]=l.get(R,d),L[1-A]=l.get(l.getCalculationInfo("stackResultDimension"),d),n=y.dataToPoint(L)||[]}else n=y.dataToPoint(l.getValues(map$1(y.dimensions,function(O){return l.mapDimension(O)}),d))||[];else if(g){var $=g.getBoundingRect().clone();$.applyTransform(g.transform),n=[$.x+$.width/2,$.y+$.height/2]}return{point:n,el:g}}var inner$9=makeInner();function axisTrigger(r,t,n){var o=r.currTrigger,a=[r.x,r.y],l=r,d=r.dispatchAction||bind$1(n.dispatchAction,n),g=t.getComponent("axisPointer").coordSysAxesInfo;if(g){illegalPoint(a)&&(a=findPointFromSeries({seriesIndex:l.seriesIndex,dataIndex:l.dataIndex},t).point);var y=illegalPoint(a),S=l.axesInfo,x=g.axesInfo,w=o==="leave"||illegalPoint(a),c={},A={},R={list:[],map:{}},L={showPointer:curry$1(showPointer,A),showTooltip:curry$1(showTooltip,R)};each$f(g.coordSysMap,function(O,z){var V=y||O.containPoint(a);each$f(g.coordSysAxesInfo[z],function(j,K){var Z=j.axis,q=findInputAxisInfo(S,j);if(!w&&V&&(!S||q)){var ie=q&&q.value;ie==null&&!y&&(ie=Z.pointToData(a)),ie!=null&&processOnAxis(j,ie,L,!1,c)}})});var $={};return each$f(x,function(O,z){var V=O.linkGroup;V&&!A[z]&&each$f(V.axesInfo,function(j,K){var Z=A[K];if(j!==O&&Z){var q=Z.value;V.mapper&&(q=O.axis.scale.parse(V.mapper(q,makeMapperParam(j),makeMapperParam(O)))),$[O.key]=q}})}),each$f($,function(O,z){processOnAxis(x[z],O,L,!0,c)}),updateModelActually(A,x,c),dispatchTooltipActually(R,a,r,d),dispatchHighDownActually(x,d,n),c}}function processOnAxis(r,t,n,o,a){var l=r.axis;if(!(l.scale.isBlank()||!l.containData(t))){if(!r.involveSeries){n.showPointer(r,t);return}var d=buildPayloadsBySeries(t,r),g=d.payloadBatch,y=d.snapToValue;g[0]&&a.seriesIndex==null&&extend(a,g[0]),!o&&r.snap&&l.containData(y)&&y!=null&&(t=y),n.showPointer(r,t,g),n.showTooltip(r,d,y)}}function buildPayloadsBySeries(r,t){var n=t.axis,o=n.dim,a=r,l=[],d=Number.MAX_VALUE,g=-1;return each$f(t.seriesModels,function(y,S){var x=y.getData().mapDimensionsAll(o),w,c;if(y.getAxisTooltipData){var A=y.getAxisTooltipData(x,r,n);c=A.dataIndices,w=A.nestestValue}else{if(c=y.getData().indicesOfNearest(x[0],r,n.type==="category"?.5:null),!c.length)return;w=y.getData().get(x[0],c[0])}if(!(w==null||!isFinite(w))){var R=r-w,L=Math.abs(R);L<=d&&((L<d||R>=0&&g<0)&&(d=L,g=R,a=w,l.length=0),each$f(c,function($){l.push({seriesIndex:y.seriesIndex,dataIndexInside:$,dataIndex:y.getData().getRawIndex($)})}))}}),{payloadBatch:l,snapToValue:a}}function showPointer(r,t,n,o){r[t.key]={value:n,payloadBatch:o}}function showTooltip(r,t,n,o){var a=n.payloadBatch,l=t.axis,d=l.model,g=t.axisPointerModel;if(!(!t.triggerTooltip||!a.length)){var y=t.coordSys.model,S=makeKey(y),x=r.map[S];x||(x=r.map[S]={coordSysId:y.id,coordSysIndex:y.componentIndex,coordSysType:y.type,coordSysMainType:y.mainType,dataByAxis:[]},r.list.push(x)),x.dataByAxis.push({axisDim:l.dim,axisIndex:d.componentIndex,axisType:d.type,axisId:d.id,value:o,valueLabelOpt:{precision:g.get(["label","precision"]),formatter:g.get(["label","formatter"])},seriesDataIndices:a.slice()})}}function updateModelActually(r,t,n){var o=n.axesInfo=[];each$f(t,function(a,l){var d=a.axisPointerModel.option,g=r[l];g?(!a.useHandle&&(d.status="show"),d.value=g.value,d.seriesDataIndices=(g.payloadBatch||[]).slice()):!a.useHandle&&(d.status="hide"),d.status==="show"&&o.push({axisDim:a.axis.dim,axisIndex:a.axis.model.componentIndex,value:d.value})})}function dispatchTooltipActually(r,t,n,o){if(illegalPoint(t)||!r.list.length){o({type:"hideTip"});return}var a=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:a.dataIndexInside,dataIndex:a.dataIndex,seriesIndex:a.seriesIndex,dataByCoordSys:r.list})}function dispatchHighDownActually(r,t,n){var o=n.getZr(),a="axisPointerLastHighlights",l=inner$9(o)[a]||{},d=inner$9(o)[a]={};each$f(r,function(S,x){var w=S.axisPointerModel.option;w.status==="show"&&S.triggerEmphasis&&each$f(w.seriesDataIndices,function(c){var A=c.seriesIndex+" | "+c.dataIndex;d[A]=c})});var g=[],y=[];each$f(l,function(S,x){!d[x]&&y.push(S)}),each$f(d,function(S,x){!l[x]&&g.push(S)}),y.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:y}),g.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:g})}function findInputAxisInfo(r,t){for(var n=0;n<(r||[]).length;n++){var o=r[n];if(t.axis.dim===o.axisDim&&t.axis.model.componentIndex===o.axisIndex)return o}}function makeMapperParam(r){var t=r.axis.model,n={},o=n.axisDim=r.axis.dim;return n.axisIndex=n[o+"AxisIndex"]=t.componentIndex,n.axisName=n[o+"AxisName"]=t.name,n.axisId=n[o+"AxisId"]=t.id,n}function illegalPoint(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function install$q(r){AxisView$1.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer$1),r.registerComponentModel(AxisPointerModel$1),r.registerComponentView(AxisPointerView$1),r.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var n=t.axisPointer.link;n&&!isArray$1(n)&&(t.axisPointer.link=[n])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(t,n){t.getComponent("axisPointer").coordSysAxesInfo=collect(t,n)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(r){use(install$N),use(install$q)}var PolarAxisPointer=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,o,a,l,d){var g=a.axis;g.dim==="angle"&&(this.animationThreshold=Math.PI/18);var y=g.polar,S=y.getOtherAxis(g),x=S.getExtent(),w=g.dataToCoord(o),c=l.get("type");if(c&&c!=="none"){var A=buildElStyle(l),R=pointerShapeBuilder$1[c](g,y,w,x);R.style=A,n.graphicKey=R.type,n.pointer=R}var L=l.get(["label","margin"]),$=getLabelPosition(o,a,l,y,L);buildLabelElOption(n,a,l,d,$)},t}(BaseAxisPointer$1);function getLabelPosition(r,t,n,o,a){var l=t.axis,d=l.dataToCoord(r),g=o.getAngleAxis().getExtent()[0];g=g/180*Math.PI;var y=o.getRadiusAxis().getExtent(),S,x,w;if(l.dim==="radius"){var c=create$1();rotate(c,c,g),translate(c,c,[o.cx,o.cy]),S=applyTransform([d,-a],c);var A=t.getModel("axisLabel").get("rotate")||0,R=AxisBuilder$1.innerTextLayout(g,A*Math.PI/180,-1);x=R.textAlign,w=R.textVerticalAlign}else{var L=y[1];S=o.coordToPoint([L+a,d]);var $=o.cx,O=o.cy;x=Math.abs(S[0]-$)/L<.3?"center":S[0]>$?"left":"right",w=Math.abs(S[1]-O)/L<.3?"middle":S[1]>O?"top":"bottom"}return{position:S,align:x,verticalAlign:w}}var pointerShapeBuilder$1={line:function(r,t,n,o){return r.dim==="angle"?{type:"Line",shape:makeLineShape(t.coordToPoint([o[0],n]),t.coordToPoint([o[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(r,t,n,o){var a=Math.max(1,r.getBandWidth()),l=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:makeSectorShape(t.cx,t.cy,o[0],o[1],(-n-a/2)*l,(-n+a/2)*l)}:{type:"Sector",shape:makeSectorShape(t.cx,t.cy,n-a/2,n+a/2,0,Math.PI*2)}}};const PolarAxisPointer$1=PolarAxisPointer;var PolarModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.findAxisModel=function(n){var o,a=this.ecModel;return a.eachComponent(n,function(l){l.getCoordSysModel()===this&&(o=l)},this),o},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(ComponentModel$1);const PolarModel$1=PolarModel;var PolarAxisModel=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},t.type="polarAxis",t}(ComponentModel$1);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="angleAxis",t}(PolarAxisModel),RadiusAxisModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="radiusAxis",t}(PolarAxisModel),RadiusAxis=function(r){__extends(t,r);function t(n,o){return r.call(this,"radius",n,o)||this}return t.prototype.pointToData=function(n,o){return this.polar.pointToData(n,o)[this.dim==="radius"?0:1]},t}(Axis$1);RadiusAxis.prototype.dataToRadius=Axis$1.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis$1.prototype.coordToData;const RadiusAxis$1=RadiusAxis;var inner$8=makeInner(),AngleAxis=function(r){__extends(t,r);function t(n,o){return r.call(this,"angle",n,o||[0,360])||this}return t.prototype.pointToData=function(n,o){return this.polar.pointToData(n,o)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var n=this,o=n.getLabelModel(),a=n.scale,l=a.getExtent(),d=a.count();if(l[1]-l[0]<1)return 0;var g=l[0],y=n.dataToCoord(g+1)-n.dataToCoord(g),S=Math.abs(y),x=getBoundingRect(g==null?"":g+"",o.getFont(),"center","top"),w=Math.max(x.height,7),c=w/S;isNaN(c)&&(c=1/0);var A=Math.max(0,Math.floor(c)),R=inner$8(n.model),L=R.lastAutoInterval,$=R.lastTickCount;return L!=null&&$!=null&&Math.abs(L-A)<=1&&Math.abs($-d)<=1&&L>A?A=L:(R.lastTickCount=d,R.lastAutoInterval=A),A},t}(Axis$1);AngleAxis.prototype.dataToAngle=Axis$1.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis$1.prototype.coordToData;const AngleAxis$1=AngleAxis;var polarDimensions=["radius","angle"],Polar=function(){function r(t){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis$1,this._angleAxis=new AngleAxis$1,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(t){var n=this.pointToCoord(t);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},r.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},r.prototype.getAxis=function(t){var n="_"+t+"Axis";return this[n]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(t){var n=[],o=this._angleAxis,a=this._radiusAxis;return o.scale.type===t&&n.push(o),a.scale.type===t&&n.push(a),n},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(t){var n=this._angleAxis;return t===n?this._radiusAxis:n},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(t){var n=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},r.prototype.dataToPoint=function(t,n){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],n),this._angleAxis.dataToAngle(t[1],n)])},r.prototype.pointToData=function(t,n){var o=this.pointToCoord(t);return[this._radiusAxis.radiusToData(o[0],n),this._angleAxis.angleToData(o[1],n)]},r.prototype.pointToCoord=function(t){var n=t[0]-this.cx,o=t[1]-this.cy,a=this.getAngleAxis(),l=a.getExtent(),d=Math.min(l[0],l[1]),g=Math.max(l[0],l[1]);a.inverse?d=g-360:g=d+360;var y=Math.sqrt(n*n+o*o);n/=y,o/=y;for(var S=Math.atan2(-o,n)/Math.PI*180,x=S<d?1:-1;S<d||S>g;)S+=x*360;return[y,S]},r.prototype.coordToPoint=function(t){var n=t[0],o=t[1]/180*Math.PI,a=Math.cos(o)*n+this.cx,l=-Math.sin(o)*n+this.cy;return[a,l]},r.prototype.getArea=function(){var t=this.getAngleAxis(),n=this.getRadiusAxis(),o=n.getExtent().slice();o[0]>o[1]&&o.reverse();var a=t.getExtent(),l=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:o[0],r:o[1],startAngle:-a[0]*l,endAngle:-a[1]*l,clockwise:t.inverse,contain:function(d,g){var y=d-this.cx,S=g-this.cy,x=y*y+S*S-1e-4,w=this.r,c=this.r0;return x<=w*w&&x>=c*c}}},r.prototype.convertToPixel=function(t,n,o){var a=getCoordSys$2(n);return a===this?this.dataToPoint(o):null},r.prototype.convertFromPixel=function(t,n,o){var a=getCoordSys$2(n);return a===this?this.pointToData(o):null},r}();function getCoordSys$2(r){var t=r.seriesModel,n=r.polarModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}const Polar$1=Polar;function resizePolar(r,t,n){var o=t.get("center"),a=n.getWidth(),l=n.getHeight();r.cx=parsePercent(o[0],a),r.cy=parsePercent(o[1],l);var d=r.getRadiusAxis(),g=Math.min(a,l)/2,y=t.get("radius");y==null?y=[0,"100%"]:isArray$1(y)||(y=[0,y]);var S=[parsePercent(y[0],g),parsePercent(y[1],g)];d.inverse?d.setExtent(S[1],S[0]):d.setExtent(S[0],S[1])}function updatePolarScale(r,t){var n=this,o=n.getAngleAxis(),a=n.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),a.scale.setExtent(1/0,-1/0),r.eachSeries(function(g){if(g.coordinateSystem===n){var y=g.getData();each$f(getDataDimensionsOnAxis(y,"radius"),function(S){a.scale.unionExtentFromData(y,S)}),each$f(getDataDimensionsOnAxis(y,"angle"),function(S){o.scale.unionExtentFromData(y,S)})}}),niceScaleExtent(o.scale,o.model),niceScaleExtent(a.scale,a.model),o.type==="category"&&!o.onBand){var l=o.getExtent(),d=360/o.scale.count();o.inverse?l[1]+=d:l[1]-=d,o.setExtent(l[0],l[1])}}function isAngleAxisModel(r){return r.mainType==="angleAxis"}function setAxis(r,t){if(r.type=t.get("type"),r.scale=createScaleByModel$1(t),r.onBand=t.get("boundaryGap")&&r.type==="category",r.inverse=t.get("inverse"),isAngleAxisModel(t)){r.inverse=r.inverse!==t.get("clockwise");var n=t.get("startAngle");r.setExtent(n,n+(r.inverse?-360:360))}t.axis=r,r.model=t}var polarCreator={dimensions:polarDimensions,create:function(r,t){var n=[];return r.eachComponent("polar",function(o,a){var l=new Polar$1(a+"");l.update=updatePolarScale;var d=l.getRadiusAxis(),g=l.getAngleAxis(),y=o.findAxisModel("radiusAxis"),S=o.findAxisModel("angleAxis");setAxis(d,y),setAxis(g,S),resizePolar(l,o,t),n.push(l),o.coordinateSystem=l,l.model=o}),r.eachSeries(function(o){if(o.get("coordinateSystem")==="polar"){var a=o.getReferringComponents("polar",SINGLE_REFERRING).models[0];o.coordinateSystem=a.coordinateSystem}}),n}};const polarCreator$1=polarCreator;var elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(r,t,n){t[1]>t[0]&&(t=t.slice().reverse());var o=r.coordToPoint([t[0],n]),a=r.coordToPoint([t[1],n]);return{x1:o[0],y1:o[1],x2:a[0],y2:a[1]}}function getRadiusIdx(r){var t=r.getRadiusAxis();return t.inverse?0:1}function fixAngleOverlap(r){var t=r[0],n=r[r.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&r.pop()}var AngleAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return t.prototype.render=function(n,o){if(this.group.removeAll(),!!n.get("show")){var a=n.axis,l=a.polar,d=l.getRadiusAxis().getExtent(),g=a.getTicksCoords(),y=a.getMinorTicksCoords(),S=map$1(a.getViewLabels(),function(x){x=clone$4(x);var w=a.scale,c=w.type==="ordinal"?w.getRawOrdinalNumber(x.tickValue):x.tickValue;return x.coord=a.dataToCoord(c),x});fixAngleOverlap(S),fixAngleOverlap(g),each$f(elementList,function(x){n.get([x,"show"])&&(!a.scale.isBlank()||x==="axisLine")&&angelAxisElementsBuilders[x](this.group,n,l,g,y,d,S)},this)}},t.type="angleAxis",t}(AxisView$1),angelAxisElementsBuilders={axisLine:function(r,t,n,o,a,l){var d=t.getModel(["axisLine","lineStyle"]),g=getRadiusIdx(n),y=g?0:1,S;l[y]===0?S=new Circle$1({shape:{cx:n.cx,cy:n.cy,r:l[g]},style:d.getLineStyle(),z2:1,silent:!0}):S=new Ring$1({shape:{cx:n.cx,cy:n.cy,r:l[g],r0:l[y]},style:d.getLineStyle(),z2:1,silent:!0}),S.style.fill=null,r.add(S)},axisTick:function(r,t,n,o,a,l){var d=t.getModel("axisTick"),g=(d.get("inside")?-1:1)*d.get("length"),y=l[getRadiusIdx(n)],S=map$1(o,function(x){return new Line$3({shape:getAxisLineShape(n,[y,y+g],x.coord)})});r.add(mergePath(S,{style:defaults(d.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,t,n,o,a,l){if(a.length){for(var d=t.getModel("axisTick"),g=t.getModel("minorTick"),y=(d.get("inside")?-1:1)*g.get("length"),S=l[getRadiusIdx(n)],x=[],w=0;w<a.length;w++)for(var c=0;c<a[w].length;c++)x.push(new Line$3({shape:getAxisLineShape(n,[S,S+y],a[w][c].coord)}));r.add(mergePath(x,{style:defaults(g.getModel("lineStyle").getLineStyle(),defaults(d.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,t,n,o,a,l,d){var g=t.getCategories(!0),y=t.getModel("axisLabel"),S=y.get("margin"),x=t.get("triggerEvent");each$f(d,function(w,c){var A=y,R=w.tickValue,L=l[getRadiusIdx(n)],$=n.coordToPoint([L+S,w.coord]),O=n.cx,z=n.cy,V=Math.abs($[0]-O)/L<.3?"center":$[0]>O?"left":"right",j=Math.abs($[1]-z)/L<.3?"middle":$[1]>z?"top":"bottom";if(g&&g[R]){var K=g[R];isObject$3(K)&&K.textStyle&&(A=new Model$1(K.textStyle,y,y.ecModel))}var Z=new ZRText$1({silent:AxisBuilder$1.isLabelSilent(t),style:createTextStyle$1(A,{x:$[0],y:$[1],fill:A.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:w.formattedLabel,align:V,verticalAlign:j})});if(r.add(Z),x){var q=AxisBuilder$1.makeAxisEventDataBase(t);q.targetType="axisLabel",q.value=w.rawLabel,getECData(Z).eventData=q}},this)},splitLine:function(r,t,n,o,a,l){var d=t.getModel("splitLine"),g=d.getModel("lineStyle"),y=g.get("color"),S=0;y=y instanceof Array?y:[y];for(var x=[],w=0;w<o.length;w++){var c=S++%y.length;x[c]=x[c]||[],x[c].push(new Line$3({shape:getAxisLineShape(n,l,o[w].coord)}))}for(var w=0;w<x.length;w++)r.add(mergePath(x[w],{style:defaults({stroke:y[w%y.length]},g.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(r,t,n,o,a,l){if(a.length){for(var d=t.getModel("minorSplitLine"),g=d.getModel("lineStyle"),y=[],S=0;S<a.length;S++)for(var x=0;x<a[S].length;x++)y.push(new Line$3({shape:getAxisLineShape(n,l,a[S][x].coord)}));r.add(mergePath(y,{style:g.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(r,t,n,o,a,l){if(o.length){var d=t.getModel("splitArea"),g=d.getModel("areaStyle"),y=g.get("color"),S=0;y=y instanceof Array?y:[y];for(var x=[],w=Math.PI/180,c=-o[0].coord*w,A=Math.min(l[0],l[1]),R=Math.max(l[0],l[1]),L=t.get("clockwise"),$=1,O=o.length;$<=O;$++){var z=$===O?o[0].coord:o[$].coord,V=S++%y.length;x[V]=x[V]||[],x[V].push(new Sector$1({shape:{cx:n.cx,cy:n.cy,r0:A,r:R,startAngle:c,endAngle:-z*w,clockwise:L},silent:!0})),c=-z*w}for(var $=0;$<x.length;$++)r.add(mergePath(x[$],{style:defaults({fill:y[$%y.length]},g.getAreaStyle()),silent:!0}))}}};const AngleAxisView$1=AngleAxisView;var axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return t.prototype.render=function(n,o){if(this.group.removeAll(),!!n.get("show")){var a=this._axisGroup,l=this._axisGroup=new Group$4;this.group.add(l);var d=n.axis,g=d.polar,y=g.getAngleAxis(),S=d.getTicksCoords(),x=d.getMinorTicksCoords(),w=y.getExtent()[0],c=d.getExtent(),A=layoutAxis(g,n,w),R=new AxisBuilder$1(n,A);each$f(axisBuilderAttrs$1,R.add,R),l.add(R.getGroup()),groupTransition(a,l,n),each$f(selfBuilderAttrs$1,function(L){n.get([L,"show"])&&!d.scale.isBlank()&&axisElementBuilders$1[L](this.group,n,g,w,c,S,x)},this)}},t.type="radiusAxis",t}(AxisView$1),axisElementBuilders$1={splitLine:function(r,t,n,o,a,l){var d=t.getModel("splitLine"),g=d.getModel("lineStyle"),y=g.get("color"),S=0;y=y instanceof Array?y:[y];for(var x=[],w=0;w<l.length;w++){var c=S++%y.length;x[c]=x[c]||[],x[c].push(new Circle$1({shape:{cx:n.cx,cy:n.cy,r:Math.max(l[w].coord,0)}}))}for(var w=0;w<x.length;w++)r.add(mergePath(x[w],{style:defaults({stroke:y[w%y.length],fill:null},g.getLineStyle()),silent:!0}))},minorSplitLine:function(r,t,n,o,a,l,d){if(d.length){for(var g=t.getModel("minorSplitLine"),y=g.getModel("lineStyle"),S=[],x=0;x<d.length;x++)for(var w=0;w<d[x].length;w++)S.push(new Circle$1({shape:{cx:n.cx,cy:n.cy,r:d[x][w].coord}}));r.add(mergePath(S,{style:defaults({fill:null},y.getLineStyle()),silent:!0}))}},splitArea:function(r,t,n,o,a,l){if(l.length){var d=t.getModel("splitArea"),g=d.getModel("areaStyle"),y=g.get("color"),S=0;y=y instanceof Array?y:[y];for(var x=[],w=l[0].coord,c=1;c<l.length;c++){var A=S++%y.length;x[A]=x[A]||[],x[A].push(new Sector$1({shape:{cx:n.cx,cy:n.cy,r0:w,r:l[c].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),w=l[c].coord}for(var c=0;c<x.length;c++)r.add(mergePath(x[c],{style:defaults({fill:y[c%y.length]},g.getAreaStyle()),silent:!0}))}}};function layoutAxis(r,t,n){return{position:[r.cx,r.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}const RadiusAxisView$1=RadiusAxisView;function getSeriesStackId(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function getAxisKey(r,t){return t.dim+r.model.componentIndex}function barLayoutPolar(r,t,n){var o={},a=calRadialBar(filter(t.getSeriesByType(r),function(l){return!t.isSeriesFiltered(l)&&l.coordinateSystem&&l.coordinateSystem.type==="polar"}));t.eachSeriesByType(r,function(l){if(l.coordinateSystem.type==="polar"){var d=l.getData(),g=l.coordinateSystem,y=g.getBaseAxis(),S=getAxisKey(g,y),x=getSeriesStackId(l),w=a[S][x],c=w.offset,A=w.width,R=g.getOtherAxis(y),L=l.coordinateSystem.cx,$=l.coordinateSystem.cy,O=l.get("barMinHeight")||0,z=l.get("barMinAngle")||0;o[x]=o[x]||[];for(var V=d.mapDimension(R.dim),j=d.mapDimension(y.dim),K=isDimensionStacked(d,V),Z=y.dim!=="radius"||!l.get("roundCap",!0),q=R.dataToCoord(0),ie=0,te=d.count();ie<te;ie++){var oe=d.get(V,ie),re=d.get(j,ie),he=oe>=0?"p":"n",_e=q;K&&(o[x][re]||(o[x][re]={p:q,n:q}),_e=o[x][re][he]);var me=void 0,be=void 0,Q=void 0,Ne=void 0;if(R.dim==="radius"){var Ee=R.dataToCoord(oe)-q,Ge=y.dataToCoord(re);Math.abs(Ee)<O&&(Ee=(Ee<0?-1:1)*O),me=_e,be=_e+Ee,Q=Ge-c,Ne=Q-A,K&&(o[x][re][he]=be)}else{var it=R.dataToCoord(oe,Z)-q,Te=y.dataToCoord(re);Math.abs(it)<z&&(it=(it<0?-1:1)*z),me=Te+c,be=me+A,Q=_e,Ne=_e+it,K&&(o[x][re][he]=Ne)}d.setItemLayout(ie,{cx:L,cy:$,r0:me,r:be,startAngle:-Q*Math.PI/180,endAngle:-Ne*Math.PI/180,clockwise:Q>=Ne})}}})}function calRadialBar(r){var t={};each$f(r,function(o,a){var l=o.getData(),d=o.coordinateSystem,g=d.getBaseAxis(),y=getAxisKey(d,g),S=g.getExtent(),x=g.type==="category"?g.getBandWidth():Math.abs(S[1]-S[0])/l.count(),w=t[y]||{bandWidth:x,remainedWidth:x,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=w.stacks;t[y]=w;var A=getSeriesStackId(o);c[A]||w.autoWidthCount++,c[A]=c[A]||{width:0,maxWidth:0};var R=parsePercent(o.get("barWidth"),x),L=parsePercent(o.get("barMaxWidth"),x),$=o.get("barGap"),O=o.get("barCategoryGap");R&&!c[A].width&&(R=Math.min(w.remainedWidth,R),c[A].width=R,w.remainedWidth-=R),L&&(c[A].maxWidth=L),$!=null&&(w.gap=$),O!=null&&(w.categoryGap=O)});var n={};return each$f(t,function(o,a){n[a]={};var l=o.stacks,d=o.bandWidth,g=parsePercent(o.categoryGap,d),y=parsePercent(o.gap,1),S=o.remainedWidth,x=o.autoWidthCount,w=(S-g)/(x+(x-1)*y);w=Math.max(w,0),each$f(l,function(L,$){var O=L.maxWidth;O&&O<w&&(O=Math.min(O,S),L.width&&(O=Math.min(O,L.width)),S-=O,L.width=O,x--)}),w=(S-g)/(x+(x-1)*y),w=Math.max(w,0);var c=0,A;each$f(l,function(L,$){L.width||(L.width=w),A=L,c+=L.width*(1+y)}),A&&(c-=A.width*y);var R=-c/2;each$f(l,function(L,$){n[a][$]=n[a][$]||{offset:R,width:L.width},R+=L.width*(1+y)})}),n}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="polar",t}(ComponentView$1);function install$o(r){use(install$q),AxisView$1.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer$1),r.registerCoordinateSystem("polar",polarCreator$1),r.registerComponentModel(PolarModel$1),r.registerComponentView(PolarView),axisModelCreator(r,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(r,"radius",RadiusAxisModel,radiusAxisExtraOption),r.registerComponentView(AngleAxisView$1),r.registerComponentView(RadiusAxisView$1),r.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(r,t){t=t||{};var n=r.coordinateSystem,o=r.axis,a={},l=o.position,d=o.orient,g=n.getRect(),y=[g.x,g.x+g.width,g.y,g.y+g.height],S={horizontal:{top:y[2],bottom:y[3]},vertical:{left:y[0],right:y[1]}};a.position=[d==="vertical"?S.vertical[l]:y[0],d==="horizontal"?S.horizontal[l]:y[3]];var x={horizontal:0,vertical:1};a.rotation=Math.PI/2*x[d];var w={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=w[l],r.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),retrieve(t.labelInside,r.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var c=t.rotate;return c==null&&(c=r.get(["axisLabel","rotate"])),a.labelRotation=l==="top"?-c:c,a.z2=1,a}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="SingleAxisPointer",n}return t.prototype.render=function(n,o,a,l){var d=this.group;d.removeAll();var g=this._axisGroup;this._axisGroup=new Group$4;var y=layout$1(n),S=new AxisBuilder$1(n,y);each$f(axisBuilderAttrs,S.add,S),d.add(this._axisGroup),d.add(S.getGroup()),each$f(selfBuilderAttrs,function(x){n.get([x,"show"])&&axisElementBuilders[x](this,this.group,this._axisGroup,n)},this),groupTransition(g,this._axisGroup,n),r.prototype.render.call(this,n,o,a,l)},t.prototype.remove=function(){rectCoordAxisHandleRemove(this)},t.type="singleAxis",t}(AxisView$1),axisElementBuilders={splitLine:function(r,t,n,o){var a=o.axis;if(!a.scale.isBlank()){var l=o.getModel("splitLine"),d=l.getModel("lineStyle"),g=d.get("color");g=g instanceof Array?g:[g];for(var y=d.get("width"),S=o.coordinateSystem.getRect(),x=a.isHorizontal(),w=[],c=0,A=a.getTicksCoords({tickModel:l}),R=[],L=[],$=0;$<A.length;++$){var O=a.toGlobalCoord(A[$].coord);x?(R[0]=O,R[1]=S.y,L[0]=O,L[1]=S.y+S.height):(R[0]=S.x,R[1]=O,L[0]=S.x+S.width,L[1]=O);var z=new Line$3({shape:{x1:R[0],y1:R[1],x2:L[0],y2:L[1]},silent:!0});subPixelOptimizeLine(z.shape,y);var V=c++%g.length;w[V]=w[V]||[],w[V].push(z)}for(var j=d.getLineStyle(["color"]),$=0;$<w.length;++$)t.add(mergePath(w[$],{style:defaults({stroke:g[$%g.length]},j),silent:!0}))}},splitArea:function(r,t,n,o){rectCoordAxisBuildSplitArea(r,n,o,o)}};const SingleAxisView$1=SingleAxisView;var SingleAxisModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(ComponentModel$1);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);const SingleAxisModel$1=SingleAxisModel;var SingleAxis=function(r){__extends(t,r);function t(n,o,a,l,d){var g=r.call(this,n,o,a)||this;return g.type=l||"value",g.position=d||"bottom",g}return t.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},t.prototype.pointToData=function(n,o){return this.coordinateSystem.pointToData(n)[0]},t}(Axis$1);const SingleAxis$1=SingleAxis;var singleDimensions=["single"],Single=function(){function r(t,n,o){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=t,this._init(t,n,o)}return r.prototype._init=function(t,n,o){var a=this.dimension,l=new SingleAxis$1(a,createScaleByModel$1(t),[0,0],t.get("type"),t.get("position")),d=l.type==="category";l.onBand=d&&t.get("boundaryGap"),l.inverse=t.get("inverse"),l.orient=t.get("orient"),t.axis=l,l.model=t,l.coordinateSystem=this,this._axis=l},r.prototype.update=function(t,n){t.eachSeries(function(o){if(o.coordinateSystem===this){var a=o.getData();each$f(a.mapDimensionsAll(this.dimension),function(l){this._axis.scale.unionExtentFromData(a,l)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(t,n){this._rect=getLayoutRect({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:n.getWidth(),height:n.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var t=this._rect,n=this._axis,o=n.isHorizontal(),a=o?[0,t.width]:[0,t.height],l=n.inverse?1:0;n.setExtent(a[l],a[1-l]),this._updateAxisTransform(n,o?t.x:t.y)},r.prototype._updateAxisTransform=function(t,n){var o=t.getExtent(),a=o[0]+o[1],l=t.isHorizontal();t.toGlobalCoord=l?function(d){return d+n}:function(d){return a-d+n},t.toLocalCoord=l?function(d){return d-n}:function(d){return a-d+n}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(t){var n=this.getRect(),o=this.getAxis(),a=o.orient;return a==="horizontal"?o.contain(o.toLocalCoord(t[0]))&&t[1]>=n.y&&t[1]<=n.y+n.height:o.contain(o.toLocalCoord(t[1]))&&t[0]>=n.y&&t[0]<=n.y+n.height},r.prototype.pointToData=function(t){var n=this.getAxis();return[n.coordToData(n.toLocalCoord(t[n.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(t){var n=this.getAxis(),o=this.getRect(),a=[],l=n.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),a[l]=n.toGlobalCoord(n.dataToCoord(+t)),a[1-l]=l===0?o.y+o.height/2:o.x+o.width/2,a},r.prototype.convertToPixel=function(t,n,o){var a=getCoordSys$1(n);return a===this?this.dataToPoint(o):null},r.prototype.convertFromPixel=function(t,n,o){var a=getCoordSys$1(n);return a===this?this.pointToData(o):null},r}();function getCoordSys$1(r){var t=r.seriesModel,n=r.singleAxisModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}function create(r,t){var n=[];return r.eachComponent("singleAxis",function(o,a){var l=new Single(o,r,t);l.name="single_"+a,l.resize(o,t),o.coordinateSystem=l,n.push(l)}),r.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var a=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];o.coordinateSystem=a&&a.coordinateSystem}}),n}var singleCreator={create,dimensions:singleDimensions};const singleCreator$1=singleCreator;var XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,o,a,l,d){var g=a.axis,y=g.coordinateSystem,S=getGlobalExtent(y,1-getPointDimIndex(g)),x=y.dataToPoint(o)[0],w=l.get("type");if(w&&w!=="none"){var c=buildElStyle(l),A=pointerShapeBuilder[w](g,x,S);A.style=c,n.graphicKey=A.type,n.pointer=A}var R=layout$1(a);buildCartesianSingleLabelElOption(o,n,R,a,l,d)},t.prototype.getHandleTransform=function(n,o,a){var l=layout$1(o,{labelInside:!1});l.labelMargin=a.get(["handle","margin"]);var d=getTransformedPosition(o.axis,n,l);return{x:d[0],y:d[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(n,o,a,l){var d=a.axis,g=d.coordinateSystem,y=getPointDimIndex(d),S=getGlobalExtent(g,y),x=[n.x,n.y];x[y]+=o[y],x[y]=Math.min(S[1],x[y]),x[y]=Math.max(S[0],x[y]);var w=getGlobalExtent(g,1-y),c=(w[1]+w[0])/2,A=[c,c];return A[y]=x[y],{x:x[0],y:x[1],rotation:n.rotation,cursorPoint:A,tooltipOption:{verticalAlign:"middle"}}},t}(BaseAxisPointer$1),pointerShapeBuilder={line:function(r,t,n){var o=makeLineShape([t,n[0]],[t,n[1]],getPointDimIndex(r));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(r,t,n){var o=r.getBandWidth(),a=n[1]-n[0];return{type:"Rect",shape:makeRectShape([t-o/2,n[0]],[o,a],getPointDimIndex(r))}}};function getPointDimIndex(r){return r.isHorizontal()?0:1}function getGlobalExtent(r,t){var n=r.getRect();return[n[XY$1[t]],n[XY$1[t]]+n[WH$1[t]]]}const SingleAxisPointer$1=SingleAxisPointer;var SingleView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="single",t}(ComponentView$1);function install$n(r){use(install$q),AxisView$1.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer$1),r.registerComponentView(SingleView),r.registerComponentView(SingleAxisView$1),r.registerComponentModel(SingleAxisModel$1),axisModelCreator(r,"single",SingleAxisModel$1,SingleAxisModel$1.defaultOption),r.registerCoordinateSystem("single",singleCreator$1)}var CalendarModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o,a){var l=getLayoutParams(n);r.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(n,l)},t.prototype.mergeOption=function(n){r.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,n)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(ComponentModel$1);function mergeAndNormalizeLayoutParams$1(r,t){var n=r.cellSize,o;isArray$1(n)?o=n:o=r.cellSize=[n,n],o.length===1&&(o[1]=o[0]);var a=map$1([0,1],function(l){return sizeCalculable(t,l)&&(o[l]="auto"),o[l]!=null&&o[l]!=="auto"});mergeLayoutParam(r,t,{type:"box",ignoreSize:a})}const CalendarModel$1=CalendarModel;var CalendarView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){var l=this.group;l.removeAll();var d=n.coordinateSystem,g=d.getRangeInfo(),y=d.getOrient(),S=o.getLocaleModel();this._renderDayRect(n,g,l),this._renderLines(n,g,y,l),this._renderYearText(n,g,y,l),this._renderMonthText(n,S,y,l),this._renderWeekText(n,S,g,y,l)},t.prototype._renderDayRect=function(n,o,a){for(var l=n.coordinateSystem,d=n.getModel("itemStyle").getItemStyle(),g=l.getCellWidth(),y=l.getCellHeight(),S=o.start.time;S<=o.end.time;S=l.getNextNDay(S,1).time){var x=l.dataToRect([S],!1).tl,w=new Rect$3({shape:{x:x[0],y:x[1],width:g,height:y},cursor:"default",style:d});a.add(w)}},t.prototype._renderLines=function(n,o,a,l){var d=this,g=n.coordinateSystem,y=n.getModel(["splitLine","lineStyle"]).getLineStyle(),S=n.get(["splitLine","show"]),x=y.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var w=o.start,c=0;w.time<=o.end.time;c++){R(w.formatedDate),c===0&&(w=g.getDateInfo(o.start.y+"-"+o.start.m));var A=w.date;A.setMonth(A.getMonth()+1),w=g.getDateInfo(A)}R(g.getNextNDay(o.end.time,1).formatedDate);function R(L){d._firstDayOfMonth.push(g.getDateInfo(L)),d._firstDayPoints.push(g.dataToRect([L],!1).tl);var $=d._getLinePointsOfOneWeek(n,L,a);d._tlpoints.push($[0]),d._blpoints.push($[$.length-1]),S&&d._drawSplitline($,y,l)}S&&this._drawSplitline(d._getEdgesPoints(d._tlpoints,x,a),y,l),S&&this._drawSplitline(d._getEdgesPoints(d._blpoints,x,a),y,l)},t.prototype._getEdgesPoints=function(n,o,a){var l=[n[0].slice(),n[n.length-1].slice()],d=a==="horizontal"?0:1;return l[0][d]=l[0][d]-o/2,l[1][d]=l[1][d]+o/2,l},t.prototype._drawSplitline=function(n,o,a){var l=new Polyline$3({z2:20,shape:{points:n},style:o});a.add(l)},t.prototype._getLinePointsOfOneWeek=function(n,o,a){for(var l=n.coordinateSystem,d=l.getDateInfo(o),g=[],y=0;y<7;y++){var S=l.getNextNDay(d.time,y),x=l.dataToRect([S.time],!1);g[2*S.day]=x.tl,g[2*S.day+1]=x[a==="horizontal"?"bl":"tr"]}return g},t.prototype._formatterLabel=function(n,o){return isString(n)&&n?formatTplSimple(n,o):isFunction(n)?n(o):o.nameMap},t.prototype._yearTextPositionControl=function(n,o,a,l,d){var g=o[0],y=o[1],S=["center","bottom"];l==="bottom"?(y+=d,S=["center","top"]):l==="left"?g-=d:l==="right"?(g+=d,S=["center","top"]):y-=d;var x=0;return(l==="left"||l==="right")&&(x=Math.PI/2),{rotation:x,x:g,y,style:{align:S[0],verticalAlign:S[1]}}},t.prototype._renderYearText=function(n,o,a,l){var d=n.getModel("yearLabel");if(d.get("show")){var g=d.get("margin"),y=d.get("position");y||(y=a!=="horizontal"?"top":"left");var S=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],x=(S[0][0]+S[1][0])/2,w=(S[0][1]+S[1][1])/2,c=a==="horizontal"?0:1,A={top:[x,S[c][1]],bottom:[x,S[1-c][1]],left:[S[1-c][0],w],right:[S[c][0],w]},R=o.start.y;+o.end.y>+o.start.y&&(R=R+"-"+o.end.y);var L=d.get("formatter"),$={start:o.start.y,end:o.end.y,nameMap:R},O=this._formatterLabel(L,$),z=new ZRText$1({z2:30,style:createTextStyle$1(d,{text:O})});z.attr(this._yearTextPositionControl(z,A[y],a,y,g)),l.add(z)}},t.prototype._monthTextPositionControl=function(n,o,a,l,d){var g="left",y="top",S=n[0],x=n[1];return a==="horizontal"?(x=x+d,o&&(g="center"),l==="start"&&(y="bottom")):(S=S+d,o&&(y="middle"),l==="start"&&(g="right")),{x:S,y:x,align:g,verticalAlign:y}},t.prototype._renderMonthText=function(n,o,a,l){var d=n.getModel("monthLabel");if(d.get("show")){var g=d.get("nameMap"),y=d.get("margin"),S=d.get("position"),x=d.get("align"),w=[this._tlpoints,this._blpoints];(!g||isString(g))&&(g&&(o=getLocaleModel(g)||o),g=o.get(["time","monthAbbr"])||[]);var c=S==="start"?0:1,A=a==="horizontal"?0:1;y=S==="start"?-y:y;for(var R=x==="center",L=0;L<w[c].length-1;L++){var $=w[c][L].slice(),O=this._firstDayOfMonth[L];if(R){var z=this._firstDayPoints[L];$[A]=(z[A]+w[0][L+1][A])/2}var V=d.get("formatter"),j=g[+O.m-1],K={yyyy:O.y,yy:(O.y+"").slice(2),MM:O.m,M:+O.m,nameMap:j},Z=this._formatterLabel(V,K),q=new ZRText$1({z2:30,style:extend(createTextStyle$1(d,{text:Z}),this._monthTextPositionControl($,R,a,S,y))});l.add(q)}}},t.prototype._weekTextPositionControl=function(n,o,a,l,d){var g="center",y="middle",S=n[0],x=n[1],w=a==="start";return o==="horizontal"?(S=S+l+(w?1:-1)*d[0]/2,g=w?"right":"left"):(x=x+l+(w?1:-1)*d[1]/2,y=w?"bottom":"top"),{x:S,y:x,align:g,verticalAlign:y}},t.prototype._renderWeekText=function(n,o,a,l,d){var g=n.getModel("dayLabel");if(g.get("show")){var y=n.coordinateSystem,S=g.get("position"),x=g.get("nameMap"),w=g.get("margin"),c=y.getFirstDayOfWeek();if(!x||isString(x)){x&&(o=getLocaleModel(x)||o);var A=o.get(["time","dayOfWeekShort"]);x=A||map$1(o.get(["time","dayOfWeekAbbr"]),function(K){return K[0]})}var R=y.getNextNDay(a.end.time,7-a.lweek).time,L=[y.getCellWidth(),y.getCellHeight()];w=parsePercent(w,Math.min(L[1],L[0])),S==="start"&&(R=y.getNextNDay(a.start.time,-(7+a.fweek)).time,w=-w);for(var $=0;$<7;$++){var O=y.getNextNDay(R,$),z=y.dataToRect([O.time],!1).center,V=$;V=Math.abs(($+c)%7);var j=new ZRText$1({z2:30,style:extend(createTextStyle$1(g,{text:x[V]}),this._weekTextPositionControl(z,l,S,w,L))});d.add(j)}}},t.type="calendar",t}(ComponentView$1);const CalendarView$1=CalendarView;var PROXIMATE_ONE_DAY=864e5,Calendar=function(){function r(t,n,o){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=t}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(t){t=parseDate(t);var n=t.getFullYear(),o=t.getMonth()+1,a=o<10?"0"+o:""+o,l=t.getDate(),d=l<10?"0"+l:""+l,g=t.getDay();return g=Math.abs((g+7-this.getFirstDayOfWeek())%7),{y:n+"",m:a,d,day:g,time:t.getTime(),formatedDate:n+"-"+a+"-"+d,date:t}},r.prototype.getNextNDay=function(t,n){return n=n||0,n===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+n),this.getDateInfo(t))},r.prototype.update=function(t,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,a=["width","height"],l=this._model.getCellSize().slice(),d=this._model.getBoxLayoutParams(),g=this._orient==="horizontal"?[o,7]:[7,o];each$f([0,1],function(w){x(l,w)&&(d[a[w]]=l[w]*g[w])});var y={width:n.getWidth(),height:n.getHeight()},S=this._rect=getLayoutRect(d,y);each$f([0,1],function(w){x(l,w)||(l[w]=S[a[w]]/g[w])});function x(w,c){return w[c]!=null&&w[c]!=="auto"}this._sw=l[0],this._sh=l[1]},r.prototype.dataToPoint=function(t,n){isArray$1(t)&&(t=t[0]),n==null&&(n=!0);var o=this.getDateInfo(t),a=this._rangeInfo,l=o.formatedDate;if(n&&!(o.time>=a.start.time&&o.time<a.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var d=o.day,g=this._getRangeInfo([a.start.time,l]).nthWeek;return this._orient==="vertical"?[this._rect.x+d*this._sw+this._sw/2,this._rect.y+g*this._sh+this._sh/2]:[this._rect.x+g*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]},r.prototype.pointToData=function(t){var n=this.pointToDate(t);return n&&n.time},r.prototype.dataToRect=function(t,n){var o=this.dataToPoint(t,n);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},r.prototype.pointToDate=function(t){var n=Math.floor((t[0]-this._rect.x)/this._sw)+1,o=Math.floor((t[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,n-1,a):this._getDateByWeeksAndDay(n,o-1,a)},r.prototype.convertToPixel=function(t,n,o){var a=getCoordSys(n);return a===this?a.dataToPoint(o):null},r.prototype.convertFromPixel=function(t,n,o){var a=getCoordSys(n);return a===this?a.pointToData(o):null},r.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var t=this._model.get("range"),n;if(isArray$1(t)&&t.length===1&&(t=t[0]),isArray$1(t))n=t;else{var o=t.toString();if(/^\d{4}$/.test(o)&&(n=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var a=this.getDateInfo(o),l=a.date;l.setMonth(l.getMonth()+1);var d=this.getNextNDay(l,-1);n=[a.formatedDate,d.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(n=[o,o])}if(!n)return t;var g=this._getRangeInfo(n);return g.start.time>g.end.time&&n.reverse(),n},r.prototype._getRangeInfo=function(t){var n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],o;n[0].time>n[1].time&&(o=!0,n.reverse());var a=Math.floor(n[1].time/PROXIMATE_ONE_DAY)-Math.floor(n[0].time/PROXIMATE_ONE_DAY)+1,l=new Date(n[0].time),d=l.getDate(),g=n[1].date.getDate();l.setDate(d+a-1);var y=l.getDate();if(y!==g)for(var S=l.getTime()-n[1].time>0?1:-1;(y=l.getDate())!==g&&(l.getTime()-n[1].time)*S>0;)a-=S,l.setDate(y-S);var x=Math.floor((a+n[0].day+6)/7),w=o?-x+1:x-1;return o&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:a,weeks:x,nthWeek:w,fweek:n[0].day,lweek:n[1].day}},r.prototype._getDateByWeeksAndDay=function(t,n,o){var a=this._getRangeInfo(o);if(t>a.weeks||t===0&&n<a.fweek||t===a.weeks&&n>a.lweek)return null;var l=(t-1)*7-a.fweek+n,d=new Date(a.start.time);return d.setDate(+a.start.d+l),this.getDateInfo(d)},r.create=function(t,n){var o=[];return t.eachComponent("calendar",function(a){var l=new r(a);o.push(l),a.coordinateSystem=l}),t.eachSeries(function(a){a.get("coordinateSystem")==="calendar"&&(a.coordinateSystem=o[a.get("calendarIndex")||0])}),o},r.dimensions=["time","value"],r}();function getCoordSys(r){var t=r.calendarModel,n=r.seriesModel,o=t?t.coordinateSystem:n?n.coordinateSystem:null;return o}const Calendar$1=Calendar;function install$m(r){r.registerComponentModel(CalendarModel$1),r.registerComponentView(CalendarView$1),r.registerCoordinateSystem("calendar",Calendar$1)}function setKeyInfoToNewElOption(r,t){var n=r.existing;if(t.id=r.keyInfo.id,!t.type&&n&&(t.type=n.type),t.parentId==null){var o=t.parentOption;o?t.parentId=o.id:n&&(t.parentId=n.parentId)}t.parentOption=null}function isSetLoc(r,t){var n;return each$f(t,function(o){r[o]!=null&&r[o]!=="auto"&&(n=!0)}),n}function mergeNewElOptionToExist(r,t,n){var o=extend({},n),a=r[t],l=n.$action||"merge";l==="merge"?a?(merge(a,o,!0),mergeLayoutParam(a,o,{ignoreSize:!0}),copyLayoutParams(n,a),copyTransitionInfo(n,a),copyTransitionInfo(n,a,"shape"),copyTransitionInfo(n,a,"style"),copyTransitionInfo(n,a,"extra"),n.clipPath=a.clipPath):r[t]=o:l==="replace"?r[t]=o:l==="remove"&&a&&(r[t]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(r,t,n){if(n&&(!r[n]&&t[n]&&(r[n]={}),r=r[n],t=t[n]),!(!r||!t))for(var o=n?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,a=0;a<o.length;a++){var l=o[a];r[l]==null&&t[l]!=null&&(r[l]=t[l])}}function setLayoutInfoToExist(r,t){if(r&&(r.hv=t.hv=[isSetLoc(t,["left","right"]),isSetLoc(t,["top","bottom"])],r.type==="group")){var n=r,o=t;n.width==null&&(n.width=o.width=0),n.height==null&&(n.height=o.height=0)}}var GraphicComponentModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.preventAutoZ=!0,n}return t.prototype.mergeOption=function(n,o){var a=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,n,o),this.option.elements=a},t.prototype.optionUpdated=function(n,o){var a=this.option,l=(o?a:n).elements,d=a.elements=o?[]:a.elements,g=[];this._flatten(l,g,null);var y=mappingToExists(d,g,"normalMerge"),S=this._elOptionsToUpdate=[];each$f(y,function(x,w){var c=x.newOption;c&&(S.push(c),setKeyInfoToNewElOption(x,c),mergeNewElOptionToExist(d,w,c),setLayoutInfoToExist(d[w],c))},this),a.elements=filter(d,function(x){return x&&delete x.$action,x!=null})},t.prototype._flatten=function(n,o,a){each$f(n,function(l){if(l){a&&(l.parentOption=a),o.push(l);var d=l.children;d&&d.length&&this._flatten(d,o,l),delete l.children}},this)},t.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},t.type="graphic",t.defaultOption={elements:[]},t}(ComponentModel$1),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$4,image:ZRImage$1,text:ZRText$1},inner$7=makeInner(),GraphicComponentView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this._elMap=createHashMap()},t.prototype.render=function(n,o,a){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,a)},t.prototype._updateElements=function(n){var o=n.useElOptionsToUpdate();if(o){var a=this._elMap,l=this.group,d=n.get("z"),g=n.get("zlevel");each$f(o,function(y){var S=convertOptionIdName(y.id,null),x=S!=null?a.get(S):null,w=convertOptionIdName(y.parentId,null),c=w!=null?a.get(w):l,A=y.type,R=y.style;A==="text"&&R&&y.hv&&y.hv[1]&&(R.textVerticalAlign=R.textBaseline=R.verticalAlign=R.align=null);var L=y.textContent,$=y.textConfig;if(R&&isEC4CompatibleStyle(R,A,!!$,!!L)){var O=convertFromEC4CompatibleStyle(R,A,!0);!$&&O.textConfig&&($=y.textConfig=O.textConfig),!L&&O.textContent&&(L=O.textContent)}var z=getCleanedElOption(y),V=y.$action||"merge",j=V==="merge",K=V==="replace";if(j){var Z=!x,q=x;Z?q=createEl(S,c,y.type,a):(q&&(inner$7(q).isNew=!1),stopPreviousKeyframeAnimationAndRestore(q)),q&&(applyUpdateTransition(q,z,n,{isInit:Z}),updateCommonAttrs(q,y,d,g))}else if(K){removeEl$1(x,y,a,n);var ie=createEl(S,c,y.type,a);ie&&(applyUpdateTransition(ie,z,n,{isInit:!0}),updateCommonAttrs(ie,y,d,g))}else V==="remove"&&(updateLeaveTo(x,y),removeEl$1(x,y,a,n));var te=a.get(S);if(te&&L)if(j){var oe=te.getTextContent();oe?oe.attr(L):te.setTextContent(new ZRText$1(L))}else K&&te.setTextContent(new ZRText$1(L));if(te){var re=y.clipPath;if(re){var he=re.type,_e=void 0,Z=!1;if(j){var me=te.getClipPath();Z=!me||inner$7(me).type!==he,_e=Z?newEl(he):me}else K&&(Z=!0,_e=newEl(he));te.setClipPath(_e),applyUpdateTransition(_e,re,n,{isInit:Z}),applyKeyframeAnimation(_e,re.keyframeAnimation,n)}var be=inner$7(te);te.setTextConfig($),be.option=y,setEventData(te,n,y),setTooltipConfig({el:te,componentModel:n,itemName:te.name,itemTooltipOption:y.tooltip}),applyKeyframeAnimation(te,y.keyframeAnimation,n)}})}},t.prototype._relocate=function(n,o){for(var a=n.option.elements,l=this.group,d=this._elMap,g=o.getWidth(),y=o.getHeight(),S=["x","y"],x=0;x<a.length;x++){var w=a[x],c=convertOptionIdName(w.id,null),A=c!=null?d.get(c):null;if(!(!A||!A.isGroup)){var R=A.parent,L=R===l,$=inner$7(A),O=inner$7(R);$.width=parsePercent($.option.width,L?g:O.width)||0,$.height=parsePercent($.option.height,L?y:O.height)||0}}for(var x=a.length-1;x>=0;x--){var w=a[x],c=convertOptionIdName(w.id,null),A=c!=null?d.get(c):null;if(A){var R=A.parent,O=inner$7(R),z=R===l?{width:g,height:y}:{width:O.width,height:O.height},V={},j=positionElement(A,w,z,null,{hv:w.hv,boundingMode:w.bounding},V);if(!inner$7(A).isNew&&j){for(var K=w.transition,Z={},q=0;q<S.length;q++){var ie=S[q],te=V[ie];K&&(isTransitionAll(K)||indexOf(K,ie)>=0)?Z[ie]=te:A[ie]=te}updateProps$1(A,Z,n,0)}else A.attr(V)}}},t.prototype._clear=function(){var n=this,o=this._elMap;o.each(function(a){removeEl$1(a,inner$7(a).option,o,n._lastGraphicModel)}),this._elMap=createHashMap()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(ComponentView$1);function newEl(r){var t=hasOwn(nonShapeGraphicElements,r)?nonShapeGraphicElements[r]:getShapeClass(r),n=new t({});return inner$7(n).type=r,n}function createEl(r,t,n,o){var a=newEl(n);return t.add(a),o.set(r,a),inner$7(a).id=r,inner$7(a).isNew=!0,a}function removeEl$1(r,t,n,o){var a=r&&r.parent;a&&(r.type==="group"&&r.traverse(function(l){removeEl$1(l,t,n,o)}),applyLeaveTransition(r,t,o),n.removeKey(inner$7(r).id))}function updateCommonAttrs(r,t,n,o){r.isGroup||each$f([["cursor",Displayable$1.prototype.cursor],["zlevel",o||0],["z",n||0],["z2",0]],function(a){var l=a[0];hasOwn(t,l)?r[l]=retrieve2(t[l],a[1]):r[l]==null&&(r[l]=a[1])}),each$f(keys(t),function(a){if(a.indexOf("on")===0){var l=t[a];r[a]=isFunction(l)?l:null}}),hasOwn(t,"draggable")&&(r.draggable=t.draggable),t.name!=null&&(r.name=t.name),t.id!=null&&(r.id=t.id)}function getCleanedElOption(r){return r=extend({},r),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(t){delete r[t]}),r}function setEventData(r,t,n){var o=getECData(r).eventData;!r.silent&&!r.ignore&&!o&&(o=getECData(r).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:r.name}),o&&(o.info=n.info)}function install$l(r){r.registerComponentModel(GraphicComponentModel),r.registerComponentView(GraphicComponentView),r.registerPreprocessor(function(t){var n=t.graphic;isArray$1(n)?!n[0]||!n[0].elements?t.graphic=[{elements:n}]:t.graphic=[t.graphic[0]]:n&&!n.elements&&(t.graphic=[{elements:[n]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(r){var t=r.get("coordinateSystem");return indexOf(SERIES_COORDS,t)>=0}function getAxisMainType(r){return r+"Axis"}function findEffectedDataZooms(r,t){var n=createHashMap(),o=[],a=createHashMap();r.eachComponent({mainType:"dataZoom",query:t},function(x){a.get(x.uid)||g(x)});var l;do l=!1,r.eachComponent("dataZoom",d);while(l);function d(x){!a.get(x.uid)&&y(x)&&(g(x),l=!0)}function g(x){a.set(x.uid,!0),o.push(x),S(x)}function y(x){var w=!1;return x.eachTargetAxis(function(c,A){var R=n.get(c);R&&R[A]&&(w=!0)}),w}function S(x){x.eachTargetAxis(function(w,c){(n.get(w)||n.set(w,[]))[c]=!0})}return o}function collectReferCoordSysModelInfo(r){var t=r.ecModel,n={infoList:[],infoMap:createHashMap()};return r.eachTargetAxis(function(o,a){var l=t.getComponent(getAxisMainType(o),a);if(l){var d=l.getCoordSysModel();if(d){var g=d.uid,y=n.infoMap.get(g);y||(y={model:d,axisModels:[]},n.infoList.push(y),n.infoMap.set(g,y)),y.axisModels.push(l)}}}),n}var DataZoomAxisInfo=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},r}(),DataZoomModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return t.prototype.init=function(n,o,a){var l=retrieveRawOption(n);this.settledOption=l,this.mergeDefaultAndTheme(n,a),this._doInit(l)},t.prototype.mergeOption=function(n){var o=retrieveRawOption(n);merge(this.option,n,!0),merge(this.settledOption,o,!0),this._doInit(o)},t.prototype._doInit=function(n){var o=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var a=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(l,d){this._rangePropMode[d]==="value"&&(o[l[0]]=a[l[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var n=this.get("orient",!0),o=this._targetAxisInfoMap=createHashMap(),a=this._fillSpecifiedTargetAxis(o);a?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(o,this._orient)),this._noTarget=!0,o.each(function(l){l.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(n){var o=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(a){var l=this.getReferringComponents(getAxisMainType(a),MULTIPLE_REFERRING);if(l.specified){o=!0;var d=new DataZoomAxisInfo;each$f(l.models,function(g){d.add(g.componentIndex)}),n.set(a,d)}},this),o},t.prototype._fillAutoTargetAxisByOrient=function(n,o){var a=this.ecModel,l=!0;if(l){var d=o==="vertical"?"y":"x",g=a.findComponents({mainType:d+"Axis"});y(g,d)}if(l){var g=a.findComponents({mainType:"singleAxis",filter:function(x){return x.get("orient",!0)===o}});y(g,"single")}function y(S,x){var w=S[0];if(w){var c=new DataZoomAxisInfo;if(c.add(w.componentIndex),n.set(x,c),l=!1,x==="x"||x==="y"){var A=w.getReferringComponents("grid",SINGLE_REFERRING).models[0];A&&each$f(S,function(R){w.componentIndex!==R.componentIndex&&A===R.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&c.add(R.componentIndex)})}}}l&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(S){if(l){var x=a.findComponents({mainType:getAxisMainType(S),filter:function(c){return c.get("type",!0)==="category"}});if(x[0]){var w=new DataZoomAxisInfo;w.add(x[0].componentIndex),n.set(S,w),l=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(o){!n&&(n=o)},this),n==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var o=this.ecModel.option;this.option.throttle=o.animation&&o.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(n){var o=this._rangePropMode,a=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(l,d){var g=n[l[0]]!=null,y=n[l[1]]!=null;g&&!y?o[d]="percent":!g&&y?o[d]="value":a?o[d]=a[d]:g&&(o[d]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(o,a){n==null&&(n=this.ecModel.getComponent(getAxisMainType(o),a))},this),n},t.prototype.eachTargetAxis=function(n,o){this._targetAxisInfoMap.each(function(a,l){each$f(a.indexList,function(d){n.call(o,l,d)})})},t.prototype.getAxisProxy=function(n,o){var a=this.getAxisModel(n,o);if(a)return a.__dzAxisProxy},t.prototype.getAxisModel=function(n,o){var a=this._targetAxisInfoMap.get(n);if(a&&a.indexMap[o])return this.ecModel.getComponent(getAxisMainType(n),o)},t.prototype.setRawRange=function(n){var o=this.option,a=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(l){(n[l[0]]!=null||n[l[1]]!=null)&&(o[l[0]]=a[l[0]]=n[l[0]],o[l[1]]=a[l[1]]=n[l[1]])},this),this._updateRangeUse(n)},t.prototype.setCalculatedRange=function(n){var o=this.option;each$f(["start","startValue","end","endValue"],function(a){o[a]=n[a]})},t.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},t.prototype.getValueRange=function(n,o){if(n==null&&o==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(n,o).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var o,a=this._targetAxisInfoMap.keys(),l=0;l<a.length;l++)for(var d=a[l],g=this._targetAxisInfoMap.get(d),y=0;y<g.indexList.length;y++){var S=this.getAxisProxy(d,g.indexList[y]);if(S.hostedBy(this))return S;o||(o=S)}return o},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(ComponentModel$1);function retrieveRawOption(r){var t={};return each$f(["start","end","startValue","endValue","throttle"],function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t}const DataZoomModel$1=DataZoomModel;var SelectDataZoomModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.select",t}(DataZoomModel$1);const SelectZoomModel=SelectDataZoomModel;var DataZoomView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a,l){this.dataZoomModel=n,this.ecModel=o,this.api=a},t.type="dataZoom",t}(ComponentView$1);const DataZoomView$1=DataZoomView;var SelectDataZoomView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.select",t}(DataZoomView$1);const SelectZoomView=SelectDataZoomView;var each$7=each$f,asc$1=asc$2,AxisProxy=function(){function r(t,n,o,a){this._dimName=t,this._axisIndex=n,this.ecModel=a,this._dataZoomModel=o}return r.prototype.hostedBy=function(t){return this._dataZoomModel===t},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(n){if(isCoordSupported(n)){var o=getAxisMainType(this._dimName),a=n.getReferringComponents(o,SINGLE_REFERRING).models[0];a&&this._axisIndex===a.componentIndex&&t.push(n)}},this),t},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},r.prototype.calculateDataWindow=function(t){var n=this._dataExtent,o=this.getAxisModel(),a=o.axis.scale,l=this._dataZoomModel.getRangePropMode(),d=[0,100],g=[],y=[],S;each$7(["start","end"],function(c,A){var R=t[c],L=t[c+"Value"];l[A]==="percent"?(R==null&&(R=d[A]),L=a.parse(linearMap$2(R,d,n))):(S=!0,L=L==null?n[A]:a.parse(L),R=linearMap$2(L,n,d)),y[A]=L==null||isNaN(L)?n[A]:L,g[A]=R==null||isNaN(R)?d[A]:R}),asc$1(y),asc$1(g);var x=this._minMaxSpan;S?w(y,g,n,d,!1):w(g,y,d,n,!0);function w(c,A,R,L,$){var O=$?"Span":"ValueSpan";sliderMove(0,c,R,"all",x["min"+O],x["max"+O]);for(var z=0;z<2;z++)A[z]=linearMap$2(c[z],R,L,!0),$&&(A[z]=a.parse(A[z]))}return{valueWindow:y,percentWindow:g}},r.prototype.reset=function(t){if(t===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,n),this._updateMinMaxSpan();var o=this.calculateDataWindow(t.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(t,n){if(t!==this._dataZoomModel)return;var o=this._dimName,a=this.getTargetSeriesModels(),l=t.get("filterMode"),d=this._valueWindow;if(l==="none")return;each$7(a,function(y){var S=y.getData(),x=S.mapDimensionsAll(o);if(x.length){if(l==="weakFilter"){var w=S.getStore(),c=map$1(x,function(A){return S.getDimensionIndex(A)},S);S.filterSelf(function(A){for(var R,L,$,O=0;O<x.length;O++){var z=w.get(c[O],A),V=!isNaN(z),j=z<d[0],K=z>d[1];if(V&&!j&&!K)return!0;V&&($=!0),j&&(R=!0),K&&(L=!0)}return $&&R&&L})}else each$7(x,function(A){if(l==="empty")y.setData(S=S.map(A,function(L){return g(L)?L:NaN}));else{var R={};R[A]=d,S.selectRange(R)}});each$7(x,function(A){S.setApproximateExtent(d,A)})}});function g(y){return y>=d[0]&&y<=d[1]}},r.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},n=this._dataZoomModel,o=this._dataExtent;each$7(["min","max"],function(a){var l=n.get(a+"Span"),d=n.get(a+"ValueSpan");d!=null&&(d=this.getAxisModel().axis.scale.parse(d)),d!=null?l=linearMap$2(o[0]+d,o,[0,100],!0):l!=null&&(d=linearMap$2(l,[0,100],o,!0)-o[0]),t[a+"Span"]=l,t[a+"ValueSpan"]=d},this)},r.prototype._setAxisModel=function(){var t=this.getAxisModel(),n=this._percentWindow,o=this._valueWindow;if(n){var a=getPixelPrecision(o,[0,500]);a=Math.min(a,20);var l=t.axis.scale.rawExtentInfo;n[0]!==0&&l.setDeterminedMinMax("min",+o[0].toFixed(a)),n[1]!==100&&l.setDeterminedMinMax("max",+o[1].toFixed(a)),l.freeze()}},r}();function calculateDataExtent(r,t,n){var o=[1/0,-1/0];each$7(n,function(d){unionAxisExtentFromData(o,d.getData(),t)});var a=r.getAxisModel(),l=ensureScaleRawExtentInfo(a.axis.scale,a,o).calculate();return[l.min,l.max]}const AxisProxy$1=AxisProxy;var dataZoomProcessor={getTargetSeries:function(r){function t(a){r.eachComponent("dataZoom",function(l){l.eachTargetAxis(function(d,g){var y=r.getComponent(getAxisMainType(d),g);a(d,g,y,l)})})}t(function(a,l,d,g){d.__dzAxisProxy=null});var n=[];t(function(a,l,d,g){d.__dzAxisProxy||(d.__dzAxisProxy=new AxisProxy$1(a,l,g,r),n.push(d.__dzAxisProxy))});var o=createHashMap();return each$f(n,function(a){each$f(a.getTargetSeriesModels(),function(l){o.set(l.uid,l)})}),o},overallReset:function(r,t){r.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(o,a){n.getAxisProxy(o,a).reset(n)}),n.eachTargetAxis(function(o,a){n.getAxisProxy(o,a).filterData(n,t)})}),r.eachComponent("dataZoom",function(n){var o=n.findRepresentativeAxisProxy();if(o){var a=o.getDataPercentWindow(),l=o.getDataValueWindow();n.setCalculatedRange({start:a[0],end:a[1],startValue:l[0],endValue:l[1]})}})}};const dataZoomProcessor$1=dataZoomProcessor;function installDataZoomAction(r){r.registerAction("dataZoom",function(t,n){var o=findEffectedDataZooms(n,t);each$f(o,function(a){a.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var installed$1=!1;function installCommon$1(r){installed$1||(installed$1=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor$1),installDataZoomAction(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(r){r.registerComponentModel(SelectZoomModel),r.registerComponentView(SelectZoomView),installCommon$1(r)}var ToolboxFeature=function(){function r(){}return r}(),features={};function registerFeature(r,t){features[r]=t}function getFeature(r){return features[r]}var ToolboxModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;each$f(this.option.feature,function(o,a){var l=getFeature(a);l&&(l.getDefaultOption&&(l.defaultOption=l.getDefaultOption(n)),merge(o,l.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(ComponentModel$1);const ToolboxModel$1=ToolboxModel;function layout(r,t,n){var o=t.getBoxLayoutParams(),a=t.get("padding"),l={width:n.getWidth(),height:n.getHeight()},d=getLayoutRect(o,l,a);box(t.get("orient"),r,t.get("itemGap"),d.width,d.height),positionElement(r,o,l,a)}function makeBackground(r,t){var n=normalizeCssArray(t.get("padding")),o=t.getItemStyle(["color","opacity"]);return o.fill=t.get("backgroundColor"),r=new Rect$3({shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[1]+n[3],height:r.height+n[0]+n[2],r:t.get("borderRadius")},style:o,silent:!0,z2:-1}),r}var ToolboxView=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(n,o,a,l){var d=this.group;if(d.removeAll(),!n.get("show"))return;var g=+n.get("itemSize"),y=n.get("orient")==="vertical",S=n.get("feature")||{},x=this._features||(this._features={}),w=[];each$f(S,function(R,L){w.push(L)}),new DataDiffer$1(this._featureNames||[],w).add(c).update(c).remove(curry$1(c,null)).execute(),this._featureNames=w;function c(R,L){var $=w[R],O=w[L],z=S[$],V=new Model$1(z,n,n.ecModel),j;if(l&&l.newTitle!=null&&l.featureName===$&&(z.title=l.newTitle),$&&!O){if(isUserFeatureName($))j={onclick:V.option.onclick,featureName:$};else{var K=getFeature($);if(!K)return;j=new K}x[$]=j}else if(j=x[O],!j)return;j.uid=getUID("toolbox-feature"),j.model=V,j.ecModel=o,j.api=a;var Z=j instanceof ToolboxFeature;if(!$&&O){Z&&j.dispose&&j.dispose(o,a);return}if(!V.get("show")||Z&&j.unusable){Z&&j.remove&&j.remove(o,a);return}A(V,j,$),V.setIconStatus=function(q,ie){var te=this.option,oe=this.iconPaths;te.iconStatus=te.iconStatus||{},te.iconStatus[q]=ie,oe[q]&&(ie==="emphasis"?enterEmphasis:leaveEmphasis)(oe[q])},j instanceof ToolboxFeature&&j.render&&j.render(V,o,a,l)}function A(R,L,$){var O=R.getModel("iconStyle"),z=R.getModel(["emphasis","iconStyle"]),V=L instanceof ToolboxFeature&&L.getIcons?L.getIcons():R.get("icon"),j=R.get("title")||{},K,Z;isString(V)?(K={},K[$]=V):K=V,isString(j)?(Z={},Z[$]=j):Z=j;var q=R.iconPaths={};each$f(K,function(ie,te){var oe=createIcon(ie,{},{x:-g/2,y:-g/2,width:g,height:g});oe.setStyle(O.getItemStyle());var re=oe.ensureState("emphasis");re.style=z.getItemStyle();var he=new ZRText$1({style:{text:Z[te],align:z.get("textAlign"),borderRadius:z.get("textBorderRadius"),padding:z.get("textPadding"),fill:null},ignore:!0});oe.setTextContent(he),setTooltipConfig({el:oe,componentModel:n,itemName:te,formatterParamsExtra:{title:Z[te]}}),oe.__title=Z[te],oe.on("mouseover",function(){var _e=z.getItemStyle(),me=y?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";he.setStyle({fill:z.get("textFill")||_e.fill||_e.stroke||"#000",backgroundColor:z.get("textBackgroundColor")}),oe.setTextConfig({position:z.get("textPosition")||me}),he.ignore=!n.get("showTitle"),a.enterEmphasis(this)}).on("mouseout",function(){R.get(["iconStatus",te])!=="emphasis"&&a.leaveEmphasis(this),he.hide()}),(R.get(["iconStatus",te])==="emphasis"?enterEmphasis:leaveEmphasis)(oe),d.add(oe),oe.on("click",bind$1(L.onclick,L,o,a,te)),q[te]=oe})}layout(d,n,a),d.add(makeBackground(d.getBoundingRect(),n)),y||d.eachChild(function(R){var L=R.__title,$=R.ensureState("emphasis"),O=$.textConfig||($.textConfig={}),z=R.getTextContent(),V=z&&z.ensureState("emphasis");if(V&&!isFunction(V)&&L){var j=V.style||(V.style={}),K=getBoundingRect(L,ZRText$1.makeFont(j)),Z=R.x+d.x,q=R.y+d.y+g,ie=!1;q+K.height>a.getHeight()&&(O.position="top",ie=!0);var te=ie?-5-K.height:g+10;Z+K.width/2>a.getWidth()?(O.position=["100%",te],j.align="right"):Z-K.width/2<0&&(O.position=[0,te],j.align="left")}})},t.prototype.updateView=function(n,o,a,l){each$f(this._features,function(d){d instanceof ToolboxFeature&&d.updateView&&d.updateView(d.model,o,a,l)})},t.prototype.remove=function(n,o){each$f(this._features,function(a){a instanceof ToolboxFeature&&a.remove&&a.remove(n,o)}),this.group.removeAll()},t.prototype.dispose=function(n,o){each$f(this._features,function(a){a instanceof ToolboxFeature&&a.dispose&&a.dispose(n,o)})},t.type="toolbox",t}(ComponentView$1);function isUserFeatureName(r){return r.indexOf("my")===0}const ToolboxView$1=ToolboxView;var SaveAsImage=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(n,o){var a=this.model,l=a.get("name")||n.get("title.0.text")||"echarts",d=o.getZr().painter.getType()==="svg",g=d?"svg":a.get("type",!0)||"png",y=o.getConnectedDataURL({type:g,backgroundColor:a.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),S=env$1.browser;if(isFunction(MouseEvent)&&(S.newEdge||!S.ie&&!S.edge)){var x=document.createElement("a");x.download=l+"."+g,x.target="_blank",x.href=y;var w=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});x.dispatchEvent(w)}else if(window.navigator.msSaveOrOpenBlob||d){var c=y.split(","),A=c[0].indexOf("base64")>-1,R=d?decodeURIComponent(c[1]):c[1];A&&(R=window.atob(R));var L=l+"."+g;if(window.navigator.msSaveOrOpenBlob){for(var $=R.length,O=new Uint8Array($);$--;)O[$]=R.charCodeAt($);var z=new Blob([O]);window.navigator.msSaveOrOpenBlob(z,L)}else{var V=document.createElement("iframe");document.body.appendChild(V);var j=V.contentWindow,K=j.document;K.open("image/svg+xml","replace"),K.write(R),K.close(),j.focus(),K.execCommand("SaveAs",!0,L),document.body.removeChild(V)}}else{var Z=a.get("lang"),q='<body style="margin:0;"><img src="'+y+'" style="max-width:100%;" title="'+(Z&&Z[0]||"")+'" /></body>',ie=window.open();ie.document.write(q),ie.document.title=l}},t.getDefaultOption=function(n){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},t}(ToolboxFeature);const SaveAsImage$1=SaveAsImage;var INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getIcons=function(){var n=this.model,o=n.get("icon"),a={};return each$f(n.get("type"),function(l){o[l]&&(a[l]=o[l])}),a},t.getDefaultOption=function(n){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},t.prototype.onclick=function(n,o,a){var l=this.model,d=l.get(["seriesIndex",a]);if(seriesOptGenreator[a]){var g={series:[]},y=function(w){var c=w.subType,A=w.id,R=seriesOptGenreator[a](c,A,w,l);R&&(defaults(R,w.option),g.series.push(R));var L=w.coordinateSystem;if(L&&L.type==="cartesian2d"&&(a==="line"||a==="bar")){var $=L.getAxesByScale("ordinal")[0];if($){var O=$.dim,z=O+"Axis",V=w.getReferringComponents(z,SINGLE_REFERRING).models[0],j=V.componentIndex;g[z]=g[z]||[];for(var K=0;K<=j;K++)g[z][j]=g[z][j]||{};g[z][j].boundaryGap=a==="bar"}}};each$f(radioTypes,function(w){indexOf(w,a)>=0&&each$f(w,function(c){l.setIconStatus(c,"normal")})}),l.setIconStatus(a,"emphasis"),n.eachComponent({mainType:"series",query:d==null?null:{seriesIndex:d}},y);var S,x=a;a==="stack"&&(S=merge({stack:l.option.title.tiled,tiled:l.option.title.stack},l.option.title),l.get(["iconStatus",a])!=="emphasis"&&(x="tiled")),o.dispatchAction({type:"changeMagicType",currentType:x,newOption:g,newTitle:S,featureName:"magicType"})}},t}(ToolboxFeature),seriesOptGenreator={line:function(r,t,n,o){if(r==="bar")return merge({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(r,t,n,o){if(r==="line")return merge({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(r,t,n,o){var a=n.get("stack")===INNER_STACK_KEYWORD;if(r==="line"||r==="bar")return o.setIconStatus("stack",a?"normal":"emphasis"),merge({id:t,stack:a?"":INNER_STACK_KEYWORD},o.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,t){t.mergeOption(r.newOption)});const MagicType$1=MagicType;var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(r){var t={},n=[],o=[];return r.eachRawSeries(function(a){var l=a.coordinateSystem;if(l&&(l.type==="cartesian2d"||l.type==="polar")){var d=l.getBaseAxis();if(d.type==="category"){var g=d.dim+"_"+d.index;t[g]||(t[g]={categoryAxis:d,valueAxis:l.getOtherAxis(d),series:[]},o.push({axisDim:d.dim,axisIndex:d.index})),t[g].series.push(a)}else n.push(a)}else n.push(a)}),{seriesGroupByCategoryAxis:t,other:n,meta:o}}function assembleSeriesWithCategoryAxis(r){var t=[];return each$f(r,function(n,o){var a=n.categoryAxis,l=n.valueAxis,d=l.dim,g=[" "].concat(map$1(n.series,function(A){return A.name})),y=[a.model.getCategories()];each$f(n.series,function(A){var R=A.getRawData();y.push(A.getRawData().mapArray(R.mapDimension(d),function(L){return L}))});for(var S=[g.join(ITEM_SPLITER)],x=0;x<y[0].length;x++){for(var w=[],c=0;c<y.length;c++)w.push(y[c][x]);S.push(w.join(ITEM_SPLITER))}t.push(S.join(`
`))}),t.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(r){return map$1(r,function(t){var n=t.getRawData(),o=[t.name],a=[];return n.each(n.dimensions,function(){for(var l=arguments.length,d=arguments[l-1],g=n.getName(d),y=0;y<l-1;y++)a[y]=arguments[y];o.push((g?g+ITEM_SPLITER:"")+a.join(ITEM_SPLITER))}),o.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(r){var t=groupSeries(r);return{value:filter([assembleSeriesWithCategoryAxis(t.seriesGroupByCategoryAxis),assembleOtherSeries(t.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:t.meta}}function trim(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(r){var t=r.slice(0,r.indexOf(`
`));if(t.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(r){for(var t=r.split(/\n+/g),n=trim(t.shift()).split(itemSplitRegex),o=[],a=map$1(n,function(y){return{name:y,data:[]}}),l=0;l<t.length;l++){var d=trim(t[l]).split(itemSplitRegex);o.push(d.shift());for(var g=0;g<d.length;g++)a[g]&&(a[g].data[l]=d[g])}return{series:a,categories:o}}function parseListContents(r){for(var t=r.split(/\n+/g),n=trim(t.shift()),o=[],a=0;a<t.length;a++){var l=trim(t[a]);if(l){var d=l.split(itemSplitRegex),g="",y=void 0,S=!1;isNaN(d[0])?(S=!0,g=d[0],d=d.slice(1),o[a]={name:g,value:[]},y=o[a].value):y=o[a]=[];for(var x=0;x<d.length;x++)y.push(+d[x]);y.length===1&&(S?o[a].value=y[0]:o[a]=y[0])}}return{name:n,data:o}}function parseContents(r,t){var n=r.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),o={series:[]};return each$f(n,function(a,l){if(isTSVFormat(a)){var d=parseTSVContents(a),g=t[l],y=g.axisDim+"Axis";g&&(o[y]=o[y]||[],o[y][g.axisIndex]={data:d.categories},o.series=o.series.concat(d.series))}else{var d=parseListContents(a);o.series.push(d)}}),o}var DataView=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(n,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var a=o.getDom(),l=this.model;this._dom&&a.removeChild(this._dom);var d=document.createElement("div");d.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",d.style.backgroundColor=l.get("backgroundColor")||"#fff";var g=document.createElement("h4"),y=l.get("lang")||[];g.innerHTML=y[0]||l.get("title"),g.style.cssText="margin:10px 20px",g.style.color=l.get("textColor");var S=document.createElement("div"),x=document.createElement("textarea");S.style.cssText="overflow:auto";var w=l.get("optionToContent"),c=l.get("contentToOption"),A=getContentFromModel(n);if(isFunction(w)){var R=w(o.getOption());isString(R)?S.innerHTML=R:isDom(R)&&S.appendChild(R)}else{x.readOnly=l.get("readOnly");var L=x.style;L.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",L.color=l.get("textColor"),L.borderColor=l.get("textareaBorderColor"),L.backgroundColor=l.get("textareaColor"),x.value=A.value,S.appendChild(x)}var $=A.meta,O=document.createElement("div");O.style.cssText="position:absolute;bottom:5px;left:0;right:0";var z="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",V=document.createElement("div"),j=document.createElement("div");z+=";background-color:"+l.get("buttonColor"),z+=";color:"+l.get("buttonTextColor");var K=this;function Z(){a.removeChild(d),K._dom=null}addEventListener(V,"click",Z),addEventListener(j,"click",function(){if(c==null&&w!=null||c!=null&&w==null){Z();return}var q;try{isFunction(c)?q=c(S,o.getOption()):q=parseContents(x.value,$)}catch(ie){throw Z(),new Error("Data view format error "+ie)}q&&o.dispatchAction({type:"changeDataView",newOption:q}),Z()}),V.innerHTML=y[1],j.innerHTML=y[2],j.style.cssText=V.style.cssText=z,!l.get("readOnly")&&O.appendChild(j),O.appendChild(V),d.appendChild(g),d.appendChild(S),d.appendChild(O),S.style.height=a.clientHeight-80+"px",a.appendChild(d),this._dom=d},t.prototype.remove=function(n,o){this._dom&&o.getDom().removeChild(this._dom)},t.prototype.dispose=function(n,o){this.remove(n,o)},t.getDefaultOption=function(n){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},t}(ToolboxFeature);function tryMergeDataOption(r,t){return map$1(r,function(n,o){var a=t&&t[o];if(isObject$3(a)&&!isArray$1(a)){var l=isObject$3(n)&&!isArray$1(n);l||(n={value:n});var d=a.name!=null&&n.name==null;return n=defaults(n,a),d&&delete n.name,n}else return n})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,t){var n=[];each$f(r.newOption.series,function(o){var a=t.getSeriesByName(o.name)[0];if(!a)n.push(extend({type:"scatter"},o));else{var l=a.get("data");n.push({name:o.name,data:tryMergeDataOption(o.data,l)})}}),t.mergeOption(defaults({series:n},r.newOption))});const DataView$1=DataView;var each$6=each$f,inner$6=makeInner();function push(r,t){var n=getStoreSnapshots(r);each$6(t,function(o,a){for(var l=n.length-1;l>=0;l--){var d=n[l];if(d[a])break}if(l<0){var g=r.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(g){var y=g.getPercentRange();n[0][a]={dataZoomId:a,start:y[0],end:y[1]}}}}),n.push(t)}function pop(r){var t=getStoreSnapshots(r),n=t[t.length-1];t.length>1&&t.pop();var o={};return each$6(n,function(a,l){for(var d=t.length-1;d>=0;d--)if(a=t[d][l],a){o[l]=a;break}}),o}function clear(r){inner$6(r).snapshots=null}function count(r){return getStoreSnapshots(r).length}function getStoreSnapshots(r){var t=inner$6(r);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var RestoreOption=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(n,o){clear(n),o.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(n){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return o},t}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,t){t.resetOption("recreate")});const Restore=RestoreOption;var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function r(t,n,o){var a=this;this._targetInfoList=[];var l=parseFinder(n,t);each$f(targetInfoBuilders,function(d,g){(!o||!o.include||indexOf(o.include,g)>=0)&&d(l,a._targetInfoList)})}return r.prototype.setOutputRanges=function(t,n){return this.matchOutputRanges(t,n,function(o,a,l){if((o.coordRanges||(o.coordRanges=[])).push(a),!o.coordRange){o.coordRange=a;var d=coordConvert[o.brushType](0,l,a);o.__rangeOffset={offset:diffProcessor[o.brushType](d.values,o.range,[1,1]),xyMinMax:d.xyMinMax}}}),t},r.prototype.matchOutputRanges=function(t,n,o){each$f(t,function(a){var l=this.findTargetInfo(a,n);l&&l!==!0&&each$f(l.coordSyses,function(d){var g=coordConvert[a.brushType](1,d,a.range,!0);o(a,g.values,d,n)})},this)},r.prototype.setInputRanges=function(t,n){each$f(t,function(o){var a=this.findTargetInfo(o,n);if(o.range=o.range||[],a&&a!==!0){o.panelId=a.panelId;var l=coordConvert[o.brushType](0,a.coordSys,o.coordRange),d=o.__rangeOffset;o.range=d?diffProcessor[o.brushType](l.values,d.offset,getScales(l.xyMinMax,d.xyMinMax)):l.values}},this)},r.prototype.makePanelOpts=function(t,n){return map$1(this._targetInfoList,function(o){var a=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:n?n(o):null,clipPath:makeRectPanelClipPath(a),isTargetByCursor:makeRectIsTargetByCursor(a,t,o.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(a)}})},r.prototype.controlSeries=function(t,n,o){var a=this.findTargetInfo(t,o);return a===!0||a&&indexOf(a.coordSyses,n.coordinateSystem)>=0},r.prototype.findTargetInfo=function(t,n){for(var o=this._targetInfoList,a=parseFinder(n,t),l=0;l<o.length;l++){var d=o[l],g=t.panelId;if(g){if(d.panelId===g)return d}else for(var y=0;y<targetInfoMatchers.length;y++)if(targetInfoMatchers[y](a,d))return d}return!0},r}();function formatMinMax(r){return r[0]>r[1]&&r.reverse(),r}function parseFinder(r,t){return parseFinder$1(r,t,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(r,t){var n=r.xAxisModels,o=r.yAxisModels,a=r.gridModels,l=createHashMap(),d={},g={};!n&&!o&&!a||(each$f(n,function(y){var S=y.axis.grid.model;l.set(S.id,S),d[S.id]=!0}),each$f(o,function(y){var S=y.axis.grid.model;l.set(S.id,S),g[S.id]=!0}),each$f(a,function(y){l.set(y.id,y),d[y.id]=!0,g[y.id]=!0}),l.each(function(y){var S=y.coordinateSystem,x=[];each$f(S.getCartesians(),function(w,c){(indexOf(n,w.getAxis("x").model)>=0||indexOf(o,w.getAxis("y").model)>=0)&&x.push(w)}),t.push({panelId:"grid--"+y.id,gridModel:y,coordSysModel:y,coordSys:x[0],coordSyses:x,getPanelRect:panelRectBuilders.grid,xAxisDeclared:d[y.id],yAxisDeclared:g[y.id]})}))},geo:function(r,t){each$f(r.geoModels,function(n){var o=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:o,coordSyses:[o],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(r,t){var n=r.xAxisModel,o=r.yAxisModel,a=r.gridModel;return!a&&n&&(a=n.axis.grid.model),!a&&o&&(a=o.axis.grid.model),a&&a===t.gridModel},function(r,t){var n=r.geoModel;return n&&n===t.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,t=r.getBoundingRect().clone();return t.applyTransform(getTransform$1(r)),t}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(r,t,n,o){var a=r?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),l=r?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),d=[formatMinMax([a[0],l[0]]),formatMinMax([a[1],l[1]])];return{values:d,xyMinMax:d}},polygon:function(r,t,n,o){var a=[[1/0,-1/0],[1/0,-1/0]],l=map$1(n,function(d){var g=r?t.pointToData(d,o):t.dataToPoint(d,o);return a[0][0]=Math.min(a[0][0],g[0]),a[1][0]=Math.min(a[1][0],g[1]),a[0][1]=Math.max(a[0][1],g[0]),a[1][1]=Math.max(a[1][1],g[1]),g});return{values:l,xyMinMax:a}}};function axisConvert(r,t,n,o){var a=n.getAxis(["x","y"][r]),l=formatMinMax(map$1([0,1],function(g){return t?a.coordToData(a.toLocalCoord(o[g]),!0):a.toGlobalCoord(a.dataToCoord(o[g]))})),d=[];return d[r]=l,d[1-r]=[NaN,NaN],{values:l,xyMinMax:d}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(r,t,n){return[[r[0][0]-n[0]*t[0][0],r[0][1]-n[0]*t[0][1]],[r[1][0]-n[1]*t[1][0],r[1][1]-n[1]*t[1][1]]]},polygon:function(r,t,n){return map$1(r,function(o,a){return[o[0]-n[0]*t[a][0],o[1]-n[1]*t[a][1]]})}};function axisDiffProcessor(r,t,n,o){return[t[0]-o[r]*n[0],t[1]-o[r]*n[1]]}function getScales(r,t){var n=getSize(r),o=getSize(t),a=[n[0]/o[0],n[1]/o[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}function getSize(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}const BrushTargetManager$1=BrushTargetManager;var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(n,o,a,l){this._brushController||(this._brushController=new BrushController$1(a.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(n,o,this,l,a),updateBackBtnStatus(n,o)},t.prototype.onclick=function(n,o,a){handlers[a].call(this)},t.prototype.remove=function(n,o){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(n,o){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(n){var o=n.areas;if(!n.isEnd||!o.length)return;var a={},l=this.ecModel;this._brushController.updateCovers([]);var d=new BrushTargetManager$1(makeAxisFinder(this.model),l,{include:["grid"]});d.matchOutputRanges(o,l,function(S,x,w){if(w.type==="cartesian2d"){var c=S.brushType;c==="rect"?(g("x",w,x[0]),g("y",w,x[1])):g({lineX:"x",lineY:"y"}[c],w,x)}}),push(l,a),this._dispatchZoomAction(a);function g(S,x,w){var c=x.getAxis(S),A=c.model,R=y(S,A,l),L=R.findRepresentativeAxisProxy(A).getMinMaxSpan();(L.minValueSpan!=null||L.maxValueSpan!=null)&&(w=sliderMove(0,w.slice(),c.scale.getExtent(),0,L.minValueSpan,L.maxValueSpan)),R&&(a[R.id]={dataZoomId:R.id,startValue:w[0],endValue:w[1]})}function y(S,x,w){var c;return w.eachComponent({mainType:"dataZoom",subType:"select"},function(A){var R=A.getAxisModel(S,x.componentIndex);R&&(c=A)}),c}},t.prototype._dispatchZoomAction=function(n){var o=[];each$5(n,function(a,l){o.push(clone$4(a))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},t.getDefaultOption=function(n){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},t}(ToolboxFeature),handlers={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(r){var t={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function updateBackBtnStatus(r,t){r.setIconStatus("back",count(t)>1?"emphasis":"normal")}function updateZoomBtnStatus(r,t,n,o,a){var l=n._isZoomActive;o&&o.type==="takeGlobalCursor"&&(l=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),n._isZoomActive=l,r.setIconStatus("zoom",l?"emphasis":"normal");var d=new BrushTargetManager$1(makeAxisFinder(r),t,{include:["grid"]}),g=d.makePanelOpts(a,function(y){return y.xAxisDeclared&&!y.yAxisDeclared?"lineX":!y.xAxisDeclared&&y.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(g).enableBrush(l&&g.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(r){var t=r.getComponent("toolbox",0),n=["feature","dataZoom"];if(!t||t.get(n)==null)return;var o=t.getModel(n),a=[],l=makeAxisFinder(o),d=parseFinder$1(r,l);each$5(d.xAxisModels,function(y){return g(y,"xAxis","xAxisIndex")}),each$5(d.yAxisModels,function(y){return g(y,"yAxis","yAxisIndex")});function g(y,S,x){var w=y.componentIndex,c={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+S+w};c[x]=w,a.push(c)}return a});const DataZoom=DataZoomFeature;function install$j(r){r.registerComponentModel(ToolboxModel$1),r.registerComponentView(ToolboxView$1),registerFeature("saveAsImage",SaveAsImage$1),registerFeature("magicType",MagicType$1),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoom),registerFeature("restore",Restore),use(install$k)}var TooltipModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(ComponentModel$1);const TooltipModel$1=TooltipModel;function shouldTooltipConfine(r){var t=r.get("confine");return t!=null?!!t:r.get("renderMode")==="richText"}function testStyle(r){if(env$1.domSupported){for(var t=document.documentElement.style,n=0,o=r.length;n<o;n++)if(r[n]in t)return r[n]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(r,t){if(!r)return t;t=toCamelCase(t,!0);var n=r.indexOf(t);return r=n===-1?t:"-"+r.slice(0,n)+"-"+t,r.toLowerCase()}function getComputedStyle$1(r,t){var n=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return n?t?n[t]:n:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env$1.transform3dSupported?"will-change:transform;":"");function mirrorPos(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function assembleArrow(r,t,n){if(!isString(n)||n==="inside")return"";var o=r.get("backgroundColor"),a=r.get("borderWidth");t=convertToColorString(t);var l=mirrorPos(n),d=Math.max(Math.round(a)*1.5,6),g="",y=CSS_TRANSFORM_VENDOR+":",S;indexOf(["left","right"],l)>-1?(g+="top:50%",y+="translateY(-50%) rotate("+(S=l==="left"?-225:-45)+"deg)"):(g+="left:50%",y+="translateX(-50%) rotate("+(S=l==="top"?225:45)+"deg)");var x=S*Math.PI/180,w=d+a,c=w*Math.abs(Math.cos(x))+w*Math.abs(Math.sin(x)),A=Math.round(((c-Math.SQRT2*a)/2+Math.SQRT2*a-(c-w)/2)*100)/100;g+=";"+l+":-"+A+"px";var R=t+" solid "+a+"px;",L=["position:absolute;width:"+d+"px;height:"+d+"px;z-index:-1;",g+";"+y+";","border-bottom:"+R,"border-right:"+R,"background-color:"+o+";"];return'<div style="'+L.join("")+'"></div>'}function assembleTransition(r,t){var n="cubic-bezier(0.23,1,0.32,1)",o=" "+r/2+"s "+n,a="opacity"+o+",visibility"+o;return t||(o=" "+r+"s "+n,a+=env$1.transformSupported?","+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o),CSS_TRANSITION_VENDOR+":"+a}function assembleTransform(r,t,n){var o=r.toFixed(0)+"px",a=t.toFixed(0)+"px";if(!env$1.transformSupported)return n?"top:"+a+";left:"+o+";":[["top",a],["left",o]];var l=env$1.transform3dSupported,d="translate"+(l?"3d":"")+"("+o+","+a+(l?",0":"")+")";return n?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+d+";":[["top",0],["left",0],[TRANSFORM_VENDOR,d]]}function assembleFont(r){var t=[],n=r.get("fontSize"),o=r.getTextColor();o&&t.push("color:"+o),t.push("font:"+r.getFont()),n&&t.push("line-height:"+Math.round(n*3/2)+"px");var a=r.get("textShadowColor"),l=r.get("textShadowBlur")||0,d=r.get("textShadowOffsetX")||0,g=r.get("textShadowOffsetY")||0;return a&&l&&t.push("text-shadow:"+d+"px "+g+"px "+l+"px "+a),each$f(["decoration","align"],function(y){var S=r.get(y);S&&t.push("text-"+y+":"+S)}),t.join(";")}function assembleCssText(r,t,n){var o=[],a=r.get("transitionDuration"),l=r.get("backgroundColor"),d=r.get("shadowBlur"),g=r.get("shadowColor"),y=r.get("shadowOffsetX"),S=r.get("shadowOffsetY"),x=r.getModel("textStyle"),w=getPaddingFromTooltipModel(r,"html"),c=y+"px "+S+"px "+d+"px "+g;return o.push("box-shadow:"+c),t&&a&&o.push(assembleTransition(a,n)),l&&o.push("background-color:"+l),each$f(["width","color","radius"],function(A){var R="border-"+A,L=toCamelCase(R),$=r.get(L);$!=null&&o.push(R+":"+$+(A==="color"?"":"px"))}),o.push(assembleFont(x)),w!=null&&o.push("padding:"+normalizeCssArray(w).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(r,t,n,o,a){var l=t&&t.painter;if(n){var d=l&&l.getViewportRoot();d&&transformLocalCoord(r,d,document.body,o,a)}else{r[0]=o,r[1]=a;var g=l&&l.getViewportRootOffset();g&&(r[0]+=g.offsetLeft,r[1]+=g.offsetTop)}r[2]=r[0]/t.getWidth(),r[3]=r[1]/t.getHeight()}var TooltipHTMLContent=function(){function r(t,n,o){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env$1.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var l=this._zr=n.getZr(),d=this._appendToBody=o&&o.appendToBody;makeStyleCoord$1(this._styleCoord,l,d,n.getWidth()/2,n.getHeight()/2),d?document.body.appendChild(a):t.appendChild(a),this._container=t;var g=this;a.onmouseenter=function(){g._enterable&&(clearTimeout(g._hideTimeout),g._show=!0),g._inContent=!0},a.onmousemove=function(y){if(y=y||window.event,!g._enterable){var S=l.handler,x=l.painter.getViewportRoot();normalizeEvent(x,y,!0),S.dispatch("mousemove",y)}},a.onmouseleave=function(){g._inContent=!1,g._enterable&&g._show&&g.hideLater(g._hideDelay)}}return r.prototype.update=function(t){var n=this._container,o=getComputedStyle$1(n,"position"),a=n.style;a.position!=="absolute"&&o!=="absolute"&&(a.position="relative");var l=t.get("alwaysShowContent");l&&this._moveIfResized(),this._alwaysShowContent=l,this.el.className=t.get("className")||""},r.prototype.show=function(t,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,a=o.style,l=this._styleCoord;o.innerHTML?a.cssText=gCssText+assembleCssText(t,!this._firstShow,this._longHide)+assembleTransform(l[0],l[1],!0)+("border-color:"+convertToColorString(n)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):a.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(t,n,o,a,l){var d=this.el;if(t==null){d.innerHTML="";return}var g="";if(isString(l)&&o.get("trigger")==="item"&&!shouldTooltipConfine(o)&&(g=assembleArrow(o,a,l)),isString(t))d.innerHTML=t+g;else if(t){d.innerHTML="",isArray$1(t)||(t=[t]);for(var y=0;y<t.length;y++)isDom(t[y])&&t[y].parentNode!==d&&d.appendChild(t[y]);if(g&&d.childNodes.length){var S=document.createElement("div");S.innerHTML=g,d.appendChild(S)}}},r.prototype.setEnterable=function(t){this._enterable=t},r.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},r.prototype.moveTo=function(t,n){var o=this._styleCoord;if(makeStyleCoord$1(o,this._zr,this._appendToBody,t,n),o[0]!=null&&o[1]!=null){var a=this.el.style,l=assembleTransform(o[0],o[1]);each$f(l,function(d){a[d[0]]=d[1]})}},r.prototype._moveIfResized=function(){var t=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),n*this._zr.getHeight())},r.prototype.hide=function(){var t=this,n=this.el.style;n.visibility="hidden",n.opacity="0",env$1.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},r.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),t)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},r}();const TooltipHTMLContent$1=TooltipHTMLContent;var TooltipRichContent=function(){function r(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),makeStyleCoord(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return r.prototype.update=function(t){var n=t.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(t,n,o,a,l){var d=this;isObject$3(t)&&throwError(""),this.el&&this._zr.remove(this.el);var g=o.getModel("textStyle");this.el=new ZRText$1({style:{rich:n.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:a,textShadowColor:g.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(S){d.el.style[S]=o.get(S)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(S){d.el.style[S]=g.get(S)||0}),this._zr.add(this.el);var y=this;this.el.on("mouseover",function(){y._enterable&&(clearTimeout(y._hideTimeout),y._show=!0),y._inContent=!0}),this.el.on("mouseout",function(){y._enterable&&y._show&&y.hideLater(y._hideDelay),y._inContent=!1})},r.prototype.setEnterable=function(t){this._enterable=t},r.prototype.getSize=function(){var t=this.el,n=this.el.getBoundingRect(),o=calcShadowOuterSize(t.style);return[n.width+o.left+o.right,n.height+o.top+o.bottom]},r.prototype.moveTo=function(t,n){var o=this.el;if(o){var a=this._styleCoord;makeStyleCoord(a,this._zr,t,n),t=a[0],n=a[1];var l=o.style,d=mathMaxWith0(l.borderWidth||0),g=calcShadowOuterSize(l);o.x=t+d+g.left,o.y=n+d+g.top,o.markRedraw()}},r.prototype._moveIfResized=function(){var t=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),n*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),t)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function mathMaxWith0(r){return Math.max(0,r)}function calcShadowOuterSize(r){var t=mathMaxWith0(r.shadowBlur||0),n=mathMaxWith0(r.shadowOffsetX||0),o=mathMaxWith0(r.shadowOffsetY||0);return{left:mathMaxWith0(t-n),right:mathMaxWith0(t+n),top:mathMaxWith0(t-o),bottom:mathMaxWith0(t+o)}}function makeStyleCoord(r,t,n,o){r[0]=n,r[1]=o,r[2]=r[0]/t.getWidth(),r[3]=r[1]/t.getHeight()}const TooltipRichContent$1=TooltipRichContent;var proxyRect=new Rect$3({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o){if(!(env$1.node||!o.getDom())){var a=n.getComponent("tooltip"),l=this._renderMode=getTooltipRenderMode(a.get("renderMode"));this._tooltipContent=l==="richText"?new TooltipRichContent$1(o):new TooltipHTMLContent$1(o.getDom(),o,{appendToBody:a.get("appendToBody",!0)})}},t.prototype.render=function(n,o,a){if(!(env$1.node||!a.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=o,this._api=a;var l=this._tooltipContent;l.update(n),l.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var n=this._tooltipModel,o=n.get("triggerOn");register("itemTooltip",this._api,bind$1(function(a,l,d){o!=="none"&&(o.indexOf(a)>=0?this._tryShow(l,d):a==="leave"&&this._hide(d))},this))},t.prototype._keepShow=function(){var n=this._tooltipModel,o=this._ecModel,a=this._api,l=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&l!=="none"&&l!=="click"){var d=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&d.manuallyShowTip(n,o,a,{x:d._lastX,y:d._lastY,dataByCoordSys:d._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(n,o,a,l){if(!(l.from===this.uid||env$1.node||!a.getDom())){var d=makeDispatchAction(l,a);this._ticket="";var g=l.dataByCoordSys,y=findComponentReference(l,o,a);if(y){var S=y.el.getBoundingRect().clone();S.applyTransform(y.el.transform),this._tryShow({offsetX:S.x+S.width/2,offsetY:S.y+S.height/2,target:y.el,position:l.position,positionDefault:"bottom"},d)}else if(l.tooltip&&l.x!=null&&l.y!=null){var x=proxyRect;x.x=l.x,x.y=l.y,x.update(),getECData(x).tooltipConfig={name:null,option:l.tooltip},this._tryShow({offsetX:l.x,offsetY:l.y,target:x},d)}else if(g)this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,dataByCoordSys:g,tooltipOption:l.tooltipOption},d);else if(l.seriesIndex!=null){if(this._manuallyAxisShowTip(n,o,a,l))return;var w=findPointFromSeries(l,o),c=w.point[0],A=w.point[1];c!=null&&A!=null&&this._tryShow({offsetX:c,offsetY:A,target:w.el,position:l.position,positionDefault:"bottom"},d)}else l.x!=null&&l.y!=null&&(a.dispatchAction({type:"updateAxisPointer",x:l.x,y:l.y}),this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,target:a.getZr().findHover(l.x,l.y).target},d))}},t.prototype.manuallyHideTip=function(n,o,a,l){var d=this._tooltipContent;this._tooltipModel&&d.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,l.from!==this.uid&&this._hide(makeDispatchAction(l,a))},t.prototype._manuallyAxisShowTip=function(n,o,a,l){var d=l.seriesIndex,g=l.dataIndex,y=o.getComponent("axisPointer").coordSysAxesInfo;if(!(d==null||g==null||y==null)){var S=o.getSeriesByIndex(d);if(S){var x=S.getData(),w=buildTooltipModel([x.getItemModel(g),S,(S.coordinateSystem||{}).model],this._tooltipModel);if(w.get("trigger")==="axis")return a.dispatchAction({type:"updateAxisPointer",seriesIndex:d,dataIndex:g,position:l.position}),!0}}},t.prototype._tryShow=function(n,o){var a=n.target,l=this._tooltipModel;if(l){this._lastX=n.offsetX,this._lastY=n.offsetY;var d=n.dataByCoordSys;if(d&&d.length)this._showAxisTooltip(d,n);else if(a){this._lastDataByCoordSys=null;var g,y;findEventDispatcher(a,function(S){if(getECData(S).dataIndex!=null)return g=S,!0;if(getECData(S).tooltipConfig!=null)return y=S,!0},!0),g?this._showSeriesItemTooltip(n,g,o):y?this._showComponentItemTooltip(n,y,o):this._hide(o)}else this._lastDataByCoordSys=null,this._hide(o)}},t.prototype._showOrMove=function(n,o){var a=n.get("showDelay");o=bind$1(o,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(o,a):o()},t.prototype._showAxisTooltip=function(n,o){var a=this._ecModel,l=this._tooltipModel,d=[o.offsetX,o.offsetY],g=buildTooltipModel([o.tooltipOption],l),y=this._renderMode,S=[],x=createTooltipMarkup("section",{blocks:[],noHeader:!0}),w=[],c=new TooltipMarkupStyleCreator;each$f(n,function(z){each$f(z.dataByAxis,function(V){var j=a.getComponent(V.axisDim+"Axis",V.axisIndex),K=V.value;if(!(!j||K==null)){var Z=getValueLabel(K,j.axis,a,V.seriesDataIndices,V.valueLabelOpt),q=createTooltipMarkup("section",{header:Z,noHeader:!trim$1(Z),sortBlocks:!0,blocks:[]});x.blocks.push(q),each$f(V.seriesDataIndices,function(ie){var te=a.getSeriesByIndex(ie.seriesIndex),oe=ie.dataIndexInside,re=te.getDataParams(oe);if(!(re.dataIndex<0)){re.axisDim=V.axisDim,re.axisIndex=V.axisIndex,re.axisType=V.axisType,re.axisId=V.axisId,re.axisValue=getAxisRawValue(j.axis,{value:K}),re.axisValueLabel=Z,re.marker=c.makeTooltipMarker("item",convertToColorString(re.color),y);var he=normalizeTooltipFormatResult(te.formatTooltip(oe,!0,null)),_e=he.frag;if(_e){var me=buildTooltipModel([te],l).get("valueFormatter");q.blocks.push(me?extend({valueFormatter:me},_e):_e)}he.text&&w.push(he.text),S.push(re)}})}})}),x.blocks.reverse(),w.reverse();var A=o.position,R=g.get("order"),L=buildTooltipMarkup(x,c,y,R,a.get("useUTC"),g.get("textStyle"));L&&w.unshift(L);var $=y==="richText"?`

`:"<br/>",O=w.join($);this._showOrMove(g,function(){this._updateContentNotChangedOnAxis(n,S)?this._updatePosition(g,A,d[0],d[1],this._tooltipContent,S):this._showTooltipContent(g,O,S,Math.random()+"",d[0],d[1],A,null,c)})},t.prototype._showSeriesItemTooltip=function(n,o,a){var l=this._ecModel,d=getECData(o),g=d.seriesIndex,y=l.getSeriesByIndex(g),S=d.dataModel||y,x=d.dataIndex,w=d.dataType,c=S.getData(w),A=this._renderMode,R=n.positionDefault,L=buildTooltipModel([c.getItemModel(x),S,y&&(y.coordinateSystem||{}).model],this._tooltipModel,R?{position:R}:null),$=L.get("trigger");if(!($!=null&&$!=="item")){var O=S.getDataParams(x,w),z=new TooltipMarkupStyleCreator;O.marker=z.makeTooltipMarker("item",convertToColorString(O.color),A);var V=normalizeTooltipFormatResult(S.formatTooltip(x,!1,w)),j=L.get("order"),K=L.get("valueFormatter"),Z=V.frag,q=Z?buildTooltipMarkup(K?extend({valueFormatter:K},Z):Z,z,A,j,l.get("useUTC"),L.get("textStyle")):V.text,ie="item_"+S.name+"_"+x;this._showOrMove(L,function(){this._showTooltipContent(L,q,O,ie,n.offsetX,n.offsetY,n.position,n.target,z)}),a({type:"showTip",dataIndexInside:x,dataIndex:c.getRawIndex(x),seriesIndex:g,from:this.uid})}},t.prototype._showComponentItemTooltip=function(n,o,a){var l=getECData(o),d=l.tooltipConfig,g=d.option||{};if(isString(g)){var y=g;g={content:y,formatter:y}}var S=[g],x=this._ecModel.getComponent(l.componentMainType,l.componentIndex);x&&S.push(x),S.push({formatter:g.content});var w=n.positionDefault,c=buildTooltipModel(S,this._tooltipModel,w?{position:w}:null),A=c.get("content"),R=Math.random()+"",L=new TooltipMarkupStyleCreator;this._showOrMove(c,function(){var $=clone$4(c.get("formatterParams")||{});this._showTooltipContent(c,A,$,R,n.offsetX,n.offsetY,n.position,o,L)}),a({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(n,o,a,l,d,g,y,S,x){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var w=this._tooltipContent;w.setEnterable(n.get("enterable"));var c=n.get("formatter");y=y||n.get("position");var A=o,R=this._getNearestPoint([d,g],a,n.get("trigger"),n.get("borderColor")),L=R.color;if(c)if(isString(c)){var $=n.ecModel.get("useUTC"),O=isArray$1(a)?a[0]:a,z=O&&O.axisType&&O.axisType.indexOf("time")>=0;A=c,z&&(A=format$1(O.axisValue,A,$)),A=formatTpl(A,a,!0)}else if(isFunction(c)){var V=bind$1(function(j,K){j===this._ticket&&(w.setContent(K,x,n,L,y),this._updatePosition(n,y,d,g,w,a,S))},this);this._ticket=l,A=c(a,l,V)}else A=c;w.setContent(A,x,n,L,y),w.show(n,L),this._updatePosition(n,y,d,g,w,a,S)}},t.prototype._getNearestPoint=function(n,o,a,l){if(a==="axis"||isArray$1(o))return{color:l||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(o))return{color:l||o.color||o.borderColor}},t.prototype._updatePosition=function(n,o,a,l,d,g,y){var S=this._api.getWidth(),x=this._api.getHeight();o=o||n.get("position");var w=d.getSize(),c=n.get("align"),A=n.get("verticalAlign"),R=y&&y.getBoundingRect().clone();if(y&&R.applyTransform(y.transform),isFunction(o)&&(o=o([a,l],g,d.el,R,{viewSize:[S,x],contentSize:w.slice()})),isArray$1(o))a=parsePercent(o[0],S),l=parsePercent(o[1],x);else if(isObject$3(o)){var L=o;L.width=w[0],L.height=w[1];var $=getLayoutRect(L,{width:S,height:x});a=$.x,l=$.y,c=null,A=null}else if(isString(o)&&y){var O=calcTooltipPosition(o,R,w,n.get("borderWidth"));a=O[0],l=O[1]}else{var O=refixTooltipPosition(a,l,d,S,x,c?null:20,A?null:20);a=O[0],l=O[1]}if(c&&(a-=isCenterAlign(c)?w[0]/2:c==="right"?w[0]:0),A&&(l-=isCenterAlign(A)?w[1]/2:A==="bottom"?w[1]:0),shouldTooltipConfine(n)){var O=confineTooltipPosition(a,l,d,S,x);a=O[0],l=O[1]}d.moveTo(a,l)},t.prototype._updateContentNotChangedOnAxis=function(n,o){var a=this._lastDataByCoordSys,l=this._cbParamsList,d=!!a&&a.length===n.length;return d&&each$f(a,function(g,y){var S=g.dataByAxis||[],x=n[y]||{},w=x.dataByAxis||[];d=d&&S.length===w.length,d&&each$f(S,function(c,A){var R=w[A]||{},L=c.seriesDataIndices||[],$=R.seriesDataIndices||[];d=d&&c.value===R.value&&c.axisType===R.axisType&&c.axisId===R.axisId&&L.length===$.length,d&&each$f(L,function(O,z){var V=$[z];d=d&&O.seriesIndex===V.seriesIndex&&O.dataIndex===V.dataIndex}),l&&each$f(c.seriesDataIndices,function(O){var z=O.seriesIndex,V=o[z],j=l[z];V&&j&&j.data!==V.data&&(d=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=o,!!d},t.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},t.prototype.dispose=function(n,o){env$1.node||!o.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",o))},t.type="tooltip",t}(ComponentView$1);function buildTooltipModel(r,t,n){var o=t.ecModel,a;n?(a=new Model$1(n,o,o),a=new Model$1(t.option,a,o)):a=t;for(var l=r.length-1;l>=0;l--){var d=r[l];d&&(d instanceof Model$1&&(d=d.get("tooltip",!0)),isString(d)&&(d={formatter:d}),d&&(a=new Model$1(d,a,o)))}return a}function makeDispatchAction(r,t){return r.dispatchAction||bind$1(t.dispatchAction,t)}function refixTooltipPosition(r,t,n,o,a,l,d){var g=n.getSize(),y=g[0],S=g[1];return l!=null&&(r+y+l+2>o?r-=y+l:r+=l),d!=null&&(t+S+d>a?t-=S+d:t+=d),[r,t]}function confineTooltipPosition(r,t,n,o,a){var l=n.getSize(),d=l[0],g=l[1];return r=Math.min(r+d,o)-d,t=Math.min(t+g,a)-g,r=Math.max(r,0),t=Math.max(t,0),[r,t]}function calcTooltipPosition(r,t,n,o){var a=n[0],l=n[1],d=Math.ceil(Math.SQRT2*o)+8,g=0,y=0,S=t.width,x=t.height;switch(r){case"inside":g=t.x+S/2-a/2,y=t.y+x/2-l/2;break;case"top":g=t.x+S/2-a/2,y=t.y-l-d;break;case"bottom":g=t.x+S/2-a/2,y=t.y+x+d;break;case"left":g=t.x-a-d,y=t.y+x/2-l/2;break;case"right":g=t.x+S+d,y=t.y+x/2-l/2}return[g,y]}function isCenterAlign(r){return r==="center"||r==="middle"}function findComponentReference(r,t,n){var o=preParseFinder(r).queryOptionMap,a=o.keys()[0];if(!(!a||a==="series")){var l=queryReferringComponents(t,a,o.get(a),{useDefault:!1,enableAll:!1,enableNone:!1}),d=l.models[0];if(d){var g=n.getViewOfComponentModel(d),y;if(g.group.traverse(function(S){var x=getECData(S).tooltipConfig;if(x&&x.name===r.name)return y=S,!0}),y)return{componentMainType:a,componentIndex:d.componentIndex,el:y}}}}const TooltipView$1=TooltipView;function install$i(r){use(install$q),r.registerComponentModel(TooltipModel$1),r.registerComponentView(TooltipView$1),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(r,t){var n=normalizeToArray(r?r.brush:[]);if(n.length){var o=[];each$f(n,function(y){var S=y.hasOwnProperty("toolbox")?y.toolbox:[];S instanceof Array&&(o=o.concat(S))});var a=r&&r.toolbox;isArray$1(a)&&(a=a[0]),a||(a={feature:{}},r.toolbox=[a]);var l=a.feature||(a.feature={}),d=l.brush||(l.brush={}),g=d.type||(d.type=[]);g.push.apply(g,o),removeDuplicate(g),t&&!g.length&&g.push.apply(g,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(r){var t={};each$f(r,function(n){t[n]=1}),r.length=0,each$f(t,function(n,o){r.push(o)})}var each$4=each$f;function hasKeys(r){if(r){for(var t in r)if(r.hasOwnProperty(t))return!0}}function createVisualMappings(r,t,n){var o={};return each$4(t,function(l){var d=o[l]=a();each$4(r[l],function(g,y){if(VisualMapping$1.isValidType(y)){var S={type:y,visual:g};n&&n(S,l),d[y]=new VisualMapping$1(S),y==="opacity"&&(S=clone$4(S),S.type="colorAlpha",d.__hidden.__alphaForOpacity=new VisualMapping$1(S))}})}),o;function a(){var l=function(){};l.prototype.__hidden=l.prototype;var d=new l;return d}}function replaceVisualOption(r,t,n){var o;each$f(n,function(a){t.hasOwnProperty(a)&&hasKeys(t[a])&&(o=!0)}),o&&each$f(n,function(a){t.hasOwnProperty(a)&&hasKeys(t[a])?r[a]=clone$4(t[a]):delete r[a]})}function applyVisual(r,t,n,o,a,l){var d={};each$f(r,function(w){var c=VisualMapping$1.prepareVisualTypes(t[w]);d[w]=c});var g;function y(w){return getItemVisualFromData(n,g,w)}function S(w,c){setItemVisualFromData(n,g,w,c)}l==null?n.each(x):n.each([l],x);function x(w,c){g=l==null?w:c;var A=n.getRawDataItem(g);if(!(A&&A.visualMap===!1))for(var R=o.call(a,w),L=t[R],$=d[R],O=0,z=$.length;O<z;O++){var V=$[O];L[V]&&L[V].applyVisual(w,y,S)}}}function incrementalApplyVisual(r,t,n,o){var a={};return each$f(r,function(l){var d=VisualMapping$1.prepareVisualTypes(t[l]);a[l]=d}),{progress:function(d,g){var y;o!=null&&(y=g.getDimensionIndex(o));function S(K){return getItemVisualFromData(g,w,K)}function x(K,Z){setItemVisualFromData(g,w,K,Z)}for(var w,c=g.getStore();(w=d.next())!=null;){var A=g.getRawDataItem(w);if(!(A&&A.visualMap===!1))for(var R=o!=null?c.get(y,w):w,L=n(R),$=t[L],O=a[L],z=0,V=O.length;z<V;z++){var j=O[z];$[j]&&$[j].applyVisual(R,S,x)}}}}}function makeBrushCommonSelectorForSeries(r){var t=r.brushType,n={point:function(o){return selector[t].point(o,n,r)},rect:function(o){return selector[t].rect(o,n,r)}};return n}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(r,t,n){return r&&n.boundingRect.contain(r[0],r[1])},rect:function(r,t,n){return r&&n.boundingRect.intersect(r)}},polygon:{point:function(r,t,n){return r&&n.boundingRect.contain(r[0],r[1])&&contain(n.range,r[0],r[1])},rect:function(r,t,n){var o=n.range;if(!r||o.length<=1)return!1;var a=r.x,l=r.y,d=r.width,g=r.height,y=o[0];if(contain(o,a,l)||contain(o,a+d,l)||contain(o,a,l+g)||contain(o,a+d,l+g)||BoundingRect$1.create(r).contain(y[0],y[1])||linePolygonIntersect(a,l,a+d,l,o)||linePolygonIntersect(a,l,a,l+g,o)||linePolygonIntersect(a+d,l,a+d,l+g,o)||linePolygonIntersect(a,l+g,a+d,l+g,o))return!0}}};function getLineSelectors(r){var t=["x","y"],n=["width","height"];return{point:function(o,a,l){if(o){var d=l.range,g=o[r];return inLineRange(g,d)}},rect:function(o,a,l){if(o){var d=l.range,g=[o[t[r]],o[t[r]]+o[n[r]]];return g[1]<g[0]&&g.reverse(),inLineRange(g[0],d)||inLineRange(g[1],d)||inLineRange(d[0],g)||inLineRange(d[1],g)}}}}function inLineRange(r,t){return t[0]<=r&&r<=t[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(r){r.eachComponent({mainType:"brush"},function(t){var n=t.brushTargetManager=new BrushTargetManager$1(t.option,r);n.setInputRanges(t.areas,r)})}function brushVisual(r,t,n){var o=[],a,l;r.eachComponent({mainType:"brush"},function(d){n&&n.type==="takeGlobalCursor"&&d.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),layoutCovers(r),r.eachComponent({mainType:"brush"},function(d,g){var y={brushId:d.id,brushIndex:g,brushName:d.name,areas:clone$4(d.areas),selected:[]};o.push(y);var S=d.option,x=S.brushLink,w=[],c=[],A=[],R=!1;g||(a=S.throttleType,l=S.throttleDelay);var L=map$1(d.areas,function(K){var Z=boundingRectBuilders[K.brushType],q=defaults({boundingRect:Z?Z(K):void 0},K);return q.selectors=makeBrushCommonSelectorForSeries(q),q}),$=createVisualMappings(d.option,STATE_LIST,function(K){K.mappingMethod="fixed"});isArray$1(x)&&each$f(x,function(K){w[K]=1});function O(K){return x==="all"||!!w[K]}function z(K){return!!K.length}r.eachSeries(function(K,Z){var q=A[Z]=[];K.subType==="parallel"?V(K,Z):j(K,Z,q)});function V(K,Z){var q=K.coordinateSystem;R=R||q.hasAxisBrushed(),O(Z)&&q.eachActiveState(K.getData(),function(ie,te){ie==="active"&&(c[te]=1)})}function j(K,Z,q){if(!(!K.brushSelector||brushModelNotControll(d,Z))&&(each$f(L,function(te){d.brushTargetManager.controlSeries(te,K,r)&&q.push(te),R=R||z(q)}),O(Z)&&z(q))){var ie=K.getData();ie.each(function(te){checkInRange(K,q,ie,te)&&(c[te]=1)})}}r.eachSeries(function(K,Z){var q={seriesId:K.id,seriesIndex:Z,seriesName:K.name,dataIndex:[]};y.selected.push(q);var ie=A[Z],te=K.getData(),oe=O(Z)?function(re){return c[re]?(q.dataIndex.push(te.getRawIndex(re)),"inBrush"):"outOfBrush"}:function(re){return checkInRange(K,ie,te,re)?(q.dataIndex.push(te.getRawIndex(re)),"inBrush"):"outOfBrush"};(O(Z)?R:z(ie))&&applyVisual(STATE_LIST,$,te,oe)})}),dispatchAction$1(t,a,l,o,n)}function dispatchAction$1(r,t,n,o,a){if(a){var l=r.getZr();if(!l[DISPATCH_FLAG]){l[DISPATCH_METHOD]||(l[DISPATCH_METHOD]=doDispatch);var d=createOrUpdate(l,DISPATCH_METHOD,n,t);d(r,o)}}}function doDispatch(r,t){if(!r.isDisposed()){var n=r.getZr();n[DISPATCH_FLAG]=!0,r.dispatchAction({type:"brushSelect",batch:t}),n[DISPATCH_FLAG]=!1}}function checkInRange(r,t,n,o){for(var a=0,l=t.length;a<l;a++){var d=t[a];if(r.brushSelector(o,n,d.selectors,d))return!0}}function brushModelNotControll(r,t){var n=r.option.seriesIndex;return n!=null&&n!=="all"&&(isArray$1(n)?indexOf(n,t)<0:t!==n)}var boundingRectBuilders={rect:function(r){return getBoundingRectFromMinMax(r.range)},polygon:function(r){for(var t,n=r.range,o=0,a=n.length;o<a;o++){t=t||[[1/0,-1/0],[1/0,-1/0]];var l=n[o];l[0]<t[0][0]&&(t[0][0]=l[0]),l[0]>t[0][1]&&(t[0][1]=l[0]),l[1]<t[1][0]&&(t[1][0]=l[1]),l[1]>t[1][1]&&(t[1][1]=l[1])}return t&&getBoundingRectFromMinMax(t)}};function getBoundingRectFromMinMax(r){return new BoundingRect$1(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var BrushView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o){this.ecModel=n,this.api=o,this.model,(this._brushController=new BrushController$1(o.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},t.prototype.render=function(n,o,a,l){this.model=n,this._updateController(n,o,a,l)},t.prototype.updateTransform=function(n,o,a,l){layoutCovers(o),this._updateController(n,o,a,l)},t.prototype.updateVisual=function(n,o,a,l){this.updateTransform(n,o,a,l)},t.prototype.updateView=function(n,o,a,l){this._updateController(n,o,a,l)},t.prototype._updateController=function(n,o,a,l){(!l||l.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(a)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(n){var o=this.model.id,a=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:o,areas:clone$4(a),$from:o}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:clone$4(a),$from:o})},t.type="brush",t}(ComponentView$1);const BrushView$1=BrushView;var DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.areas=[],n.brushOption={},n}return t.prototype.optionUpdated=function(n,o){var a=this.option;!o&&replaceVisualOption(a,n,["inBrush","outOfBrush"]);var l=a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},l.hasOwnProperty("liftZ")||(l.liftZ=5)},t.prototype.setAreas=function(n){n&&(this.areas=map$1(n,function(o){return generateBrushOption(this.option,o)},this))},t.prototype.setBrushOption=function(n){this.brushOption=generateBrushOption(this.option,n),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(ComponentModel$1);function generateBrushOption(r,t){return merge({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new Model$1(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},t,!0)}const BrushModel$1=BrushModel;var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(n,o,a){var l,d,g;o.eachComponent({mainType:"brush"},function(y){l=y.brushType,d=y.brushOption.brushMode||"single",g=g||!!y.areas.length}),this._brushType=l,this._brushMode=d,each$f(n.get("type",!0),function(y){n.setIconStatus(y,(y==="keep"?d==="multiple":y==="clear"?g:y===l)?"emphasis":"normal")})},t.prototype.updateView=function(n,o,a){this.render(n,o,a)},t.prototype.getIcons=function(){var n=this.model,o=n.get("icon",!0),a={};return each$f(n.get("type",!0),function(l){o[l]&&(a[l]=o[l])}),a},t.prototype.onclick=function(n,o,a){var l=this._brushType,d=this._brushMode;a==="clear"?(o.dispatchAction({type:"axisAreaSelect",intervals:[]}),o.dispatchAction({type:"brush",command:"clear",areas:[]})):o.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:a==="keep"?l:l===a?!1:a,brushMode:a==="keep"?d==="multiple"?"single":"multiple":d}})},t.getDefaultOption=function(n){var o={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return o},t}(ToolboxFeature);const BrushFeature$1=BrushFeature;function install$h(r){r.registerComponentView(BrushView$1),r.registerComponentModel(BrushModel$1),r.registerPreprocessor(brushPreprocessor),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,brushVisual),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,n){n.eachComponent({mainType:"brush",query:t},function(o){o.setAreas(t.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature$1)}var TitleModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(ComponentModel$1),TitleView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,o,a){if(this.group.removeAll(),!!n.get("show")){var l=this.group,d=n.getModel("textStyle"),g=n.getModel("subtextStyle"),y=n.get("textAlign"),S=retrieve2(n.get("textBaseline"),n.get("textVerticalAlign")),x=new ZRText$1({style:createTextStyle$1(d,{text:n.get("text"),fill:d.getTextColor()},{disableBox:!0}),z2:10}),w=x.getBoundingRect(),c=n.get("subtext"),A=new ZRText$1({style:createTextStyle$1(g,{text:c,fill:g.getTextColor(),y:w.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),R=n.get("link"),L=n.get("sublink"),$=n.get("triggerEvent",!0);x.silent=!R&&!$,A.silent=!L&&!$,R&&x.on("click",function(){windowOpen(R,"_"+n.get("target"))}),L&&A.on("click",function(){windowOpen(L,"_"+n.get("subtarget"))}),getECData(x).eventData=getECData(A).eventData=$?{componentType:"title",componentIndex:n.componentIndex}:null,l.add(x),c&&l.add(A);var O=l.getBoundingRect(),z=n.getBoxLayoutParams();z.width=O.width,z.height=O.height;var V=getLayoutRect(z,{width:a.getWidth(),height:a.getHeight()},n.get("padding"));y||(y=n.get("left")||n.get("right"),y==="middle"&&(y="center"),y==="right"?V.x+=V.width:y==="center"&&(V.x+=V.width/2)),S||(S=n.get("top")||n.get("bottom"),S==="center"&&(S="middle"),S==="bottom"?V.y+=V.height:S==="middle"&&(V.y+=V.height/2),S=S||"top"),l.x=V.x,l.y=V.y,l.markRedraw();var j={align:y,verticalAlign:S};x.setStyle(j),A.setStyle(j),O=l.getBoundingRect();var K=V.margin,Z=n.getItemStyle(["color","opacity"]);Z.fill=n.get("backgroundColor");var q=new Rect$3({shape:{x:O.x-K[3],y:O.y-K[0],width:O.width+K[1]+K[3],height:O.height+K[0]+K[2],r:n.get("borderRadius")},style:Z,subPixelOptimize:!0,silent:!0});l.add(q)}},t.type="title",t}(ComponentView$1);function install$g(r){r.registerComponentModel(TitleModel),r.registerComponentView(TitleView)}var TimelineModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.layoutMode="box",n}return t.prototype.init=function(n,o,a){this.mergeDefaultAndTheme(n,a),this._initData()},t.prototype.mergeOption=function(n){r.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var o=this._data.count();this.option.loop?n=(n%o+o)%o:(n>=o&&(n=o-1),n<0&&(n=0)),this.option.currentIndex=n},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(n){this.option.autoPlay=!!n},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var n=this.option,o=n.data||[],a=n.axisType,l=this._names=[],d;a==="category"?(d=[],each$f(o,function(S,x){var w=convertOptionIdName(getDataItemValue(S),""),c;isObject$3(S)?(c=clone$4(S),c.value=x):c=x,d.push(c),l.push(w)})):d=o;var g={category:"ordinal",time:"time",value:"number"}[a]||"number",y=this._data=new SeriesData$1([{name:"value",type:g}],this);y.initData(d,l)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(ComponentModel$1);const TimelineModel$1=TimelineModel;var SliderTimelineModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="timeline.slider",t.defaultOption=inheritDefaultOption(TimelineModel$1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(TimelineModel$1);mixin(SliderTimelineModel,DataFormatMixin.prototype);const SliderTimelineModel$1=SliderTimelineModel;var TimelineView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="timeline",t}(ComponentView$1);const TimelineView$1=TimelineView;var TimelineAxis=function(r){__extends(t,r);function t(n,o,a,l){var d=r.call(this,n,o,a)||this;return d.type=l||"value",d}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Axis$1);const TimelineAxis$1=TimelineAxis;var PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,o){this.api=o},t.prototype.render=function(n,o,a){if(this.model=n,this.api=a,this.ecModel=o,this.group.removeAll(),n.get("show",!0)){var l=this._layout(n,a),d=this._createGroup("_mainGroup"),g=this._createGroup("_labelGroup"),y=this._axis=this._createAxis(l,n);n.formatTooltip=function(S){var x=y.scale.getLabel({value:S});return createTooltipMarkup("nameValue",{noName:!0,value:x})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(S){this["_render"+S](l,d,y,n)},this),this._renderAxisLabel(l,g,y,n),this._position(l,n)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(n,o){var a=n.get(["label","position"]),l=n.get("orient"),d=getViewRect(n,o),g;a==null||a==="auto"?g=l==="horizontal"?d.y+d.height/2<o.getHeight()/2?"-":"+":d.x+d.width/2<o.getWidth()/2?"+":"-":isString(a)?g={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][a]:g=a;var y={horizontal:"center",vertical:g>=0||g==="+"?"left":"right"},S={horizontal:g>=0||g==="+"?"top":"bottom",vertical:"middle"},x={horizontal:0,vertical:PI/2},w=l==="vertical"?d.height:d.width,c=n.getModel("controlStyle"),A=c.get("show",!0),R=A?c.get("itemSize"):0,L=A?c.get("itemGap"):0,$=R+L,O=n.get(["label","rotate"])||0;O=O*PI/180;var z,V,j,K=c.get("position",!0),Z=A&&c.get("showPlayBtn",!0),q=A&&c.get("showPrevBtn",!0),ie=A&&c.get("showNextBtn",!0),te=0,oe=w;K==="left"||K==="bottom"?(Z&&(z=[0,0],te+=$),q&&(V=[te,0],te+=$),ie&&(j=[oe-R,0],oe-=$)):(Z&&(z=[oe-R,0],oe-=$),q&&(V=[0,0],te+=$),ie&&(j=[oe-R,0],oe-=$));var re=[te,oe];return n.get("inverse")&&re.reverse(),{viewRect:d,mainLength:w,orient:l,rotation:x[l],labelRotation:O,labelPosOpt:g,labelAlign:n.get(["label","align"])||y[l],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||S[l],playPosition:z,prevBtnPosition:V,nextBtnPosition:j,axisExtent:re,controlSize:R,controlGap:L}},t.prototype._position=function(n,o){var a=this._mainGroup,l=this._labelGroup,d=n.viewRect;if(n.orient==="vertical"){var g=create$1(),y=d.x,S=d.y+d.height;translate(g,g,[-y,-S]),rotate(g,g,-PI/2),translate(g,g,[y,S]),d=d.clone(),d.applyTransform(g)}var x=z(d),w=z(a.getBoundingRect()),c=z(l.getBoundingRect()),A=[a.x,a.y],R=[l.x,l.y];R[0]=A[0]=x[0][0];var L=n.labelPosOpt;if(L==null||isString(L)){var $=L==="+"?0:1;V(A,w,x,1,$),V(R,c,x,1,1-$)}else{var $=L>=0?0:1;V(A,w,x,1,$),R[1]=A[1]+L}a.setPosition(A),l.setPosition(R),a.rotation=l.rotation=n.rotation,O(a),O(l);function O(j){j.originX=x[0][0]-j.x,j.originY=x[1][0]-j.y}function z(j){return[[j.x,j.x+j.width],[j.y,j.y+j.height]]}function V(j,K,Z,q,ie){j[q]+=Z[q][ie]-K[q][ie]}},t.prototype._createAxis=function(n,o){var a=o.getData(),l=o.get("axisType"),d=createScaleByModel(o,l);d.getTicks=function(){return a.mapArray(["value"],function(S){return{value:S}})};var g=a.getDataExtent("value");d.setExtent(g[0],g[1]),d.calcNiceTicks();var y=new TimelineAxis$1("value",d,n.axisExtent,l);return y.model=o,y},t.prototype._createGroup=function(n){var o=this[n]=new Group$4;return this.group.add(o),o},t.prototype._renderAxisLine=function(n,o,a,l){var d=a.getExtent();if(l.get(["lineStyle","show"])){var g=new Line$3({shape:{x1:d[0],y1:0,x2:d[1],y2:0},style:extend({lineCap:"round"},l.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(g);var y=this._progressLine=new Line$3({shape:{x1:d[0],x2:this._currentPointer?this._currentPointer.x:d[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:g.style.lineWidth},l.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(y)}},t.prototype._renderAxisTick=function(n,o,a,l){var d=this,g=l.getData(),y=a.scale.getTicks();this._tickSymbols=[],each$f(y,function(S){var x=a.dataToCoord(S.value),w=g.getItemModel(S.value),c=w.getModel("itemStyle"),A=w.getModel(["emphasis","itemStyle"]),R=w.getModel(["progress","itemStyle"]),L={x,y:0,onclick:bind$1(d._changeTimeline,d,S.value)},$=giveSymbol(w,c,o,L);$.ensureState("emphasis").style=A.getItemStyle(),$.ensureState("progress").style=R.getItemStyle(),enableHoverEmphasis($);var O=getECData($);w.get("tooltip")?(O.dataIndex=S.value,O.dataModel=l):O.dataIndex=O.dataModel=null,d._tickSymbols.push($)})},t.prototype._renderAxisLabel=function(n,o,a,l){var d=this,g=a.getLabelModel();if(g.get("show")){var y=l.getData(),S=a.getViewLabels();this._tickLabels=[],each$f(S,function(x){var w=x.tickValue,c=y.getItemModel(w),A=c.getModel("label"),R=c.getModel(["emphasis","label"]),L=c.getModel(["progress","label"]),$=a.dataToCoord(x.tickValue),O=new ZRText$1({x:$,y:0,rotation:n.labelRotation-n.rotation,onclick:bind$1(d._changeTimeline,d,w),silent:!1,style:createTextStyle$1(A,{text:x.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});O.ensureState("emphasis").style=createTextStyle$1(R),O.ensureState("progress").style=createTextStyle$1(L),o.add(O),enableHoverEmphasis(O),labelDataIndexStore(O).dataIndex=w,d._tickLabels.push(O)})}},t.prototype._renderControl=function(n,o,a,l){var d=n.controlSize,g=n.rotation,y=l.getModel("controlStyle").getItemStyle(),S=l.getModel(["emphasis","controlStyle"]).getItemStyle(),x=l.getPlayState(),w=l.get("inverse",!0);c(n.nextBtnPosition,"next",bind$1(this._changeTimeline,this,w?"-":"+")),c(n.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,w?"+":"-")),c(n.playPosition,x?"stop":"play",bind$1(this._handlePlayClick,this,!x),!0);function c(A,R,L,$){if(A){var O=parsePercent$1(retrieve2(l.get(["controlStyle",R+"BtnSize"]),d),d),z=[0,-O/2,O,O],V=makeControlIcon(l,R+"Icon",z,{x:A[0],y:A[1],originX:d/2,originY:0,rotation:$?-g:0,rectHover:!0,style:y,onclick:L});V.ensureState("emphasis").style=S,o.add(V),enableHoverEmphasis(V)}}},t.prototype._renderCurrentPointer=function(n,o,a,l){var d=l.getData(),g=l.getCurrentIndex(),y=d.getItemModel(g).getModel("checkpointStyle"),S=this,x={onCreate:function(w){w.draggable=!0,w.drift=bind$1(S._handlePointerDrag,S),w.ondragend=bind$1(S._handlePointerDragend,S),pointerMoveTo(w,S._progressLine,g,a,l,!0)},onUpdate:function(w){pointerMoveTo(w,S._progressLine,g,a,l)}};this._currentPointer=giveSymbol(y,y,this._mainGroup,{},this._currentPointer,x)},t.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},t.prototype._handlePointerDrag=function(n,o,a){this._clearTimer(),this._pointerChangeTimeline([a.offsetX,a.offsetY])},t.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},t.prototype._pointerChangeTimeline=function(n,o){var a=this._toAxisCoord(n)[0],l=this._axis,d=asc$2(l.getExtent().slice());a>d[1]&&(a=d[1]),a<d[0]&&(a=d[0]),this._currentPointer.x=a,this._currentPointer.markRedraw();var g=this._progressLine;g&&(g.shape.x2=a,g.dirty());var y=this._findNearestTick(a),S=this.model;(o||y!==S.getCurrentIndex()&&S.get("realtime"))&&this._changeTimeline(y)},t.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=n.model;n._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(n){var o=this._mainGroup.getLocalTransform();return applyTransform(n,o,!0)},t.prototype._findNearestTick=function(n){var o=this.model.getData(),a=1/0,l,d=this._axis;return o.each(["value"],function(g,y){var S=d.dataToCoord(g),x=Math.abs(S-n);x<a&&(a=x,l=y)}),l},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(n){var o=this.model.getCurrentIndex();n==="+"?n=o+1:n==="-"&&(n=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},t.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),o=this._tickSymbols,a=this._tickLabels;if(o)for(var l=0;l<o.length;l++)o&&o[l]&&o[l].toggleState("progress",l<n);if(a)for(var l=0;l<a.length;l++)a&&a[l]&&a[l].toggleState("progress",labelDataIndexStore(a[l]).dataIndex<=n)},t.type="timeline.slider",t}(TimelineView$1);function createScaleByModel(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new OrdinalScale$1({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new IntervalScale$1}}function getViewRect(r,t){return getLayoutRect(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},r.get("padding"))}function makeControlIcon(r,t,n,o){var a=o.style,l=createIcon(r.get(["controlStyle",t]),o||{},new BoundingRect$1(n[0],n[1],n[2],n[3]));return a&&l.setStyle(a),l}function giveSymbol(r,t,n,o,a,l){var d=t.get("color");if(a)a.setColor(d),n.add(a),l&&l.onUpdate(a);else{var g=r.get("symbol");a=createSymbol$1(g,-1,-1,2,2,d),a.setStyle("strokeNoScale",!0),n.add(a),l&&l.onCreate(a)}var y=t.getItemStyle(["color"]);a.setStyle(y),o=merge({rectHover:!0,z2:100},o,!0);var S=normalizeSymbolSize(r.get("symbolSize"));o.scaleX=S[0]/2,o.scaleY=S[1]/2;var x=normalizeSymbolOffset(r.get("symbolOffset"),S);x&&(o.x=(o.x||0)+x[0],o.y=(o.y||0)+x[1]);var w=r.get("symbolRotate");return o.rotation=(w||0)*Math.PI/180||0,a.attr(o),a.updateTransform(),a}function pointerMoveTo(r,t,n,o,a,l){if(!r.dragging){var d=a.getModel("checkpointStyle"),g=o.dataToCoord(a.getData().get("value",n));if(l||!d.get("animation",!0))r.attr({x:g,y:0}),t&&t.attr({shape:{x2:g}});else{var y={duration:d.get("animationDuration",!0),easing:d.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:g,y:0},y),t&&t.animateTo({shape:{x2:g}},y)}}}const SliderTimelineView$1=SliderTimelineView;function installTimelineAction(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,n,o){var a=n.getComponent("timeline");return a&&t.currentIndex!=null&&(a.setCurrentIndex(t.currentIndex),!a.get("loop",!0)&&a.isIndexMax()&&a.getPlayState()&&(a.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),n.resetOption("timeline",{replaceMerge:a.get("replaceMerge",!0)}),defaults({currentIndex:a.option.currentIndex},t)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,n){var o=n.getComponent("timeline");o&&t.playState!=null&&o.setPlayState(t.playState)})}function timelinePreprocessor(r){var t=r&&r.timeline;isArray$1(t)||(t=t?[t]:[]),each$f(t,function(n){n&&compatibleEC2(n)})}function compatibleEC2(r){var t=r.type,n={number:"value",time:"time"};if(n[t]&&(r.axisType=n[t],delete r.type),transferItem(r),has$1(r,"controlPosition")){var o=r.controlStyle||(r.controlStyle={});has$1(o,"position")||(o.position=r.controlPosition),o.position==="none"&&!has$1(o,"show")&&(o.show=!1,delete o.position),delete r.controlPosition}each$f(r.data||[],function(a){isObject$3(a)&&!isArray$1(a)&&(!has$1(a,"value")&&has$1(a,"name")&&(a.value=a.name),transferItem(a))})}function transferItem(r){var t=r.itemStyle||(r.itemStyle={}),n=t.emphasis||(t.emphasis={}),o=r.label||r.label||{},a=o.normal||(o.normal={}),l={normal:1,emphasis:1};each$f(o,function(d,g){!l[g]&&!has$1(a,g)&&(a[g]=d)}),n.label&&!has$1(o,"emphasis")&&(o.emphasis=n.label,delete n.label)}function has$1(r,t){return r.hasOwnProperty(t)}function install$f(r){r.registerComponentModel(SliderTimelineModel$1),r.registerComponentView(SliderTimelineView$1),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(r),r.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(r,t){if(!r)return!1;for(var n=isArray$1(r)?r:[r],o=0;o<n.length;o++)if(n[o]&&n[o][t])return!0;return!1}function fillLabel(r){defaultEmphasis(r,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return t.prototype.init=function(n,o,a){this.mergeDefaultAndTheme(n,a),this._mergeOption(n,a,!1,!0)},t.prototype.isAnimationEnabled=function(){if(env$1.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},t.prototype.mergeOption=function(n,o){this._mergeOption(n,o,!1,!1)},t.prototype._mergeOption=function(n,o,a,l){var d=this.mainType;a||o.eachSeries(function(g){var y=g.get(this.mainType,!0),S=inner$5(g)[d];if(!y||!y.data){inner$5(g)[d]=null;return}S?S._mergeOption(y,o,!0):(l&&fillLabel(y),each$f(y.data,function(x){x instanceof Array?(fillLabel(x[0]),fillLabel(x[1])):fillLabel(x)}),S=this.createMarkerModelFromSeries(y,this,o),extend(S,{mainType:this.mainType,seriesIndex:g.seriesIndex,name:g.name,createdBySelf:!0}),S.__hostSeries=g),inner$5(g)[d]=S},this)},t.prototype.formatTooltip=function(n,o,a){var l=this.getData(),d=this.getRawValue(n),g=l.getName(n);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:g,value:d,noName:!g,noValue:d==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(n){this._data=n},t.getMarkerModelFromSeries=function(n,o){return inner$5(n)[o]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ComponentModel$1);mixin(MarkerModel,DataFormatMixin.prototype);const MarkerModel$1=MarkerModel;var MarkPointModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,a){return new t(n,o,a)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(MarkerModel$1);const MarkPointModel$1=MarkPointModel;function hasXOrY(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function hasXAndY(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function markerTypeCalculatorWithExtent(r,t,n,o,a,l){var d=[],g=isDimensionStacked(t,o),y=g?t.getCalculationInfo("stackResultDimension"):o,S=numCalculate(t,y,r),x=t.indicesOfNearest(y,S)[0];d[a]=t.get(n,x),d[l]=t.get(y,x);var w=t.get(o,x),c=getPrecision(t.get(o,x));return c=Math.min(c,20),c>=0&&(d[l]=+d[l].toFixed(c)),[d,w]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(r,t){if(t){var n=r.getData(),o=r.coordinateSystem,a=o&&o.dimensions;if(!hasXAndY(t)&&!isArray$1(t.coord)&&isArray$1(a)){var l=getAxisInfo(t,n,o,r);if(t=clone$4(t),t.type&&markerTypeCalculator[t.type]&&l.baseAxis&&l.valueAxis){var d=indexOf(a,l.baseAxis.dim),g=indexOf(a,l.valueAxis.dim),y=markerTypeCalculator[t.type](n,l.baseDataDim,l.valueDataDim,d,g);t.coord=y[0],t.value=y[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!isArray$1(a))t.coord=[];else for(var S=t.coord,x=0;x<2;x++)markerTypeCalculator[S[x]]&&(S[x]=numCalculate(n,n.mapDimension(a[x]),S[x]));return t}}function getAxisInfo(r,t,n,o){var a={};return r.valueIndex!=null||r.valueDim!=null?(a.valueDataDim=r.valueIndex!=null?t.getDimension(r.valueIndex):r.valueDim,a.valueAxis=n.getAxis(dataDimToCoordDim(o,a.valueDataDim)),a.baseAxis=n.getOtherAxis(a.valueAxis),a.baseDataDim=t.mapDimension(a.baseAxis.dim)):(a.baseAxis=o.getBaseAxis(),a.valueAxis=n.getOtherAxis(a.baseAxis),a.baseDataDim=t.mapDimension(a.baseAxis.dim),a.valueDataDim=t.mapDimension(a.valueAxis.dim)),a}function dataDimToCoordDim(r,t){var n=r.getData().getDimensionInfo(t);return n&&n.coordDim}function dataFilter(r,t){return r&&r.containData&&t.coord&&!hasXOrY(t)?r.containData(t.coord):!0}function zoneFilter(r,t,n){return r&&r.containZone&&t.coord&&n.coord&&!hasXOrY(t)&&!hasXOrY(n)?r.containZone(t.coord,n.coord):!0}function createMarkerDimValueGetter(r,t){return r?function(n,o,a,l){var d=l<2?n.coord&&n.coord[l]:n.value;return parseDataValue(d,t[l])}:function(n,o,a,l){return parseDataValue(n.value,t[l])}}function numCalculate(r,t,n){if(n==="average"){var o=0,a=0;return r.each(t,function(l,d){isNaN(l)||(o+=l,a++)}),o/a}else return n==="median"?r.getMedian(t):r.getDataExtent(t)[n==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this.markerGroupMap=createHashMap()},t.prototype.render=function(n,o,a){var l=this,d=this.markerGroupMap;d.each(function(g){inner$4(g).keep=!1}),o.eachSeries(function(g){var y=MarkerModel$1.getMarkerModelFromSeries(g,l.type);y&&l.renderSeries(g,y,o,a)}),d.each(function(g){!inner$4(g).keep&&l.group.remove(g.group)})},t.prototype.markKeep=function(n){inner$4(n).keep=!0},t.prototype.toggleBlurSeries=function(n,o){var a=this;each$f(n,function(l){var d=MarkerModel$1.getMarkerModelFromSeries(l,a.type);if(d){var g=d.getData();g.eachItemGraphicEl(function(y){y&&(o?enterBlur(y):leaveBlur(y))})}})},t.type="marker",t}(ComponentView$1);const MarkerView$1=MarkerView;function updateMarkerLayout(r,t,n){var o=t.coordinateSystem;r.each(function(a){var l=r.getItemModel(a),d,g=parsePercent(l.get("x"),n.getWidth()),y=parsePercent(l.get("y"),n.getHeight());if(!isNaN(g)&&!isNaN(y))d=[g,y];else if(t.getMarkerPosition)d=t.getMarkerPosition(r.getValues(r.dimensions,a));else if(o){var S=r.get(o.dimensions[0],a),x=r.get(o.dimensions[1],a);d=o.dataToPoint([S,x])}isNaN(g)||(d[0]=g),isNaN(y)||(d[1]=y),r.setItemLayout(a,d)})}var MarkPointView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,a){o.eachSeries(function(l){var d=MarkerModel$1.getMarkerModelFromSeries(l,"markPoint");d&&(updateMarkerLayout(d.getData(),l,a),this.markerGroupMap.get(l.id).updateLayout())},this)},t.prototype.renderSeries=function(n,o,a,l){var d=n.coordinateSystem,g=n.id,y=n.getData(),S=this.markerGroupMap,x=S.get(g)||S.set(g,new SymbolDraw$1),w=createData(d,n,o);o.setData(w),updateMarkerLayout(o.getData(),n,l),w.each(function(c){var A=w.getItemModel(c),R=A.getShallow("symbol"),L=A.getShallow("symbolSize"),$=A.getShallow("symbolRotate"),O=A.getShallow("symbolOffset"),z=A.getShallow("symbolKeepAspect");if(isFunction(R)||isFunction(L)||isFunction($)||isFunction(O)){var V=o.getRawValue(c),j=o.getDataParams(c);isFunction(R)&&(R=R(V,j)),isFunction(L)&&(L=L(V,j)),isFunction($)&&($=$(V,j)),isFunction(O)&&(O=O(V,j))}var K=A.getModel("itemStyle").getItemStyle(),Z=getVisualFromData(y,"color");K.fill||(K.fill=Z),w.setItemVisual(c,{symbol:R,symbolSize:L,symbolRotate:$,symbolOffset:O,symbolKeepAspect:z,style:K})}),x.updateData(w),this.group.add(x.group),w.eachItemGraphicEl(function(c){c.traverse(function(A){getECData(A).dataModel=o})}),this.markKeep(x),x.group.silent=o.get("silent")||n.get("silent")},t.type="markPoint",t}(MarkerView$1);function createData(r,t,n){var o;r?o=map$1(r&&r.dimensions,function(g){var y=t.getData().getDimensionInfo(t.getData().mapDimension(g))||{};return extend(extend({},y),{name:g,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var a=new SeriesData$1(o,n),l=map$1(n.get("data"),curry$1(dataTransform,t));r&&(l=filter(l,curry$1(dataFilter,r)));var d=createMarkerDimValueGetter(!!r,o);return a.initData(l,null,d),a}const MarkPointView$1=MarkPointView;function install$e(r){r.registerComponentModel(MarkPointModel$1),r.registerComponentView(MarkPointView$1),r.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var MarkLineModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,a){return new t(n,o,a)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(MarkerModel$1);const MarkLineModel$1=MarkLineModel;var inner$3=makeInner(),markLineTransform=function(r,t,n,o){var a=r.getData(),l;if(isArray$1(o))l=o;else{var d=o.type;if(d==="min"||d==="max"||d==="average"||d==="median"||o.xAxis!=null||o.yAxis!=null){var g=void 0,y=void 0;if(o.yAxis!=null||o.xAxis!=null)g=t.getAxis(o.yAxis!=null?"y":"x"),y=retrieve(o.yAxis,o.xAxis);else{var S=getAxisInfo(o,a,t,r);g=S.valueAxis;var x=getStackedDimension(a,S.valueDataDim);y=numCalculate(a,x,d)}var w=g.dim==="x"?0:1,c=1-w,A=clone$4(o),R={coord:[]};A.type=null,A.coord=[],A.coord[c]=-1/0,R.coord[c]=1/0;var L=n.get("precision");L>=0&&isNumber(y)&&(y=+y.toFixed(Math.min(L,20))),A.coord[w]=R.coord[w]=y,l=[A,R,{type:d,valueIndex:o.valueIndex,value:y}]}else l=[]}var $=[dataTransform(r,l[0]),dataTransform(r,l[1]),extend({},l[2])];return $[2].type=$[2].type||null,merge($[2],$[0]),merge($[2],$[1]),$};function isInfinity$1(r){return!isNaN(r)&&!isFinite(r)}function ifMarkLineHasOnlyDim(r,t,n,o){var a=1-r,l=o.dimensions[r];return isInfinity$1(t[a])&&isInfinity$1(n[a])&&t[r]===n[r]&&o.getAxis(l).containData(t[r])}function markLineFilter(r,t){if(r.type==="cartesian2d"){var n=t[0].coord,o=t[1].coord;if(n&&o&&(ifMarkLineHasOnlyDim(1,n,o,r)||ifMarkLineHasOnlyDim(0,n,o,r)))return!0}return dataFilter(r,t[0])&&dataFilter(r,t[1])}function updateSingleMarkerEndLayout(r,t,n,o,a){var l=o.coordinateSystem,d=r.getItemModel(t),g,y=parsePercent(d.get("x"),a.getWidth()),S=parsePercent(d.get("y"),a.getHeight());if(!isNaN(y)&&!isNaN(S))g=[y,S];else{if(o.getMarkerPosition)g=o.getMarkerPosition(r.getValues(r.dimensions,t));else{var x=l.dimensions,w=r.get(x[0],t),c=r.get(x[1],t);g=l.dataToPoint([w,c])}if(isCoordinateSystemType(l,"cartesian2d")){var A=l.getAxis("x"),R=l.getAxis("y"),x=l.dimensions;isInfinity$1(r.get(x[0],t))?g[0]=A.toGlobalCoord(A.getExtent()[n?0:1]):isInfinity$1(r.get(x[1],t))&&(g[1]=R.toGlobalCoord(R.getExtent()[n?0:1]))}isNaN(y)||(g[0]=y),isNaN(S)||(g[1]=S)}r.setItemLayout(t,g)}var MarkLineView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,a){o.eachSeries(function(l){var d=MarkerModel$1.getMarkerModelFromSeries(l,"markLine");if(d){var g=d.getData(),y=inner$3(d).from,S=inner$3(d).to;y.each(function(x){updateSingleMarkerEndLayout(y,x,!0,l,a),updateSingleMarkerEndLayout(S,x,!1,l,a)}),g.each(function(x){g.setItemLayout(x,[y.getItemLayout(x),S.getItemLayout(x)])}),this.markerGroupMap.get(l.id).updateLayout()}},this)},t.prototype.renderSeries=function(n,o,a,l){var d=n.coordinateSystem,g=n.id,y=n.getData(),S=this.markerGroupMap,x=S.get(g)||S.set(g,new LineDraw$1);this.group.add(x.group);var w=createList$1(d,n,o),c=w.from,A=w.to,R=w.line;inner$3(o).from=c,inner$3(o).to=A,o.setData(R);var L=o.get("symbol"),$=o.get("symbolSize"),O=o.get("symbolRotate"),z=o.get("symbolOffset");isArray$1(L)||(L=[L,L]),isArray$1($)||($=[$,$]),isArray$1(O)||(O=[O,O]),isArray$1(z)||(z=[z,z]),w.from.each(function(j){V(c,j,!0),V(A,j,!1)}),R.each(function(j){var K=R.getItemModel(j).getModel("lineStyle").getLineStyle();R.setItemLayout(j,[c.getItemLayout(j),A.getItemLayout(j)]),K.stroke==null&&(K.stroke=c.getItemVisual(j,"style").fill),R.setItemVisual(j,{fromSymbolKeepAspect:c.getItemVisual(j,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(j,"symbolOffset"),fromSymbolRotate:c.getItemVisual(j,"symbolRotate"),fromSymbolSize:c.getItemVisual(j,"symbolSize"),fromSymbol:c.getItemVisual(j,"symbol"),toSymbolKeepAspect:A.getItemVisual(j,"symbolKeepAspect"),toSymbolOffset:A.getItemVisual(j,"symbolOffset"),toSymbolRotate:A.getItemVisual(j,"symbolRotate"),toSymbolSize:A.getItemVisual(j,"symbolSize"),toSymbol:A.getItemVisual(j,"symbol"),style:K})}),x.updateData(R),w.line.eachItemGraphicEl(function(j){getECData(j).dataModel=o,j.traverse(function(K){getECData(K).dataModel=o})});function V(j,K,Z){var q=j.getItemModel(K);updateSingleMarkerEndLayout(j,K,Z,n,l);var ie=q.getModel("itemStyle").getItemStyle();ie.fill==null&&(ie.fill=getVisualFromData(y,"color")),j.setItemVisual(K,{symbolKeepAspect:q.get("symbolKeepAspect"),symbolOffset:retrieve2(q.get("symbolOffset",!0),z[Z?0:1]),symbolRotate:retrieve2(q.get("symbolRotate",!0),O[Z?0:1]),symbolSize:retrieve2(q.get("symbolSize"),$[Z?0:1]),symbol:retrieve2(q.get("symbol",!0),L[Z?0:1]),style:ie})}this.markKeep(x),x.group.silent=o.get("silent")||n.get("silent")},t.type="markLine",t}(MarkerView$1);function createList$1(r,t,n){var o;r?o=map$1(r&&r.dimensions,function(S){var x=t.getData().getDimensionInfo(t.getData().mapDimension(S))||{};return extend(extend({},x),{name:S,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var a=new SeriesData$1(o,n),l=new SeriesData$1(o,n),d=new SeriesData$1([],n),g=map$1(n.get("data"),curry$1(markLineTransform,t,r,n));r&&(g=filter(g,curry$1(markLineFilter,r)));var y=createMarkerDimValueGetter(!!r,o);return a.initData(map$1(g,function(S){return S[0]}),null,y),l.initData(map$1(g,function(S){return S[1]}),null,y),d.initData(map$1(g,function(S){return S[2]})),d.hasItemOption=!0,{from:a,to:l,line:d}}const MarkLineView$1=MarkLineView;function install$d(r){r.registerComponentModel(MarkLineModel$1),r.registerComponentView(MarkLineView$1),r.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var MarkAreaModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,a){return new t(n,o,a)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(MarkerModel$1);const MarkAreaModel$1=MarkAreaModel;var inner$2=makeInner(),markAreaTransform=function(r,t,n,o){var a=o[0],l=o[1];if(!(!a||!l)){var d=dataTransform(r,a),g=dataTransform(r,l),y=d.coord,S=g.coord;y[0]=retrieve(y[0],-1/0),y[1]=retrieve(y[1],-1/0),S[0]=retrieve(S[0],1/0),S[1]=retrieve(S[1],1/0);var x=mergeAll([{},d,g]);return x.coord=[d.coord,g.coord],x.x0=d.x,x.y0=d.y,x.x1=g.x,x.y1=g.y,x}};function isInfinity(r){return!isNaN(r)&&!isFinite(r)}function ifMarkAreaHasOnlyDim(r,t,n,o){var a=1-r;return isInfinity(t[a])&&isInfinity(n[a])}function markAreaFilter(r,t){var n=t.coord[0],o=t.coord[1],a={coord:n,x:t.x0,y:t.y0},l={coord:o,x:t.x1,y:t.y1};return isCoordinateSystemType(r,"cartesian2d")?n&&o&&(ifMarkAreaHasOnlyDim(1,n,o)||ifMarkAreaHasOnlyDim(0,n,o))?!0:zoneFilter(r,a,l):dataFilter(r,a)||dataFilter(r,l)}function getSingleMarkerEndPoint(r,t,n,o,a){var l=o.coordinateSystem,d=r.getItemModel(t),g,y=parsePercent(d.get(n[0]),a.getWidth()),S=parsePercent(d.get(n[1]),a.getHeight());if(!isNaN(y)&&!isNaN(S))g=[y,S];else{if(o.getMarkerPosition){var x=r.getValues(["x0","y0"],t),w=r.getValues(["x1","y1"],t),c=l.clampData(x),A=l.clampData(w),R=[];n[0]==="x0"?R[0]=c[0]>A[0]?w[0]:x[0]:R[0]=c[0]>A[0]?x[0]:w[0],n[1]==="y0"?R[1]=c[1]>A[1]?w[1]:x[1]:R[1]=c[1]>A[1]?x[1]:w[1],g=o.getMarkerPosition(R,n,!0)}else{var L=r.get(n[0],t),$=r.get(n[1],t),O=[L,$];l.clampData&&l.clampData(O,O),g=l.dataToPoint(O,!0)}if(isCoordinateSystemType(l,"cartesian2d")){var z=l.getAxis("x"),V=l.getAxis("y"),L=r.get(n[0],t),$=r.get(n[1],t);isInfinity(L)?g[0]=z.toGlobalCoord(z.getExtent()[n[0]==="x0"?0:1]):isInfinity($)&&(g[1]=V.toGlobalCoord(V.getExtent()[n[1]==="y0"?0:1]))}isNaN(y)||(g[0]=y),isNaN(S)||(g[1]=S)}return g}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,a){o.eachSeries(function(l){var d=MarkerModel$1.getMarkerModelFromSeries(l,"markArea");if(d){var g=d.getData();g.each(function(y){var S=map$1(dimPermutations,function(w){return getSingleMarkerEndPoint(g,y,w,l,a)});g.setItemLayout(y,S);var x=g.getItemGraphicEl(y);x.setShape("points",S)})}},this)},t.prototype.renderSeries=function(n,o,a,l){var d=n.coordinateSystem,g=n.id,y=n.getData(),S=this.markerGroupMap,x=S.get(g)||S.set(g,{group:new Group$4});this.group.add(x.group),this.markKeep(x);var w=createList(d,n,o);o.setData(w),w.each(function(c){var A=map$1(dimPermutations,function(ie){return getSingleMarkerEndPoint(w,c,ie,n,l)}),R=d.getAxis("x").scale,L=d.getAxis("y").scale,$=R.getExtent(),O=L.getExtent(),z=[R.parse(w.get("x0",c)),R.parse(w.get("x1",c))],V=[L.parse(w.get("y0",c)),L.parse(w.get("y1",c))];asc$2(z),asc$2(V);var j=!($[0]>z[1]||$[1]<z[0]||O[0]>V[1]||O[1]<V[0]),K=!j;w.setItemLayout(c,{points:A,allClipped:K});var Z=w.getItemModel(c).getModel("itemStyle").getItemStyle(),q=getVisualFromData(y,"color");Z.fill||(Z.fill=q,isString(Z.fill)&&(Z.fill=modifyAlpha(Z.fill,.4))),Z.stroke||(Z.stroke=q),w.setItemVisual(c,"style",Z)}),w.diff(inner$2(x).data).add(function(c){var A=w.getItemLayout(c);if(!A.allClipped){var R=new Polygon$1({shape:{points:A.points}});w.setItemGraphicEl(c,R),x.group.add(R)}}).update(function(c,A){var R=inner$2(x).data.getItemGraphicEl(A),L=w.getItemLayout(c);L.allClipped?R&&x.group.remove(R):(R?updateProps$1(R,{shape:{points:L.points}},o,c):R=new Polygon$1({shape:{points:L.points}}),w.setItemGraphicEl(c,R),x.group.add(R))}).remove(function(c){var A=inner$2(x).data.getItemGraphicEl(c);x.group.remove(A)}).execute(),w.eachItemGraphicEl(function(c,A){var R=w.getItemModel(A),L=w.getItemVisual(A,"style");c.useStyle(w.getItemVisual(A,"style")),setLabelStyle(c,getLabelStatesModels(R),{labelFetcher:o,labelDataIndex:A,defaultText:w.getName(A)||"",inheritColor:isString(L.fill)?modifyAlpha(L.fill,1):"#000"}),setStatesStylesFromModel(c,R),toggleHoverEmphasis(c,null,null,R.get(["emphasis","disabled"])),getECData(c).dataModel=o}),inner$2(x).data=w,x.group.silent=o.get("silent")||n.get("silent")},t.type="markArea",t}(MarkerView$1);function createList(r,t,n){var o,a,l=["x0","y0","x1","y1"];if(r){var d=map$1(r&&r.dimensions,function(S){var x=t.getData(),w=x.getDimensionInfo(x.mapDimension(S))||{};return extend(extend({},w),{name:S,ordinalMeta:null})});a=map$1(l,function(S,x){return{name:S,type:d[x%2].type}}),o=new SeriesData$1(a,n)}else a=[{name:"value",type:"float"}],o=new SeriesData$1(a,n);var g=map$1(n.get("data"),curry$1(markAreaTransform,t,r,n));r&&(g=filter(g,curry$1(markAreaFilter,r)));var y=r?function(S,x,w,c){var A=S.coord[Math.floor(c/2)][c%2];return parseDataValue(A,a[c])}:function(S,x,w,c){return parseDataValue(S.value,a[c])};return o.initData(g,null,y),o.hasItemOption=!0,o}const MarkAreaView$1=MarkAreaView;function install$c(r){r.registerComponentModel(MarkAreaModel$1),r.registerComponentView(MarkAreaView$1),r.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var getDefaultSelectorOptions=function(r,t){if(t==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return t.prototype.init=function(n,o,a){this.mergeDefaultAndTheme(n,a),n.selected=n.selected||{},this._updateSelector(n)},t.prototype.mergeOption=function(n,o){r.prototype.mergeOption.call(this,n,o),this._updateSelector(n)},t.prototype._updateSelector=function(n){var o=n.selector,a=this.ecModel;o===!0&&(o=n.selector=["all","inverse"]),isArray$1(o)&&each$f(o,function(l,d){isString(l)&&(l={type:l}),o[d]=merge(l,getDefaultSelectorOptions(a,l.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var o=!1,a=0;a<n.length;a++){var l=n[a].get("name");if(this.isSelected(l)){this.select(l),o=!0;break}}!o&&this.select(n[0].get("name"))}},t.prototype._updateData=function(n){var o=[],a=[];n.eachRawSeries(function(y){var S=y.name;a.push(S);var x;if(y.legendVisualProvider){var w=y.legendVisualProvider,c=w.getAllNames();n.isSeriesFiltered(y)||(a=a.concat(c)),c.length?o=o.concat(c):x=!0}else x=!0;x&&isNameSpecified(y)&&o.push(y.name)}),this._availableNames=a;var l=this.get("data")||o,d=createHashMap(),g=map$1(l,function(y){return(isString(y)||isNumber(y))&&(y={name:y}),d.get(y.name)?null:(d.set(y.name,!0),new Model$1(y,this,this.ecModel))},this);this._data=filter(g,function(y){return!!y})},t.prototype.getData=function(){return this._data},t.prototype.select=function(n){var o=this.option.selected,a=this.get("selectedMode");if(a==="single"){var l=this._data;each$f(l,function(d){o[d.get("name")]=!1})}o[n]=!0},t.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},t.prototype.toggleSelected=function(n){var o=this.option.selected;o.hasOwnProperty(n)||(o[n]=!0),this[o[n]?"unSelect":"select"](n)},t.prototype.allSelect=function(){var n=this._data,o=this.option.selected;each$f(n,function(a){o[a.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var n=this._data,o=this.option.selected;each$f(n,function(a){var l=a.get("name",!0);o.hasOwnProperty(l)||(o[l]=!0),o[l]=!o[l]})},t.prototype.isSelected=function(n){var o=this.option.selected;return!(o.hasOwnProperty(n)&&!o[n])&&indexOf(this._availableNames,n)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(ComponentModel$1);const LegendModel$1=LegendModel;var curry=curry$1,each$3=each$f,Group$1=Group$4,LegendView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return t.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(n,o,a){var l=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var d=n.get("align"),g=n.get("orient");(!d||d==="auto")&&(d=n.get("left")==="right"&&g==="vertical"?"right":"left");var y=n.get("selector",!0),S=n.get("selectorPosition",!0);y&&(!S||S==="auto")&&(S=g==="horizontal"?"end":"start"),this.renderInner(d,n,o,a,y,g,S);var x=n.getBoxLayoutParams(),w={width:a.getWidth(),height:a.getHeight()},c=n.get("padding"),A=getLayoutRect(x,w,c),R=this.layoutInner(n,d,A,l,y,S),L=getLayoutRect(defaults({width:R.width,height:R.height},x),w,c);this.group.x=L.x-R.x,this.group.y=L.y-R.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(R,n))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(n,o,a,l,d,g,y){var S=this.getContentGroup(),x=createHashMap(),w=o.get("selectedMode"),c=[];a.eachRawSeries(function(A){!A.get("legendHoverLink")&&c.push(A.id)}),each$3(o.getData(),function(A,R){var L=A.get("name");if(!this.newlineDisabled&&(L===""||L===`
`)){var $=new Group$1;$.newline=!0,S.add($);return}var O=a.getSeriesByName(L)[0];if(!x.get(L))if(O){var z=O.getData(),V=z.getVisual("legendLineStyle")||{},j=z.getVisual("legendIcon"),K=z.getVisual("style"),Z=this._createItem(O,L,R,A,o,n,V,K,j,w,l);Z.on("click",curry(dispatchSelectAction,L,null,l,c)).on("mouseover",curry(dispatchHighlightAction,O.name,null,l,c)).on("mouseout",curry(dispatchDownplayAction,O.name,null,l,c)),x.set(L,!0)}else a.eachRawSeries(function(q){if(!x.get(L)&&q.legendVisualProvider){var ie=q.legendVisualProvider;if(!ie.containName(L))return;var te=ie.indexOfName(L),oe=ie.getItemVisual(te,"style"),re=ie.getItemVisual(te,"legendIcon"),he=parse(oe.fill);he&&he[3]===0&&(he[3]=.2,oe=extend(extend({},oe),{fill:stringify(he,"rgba")}));var _e=this._createItem(q,L,R,A,o,n,{},oe,re,w,l);_e.on("click",curry(dispatchSelectAction,null,L,l,c)).on("mouseover",curry(dispatchHighlightAction,null,L,l,c)).on("mouseout",curry(dispatchDownplayAction,null,L,l,c)),x.set(L,!0)}},this)},this),d&&this._createSelector(d,o,l,g,y)},t.prototype._createSelector=function(n,o,a,l,d){var g=this.getSelectorGroup();each$3(n,function(S){var x=S.type,w=new ZRText$1({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:x==="all"?"legendAllSelect":"legendInverseSelect"})}});g.add(w);var c=o.getModel("selectorLabel"),A=o.getModel(["emphasis","selectorLabel"]);setLabelStyle(w,{normal:c,emphasis:A},{defaultText:S.title}),enableHoverEmphasis(w)})},t.prototype._createItem=function(n,o,a,l,d,g,y,S,x,w,c){var A=n.visualDrawType,R=d.get("itemWidth"),L=d.get("itemHeight"),$=d.isSelected(o),O=l.get("symbolRotate"),z=l.get("symbolKeepAspect"),V=l.get("icon");x=V||x||"roundRect";var j=getLegendStyle(x,l,y,S,A,$,c),K=new Group$1,Z=l.getModel("textStyle");if(isFunction(n.getLegendIcon)&&(!V||V==="inherit"))K.add(n.getLegendIcon({itemWidth:R,itemHeight:L,icon:x,iconRotate:O,itemStyle:j.itemStyle,lineStyle:j.lineStyle,symbolKeepAspect:z}));else{var q=V==="inherit"&&n.getData().getVisual("symbol")?O==="inherit"?n.getData().getVisual("symbolRotate"):O:0;K.add(getDefaultLegendIcon({itemWidth:R,itemHeight:L,icon:x,iconRotate:q,itemStyle:j.itemStyle,lineStyle:j.lineStyle,symbolKeepAspect:z}))}var ie=g==="left"?R+5:-5,te=g,oe=d.get("formatter"),re=o;isString(oe)&&oe?re=oe.replace("{name}",o??""):isFunction(oe)&&(re=oe(o));var he=$?Z.getTextColor():l.get("inactiveColor");K.add(new ZRText$1({style:createTextStyle$1(Z,{text:re,x:ie,y:L/2,fill:he,align:te,verticalAlign:"middle"},{inheritColor:he})}));var _e=new Rect$3({shape:K.getBoundingRect(),invisible:!0}),me=l.getModel("tooltip");return me.get("show")&&setTooltipConfig({el:_e,componentModel:d,itemName:o,itemTooltipOption:me.option}),K.add(_e),K.eachChild(function(be){be.silent=!0}),_e.silent=!w,this.getContentGroup().add(K),enableHoverEmphasis(K),K.__legendDataIndex=a,K},t.prototype.layoutInner=function(n,o,a,l,d,g){var y=this.getContentGroup(),S=this.getSelectorGroup();box(n.get("orient"),y,n.get("itemGap"),a.width,a.height);var x=y.getBoundingRect(),w=[-x.x,-x.y];if(S.markRedraw(),y.markRedraw(),d){box("horizontal",S,n.get("selectorItemGap",!0));var c=S.getBoundingRect(),A=[-c.x,-c.y],R=n.get("selectorButtonGap",!0),L=n.getOrient().index,$=L===0?"width":"height",O=L===0?"height":"width",z=L===0?"y":"x";g==="end"?A[L]+=x[$]+R:w[L]+=c[$]+R,A[1-L]+=x[O]/2-c[O]/2,S.x=A[0],S.y=A[1],y.x=w[0],y.y=w[1];var V={x:0,y:0};return V[$]=x[$]+R+c[$],V[O]=Math.max(x[O],c[O]),V[z]=Math.min(0,c[z]+A[1-L]),V}else return y.x=w[0],y.y=w[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ComponentView$1);function getLegendStyle(r,t,n,o,a,l,d){function g($,O){$.lineWidth==="auto"&&($.lineWidth=O.lineWidth>0?2:0),each$3($,function(z,V){$[V]==="inherit"&&($[V]=O[V])})}var y=t.getModel("itemStyle"),S=y.getItemStyle(),x=r.lastIndexOf("empty",0)===0?"fill":"stroke",w=y.getShallow("decal");S.decal=!w||w==="inherit"?o.decal:createOrUpdatePatternFromDecal(w,d),S.fill==="inherit"&&(S.fill=o[a]),S.stroke==="inherit"&&(S.stroke=o[x]),S.opacity==="inherit"&&(S.opacity=(a==="fill"?o:n).opacity),g(S,o);var c=t.getModel("lineStyle"),A=c.getLineStyle();if(g(A,n),S.fill==="auto"&&(S.fill=o.fill),S.stroke==="auto"&&(S.stroke=o.fill),A.stroke==="auto"&&(A.stroke=o.fill),!l){var R=t.get("inactiveBorderWidth"),L=S[x];S.lineWidth=R==="auto"?o.lineWidth>0&&L?2:0:S.lineWidth,S.fill=t.get("inactiveColor"),S.stroke=t.get("inactiveBorderColor"),A.stroke=c.get("inactiveColor"),A.lineWidth=c.get("inactiveWidth")}return{itemStyle:S,lineStyle:A}}function getDefaultLegendIcon(r){var t=r.icon||"roundRect",n=createSymbol$1(t,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return n.setStyle(r.itemStyle),n.rotation=(r.iconRotate||0)*Math.PI/180,n.setOrigin([r.itemWidth/2,r.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function dispatchSelectAction(r,t,n,o){dispatchDownplayAction(r,t,n,o),n.dispatchAction({type:"legendToggleSelect",name:r??t}),dispatchHighlightAction(r,t,n,o)}function isUseHoverLayer(r){for(var t=r.getZr().storage.getDisplayList(),n,o=0,a=t.length;o<a&&!(n=t[o].states.emphasis);)o++;return n&&n.hoverLayer}function dispatchHighlightAction(r,t,n,o){isUseHoverLayer(n)||n.dispatchAction({type:"highlight",seriesName:r,name:t,excludeSeriesId:o})}function dispatchDownplayAction(r,t,n,o){isUseHoverLayer(n)||n.dispatchAction({type:"downplay",seriesName:r,name:t,excludeSeriesId:o})}const LegendView$1=LegendView;function legendFilter(r){var t=r.findComponents({mainType:"legend"});t&&t.length&&r.filterSeries(function(n){for(var o=0;o<t.length;o++)if(!t[o].isSelected(n.name))return!1;return!0})}function legendSelectActionHandler(r,t,n){var o={},a=r==="toggleSelected",l;return n.eachComponent("legend",function(d){a&&l!=null?d[l?"select":"unSelect"](t.name):r==="allSelect"||r==="inverseSelect"?d[r]():(d[r](t.name),l=d.isSelected(t.name));var g=d.getData();each$f(g,function(y){var S=y.get("name");if(!(S===`
`||S==="")){var x=d.isSelected(S);o.hasOwnProperty(S)?o[S]=o[S]&&x:o[S]=x}})}),r==="allSelect"||r==="inverseSelect"?{selected:o}:{name:t.name,selected:o}}function installLegendAction(r){r.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),r.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),r.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(r){r.registerComponentModel(LegendModel$1),r.registerComponentView(LegendView$1),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),r.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(r)}var ScrollableLegendModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},t.prototype.init=function(n,o,a){var l=getLayoutParams(n);r.prototype.init.call(this,n,o,a),mergeAndNormalizeLayoutParams(this,n,l)},t.prototype.mergeOption=function(n,o){r.prototype.mergeOption.call(this,n,o),mergeAndNormalizeLayoutParams(this,this.option,n)},t.type="legend.scroll",t.defaultOption=inheritDefaultOption(LegendModel$1.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(LegendModel$1);function mergeAndNormalizeLayoutParams(r,t,n){var o=r.getOrient(),a=[1,1];a[o.index]=0,mergeLayoutParam(t,n,{type:"box",ignoreSize:!!a})}const ScrollableLegendModel$1=ScrollableLegendModel;var Group=Group$4,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return t.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},t.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(n,o,a,l,d,g,y){var S=this;r.prototype.renderInner.call(this,n,o,a,l,d,g,y);var x=this._controllerGroup,w=o.get("pageIconSize",!0),c=isArray$1(w)?w:[w,w];R("pagePrev",0);var A=o.getModel("pageTextStyle");x.add(new ZRText$1({name:"pageText",style:{text:"xx/xx",fill:A.getTextColor(),font:A.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),R("pageNext",1);function R(L,$){var O=L+"DataIndex",z=createIcon(o.get("pageIcons",!0)[o.getOrient().name][$],{onclick:bind$1(S._pageGo,S,O,o,l)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});z.name=L,x.add(z)}},t.prototype.layoutInner=function(n,o,a,l,d,g){var y=this.getSelectorGroup(),S=n.getOrient().index,x=WH[S],w=XY[S],c=WH[1-S],A=XY[1-S];d&&box("horizontal",y,n.get("selectorItemGap",!0));var R=n.get("selectorButtonGap",!0),L=y.getBoundingRect(),$=[-L.x,-L.y],O=clone$4(a);d&&(O[x]=a[x]-L[x]-R);var z=this._layoutContentAndController(n,l,O,S,x,c,A,w);if(d){if(g==="end")$[S]+=z[x]+R;else{var V=L[x]+R;$[S]-=V,z[w]-=V}z[x]+=L[x]+R,$[1-S]+=z[A]+z[c]/2-L[c]/2,z[c]=Math.max(z[c],L[c]),z[A]=Math.min(z[A],L[A]+$[1-S]),y.x=$[0],y.y=$[1],y.markRedraw()}return z},t.prototype._layoutContentAndController=function(n,o,a,l,d,g,y,S){var x=this.getContentGroup(),w=this._containerGroup,c=this._controllerGroup;box(n.get("orient"),x,n.get("itemGap"),l?a.width:null,l?null:a.height),box("horizontal",c,n.get("pageButtonItemGap",!0));var A=x.getBoundingRect(),R=c.getBoundingRect(),L=this._showController=A[d]>a[d],$=[-A.x,-A.y];o||($[l]=x[S]);var O=[0,0],z=[-R.x,-R.y],V=retrieve2(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(L){var j=n.get("pageButtonPosition",!0);j==="end"?z[l]+=a[d]-R[d]:O[l]+=R[d]+V}z[1-l]+=A[g]/2-R[g]/2,x.setPosition($),w.setPosition(O),c.setPosition(z);var K={x:0,y:0};if(K[d]=L?a[d]:A[d],K[g]=Math.max(A[g],R[g]),K[y]=Math.min(0,R[y]+z[1-l]),w.__rectSize=a[d],L){var Z={x:0,y:0};Z[d]=Math.max(a[d]-R[d]-V,0),Z[g]=K[g],w.setClipPath(new Rect$3({shape:Z})),w.__rectSize=Z[d]}else c.eachChild(function(ie){ie.attr({invisible:!0,silent:!0})});var q=this._getPageInfo(n);return q.pageIndex!=null&&updateProps$1(x,{x:q.contentPosition[0],y:q.contentPosition[1]},L?n:null),this._updatePageInfoView(n,q),K},t.prototype._pageGo=function(n,o,a){var l=this._getPageInfo(o)[n];l!=null&&a.dispatchAction({type:"legendScroll",scrollDataIndex:l,legendId:o.id})},t.prototype._updatePageInfoView=function(n,o){var a=this._controllerGroup;each$f(["pagePrev","pageNext"],function(x){var w=x+"DataIndex",c=o[w]!=null,A=a.childOfName(x);A&&(A.setStyle("fill",c?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),A.cursor=c?"pointer":"default")});var l=a.childOfName("pageText"),d=n.get("pageFormatter"),g=o.pageIndex,y=g!=null?g+1:0,S=o.pageCount;l&&d&&l.setStyle("text",isString(d)?d.replace("{current}",y==null?"":y+"").replace("{total}",S==null?"":S+""):d({current:y,total:S}))},t.prototype._getPageInfo=function(n){var o=n.get("scrollDataIndex",!0),a=this.getContentGroup(),l=this._containerGroup.__rectSize,d=n.getOrient().index,g=WH[d],y=XY[d],S=this._findTargetItemIndex(o),x=a.children(),w=x[S],c=x.length,A=c?1:0,R={contentPosition:[a.x,a.y],pageCount:A,pageIndex:A-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!w)return R;var L=j(w);R.contentPosition[d]=-L.s;for(var $=S+1,O=L,z=L,V=null;$<=c;++$)V=j(x[$]),(!V&&z.e>O.s+l||V&&!K(V,O.s))&&(z.i>O.i?O=z:O=V,O&&(R.pageNextDataIndex==null&&(R.pageNextDataIndex=O.i),++R.pageCount)),z=V;for(var $=S-1,O=L,z=L,V=null;$>=-1;--$)V=j(x[$]),(!V||!K(z,V.s))&&O.i<z.i&&(z=O,R.pagePrevDataIndex==null&&(R.pagePrevDataIndex=O.i),++R.pageCount,++R.pageIndex),O=V;return R;function j(Z){if(Z){var q=Z.getBoundingRect(),ie=q[y]+Z[y];return{s:ie,e:ie+q[g],i:Z.__legendDataIndex}}}function K(Z,q){return Z.e>=q&&Z.s<=q+l}},t.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var o,a=this.getContentGroup(),l;return a.eachChild(function(d,g){var y=d.__legendDataIndex;l==null&&y!=null&&(l=g),y===n&&(o=g)}),o??l},t.type="legend.scroll",t}(LegendView$1);const ScrollableLegendView$1=ScrollableLegendView;function installScrollableLegendAction(r){r.registerAction("legendScroll","legendscroll",function(t,n){var o=t.scrollDataIndex;o!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:t},function(a){a.setScrollDataIndex(o)})})}function install$a(r){use(install$b),r.registerComponentModel(ScrollableLegendModel$1),r.registerComponentView(ScrollableLegendView$1),installScrollableLegendAction(r)}function install$9(r){use(install$b),use(install$a)}var InsideZoomModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.inside",t.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(DataZoomModel$1);const InsideZoomModel$1=InsideZoomModel;var inner$1=makeInner();function setViewInfoToCoordSysRecord(r,t,n){inner$1(r).coordSysRecordMap.each(function(o){var a=o.dataZoomInfoMap.get(t.uid);a&&(a.getRange=n)})}function disposeCoordSysRecordIfNeeded(r,t){for(var n=inner$1(r).coordSysRecordMap,o=n.keys(),a=0;a<o.length;a++){var l=o[a],d=n.get(l),g=d.dataZoomInfoMap;if(g){var y=t.uid,S=g.get(y);S&&(g.removeKey(y),g.keys().length||disposeCoordSysRecord(n,d))}}}function disposeCoordSysRecord(r,t){if(t){r.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function createCoordSysRecord(r,t){var n={model:t,containsPoint:curry$1(containsPoint,t),dispatchAction:curry$1(dispatchAction,r),dataZoomInfoMap:null,controller:null},o=n.controller=new RoamController$1(r.getZr());return each$f(["pan","zoom","scrollMove"],function(a){o.on(a,function(l){var d=[];n.dataZoomInfoMap.each(function(g){if(l.isAvailableBehavior(g.model.option)){var y=(g.getRange||{})[a],S=y&&y(g.dzReferCoordSysInfo,n.model.mainType,n.controller,l);!g.model.get("disabled",!0)&&S&&d.push({dataZoomId:g.model.id,start:S[0],end:S[1]})}}),d.length&&n.dispatchAction(d)})}),n}function dispatchAction(r,t){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function containsPoint(r,t,n,o){return r.coordinateSystem.containPoint([n,o])}function mergeControllerParams(r){var t,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return r.each(function(l){var d=l.model,g=d.get("disabled",!0)?!1:d.get("zoomLock",!0)?"move":!0;o[n+g]>o[n+t]&&(t=g),a=a&&d.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}function installDataZoomRoamProcessor(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(t,n){var o=inner$1(n),a=o.coordSysRecordMap||(o.coordSysRecordMap=createHashMap());a.each(function(l){l.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(l){var d=collectReferCoordSysModelInfo(l);each$f(d.infoList,function(g){var y=g.model.uid,S=a.get(y)||a.set(y,createCoordSysRecord(n,g.model)),x=S.dataZoomInfoMap||(S.dataZoomInfoMap=createHashMap());x.set(l.uid,{dzReferCoordSysInfo:g,model:l,getRange:null})})}),a.each(function(l){var d=l.controller,g,y=l.dataZoomInfoMap;if(y){var S=y.keys()[0];S!=null&&(g=y.get(S))}if(!g){disposeCoordSysRecord(a,l);return}var x=mergeControllerParams(y);d.enable(x.controlType,x.opt),d.setPointerChecker(l.containsPoint),createOrUpdate(l,"dispatchAction",g.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return t.prototype.render=function(n,o,a){if(r.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),setViewInfoToCoordSysRecord(a,n,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(DataZoomView$1),getRangeHandlers={zoom:function(r,t,n,o){var a=this.range,l=a.slice(),d=r.axisModels[0];if(d){var g=getDirectionInfo[t](null,[o.originX,o.originY],d,n,r),y=(g.signal>0?g.pixelStart+g.pixelLength-g.pixel:g.pixel-g.pixelStart)/g.pixelLength*(l[1]-l[0])+l[0],S=Math.max(1/o.scale,0);l[0]=(l[0]-y)*S+y,l[1]=(l[1]-y)*S+y;var x=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,l,[0,100],0,x.minSpan,x.maxSpan),this.range=l,a[0]!==l[0]||a[1]!==l[1])return l}},pan:makeMover(function(r,t,n,o,a,l){var d=getDirectionInfo[o]([l.oldX,l.oldY],[l.newX,l.newY],t,a,n);return d.signal*(r[1]-r[0])*d.pixel/d.pixelLength}),scrollMove:makeMover(function(r,t,n,o,a,l){var d=getDirectionInfo[o]([0,0],[l.scrollDelta,l.scrollDelta],t,a,n);return d.signal*(r[1]-r[0])*l.scrollDelta})};function makeMover(r){return function(t,n,o,a){var l=this.range,d=l.slice(),g=t.axisModels[0];if(g){var y=r(d,g,t,n,o,a);if(sliderMove(y,d,[0,100],"all"),this.range=d,l[0]!==d[0]||l[1]!==d[1])return d}}}var getDirectionInfo={grid:function(r,t,n,o,a){var l=n.axis,d={},g=a.model.coordinateSystem.getRect();return r=r||[0,0],l.dim==="x"?(d.pixel=t[0]-r[0],d.pixelLength=g.width,d.pixelStart=g.x,d.signal=l.inverse?1:-1):(d.pixel=t[1]-r[1],d.pixelLength=g.height,d.pixelStart=g.y,d.signal=l.inverse?-1:1),d},polar:function(r,t,n,o,a){var l=n.axis,d={},g=a.model.coordinateSystem,y=g.getRadiusAxis().getExtent(),S=g.getAngleAxis().getExtent();return r=r?g.pointToCoord(r):[0,0],t=g.pointToCoord(t),n.mainType==="radiusAxis"?(d.pixel=t[0]-r[0],d.pixelLength=y[1]-y[0],d.pixelStart=y[0],d.signal=l.inverse?1:-1):(d.pixel=t[1]-r[1],d.pixelLength=S[1]-S[0],d.pixelStart=S[0],d.signal=l.inverse?-1:1),d},singleAxis:function(r,t,n,o,a){var l=n.axis,d=a.model.coordinateSystem.getRect(),g={};return r=r||[0,0],l.orient==="horizontal"?(g.pixel=t[0]-r[0],g.pixelLength=d.width,g.pixelStart=d.x,g.signal=l.inverse?1:-1):(g.pixel=t[1]-r[1],g.pixelLength=d.height,g.pixelStart=d.y,g.signal=l.inverse?-1:1),g}};const InsideZoomView$1=InsideZoomView;function install$8(r){installCommon$1(r),r.registerComponentModel(InsideZoomModel$1),r.registerComponentView(InsideZoomView$1),installDataZoomRoamProcessor(r)}var SliderZoomModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(DataZoomModel$1);const SliderZoomModel$1=SliderZoomModel;var Rect=Rect$3,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return t.prototype.init=function(n,o){this.api=o,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},t.prototype.render=function(n,o,a,l){if(r.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!l||l.type!=="dataZoom"||l.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Group$4;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(o),this._positionGroup()},t.prototype._resetLocation=function(){var n=this.dataZoomModel,o=this.api,a=n.get("brushSelect"),l=a?DEFAULT_MOVE_HANDLE_SIZE:0,d=this._findCoordRect(),g={width:o.getWidth(),height:o.getHeight()},y=this._orient===HORIZONTAL?{right:g.width-d.x-d.width,top:g.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-l,width:d.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:d.y,width:DEFAULT_FILLER_SIZE,height:d.height},S=getLayoutParams(n.option);each$f(["right","top","width","height"],function(w){S[w]==="ph"&&(S[w]=y[w])});var x=getLayoutRect(S,g);this._location={x:x.x,y:x.y},this._size=[x.width,x.height],this._orient===VERTICAL&&this._size.reverse()},t.prototype._positionGroup=function(){var n=this.group,o=this._location,a=this._orient,l=this.dataZoomModel.getFirstTargetAxisModel(),d=l&&l.get("inverse"),g=this._displayables.sliderGroup,y=(this._dataShadowInfo||{}).otherAxisInverse;g.attr(a===HORIZONTAL&&!d?{scaleY:y?1:-1,scaleX:1}:a===HORIZONTAL&&d?{scaleY:y?1:-1,scaleX:-1}:a===VERTICAL&&!d?{scaleY:y?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:y?-1:1,scaleX:-1,rotation:Math.PI/2});var S=n.getBoundingRect([g]);n.x=o.x-S.x,n.y=o.y-S.y,n.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var n=this.dataZoomModel,o=this._size,a=this._displayables.sliderGroup,l=n.get("brushSelect");a.add(new Rect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var d=new Rect({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),g=this.api.getZr();l?(d.on("mousedown",this._onBrushStart,this),d.cursor="crosshair",g.on("mousemove",this._onBrush),g.on("mouseup",this._onBrushEnd)):(g.off("mousemove",this._onBrush),g.off("mouseup",this._onBrushEnd)),a.add(d)},t.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var o=this._size,a=this._shadowSize||[],l=n.series,d=l.getRawData(),g=l.getShadowDim&&l.getShadowDim(),y=g&&d.getDimensionInfo(g)?l.getShadowDim():n.otherDim;if(y==null)return;var S=this._shadowPolygonPts,x=this._shadowPolylinePts;if(d!==this._shadowData||y!==this._shadowDim||o[0]!==a[0]||o[1]!==a[1]){var w=d.getDataExtent(y),c=(w[1]-w[0])*.3;w=[w[0]-c,w[1]+c];var A=[0,o[1]],R=[0,o[0]],L=[[o[0],0],[0,0]],$=[],O=R[1]/(d.count()-1),z=0,V=Math.round(d.count()/o[0]),j;d.each([y],function(te,oe){if(V>0&&oe%V){z+=O;return}var re=te==null||isNaN(te)||te==="",he=re?0:linearMap$2(te,w,A,!0);re&&!j&&oe?(L.push([L[L.length-1][0],0]),$.push([$[$.length-1][0],0])):!re&&j&&(L.push([z,0]),$.push([z,0])),L.push([z,he]),$.push([z,he]),z+=O,j=re}),S=this._shadowPolygonPts=L,x=this._shadowPolylinePts=$}this._shadowData=d,this._shadowDim=y,this._shadowSize=[o[0],o[1]];var K=this.dataZoomModel;function Z(te){var oe=K.getModel(te?"selectedDataBackground":"dataBackground"),re=new Group$4,he=new Polygon$1({shape:{points:S},segmentIgnoreThreshold:1,style:oe.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),_e=new Polyline$3({shape:{points:x},segmentIgnoreThreshold:1,style:oe.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return re.add(he),re.add(_e),re}for(var q=0;q<3;q++){var ie=Z(q===1);this._displayables.sliderGroup.add(ie),this._displayables.dataShadowSegs.push(ie)}},t.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,o=n.get("showDataShadow");if(o!==!1){var a,l=this.ecModel;return n.eachTargetAxis(function(d,g){var y=n.getAxisProxy(d,g).getTargetSeriesModels();each$f(y,function(S){if(!a&&!(o!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,S.get("type"))<0)){var x=l.getComponent(getAxisMainType(d),g).axis,w=getOtherDim(d),c,A=S.coordinateSystem;w!=null&&A.getOtherAxis&&(c=A.getOtherAxis(x).inverse),w=S.getData().mapDimension(w),a={thisAxis:x,series:S,thisDim:d,otherDim:w,otherAxisInverse:c}}},this)},this),a}},t.prototype._renderHandle=function(){var n=this.group,o=this._displayables,a=o.handles=[null,null],l=o.handleLabels=[null,null],d=this._displayables.sliderGroup,g=this._size,y=this.dataZoomModel,S=this.api,x=y.get("borderRadius")||0,w=y.get("brushSelect"),c=o.filler=new Rect({silent:w,style:{fill:y.get("fillerColor")},textConfig:{position:"inside"}});d.add(c),d.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:g[0],height:g[1],r:x},style:{stroke:y.get("dataBackgroundColor")||y.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(V){var j=y.get("handleIcon");!symbolBuildProxies[j]&&j.indexOf("path://")<0&&j.indexOf("image://")<0&&(j="path://"+j);var K=createSymbol$1(j,-1,0,2,2,null,!0);K.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,V),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var Z=K.getBoundingRect(),q=y.get("handleSize");this._handleHeight=parsePercent(q,this._size[1]),this._handleWidth=Z.width/Z.height*this._handleHeight,K.setStyle(y.getModel("handleStyle").getItemStyle()),K.style.strokeNoScale=!0,K.rectHover=!0,K.ensureState("emphasis").style=y.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(K);var ie=y.get("handleColor");ie!=null&&(K.style.fill=ie),d.add(a[V]=K);var te=y.getModel("textStyle");n.add(l[V]=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle$1(te,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:te.getTextColor(),font:te.getFont()}),z2:10}))},this);var A=c;if(w){var R=parsePercent(y.get("moveHandleSize"),g[1]),L=o.moveHandle=new Rect$3({style:y.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:g[1]-.5,height:R}}),$=R*.8,O=o.moveHandleIcon=createSymbol$1(y.get("moveHandleIcon"),-$/2,-$/2,$,$,"#fff",!0);O.silent=!0,O.y=g[1]+R/2-.5,L.ensureState("emphasis").style=y.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var z=Math.min(g[1]/2,Math.max(R,10));A=o.moveZone=new Rect$3({invisible:!0,shape:{y:g[1]-z,height:R+z}}),A.on("mouseover",function(){S.enterEmphasis(L)}).on("mouseout",function(){S.leaveEmphasis(L)}),d.add(L),d.add(O),d.add(A)}A.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[linearMap$2(n[0],[0,100],o,!0),linearMap$2(n[1],[0,100],o,!0)]},t.prototype._updateInterval=function(n,o){var a=this.dataZoomModel,l=this._handleEnds,d=this._getViewExtent(),g=a.findRepresentativeAxisProxy().getMinMaxSpan(),y=[0,100];sliderMove(o,l,d,a.get("zoomLock")?"all":n,g.minSpan!=null?linearMap$2(g.minSpan,y,d,!0):null,g.maxSpan!=null?linearMap$2(g.maxSpan,y,d,!0):null);var S=this._range,x=this._range=asc$2([linearMap$2(l[0],d,y,!0),linearMap$2(l[1],d,y,!0)]);return!S||S[0]!==x[0]||S[1]!==x[1]},t.prototype._updateView=function(n){var o=this._displayables,a=this._handleEnds,l=asc$2(a.slice()),d=this._size;each$f([0,1],function(A){var R=o.handles[A],L=this._handleHeight;R.attr({scaleX:L/2,scaleY:L/2,x:a[A]+(A?-1:1),y:d[1]/2-L/2})},this),o.filler.setShape({x:l[0],y:0,width:l[1]-l[0],height:d[1]});var g={x:l[0],width:l[1]-l[0]};o.moveHandle&&(o.moveHandle.setShape(g),o.moveZone.setShape(g),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",g.x+g.width/2));for(var y=o.dataShadowSegs,S=[0,l[0],l[1],d[0]],x=0;x<y.length;x++){var w=y[x],c=w.getClipPath();c||(c=new Rect$3,w.setClipPath(c)),c.setShape({x:S[x],y:0,width:S[x+1]-S[x],height:d[1]})}this._updateDataInfo(n)},t.prototype._updateDataInfo=function(n){var o=this.dataZoomModel,a=this._displayables,l=a.handleLabels,d=this._orient,g=["",""];if(o.get("showDetail")){var y=o.findRepresentativeAxisProxy();if(y){var S=y.getAxisModel().axis,x=this._range,w=n?y.calculateDataWindow({start:x[0],end:x[1]}).valueWindow:y.getDataValueWindow();g=[this._formatLabel(w[0],S),this._formatLabel(w[1],S)]}}var c=asc$2(this._handleEnds.slice());A.call(this,0),A.call(this,1);function A(R){var L=getTransform$1(a.handles[R].parent,this.group),$=transformDirection(R===0?"right":"left",L),O=this._handleWidth/2+LABEL_GAP,z=applyTransform([c[R]+(R===0?-O:O),this._size[1]/2],L);l[R].setStyle({x:z[0],y:z[1],verticalAlign:d===HORIZONTAL?"middle":$,align:d===HORIZONTAL?$:"center",text:g[R]})}},t.prototype._formatLabel=function(n,o){var a=this.dataZoomModel,l=a.get("labelFormatter"),d=a.get("labelPrecision");(d==null||d==="auto")&&(d=o.getPixelPrecision());var g=n==null||isNaN(n)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(d,20));return isFunction(l)?l(n,g):isString(l)?l.replace("{value}",g):g},t.prototype._showDataInfo=function(n){n=this._dragging||n;var o=this._displayables,a=o.handleLabels;a[0].attr("invisible",!n),a[1].attr("invisible",!n),o.moveHandle&&this.api[n?"enterEmphasis":"leaveEmphasis"](o.moveHandle,1)},t.prototype._onDragMove=function(n,o,a,l){this._dragging=!0,stop(l.event);var d=this._displayables.sliderGroup.getLocalTransform(),g=applyTransform([o,a],d,!0),y=this._updateInterval(n,g[0]),S=this.dataZoomModel.get("realtime");this._updateView(!S),y&&S&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(n){var o=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(a[0]<0||a[0]>o[0]||a[1]<0||a[1]>o[1])){var l=this._handleEnds,d=(l[0]+l[1])/2,g=this._updateInterval("all",a[0]-d);this._updateView(),g&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(n){var o=n.offsetX,a=n.offsetY;this._brushStart=new Point$1(o,a),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(n){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var a=o.shape,l=+new Date;if(!(l-this._brushStartTime<200&&Math.abs(a.width)<5)){var d=this._getViewExtent(),g=[0,100];this._range=asc$2([linearMap$2(a.x,d,g,!0),linearMap$2(a.x+a.width,d,g,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(n){this._brushing&&(stop(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},t.prototype._updateBrushRect=function(n,o){var a=this._displayables,l=this.dataZoomModel,d=a.brushRect;d||(d=a.brushRect=new Rect({silent:!0,style:l.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(d)),d.attr("ignore",!1);var g=this._brushStart,y=this._displayables.sliderGroup,S=y.transformCoordToLocal(n,o),x=y.transformCoordToLocal(g.x,g.y),w=this._size;S[0]=Math.max(Math.min(w[0],S[0]),0),d.setShape({x:x[0],y:0,width:S[0]-x[0],height:w[1]})},t.prototype._dispatchZoomAction=function(n){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?REALTIME_ANIMATION_CONFIG:null,start:o[0],end:o[1]})},t.prototype._findCoordRect=function(){var n,o=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!n&&o.length){var a=o[0].model.coordinateSystem;n=a.getRect&&a.getRect()}if(!n){var l=this.api.getWidth(),d=this.api.getHeight();n={x:l*.2,y:d*.2,width:l*.6,height:d*.6}}return n},t.type="dataZoom.slider",t}(DataZoomView$1);function getOtherDim(r){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[r]}function getCursor$1(r){return r==="vertical"?"ns-resize":"ew-resize"}const SliderZoomView$1=SliderZoomView;function install$7(r){r.registerComponentModel(SliderZoomModel$1),r.registerComponentView(SliderZoomView$1),installCommon$1(r)}function install$6(r){use(install$8),use(install$7)}var visualDefault={get:function(r,t,n){var o=clone$4((defaultOption[r]||{})[t]);return n&&isArray$1(o)?o[o.length-1]:o}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const visualDefault$1=visualDefault;var mapVisual=VisualMapping$1.mapVisual,eachVisual=VisualMapping$1.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return t.prototype.init=function(n,o,a){this.mergeDefaultAndTheme(n,a)},t.prototype.optionUpdated=function(n,o){var a=this.option;!o&&replaceVisualOption(a,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(n){var o=this.stateList;n=bind$1(n,this),this.controllerVisuals=createVisualMappings(this.option.controller,o,n),this.targetVisuals=createVisualMappings(this.option.target,o,n)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,o=[];return n==null||n==="all"?this.ecModel.eachSeries(function(a,l){o.push(l)}):o=normalizeToArray(n),o},t.prototype.eachTargetSeries=function(n,o){each$f(this.getTargetSeriesIndices(),function(a){var l=this.ecModel.getSeriesByIndex(a);l&&n.call(o,l)},this)},t.prototype.isTargetSeries=function(n){var o=!1;return this.eachTargetSeries(function(a){a===n&&(o=!0)}),o},t.prototype.formatValueText=function(n,o,a){var l=this.option,d=l.precision,g=this.dataBound,y=l.formatter,S;a=a||["<",">"],isArray$1(n)&&(n=n.slice(),S=!0);var x=o?n:S?[w(n[0]),w(n[1])]:w(n);if(isString(y))return y.replace("{value}",S?x[0]:x).replace("{value2}",S?x[1]:x);if(isFunction(y))return S?y(n[0],n[1]):y(n);if(S)return n[0]===g[0]?a[0]+" "+x[1]:n[1]===g[1]?a[1]+" "+x[0]:x[0]+" - "+x[1];return x;function w(c){return c===g[0]?"min":c===g[1]?"max":(+c).toFixed(Math.min(d,20))}},t.prototype.resetExtent=function(){var n=this.option,o=asc([n.min,n.max]);this._dataExtent=o},t.prototype.getDataDimensionIndex=function(n){var o=this.option.dimension;if(o!=null)return n.getDimensionIndex(o);for(var a=n.dimensions,l=a.length-1;l>=0;l--){var d=a[l],g=n.getDimensionInfo(d);if(!g.isCalculationCoord)return g.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var n=this.ecModel,o=this.option,a={inRange:o.inRange,outOfRange:o.outOfRange},l=o.target||(o.target={}),d=o.controller||(o.controller={});merge(l,a),merge(d,a);var g=this.isCategory();y.call(this,l),y.call(this,d),S.call(this,l,"inRange","outOfRange"),x.call(this,d);function y(w){isArray(o.color)&&!w.inRange&&(w.inRange={color:o.color.slice().reverse()}),w.inRange=w.inRange||{color:n.get("gradientColor")}}function S(w,c,A){var R=w[c],L=w[A];R&&!L&&(L=w[A]={},each$2(R,function($,O){if(VisualMapping$1.isValidType(O)){var z=visualDefault$1.get(O,"inactive",g);z!=null&&(L[O]=z,O==="color"&&!L.hasOwnProperty("opacity")&&!L.hasOwnProperty("colorAlpha")&&(L.opacity=[0,0]))}}))}function x(w){var c=(w.inRange||{}).symbol||(w.outOfRange||{}).symbol,A=(w.inRange||{}).symbolSize||(w.outOfRange||{}).symbolSize,R=this.get("inactiveColor"),L=this.getItemSymbol(),$=L||"roundRect";each$2(this.stateList,function(O){var z=this.itemSize,V=w[O];V||(V=w[O]={color:g?R:[R]}),V.symbol==null&&(V.symbol=c&&clone$4(c)||(g?$:[$])),V.symbolSize==null&&(V.symbolSize=A&&clone$4(A)||(g?z[0]:[z[0],z[0]])),V.symbol=mapVisual(V.symbol,function(Z){return Z==="none"?$:Z});var j=V.symbolSize;if(j!=null){var K=-1/0;eachVisual(j,function(Z){Z>K&&(K=Z)}),V.symbolSize=mapVisual(j,function(Z){return linearMap$1(Z,[0,K],[0,z[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(n){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(n){return null},t.prototype.getVisualMeta=function(n){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(ComponentModel$1);const VisualMapModel$1=VisualMapModel;var DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(n,o){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=DEFAULT_BAR_BOUND[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=DEFAULT_BAR_BOUND[1])},t.prototype._resetRange=function(){var n=this.getExtent(),o=this.option.range;!o||o.auto?(n.auto=1,this.option.range=n):isArray$1(o)&&(o[0]>o[1]&&o.reverse(),o[0]=Math.max(o[0],n[0]),o[1]=Math.min(o[1],n[1]))},t.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(n){var o=this.option.controller[n].symbolSize;o&&o[0]!==o[1]&&(o[0]=o[1]/3)},this)},t.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},t.prototype.getSelected=function(){var n=this.getExtent(),o=asc$2((this.get("range")||[]).slice());return o[0]>n[1]&&(o[0]=n[1]),o[1]>n[1]&&(o[1]=n[1]),o[0]<n[0]&&(o[0]=n[0]),o[1]<n[0]&&(o[1]=n[0]),o},t.prototype.getValueState=function(n){var o=this.option.range,a=this.getExtent();return(o[0]<=a[0]||o[0]<=n)&&(o[1]>=a[1]||n<=o[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(n){var o=[];return this.eachTargetSeries(function(a){var l=[],d=a.getData();d.each(this.getDataDimensionIndex(d),function(g,y){n[0]<=g&&g<=n[1]&&l.push(y)},this),o.push({seriesId:a.id,dataIndex:l})},this),o},t.prototype.getVisualMeta=function(n){var o=getColorStopValues(this,"outOfRange",this.getExtent()),a=getColorStopValues(this,"inRange",this.option.range.slice()),l=[];function d(A,R){l.push({value:A,color:n(A,R)})}for(var g=0,y=0,S=a.length,x=o.length;y<x&&(!a.length||o[y]<=a[0]);y++)o[y]<a[g]&&d(o[y],"outOfRange");for(var w=1;g<S;g++,w=0)w&&l.length&&d(a[g],"outOfRange"),d(a[g],"inRange");for(var w=1;y<x;y++)(!a.length||a[a.length-1]<o[y])&&(w&&(l.length&&d(l[l.length-1].value,"outOfRange"),w=0),d(o[y],"outOfRange"));var c=l.length;return{stops:l,outerColors:[c?l[0].color:"transparent",c?l[c-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(VisualMapModel$1);function getColorStopValues(r,t,n){if(n[0]===n[1])return n.slice();for(var o=200,a=(n[1]-n[0])/o,l=n[0],d=[],g=0;g<=o&&l<n[1];g++)d.push(l),l+=a;return d.push(n[1]),d}const ContinuousModel$1=ContinuousModel;var VisualMapView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return t.prototype.init=function(n,o){this.ecModel=n,this.api=o},t.prototype.render=function(n,o,a,l){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,o,a,l)},t.prototype.renderBackground=function(n){var o=this.visualMapModel,a=normalizeCssArray(o.get("padding")||0),l=n.getBoundingRect();n.add(new Rect$3({z2:-1,silent:!0,shape:{x:l.x-a[3],y:l.y-a[0],width:l.width+a[3]+a[1],height:l.height+a[0]+a[2]},style:{fill:o.get("backgroundColor"),stroke:o.get("borderColor"),lineWidth:o.get("borderWidth")}}))},t.prototype.getControllerVisual=function(n,o,a){a=a||{};var l=a.forceState,d=this.visualMapModel,g={};if(o==="color"){var y=d.get("contentColor");g.color=y}function S(A){return g[A]}function x(A,R){g[A]=R}var w=d.controllerVisuals[l||d.getValueState(n)],c=VisualMapping$1.prepareVisualTypes(w);return each$f(c,function(A){var R=w[A];a.convertOpacityToAlpha&&A==="opacity"&&(A="colorAlpha",R=w.__alphaForOpacity),VisualMapping$1.dependsOn(A,o)&&R&&R.applyVisual(n,S,x)}),g[o]},t.prototype.positionGroup=function(n){var o=this.visualMapModel,a=this.api;positionElement(n,o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},t.prototype.doRender=function(n,o,a,l){},t.type="visualMap",t}(ComponentView$1);const VisualMapView$1=VisualMapView;var paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(r,t,n){var o=r.option,a=o.align;if(a!=null&&a!=="auto")return a;for(var l={width:t.getWidth(),height:t.getHeight()},d=o.orient==="horizontal"?1:0,g=paramsSet[d],y=[0,null,10],S={},x=0;x<3;x++)S[paramsSet[1-d][x]]=y[x],S[g[x]]=x===2?n[0]:o[g[x]];var w=[["x","width",3],["y","height",0]][d],c=getLayoutRect(S,l,o.padding);return g[(c.margin[w[2]]||0)+c[w[0]]+c[w[1]]*.5<l[w[1]]*.5?0:1]}function makeHighDownBatch(r,t){return each$f(r||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),r}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return t.prototype.doRender=function(n,o,a,l){this._api=a,(!l||l.type!=="selectDataRange"||l.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,o=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(o);var a=n.get("text");this._renderEndsText(o,a,0),this._renderEndsText(o,a,1),this._updateView(!0),this.renderBackground(o),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(o)},t.prototype._renderEndsText=function(n,o,a){if(o){var l=o[1-a];l=l!=null?l+"":"";var d=this.visualMapModel,g=d.get("textGap"),y=d.itemSize,S=this._shapes.mainGroup,x=this._applyTransform([y[0]/2,a===0?-g:y[1]+g],S),w=this._applyTransform(a===0?"bottom":"top",S),c=this._orient,A=this.visualMapModel.textStyleModel;this.group.add(new ZRText$1({style:createTextStyle$1(A,{x:x[0],y:x[1],verticalAlign:c==="horizontal"?"middle":w,align:c==="horizontal"?w:"center",text:l})}))}},t.prototype._renderBar=function(n){var o=this.visualMapModel,a=this._shapes,l=o.itemSize,d=this._orient,g=this._useHandle,y=getItemAlign(o,this.api,l),S=a.mainGroup=this._createBarGroup(y),x=new Group$4;S.add(x),x.add(a.outOfRange=createPolygon()),x.add(a.inRange=createPolygon(null,g?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),x.setClipPath(new Rect$3({shape:{x:0,y:0,width:l[0],height:l[1],r:3}}));var w=o.textStyleModel.getTextRect("国"),c=mathMax(w.width,w.height);g&&(a.handleThumbs=[],a.handleLabels=[],a.handleLabelPoints=[],this._createHandle(o,S,0,l,c,d),this._createHandle(o,S,1,l,c,d)),this._createIndicator(o,S,l,c,d),n.add(S)},t.prototype._createHandle=function(n,o,a,l,d,g){var y=bind$1(this._dragHandle,this,a,!1),S=bind$1(this._dragHandle,this,a,!0),x=parsePercent$1(n.get("handleSize"),l[0]),w=createSymbol$1(n.get("handleIcon"),-x/2,-x/2,x,x,null,!0),c=getCursor(this._orient);w.attr({cursor:c,draggable:!0,drift:y,ondragend:S,onmousemove:function(O){stop(O.event)}}),w.x=l[0]/2,w.useStyle(n.getModel("handleStyle").getItemStyle()),w.setStyle({strokeNoScale:!0,strokeFirst:!0}),w.style.lineWidth*=2,w.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(w,!0),o.add(w);var A=this.visualMapModel.textStyleModel,R=new ZRText$1({cursor:c,draggable:!0,drift:y,onmousemove:function(O){stop(O.event)},ondragend:S,style:createTextStyle$1(A,{x:0,y:0,text:""})});R.ensureState("blur").style={opacity:.1},R.stateTransition={duration:200},this.group.add(R);var L=[x,0],$=this._shapes;$.handleThumbs[a]=w,$.handleLabelPoints[a]=L,$.handleLabels[a]=R},t.prototype._createIndicator=function(n,o,a,l,d){var g=parsePercent$1(n.get("indicatorSize"),a[0]),y=createSymbol$1(n.get("indicatorIcon"),-g/2,-g/2,g,g,null,!0);y.attr({cursor:"move",invisible:!0,silent:!0,x:a[0]/2});var S=n.getModel("indicatorStyle").getItemStyle();if(y instanceof ZRImage$1){var x=y.style;y.useStyle(extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},S))}else y.useStyle(S);o.add(y);var w=this.visualMapModel.textStyleModel,c=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle$1(w,{x:0,y:0,text:""})});this.group.add(c);var A=[(d==="horizontal"?l/2:HOVER_LINK_OUT)+a[0]/2,0],R=this._shapes;R.indicator=y,R.indicatorLabel=c,R.indicatorLabelPoint=A,this._firstShowIndicator=!0},t.prototype._dragHandle=function(n,o,a,l){if(this._useHandle){if(this._dragging=!o,!o){var d=this._applyTransform([a,l],this._shapes.mainGroup,!0);this._updateInterval(n,d[1]),this._hideIndicator(),this._updateView()}o===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),o?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},t.prototype._resetInterval=function(){var n=this.visualMapModel,o=this._dataInterval=n.getSelected(),a=n.getExtent(),l=[0,n.itemSize[1]];this._handleEnds=[linearMap(o[0],a,l,!0),linearMap(o[1],a,l,!0)]},t.prototype._updateInterval=function(n,o){o=o||0;var a=this.visualMapModel,l=this._handleEnds,d=[0,a.itemSize[1]];sliderMove(o,l,d,n,0);var g=a.getExtent();this._dataInterval=[linearMap(l[0],d,g,!0),linearMap(l[1],d,g,!0)]},t.prototype._updateView=function(n){var o=this.visualMapModel,a=o.getExtent(),l=this._shapes,d=[0,o.itemSize[1]],g=n?d:this._handleEnds,y=this._createBarVisual(this._dataInterval,a,g,"inRange"),S=this._createBarVisual(a,a,d,"outOfRange");l.inRange.setStyle({fill:y.barColor}).setShape("points",y.barPoints),l.outOfRange.setStyle({fill:S.barColor}).setShape("points",S.barPoints),this._updateHandle(g,y)},t.prototype._createBarVisual=function(n,o,a,l){var d={forceState:l,convertOpacityToAlpha:!0},g=this._makeColorGradient(n,d),y=[this.getControllerVisual(n[0],"symbolSize",d),this.getControllerVisual(n[1],"symbolSize",d)],S=this._createBarPoints(a,y);return{barColor:new LinearGradient$1(0,0,0,1,g),barPoints:S,handlesColor:[g[0].color,g[g.length-1].color]}},t.prototype._makeColorGradient=function(n,o){var a=100,l=[],d=(n[1]-n[0])/a;l.push({color:this.getControllerVisual(n[0],"color",o),offset:0});for(var g=1;g<a;g++){var y=n[0]+d*g;if(y>n[1])break;l.push({color:this.getControllerVisual(y,"color",o),offset:g/a})}return l.push({color:this.getControllerVisual(n[1],"color",o),offset:1}),l},t.prototype._createBarPoints=function(n,o){var a=this.visualMapModel.itemSize;return[[a[0]-o[0],n[0]],[a[0],n[0]],[a[0],n[1]],[a[0]-o[1],n[1]]]},t.prototype._createBarGroup=function(n){var o=this._orient,a=this.visualMapModel.get("inverse");return new Group$4(o==="horizontal"&&!a?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:o==="horizontal"&&a?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:o==="vertical"&&!a?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},t.prototype._updateHandle=function(n,o){if(this._useHandle){var a=this._shapes,l=this.visualMapModel,d=a.handleThumbs,g=a.handleLabels,y=l.itemSize,S=l.getExtent();each$1([0,1],function(x){var w=d[x];w.setStyle("fill",o.handlesColor[x]),w.y=n[x];var c=linearMap(n[x],[0,y[1]],S,!0),A=this.getControllerVisual(c,"symbolSize");w.scaleX=w.scaleY=A/y[0],w.x=y[0]-A/2;var R=applyTransform(a.handleLabelPoints[x],getTransform$1(w,this.group));g[x].setStyle({x:R[0],y:R[1],text:l.formatValueText(this._dataInterval[x]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",a.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(n,o,a,l){var d=this.visualMapModel,g=d.getExtent(),y=d.itemSize,S=[0,y[1]],x=this._shapes,w=x.indicator;if(w){w.attr("invisible",!1);var c={convertOpacityToAlpha:!0},A=this.getControllerVisual(n,"color",c),R=this.getControllerVisual(n,"symbolSize"),L=linearMap(n,g,S,!0),$=y[0]-R/2,O={x:w.x,y:w.y};w.y=L,w.x=$;var z=applyTransform(x.indicatorLabelPoint,getTransform$1(w,this.group)),V=x.indicatorLabel;V.attr("invisible",!1);var j=this._applyTransform("left",x.mainGroup),K=this._orient,Z=K==="horizontal";V.setStyle({text:(a||"")+d.formatValueText(o),verticalAlign:Z?j:"middle",align:Z?"center":j});var q={x:$,y:L,style:{fill:A}},ie={style:{x:z[0],y:z[1]}};if(d.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var te={duration:100,easing:"cubicInOut",additive:!0};w.x=O.x,w.y=O.y,w.animateTo(q,te),V.animateTo(ie,te)}else w.attr(q),V.attr(ie);this._firstShowIndicator=!1;var oe=this._shapes.handleLabels;if(oe)for(var re=0;re<oe.length;re++)this._api.enterBlur(oe[re])}},t.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(o){if(n._hovering=!0,!n._dragging){var a=n.visualMapModel.itemSize,l=n._applyTransform([o.offsetX,o.offsetY],n._shapes.mainGroup,!0,!0);l[1]=mathMin(mathMax(0,l[1]),a[1]),n._doHoverLinkToSeries(l[1],0<=l[0]&&l[0]<=a[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(n,o){var a=this.visualMapModel,l=a.itemSize;if(a.option.hoverLink){var d=[0,l[1]],g=a.getExtent();n=mathMin(mathMax(d[0],n),d[1]);var y=getHalfHoverLinkSize(a,g,d),S=[n-y,n+y],x=linearMap(n,d,g,!0),w=[linearMap(S[0],d,g,!0),linearMap(S[1],d,g,!0)];S[0]<d[0]&&(w[0]=-1/0),S[1]>d[1]&&(w[1]=1/0),o&&(w[0]===-1/0?this._showIndicator(x,w[1],"< ",y):w[1]===1/0?this._showIndicator(x,w[0],"> ",y):this._showIndicator(x,x,"≈ ",y));var c=this._hoverLinkDataIndices,A=[];(o||useHoverLinkOnHandle(a))&&(A=this._hoverLinkDataIndices=a.findTargetDataIndices(w));var R=compressBatches(c,A);this._dispatchHighDown("downplay",makeHighDownBatch(R[0],a)),this._dispatchHighDown("highlight",makeHighDownBatch(R[1],a))}},t.prototype._hoverLinkFromSeriesMouseOver=function(n){var o;if(findEventDispatcher(n.target,function(y){var S=getECData(y);if(S.dataIndex!=null)return o=S,!0},!0),!!o){var a=this.ecModel.getSeriesByIndex(o.seriesIndex),l=this.visualMapModel;if(l.isTargetSeries(a)){var d=a.getData(o.dataType),g=d.getStore().get(l.getDataDimensionIndex(d),o.dataIndex);isNaN(g)||this._showIndicator(g,g)}}},t.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var o=this._shapes.handleLabels;if(o)for(var a=0;a<o.length;a++)this._api.leaveBlur(o[a])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(n,this.visualMapModel)),n.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(n,o,a,l){var d=getTransform$1(o,l?null:this.group);return isArray$1(n)?applyTransform(n,d,a):transformDirection(n,d,a)},t.prototype._dispatchHighDown=function(n,o){o&&o.length&&this.api.dispatchAction({type:n,batch:o})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(VisualMapView$1);function createPolygon(r,t,n,o){return new Polygon$1({shape:{points:r},draggable:!!n,cursor:t,drift:n,onmousemove:function(a){stop(a.event)},ondragend:o})}function getHalfHoverLinkSize(r,t,n){var o=HOVER_LINK_SIZE/2,a=r.get("hoverLinkDataSize");return a&&(o=linearMap(a,t,n,!0)/2),o}function useHoverLinkOnHandle(r){var t=r.get("hoverLinkOnHandle");return!!(t??r.get("realtime"))}function getCursor(r){return r==="vertical"?"ns-resize":"ew-resize"}const ContinuousView$1=ContinuousView;var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(r,t){t.eachComponent({mainType:"visualMap",query:r},function(n){n.setSelected(r.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(r,t){var n=[];return t.eachComponent("visualMap",function(o){var a=r.pipelineContext;!o.isTargetSeries(r)||a&&a.large||n.push(incrementalApplyVisual(o.stateList,o.targetVisuals,bind$1(o.getValueState,o),o.getDataDimensionIndex(r.getData())))}),n}},{createOnAllSeries:!0,reset:function(r,t){var n=r.getData(),o=[];t.eachComponent("visualMap",function(a){if(a.isTargetSeries(r)){var l=a.getVisualMeta(bind$1(getColorVisual,null,r,a))||{stops:[],outerColors:[]},d=a.getDataDimensionIndex(n);d>=0&&(l.dimension=d,o.push(l))}}),r.getData().setVisual("visualMeta",o)}}];function getColorVisual(r,t,n,o){for(var a=t.targetVisuals[o],l=VisualMapping$1.prepareVisualTypes(a),d={color:getVisualFromData(r.getData(),"color")},g=0,y=l.length;g<y;g++){var S=l[g],x=a[S==="opacity"?"__alphaForOpacity":S];x&&x.applyVisual(n,w,c)}return d.color;function w(A){return d[A]}function c(A,R){d[A]=R}}var each=each$f;function visualMapPreprocessor(r){var t=r&&r.visualMap;isArray$1(t)||(t=t?[t]:[]),each(t,function(n){if(n){has(n,"splitList")&&!has(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var o=n.pieces;o&&isArray$1(o)&&each(o,function(a){isObject$3(a)&&(has(a,"start")&&!has(a,"min")&&(a.min=a.start),has(a,"end")&&!has(a,"max")&&(a.max=a.end))})}})}function has(r,t){return r&&r.hasOwnProperty&&r.hasOwnProperty(t)}var installed=!1;function installCommon(r){installed||(installed=!0,r.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),r.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(t){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,t)}),r.registerPreprocessor(visualMapPreprocessor))}function install$5(r){r.registerComponentModel(ContinuousModel$1),r.registerComponentView(ContinuousView$1),installCommon(r)}var PiecewiseModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n._pieceList=[],n}return t.prototype.optionUpdated=function(n,o){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(n,o);var l=this.option.categories;this.resetVisual(function(d,g){a==="categories"?(d.mappingMethod="category",d.categories=clone$4(l)):(d.dataExtent=this.getExtent(),d.mappingMethod="piecewise",d.pieceList=map$1(this._pieceList,function(y){return y=clone$4(y),g!=="inRange"&&(y.visual=null),y}))})},t.prototype.completeVisualOption=function(){var n=this.option,o={},a=VisualMapping$1.listVisualTypes(),l=this.isCategory();each$f(n.pieces,function(g){each$f(a,function(y){g.hasOwnProperty(y)&&(o[y]=1)})}),each$f(o,function(g,y){var S=!1;each$f(this.stateList,function(x){S=S||d(n,x,y)||d(n.target,x,y)},this),!S&&each$f(this.stateList,function(x){(n[x]||(n[x]={}))[y]=visualDefault$1.get(y,x==="inRange"?"active":"inactive",l)})},this);function d(g,y,S){return g&&g[y]&&g[y].hasOwnProperty(S)}r.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(n,o){var a=this.option,l=this._pieceList,d=(o?a:n).selected||{};if(a.selected=d,each$f(l,function(y,S){var x=this.getSelectedMapKey(y);d.hasOwnProperty(x)||(d[x]=!0)},this),a.selectedMode==="single"){var g=!1;each$f(l,function(y,S){var x=this.getSelectedMapKey(y);d[x]&&(g?d[x]=!1:g=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(n){this.option.selected=clone$4(n)},t.prototype.getValueState=function(n){var o=VisualMapping$1.findPieceIndex(n,this._pieceList);return o!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[o])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(n){var o=[],a=this._pieceList;return this.eachTargetSeries(function(l){var d=[],g=l.getData();g.each(this.getDataDimensionIndex(g),function(y,S){var x=VisualMapping$1.findPieceIndex(y,a);x===n&&d.push(S)},this),o.push({seriesId:l.id,dataIndex:d})},this),o},t.prototype.getRepresentValue=function(n){var o;if(this.isCategory())o=n.value;else if(n.value!=null)o=n.value;else{var a=n.interval||[];o=a[0]===-1/0&&a[1]===1/0?0:(a[0]+a[1])/2}return o},t.prototype.getVisualMeta=function(n){if(this.isCategory())return;var o=[],a=["",""],l=this;function d(x,w){var c=l.getRepresentValue({interval:x});w||(w=l.getValueState(c));var A=n(c,w);x[0]===-1/0?a[0]=A:x[1]===1/0?a[1]=A:o.push({value:x[0],color:A},{value:x[1],color:A})}var g=this._pieceList.slice();if(!g.length)g.push({interval:[-1/0,1/0]});else{var y=g[0].interval[0];y!==-1/0&&g.unshift({interval:[-1/0,y]}),y=g[g.length-1].interval[1],y!==1/0&&g.push({interval:[y,1/0]})}var S=-1/0;return each$f(g,function(x){var w=x.interval;w&&(w[0]>S&&d([S,w[0]],"outOfRange"),d(w.slice()),S=w[1])},this),{stops:o,outerColors:a}},t.type="visualMap.piecewise",t.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(VisualMapModel$1),resetMethods={splitNumber:function(r){var t=this.option,n=Math.min(t.precision,20),o=this.getExtent(),a=t.splitNumber;a=Math.max(parseInt(a,10),1),t.splitNumber=a;for(var l=(o[1]-o[0])/a;+l.toFixed(n)!==l&&n<5;)n++;t.precision=n,l=+l.toFixed(n),t.minOpen&&r.push({interval:[-1/0,o[0]],close:[0,0]});for(var d=0,g=o[0];d<a;g+=l,d++){var y=d===a-1?o[1]:g+l;r.push({interval:[g,y],close:[1,1]})}t.maxOpen&&r.push({interval:[o[1],1/0],close:[0,0]}),reformIntervals(r),each$f(r,function(S,x){S.index=x,S.text=this.formatValueText(S.interval)},this)},categories:function(r){var t=this.option;each$f(t.categories,function(n){r.push({text:this.formatValueText(n,!0),value:n})},this),normalizeReverse(t,r)},pieces:function(r){var t=this.option;each$f(t.pieces,function(n,o){isObject$3(n)||(n={value:n});var a={text:"",index:o};if(n.label!=null&&(a.text=n.label),n.hasOwnProperty("value")){var l=a.value=n.value;a.interval=[l,l],a.close=[1,1]}else{for(var d=a.interval=[],g=a.close=[0,0],y=[1,0,1],S=[-1/0,1/0],x=[],w=0;w<2;w++){for(var c=[["gte","gt","min"],["lte","lt","max"]][w],A=0;A<3&&d[w]==null;A++)d[w]=n[c[A]],g[w]=y[A],x[w]=A===2;d[w]==null&&(d[w]=S[w])}x[0]&&d[1]===1/0&&(g[0]=0),x[1]&&d[0]===-1/0&&(g[1]=0),d[0]===d[1]&&g[0]&&g[1]&&(a.value=d[0])}a.visual=VisualMapping$1.retrieveVisuals(n),r.push(a)},this),normalizeReverse(t,r),reformIntervals(r),each$f(r,function(n){var o=n.close,a=[["<","≤"][o[1]],[">","≥"][o[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,a)},this)}};function normalizeReverse(r,t){var n=r.inverse;(r.orient==="vertical"?!n:n)&&t.reverse()}const PiecewiseModel$1=PiecewiseModel;var PiecewiseVisualMapView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.doRender=function(){var n=this.group;n.removeAll();var o=this.visualMapModel,a=o.get("textGap"),l=o.textStyleModel,d=l.getFont(),g=l.getTextColor(),y=this._getItemAlign(),S=o.itemSize,x=this._getViewData(),w=x.endsText,c=retrieve(o.get("showLabel",!0),!w);w&&this._renderEndsText(n,w[0],S,c,y),each$f(x.viewPieceList,function(A){var R=A.piece,L=new Group$4;L.onclick=bind$1(this._onItemClick,this,R),this._enableHoverLink(L,A.indexInModelPieceList);var $=o.getRepresentValue(R);if(this._createItemSymbol(L,$,[0,0,S[0],S[1]]),c){var O=this.visualMapModel.getValueState($);L.add(new ZRText$1({style:{x:y==="right"?-a:S[0]+a,y:S[1]/2,text:R.text,verticalAlign:"middle",align:y,font:d,fill:g,opacity:O==="outOfRange"?.5:1}}))}n.add(L)},this),w&&this._renderEndsText(n,w[1],S,c,y),box(o.get("orient"),n,o.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},t.prototype._enableHoverLink=function(n,o){var a=this;n.on("mouseover",function(){return l("highlight")}).on("mouseout",function(){return l("downplay")});var l=function(d){var g=a.visualMapModel;g.option.hoverLink&&a.api.dispatchAction({type:d,batch:makeHighDownBatch(g.findTargetDataIndices(o),g)})}},t.prototype._getItemAlign=function(){var n=this.visualMapModel,o=n.option;if(o.orient==="vertical")return getItemAlign(n,this.api,n.itemSize);var a=o.align;return(!a||a==="auto")&&(a="left"),a},t.prototype._renderEndsText=function(n,o,a,l,d){if(o){var g=new Group$4,y=this.visualMapModel.textStyleModel;g.add(new ZRText$1({style:createTextStyle$1(y,{x:l?d==="right"?a[0]:0:a[0]/2,y:a[1]/2,verticalAlign:"middle",align:l?d:"center",text:o})})),n.add(g)}},t.prototype._getViewData=function(){var n=this.visualMapModel,o=map$1(n.getPieceList(),function(g,y){return{piece:g,indexInModelPieceList:y}}),a=n.get("text"),l=n.get("orient"),d=n.get("inverse");return(l==="horizontal"?d:!d)?o.reverse():a&&(a=a.slice().reverse()),{viewPieceList:o,endsText:a}},t.prototype._createItemSymbol=function(n,o,a){n.add(createSymbol$1(this.getControllerVisual(o,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(o,"color")))},t.prototype._onItemClick=function(n){var o=this.visualMapModel,a=o.option,l=a.selectedMode;if(l){var d=clone$4(a.selected),g=o.getSelectedMapKey(n);l==="single"||l===!0?(d[g]=!0,each$f(d,function(y,S){d[S]=S===g})):d[g]=!d[g],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:d})}},t.type="visualMap.piecewise",t}(VisualMapView$1);const PiecewiseView=PiecewiseVisualMapView;function install$4(r){r.registerComponentModel(PiecewiseModel$1),r.registerComponentView(PiecewiseView),installCommon(r)}function install$3(r){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(r,t){var n=r.getModel("aria");if(!n.get("enabled"))return;var o=clone$4(DEFAULT_OPTION);merge(o.label,r.getLocaleModel().get("aria"),!1),merge(n.option,o,!1),a(),l();function a(){var S=n.getModel("decal"),x=S.get("show");if(x){var w=createHashMap();r.eachSeries(function(c){if(!c.isColorBySeries()){var A=w.get(c.type);A||(A={},w.set(c.type,A)),inner(c).scope=A}}),r.eachRawSeries(function(c){if(r.isSeriesFiltered(c))return;if(isFunction(c.enableAriaDecal)){c.enableAriaDecal();return}var A=c.getData();if(c.isColorBySeries()){var z=getDecalFromPalette(c.ecModel,c.name,decalPaletteScope,r.getSeriesCount()),V=A.getVisual("decal");A.setVisual("decal",j(V,z))}else{var R=c.getRawData(),L={},$=inner(c).scope;A.each(function(K){var Z=A.getRawIndex(K);L[Z]=K});var O=R.count();R.each(function(K){var Z=L[K],q=R.getName(K)||K+"",ie=getDecalFromPalette(c.ecModel,q,$,O),te=A.getItemVisual(Z,"decal");A.setItemVisual(Z,"decal",j(te,ie))})}function j(K,Z){var q=K?extend(extend({},Z),K):Z;return q.dirty=!0,q}})}}function l(){var S=r.getLocaleModel().get("aria"),x=n.getModel("label");if(x.option=defaults(x.option,S),!!x.get("enabled")){var w=t.getZr().dom;if(x.get("description")){w.setAttribute("aria-label",x.get("description"));return}var c=r.getSeriesCount(),A=x.get(["data","maxCount"])||10,R=x.get(["series","maxCount"])||10,L=Math.min(c,R),$;if(!(c<1)){var O=g();if(O){var z=x.get(["general","withTitle"]);$=d(z,{title:O})}else $=x.get(["general","withoutTitle"]);var V=[],j=c>1?x.get(["series","multiple","prefix"]):x.get(["series","single","prefix"]);$+=d(j,{seriesCount:c}),r.eachSeries(function(ie,te){if(te<L){var oe=void 0,re=ie.get("name"),he=re?"withName":"withoutName";oe=c>1?x.get(["series","multiple",he]):x.get(["series","single",he]),oe=d(oe,{seriesId:ie.seriesIndex,seriesName:ie.get("name"),seriesType:y(ie.subType)});var _e=ie.getData();if(_e.count()>A){var me=x.get(["data","partialData"]);oe+=d(me,{displayCnt:A})}else oe+=x.get(["data","allData"]);for(var be=x.get(["data","separator","middle"]),Q=x.get(["data","separator","end"]),Ne=[],Ee=0;Ee<_e.count();Ee++)if(Ee<A){var Ge=_e.getName(Ee),it=_e.getValues(Ee),Te=x.get(["data",Ge?"withName":"withoutName"]);Ne.push(d(Te,{name:Ge,value:it.join(be)}))}oe+=Ne.join(be)+Q,V.push(oe)}});var K=x.getModel(["series","multiple","separator"]),Z=K.get("middle"),q=K.get("end");$+=V.join(Z)+q,w.setAttribute("aria-label",$)}}}function d(S,x){if(!isString(S))return S;var w=S;return each$f(x,function(c,A){w=w.replace(new RegExp("\\{\\s*"+A+"\\s*\\}","g"),c)}),w}function g(){var S=r.get("title");return S&&S.length&&(S=S[0]),S&&S.text}function y(S){return r.getLocaleModel().get(["series","typeNames"])[S]||"自定义图"}}function ariaPreprocessor(r){if(!(!r||!r.aria)){var t=r.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},each$f(["description","general","series","data"],function(n){t[n]!=null&&(t.label[n]=t[n])})}}function install$2(r){r.registerPreprocessor(ariaPreprocessor),r.registerVisual(r.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function r(t){var n=this._condVal=isString(t)?new RegExp(t):isRegExp(t)?t:null;if(n==null){var o="";throwError(o)}}return r.prototype.evaluate=function(t){var n=typeof t;return isString(n)?this._condVal.test(t):isNumber(n)?this._condVal.test(t+""):!1},r}(),ConstConditionInternal=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),AndConditionInternal=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,n=0;n<t.length;n++)if(!t[n].evaluate())return!1;return!0},r}(),OrConditionInternal=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,n=0;n<t.length;n++)if(t[n].evaluate())return!0;return!1},r}(),NotConditionInternal=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),RelationalConditionInternal=function(){function r(){}return r.prototype.evaluate=function(){for(var t=!!this.valueParser,n=this.getValue,o=n(this.valueGetterParam),a=t?this.valueParser(o):null,l=0;l<this.subCondList.length;l++)if(!this.subCondList[l].evaluate(t?a:o))return!1;return!0},r}();function parseOption(r,t){if(r===!0||r===!1){var n=new ConstConditionInternal;return n.value=r,n}var o="";return isObjectNotArray(r)||throwError(o),r.and?parseAndOrOption("and",r,t):r.or?parseAndOrOption("or",r,t):r.not?parseNotOption(r,t):parseRelationalOption(r,t)}function parseAndOrOption(r,t,n){var o=t[r],a="";isArray$1(o)||throwError(a),o.length||throwError(a);var l=r==="and"?new AndConditionInternal:new OrConditionInternal;return l.children=map$1(o,function(d){return parseOption(d,n)}),l.children.length||throwError(a),l}function parseNotOption(r,t){var n=r.not,o="";isObjectNotArray(n)||throwError(o);var a=new NotConditionInternal;return a.child=parseOption(n,t),a.child||throwError(o),a}function parseRelationalOption(r,t){for(var n="",o=t.prepareGetValue(r),a=[],l=keys(r),d=r.parser,g=d?getRawValueParser(d):null,y=0;y<l.length;y++){var S=l[y];if(!(S==="parser"||t.valueGetterAttrMap.get(S))){var x=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,S)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[S]:S,w=r[S],c=g?g(w):w,A=createFilterComparator(x,c)||x==="reg"&&new RegExpEvaluator(c);A||throwError(n),a.push(A)}}a.length||throwError(n);var R=new RelationalConditionInternal;return R.valueGetterParam=o,R.valueParser=g,R.getValue=t.getValue,R.subCondList=a,R}function isObjectNotArray(r){return isObject$3(r)&&!isArrayLike(r)}var ConditionalExpressionParsed=function(){function r(t,n){this._cond=parseOption(t,n)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function parseConditionalExpression(r,t){return new ConditionalExpressionParsed(r,t)}var filterTransform={type:"echarts:filter",transform:function(r){for(var t=r.upstream,n,o=parseConditionalExpression(r.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(g){var y="",S=g.dimension;hasOwn(g,"dimension")||throwError(y);var x=t.getDimensionInfo(S);return x||throwError(y),{dimIdx:x.index}},getValue:function(g){return t.retrieveValueFromItem(n,g.dimIdx)}}),a=[],l=0,d=t.count();l<d;l++)n=t.getRawDataItem(l),o.evaluate()&&a.push(n);return{data:a}}},sortTransform={type:"echarts:sort",transform:function(r){var t=r.upstream,n=r.config,o="",a=normalizeToArray(n);a.length||throwError(o);var l=[];each$f(a,function(x){var w=x.dimension,c=x.order,A=x.parser,R=x.incomparable;if(w==null&&throwError(o),c!=="asc"&&c!=="desc"&&throwError(o),R&&R!=="min"&&R!=="max"){var L="";throwError(L)}if(c!=="asc"&&c!=="desc"){var $="";throwError($)}var O=t.getDimensionInfo(w);O||throwError(o);var z=A?getRawValueParser(A):null;A&&!z&&throwError(o),l.push({dimIdx:O.index,parser:z,comparator:new SortOrderComparator(c,R)})});var d=t.sourceFormat;d!==SOURCE_FORMAT_ARRAY_ROWS&&d!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(o);for(var g=[],y=0,S=t.count();y<S;y++)g.push(t.getRawDataItem(y));return g.sort(function(x,w){for(var c=0;c<l.length;c++){var A=l[c],R=t.retrieveValueFromItem(x,A.dimIdx),L=t.retrieveValueFromItem(w,A.dimIdx);A.parser&&(R=A.parser(R),L=A.parser(L));var $=A.comparator.evaluate(R,L);if($!==0)return $}return 0}),{data:g}}};function install$1(r){r.registerTransform(filterTransform),r.registerTransform(sortTransform)}var DatasetModel=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="dataset",n}return t.prototype.init=function(n,o,a){r.prototype.init.call(this,n,o,a),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},t.prototype.mergeOption=function(n,o){r.prototype.mergeOption.call(this,n,o),disableTransformOptionMerge(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},t}(ComponentModel$1),DatasetView=function(r){__extends(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.type="dataset",n}return t.type="dataset",t}(ComponentView$1);function install(r){r.registerComponentModel(DatasetModel),r.registerComponentView(DatasetView)}var CMD=PathProxy$1.CMD;function aroundEqual(r,t){return Math.abs(r-t)<1e-5}function pathToBezierCurves(r){var t=r.data,n=r.len(),o=[],a,l=0,d=0,g=0,y=0;function S(_e,me){a&&a.length>2&&o.push(a),a=[_e,me]}function x(_e,me,be,Q){aroundEqual(_e,be)&&aroundEqual(me,Q)||a.push(_e,me,be,Q,be,Q)}function w(_e,me,be,Q,Ne,Ee){var Ge=Math.abs(me-_e),it=Math.tan(Ge/4)*4/3,Te=me<_e?-1:1,Ke=Math.cos(_e),Tt=Math.sin(_e),Lt=Math.cos(me),Qt=Math.sin(me),Xe=Ke*Ne+be,Be=Tt*Ee+Q,ue=Lt*Ne+be,Dt=Qt*Ee+Q,Rt=Ne*it*Te,Bt=Ee*it*Te;a.push(Xe-Rt*Tt,Be+Bt*Ke,ue+Rt*Qt,Dt-Bt*Lt,ue,Dt)}for(var c,A,R,L,$=0;$<n;){var O=t[$++],z=$===1;switch(z&&(l=t[$],d=t[$+1],g=l,y=d,(O===CMD.L||O===CMD.C||O===CMD.Q)&&(a=[g,y])),O){case CMD.M:l=g=t[$++],d=y=t[$++],S(g,y);break;case CMD.L:c=t[$++],A=t[$++],x(l,d,c,A),l=c,d=A;break;case CMD.C:a.push(t[$++],t[$++],t[$++],t[$++],l=t[$++],d=t[$++]);break;case CMD.Q:c=t[$++],A=t[$++],R=t[$++],L=t[$++],a.push(l+2/3*(c-l),d+2/3*(A-d),R+2/3*(c-R),L+2/3*(A-L),R,L),l=R,d=L;break;case CMD.A:var V=t[$++],j=t[$++],K=t[$++],Z=t[$++],q=t[$++],ie=t[$++]+q;$+=1;var te=!t[$++];c=Math.cos(q)*K+V,A=Math.sin(q)*Z+j,z?(g=c,y=A,S(g,y)):x(l,d,c,A),l=Math.cos(ie)*K+V,d=Math.sin(ie)*Z+j;for(var oe=(te?-1:1)*Math.PI/2,re=q;te?re>ie:re<ie;re+=oe){var he=te?Math.max(re+oe,ie):Math.min(re+oe,ie);w(re,he,V,j,K,Z)}break;case CMD.R:g=l=t[$++],y=d=t[$++],c=g+t[$++],A=y+t[$++],S(c,y),x(c,y,c,A),x(c,A,g,A),x(g,A,g,y),x(g,y,c,y);break;case CMD.Z:a&&x(l,d,g,y),l=g,d=y;break}}return a&&a.length>2&&o.push(a),o}function adpativeBezier(r,t,n,o,a,l,d,g,y,S){if(aroundEqual(r,n)&&aroundEqual(t,o)&&aroundEqual(a,d)&&aroundEqual(l,g)){y.push(d,g);return}var x=2/S,w=x*x,c=d-r,A=g-t,R=Math.sqrt(c*c+A*A);c/=R,A/=R;var L=n-r,$=o-t,O=a-d,z=l-g,V=L*L+$*$,j=O*O+z*z;if(V<w&&j<w){y.push(d,g);return}var K=c*L+A*$,Z=-c*O-A*z,q=V-K*K,ie=j-Z*Z;if(q<w&&K>=0&&ie<w&&Z>=0){y.push(d,g);return}var te=[],oe=[];cubicSubdivide(r,n,a,d,.5,te),cubicSubdivide(t,o,l,g,.5,oe),adpativeBezier(te[0],oe[0],te[1],oe[1],te[2],oe[2],te[3],oe[3],y,S),adpativeBezier(te[4],oe[4],te[5],oe[5],te[6],oe[6],te[7],oe[7],y,S)}function pathToPolygons(r,t){var n=pathToBezierCurves(r),o=[];t=t||1;for(var a=0;a<n.length;a++){var l=n[a],d=[],g=l[0],y=l[1];d.push(g,y);for(var S=2;S<l.length;){var x=l[S++],w=l[S++],c=l[S++],A=l[S++],R=l[S++],L=l[S++];adpativeBezier(g,y,x,w,c,A,R,L,d,t),g=R,y=L}o.push(d)}return o}function getDividingGrids(r,t,n){var o=r[t],a=r[1-t],l=Math.abs(o/a),d=Math.ceil(Math.sqrt(l*n)),g=Math.floor(n/d);g===0&&(g=1,d=n);for(var y=[],S=0;S<d;S++)y.push(g);var x=d*g,w=n-x;if(w>0)for(var S=0;S<w;S++)y[S%d]+=1;return y}function divideSector(r,t,n){for(var o=r.r0,a=r.r,l=r.startAngle,d=r.endAngle,g=Math.abs(d-l),y=g*a,S=a-o,x=y>Math.abs(S),w=getDividingGrids([y,S],x?0:1,t),c=(x?g:S)/w.length,A=0;A<w.length;A++)for(var R=(x?S:g)/w[A],L=0;L<w[A];L++){var $={};x?($.startAngle=l+c*A,$.endAngle=l+c*(A+1),$.r0=o+R*L,$.r=o+R*(L+1)):($.startAngle=l+R*L,$.endAngle=l+R*(L+1),$.r0=o+c*A,$.r=o+c*(A+1)),$.clockwise=r.clockwise,$.cx=r.cx,$.cy=r.cy,n.push($)}}function divideRect(r,t,n){for(var o=r.width,a=r.height,l=o>a,d=getDividingGrids([o,a],l?0:1,t),g=l?"width":"height",y=l?"height":"width",S=l?"x":"y",x=l?"y":"x",w=r[g]/d.length,c=0;c<d.length;c++)for(var A=r[y]/d[c],R=0;R<d[c];R++){var L={};L[S]=c*w,L[x]=R*A,L[g]=w,L[y]=A,L.x+=r.x,L.y+=r.y,n.push(L)}}function crossProduct2d(r,t,n,o){return r*o-n*t}function lineLineIntersect(r,t,n,o,a,l,d,g){var y=n-r,S=o-t,x=d-a,w=g-l,c=crossProduct2d(x,w,y,S);if(Math.abs(c)<1e-6)return null;var A=r-a,R=t-l,L=crossProduct2d(A,R,x,w)/c;return L<0||L>1?null:new Point$1(L*y+r,L*S+t)}function projPtOnLine(r,t,n){var o=new Point$1;Point$1.sub(o,n,t),o.normalize();var a=new Point$1;Point$1.sub(a,r,t);var l=a.dot(o);return l}function addToPoly(r,t){var n=r[r.length-1];n&&n[0]===t[0]&&n[1]===t[1]||r.push(t)}function splitPolygonByLine(r,t,n){for(var o=r.length,a=[],l=0;l<o;l++){var d=r[l],g=r[(l+1)%o],y=lineLineIntersect(d[0],d[1],g[0],g[1],t.x,t.y,n.x,n.y);y&&a.push({projPt:projPtOnLine(y,t,n),pt:y,idx:l})}if(a.length<2)return[{points:r},{points:r}];a.sort(function($,O){return $.projPt-O.projPt});var S=a[0],x=a[a.length-1];if(x.idx<S.idx){var w=S;S=x,x=w}for(var c=[S.pt.x,S.pt.y],A=[x.pt.x,x.pt.y],R=[c],L=[A],l=S.idx+1;l<=x.idx;l++)addToPoly(R,r[l].slice());addToPoly(R,A),addToPoly(R,c);for(var l=x.idx+1;l<=S.idx+o;l++)addToPoly(L,r[l%o].slice());return addToPoly(L,c),addToPoly(L,A),[{points:R},{points:L}]}function binaryDividePolygon(r){var t=r.points,n=[],o=[];fromPoints(t,n,o);var a=new BoundingRect$1(n[0],n[1],o[0]-n[0],o[1]-n[1]),l=a.width,d=a.height,g=a.x,y=a.y,S=new Point$1,x=new Point$1;return l>d?(S.x=x.x=g+l/2,S.y=y,x.y=y+d):(S.y=x.y=y+d/2,S.x=g,x.x=g+l),splitPolygonByLine(t,S,x)}function binaryDivideRecursive(r,t,n,o){if(n===1)o.push(t);else{var a=Math.floor(n/2),l=r(t);binaryDivideRecursive(r,l[0],a,o),binaryDivideRecursive(r,l[1],n-a,o)}return o}function clone(r,t){for(var n=[],o=0;o<t;o++)n.push(clonePath(r));return n}function copyPathProps(r,t){t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel}function polygonConvert(r){for(var t=[],n=0;n<r.length;)t.push([r[n++],r[n++]]);return t}function split(r,t){var n=[],o=r.shape,a;switch(r.type){case"rect":divideRect(o,t,n),a=Rect$3;break;case"sector":divideSector(o,t,n),a=Sector$1;break;case"circle":divideSector({r0:0,r:o.r,startAngle:0,endAngle:Math.PI*2,cx:o.cx,cy:o.cy},t,n),a=Sector$1;break;default:var l=r.getComputedTransform(),d=l?Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1],l[2]*l[2]+l[3]*l[3])):1,g=map$1(pathToPolygons(r.getUpdatedPathProxy(),d),function(O){return polygonConvert(O)}),y=g.length;if(y===0)binaryDivideRecursive(binaryDividePolygon,{points:g[0]},t,n);else if(y===t)for(var S=0;S<y;S++)n.push({points:g[S]});else{var x=0,w=map$1(g,function(O){var z=[],V=[];fromPoints(O,z,V);var j=(V[1]-z[1])*(V[0]-z[0]);return x+=j,{poly:O,area:j}});w.sort(function(O,z){return z.area-O.area});for(var c=t,S=0;S<y;S++){var A=w[S];if(c<=0)break;var R=S===y-1?c:Math.ceil(A.area/x*t);R<0||(binaryDivideRecursive(binaryDividePolygon,{points:A.poly},R,n),c-=R)}}a=Polygon$1;break}if(!a)return clone(r,t);for(var L=[],S=0;S<n.length;S++){var $=new a;$.setShape(n[S]),copyPathProps(r,$),L.push($)}return L}function alignSubpath(r,t){var n=r.length,o=t.length;if(n===o)return[r,t];for(var a=[],l=[],d=n<o?r:t,g=Math.min(n,o),y=Math.abs(o-n)/6,S=(g-2)/6,x=Math.ceil(y/S)+1,w=[d[0],d[1]],c=y,A=2;A<g;){var R=d[A-2],L=d[A-1],$=d[A++],O=d[A++],z=d[A++],V=d[A++],j=d[A++],K=d[A++];if(c<=0){w.push($,O,z,V,j,K);continue}for(var Z=Math.min(c,x-1)+1,q=1;q<=Z;q++){var ie=q/Z;cubicSubdivide(R,$,z,j,ie,a),cubicSubdivide(L,O,V,K,ie,l),R=a[3],L=l[3],w.push(a[1],l[1],a[2],l[2],R,L),$=a[5],O=l[5],z=a[6],V=l[6]}c-=Z-1}return d===r?[w,t]:[r,w]}function createSubpath(r,t){for(var n=r.length,o=r[n-2],a=r[n-1],l=[],d=0;d<t.length;)l[d++]=o,l[d++]=a;return l}function alignBezierCurves(r,t){for(var n,o,a,l=[],d=[],g=0;g<Math.max(r.length,t.length);g++){var y=r[g],S=t[g],x=void 0,w=void 0;y?S?(n=alignSubpath(y,S),x=n[0],w=n[1],o=x,a=w):(w=createSubpath(a||y,y),x=y):(x=createSubpath(o||S,S),w=S),l.push(x),d.push(w)}return[l,d]}function centroid(r){for(var t=0,n=0,o=0,a=r.length,l=0,d=a-2;l<a;d=l,l+=2){var g=r[d],y=r[d+1],S=r[l],x=r[l+1],w=g*x-S*y;t+=w,n+=(g+S)*w,o+=(y+x)*w}return t===0?[r[0]||0,r[1]||0]:[n/t/3,o/t/3,t]}function findBestRingOffset(r,t,n,o){for(var a=(r.length-2)/6,l=1/0,d=0,g=r.length,y=g-2,S=0;S<a;S++){for(var x=S*6,w=0,c=0;c<g;c+=2){var A=c===0?x:(x+c-2)%y+2,R=r[A]-n[0],L=r[A+1]-n[1],$=t[c]-o[0],O=t[c+1]-o[1],z=$-R,V=O-L;w+=z*z+V*V}w<l&&(l=w,d=S)}return d}function reverse(r){for(var t=[],n=r.length,o=0;o<n;o+=2)t[o]=r[n-o-2],t[o+1]=r[n-o-1];return t}function findBestMorphingRotation(r,t,n,o){for(var a=[],l,d=0;d<r.length;d++){var g=r[d],y=t[d],S=centroid(g),x=centroid(y);l==null&&(l=S[2]<0!=x[2]<0);var w=[],c=[],A=0,R=1/0,L=[],$=g.length;l&&(g=reverse(g));for(var O=findBestRingOffset(g,y,S,x)*6,z=$-2,V=0;V<z;V+=2){var j=(O+V)%z+2;w[V+2]=g[j]-S[0],w[V+3]=g[j+1]-S[1]}if(w[0]=g[O]-S[0],w[1]=g[O+1]-S[1],n>0)for(var K=o/n,Z=-o/2;Z<=o/2;Z+=K){for(var q=Math.sin(Z),ie=Math.cos(Z),te=0,V=0;V<g.length;V+=2){var oe=w[V],re=w[V+1],he=y[V]-x[0],_e=y[V+1]-x[1],me=he*ie-_e*q,be=he*q+_e*ie;L[V]=me,L[V+1]=be;var Q=me-oe,Ne=be-re;te+=Q*Q+Ne*Ne}if(te<R){R=te,A=Z;for(var Ee=0;Ee<L.length;Ee++)c[Ee]=L[Ee]}}else for(var Ge=0;Ge<$;Ge+=2)c[Ge]=y[Ge]-x[0],c[Ge+1]=y[Ge+1]-x[1];a.push({from:w,to:c,fromCp:S,toCp:x,rotation:-A})}return a}function isCombineMorphing(r){return r.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(r,t,n){var o=SAVED_METHOD_PREFIX+t,a=r[o]||r[t];r[o]||(r[o]=r[t]);var l=n.replace,d=n.after,g=n.before;r[t]=function(){var y=arguments,S;return g&&g.apply(this,y),l?S=l.apply(this,y):S=a.apply(this,y),d&&d.apply(this,y),S}}function restoreMethod(r,t){var n=SAVED_METHOD_PREFIX+t;r[n]&&(r[t]=r[n],r[n]=null)}function applyTransformOnBeziers(r,t){for(var n=0;n<r.length;n++)for(var o=r[n],a=0;a<o.length;){var l=o[a],d=o[a+1];o[a++]=t[0]*l+t[2]*d+t[4],o[a++]=t[1]*l+t[3]*d+t[5]}}function prepareMorphPath(r,t){var n=r.getUpdatedPathProxy(),o=t.getUpdatedPathProxy(),a=alignBezierCurves(pathToBezierCurves(n),pathToBezierCurves(o)),l=a[0],d=a[1],g=r.getComputedTransform(),y=t.getComputedTransform();function S(){this.transform=null}g&&applyTransformOnBeziers(l,g),y&&applyTransformOnBeziers(d,y),saveAndModifyMethod(t,"updateTransform",{replace:S}),t.transform=null;var x=findBestMorphingRotation(l,d,10,Math.PI),w=[];saveAndModifyMethod(t,"buildPath",{replace:function(c){for(var A=t.__morphT,R=1-A,L=[],$=0;$<x.length;$++){var O=x[$],z=O.from,V=O.to,j=O.rotation*A,K=O.fromCp,Z=O.toCp,q=Math.sin(j),ie=Math.cos(j);lerp$1(L,K,Z,A);for(var te=0;te<z.length;te+=2){var oe=z[te],re=z[te+1],he=V[te],_e=V[te+1],me=oe*R+he*A,be=re*R+_e*A;w[te]=me*ie-be*q+L[0],w[te+1]=me*q+be*ie+L[1]}var Q=w[0],Ne=w[1];c.moveTo(Q,Ne);for(var te=2;te<z.length;){var he=w[te++],_e=w[te++],Ee=w[te++],Ge=w[te++],it=w[te++],Te=w[te++];Q===he&&Ne===_e&&Ee===it&&Ge===Te?c.lineTo(it,Te):c.bezierCurveTo(he,_e,Ee,Ge,it,Te),Q=it,Ne=Te}}}})}function morphPath(r,t,n){if(!r||!t)return t;var o=n.done,a=n.during;prepareMorphPath(r,t),t.__morphT=0;function l(){restoreMethod(t,"buildPath"),restoreMethod(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},defaults({during:function(d){t.dirtyShape(),a&&a(d)},done:function(){l(),o&&o()}},n)),t}function hilbert(r,t,n,o,a,l){var d=16;r=a===n?0:Math.round(32767*(r-n)/(a-n)),t=l===o?0:Math.round(32767*(t-o)/(l-o));for(var g=0,y,S=(1<<d)/2;S>0;S/=2){var x=0,w=0;(r&S)>0&&(x=1),(t&S)>0&&(w=1),g+=S*S*(3*x^w),w===0&&(x===1&&(r=S-1-r,t=S-1-t),y=r,r=t,t=y)}return g}function sortPaths(r){var t=1/0,n=1/0,o=-1/0,a=-1/0,l=map$1(r,function(g){var y=g.getBoundingRect(),S=g.getComputedTransform(),x=y.x+y.width/2+(S?S[4]:0),w=y.y+y.height/2+(S?S[5]:0);return t=Math.min(x,t),n=Math.min(w,n),o=Math.max(x,o),a=Math.max(w,a),[x,w]}),d=map$1(l,function(g,y){return{cp:g,z:hilbert(g[0],g[1],t,n,o,a),path:r[y]}});return d.sort(function(g,y){return g.z-y.z}).map(function(g){return g.path})}function defaultDividePath(r){return split(r.path,r.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(r,t,n){var o=[];function a(K){for(var Z=0;Z<K.length;Z++){var q=K[Z];isCombineMorphing(q)?a(q.childrenRef()):q instanceof Path$1&&o.push(q)}}a(r);var l=o.length;if(!l)return createEmptyReturn();var d=n.dividePath||defaultDividePath,g=d({path:t,count:l});if(g.length!==l)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();o=sortPaths(o),g=sortPaths(g);for(var y=n.done,S=n.during,x=n.individualDelay,w=new Transformable$1,c=0;c<l;c++){var A=o[c],R=g[c];R.parent=t,R.copyTransform(w),x||prepareMorphPath(A,R)}t.__isCombineMorphing=!0,t.childrenRef=function(){return g};function L(K){for(var Z=0;Z<g.length;Z++)g[Z].addSelfToZr(K)}saveAndModifyMethod(t,"addSelfToZr",{after:function(K){L(K)}}),saveAndModifyMethod(t,"removeSelfFromZr",{after:function(K){for(var Z=0;Z<g.length;Z++)g[Z].removeSelfFromZr(K)}});function $(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,restoreMethod(t,"addSelfToZr"),restoreMethod(t,"removeSelfFromZr")}var O=g.length;if(x)for(var z=O,V=function(){z--,z===0&&($(),y&&y())},c=0;c<O;c++){var j=x?defaults({delay:(n.delay||0)+x(c,O,o[c],g[c]),done:V},n):n;morphPath(o[c],g[c],j)}else t.__morphT=0,t.animateTo({__morphT:1},defaults({during:function(K){for(var Z=0;Z<O;Z++){var q=g[Z];q.__morphT=t.__morphT,q.dirtyShape()}S&&S(K)},done:function(){$();for(var K=0;K<r.length;K++)restoreMethod(r[K],"updateTransform");y&&y()}},n));return t.__zr&&L(t.__zr),{fromIndividuals:o,toIndividuals:g,count:O}}function separateMorph(r,t,n){var o=t.length,a=[],l=n.dividePath||defaultDividePath;function d(A){for(var R=0;R<A.length;R++){var L=A[R];isCombineMorphing(L)?d(L.childrenRef()):L instanceof Path$1&&a.push(L)}}if(isCombineMorphing(r)){d(r.childrenRef());var g=a.length;if(g<o)for(var y=0,S=g;S<o;S++)a.push(clonePath(a[y++%g]));a.length=o}else{a=l({path:r,count:o});for(var x=r.getComputedTransform(),S=0;S<a.length;S++)a[S].setLocalTransform(x);if(a.length!==o)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}a=sortPaths(a),t=sortPaths(t);for(var w=n.individualDelay,S=0;S<o;S++){var c=w?defaults({delay:(n.delay||0)+w(S,o,a[S],t[S])},n):n;morphPath(a[S],t[S],c)}return{fromIndividuals:a,toIndividuals:t,count:t.length}}function isMultiple(r){return isArray$1(r[0])}function prepareMorphBatches(r,t){for(var n=[],o=r.length,a=0;a<o;a++)n.push({one:r[a],many:[]});for(var a=0;a<t.length;a++){var l=t[a].length,d=void 0;for(d=0;d<l;d++)n[d%o].many.push(t[a][d])}for(var g=0,a=o-1;a>=0;a--)if(!n[a].many.length){var y=n[g].many;if(y.length<=1)if(g)g=0;else return n;var l=y.length,S=Math.ceil(l/2);n[a].many=y.slice(S,l),n[g].many=y.slice(0,S),g++}return n}var pathDividers={clone:function(r){for(var t=[],n=1-Math.pow(1-r.path.style.opacity,1/r.count),o=0;o<r.count;o++){var a=clonePath(r.path);a.setStyle("opacity",n),t.push(a)}return t},split:null};function applyMorphAnimation(r,t,n,o,a,l){if(!r.length||!t.length)return;var d=getAnimationConfig("update",o,a);if(!(d&&d.duration>0))return;var g=o.getModel("universalTransition").get("delay"),y=Object.assign({setToFinal:!0},d),S,x;isMultiple(r)&&(S=r,x=t),isMultiple(t)&&(S=t,x=r);function w(O,z,V,j,K){var Z=O.many,q=O.one;if(Z.length===1&&!K){var ie=z?Z[0]:q,te=z?q:Z[0];if(isCombineMorphing(ie))w({many:[ie],one:te},!0,V,j,!0);else{var oe=g?defaults({delay:g(V,j)},y):y;morphPath(ie,te,oe),l(ie,te,ie,te,oe)}}else for(var re=defaults({dividePath:pathDividers[n],individualDelay:g&&function(Ne,Ee,Ge,it){return g(Ne+V,j)}},y),he=z?combineMorph(Z,q,re):separateMorph(q,Z,re),_e=he.fromIndividuals,me=he.toIndividuals,be=_e.length,Q=0;Q<be;Q++){var oe=g?defaults({delay:g(Q,be)},y):y;l(_e[Q],me[Q],z?Z[Q]:O.one,z?O.one:Z[Q],oe)}}for(var c=S?S===r:r.length>t.length,A=S?prepareMorphBatches(x,S):prepareMorphBatches(c?t:r,[c?r:t]),R=0,L=0;L<A.length;L++)R+=A[L].many.length;for(var $=0,L=0;L<A.length;L++)w(A[L],c,$,R),$+=A[L].many.length}function getPathList(r){if(!r)return[];if(isArray$1(r)){for(var t=[],n=0;n<r.length;n++)t.push(getPathList(r[n]));return t}var o=[];return r.traverse(function(a){a instanceof Path$1&&!a.disableMorphing&&!a.invisible&&!a.ignore&&o.push(a)}),o}var DATA_COUNT_THRESHOLD=1e4,getUniversalTransitionGlobalStore=makeInner();function getGroupIdDimension(r){for(var t=r.dimensions,n=0;n<t.length;n++){var o=r.getDimensionInfo(t[n]);if(o&&o.otherDims.itemGroupId===0)return t[n]}}function flattenDataDiffItems(r){var t=[];return each$f(r,function(n){var o=n.data;if(!(o.count()>DATA_COUNT_THRESHOLD))for(var a=o.getIndices(),l=getGroupIdDimension(o),d=0;d<a.length;d++)t.push({dataGroupId:n.dataGroupId,data:o,dim:n.dim||l,divide:n.divide,dataIndex:d})}),t}function fadeInElement(r,t,n){r.traverse(function(o){o instanceof Path$1&&initProps(o,{style:{opacity:0}},t,{dataIndex:n,isFrom:!0})})}function removeEl(r){if(r.parent){var t=r.getComputedTransform();r.setLocalTransform(t),r.parent.remove(r)}}function stopAnimation(r){r.stopAnimation(),r.isGroup&&r.traverse(function(t){t.stopAnimation()})}function animateElementStyles(r,t,n){var o=getAnimationConfig("update",n,t);o&&r.traverse(function(a){if(a instanceof Displayable$1){var l=getOldStyle(a);l&&a.animateFrom({style:l},o)}})}function isAllIdSame(r,t){var n=r.length;if(n!==t.length)return!1;for(var o=0;o<n;o++){var a=r[o],l=t[o];if(a.data.getId(a.dataIndex)!==l.data.getId(l.dataIndex))return!1}return!0}function transitionBetween(r,t,n){var o=flattenDataDiffItems(r),a=flattenDataDiffItems(t);function l(O,z,V,j,K){(V||O)&&z.animateFrom({style:V&&V!==O?extend(extend({},V.style),O.style):O.style},K)}function d(O){for(var z=0;z<O.length;z++)if(O[z].dim)return O[z].dim}var g=d(o),y=d(a),S=!1;function x(O,z){return function(V){var j=V.data,K=V.dataIndex;if(z)return j.getId(K);var Z=V.dataGroupId,q=O?g||y:y||g,ie=q&&j.getDimensionInfo(q),te=ie&&ie.ordinalMeta;if(ie){var oe=j.get(ie.name,K);return te&&te.categories[oe]||oe+""}var re=j.getRawDataItem(K);return re&&re.groupId?re.groupId+"":Z||j.getId(K)}}var w=isAllIdSame(o,a),c={};if(!w)for(var A=0;A<a.length;A++){var R=a[A],L=R.data.getItemGraphicEl(R.dataIndex);L&&(c[L.id]=!0)}function $(O,z){var V=o[z],j=a[O],K=j.data.hostModel,Z=V.data.getItemGraphicEl(V.dataIndex),q=j.data.getItemGraphicEl(j.dataIndex);if(Z===q){q&&animateElementStyles(q,j.dataIndex,K);return}Z&&c[Z.id]||q&&(stopAnimation(q),Z?(stopAnimation(Z),removeEl(Z),S=!0,applyMorphAnimation(getPathList(Z),getPathList(q),j.divide,K,O,l)):fadeInElement(q,K,O))}new DataDiffer$1(o,a,x(!0,w),x(!1,w),null,"multiple").update($).updateManyToOne(function(O,z){var V=a[O],j=V.data,K=j.hostModel,Z=j.getItemGraphicEl(V.dataIndex),q=filter(map$1(z,function(ie){return o[ie].data.getItemGraphicEl(o[ie].dataIndex)}),function(ie){return ie&&ie!==Z&&!c[ie.id]});Z&&(stopAnimation(Z),q.length?(each$f(q,function(ie){stopAnimation(ie),removeEl(ie)}),S=!0,applyMorphAnimation(getPathList(q),getPathList(Z),V.divide,K,O,l)):fadeInElement(Z,K,V.dataIndex))}).updateOneToMany(function(O,z){var V=o[z],j=V.data.getItemGraphicEl(V.dataIndex);if(!(j&&c[j.id])){var K=filter(map$1(O,function(q){return a[q].data.getItemGraphicEl(a[q].dataIndex)}),function(q){return q&&q!==j}),Z=a[O[0]].data.hostModel;K.length&&(each$f(K,function(q){return stopAnimation(q)}),j?(stopAnimation(j),removeEl(j),S=!0,applyMorphAnimation(getPathList(j),getPathList(K),V.divide,Z,O[0],l)):each$f(K,function(q){return fadeInElement(q,Z,O[0])}))}}).updateManyToMany(function(O,z){new DataDiffer$1(z,O,function(V){return o[V].data.getId(o[V].dataIndex)},function(V){return a[V].data.getId(a[V].dataIndex)}).update(function(V,j){$(O[V],z[j])}).execute()}).execute(),S&&each$f(t,function(O){var z=O.data,V=z.hostModel,j=V&&n.getViewOfSeriesModel(V),K=getAnimationConfig("update",V,0);j&&V.isAnimationEnabled()&&K&&K.duration>0&&j.group.traverse(function(Z){Z instanceof Path$1&&!Z.animators.length&&Z.animateFrom({style:{opacity:0}},K)})})}function getSeriesTransitionKey(r){var t=r.getModel("universalTransition").get("seriesKey");return t||r.id}function convertArraySeriesKeyToString(r){return isArray$1(r)?r.sort().join(","):r}function getDivideShapeFromData(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(r,t){var n=createHashMap(),o=createHashMap(),a=createHashMap();return each$f(r.oldSeries,function(l,d){var g=r.oldDataGroupIds[d],y=r.oldData[d],S=getSeriesTransitionKey(l),x=convertArraySeriesKeyToString(S);o.set(x,{dataGroupId:g,data:y}),isArray$1(S)&&each$f(S,function(w){a.set(w,{key:x,dataGroupId:g,data:y})})}),each$f(t.updatedSeries,function(l){if(l.isUniversalTransitionEnabled()&&l.isAnimationEnabled()){var d=l.get("dataGroupId"),g=l.getData(),y=getSeriesTransitionKey(l),S=convertArraySeriesKeyToString(y),x=o.get(S);if(x)n.set(S,{oldSeries:[{dataGroupId:x.dataGroupId,divide:getDivideShapeFromData(x.data),data:x.data}],newSeries:[{dataGroupId:d,divide:getDivideShapeFromData(g),data:g}]});else if(isArray$1(y)){var w=[];each$f(y,function(R){var L=o.get(R);L.data&&w.push({dataGroupId:L.dataGroupId,divide:getDivideShapeFromData(L.data),data:L.data})}),w.length&&n.set(S,{oldSeries:w,newSeries:[{dataGroupId:d,data:g,divide:getDivideShapeFromData(g)}]})}else{var c=a.get(y);if(c){var A=n.get(c.key);A||(A={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:getDivideShapeFromData(c.data)}],newSeries:[]},n.set(c.key,A)),A.newSeries.push({dataGroupId:d,data:g,divide:getDivideShapeFromData(g)})}}}}),n}function querySeries(r,t){for(var n=0;n<r.length;n++){var o=t.seriesIndex!=null&&t.seriesIndex===r[n].seriesIndex||t.seriesId!=null&&t.seriesId===r[n].id;if(o)return n}}function transitionSeriesFromOpt(r,t,n,o){var a=[],l=[];each$f(normalizeToArray(r.from),function(d){var g=querySeries(t.oldSeries,d);g>=0&&a.push({dataGroupId:t.oldDataGroupIds[g],data:t.oldData[g],divide:getDivideShapeFromData(t.oldData[g]),dim:d.dimension})}),each$f(normalizeToArray(r.to),function(d){var g=querySeries(n.updatedSeries,d);if(g>=0){var y=n.updatedSeries[g].getData();l.push({dataGroupId:t.oldDataGroupIds[g],data:y,divide:getDivideShapeFromData(y),dim:d.dimension})}}),a.length>0&&l.length>0&&transitionBetween(a,l,o)}function installUniversalTransition(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,n,o){each$f(normalizeToArray(o.seriesTransition),function(a){each$f(normalizeToArray(a.to),function(l){for(var d=o.updatedSeries,g=0;g<d.length;g++)(l.seriesIndex!=null&&l.seriesIndex===d[g].seriesIndex||l.seriesId!=null&&l.seriesId===d[g].id)&&(d[g][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(t,n,o){var a=getUniversalTransitionGlobalStore(n);if(a.oldSeries&&o.updatedSeries&&o.optionChanged){var l=o.seriesTransition;if(l)each$f(normalizeToArray(l),function(A){transitionSeriesFromOpt(A,a,o,n)});else{var d=findTransitionSeriesBatches(a,o);each$f(d.keys(),function(A){var R=d.get(A);transitionBetween(R.oldSeries,R.newSeries,n)})}each$f(o.updatedSeries,function(A){A[SERIES_UNIVERSAL_TRANSITION_PROP]&&(A[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var g=t.getSeries(),y=a.oldSeries=[],S=a.oldDataGroupIds=[],x=a.oldData=[],w=0;w<g.length;w++){var c=g[w].getData();c.count()<DATA_COUNT_THRESHOLD&&(y.push(g[w]),S.push(g[w].get("dataGroupId")),x.push(c))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis:Axis$1,ChartView:ChartView$1,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,List:SeriesData$1,Model:Model$1,PRIORITY,SeriesModel:SeriesModel$1,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env:env$1,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));router.beforeEach((r,t,n)=>{const o=useLoadingStore();o.setloading(!0),console.log("Route is being updated"),console.log(o.loading),n()});router.afterEach((r,t,n)=>{const o=useLoadingStore();setTimeout(()=>{o.setloading(!1),console.log(" being end"),console.log(o.loading)},1e3),n&&console.log(n)});const app=createApp(App);app.config.globalProperties.$echarts=echarts;const pinia=createPinia();pinia.use(src_default);app.use(pinia);app.use(router);app.use(ViewUIPlus);app.mount("#app");
